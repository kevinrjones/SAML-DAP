(self.webpackChunkidentity_express_manager_ui=self.webpackChunkidentity_express_manager_ui||[]).push([[179],{2976:(nt,_e,m)=>{"use strict";m.d(_e,{NA:()=>h,VK:()=>e,de:()=>S});var n=m(4650);let e=(()=>{class y{constructor(){this.Server="http://localhost:5000/"}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275prov=n.Yz7({token:y,factory:y.\u0275fac}),y})();class h{constructor(){this.SharedSecret="Shared Secret",this.X509CertificateThumbprint="X509 Thumbprint",this.X509CertificateName="X509 Name",this.X509CertificateBase64="X509 Certificate Base64"}}let S=(()=>{class y{static get SITE_TITLE(){return"AdminUI"}}return y.checkHealthIdentityServerDocs="documentation/Troubleshooting/Unable_to_contact_IdentityServer.html",y.loginRedirectLoopDocs="documentation/Troubleshooting/Login_redirect_loop.html",y.sameSiteDocs="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie/SameSite",y.defaultEmbeddedUserName="info@rocksolidknowledge.com",y})()},1909:(nt,_e,m)=>{"use strict";m.d(_e,{J:()=>P});var n=m(3212),e=m(4707),h=m(4650),S=m(529),y=m(8564);let w=(()=>{class U extends n._{constructor(M,B){super(),this.http=M,this.headersService=B,this.userSubject=new e.t(1),this.actionUrl="clients",this.headers=this.headersService.setHeaders()}getAudits(M,B,V,Q,Y,fe,J){const ee=this.buildParams(M,V,B,Q,Y,fe,J);return this.http.get(`${this.actionUrl}/${M.resourceName}/auditedEvents`,{headers:this.headers,params:ee})}}return U.\u0275fac=function(M){return new(M||U)(h.LFG(S.eN),h.LFG(y.s))},U.\u0275prov=h.Yz7({token:U,factory:U.\u0275fac}),U})();var f=m(2976),x=m(590),b=m(4608),g=m(1481),N=m(9383),R=m(6895),k=m(7356);function O(U,W){if(1&U&&h._UZ(0,"app-audits-list",2),2&U){const M=h.oxw();h.Q6J("resourceName",M.clientId)}}let P=(()=>{class U{constructor(M,B,V){this.clientsService=M,this.titleService=B,this.translate=V}ngOnInit(){this.clientsService.unsavedCache$.pipe((0,x.P)()).subscribe(B=>{this.clientId=B.id,this.clientName=B.clientName});const M=this.translate.instant("Users.Singular")+" "+this.clientName+" "+this.translate.instant("Nav.Audits")+" - "+f.de.SITE_TITLE;this.titleService.setTitle(M)}}return U.\u0275fac=function(M){return new(M||U)(h.Y36(b.Z),h.Y36(g.Dx),h.Y36(N.sK))},U.\u0275cmp=h.Xpm({type:U,selectors:[["app-audit-clients"]],features:[h._Bn([{provide:n._,useClass:w}])],decls:2,vars:1,consts:[["id","clientList"],[3,"resourceName",4,"ngIf"],[3,"resourceName"]],template:function(M,B){1&M&&(h.TgZ(0,"div",0),h.YNc(1,O,1,1,"app-audits-list",1),h.qZA()),2&M&&(h.xp6(1),h.Q6J("ngIf",B.clientId))},dependencies:[R.O5,k.$],encapsulation:2}),U})()},8413:(nt,_e,m)=>{"use strict";m.d(_e,{P:()=>b});var n=m(6895),e=m(9383),h=m(388),S=m(4022),y=m(4380),w=m(9650),f=m(4091),x=m(4650);let b=(()=>{class g{}return g.\u0275fac=function(R){return new(R||g)},g.\u0275mod=x.oAB({type:g}),g.\u0275inj=x.cJS({imports:[h.zk,e.aw,n.ez,y.t,S.p,w.I,f.G]}),g})()},964:(nt,_e,m)=>{"use strict";m.d(_e,{z:()=>te});var n=m(4650),e=m(572),h=m(7235),S=m(9655),y=m(1837),w=m(3110),f=m(9383),x=m(8285),b=m(388),g=m(6895),N=m(2808),R=m(8163),k=m(7608),O=m(2830);const P=["deleteCertModal"];function U($,ue){if(1&$){const me=n.EpF();n.TgZ(0,"button",12),n.NdJ("click",function(){n.CHM(me);const ye=n.oxw(3);return n.KtG(ye.openDeleteModal(ye.certificates[0]))}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&$){const me=n.oxw(3);n.Q6J("disabled",me.deleteCertDisabled),n.xp6(1),n.hij(" ",n.lcZ(2,2,"Clients.Saml.DeleteCert")," ")}}function W($,ue){if(1&$&&(n.TgZ(0,"app-action-bar",9),n.ynx(1,10),n.Hsn(2),n.YNc(3,U,3,4,"button",11),n.BQk(),n.qZA()),2&$){const me=n.oxw(2);n.xp6(3),n.Q6J("ngIf",(null==me.certificates?null:me.certificates.length)>0)}}function M($,ue){1&$&&(n.TgZ(0,"div",13),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&$&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Clients.Saml.CannotDeleteResponseCert")," "))}function B($,ue){1&$&&(n.TgZ(0,"div",14),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&$&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Clients.NoCertificates")," "))}const V=function($){return[$]};function Q($,ue){if(1&$&&(n.ynx(0),n.TgZ(1,"app-form-row",15),n._UZ(2,"app-readonly",16),n.qZA(),n.TgZ(3,"app-form-row",15),n._UZ(4,"app-readonly",16),n.qZA(),n.TgZ(5,"app-form-row",17),n._UZ(6,"app-readonly",16)(7,"p",18),n.qZA(),n.BQk()),2&$){const me=n.oxw(2);n.xp6(1),n.Q6J("label","Common.Subject"),n.xp6(1),n.Q6J("values",n.VKq(11,V,me.readOnlyCertificate.subject))("fieldType",me.ReadOnlyFieldType.Single),n.xp6(1),n.Q6J("label","Common.Thumbprint"),n.xp6(1),n.Q6J("values",n.VKq(13,V,me.readOnlyCertificate.thumbprint))("fieldType",me.ReadOnlyFieldType.Single),n.xp6(1),n.Q6J("label","Common.ExpiresOn")("isLast",!0),n.xp6(1),n.Q6J("values",n.VKq(15,V,me.readOnlyCertificate.expiration))("fieldType",me.ReadOnlyFieldType.Single),n.xp6(1),n.Q6J("innerHTML",me.displayExpiry(null==me.readOnlyCertificate?null:me.readOnlyCertificate.expiration.MainText),n.oJD)}}function Y($,ue){if(1&$&&(n.TgZ(0,"div",4),n.YNc(1,W,4,1,"app-action-bar",5),n.YNc(2,M,3,3,"div",6),n.YNc(3,B,3,3,"div",7),n.YNc(4,Q,8,17,"ng-container",8),n.qZA()),2&$){const me=n.oxw();n.xp6(1),n.Q6J("ngIf",!me.isReadOnly),n.xp6(1),n.Q6J("ngIf",me.deleteCertDisabled&&!me.isReadOnly),n.xp6(1),n.Q6J("ngIf",(null==me.certificates?null:me.certificates.length)<1),n.xp6(1),n.Q6J("ngIf",1==(null==me.certificates?null:me.certificates.length)&&me.readOnlyCertificate)}}function fe($,ue){if(1&$){const me=n.EpF();n.TgZ(0,"app-data-table",19),n.NdJ("onDelete",function(ye){n.CHM(me);const qe=n.oxw();return n.KtG(qe.openDeleteModal(ye))}),n._UZ(1,"app-data-table-column",20)(2,"app-data-table-column",21)(3,"app-data-table-column",22),n.qZA()}if(2&$){const me=n.oxw();n.Q6J("isReadOnly",me.isReadOnly)("rows",me.certificates)("norowslabel","Clients.NoCertificates")("actions",me.dataTableActions),n.xp6(1),n.Q6J("prop","subject")("title","Common.Subject")("cellClasses","tw-max-w-0 tw-truncate"),n.xp6(1),n.Q6J("prop","thumbprint")("title","Common.Thumbprint")("headClasses","tw-hidden md:tw-table-cell")("cellClasses","tw-hidden tw-max-w-0 tw-truncate md:tw-table-cell"),n.xp6(1),n.Q6J("prop","expiration")("formatter",me.displayExpiry.bind(me))("title","Common.ExpiresOn")("headClasses","tw-hidden tw-w-40 xs:tw-table-cell lg:tw-w-64")("cellClasses","tw-hidden xs:tw-table-cell")}}const J=function(){return{animated:!1,backdrop:"static"}};function ee($,ue){if(1&$){const me=n.EpF();n.TgZ(0,"div",23,24)(2,"div",25)(3,"div",26)(4,"div",27)(5,"h5",28),n._uU(6),n.ALo(7,"translate"),n.qZA(),n.TgZ(8,"button",29),n.NdJ("click",function(){n.CHM(me);const ye=n.oxw();return n.KtG(ye.closeDeleteModal())}),n._UZ(9,"span",30),n.TgZ(10,"span",31),n._uU(11),n.ALo(12,"translate"),n.qZA()()(),n.TgZ(13,"div",32),n._UZ(14,"p",33),n.ALo(15,"translate"),n.qZA(),n._UZ(16,"div",34),n.TgZ(17,"div",35)(18,"div",36)(19,"div",37)(20,"button",38),n.NdJ("click",function(){n.CHM(me);const ye=n.oxw();return n.KtG(ye.removeCert())}),n._uU(21),n.ALo(22,"translate"),n.qZA()(),n.TgZ(23,"button",39),n.NdJ("click",function(){n.CHM(me);const ye=n.oxw();return n.KtG(ye.closeDeleteModal())}),n._uU(24),n.ALo(25,"translate"),n.qZA()()()()()()}2&$&&(n.Q6J("config",n.DdM(16,J)),n.xp6(6),n.Oqu(n.lcZ(7,6,"Common.Delete.Confirm")),n.xp6(5),n.Oqu(n.lcZ(12,8,"Common.Close")),n.xp6(3),n.Q6J("innerHTML",n.lcZ(15,10,"Common.Delete.Warning"),n.oJD),n.xp6(7),n.Oqu(n.lcZ(22,12,"Common.Delete.Title")),n.xp6(3),n.Oqu(n.lcZ(25,14,"Common.Delete.No")))}const G=[[["","addButton",""]]],E=["[addButton]"];let te=(()=>{class ${constructor(me,we){this.translateService=me,this.dataTableService=we,this.showSingle=!1,this.delete=new n.vpe,this.prettyDateTimePipe=new w.Xm}set isReadOnly(me){this._isReadOnly=me||!1}get isReadOnly(){return this._isReadOnly}ngOnDestroy(){this.dtsSubscription.unsubscribe()}ngOnInit(){this.dtsSubscription=this.dataTableService.deleteRowEvent.subscribe(me=>{this.openDeleteModal(me)})}ngOnChanges(){this.dataTableActions=this.isReadOnly?[]:[e.Xz.Delete],this.readOnlyCertificate=this.showSingle&&this.certificates.length>0?new h.$(this.certificates[0]):null}openDeleteModal(me){this.certToDelete=this.showSingle?this.certificates[0]:this.certificates[me],this.deleteCertModal.show()}closeDeleteModal(){this.certToDelete=null,this.deleteCertModal.hide()}removeCert(){if(null==this.certToDelete)throw new Error("Delete called without target");this.delete.emit(this.certToDelete),this.deleteCertModal.hide()}displayExpiry(me){let we=y.ou.fromISO(me);const ye=this.daysUntilExpiry(we);if(this.warnOfExpiry(we)){let qe='<b class="tw-text-red-500"><span class="fas fa-exclamation-triangle tw-mr-1" aria-hidden="true"></span>{0} {1} {2}</b>';return qe=qe.replace("{0}",this.translateService.instant("Common.ExpiresIn")),qe=qe.replace("{1}",ye.toString()),qe=qe.replace("{2}",this.translateService.instant("Common.UntilExpiry")),qe}return this.prettyDateTimePipe.transform(me)}warnOfExpiry(me){return this.daysUntilExpiry(me)<=30&&this.daysUntilExpiry(me)>=1}daysUntilExpiry(me){const we=me.toMillis()-y.ou.now().toMillis();return Math.round(we/864e5)}get ReadOnlyFieldType(){return S.O}}return $.\u0275fac=function(me){return new(me||$)(n.Y36(f.sK),n.Y36(x.n))},$.\u0275cmp=n.Xpm({type:$,selectors:[["app-saml-cert-list"]],viewQuery:function(me,we){if(1&me&&n.Gf(P,5),2&me){let ye;n.iGM(ye=n.CRH())&&(we.deleteCertModal=ye.first)}},inputs:{certificates:"certificates",deleteCertDisabled:"deleteCertDisabled",showSingle:"showSingle",isReadOnly:"isReadOnly"},outputs:{delete:"delete"},features:[n.TTD],ngContentSelectors:E,decls:4,vars:3,consts:[["id","CertificateList"],["class","tw-mb-4",4,"ngIf"],[3,"isReadOnly","rows","norowslabel","actions","onDelete",4,"ngIf"],["bsModal","","id","deleteCertModal","class","modal","role","dialog","aria-hidden","true","tabindex","-1",3,"config",4,"ngIf"],[1,"tw-mb-4"],["id","deleteBtn",4,"ngIf"],["class","tw-alert-warning tw-mb-6","role","alert",4,"ngIf"],["class","tw-alert","role","alert",4,"ngIf"],[4,"ngIf"],["id","deleteBtn"],["right",""],["id","deleteCertBtn","class","tw-btn-danger","type","button",3,"disabled","click",4,"ngIf"],["id","deleteCertBtn","type","button",1,"tw-btn-danger",3,"disabled","click"],["role","alert",1,"tw-alert-warning","tw-mb-6"],["role","alert",1,"tw-alert"],[3,"label"],[3,"values","fieldType"],[3,"label","isLast"],[1,"tw-form-text",3,"innerHTML"],[3,"isReadOnly","rows","norowslabel","actions","onDelete"],[3,"prop","title","cellClasses"],[3,"prop","title","headClasses","cellClasses"],[3,"prop","formatter","title","headClasses","cellClasses"],["bsModal","","id","deleteCertModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["deleteCertModal","bs-modal"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-center","scrollbars"],[3,"innerHTML"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],[1,"tw-btn-danger",3,"click"],[1,"tw-btn-link","tw--mr-4",3,"click"]],template:function(me,we){1&me&&(n.F$t(G),n.TgZ(0,"div",0),n.YNc(1,Y,5,4,"div",1),n.YNc(2,fe,4,16,"app-data-table",2),n.qZA(),n.YNc(3,ee,26,17,"div",3)),2&me&&(n.xp6(1),n.Q6J("ngIf",we.showSingle),n.xp6(1),n.Q6J("ngIf",!we.showSingle),n.xp6(1),n.Q6J("ngIf",!we.isReadOnly))},dependencies:[b.oB,g.O5,e.Qj,N.E,R.K,k.L,O.f,f.X$],encapsulation:2,changeDetection:0}),$})()},7331:(nt,_e,m)=>{"use strict";m.d(_e,{l:()=>P});var n=m(6297),e=m(3111),h=m(590),S=m(9506),y=m(3334),w=m(4650),f=m(7481),x=m(9383),b=m(6895),g=m(5925);function N(U,W){1&U&&(w._UZ(0,"app-simple-loader",7),w.ALo(1,"translate")),2&U&&w.Q6J("text",w.lcZ(1,1,"Clients.Import.Wizard.CompleteImport.ImportInProgress"))}function R(U,W){if(1&U&&(w.TgZ(0,"div",8)(1,"div")(2,"h2",9),w._uU(3),w.ALo(4,"translate"),w.qZA(),w.TgZ(5,"span",10),w._uU(6),w.qZA()()()),2&U){const M=w.oxw();w.xp6(3),w.Oqu(w.lcZ(4,2,"Clients.Import.Wizard.CompleteImport.ImportComplete")),w.xp6(3),w.Oqu(M.getSuccessMessage())}}function k(U,W){if(1&U){const M=w.EpF();w.TgZ(0,"div",11)(1,"button",12),w.NdJ("click",function(){w.CHM(M);const V=w.oxw();return w.KtG(V.downloadSecrets())}),w._uU(2),w.ALo(3,"translate"),w.qZA()()}if(2&U){const M=w.oxw();w.xp6(1),w.Q6J("disabled",M.disableButtons),w.xp6(1),w.hij(" ",w.lcZ(3,2,"Clients.Import.Wizard.CompleteImport.DownloadSecrets")," ")}}const O=function(U,W){return{"tw-btn-link":U,"tw-btn-success":W}};let P=(()=>{class U extends S.n{constructor(M,B,V){super(),this.clientImportService=M,this.importWizardService=B,this.translate=V,this.secretsDownloaded=!1,this.canDownloadSecrets=!1,this.disableButtons=!1,this.storage=sessionStorage}ngOnInit(){this.importWizardController.disableCloseButton=!0,this.disableButtons=!0,this.isLoading=!0,this.importWizardService.cache.pipe((0,h.P)()).subscribe(M=>{const B=new n.Zy;B.clients=[],B.protectedResources=[],M.forEach(V=>{if(V.selected){if(V.resourceType===e.JR.Client){const Q=new n.rJ;Q.useExistingSecrets=V.useExistingSecrets,Q.useExistingCertificates=V.useExistingCertificates,Q.resourceId=V.identifier,Q.secrets=V.secrets,V.certificates&&(V.certificates.EncryptionCertificate&&(Q.certificates.encryptionCertificate=V.certificates.EncryptionCertificate.base64Cert),V.certificates.SigningCertificates&&(Q.certificates.signingCertificates=V.certificates.SigningCertificates.map(Y=>Y.base64Cert))),B.clients.push(Q)}V.secrets&&V.secrets.length>0&&(this.canDownloadSecrets=!0)}V.resourceType===e.JR.ProtectedResource&&(this.buildAndAddProtectedResourceConfiguration(M,V,B.protectedResources),V.secrets&&V.secrets.length>0&&(this.canDownloadSecrets=!0))}),this.importConfiguration=B,this.completeImport()})}downloadSecrets(){this.importWizardService.downloadClientSecretsFromCache(),this.secretsDownloaded=!0}buildAndAddProtectedResourceConfiguration(M,B,V){B.dependantClients.forEach(Q=>{const Y=M.find(fe=>fe.identifier===Q.identifier);if(Y&&Y.selected){const fe=new n.rJ;fe.useExistingSecrets=B.useExistingSecrets,fe.resourceId=B.identifier,fe.secrets=B.secrets,V.push(fe)}})}completeImport(){const M=this.getFileInStorage();this.clientImportService.completeImport(M,this.importConfiguration).subscribe(()=>{this.isLoading=!1,this.importWizardController.disableCloseButton=!1,this.disableButtons=!1},B=>{this.importWizardService.resetImport.next("CompleteImportFailed")})}getSuccessMessage(){const M=this.importConfiguration.clients.length;let B=this.translate.instant("Clients.Import.Wizard.CompleteImport.ImportSuccess");return 1!==M&&(B=this.translate.instant("Clients.Import.Wizard.CompleteImport.ImportSuccessMultiple"),B=B.replace("{0}",M)),B}getFileInStorage(){return this.storage.getItem("importFile")}canNext(){return!this.isLoading}goNext(){!this.canDownloadSecrets||this.secretsDownloaded?this.quit():this.importWizardController.insertAndOpenStep(y.K.importDownloadWarning)}}return U.\u0275fac=function(M){return new(M||U)(w.Y36(n.wf),w.Y36(f.U),w.Y36(x.sK))},U.\u0275cmp=w.Xpm({type:U,selectors:[["app-complete-import"]],features:[w.qOj],decls:9,vars:11,consts:[[3,"text",4,"ngIf"],[1,"modal-body"],["class","tw-alert-success",4,"ngIf"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],["class","tw-mr-auto",4,"ngIf"],["id","nextBtn",1,"tw--mr-4",3,"ngClass","disabled","click"],[3,"text"],[1,"tw-alert-success"],[1,"tw-block","tw-font-semibold"],[1,"tw-block","tw-mt-1"],[1,"tw-mr-auto"],["id","downloadBtn",1,"tw-btn-success",3,"disabled","click"]],template:function(M,B){1&M&&(w.YNc(0,N,2,3,"app-simple-loader",0),w.TgZ(1,"div",1),w.YNc(2,R,7,4,"div",2),w.qZA(),w.TgZ(3,"div",3)(4,"div",4),w.YNc(5,k,4,4,"div",5),w.TgZ(6,"button",6),w.NdJ("click",function(){return B.goNext()}),w._uU(7),w.ALo(8,"translate"),w.qZA()()()),2&M&&(w.Q6J("ngIf",B.isLoading),w.xp6(2),w.Q6J("ngIf",!B.isLoading),w.xp6(3),w.Q6J("ngIf",B.canDownloadSecrets),w.xp6(1),w.Q6J("ngClass",w.WLB(8,O,B.canDownloadSecrets,!B.canDownloadSecrets))("disabled",B.disableButtons),w.xp6(1),w.hij(" ",w.lcZ(8,6,"Clients.Import.Wizard.CompleteImport.FinishImport")," "))},dependencies:[b.mk,b.O5,g.w,x.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),U})()},8007:(nt,_e,m)=>{"use strict";m.d(_e,{V:()=>ct});var n=m(6895),e=m(4006),h=m(8185),S=m(2979),y=m(388),w=m(9241),f=m(2320),x=m(5503),b=m(8117),g=m(9327),N=m(4995),R=m(3883),k=m(9002),O=m(5302),P=m(3499),U=m(4022),W=m(4362),M=m(6980),B=m(7023),V=m(8265),Q=m(1230),Y=m(4380),fe=m(5898),J=m(9650),ee=m(1274),G=m(8975),E=m(9383),te=m(5785),$=m(6493),ue=m(7770),me=m(8761),we=m(1436),ye=m(5971),qe=m(5084),De=m(9679),Ge=m(8413),ve=m(5150),c=m(9536),tt=m(4091),_t=m(4650);let ct=(()=>{class rt{}return rt.\u0275fac=function(qt){return new(qt||rt)},rt.\u0275mod=_t.oAB({type:rt}),rt.\u0275inj=_t.cJS({providers:[g.A,N.U,P.K,ve.N,c.S,O.L,R.i,k.T,b.S],imports:[n.ez,h.Bz,e.u5,x.D,e.UX,w.P4,Q.M,f.z8,y.zk,me.W,V.j,E.aw,B._,S.fQ,W.l,ee.T,De.F,qe.y,te.U,U.p,ue.t,ye.s,M.K,Y.t,J.I,G.d,we.W,fe.T,$.l,Ge.P,tt.G]}),rt})()},7199:(nt,_e,m)=>{"use strict";m.d(_e,{U:()=>fe});var n=m(590),e=m(4650),h=m(9470),S=m(4608),y=m(3570),w=m(6895),f=m(8185),x=m(6478),b=m(7073);const g=["AdvancedTabs"],N=["tokensComponent"];function R(J,ee){1&J&&e._UZ(0,"app-custom-tab",3),2&J&&e.Q6J("tabTitle","Common.Consent")("tabValue","consent")}function k(J,ee){1&J&&e._UZ(0,"app-custom-tab",3),2&J&&e.Q6J("tabTitle","Clients.Tokens.Title")("tabValue","tokens")}function O(J,ee){1&J&&e._UZ(0,"app-custom-tab",3),2&J&&e.Q6J("tabTitle","Common.RefreshTokens")("tabValue","refreshtokens")}function P(J,ee){1&J&&e._UZ(0,"app-custom-tab",3),2&J&&e.Q6J("tabTitle","Common.SingeSignOut")("tabValue","singlesignout")}function U(J,ee){1&J&&e._UZ(0,"app-custom-tab",3),2&J&&e.Q6J("tabTitle","Common.DeviceFlow")("tabValue","deviceflow")}function W(J,ee){1&J&&e._UZ(0,"app-custom-tab",3),2&J&&e.Q6J("tabTitle","Common.PKCE")("tabValue","pkce")}function M(J,ee){1&J&&e._UZ(0,"app-custom-tab",3),2&J&&e.Q6J("tabTitle","Index.Claims.Heading")("tabValue","claims")}function B(J,ee){1&J&&e._UZ(0,"app-custom-tab",3),2&J&&e.Q6J("tabTitle","Common.GrantTypes")("tabValue","granttypes")}function V(J,ee){1&J&&e._UZ(0,"app-custom-tab",3),2&J&&e.Q6J("tabTitle","Common.IdentityProviders")("tabValue","identityproviders")}function Q(J,ee){1&J&&e._UZ(0,"app-custom-tab",3),2&J&&e.Q6J("tabTitle","Common.Properties")("tabValue","properties")}function Y(J,ee){1&J&&e._UZ(0,"app-custom-tab",3),2&J&&e.Q6J("tabTitle","Common.Other")("tabValue","other")}let fe=(()=>{class J{constructor(G,E,te){this.clientViewService=G,this.clientCachingService=E,this.dialogService=te}ngOnInit(){this.clientCachingService.unsavedCache$.pipe((0,n.P)()).subscribe(G=>{this.client=JSON.parse(JSON.stringify(G))})}}return J.\u0275fac=function(G){return new(G||J)(e.Y36(h.a),e.Y36(S.Z),e.Y36(y.x))},J.\u0275cmp=e.Xpm({type:J,selectors:[["app-client-advanced"]],viewQuery:function(G,E){if(1&G&&(e.Gf(g,7),e.Gf(N,7)),2&G){let te;e.iGM(te=e.CRH())&&(E.advancedTabs=te.first),e.iGM(te=e.CRH())&&(E.tokenComp=te.first)}},decls:14,vars:12,consts:[[3,"pillMode"],[3,"tabTitle","tabValue",4,"ngIf"],["id","editClientAdvanced"],[3,"tabTitle","tabValue"]],template:function(G,E){1&G&&(e.TgZ(0,"app-custom-tabs",0),e.YNc(1,R,1,2,"app-custom-tab",1),e.YNc(2,k,1,2,"app-custom-tab",1),e.YNc(3,O,1,2,"app-custom-tab",1),e.YNc(4,P,1,2,"app-custom-tab",1),e.YNc(5,U,1,2,"app-custom-tab",1),e.YNc(6,W,1,2,"app-custom-tab",1),e.YNc(7,M,1,2,"app-custom-tab",1),e.YNc(8,B,1,2,"app-custom-tab",1),e.YNc(9,V,1,2,"app-custom-tab",1),e.YNc(10,Q,1,2,"app-custom-tab",1),e.YNc(11,Y,1,2,"app-custom-tab",1),e.qZA(),e.TgZ(12,"div",2),e._UZ(13,"router-outlet"),e.qZA()),2&G&&(e.Q6J("pillMode",!0),e.xp6(1),e.Q6J("ngIf",E.clientViewService.consent.display),e.xp6(1),e.Q6J("ngIf",E.clientViewService.tokens.display),e.xp6(1),e.Q6J("ngIf",E.clientViewService.refreshTokens.display),e.xp6(1),e.Q6J("ngIf",E.clientViewService.ssoTab.display),e.xp6(1),e.Q6J("ngIf",E.clientViewService.deviceFlow.display),e.xp6(1),e.Q6J("ngIf",E.clientViewService.pkce.display),e.xp6(1),e.Q6J("ngIf",E.clientViewService.claims.display),e.xp6(1),e.Q6J("ngIf",E.clientViewService.grantTypes.display),e.xp6(1),e.Q6J("ngIf",E.clientViewService.identityProviders.display),e.xp6(1),e.Q6J("ngIf",E.clientViewService.properties.display),e.xp6(1),e.Q6J("ngIf",E.clientViewService.other.display))},dependencies:[w.O5,f.lC,x.v,b.x],encapsulation:2}),J})()},1018:(nt,_e,m)=>{"use strict";m.d(_e,{h:()=>n});class n{}},5150:(nt,_e,m)=>{"use strict";m.d(_e,{N:()=>h});var n=m(1135),e=m(4650);let h=(()=>{class S{constructor(){this.unsavedCache=new n.X(null),this.unsavedCache$=this.unsavedCache.asObservable(),this.savedCache=new n.X(null),this.savedCache$=this.savedCache.asObservable(),this.componentDirtyValidMap=new Map}onSave(){this.componentDirtyValidMap.clear()}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac}),S})()},9536:(nt,_e,m)=>{"use strict";m.d(_e,{S:()=>h});var n=m(1135),e=m(4650);let h=(()=>{class S{constructor(){this.unsavedCache=new n.X(null),this.unsavedCache$=this.unsavedCache.asObservable(),this.savedCache=new n.X(null),this.savedCache$=this.savedCache.asObservable(),this.componentDirtyValidMap=new Map}onClientSave(){this.savedCache.next(this.unsavedCache.value),this.componentDirtyValidMap.clear()}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac}),S})()},3351:(nt,_e,m)=>{"use strict";m.d(_e,{A:()=>V,z:()=>B});var n=m(5241),e=m(2976),h=m(4650),S=m(4006),y=m(8185),w=m(1481),f=m(7733),x=m(146),b=m(9383),g=m(426),N=m(6895),R=m(2294),k=m(2979);function O(Q,Y){1&Q&&(h.TgZ(0,"span",21),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&Q&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"Common.Disabled")," "))}function P(Q,Y){1&Q&&(h.TgZ(0,"div",22),h._UZ(1,"router-outlet"),h.qZA())}const U=function(Q,Y){return{title:Q,link:Y}},W=function(Q){return[Q]},M=function(){return["active"]};function B(){return Object.assign(new n.gd,{closeOthers:!0})}let V=(()=>{class Q{constructor(fe,J,ee,G,E,te,$,ue){this.fb=fe,this.route=J,this.router=ee,this.titleService=G,this.protectedResourceService=E,this.claimTypesService=te,this.translate=$,this.scopesClaimService=ue}ngOnInit(){this.protectedResourceSubscription=this.protectedResourceService.getCachedProtectedResource().subscribe(fe=>{this.protectedResource=fe;const J=this.translate.instant("ProtectedResources.Title")+" "+this.protectedResource.displayName+" "+this.translate.instant("Nav.Details")+" - "+e.de.SITE_TITLE;this.titleService.setTitle(J)}),this.claimTypesService.getClaimTypes(null,null,!0).subscribe({next:fe=>{this.scopesClaimService.setClaimTypes(fe)}})}ngOnDestroy(){this.protectedResourceSubscription.unsubscribe()}mobRoute(fe){this.router.navigate([fe],{relativeTo:this.route})}}return Q.\u0275fac=function(fe){return new(fe||Q)(h.Y36(S.QS),h.Y36(y.gz),h.Y36(y.F0),h.Y36(w.Dx),h.Y36(f.m),h.Y36(x.M),h.Y36(b.sK),h.Y36(g.q))},Q.\u0275cmp=h.Xpm({type:Q,selectors:[["app-view-protectedresource"]],features:[h._Bn([{provide:n.gd,useFactory:B}])],decls:53,vars:65,consts:[[3,"title","crumbs","hasTabs","isReadOnly","isReserved"],["tabs",""],[1,"tw-p-4","md:tw-hidden"],["for","nav-sub-menu",1,"sr-only"],[1,"tw-form-select"],["id","nav-sub-menu",1,"tw-form-control",3,"change"],["value","details"],["value","scopes"],["value","claims"],["value","secrets"],["value","properties"],["role","tablist",1,"tabs","tw-hidden","md:tw-flex"],[1,"tabs__item"],["routerLink","details","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["routerLink","scopes","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["routerLink","claims","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["routerLink","secrets","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["routerLink","properties","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["badge",""],["class","tw-pill-warning tw-mr-2",4,"ngIf"],["id","viewProtectedResource","class","tw-container tw-mx-auto",4,"ngIf"],[1,"tw-pill-warning","tw-mr-2"],["id","viewProtectedResource",1,"tw-container","tw-mx-auto"]],template:function(fe,J){1&fe&&(h.TgZ(0,"app-title-bar",0),h.ALo(1,"translate"),h.ALo(2,"localize"),h.ynx(3,1),h.TgZ(4,"div",2)(5,"label",3),h._uU(6),h.ALo(7,"translate"),h.qZA(),h.TgZ(8,"div",4)(9,"select",5),h.NdJ("change",function(G){return J.mobRoute(G.target.value)}),h.TgZ(10,"option",6),h._uU(11),h.ALo(12,"translate"),h.qZA(),h.TgZ(13,"option",6),h._uU(14),h.ALo(15,"translate"),h.qZA(),h.TgZ(16,"option",7),h._uU(17),h.ALo(18,"translate"),h.qZA(),h.TgZ(19,"option",8),h._uU(20),h.ALo(21,"translate"),h.qZA(),h.TgZ(22,"option",9),h._uU(23),h.ALo(24,"translate"),h.qZA(),h.TgZ(25,"option",10),h._uU(26),h.ALo(27,"translate"),h.qZA()()()(),h.TgZ(28,"ul",11),h.ALo(29,"translate"),h.TgZ(30,"li",12)(31,"button",13),h._uU(32),h.ALo(33,"translate"),h.qZA()(),h.TgZ(34,"li",12)(35,"button",14),h._uU(36),h.ALo(37,"translate"),h.qZA()(),h.TgZ(38,"li",12)(39,"button",15),h._uU(40),h.ALo(41,"translate"),h.qZA()(),h.TgZ(42,"li",12)(43,"button",16),h._uU(44),h.ALo(45,"translate"),h.qZA()(),h.TgZ(46,"li",12)(47,"button",17),h._uU(48),h.ALo(49,"translate"),h.qZA()()(),h.BQk(),h.ynx(50,18),h.YNc(51,O,3,3,"span",19),h.BQk(),h.qZA(),h.YNc(52,P,2,0,"div",20)),2&fe&&(h.Q6J("title",null==J.protectedResource?null:J.protectedResource.name)("crumbs",h.VKq(58,W,h.WLB(55,U,h.lcZ(1,25,"ProtectedResources.Title"),h.lcZ(2,27,"/protectedresources"))))("hasTabs",!0)("isReadOnly",!0)("isReserved",J.protectedResource.nonEditable),h.xp6(6),h.Oqu(h.lcZ(7,29,"Nav.SubMenu")),h.xp6(5),h.hij("",h.lcZ(12,31,"Nav.SubMenu"),"..."),h.xp6(3),h.Oqu(h.lcZ(15,33,"Nav.Details")),h.xp6(3),h.Oqu(h.lcZ(18,35,"Nav.Scopes")),h.xp6(3),h.Oqu(h.lcZ(21,37,"Nav.Claims")),h.xp6(3),h.Oqu(h.lcZ(24,39,"Nav.Secrets")),h.xp6(3),h.Oqu(h.lcZ(27,41,"Nav.Properties")),h.xp6(2),h.uIk("aria-label",h.lcZ(29,43,"Nav.SubMenu")),h.xp6(3),h.Q6J("routerLinkActive",h.DdM(60,M)),h.xp6(1),h.Oqu(h.lcZ(33,45,"Nav.Details")),h.xp6(3),h.Q6J("routerLinkActive",h.DdM(61,M)),h.xp6(1),h.Oqu(h.lcZ(37,47,"Nav.Scopes")),h.xp6(3),h.Q6J("routerLinkActive",h.DdM(62,M)),h.xp6(1),h.Oqu(h.lcZ(41,49,"Nav.Claims")),h.xp6(3),h.Q6J("routerLinkActive",h.DdM(63,M)),h.xp6(1),h.Oqu(h.lcZ(45,51,"Nav.Secrets")),h.xp6(3),h.Q6J("routerLinkActive",h.DdM(64,M)),h.xp6(1),h.Oqu(h.lcZ(49,53,"Nav.Properties")),h.xp6(3),h.Q6J("ngIf",!J.protectedResource.enabled),h.xp6(1),h.Q6J("ngIf",J.protectedResource))},dependencies:[N.O5,y.lC,y.rH,y.Od,R.G,b.X$,k.lO],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),Q})()},426:(nt,_e,m)=>{"use strict";m.d(_e,{q:()=>h});var n=m(4707),e=m(4650);let h=(()=>{class S{constructor(){this.cachedClaimTypes=new n.t(1),this.cachedClaimTypes$=this.cachedClaimTypes.asObservable()}setClaimTypes(w){this.cachedClaimTypes.next(w)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac}),S})()},5554:(nt,_e,m)=>{"use strict";m.d(_e,{L:()=>P});var n=m(3212),e=m(4707),h=m(4650),S=m(529),y=m(8564);let w=(()=>{class U extends n._{constructor(M,B){super(),this.http=M,this.headersService=B,this.userSubject=new e.t(1),this.actionUrl="users",this.headers=this.headersService.setHeaders()}getAudits(M,B,V,Q,Y,fe,J){const ee=this.buildParams(M,V,B,Q,Y,fe,J);return this.http.get(`${this.actionUrl}/${M.resourceName}/auditedEvents`,{headers:this.headers,params:ee})}}return U.\u0275fac=function(M){return new(M||U)(h.LFG(S.eN),h.LFG(y.s))},U.\u0275prov=h.Yz7({token:U,factory:U.\u0275fac}),U})();var f=m(2976),x=m(4961),b=m(1481),g=m(9383),N=m(1060),R=m(6895),k=m(7356);function O(U,W){if(1&U&&h._UZ(0,"app-audits-list",2),2&U){const M=h.oxw();h.Q6J("resourceName",M.userId)}}let P=(()=>{class U{constructor(M,B,V,Q){this.userService=M,this.titleService=B,this.translate=V,this.securityService=Q}ngOnInit(){this.userService.getCachedUser().subscribe(B=>{this.userId=B.subject,this.username=B.username});const M=this.translate.instant("Users.Singular")+" "+this.username+" "+this.translate.instant("Nav.Audits")+" - "+f.de.SITE_TITLE;this.titleService.setTitle(M)}}return U.\u0275fac=function(M){return new(M||U)(h.Y36(x.K),h.Y36(b.Dx),h.Y36(g.sK),h.Y36(N.I))},U.\u0275cmp=h.Xpm({type:U,selectors:[["app-audit-users"]],features:[h._Bn([{provide:n._,useClass:w}])],decls:2,vars:1,consts:[["id","userList",1,"tw-container","tw-mx-auto"],[3,"resourceName",4,"ngIf"],[3,"resourceName"]],template:function(M,B){1&M&&(h.TgZ(0,"div",0),h.YNc(1,O,1,1,"app-audits-list",1),h.qZA()),2&M&&(h.xp6(1),h.Q6J("ngIf",B.userId))},dependencies:[R.O5,k.$],encapsulation:2}),U})()},1946:(nt,_e,m)=>{"use strict";m.d(_e,{P:()=>n});class n{}n.claimTypes=new Map([["Actor","http://schemas.xmlsoap.org/ws/2009/09/identity/claims/actor"],["Anonymous","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/anonymous"],["Authentication","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/authentication"],["AuthenticationInstant","http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationinstant"],["AuthenticationMethod","http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationmethod"],["AuthorizationDecision","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/authorizationdecision"],["CookiePath","http://schemas.microsoft.com/ws/2008/06/identity/claims/cookiepath"],["Country","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/country"],["DateOfBirth","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/dateofbirth"],["DenyOnlyPrimaryGroupSid","http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlyprimarygroupsid"],["DenyOnlyPrimarySid","http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlyprimarysid"],["DenyOnlySid","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/denyonlysid"],["DenyOnlyWindowsDeviceGroup","http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlywindowsdevicegroup"],["Dns","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/dns"],["Dsa","http://schemas.microsoft.com/ws/2008/06/identity/claims/dsa"],["Email","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress"],["Expiration","http://schemas.microsoft.com/ws/2008/06/identity/claims/expiration"],["Expired","http://schemas.microsoft.com/ws/2008/06/identity/claims/expired"],["Gender","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/gender"],["GivenName","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname"],["GroupSid","http://schemas.microsoft.com/ws/2008/06/identity/claims/groupsid"],["Hash","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/hash"],["HomePhone","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/homephone"],["IsPersistent","http://schemas.microsoft.com/ws/2008/06/identity/claims/ispersistent"],["Locality","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/locality"],["MobilePhone","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/mobilephone"],["Name","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"],["NameIdentifier","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"],["OtherPhone","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/otherphone"],["PostalCode","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/postalcode"],["PrimaryGroupSid","http://schemas.microsoft.com/ws/2008/06/identity/claims/primarygroupsid"],["PrimarySid","http://schemas.microsoft.com/ws/2008/06/identity/claims/primarysid"],["Role","http://schemas.microsoft.com/ws/2008/06/identity/claims/role"],["Rsa","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/rsa"],["SerialNumber","http://schemas.microsoft.com/ws/2008/06/identity/claims/serialnumber"],["Sid","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/sid"],["Spn","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/spn"],["StateOrProvince","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/stateorprovince"],["StreetAddress","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/streetaddress"],["Surname","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname"],["System","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/system"],["Thumbprint","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/thumbprint"],["Upn","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn"],["Uri","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/uri"],["UserData","http://schemas.microsoft.com/ws/2008/06/identity/claims/userdata"],["Version","http://schemas.microsoft.com/ws/2008/06/identity/claims/version"],["Webpage","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/webpage"],["WindowsAccountName","http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname"],["WindowsDeviceClaim","http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsdeviceclaim"],["WindowsDeviceGroup","http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsdevicegroup"],["WindowsFqbnVersion","http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsfqbnversion"],["WindowsSubAuthority","http://schemas.microsoft.com/ws/2008/06/identity/claims/windowssubauthority"],["WindowsUserClaim","http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsuserclaim"],["X500DistinguishedName","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/x500distinguishedname"]])},5373:(nt,_e,m)=>{"use strict";m.d(_e,{n:()=>n});let n=(()=>{class e{}return e.DefaultAdministratorUsername="info@rocksolidknowledge.com",e})()},5712:(nt,_e,m)=>{"use strict";m.d(_e,{G:()=>n});let n=(()=>{class e{}return e.Id="wizard-modal",e.TileId="wizard-title",e.DescriptionId="wizard-description",e})()},3826:(nt,_e,m)=>{"use strict";m.r(_e),m.d(_e,{DynamicAuthModule:()=>Ms});var n=m(6895),e=m(4006),h=m(8185),S=m(2979),y=m(9383),w=m(388),f=m(9241),x=m(2320),b=m(1191),g=m(9679),N=m(8413),R=m(5150),k=m(9536),O=m(5503),P=m(8117),U=m(4995),W=m(3883),M=m(9002),B=m(5302),V=m(3499),Q=m(4022),Y=m(4362),fe=m(6980),J=m(7023),ee=m(8265),G=m(1230),E=m(4380),te=m(5898),$=m(9650),ue=m(1274),me=m(8975),we=m(6493),ye=m(8761),qe=m(1436),De=m(5971),Ge=m(5084),ve=m(5785),c=m(4650);let tt=(()=>{class le{}return le.\u0275fac=function(Z){return new(Z||le)},le.\u0275mod=c.oAB({type:le}),le.\u0275inj=c.cJS({imports:[n.ez]}),le})();var _t=m(9881),ct=m(4091),rt=m(3831),ft=m(618),qt=m(1842),en=m(529),xt=m(4707),Dt=m(4782),X=m(4004),j=m(262),ae=m(9646),Be=(()=>{return(le=Be||(Be={})).OIDC="oidc",le.SAML="saml2p",le.Enabled="enabled",le.Disabled="disabled",Be;var le})(),je=(()=>{return(le=je||(je={})).AuthCode="AuthCode",le.AuthCodePlusPkce="AuthCodePlusPkce",je;var le})();class ke{static AllowRemoveScope(gt){return!this.RequiredScopes.includes(gt)}}ke.DiscoveryDocumentPath="/.well-known/openid-configuration",ke.DiscoveryDocCachingDuration=6e4,ke.FlowTypes=[je.AuthCode,je.AuthCodePlusPkce],ke.RequiredScopes=["openid"],ke.ScopeOptions=[...ke.RequiredScopes,"profile","email"],ke.MaxScopeLength=100,ke.SignInSchemeOptions=[{name:"DynamicAuth.SignInScheme.IdSExternalLogin.Name",value:"Idsrv.External",help:"DynamicAuth.SignInScheme.IdSExternalLogin.Help"},{name:"DynamicAuth.SignInScheme.AspNetExternalLogin.Name",value:"Identity.External",help:"DynamicAuth.SignInScheme.AspNetExternalLogin.Help"}],ke.SignInSchemeCodeFrag='services.AddAuthentication("local-cookie")\n    .AddCookie("local-cookie")\n\t.AddCookie("other-cookie");',ke.SamlSignInSchemeCodeFrag='services.AddIdentityServer(...)\n            .AddSamlDynamicProvider(options => {\n                options.SignInScheme = "MyIdentityScheme"; \n            });',ke.SamlSignOutSchemeCodeFrag='services.AddIdentityServer(...)\n            .AddSamlDynamicProvider(options => {\n                options.SignOutScheme = "MyIdentityScheme";\n            });',ke.AdminUIOidcDiscoveryDocumentEndpoint="DynamicAuthentication/DiscDoc",ke.AdminUISamlMetadataEndpoint="DynamicAuthentication/SAML/ValidateMetadataAddr";var Re=m(8564);let Se=(()=>{class le{constructor(Z,Ae){this.http=Z,this.cacheTime=0,this.discoveryDoc=new xt.t(1),this.headers=Ae.setHeaders()}get cacheTimeout(){return ke.DiscoveryDocCachingDuration}getDiscoveryDocument(Z,Ae=!1){this.actionUrl=ke.AdminUIOidcDiscoveryDocumentEndpoint;const Nt=Date.now()-this.cacheTime>=this.cacheTimeout;if(!Ae&&(!Z||this.previousAuthority===Z&&!Nt&&this.discoveryDoc))return this.discoveryDoc.asObservable();let Cn=new en.LE;return Cn=Cn.append("authority",Z),this.http.get(this.actionUrl,{headers:this.headers,params:Cn}).pipe((0,Dt.d)(1),(0,X.U)(En=>(this.previousAuthority=Z,this.cacheTime=Date.now(),this.discoveryDoc.next(En),En)),(0,j.K)(En=>(this.previousAuthority=Z,this.cacheTime=Date.now(),this.discoveryDoc.next(null),(0,ae.of)(null))))}isValid(Z){return this.getDiscoveryDocument(Z,!0).pipe((0,X.U)(Ae=>!(!Ae||!Ae.issuer)))}supportedScopes(Z){return this.getDiscoveryDocument(Z).pipe((0,X.U)(Ae=>Ae?.scopes_supported??ke.ScopeOptions))}validateMetadataUrl(Z){this.actionUrl=ke.AdminUISamlMetadataEndpoint;let Ae=new en.LE;return Ae=Ae.append("metadataUrl",Z),this.http.get(this.actionUrl,{headers:this.headers,params:Ae}).pipe((0,Dt.d)(1),(0,X.U)(Nt=>!0),(0,j.K)(Nt=>(0,ae.of)(!1)))}}return le.\u0275fac=function(Z){return new(Z||le)(c.LFG(en.eN),c.LFG(Re.s))},le.\u0275prov=c.Yz7({token:le,factory:le.\u0275fac}),le})(),Qe=(()=>{class le{constructor(){this.dtoObject={},this.summaryModels=[]}reset(){this.dtoObject={},this.summaryModels=[]}addToDto(Z){this.dtoObject={...this.dtoObject,...Z}}getDto(){return this.dtoObject}addSummary(Z,Ae){const Nt=this.summaryModels.findIndex(En=>En.stepName===Z);-1===Nt?this.summaryModels.push({stepName:Z,stepData:Ae}):this.summaryModels[Nt].stepData=Ae}getSummary(){return this.summaryModels}}return le.\u0275fac=function(Z){return new(Z||le)},le.\u0275prov=c.Yz7({token:le,factory:le.\u0275fac}),le})();var Xe=m(7579),Ke=m(3635),Je=m(8675),Ct=m(5577),ht=m(1005),Ze=m(2831),oe=m(6205),ie=m(8176),L=m(9046),ne=m(2976),Ne=m(5712),ze=m(4889),et=m(1481),Tt=m(1060),Zt=m(7185),gn=m(2294),Yt=m(8163),on=m(5925),Xt=m(7696),it=m(590),Gt=m(1330),bt=m(7608);let jt=(()=>{class le{constructor(Z,Ae){this.wizardDataService=Z,this.fb=Ae}ngOnInit(){this.clientSecretForm=this.fb.group({clientSecret:[""]})}getStepSummary(){return this.toSummaryMap()}getStepDTO(){return this.toStepDto()}canNext(){return!this.clientSecretForm.invalid}onNext(){this.wizardDataService.addSummary(this.data.stepName,this.toSummaryMap()),this.wizardDataService.addToDto(this.toStepDto())}hosted(){}toStepDto(){const Z={};return Z.clientSecret=this.clientSecretForm.get("clientSecret").value,Z}toSummaryMap(){const Z=new Map;return Z.set("clientSecret",[this.clientSecretForm.get("clientSecret").value]),Z}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(Qe),c.Y36(e.QS))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-client-secret-step"]],inputs:{data:"data"},decls:6,vars:8,consts:[[1,"cms","tw-mb-6"],[3,"innerHTML"],[3,"formGroup"],[3,"id","label","help","isLast"],["type","text","name","ClientSecret","id","ClientSecret","formControlName","clientSecret",1,"tw-form-control"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c._UZ(1,"p",1),c.ALo(2,"translate"),c.qZA(),c.TgZ(3,"form",2)(4,"app-form-row",3),c._UZ(5,"input",4),c.qZA()()),2&Z&&(c.xp6(1),c.Q6J("innerHTML",c.lcZ(2,6,"DynamicAuth.Wizard.OIDC.ClientSecretStep.Title"),c.oJD),c.xp6(2),c.Q6J("formGroup",Ae.clientSecretForm),c.xp6(1),c.Q6J("id","ClientSecret")("label","DynamicAuth.ClientSecret.Label")("help","DynamicAuth.ClientSecret.Help")("isLast",!0))},dependencies:[e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,bt.L,y.X$],encapsulation:2}),le})();var ln=m(5188);function kn(){return e.kI.pattern(/^([/]{1}[\w-]{0,}){1,}$/)}function Tn(){return e.kI.pattern(/^\/federation([/]{1}[\w-]{0,}){1,}$/)}function qn(le,gt){1&le&&(c.TgZ(0,"app-form-row",3),c._UZ(1,"input",11),c.qZA()),2&le&&c.Q6J("id","CallbackPath")("label","DynamicAuth.CallbackPath.Label")("help","DynamicAuth.CallbackPath.Help")}function ri(le,gt){if(1&le&&(c.TgZ(0,"option",12),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le){const Z=gt.$implicit;c.Q6J("value",Z),c.xp6(1),c.Oqu(c.lcZ(2,2,"DynamicAuth.Flows."+Z))}}let Yn=(()=>{class le{constructor(Z,Ae,Nt,Cn,En,er){this.wizardDataService=Z,this.fb=Ae,this.configService=Nt,this.translate=Cn,this.providerValidator=En,this.toastr=er,this.failedToContactAuthority=!1,this.allowedFlows=ke.FlowTypes}ngOnInit(){this.configServiceSub=this.configService.getConfig().subscribe({next:Z=>{this.isRskDynamicAuth=Z.featureFlagOptions.dynamicAuthenticationFlag==ln.u.Rsk}}),this.buildForm()}ngOnDestroy(){this.configServiceSub.unsubscribe()}tryReachAuthority(){var Z=this.connectionForm.get("authority").value;this.providerValidator.isValid(Z).subscribe(Ae=>{Ae||this.toastr.warning(this.translate.instant("DynamicAuth.Authority.ReachableWarningMsg"),this.translate.instant("DynamicAuth.Authority.ReachableWarningTitle"))})}buildForm(){let Z={authority:["https://",[e.kI.required,e.kI.pattern("^https://.{1,}$")]],clientId:["",e.kI.required]};this.isRskDynamicAuth&&(Z.callbackPath=["/oidc-scheme",[e.kI.required,kn()]]),Z.flow=[je.AuthCodePlusPkce,[e.kI.required]],this.connectionForm=this.fb.group(Z)}getStepSummary(){return this.toSummaryMap()}getStepDTO(){return this.toStepDto()}canNext(){return!this.connectionForm.invalid}onNext(){this.wizardDataService.addSummary(this.data.stepName,this.toSummaryMap()),this.wizardDataService.addToDto(this.toStepDto())}hosted(){}toStepDto(){const Z={};return Z.authority=this.connectionForm.get("authority").value,Z.clientId=this.connectionForm.get("clientId").value,this.isRskDynamicAuth&&(Z.callbackPath=this.connectionForm.get("callbackPath").value),Z.flow=this.connectionForm.get("flow").value,Z}toSummaryMap(){const Z=new Map;return Z.set("authority",[this.connectionForm.get("authority").value]),Z.set("idpClientId",[this.connectionForm.get("clientId").value]),this.isRskDynamicAuth&&Z.set("callbackPath",[this.connectionForm.get("callbackPath").value]),Z.set("flow",[this.translate.instant("DynamicAuth.Flows."+this.connectionForm.get("flow").value)]),Z}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(Qe),c.Y36(e.QS),c.Y36(_t.E),c.Y36(y.sK),c.Y36(Se),c.Y36(Zt._W))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-connection-step"]],inputs:{data:"data"},decls:13,vars:16,consts:[[1,"cms","tw-mb-6"],[3,"innerHTML"],[3,"formGroup"],[3,"id","label","help"],["type","text","name","Authority","id","Authority","formControlName","authority","required","",1,"tw-form-control",3,"focusout"],["type","text","name","ClientId","id","ClientId","formControlName","clientId","required","",1,"tw-form-control"],[3,"id","label","help",4,"ngIf"],[3,"id","label","help","isLast"],[1,"tw-form-select"],["id","Flow","formControlName","flow",1,"tw-form-control"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","CallbackPath","id","CallbackPath","formControlName","callbackPath","required","",1,"tw-form-control"],[3,"value"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c._UZ(1,"p",1),c.ALo(2,"translate"),c.qZA(),c.TgZ(3,"form",2)(4,"app-form-row",3)(5,"input",4),c.NdJ("focusout",function(){return Ae.tryReachAuthority()}),c.qZA()(),c.TgZ(6,"app-form-row",3),c._UZ(7,"input",5),c.qZA(),c.YNc(8,qn,2,3,"app-form-row",6),c.TgZ(9,"app-form-row",7)(10,"div",8)(11,"select",9),c.YNc(12,ri,3,4,"option",10),c.qZA()()()()),2&Z&&(c.xp6(1),c.Q6J("innerHTML",c.lcZ(2,14,"DynamicAuth.Wizard.OIDC.ConnectionStep.Title"),c.oJD),c.xp6(2),c.Q6J("formGroup",Ae.connectionForm),c.xp6(1),c.Q6J("id","Authority")("label","DynamicAuth.Authority.Label")("help","DynamicAuth.Authority.Help"),c.xp6(2),c.Q6J("id","ClientId")("label","DynamicAuth.ClientId.Label")("help","DynamicAuth.ClientId.Help"),c.xp6(2),c.Q6J("ngIf",Ae.isRskDynamicAuth),c.xp6(1),c.Q6J("id","Flow")("label","DynamicAuth.Flow.Label")("help","DynamicAuth.Flow.Help")("isLast",!0),c.xp6(3),c.Q6J("ngForOf",Ae.allowedFlows))},dependencies:[n.sg,n.O5,e._Y,e.YN,e.Kr,e.Fj,e.EJ,e.JJ,e.JL,e.Q7,e.sg,e.u,bt.L,y.X$],encapsulation:2}),le})();var Ft=m(9751),jn=m(3900);const In=[[["","left",""]],[["","right",""]]],Fn=["[left]","[right]"];let Zn=(()=>{class le{}return le.\u0275fac=function(Z){return new(Z||le)},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-row-bar"]],ngContentSelectors:Fn,decls:4,vars:0,consts:[[1,"tw-flex","tw-items-center","tw-bg-grey-100","tw-py-4","tw-sticky","tw-top-0","tw-z-20"],[1,"tw-shrink-0","tw-m-auto","tw-flex","tw-ml-4"]],template:function(Z,Ae){1&Z&&(c.F$t(In),c.TgZ(0,"div",0),c.Hsn(1),c.TgZ(2,"div",1),c.Hsn(3,1),c.qZA()())},encapsulation:2}),le})();function zn(le,gt){if(1&le&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"slice"),c.qZA()),2&le){const Z=gt.item;c.xp6(1),c.Oqu(Z.length>20?c.Dn7(2,1,Z,0,20)+"...":Z)}}function ut(le,gt){1&le&&(c.TgZ(0,"div",16)(1,"div"),c._uU(2),c.ALo(3,"translate"),c.qZA()()),2&le&&(c.xp6(2),c.hij(" ",c.lcZ(3,1,"DynamicAuth.NoScopesMessage")," "))}function vt(le,gt){1&le&&(c.TgZ(0,"span",20),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"Common.Reserved")," "))}function at(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"button",21),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw().$implicit,Cn=c.oxw(2);return c.KtG(Cn.removeScope(Nt))}),c._UZ(1,"span",22),c.TgZ(2,"span",13),c._uU(3),c.ALo(4,"translate"),c.qZA()()}if(2&le){const Z=c.oxw().$implicit;c.Q6J("id","btnRemove"+Z),c.xp6(3),c.Oqu(c.lcZ(4,2,"Common.Remove.Title"))}}function Ot(le,gt){if(1&le&&(c.TgZ(0,"tr")(1,"td",17)(2,"span"),c._uU(3),c.qZA()(),c.TgZ(4,"td"),c.YNc(5,vt,3,3,"span",18),c.qZA(),c.TgZ(6,"td"),c.YNc(7,at,5,4,"button",19),c.qZA()()),2&le){const Z=gt.$implicit,Ae=c.oxw(2);c.xp6(3),c.Oqu(Z),c.xp6(2),c.Q6J("ngIf",!Ae.allowRemoveScope(Z)),c.xp6(2),c.Q6J("ngIf",Ae.allowRemoveScope(Z))}}function Ht(le,gt){if(1&le&&(c.TgZ(0,"div",9),c.YNc(1,ut,4,3,"div",10),c.TgZ(2,"table",11)(3,"thead")(4,"th",12)(5,"span",13),c._uU(6),c.ALo(7,"translate"),c.qZA()(),c.TgZ(8,"th",14)(9,"span",13),c._uU(10),c.ALo(11,"translate"),c.qZA()(),c.TgZ(12,"th",14)(13,"span",13),c._uU(14),c.ALo(15,"translate"),c.qZA()()(),c.TgZ(16,"tbody"),c.YNc(17,Ot,8,3,"tr",15),c.qZA()()()),2&le){const Z=c.oxw();c.Q6J("id","Scopes"),c.xp6(1),c.Q6J("ngIf",Z.scopes.length<=0),c.xp6(5),c.Oqu(c.lcZ(7,6,"Common.Scope")),c.xp6(4),c.Oqu(c.lcZ(11,8,"Common.Reserved")),c.xp6(4),c.Oqu(c.lcZ(15,10,"Common.Actions")),c.xp6(3),c.Q6J("ngForOf",Z.scopes)}}let hn=(()=>{class le{constructor(Z,Ae,Nt,Cn,En){this.wizardDataService=Z,this.toastrService=Ae,this.translateService=Nt,this.fb=Cn,this.providerValidator=En,this.scopes=[...ke.RequiredScopes],this.maxScopeLength=ke.MaxScopeLength}ngOnInit(){this.scopesForm=this.fb.group({newScope:[""]}),this.options=new Ft.y(Z=>{let Ae=this.scopesForm.get("newScope").value;Z.next(Ae)}).pipe((0,jn.w)(Z=>this.providerValidator.supportedScopes().pipe((0,X.U)(Ae=>this.filterScopes(Z,Ae)))))}filterScopes(Z,Ae){const Nt=!Z;return Ae.filter(Cn=>!this.scopes.includes(Cn)&&(Nt||Cn.includes(Z)))}addScope(){var Z=this.scopesForm.get("newScope").value;if(""!==Z)if(this.scopes.includes(Z)){const Ae=this.translateService.instant("DynamicAuth.Scopes.AlreadyAdded");this.toastrService.error(Ae)}else if(Z.indexOf(" ")>=0){const Ae=this.translateService.instant("DynamicAuth.Scopes.CannotHaveSpaces");this.toastrService.error(Ae)}else this.scopes.push(Z);else this.toastrService.error(this.translateService.instant("DynamicAuth.Scopes.MustSpecifyScope"))}removeScope(Z){const Ae=this.scopes.indexOf(Z);if(-1!==Ae)this.scopes.splice(Ae,1);else{const Nt=this.translateService.instant("DynamicAuth.Scopes.MustSpecifyScope");this.toastrService.error(Nt)}}allowRemoveScope(Z){return ke.AllowRemoveScope(Z)}getStepSummary(){return this.toSummaryMap()}getStepDTO(){return this.toStepDto()}canNext(){return!0}onNext(){this.wizardDataService.addSummary(this.data.stepName,this.toSummaryMap()),this.wizardDataService.addToDto(this.toStepDto())}hosted(){}toStepDto(){const Z={};return Z.scopes=this.scopes,Z}toSummaryMap(){const Z=new Map;return Z.set("scopes",this.scopes),Z}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(Qe),c.Y36(Zt._W),c.Y36(y.sK),c.Y36(e.QS),c.Y36(Se))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-scopes-step"]],inputs:{data:"data"},decls:14,vars:20,consts:[[1,"cms","tw-mb-6"],[3,"innerHTML"],["customItemTemplate",""],[3,"formGroup"],[3,"id","hasLabel","isLast"],[1,"tw-form-typeahead"],["id","new-scope-input","formControlName","newScope","type","text","name","New Scope","container","#addIdpModal","autocomplete","off","left","",1,"tw-form-control",3,"typeahead","typeaheadWaitMs","typeaheadAsync","typeaheadItemTemplate","typeaheadMinLength","placeholder","maxlength"],["id","addScopeButton","right","",1,"tw-btn-success",3,"click"],["class","tw-mt-6",3,"id",4,"ngIf"],[1,"tw-mt-6",3,"id"],["class","tw-alert","role","alert",4,"ngIf"],[1,"datatable"],[1,"tw-w-full"],[1,"sr-only"],[1,"tw-w-1"],[4,"ngFor","ngForOf"],["role","alert",1,"tw-alert"],[1,"tw-table-cell","tw-max-w-0","tw-truncate"],["class","tw-pill",4,"ngIf"],["class","tw-btn-link tw-btn-small tw-text-red-500",3,"id","click",4,"ngIf"],[1,"tw-pill"],[1,"tw-btn-link","tw-btn-small","tw-text-red-500",3,"id","click"],["aria-hidden","true",1,"fas","fa-times"]],template:function(Z,Ae){if(1&Z&&(c.TgZ(0,"div",0),c._UZ(1,"p",1),c.ALo(2,"translate"),c.qZA(),c.YNc(3,zn,3,5,"ng-template",null,2,c.W1O),c.TgZ(5,"form",3)(6,"app-form-row",4)(7,"app-row-bar",5),c._UZ(8,"input",6),c.ALo(9,"translate"),c.TgZ(10,"button",7),c.NdJ("click",function(){return Ae.addScope()}),c._uU(11),c.ALo(12,"translate"),c.qZA()()(),c.YNc(13,Ht,18,12,"div",8),c.qZA()),2&Z){const Nt=c.MAs(4);c.xp6(1),c.Q6J("innerHTML",c.lcZ(2,14,"DynamicAuth.Wizard.OIDC.ScopesStep.Title"),c.oJD),c.xp6(4),c.Q6J("formGroup",Ae.scopesForm),c.xp6(1),c.Q6J("id","NewScope")("hasLabel",!1)("isLast",!0),c.xp6(2),c.s9C("placeholder",c.lcZ(9,16,"DynamicAuth.Scopes.Placeholder")),c.Q6J("typeahead",Ae.options)("typeaheadWaitMs",200)("typeaheadAsync",!0)("typeaheadItemTemplate",Nt)("typeaheadMinLength",0)("maxlength",Ae.maxScopeLength),c.xp6(3),c.hij(" ",c.lcZ(12,18,"Common.Add")," "),c.xp6(2),c.Q6J("ngIf",Ae.scopes.length>0)}},dependencies:[n.sg,n.O5,e._Y,e.Fj,e.JJ,e.JL,e.nD,e.sg,e.u,b.Bp,bt.L,Zn,n.OU,y.X$],encapsulation:2}),le})(),Xn=(()=>{class le{constructor(Z,Ae){this.wizardDataService=Z,this.fb=Ae}ngOnInit(){this.nameRoleForm=this.fb.group({scheme:["",[e.kI.required,e.kI.pattern(/^[\d\w-]*$/)]],displayName:["",[e.kI.required]]})}getStepSummary(){return this.toSummaryMap()}getStepDTO(){return this.toStepDto()}canNext(){return!this.nameRoleForm.invalid}onNext(){this.wizardDataService.addSummary(this.data.stepName,this.toSummaryMap()),this.wizardDataService.addToDto(this.toStepDto())}hosted(){}toStepDto(){const Z={};return Z.scheme=this.nameRoleForm.get("scheme").value,Z.displayName=this.nameRoleForm.get("displayName").value,Z}toSummaryMap(){const Z=new Map;return Z.set("scheme",[this.nameRoleForm.get("scheme").value]),Z.set("displayName",[this.nameRoleForm.get("displayName").value]),Z}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(Qe),c.Y36(e.QS))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-name-role-step"]],inputs:{data:"data"},decls:8,vars:11,consts:[[1,"cms","tw-mb-6"],[3,"innerHTML"],[3,"formGroup"],[3,"id","label","help"],["type","text","name","Scheme","id","Scheme","formControlName","scheme","required","",1,"tw-form-control"],[3,"id","label","help","isLast"],["type","text","name","DisplayName","id","DisplayName","formControlName","displayName","required","",1,"tw-form-control"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c._UZ(1,"p",1),c.ALo(2,"translate"),c.qZA(),c.TgZ(3,"form",2)(4,"app-form-row",3),c._UZ(5,"input",4),c.qZA(),c.TgZ(6,"app-form-row",5),c._UZ(7,"input",6),c.qZA()()),2&Z&&(c.xp6(1),c.Q6J("innerHTML",c.lcZ(2,9,"DynamicAuth.Wizard.NameRoleStep.Title"),c.oJD),c.xp6(2),c.Q6J("formGroup",Ae.nameRoleForm),c.xp6(1),c.Q6J("id","Scheme")("label","DynamicAuth.Scheme.Label")("help","DynamicAuth.Scheme.Help"),c.xp6(2),c.Q6J("id","DisplayName")("label","DynamicAuth.DisplayName.Label")("help","DynamicAuth.DisplayName.Help")("isLast",!0))},dependencies:[e._Y,e.Fj,e.JJ,e.JL,e.Q7,e.sg,e.u,bt.L,y.X$],encapsulation:2}),le})();function Ei(le,gt){if(1&le&&(c.TgZ(0,"span",10),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le){const Z=c.oxw().$implicit;c.xp6(1),c.hij(" ",c.lcZ(2,1,Z.help)," ")}}function os(le,gt){if(1&le&&(c.TgZ(0,"li",5)(1,"label",6),c._UZ(2,"input",7),c.TgZ(3,"span",8),c._uU(4),c.ALo(5,"translate"),c.qZA()(),c.YNc(6,Ei,3,3,"span",9),c.qZA()),2&le){const Z=gt.$implicit,Ae=gt.index,Nt=c.oxw();c.xp6(1),c.hYB("for","",Nt.id,"-item-",Ae,""),c.xp6(1),c.hYB("id","",Nt.id,"-item-",Ae,""),c.Q6J("value",Z.value),c.xp6(2),c.Oqu(c.lcZ(5,7,Z.name)),c.xp6(2),c.Q6J("ngIf",Z.help)}}function Nn(le,gt){if(1&le&&(c.TgZ(0,"li",5)(1,"label",6),c._UZ(2,"input",7),c.TgZ(3,"span",8),c._uU(4),c.ALo(5,"translate"),c.qZA()()()),2&le){const Z=c.oxw();c.xp6(1),c.MGl("for","",Z.id,"-item-custom"),c.xp6(1),c.MGl("id","",Z.id,"-item-custom"),c.Q6J("value",Z.customRadioValue),c.xp6(2),c.Oqu(c.lcZ(5,4,"Common.Custom"))}}function mi(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"app-form-row",11)(1,"input",12),c.NdJ("ngModelChange",function(Nt){c.CHM(Z);const Cn=c.oxw();return c.KtG(Cn.valueChanged.emit(Nt))}),c.ALo(2,"translate"),c.qZA()()}if(2&le){const Z=c.oxw();c.MGl("id","",Z.id,"-custom"),c.Q6J("label","Common.Custom")("isLast",!0),c.xp6(1),c.MGl("id","",Z.id,"-item-value"),c.s9C("placeholder",c.lcZ(2,6,Z.placeholder)),c.Q6J("ngModel",Z.value)}}let ur=(()=>{class le{constructor(Z){this.fb=Z,this.listItems=[],this.allowCustom=!1,this.valueChanged=new c.vpe,this.customRadioValue="CUSTOM_VALUE"}ngOnInit(){const Z=this.listItems.some(Ae=>Ae.value===this.value)?this.value:this.customRadioValue;this.radioForm=this.fb.group({radioVal:[Z]}),this.radioForm.get("radioVal").valueChanges.subscribe(Ae=>{this.valueChanged.emit(Ae===this.customRadioValue?"":Ae)})}showCustom(){return this.radioForm.get("radioVal").value===this.customRadioValue}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(e.QS))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-radio-list-input"]],inputs:{id:"id",label:"label",help:"help",listItems:"listItems",placeholder:"placeholder",allowCustom:"allowCustom",isLast:"isLast",value:"value"},outputs:{valueChanged:"valueChanged"},decls:6,vars:12,consts:[[3,"id","label","help","isLast","formGroup"],["role","group",1,"tw-form-checks",3,"id"],["class","tw-form-checks__item",4,"ngFor","ngForOf"],["class","tw-form-checks__item",4,"ngIf"],[3,"id","label","isLast",4,"ngIf"],[1,"tw-form-checks__item"],[1,"tw-form-checks__label",3,"for"],["type","radio","formControlName","radioVal",1,"tw-form-checks__input",3,"id","value"],[1,"tw-form-label"],["class","tw-form-label-help",4,"ngIf"],[1,"tw-form-label-help"],[3,"id","label","isLast"],["type","text","name","value",1,"tw-form-control",3,"id","ngModel","placeholder","ngModelChange"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"app-form-row",0)(1,"ul",1),c.ALo(2,"translate"),c.YNc(3,os,7,9,"li",2),c.YNc(4,Nn,6,6,"li",3),c.qZA()(),c.YNc(5,mi,3,8,"app-form-row",4)),2&Z&&(c.MGl("id","",Ae.id,"-options"),c.Q6J("label",Ae.label)("help",Ae.help)("isLast",!Ae.showCustom())("formGroup",Ae.radioForm),c.xp6(1),c.MGl("id","",Ae.id,"-options-list"),c.uIk("aria-label",c.lcZ(2,10,Ae.label)),c.xp6(2),c.Q6J("ngForOf",Ae.listItems),c.xp6(1),c.Q6J("ngIf",Ae.allowCustom),c.xp6(1),c.Q6J("ngIf",Ae.showCustom()))},dependencies:[e.Fj,e._,e.JJ,e.JL,e.On,e.sg,e.u,n.sg,n.O5,bt.L,y.X$],encapsulation:2}),le})();function yi(le,gt){if(1&le&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"slice"),c.qZA()),2&le){const Z=gt.item;c.xp6(1),c.Oqu(Z.length>20?c.Dn7(2,1,Z,0,20)+"...":Z)}}let nr=(()=>{class le{constructor(Z,Ae){this.wizardDataService=Z,this.fb=Ae,this.options=ke.SignInSchemeOptions,this.snippet=ke.SamlSignInSchemeCodeFrag}ngOnInit(){this.signInSchemeForm=this.fb.group({scheme:[this.options[0].value,e.kI.required]})}getStepSummary(){return this.toSummaryMap()}getStepDTO(){return this.toStepDto()}canNext(){return!this.signInSchemeForm.invalid}onNext(){this.wizardDataService.addSummary(this.data.stepName,this.toSummaryMap()),this.wizardDataService.addToDto(this.toStepDto())}hosted(){}toStepDto(){const Z={};return Z.signInScheme=this.signInSchemeForm.get("scheme").value,Z}toSummaryMap(){const Z=new Map;return Z.set("signInScheme",[this.signInSchemeForm.get("scheme").value]),Z}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(Qe),c.Y36(e.QS))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-sign-in-scheme-step"]],inputs:{data:"data"},decls:7,vars:9,consts:[[1,"cms","tw-mb-6"],[3,"innerHTML"],[3,"formGroup"],["id","scheme","placeholder","DynamicAuth.SignInScheme.Placeholder",3,"label","help","listItems","allowCustom","value","valueChanged"],["customItemTemplate",""]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c._UZ(1,"p",1),c.ALo(2,"translate"),c.qZA(),c.TgZ(3,"form",2)(4,"app-radio-list-input",3),c.NdJ("valueChanged",function(Cn){return Ae.signInSchemeForm.get("scheme").setValue(Cn)}),c.qZA()(),c.YNc(5,yi,3,5,"ng-template",null,4,c.W1O)),2&Z&&(c.xp6(1),c.Q6J("innerHTML",c.lcZ(2,7,"DynamicAuth.Wizard.SignInSchemeStep.Title"),c.oJD),c.xp6(2),c.Q6J("formGroup",Ae.signInSchemeForm),c.xp6(1),c.Q6J("label","DynamicAuth.SignInScheme.Label")("help","DynamicAuth.SignInScheme.Help")("listItems",Ae.options)("allowCustom",!0)("value",Ae.signInSchemeForm.get("scheme").value))},dependencies:[e._Y,e.JL,e.sg,ur,n.OU,y.X$],encapsulation:2}),le})();var Gi=m(7892),Ai=m(9326),Yi=m(826);function Jr(le,gt){1&le&&(c._UZ(0,"span",8),c.ALo(1,"translate")),2&le&&c.Q6J("innerHTML",c.lcZ(1,1,"DynamicAuth.FederationPathWarning"),c.oJD)}let qr=(()=>{class le{constructor(Z,Ae){this.wizardDataService=Z,this.fb=Ae}ngOnInit(){this.buildForm()}ngOnDestroy(){}buildForm(){var Z=this.wizardDataService.getDto().scheme;(0,ie.Ew)(Z)&&(Z="{scheme}");let Ae={entityId:["",[e.kI.required]],callbackPath:[`/federation/${Z}/signin-saml`,[e.kI.required,Tn()]]};this.serviceProviderForm=this.fb.group(Ae)}validCallbackPath(){return this.serviceProviderForm.get("callbackPath").valid}getStepSummary(){return this.toSummaryMap()}getStepDTO(){return this.toStepDto()}canNext(){return!this.serviceProviderForm.invalid}onNext(){this.wizardDataService.addSummary(this.data.stepName,this.toSummaryMap()),this.wizardDataService.addToDto(this.toStepDto())}hosted(){}toStepDto(){const Z={};return Z.entityId=this.serviceProviderForm.get("entityId").value,Z.callbackPath=this.serviceProviderForm.get("callbackPath").value,Z}toSummaryMap(){const Z=new Map;return Z.set("entityId",[this.serviceProviderForm.get("entityId").value]),Z.set("callbackPathAcs",[this.serviceProviderForm.get("callbackPath").value]),Z}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(Qe),c.Y36(e.QS))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-service-provider-step"]],inputs:{data:"data"},decls:9,vars:12,consts:[[1,"cms","tw-mb-6"],[3,"innerHTML"],[3,"formGroup"],[3,"id","label","help"],["type","text","name","EntityId","id","EntityId","formControlName","entityId","required","",1,"tw-form-control"],[3,"id","label","help","isLast"],["type","text","name","CallbackPath","id","CallbackPath","formControlName","callbackPath","required","",1,"tw-form-control"],["id","CallbackWarn","class","tw-form-text-warning",3,"innerHTML",4,"ngIf"],["id","CallbackWarn",1,"tw-form-text-warning",3,"innerHTML"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c._UZ(1,"p",1),c.ALo(2,"translate"),c.qZA(),c.TgZ(3,"form",2)(4,"app-form-row",3),c._UZ(5,"input",4),c.qZA(),c.TgZ(6,"app-form-row",5),c._UZ(7,"input",6),c.YNc(8,Jr,2,3,"span",7),c.qZA()()),2&Z&&(c.xp6(1),c.Q6J("innerHTML",c.lcZ(2,10,"DynamicAuth.Wizard.SAML.ServiceProviderStep.Title"),c.oJD),c.xp6(2),c.Q6J("formGroup",Ae.serviceProviderForm),c.xp6(1),c.Q6J("id","EntityId")("label","DynamicAuth.EntityId.Label")("help","DynamicAuth.EntityId.Help"),c.xp6(2),c.Q6J("id","CallbackPath")("label","DynamicAuth.CallbackPathAcsEndpoint.Label")("help","DynamicAuth.CallbackPathAcsEndpoint.Help")("isLast",!0),c.xp6(2),c.Q6J("ngIf",!Ae.validCallbackPath()))},dependencies:[n.O5,e._Y,e.Fj,e.JJ,e.JL,e.Q7,e.sg,e.u,bt.L,y.X$],encapsulation:2}),le})();var Tr=m(9655),Vn=m(2951);const kr=["fileInput"];let ts=(()=>{class le{constructor(Z,Ae,Nt,Cn,En){this.wizardDataService=Z,this.fb=Ae,this.certService=Nt,this.toastr=Cn,this.translate=En,this.validCertificateForm=!1,this.selectedFile=void 0,this.fileName=new Vn.I(""),this.fileContent=void 0}get ReadOnlyFieldType(){return Tr.O}ngOnInit(){this.buildForm()}ngOnDestroy(){}buildForm(){this.certForm=this.fb.group({certPassword:["",[]]})}getStepSummary(){return this.toSummaryMap()}getStepDTO(){return this.toStepDto()}canNext(){return this.disableClearBtn()||this.validCertificateForm}onNext(){this.wizardDataService.addSummary(this.data.stepName,this.toSummaryMap()),this.wizardDataService.addToDto(this.toStepDto())}hosted(){}handleFileInput(Z){this.selectedFile=Z.item(0),this.requestCertValidation()}requestCertValidation(){this.validCertificateForm=!1}disableTestBtn(){return null==this.selectedFile}disableClearBtn(){const Z=this.certForm.get("certPassword").value;return null==this.selectedFile&&""==Z}validateForm(){if(null==this.selectedFile)return void this.toastr.error(this.translate.instant("Notifications.CertInValidMsg"),this.translate.instant("Notifications.CertInValidTitle"));this.fileName=new Vn.I(""),this.fileContent=void 0;const Z=this.certForm.get("certPassword").value;this.certService.verifyCertFilePassword(this.selectedFile,Z,{next:Ae=>{this.fileName=new Vn.I(this.selectedFile?.name),this.fileContent=Ae,this.validCertificateForm=!0,this.toastr.success(this.translate.instant("Notifications.CertValidTitle"))},error:Ae=>{this.validCertificateForm=!1,this.toastr.error(this.translate.instant("Notifications.CertInValidMsg"),this.translate.instant("Notifications.CertInValidTitle"))}})}clearCertificateForm(){this.fileInputNative.nativeElement.value=null,this.selectedFile=null,this.fileName=new Vn.I(""),this.fileContent=void 0,this.certForm.get("certPassword").setValue(""),this.validCertificateForm=!1}toStepDto(){const Z={};return Z.certFile=this.fileContent,Z.certPassword=this.certForm.get("certPassword").value,Z}toSummaryMap(){const Z=new Map;return Z.set("certFile",[this.selectedFile?.name]),Z.set("certPassword",[this.certForm.get("certPassword").value]),Z}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(Qe),c.Y36(e.QS),c.Y36(P.S),c.Y36(Zt._W),c.Y36(y.sK))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-signing-step"]],viewQuery:function(Z,Ae){if(1&Z&&c.Gf(kr,5),2&Z){let Nt;c.iGM(Nt=c.CRH())&&(Ae.fileInputNative=Nt.first)}},inputs:{data:"data"},decls:18,vars:18,consts:[[1,"cms","tw-mb-6"],[3,"innerHTML"],[3,"formGroup"],[3,"id","label","help"],[1,"tw-form-control"],["id","fileInput","type","file","name","file","accept",".pfx,.p12",1,"tw-form-file","tw-max-w-full",3,"change"],["fileInput","","selectedFile",""],[3,"id","label","input"],["type","text","name","CertPassword","id","CertPassword","formControlName","certPassword",1,"tw-form-control"],[3,"isLast"],["id","testBtn",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],["id","clearBtn",1,"tw-btn","tw-mr-3",3,"disabled","click"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c._UZ(1,"p",1),c.ALo(2,"translate"),c.qZA(),c.TgZ(3,"form",2)(4,"app-form-row",3)(5,"div",4)(6,"input",5,6),c.NdJ("change",function(Cn){return Ae.handleFileInput(Cn.target.files)}),c.qZA()()(),c.TgZ(9,"app-form-row",7),c.NdJ("input",function(){return Ae.requestCertValidation()}),c._UZ(10,"input",8),c.qZA(),c.TgZ(11,"app-form-row",9)(12,"button",10),c.NdJ("click",function(){return Ae.validateForm()}),c._uU(13),c.ALo(14,"translate"),c.qZA(),c.TgZ(15,"button",11),c.NdJ("click",function(){return Ae.clearCertificateForm()}),c._uU(16),c.ALo(17,"translate"),c.qZA()()()),2&Z&&(c.xp6(1),c.Q6J("innerHTML",c.lcZ(2,12,"DynamicAuth.Wizard.SAML.SigningStep.Title"),c.oJD),c.xp6(2),c.Q6J("formGroup",Ae.certForm),c.xp6(1),c.Q6J("id","fileInputRow")("label","DynamicAuth.CertFile.Label")("help","DynamicAuth.CertFile.Help"),c.xp6(5),c.Q6J("id","CertPassword")("label","DynamicAuth.CertPassword.Label"),c.xp6(2),c.Q6J("isLast",!0),c.xp6(1),c.Q6J("disabled",Ae.disableTestBtn()),c.xp6(1),c.Oqu(c.lcZ(14,14,"Common.ValidateCert")),c.xp6(2),c.Q6J("disabled",Ae.disableClearBtn()),c.xp6(1),c.Oqu(c.lcZ(17,16,"Common.Clear")))},dependencies:[e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u,bt.L,y.X$],encapsulation:2}),le})();var Ui=m(9490);let ws=(()=>{class le{constructor(Z,Ae,Nt,Cn,En){this.wizardDataService=Z,this.fb=Ae,this.providerValidator=Nt,this.translate=Cn,this.toastr=En,this.metadataAddrStream=new Xe.x}ngOnInit(){this.buildForm(),this.metadataAddrStream.subscribe(Z=>{this.providerValidator.validateMetadataUrl(Z).subscribe(Ae=>{Ae?this.toastr.success_noduplicate(this.translate.instant("DynamicAuth.Wizard.SAML.ExternalProviderStep.MetadataValidMsg"),this.translate.instant("DynamicAuth.Wizard.SAML.ExternalProviderStep.MetadataValidTitle")):this.toastr.error_noduplicate(this.translate.instant("DynamicAuth.Wizard.SAML.ExternalProviderStep.MetadataInValidMsg"),this.translate.instant("DynamicAuth.Wizard.SAML.ExternalProviderStep.MetadataInValidTitle"))})})}ngOnDestroy(){this.metadataAddrStream.unsubscribe()}tryMetadataAddr(){const Z=this.externalProviderForm.get("metadataAddress");Z.invalid||this.metadataAddrStream.next(Z.value)}showReachableError(){const Z=this.externalProviderForm.get("metadataAddress");return!(0,ie.Ew)(Z.value)&&Z.errors?.unreachableUrl}buildForm(){let Z={metadataAddress:["https://",[e.kI.required,e.kI.pattern("^https://.{1,}$")]]};this.externalProviderForm=this.fb.group(Z)}getStepSummary(){return this.toSummaryMap()}getStepDTO(){return this.toStepDto()}canNext(){return!this.externalProviderForm.invalid}onNext(){this.wizardDataService.addSummary(this.data.stepName,this.toSummaryMap()),this.wizardDataService.addToDto(this.toStepDto())}hosted(){}toStepDto(){const Z={};return Z.metadataAddress=this.externalProviderForm.get("metadataAddress").value,Z}toSummaryMap(){const Z=new Map;return Z.set("metadataAddress",[this.externalProviderForm.get("metadataAddress").value]),Z}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(Qe),c.Y36(e.QS),c.Y36(Se),c.Y36(y.sK),c.Y36(Ui.o))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-external-provider-step"]],inputs:{data:"data"},decls:11,vars:12,consts:[[1,"cms","tw-mb-6"],[3,"innerHTML"],[3,"formGroup"],[3,"id","label","help","isLast"],[1,"tw-flex","tw-w-full","lg:tw-max-w-2xl"],["type","text","name","MetadataAddress","id","MetadataAddress","formControlName","metadataAddress","placeholder","https://","required","",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0"],["id","testMetadataAddr",1,"tw-btn","tw-rounded-l-none",3,"disabled","click"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c._UZ(1,"p",1),c.ALo(2,"translate"),c.qZA(),c.TgZ(3,"form",2)(4,"app-form-row",3)(5,"div",4),c._UZ(6,"input",5),c.TgZ(7,"button",6),c.NdJ("click",function(){return Ae.tryMetadataAddr()}),c.TgZ(8,"span"),c._uU(9),c.ALo(10,"translate"),c.qZA()()()()()),2&Z&&(c.xp6(1),c.Q6J("innerHTML",c.lcZ(2,8,"DynamicAuth.Wizard.SAML.ExternalProviderStep.Title"),c.oJD),c.xp6(2),c.Q6J("formGroup",Ae.externalProviderForm),c.xp6(1),c.Q6J("id","MetadataAddress")("label","DynamicAuth.SAML.IdpMetadataAddress.Label")("help","DynamicAuth.SAML.IdpMetadataAddress.Help")("isLast",!0),c.xp6(3),c.Q6J("disabled",!Ae.canNext()),c.xp6(2),c.Oqu(c.lcZ(10,10,"Common.ValidateMetadata")))},dependencies:[e._Y,e.Fj,e.JJ,e.JL,e.Q7,e.sg,e.u,bt.L,y.X$],encapsulation:2}),le})();class Ve extends Gi.A{constructor(gt){super();var Z=[new Yi.H(Xn,{stepName:"NameRoleStepComponent"}),new Yi.H(Yn,{stepName:"ConnectionStepComponent"}),new Yi.H(hn,{stepName:"ScopesStepComponent"}),new Yi.H(jt,{stepName:"ClientSecretStepComponent"})];gt&&Z.push(new Yi.H(nr,{stepName:"SignInSchemeStepComponent"}));var Ae=[new Yi.H(Xn,{stepName:"NameRoleStepComponent"}),new Yi.H(qr,{stepName:"ServiceProviderStepComponent"}),new Yi.H(ts,{stepName:"SigningStepComponent"}),new Yi.H(ws,{stepName:"ExternalProviderStepComponent"}),new Yi.H(nr,{stepName:"SignInSchemeStepComponent"})];this.nameComponentMap.set(Gt.Q.AddOidcDynamicAuth,Z),this.nameComponentMap.set(Gt.Q.AddSamlDynamicAuth,Ae),this.nameTitleMap.set(Gt.Q.AddDynamicAuth,new Ai.K("DynamicAuth.Wizard.Setup","DynamicAuth.Wizard.Title")),this.nameTitleMap.set(Gt.Q.AddOidcDynamicAuth,new Ai.K("DynamicAuth.Wizard.OIDC.Setup","DynamicAuth.Wizard.OIDC.Title")),this.nameTitleMap.set(Gt.Q.AddSamlDynamicAuth,new Ai.K("DynamicAuth.Wizard.SAML.Setup","DynamicAuth.Wizard.SAML.Title"))}}var We=m(9141),st=m(1503);let Mt=(()=>{class le{canNext(){return!1}hosted(){}}return le.\u0275fac=function(Z){return new(Z||le)},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-empty-step"]],decls:4,vars:3,consts:[["id","emptyStepError","role","alert",1,"tw-alert-danger"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0)(1,"div"),c._uU(2),c.ALo(3,"translate"),c.qZA()()),2&Z&&(c.xp6(2),c.Oqu(c.lcZ(3,1,"Common.Wizards.Empty")))},dependencies:[y.X$],encapsulation:2}),le})();class nn extends Gi.A{getWizard(gt){return[new Yi.H(Mt)]}getWizardTitle(gt){return new Ai.K("Empty Provider",`No step for wizard name: ${gt}`)}}var rn=m(5221);function bn(le,gt){}function An(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"button",17),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.nextTab())}),c._uU(1),c.ALo(2,"translate"),c.qZA()}if(2&le){const Z=c.oxw();c.Q6J("disabled",!Z.canNext()),c.xp6(1),c.Oqu(c.lcZ(2,2,"Common.Next"))}}function wi(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"button",18),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.submit())}),c._uU(1),c.ALo(2,"translate"),c.qZA()}2&le&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"Common.Save")))}function di(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"button",19),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.previousTab())}),c._uU(1),c.ALo(2,"translate"),c.qZA()}2&le&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"Common.Back")))}function oi(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"button",19),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.cancelWizard())}),c._uU(1),c.ALo(2,"translate"),c.qZA()}2&le&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"Common.Back")))}let dr=(()=>{class le extends We.G{constructor(Z,Ae,Nt,Cn,En,er){super(),this.errorService=Z,this.toastr=Ae,this.translate=Nt,this.dynamicAuthenticationService=Cn,this.wizardDataService=er,this.wizardProvider=new nn,this.components=new Map,En.getConfig().subscribe({next:wr=>{this.wizardProvider=new Ve(wr.featureFlagOptions.dynamicAuthenticationFlag==ln.u.Rsk)},error:wr=>{this.errorService.handleError(wr)}}),this.wizardDataService.reset()}nextTab(){this.components.get(this.index).instance.onNext(),++this.index,this.index===this.wizardSteps.length?this.buildSummary():(void 0===this.components.get(this.index)&&this.createComponentAtCurrentIndex(),this.displayComponentAtCurrentIndex())}previousTab(){this.index>0&&(--this.index,this.displayComponentAtCurrentIndex())}buildSummary(){const Z=this.wizardDataService.getSummary();this.displaySummaryComponent(Z)}displaySummaryComponent(Z){this.wizardHost.viewContainerRef.detach(),void 0===this.summaryComponentRef?(this.wizardHost.viewContainerRef.detach(),this.summaryComponentRef=this.wizardHost.viewContainerRef.createComponent(st.q)):this.wizardHost.viewContainerRef.insert(this.summaryComponentRef.hostView),this.summaryComponentRef.setInput("askIfEnabled",!0),this.summaryComponentRef.instance.summary=Z,this.summaryComponentRef.instance.summaryTitle=this.wizardTitles.summaryTitle,this.summaryComponentRef.instance.emitNavigate.pipe((0,it.P)()).subscribe(Ae=>{this.index=Z.findIndex(Nt=>Nt.stepName===Ae),this.displayComponentAtCurrentIndex()}),this.updateProgress()}submit(){const Z=(0,Ze.ky)(this.getModel());this.dynamicAuthenticationService.createDynamicAuth(Z).subscribe({complete:()=>{this.finishWizard(),this.clearComponents(),this.toastr.success(`${this.translate.instant("Common.Created")}: ${Z.displayName}`,this.translate.instant("Notifications.SuccessfullyCreated")),this.wizardDataService.reset()},error:Ae=>{this.errorService.handleError(Ae)}})}getModel(){const Z=this.wizardName,Ae=this.wizardDataService.getDto(),Nt=this.summaryComponentRef.instance.isEnabled();var Cn="";if(this.wizardName===Gt.Q.AddOidcDynamicAuth&&(Cn=JSON.stringify({authority:Ae.authority,clientId:Ae.clientId,callbackPath:Ae.callbackPath,usePkce:Ae.flow==je.AuthCodePlusPkce,scope:Ae.scopes,clientSecret:Ae.clientSecret,signInScheme:Ae.signInScheme})),this.wizardName===Gt.Q.AddSamlDynamicAuth){var En={spEntityId:Ae.entityId,callbackPath:Ae.callbackPath,signAuthenticationRequests:!(0,ie.le)(Ae.certFile)&&!(0,ie.le)(Ae.certPassword),signingCertBase64:Ae.certFile,signingCertPassword:Ae.certPassword,signInScheme:Ae.signInScheme,idpMetadataAddress:Ae.metadataAddress};Cn=JSON.stringify(En)}return{type:oe.hH.fromWizardType(Z),scheme:Ae.scheme,displayName:Ae.displayName,enabled:Nt,nonEditable:!1,options:Cn}}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(ze.T),c.Y36(Zt._W),c.Y36(y.sK),c.Y36(ft.x),c.Y36(_t.E),c.Y36(Qe))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-wizard-host"]],features:[c._Bn([]),c.qOj],decls:24,vars:17,consts:[[1,"modal-header"],[1,"modal-title",3,"id"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-progress"],["role","progressbar",1,"modal-progress-bar"],[1,"modal-body","scrollbars"],["appStepHost",""],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["class","tw-btn-success tw-mr-3","id","nextBtn",3,"disabled","click",4,"ngIf"],["class","tw-btn-success tw-mr-3","id","submitBtn",3,"click",4,"ngIf"],["class","tw-btn","id","backBtn",3,"click",4,"ngIf"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],["id","nextBtn",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],["id","submitBtn",1,"tw-btn-success","tw-mr-3",3,"click"],["id","backBtn",1,"tw-btn",3,"click"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0)(1,"h5",1),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"button",2),c.NdJ("click",function(){return Ae.hideWizard()}),c._UZ(5,"span",3),c.TgZ(6,"span",4),c._uU(7),c.ALo(8,"translate"),c.qZA()()(),c.TgZ(9,"div",5),c._UZ(10,"div",6),c.qZA(),c.TgZ(11,"div",7),c.YNc(12,bn,0,0,"ng-template",8),c.qZA(),c._UZ(13,"div",9),c.TgZ(14,"div",10)(15,"div",11)(16,"div",12),c.YNc(17,An,3,4,"button",13),c.YNc(18,wi,3,3,"button",14),c.YNc(19,di,3,3,"button",15),c.YNc(20,oi,3,3,"button",15),c.qZA(),c.TgZ(21,"button",16),c.NdJ("click",function(){return Ae.cancelWizard()}),c._uU(22),c.ALo(23,"translate"),c.qZA()()()),2&Z&&(c.xp6(1),c.Q6J("id",Ae.titleId),c.xp6(1),c.Oqu(c.lcZ(3,11,Ae.wizardTitles.setupTitle)),c.xp6(5),c.Oqu(c.lcZ(8,13,"Common.Close")),c.xp6(3),c.Udp("width",Ae.progressPercent+"%"),c.uIk("aria-valuenow",Ae.progressPercent),c.xp6(7),c.Q6J("ngIf",Ae.index<(null==Ae.wizardSteps?null:Ae.wizardSteps.length)),c.xp6(1),c.Q6J("ngIf",Ae.index==(null==Ae.wizardSteps?null:Ae.wizardSteps.length)),c.xp6(1),c.Q6J("ngIf",Ae.index>0),c.xp6(1),c.Q6J("ngIf",Ae.index<=0),c.xp6(2),c.Oqu(c.lcZ(23,15,"Common.Cancel")))},dependencies:[n.O5,rn.S,y.X$],encapsulation:2}),le})();function pr(le,gt){1&le&&c.GkF(0)}function Ar(le,gt){1&le&&c.GkF(0)}function Fi(le,gt){1&le&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"DynamicAuth.Wizard.TypeSelectStep.OIDC.Title")))}function Br(le,gt){1&le&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"DynamicAuth.Wizard.TypeSelectStep.SAML.Title")))}function Zi(le,gt){1&le&&(c._UZ(0,"p",25),c.ALo(1,"translate")),2&le&&c.Q6J("innerHTML",c.lcZ(1,1,"DynamicAuth.Wizard.TypeSelectStep.OIDC.Description"),c.oJD)}function ir(le,gt){1&le&&(c._UZ(0,"p",25),c.ALo(1,"translate")),2&le&&c.Q6J("innerHTML",c.lcZ(1,1,"DynamicAuth.Wizard.TypeSelectStep.SAML.Description"),c.oJD)}function ns(le,gt){1&le&&(c.TgZ(0,"span",37),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"Clients.Selected")))}const Gs=function(le,gt){return{"tw-bg-green-200":le,"hover:tw-shadow-md md:tw-pr-16":gt}},po=function(le,gt){return{"tw-bg-green-500":le,"tw-bg-grey-200":gt}},ys=function(le,gt){return{"tw-text-white":le,"tw-text-grey-400 group-hover:tw-text-grey-700":gt}},zs=function(le,gt,Z){return{"tw-text-green-800":le,"tw-text-navy-500":gt,"tw-text-grey-300":Z}},is=function(le,gt,Z){return{"tw-text-green-600":le,"tw-text-grey-600":gt,"tw-text-grey-600":Z}},Ts=function(le){return{"tw-text-green-300":le}};function ho(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"li",26)(1,"input",27),c.NdJ("click",function(){const Nt=c.CHM(Z),Cn=Nt.disabled,En=Nt.type,er=c.oxw(2);return c.KtG(!Cn&&er.setActive(En))}),c.qZA(),c.TgZ(2,"label",28),c.NdJ("click",function(){const Nt=c.CHM(Z),Cn=Nt.disabled,En=Nt.type,er=c.oxw(2);return c.KtG(!Cn&&er.setActive(En))}),c.TgZ(3,"div",29),c._UZ(4,"span",30),c.YNc(5,ns,3,3,"span",31),c.qZA(),c.TgZ(6,"div",32)(7,"span",33),c._uU(8),c.qZA(),c.TgZ(9,"span",34),c._uU(10),c.qZA()(),c.TgZ(11,"div",35),c._UZ(12,"span",36),c.qZA()()()}if(2&le){const Z=gt.id,Ae=gt.btnId,Nt=gt.title,Cn=gt.summary,En=gt.icon,er=gt.value,wr=gt.selected,Ro=gt.disabled,Po=c.oxw(2);c.s9C("id",Z),c.xp6(1),c.s9C("id",Ae),c.s9C("value",er),c.Q6J("ngModel",Po.activeType),c.xp6(1),c.s9C("for",Ae),c.Q6J("ngClass",c.WLB(17,Gs,wr,!Ro)),c.xp6(1),c.Q6J("ngClass",c.WLB(20,po,wr,!wr)),c.xp6(1),c.Q6J("ngClass",c.WLB(23,ys,wr,!wr)),c.xp6(1),c.Q6J("ngIf",wr),c.xp6(2),c.Q6J("ngClass",c.kEZ(26,zs,wr,!wr,Ro)),c.xp6(1),c.hij(" ",Nt," "),c.xp6(1),c.Q6J("ngClass",c.kEZ(30,is,wr,!wr,Ro)),c.xp6(1),c.hij(" ",Cn," "),c.xp6(2),c.Gre("",En," tw-text-black tw-text-grey-300 tw-text-3xl trans"),c.Q6J("ngClass",c.VKq(34,Ts,wr))}}const Ys=function(le,gt,Z,Ae,Nt){return{id:"oidcBtn",btnId:"oidcTestBtn",title:le,summary:gt,icon:"fab fa-openid",value:Z,selected:Ae,type:Nt}},Fr=function(le,gt,Z,Ae,Nt){return{id:"samlBtn",btnId:"samlTestBtn",title:le,summary:gt,icon:"fad fa-code",value:Z,selected:Ae,type:Nt}};function Xi(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"div",1)(1,"div",2)(2,"h5",3),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"button",4),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.hide())}),c.ALo(6,"translate"),c._UZ(7,"span",5),c.qZA()(),c.TgZ(8,"div",6),c._UZ(9,"div",7,8),c.qZA(),c.TgZ(11,"div",9)(12,"div",10)(13,"ul",11),c.YNc(14,pr,1,0,"ng-container",12),c.ALo(15,"translate"),c.ALo(16,"translate"),c.YNc(17,Ar,1,0,"ng-container",12),c.ALo(18,"translate"),c.ALo(19,"translate"),c.qZA()(),c.TgZ(20,"div",13)(21,"h2",14),c._UZ(22,"span",15),c.YNc(23,Fi,3,3,"span",16),c.YNc(24,Br,3,3,"span",16),c.qZA(),c.YNc(25,Zi,2,3,"p",17),c.YNc(26,ir,2,3,"p",17),c.qZA(),c.YNc(27,ho,13,36,"ng-template",null,18,c.W1O),c.qZA(),c._UZ(29,"div",19),c.TgZ(30,"div",20)(31,"div",21)(32,"div",22)(33,"button",23),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.choosePage())}),c._uU(34),c.ALo(35,"translate"),c.qZA()(),c.TgZ(36,"button",24),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.hide())}),c._uU(37),c.ALo(38,"translate"),c.qZA()()()()}if(2&le){const Z=c.MAs(28),Ae=c.oxw();c.xp6(2),c.Q6J("id",Ae.titleId),c.xp6(1),c.Oqu(c.lcZ(4,14,"DynamicAuth.Wizard.Title")),c.xp6(2),c.uIk("aria-label",c.lcZ(6,16,"Common.Close")),c.xp6(9),c.Q6J("ngTemplateOutlet",Z)("ngTemplateOutletContext",c.qbA(30,Ys,c.lcZ(15,18,"DynamicAuth.Wizard.TypeSelectStep.OIDC.Name"),c.lcZ(16,20,"DynamicAuth.Wizard.TypeSelectStep.OIDC.Title"),Ae.wizardTypes.AddOidcDynamicAuth,Ae.activeType===Ae.wizardTypes.AddOidcDynamicAuth,Ae.wizardTypes.AddOidcDynamicAuth)),c.xp6(3),c.Q6J("ngTemplateOutlet",Z)("ngTemplateOutletContext",c.qbA(36,Fr,c.lcZ(18,22,"DynamicAuth.Wizard.TypeSelectStep.SAML.Name"),c.lcZ(19,24,"DynamicAuth.Wizard.TypeSelectStep.SAML.Title"),Ae.wizardTypes.AddSamlDynamicAuth,Ae.activeType===Ae.wizardTypes.AddSamlDynamicAuth,Ae.wizardTypes.AddSamlDynamicAuth)),c.xp6(6),c.Q6J("ngIf",Ae.activeType===Ae.wizardTypes.AddOidcDynamicAuth),c.xp6(1),c.Q6J("ngIf",Ae.activeType===Ae.wizardTypes.AddSamlDynamicAuth),c.xp6(1),c.Q6J("ngIf",Ae.activeType===Ae.wizardTypes.AddOidcDynamicAuth),c.xp6(1),c.Q6J("ngIf",Ae.activeType===Ae.wizardTypes.AddSamlDynamicAuth),c.xp6(7),c.Q6J("disabled",Ae.activeType===Ae.wizardTypes.Home),c.xp6(1),c.Oqu(c.lcZ(35,26,"Common.Start")),c.xp6(3),c.Oqu(c.lcZ(38,28,"Common.Cancel"))}}function Si(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"div",1)(1,"app-dynamic-auth-wizard-host",38),c.NdJ("wizardCancel",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.onCancel())})("finish",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.onFinish())})("hide",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.hide())}),c.qZA()()}if(2&le){const Z=c.oxw();c.xp6(1),c.Q6J("wizardName",Z.pageType)}}let Cs=(()=>{class le{constructor(Z){this.modalService=Z,this.finish=new c.vpe,this.titleId=Ne.G.TileId,this.pageType=Gt.Q.AddDynamicAuth,this.activeType=Gt.Q.AddOidcDynamicAuth,this.showWizard=!1,this.wizardTypes=Gt.Q}ngOnInit(){}ngOnDestroy(){this.hide()}getDescription(){return this.activeType==Gt.Q.AddOidcDynamicAuth?"DynamicAuth.Wizard.TypeSelectStep.OidcHelp":this.activeType==Gt.Q.AddSamlDynamicAuth?"DynamicAuth.Wizard.TypeSelectStep.SamlHelp":""}choosePage(){this.pageType=this.activeType,this.showWizard=!0}setActive(Z){this.activeType=Z}onCancel(){this.pageType=Gt.Q.AddDynamicAuth,this.activeType=Gt.Q.AddOidcDynamicAuth,this.showWizard=!1}onFinish(){this.finish.emit(),this.hide()}hide(){this.modalService.hide(Ne.G.Id),this.modalService.onHidden.pipe((0,it.P)()).subscribe(()=>{this.onCancel()})}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(w.tT))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-wizard"]],outputs:{finish:"finish"},decls:2,vars:2,consts:[["class","",4,"ngIf"],[1,""],[1,"modal-header"],[1,"modal-title",3,"id"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"modal-progress"],["role","progressbar","aria-valuenow","2",1,"modal-progress-bar",2,"width","2%"],["progressBar",""],[1,"modal-body","scrollbars"],[1,"tw--mt-2","tw--ml-2","md:tw--mt-4","md:tw--ml-4"],[1,"tw-flex","tw-flex-wrap"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tw-border-t","tw-border-grey-300","tw-text-grey-700","tw-text-sm","tw-mt-6","tw-pt-5"],[1,"tw-text-sm","tw-font-semibold","tw-text-primary-500","tw-mb-2"],["aria-hidden","true",1,"fas","fa-info-circle","tw-w-5"],[4,"ngIf"],[3,"innerHTML",4,"ngIf"],["commonTypeButton",""],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","nextModal",1,"tw-btn-success",3,"disabled","click"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],[3,"innerHTML"],[1,"tw-pt-2","tw-pl-2","tw-w-full","sm:tw-w-1/2","md:tw-pt-4","md:tw-pl-4",3,"id"],["type","radio",1,"sr-only",3,"id","value","ngModel","click"],[1,"tw-block","tw-bg-white","tw-pl-16","tw-py-3","tw-w-full","tw-overflow-hidden","tw-rounded","tw-relative","group","trans",3,"for","ngClass","click"],[1,"tw-flex","tw-items-center","tw-justify-center","tw-w-16","tw-h-full","tw-absolute","tw-top-0","tw-left-0","trans",3,"ngClass"],[1,"fas","fa-check","tw-text-xl","trans",3,"ngClass"],["class","sr-only",4,"ngIf"],[1,"tw-px-4","tw-text-left"],[1,"tw-block","tw-font-semibold","trans",3,"ngClass"],[1,"tw-block","tw-text-xs","trans",3,"ngClass"],[1,"tw-hidden","tw-items-center","tw-justify-center","tw-w-16","tw-h-full","tw-absolute","tw-top-0","tw-right-0","trans","md:tw-flex"],[3,"ngClass"],[1,"sr-only"],[3,"wizardName","wizardCancel","finish","hide"]],template:function(Z,Ae){1&Z&&(c.YNc(0,Xi,39,42,"div",0),c.YNc(1,Si,2,1,"div",0)),2&Z&&(c.Q6J("ngIf",Ae.pageType===Ae.wizardTypes.AddDynamicAuth),c.xp6(1),c.Q6J("ngIf",Ae.showWizard))},dependencies:[n.mk,n.O5,n.tP,e.Fj,e._,e.JJ,e.On,dr,y.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();function Hn(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"app-dynamic-auth-wizard",21),c.NdJ("finish",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.reload())}),c.qZA()}}function As(le,gt){1&le&&(c.TgZ(0,"span"),c._UZ(1,"span",22),c._uU(2),c.ALo(3,"translate"),c.qZA()),2&le&&(c.xp6(2),c.hij(" ",c.lcZ(3,1,"Auditing.ShowFilters")," "))}function Rn(le,gt){1&le&&(c.TgZ(0,"span"),c._UZ(1,"span",23),c._uU(2),c.ALo(3,"translate"),c.qZA()),2&le&&(c.xp6(2),c.hij(" ",c.lcZ(3,1,"Auditing.HideFilters")," "))}function mr(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"div",28)(1,"label",29),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"select",30),c.NdJ("ngModelChange",function(Nt){c.CHM(Z);const Cn=c.oxw(2);return c.KtG(Cn.pageSize=Nt)})("change",function(){c.CHM(Z);const Nt=c.oxw(2);return c.KtG(Nt.setPageLength(+Nt.pageSize))}),c.TgZ(5,"option",31),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.TgZ(8,"option",32),c._uU(9),c.ALo(10,"translate"),c.qZA(),c.TgZ(11,"option",33),c._uU(12),c.ALo(13,"translate"),c.qZA()()()}if(2&le){const Z=c.oxw(2);c.xp6(2),c.AsE("",Z.pageSize," ",c.lcZ(3,6,"Nav.PerPage"),""),c.xp6(2),c.Q6J("ngModel",Z.pageSize),c.xp6(2),c.hij("25 ",c.lcZ(7,8,"Nav.PerPage"),""),c.xp6(3),c.hij("50 ",c.lcZ(10,10,"Nav.PerPage"),""),c.xp6(3),c.hij("100 ",c.lcZ(13,12,"Nav.PerPage"),"")}}function Sr(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"app-action-bar"),c.ynx(1,24),c.YNc(2,mr,14,14,"div",25),c.BQk(),c.ynx(3,26),c.TgZ(4,"button",27),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw(),Cn=c.MAs(3);return c.KtG(Nt.showWizard(Cn))}),c._uU(5),c.ALo(6,"translate"),c.qZA(),c.BQk(),c.qZA()}if(2&le){const Z=c.oxw();c.xp6(2),c.Q6J("ngIf",(null==Z.pagedResult?null:Z.pagedResult.results.length)>0),c.xp6(3),c.hij(" ",c.lcZ(6,2,"Common.Add")," ")}}function as(le,gt){1&le&&c._UZ(0,"app-simple-loader")}function Qr(le,gt){1&le&&(c.TgZ(0,"div",37)(1,"div"),c._uU(2),c.ALo(3,"translate"),c.qZA()()),2&le&&(c.xp6(2),c.Oqu(c.lcZ(3,1,"DynamicAuth.List.None")))}function Zr(le,gt){1&le&&(c.TgZ(0,"span",52)(1,"span",7),c._uU(2),c.ALo(3,"translate"),c.qZA()()),2&le&&(c.xp6(2),c.Oqu(c.lcZ(3,1,"Common.Disabled")))}function gr(le,gt){1&le&&(c.TgZ(0,"span",53),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"Common.Disabled")," "))}function ls(le,gt){1&le&&(c.TgZ(0,"span",54),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"Common.Reserved")," "))}const zi=function(le,gt){return{"fad fa-pencil":le,"fas fa-eye":gt}};function _r(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"tr",43)(1,"td",44),c.NdJ("click",function(){const Cn=c.CHM(Z).$implicit,En=c.oxw(3);return c.KtG(En.viewOrEditDynamicAuth(Cn))}),c.YNc(2,Zr,4,3,"span",45),c.TgZ(3,"b"),c._uU(4),c.qZA()(),c.TgZ(5,"td",46),c.NdJ("click",function(){const Cn=c.CHM(Z).$implicit,En=c.oxw(3);return c.KtG(En.viewOrEditDynamicAuth(Cn))}),c._uU(6),c.qZA(),c.TgZ(7,"td",46),c.NdJ("click",function(){const Cn=c.CHM(Z).$implicit,En=c.oxw(3);return c.KtG(En.viewOrEditDynamicAuth(Cn))}),c.TgZ(8,"code"),c._uU(9),c.qZA()(),c.TgZ(10,"td",47),c.NdJ("click",function(){const Cn=c.CHM(Z).$implicit,En=c.oxw(3);return c.KtG(En.viewOrEditDynamicAuth(Cn))}),c.YNc(11,gr,3,3,"span",48),c.YNc(12,ls,3,3,"span",49),c.qZA(),c.TgZ(13,"td",47),c.NdJ("click",function(){const Cn=c.CHM(Z).$implicit,En=c.oxw(3);return c.KtG(En.viewOrEditDynamicAuth(Cn))}),c.TgZ(14,"button",50),c.NdJ("click",function(){const Cn=c.CHM(Z).$implicit,En=c.oxw(3);return c.KtG(En.viewOrEditDynamicAuth(Cn))}),c._UZ(15,"span",51),c.TgZ(16,"span",7),c._uU(17),c.ALo(18,"translate"),c.qZA()()()()}if(2&le){const Z=gt.$implicit,Ae=c.oxw(3);c.ekj("inactive",!Z.enabled||(null==Z?null:Z.nonEditable)),c.s9C("id",Z.scheme),c.xp6(2),c.Q6J("ngIf",!Z.enabled),c.xp6(1),c.ekj("tw-text-blue-500",!(null!=Z&&Z.nonEditable)),c.xp6(1),c.hij(" ",null==Z?null:Z.scheme," "),c.xp6(2),c.hij(" ",null==Z?null:Z.displayName," "),c.xp6(3),c.Oqu(Ae.typeStr(null==Z?null:Z.type)),c.xp6(2),c.Q6J("ngIf",!Z.enabled),c.xp6(1),c.Q6J("ngIf",null==Z?null:Z.nonEditable),c.xp6(3),c.Q6J("ngClass",c.WLB(15,zi,!Ae.isReadOnly&&!Z.nonEditable,Ae.isReadOnly||Z.nonEditable)),c.xp6(2),c.Oqu(c.lcZ(18,13,"Common.Edit"))}}function cs(le,gt){if(1&le&&(c.TgZ(0,"table",38)(1,"thead")(2,"tr")(3,"th",39),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.TgZ(6,"th",40),c._uU(7),c.ALo(8,"translate"),c.qZA(),c.TgZ(9,"th",40),c._uU(10),c.ALo(11,"translate"),c.qZA(),c.TgZ(12,"th",41)(13,"span",7),c._uU(14),c.ALo(15,"translate"),c.qZA()(),c.TgZ(16,"th",41)(17,"span",7),c._uU(18),c.ALo(19,"translate"),c.qZA()()()(),c.TgZ(20,"tbody"),c.YNc(21,_r,19,18,"tr",42),c.qZA()()),2&le){const Z=c.oxw(2);c.xp6(4),c.hij(" ",c.lcZ(5,6,"Common.Scheme")," "),c.xp6(3),c.hij(" ",c.lcZ(8,8,"Common.Name")," "),c.xp6(3),c.hij(" ",c.lcZ(11,10,"Common.Type")," "),c.xp6(4),c.Oqu(c.lcZ(15,12,"Common.Status")),c.xp6(4),c.Oqu(c.lcZ(19,14,"Common.Actions")),c.xp6(3),c.Q6J("ngForOf",Z.dynamicAuths)}}function vr(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"app-pager",55),c.NdJ("onGoToPage",function(Nt){c.CHM(Z);const Cn=c.oxw(2);return c.KtG(Cn.goToPage(Nt))}),c.qZA()}if(2&le){const Z=c.oxw(2);c.Q6J("totalResults",null==Z.pagedResult?null:Z.pagedResult.totalCount)("currentPage",Z.page)("lastPage",null==Z.pagedResult?null:Z.pagedResult.pageCount)}}function Ni(le,gt){if(1&le&&(c.ynx(0),c.YNc(1,Qr,4,3,"div",34),c.YNc(2,cs,22,16,"table",35),c.YNc(3,vr,1,3,"app-pager",36),c.BQk()),2&le){const Z=c.oxw();c.xp6(1),c.Q6J("ngIf",(null==Z.dynamicAuths?null:Z.dynamicAuths.length)<1),c.xp6(1),c.Q6J("ngIf",(null==Z.dynamicAuths?null:Z.dynamicAuths.length)>0),c.xp6(1),c.Q6J("ngIf",(null==Z.pagedResult?null:Z.pagedResult.results.length)>0&&!Z.isLoading)}}let zr=(()=>{class le extends L.bk{constructor(Z,Ae,Nt,Cn,En,er,wr,Ro,Po){super(En,er,!0),this.errorService=Z,this.titleService=Ae,this.dynamicAuthenticationService=Nt,this.securityService=Cn,this.router=wr,this.localize=Ro,this.modalService=Po,this.activeFilters=[Be.OIDC,Be.SAML,Be.Enabled,Be.Disabled],this.pageSize=25,this.page=1,this.term="",this.isLoading=!0,this.showAdvancedFilters=!1,this.dynamicAuths=[],this.filterStream=new Xe.x,this.pageStream=new Xe.x,this.pageSizeStream=new Xe.x,this.mapSearchTerm=this.mapSearchTerm.bind(this)}get DynamicAuthFilters(){return Be}get isReadOnly(){return(0,ie.gR)(this.securityService.userPermissions)}typeStr(Z){return oe.hH[Z]}showWizard(Z){this.modalService.show(Z,{id:Ne.G.Id,ariaLabelledBy:Ne.G.TileId,ariaDescribedby:Ne.G.DescriptionId,backdrop:"static"})}reload(){this.pageStream.next(this.page),this.pageSizeStream.next(this.pageSize)}mapSearchTerm(Z){return this.term=Z,{searchTerm:Z,page:1,pageSize:this.pageSize}}ngOnInit(){const Z=this.translate.instant("Nav.DynamicAuth")+" - "+ne.de.SITE_TITLE;this.isLoading=!0,this.titleService.setTitle(Z);const Ae=this.filterStream.pipe((0,X.U)(En=>(this.activeFilters=En,{filters:En,searchTerm:this.term,page:this.page,pageSize:this.pageSize}))),Nt=this.pageStream.pipe((0,X.U)(En=>(this.page=En,{filters:this.activeFilters,searchTerm:this.term,page:En,pageSize:this.pageSize}))),Cn=this.pageSizeStream.pipe((0,X.U)(En=>(this.pageSize=En,{filters:this.activeFilters,searchTerm:this.term,page:this.page,pageSize:En})));Nt.pipe((0,Ke.b)(Cn),(0,Ke.b)(this.searchSource),(0,Ke.b)(Ae),(0,Ke.b)(this.enterKeySource),(0,Je.O)({filters:this.activeFilters,searchTerm:this.term,page:this.page,pageSize:this.pageSize}),(0,Ct.z)(En=>{this.isLoading=!0;const er=En.filters.join(" ");return this.dynamicAuthenticationService.get(En.searchTerm,En.page,En.pageSize,er).pipe((0,ht.g)(200))})).subscribe({next:En=>{this.pagedResult=En,this.dynamicAuths=this.pagedResult.results.map(er=>(0,Ze.Zn)(er)).sort((er,wr)=>Number(wr.nonEditable)-Number(er.nonEditable)),this.isLoading=!1},error:En=>{500===En.status?this.handleInternalServerError():this.errorService.handleError(En),this.isLoading=!1}})}filter(Z){if(this.activeFilters.includes(Z)){const Ae=this.activeFilters.indexOf(Z);this.activeFilters.splice(Ae,1)}else this.activeFilters.push(Z);this.filterStream.next(this.activeFilters)}isShowing(Z){return this.activeFilters.includes(Z)}goToPage(Z){this.pageStream.next(Z)}setPageLength(Z){this.page=1,this.pageSizeStream.next(Z)}viewOrEditDynamicAuth(Z){const Nt=this.localize.translateRoute(`${this.isReadOnly||Z.nonEditable?"/dynamic-auth/view":"/dynamic-auth"}/${Z.scheme}`);this.router.navigateByUrl(Nt)}handleInternalServerError(){this.toastr.error(this.translate.instant("IdentityProviders.Filter.StoredProcedureErrorMessage"),this.translate.instant("Notifications.Error"))}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(ze.T),c.Y36(et.Dx),c.Y36(ft.x),c.Y36(Tt.I),c.Y36(Zt._W),c.Y36(y.sK),c.Y36(h.F0),c.Y36(S.An),c.Y36(w.tT))},le.\u0275cmp=c.Xpm({type:le,selectors:[["ng-component"]],features:[c.qOj],decls:44,vars:35,consts:[[3,"title"],["idpWizardModal",""],["id","testContent",1,"tw-container","tw-mx-auto"],["id","searchContainer",1,"tw-mb-2"],[1,"tw-flex","tw-bg-white","tw-border","tw-border-grey-300","tw-opacity-75","tw-cursor-text","tw-rounded","focus-within:tw-opacity-100","focus-within:tw-border-blue-400","trans"],["for","idpTerm",1,"tw-flex","tw-items-center","tw-text-grey-500","tw-m-0","tw-ml-3"],["aria-hidden","true",1,"far","fa-search","tw-text-sm"],[1,"sr-only"],["id","idpTerm","type","search",1,"tw-bg-transparent","tw-border-0","tw-text-base","tw-leading-tight","tw-px-2","tw-py-2","tw-w-full","focus:tw-outline-none","trans",3,"ngModel","placeholder","ngModelChange","keyup"],["id","showFilterButton","type","button","aria-expanded","showAdvancedFilters",1,"tw-btn-link","tw-btn-small","tw-px-0","mt-2",3,"click"],[4,"ngIf"],["id","toggleFilters","aria-labelledby","showFilterButton",1,"tw-mt-3","tw-mb-6",3,"hidden"],[1,"tw-flex-grid","md:tw-flex-nowrap","mb-3"],[1,"tw-flex-grid-col","md:tw-ml-auto","md:tw-w-auto","mb-3","mr-2"],[1,"tw-form-label"],[1,"tw-flex","tw-items-center"],[1,"mr-2"],["id","oidcFilter",3,"ngClass","click"],["id","samlFilter",3,"ngClass","click"],["id","enabledFilter",3,"ngClass","click"],["id","disabledFilter",3,"ngClass","click"],["id","dynamicAuthWizardModal",3,"finish"],["aria-hidden","true",1,"fas","fa-angle-down","tw-mr-1"],["aria-hidden","true",1,"fas","fa-angle-up","tw-mr-1"],["left",""],["class","tw-hidden tw-form-select tw-w-auto sm:tw-block",4,"ngIf"],["right",""],["id","addIdpBtn",1,"tw-btn-success",3,"click"],[1,"tw-hidden","tw-form-select","tw-w-auto","sm:tw-block"],["for","pageSizeToggle",1,"sr-only"],["id","pageSizeToggle",1,"tw-form-control","tw-form-control-small",3,"ngModel","ngModelChange","change"],["value","25"],["value","50"],["value","100"],["id","idpNone","class","tw-alert","role","alert",4,"ngIf"],["id","idpTable","class","datatable selectable hover",4,"ngIf"],[3,"totalResults","currentPage","lastPage","onGoToPage",4,"ngIf"],["id","idpNone","role","alert",1,"tw-alert"],["id","idpTable",1,"datatable","selectable","hover"],["id","sortUsername",1,"md:tw-w-1/3","lg:tw-w-1/3"],[1,"tw-hidden","lg:tw-table-cell"],[1,"tw-w-1"],["class","group",3,"id","inactive",4,"ngFor","ngForOf"],[1,"group",3,"id"],[1,"tw-max-w-0","tw-truncate",3,"click"],["class","fas fa-exclamation-triangle tw-text-orange-500 tw-mr-1","container","body",4,"ngIf"],[1,"tw-hidden","tw-max-w-0","tw-truncate","lg:tw-table-cell",3,"click"],[3,"click"],["class","tw-pill-warning",4,"ngIf"],["class","tw-pill",4,"ngIf"],["type","button",1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500",3,"click"],["id","viewOrEditIcon","aria-hidden","true",3,"ngClass"],["container","body",1,"fas","fa-exclamation-triangle","tw-text-orange-500","tw-mr-1"],[1,"tw-pill-warning"],[1,"tw-pill"],[3,"totalResults","currentPage","lastPage","onGoToPage"]],template:function(Z,Ae){1&Z&&(c._UZ(0,"app-title-bar",0),c.ALo(1,"translate"),c.YNc(2,Hn,1,0,"ng-template",null,1,c.W1O),c.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"label",5),c._UZ(8,"span",6),c.TgZ(9,"span",7),c._uU(10),c.ALo(11,"translate"),c.qZA()(),c.TgZ(12,"input",8),c.NdJ("ngModelChange",function(Cn){return Ae.searchTerm=Cn})("keyup",function(Cn){return Ae.search(Cn)}),c.ALo(13,"translate"),c.qZA()(),c.TgZ(14,"button",9),c.NdJ("click",function(){return Ae.showAdvancedFilters=!Ae.showAdvancedFilters}),c.YNc(15,As,4,3,"span",10),c.YNc(16,Rn,4,3,"span",10),c.qZA(),c.TgZ(17,"div",11)(18,"div",12)(19,"div",13)(20,"p",14),c._uU(21),c.ALo(22,"translate"),c.qZA(),c.TgZ(23,"ul",15)(24,"li",16)(25,"button",17),c.NdJ("click",function(){return Ae.filter(Ae.DynamicAuthFilters.OIDC)}),c._uU(26),c.ALo(27,"translate"),c.qZA()(),c.TgZ(28,"li",16)(29,"button",18),c.NdJ("click",function(){return Ae.filter(Ae.DynamicAuthFilters.SAML)}),c._uU(30),c.ALo(31,"translate"),c.qZA()(),c.TgZ(32,"li",16)(33,"button",19),c.NdJ("click",function(){return Ae.filter(Ae.DynamicAuthFilters.Enabled)}),c._uU(34),c.ALo(35,"translate"),c.qZA()(),c.TgZ(36,"li")(37,"button",20),c.NdJ("click",function(){return Ae.filter(Ae.DynamicAuthFilters.Disabled)}),c._uU(38),c.ALo(39,"translate"),c.qZA()()()()(),c._UZ(40,"hr"),c.qZA()(),c.YNc(41,Sr,7,4,"app-action-bar",10),c.YNc(42,as,1,0,"app-simple-loader",10),c.YNc(43,Ni,4,3,"ng-container",10),c.qZA()),2&Z&&(c.Q6J("title",c.lcZ(1,19,"Nav.DynamicAuth")),c.xp6(10),c.Oqu(c.lcZ(11,21,"Common.Search")),c.xp6(2),c.s9C("placeholder",c.lcZ(13,23,"DynamicAuth.SearchPlaceholder")),c.Q6J("ngModel",Ae.searchTerm),c.xp6(3),c.Q6J("ngIf",!Ae.showAdvancedFilters),c.xp6(1),c.Q6J("ngIf",Ae.showAdvancedFilters),c.xp6(1),c.Q6J("hidden",!Ae.showAdvancedFilters),c.xp6(4),c.Oqu(c.lcZ(22,25,"Auditing.Showing")),c.xp6(4),c.Q6J("ngClass",Ae.isShowing(Ae.DynamicAuthFilters.OIDC)?"tw-btn":"tw-btn-link"),c.xp6(1),c.hij(" ",c.lcZ(27,27,"DynamicAuth.Filters.OIDC")," "),c.xp6(3),c.Q6J("ngClass",Ae.isShowing(Ae.DynamicAuthFilters.SAML)?"tw-btn":"tw-btn-link"),c.xp6(1),c.hij(" ",c.lcZ(31,29,"DynamicAuth.Filters.SAML")," "),c.xp6(3),c.Q6J("ngClass",Ae.isShowing(Ae.DynamicAuthFilters.Enabled)?"tw-btn":"tw-btn-link"),c.xp6(1),c.hij(" ",c.lcZ(35,31,"DynamicAuth.Filters.Enabled")," "),c.xp6(3),c.Q6J("ngClass",Ae.isShowing(Ae.DynamicAuthFilters.Disabled)?"tw-btn":"tw-btn-link"),c.xp6(1),c.hij(" ",c.lcZ(39,33,"DynamicAuth.Filters.Disabled")," "),c.xp6(3),c.Q6J("ngIf",!Ae.isLoading&&!Ae.isReadOnly),c.xp6(1),c.Q6J("ngIf",Ae.isLoading),c.xp6(1),c.Q6J("ngIf",!Ae.isLoading))},dependencies:[n.mk,n.sg,n.O5,e.YN,e.Kr,e.Fj,e.EJ,e.JJ,e.On,gn.G,Yt.K,on.w,Xt.P,Cs,y.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();var Wr=m(799);function Ls(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"li",2)(1,"button",3),c.NdJ("click",function(){const Cn=c.CHM(Z).index,En=c.oxw();return c.KtG(En.selectValue(Cn))}),c.TgZ(2,"span",4),c._uU(3),c.qZA()()()}if(2&le){const Z=gt.$implicit,Ae=gt.index,Nt=c.oxw();c.xp6(1),c.MT6("tw-state-toggle-btn ",Nt.borderStyle(Ae)," ",Nt.isSelected(Z),""),c.uIk("aria-label",Nt.enumValues),c.xp6(2),c.Oqu(Z)}}let Rr=(()=>{class le{constructor(){this.readonly=!1,this.newValue=new c.vpe}get id(){return this._id}set id(Z){this._id=Z||(0,ie.qs)()}ngOnInit(){}selectValue(Z){this.readonly||this.newValue.emit(this.options[Z])}borderStyle(Z){return 0===Z?"tw-rounded-l-lg":Z>=this.options.length-1?"tw-rounded-r-lg":"tw-rounded-none"}isSelected(Z){return Z===this.value?"tw-btn-selected":"tw-btn"}}return le.\u0275fac=function(Z){return new(Z||le)},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-state-toggle"]],inputs:{id:"id",options:"options",value:"value",readonly:"readonly"},outputs:{newValue:"newValue"},decls:2,vars:2,consts:[[3,"id"],["class","tw-state-toggle",4,"ngFor","ngForOf"],[1,"tw-state-toggle"],[3,"click"],[1,"tw-pl-1"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"ul",0),c.YNc(1,Ls,4,6,"li",1),c.qZA()),2&Z&&(c.s9C("id",Ae.id+"-enumValues-select"),c.xp6(1),c.Q6J("ngForOf",Ae.options))},dependencies:[n.sg],encapsulation:2}),le})();function Ss(le,gt){1&le&&(c.TgZ(0,"app-form-row",9),c._UZ(1,"input",10),c.qZA()),2&le&&c.Q6J("id","RemoteSignOutPath")("label","DynamicAuth.RemoteSignOutPath.Label")}function Di(le,gt){1&le&&(c.TgZ(0,"app-form-row",9),c._UZ(1,"input",11),c.qZA()),2&le&&c.Q6J("id","SignedOutRedirectUri")("label","DynamicAuth.SignedOutRedirectUri.Label")}function xs(le,gt){1&le&&(c.TgZ(0,"app-form-row",9),c._UZ(1,"input",12),c.qZA()),2&le&&c.Q6J("id","SignedOutCallbackPath")("label","DynamicAuth.SignedOutCallbackPath.Label")}const To=function(){return["Query","From Post","Fragment"]};function jr(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"app-form-row",9)(1,"app-row-bar",13)(2,"app-state-toggle",14),c.NdJ("newValue",function(Nt){c.CHM(Z);const Cn=c.oxw(2);return c.KtG(Cn.updateResponseMode(Nt))}),c.qZA(),c.TgZ(3,"a",15),c._UZ(4,"span",16),c.TgZ(5,"span",17),c._uU(6),c.ALo(7,"translate"),c.qZA()()()()}if(2&le){const Z=c.oxw(2);c.Q6J("id","ResponseMode")("label","DynamicAuth.ResponseMode.Label"),c.xp6(2),c.Q6J("id","ResponseMode")("options",c.DdM(8,To))("value",Z.advancedForm.controls.responseMode.value),c.xp6(4),c.Oqu(c.lcZ(7,6,"Common.Help"))}}function ss(le,gt){1&le&&(c.TgZ(0,"app-form-row",18)(1,"app-form-toggle",6),c._UZ(2,"input",19),c.qZA()()),2&le&&(c.Q6J("id","RefreshOnIssuerKeyNotFound")("label","DynamicAuth.RefreshOnIssuerKeyNotFound.Label")("help","DynamicAuth.RefreshOnIssuerKeyNotFound.Help"),c.xp6(1),c.Q6J("id","RefreshOnIssuerKeyNotFound")("isTraffic",!0)("isAlt",!1))}function Hs(le,gt){1&le&&(c.TgZ(0,"app-form-row",18)(1,"app-form-toggle",6),c._UZ(2,"input",20),c.qZA()()),2&le&&(c.Q6J("id","SaveTokens")("label","DynamicAuth.SaveTokens.Label")("help","DynamicAuth.SaveTokens.Help"),c.xp6(1),c.Q6J("id","SaveTokens")("isTraffic",!0)("isAlt",!1))}function Us(le,gt){1&le&&(c.TgZ(0,"app-form-row",18)(1,"app-form-toggle",6),c._UZ(2,"input",21),c.qZA()()),2&le&&(c.Q6J("id","UseTokenLifetime")("label","DynamicAuth.UseTokenLifetime.Label")("help","DynamicAuth.UseTokenLifetime.Help"),c.xp6(1),c.Q6J("id","UseTokenLifetime")("isTraffic",!0)("isAlt",!1))}function Es(le,gt){1&le&&(c.TgZ(0,"app-form-row",18)(1,"app-form-toggle",6),c._UZ(2,"input",22),c.qZA()()),2&le&&(c.Q6J("id","SkipUnrecognizedRequests")("label","DynamicAuth.SkipUnrecognizedRequests.Label")("help","DynamicAuth.SkipUnrecognizedRequests.Help"),c.xp6(1),c.Q6J("id","SkipUnrecognizedRequests")("isTraffic",!0)("isAlt",!1))}function ki(le,gt){1&le&&(c.TgZ(0,"app-form-row",5)(1,"app-form-toggle",6),c._UZ(2,"input",23),c.qZA()()),2&le&&(c.Q6J("id","DisableTelemetry")("label","DynamicAuth.DisableTelemetry.Label")("help","DynamicAuth.DisableTelemetry.Help")("isLast",!0),c.xp6(1),c.Q6J("id","DisableTelemetry")("isTraffic",!0)("isAlt",!1))}function No(le,gt){if(1&le&&(c.TgZ(0,"form",2),c.YNc(1,Ss,2,2,"app-form-row",3),c.YNc(2,Di,2,2,"app-form-row",3),c.YNc(3,xs,2,2,"app-form-row",3),c.YNc(4,jr,8,9,"app-form-row",3),c.YNc(5,ss,3,6,"app-form-row",4),c.TgZ(6,"app-form-row",5)(7,"app-form-toggle",6),c._UZ(8,"input",7),c.qZA()(),c.YNc(9,Hs,3,6,"app-form-row",4),c.YNc(10,Us,3,6,"app-form-row",4),c.YNc(11,Es,3,6,"app-form-row",4),c.YNc(12,ki,3,7,"app-form-row",8),c.qZA()),2&le){const Z=c.oxw();c.Q6J("formGroup",Z.advancedForm),c.xp6(1),c.Q6J("ngIf",Z.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Z.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Z.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Z.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Z.isRskDynamicAuth),c.xp6(1),c.Q6J("id","GetClaimsFromUserInfoEndpoint")("label","DynamicAuth.GetClaimsFromUserInfoEndpoint.Label")("help","DynamicAuth.GetClaimsFromUserInfoEndpoint.Help")("isLast",!Z.isRskDynamicAuth),c.xp6(1),c.Q6J("id","GetClaimsFromUserInfoEndpoint")("isTraffic",!0)("isAlt",!1),c.xp6(2),c.Q6J("ngIf",Z.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Z.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Z.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Z.isRskDynamicAuth)}}let us=(()=>{class le{constructor(Z,Ae,Nt,Cn){this.fb=Z,this.errorService=Ae,this.dynamicAuthCacheService=Nt,this.configService=Cn,this.mode="Query",this.dynamicAuthTypes=oe.hH,this.isDeleting=!1}ngOnInit(){this.configService.getConfig().subscribe({next:Z=>{this.isRskDynamicAuth=Z.featureFlagOptions.dynamicAuthenticationFlag==ln.u.Rsk},error:Z=>{this.errorService.handleError(Z)}}),this.dynamicAuthCacheService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{this.dynamicAuth=Z,this.oidcOptions=(0,Ze.A3)(this.dynamicAuth.options),this.buildForm(),this.subscribeToValueChanges()},error:Z=>{this.errorService.handleError(Z)}})}subscribeToValueChanges(){this.advancedFormSubscription=this.advancedForm.valueChanges.subscribe({next:Z=>{this.dynamicAuthCacheService.componentDirtyValidMap.set("DynamicAuthEditAdvancedComponent",this.advancedForm.valid);var Ae={...this.oidcOptions,getClaimsFromUserInfoEndpoint:this.advancedForm.controls.getClaimsFromUserInfoEndpoint.value};this.isRskDynamicAuth&&(this.mode=this.advancedForm.controls.responseMode.value,Ae={...Ae,remoteSignOutPath:this.advancedForm.controls.remoteSignOutPath.value,signedOutRedirectUri:this.advancedForm.controls.signedOutRedirectUri.value,signedOutCallbackPath:this.advancedForm.controls.signedOutCallbackPath.value,refreshMetadataOnIssuerKeyNotFound:this.advancedForm.controls.refreshOnIssuerKeyNotFound.value,saveTokens:this.advancedForm.controls.saveTokens.value,useTokenLifetime:this.advancedForm.controls.useTokenLifetime.value,skipUnrecognizedRequests:this.advancedForm.controls.skipUnrecognizedRequests.value,disableTelemetry:this.advancedForm.controls.disableTelemetry.value});const Nt={...this.dynamicAuth,options:JSON.stringify(Ae)};this.dynamicAuthCacheService.unsavedCache.next(Nt)}})}ngOnDestroy(){this.advancedFormSubscription.unsubscribe()}buildForm(){var Z={getClaimsFromUserInfoEndpoint:[this.oidcOptions.getClaimsFromUserInfoEndpoint,[]]};this.isRskDynamicAuth&&(Z={...Z,remoteSignOutPath:[this.oidcOptions.remoteSignOutPath,[e.kI.required,kn()]],signedOutRedirectUri:[this.oidcOptions.signedOutRedirectUri,[e.kI.required,kn()]],signedOutCallbackPath:[this.oidcOptions.signedOutCallbackPath,[e.kI.required,kn()]],responseMode:[this.mode,[]],refreshOnIssuerKeyNotFound:[this.oidcOptions.refreshMetadataOnIssuerKeyNotFound,[]],saveTokens:[this.oidcOptions.saveTokens,[]],useTokenLifetime:[this.oidcOptions.useTokenLifetime,[]],skipUnrecognizedRequests:[this.oidcOptions.skipUnrecognizedRequests,[]],disableTelemetry:[this.oidcOptions.disableTelemetry,[]]}),this.advancedForm=this.fb.group(Z)}updateResponseMode(Z){this.advancedForm.controls.responseMode.setValue(Z)}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(e.QS),c.Y36(ze.T),c.Y36(rt.C),c.Y36(_t.E))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-edit-advanced"]],decls:2,vars:1,consts:[["id","editIdPDetails",1,"tw-container","tw-mx-auto"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"id","label",4,"ngIf"],[3,"id","label","help",4,"ngIf"],[3,"id","label","help","isLast"],[3,"id","isTraffic","isAlt"],["id","GetClaimsFromUserInfoEndpoint","formControlName","getClaimsFromUserInfoEndpoint","type","checkbox",1,"tw-form-switch__input"],[3,"id","label","help","isLast",4,"ngIf"],[3,"id","label"],["type","text","name","RemoteSignOutPath","id","RemoteSignOutPath","formControlName","remoteSignOutPath","required","",1,"tw-form-control"],["type","text","name","SignedOutRedirectUri","id","SignedOutRedirectUri","formControlName","signedOutRedirectUri","required","",1,"tw-form-control"],["type","text","name","SignedOutCallbackPath","id","SignedOutCallbackPath","formControlName","signedOutCallbackPath","required","",1,"tw-form-control"],[1,"tw-form-input"],["left","",3,"id","options","value","newValue"],["id","authorityHelpBtn","target","_blank","href","https://www.identityserver.com/documentation/adminui/DynamicAuthentication/Advanced/","right","",1,"tw-btn-white","tw-rounded-full","tw-w-8","tw-h-8","tw-mb-2","tw-bottom-0","tw-right-0"],[1,"fa","fa-question"],[1,"sr-only"],[3,"id","label","help"],["id","RefreshOnIssuerKeyNotFound","formControlName","refreshOnIssuerKeyNotFound","type","checkbox",1,"tw-form-switch__input"],["id","SaveTokens","formControlName","saveTokens","type","checkbox",1,"tw-form-switch__input"],["id","UseTokenLifetime","formControlName","useTokenLifetime","type","checkbox",1,"tw-form-switch__input"],["id","SkipUnrecognizedRequests","formControlName","skipUnrecognizedRequests","type","checkbox",1,"tw-form-switch__input"],["id","DisableTelemetry","formControlName","disableTelemetry","type","checkbox",1,"tw-form-switch__input"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c.YNc(1,No,13,17,"form",1),c.qZA()),2&Z&&(c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth&&Ae.advancedForm))},dependencies:[n.O5,e._Y,e.Fj,e.Wl,e.JJ,e.JL,e.Q7,e.sg,e.u,bt.L,Wr.O,Zn,Rr,y.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();var _o=m(5664),Ii=m(9465),Vi=m(2830),xr=m(6252);const Wn=function(le){return[le]};function Js(le,gt){if(1&le&&(c.TgZ(0,"div",9)(1,"app-form-row",10)(2,"app-form-toggle",11),c._UZ(3,"input",12),c.qZA()(),c.TgZ(4,"app-form-row",13),c._UZ(5,"app-readonly",14),c.ALo(6,"readOnlyValue"),c.qZA(),c.TgZ(7,"app-form-row",13),c._UZ(8,"input",15),c.qZA()()),2&le){const Z=c.oxw(2);c.xp6(1),c.Q6J("id","Enabled")("label","Common.Enabled"),c.xp6(1),c.Q6J("id","Enabled")("isTraffic",!0)("isAlt",!1),c.xp6(2),c.Q6J("id","Scheme")("label","DynamicAuth.Scheme.Label")("help","DynamicAuth.Scheme.Help"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(15,Wn,c.lcZ(6,13,Z.dynamicAuth.scheme))),c.xp6(2),c.Q6J("id","DisplayName")("label","DynamicAuth.DisplayName.Label")("help","DynamicAuth.DisplayName.Help")}}function rr(le,gt){1&le&&(c.TgZ(0,"app-form-row",13),c._UZ(1,"input",23),c.qZA()),2&le&&c.Q6J("id","CallbackPath")("label","DynamicAuth.CallbackPath.Label")("help","DynamicAuth.CallbackPath.Help")}function Kr(le,gt){if(1&le&&(c.TgZ(0,"option",24),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le){const Z=gt.$implicit;c.Q6J("value",Z),c.xp6(1),c.Oqu(c.lcZ(2,2,"DynamicAuth.Flows."+Z))}}function Ao(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"div",16)(1,"app-form-row",13)(2,"input",17),c.NdJ("focusout",function(){c.CHM(Z);const Nt=c.oxw(2);return c.KtG(Nt.tryReachAuthority())}),c.qZA()(),c.TgZ(3,"app-form-row",13),c._UZ(4,"input",18),c.qZA(),c.YNc(5,rr,2,3,"app-form-row",19),c.TgZ(6,"app-form-row",13)(7,"div",20)(8,"select",21),c.YNc(9,Kr,3,4,"option",22),c.qZA()()()()}if(2&le){const Z=c.oxw(2);c.xp6(1),c.Q6J("id","Authority")("label","DynamicAuth.Authority.Label")("help","DynamicAuth.Authority.Help"),c.xp6(2),c.Q6J("id","ClientId")("label","DynamicAuth.ClientId.Label")("help","DynamicAuth.ClientId.Help"),c.xp6(2),c.Q6J("ngIf",Z.isRskDynamicAuth),c.xp6(1),c.Q6J("id","Flow")("label","DynamicAuth.Flow.Label")("help","DynamicAuth.Flow.Help"),c.xp6(3),c.Q6J("ngForOf",Z.allowedFlows)}}function Ti(le,gt){1&le&&(c.TgZ(0,"app-form-row",29)(1,"app-form-toggle",11),c._UZ(2,"input",30),c.qZA()()),2&le&&(c.Q6J("id","DifferentSignOut")("label","DynamicAuth.DifferentSignOut.Label")("help","DynamicAuth.DifferentSignOut.Help"),c.xp6(1),c.Q6J("id","DifferentSignOut")("isTraffic",!0)("isAlt",!1))}function yr(le,gt){if(1&le&&(c.TgZ(0,"app-form-row",13)(1,"app-row-bar",26),c._UZ(2,"input",31),c.ALo(3,"translate"),c.qZA()()),2&le){const Z=c.oxw(3);c.Q6J("id","SignOutScheme")("label","DynamicAuth.SignOutScheme.Label")("help","DynamicAuth.SignOutScheme.Help"),c.xp6(2),c.s9C("placeholder",c.lcZ(3,8,"DynamicAuth.SignOutScheme.Placeholder")),c.Q6J("typeahead",Z.signInSchemeOptions)("typeaheadAsync",!1)("typeaheadItemTemplate",Z.customItemTemplate)("typeaheadMinLength",0)}}function Vr(le,gt){if(1&le&&(c.TgZ(0,"div",25)(1,"app-form-row",13)(2,"app-row-bar",26),c._UZ(3,"input",27),c.ALo(4,"translate"),c.qZA()(),c.YNc(5,Ti,3,6,"app-form-row",28),c.YNc(6,yr,4,10,"app-form-row",19),c.qZA()),2&le){const Z=c.oxw(2);c.xp6(1),c.Q6J("id","SignInScheme")("label","DynamicAuth.SignInScheme.Label")("help","DynamicAuth.SignInScheme.Help"),c.xp6(2),c.s9C("placeholder",c.lcZ(4,6,"DynamicAuth.SignInScheme.Placeholder")),c.xp6(2),c.Q6J("ngIf",Z.dynamicAuth.type==Z.dynamicAuthTypes.SAML),c.xp6(1),c.Q6J("ngIf",Z.dynamicAuth.type==Z.dynamicAuthTypes.SAML&&Z.formGroup.get("signInSchemeForm.differentSignOut").value)}}function Er(le,gt){if(1&le&&(c.TgZ(0,"div")(1,"app-form-row",32),c._UZ(2,"app-lifetime-picker",33),c.qZA()()),2&le){const Z=c.oxw(2);c.xp6(1),c.Q6J("id","TimeComparisonTolerance")("label","DynamicAuth.SAML.TimeComparisonTolerance.Label")("help","DynamicAuth.SAML.TimeComparisonTolerance.Help")("isLast",!0),c.xp6(1),c.Q6J("buttons",Z.defaultToleranceTimes)}}function cn(le,gt){if(1&le&&(c.TgZ(0,"div",34)(1,"app-form-row",32)(2,"div",35),c._UZ(3,"app-readonly",14),c.TgZ(4,"button",36),c.ALo(5,"translate"),c._UZ(6,"span",37),c.TgZ(7,"span",38),c._uU(8),c.ALo(9,"translate"),c.qZA()()()()()),2&le){const Z=c.oxw(2);c.xp6(1),c.Q6J("id","ClientSecret")("label","DynamicAuth.ClientSecret.Label")("help","DynamicAuth.ClientSecret.Help")("isLast",!0),c.xp6(2),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(12,Wn,Z.displaySecret)),c.xp6(1),c.Q6J("tooltip",c.lcZ(5,8,"DynamicAuth.UpdateClientSecret.Title")),c.xp6(4),c.Oqu(c.lcZ(9,10,"Common.Edit"))}}function Kn(le,gt){if(1&le&&(c.TgZ(0,"form",3),c.YNc(1,Js,9,17,"div",4),c.YNc(2,Ao,10,11,"div",5),c.YNc(3,Vr,7,8,"div",6),c.YNc(4,Er,3,5,"div",7),c.YNc(5,cn,10,14,"div",8),c.qZA()),2&le){const Z=c.oxw();c.Q6J("formGroup",Z.formGroup),c.xp6(1),c.Q6J("ngIf",Z.formGroup.get("detailsForm")),c.xp6(1),c.Q6J("ngIf",Z.formGroup.get("connectionForm")&&Z.dynamicAuth.type==Z.dynamicAuthTypes.OIDC),c.xp6(1),c.Q6J("ngIf",Z.formGroup.get("signInSchemeForm")&&(Z.isRskDynamicAuth||Z.dynamicAuth.type==Z.dynamicAuthTypes.SAML)),c.xp6(1),c.Q6J("ngIf",Z.formGroup.get("timeComparisonTolerance")&&(Z.isRskDynamicAuth||Z.dynamicAuth.type==Z.dynamicAuthTypes.SAML)),c.xp6(1),c.Q6J("ngIf",Z.formGroup.get("secretForm")&&Z.dynamicAuth.type==Z.dynamicAuthTypes.OIDC)}}const fs=function(){return{animated:!1,backdrop:"static"}};function ei(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"div",39)(1,"form",3)(2,"div",40)(3,"div",41)(4,"div",42)(5,"h5",43),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.TgZ(8,"button",44),c._UZ(9,"span",45),c.TgZ(10,"span",38),c._uU(11),c.ALo(12,"translate"),c.qZA()()(),c.TgZ(13,"div",46)(14,"p",47),c._uU(15),c.ALo(16,"translate"),c.qZA(),c._UZ(17,"input",48),c.qZA(),c._UZ(18,"div",49),c.TgZ(19,"div",50)(20,"div",51)(21,"div",52)(22,"button",53),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.addNewClientSecretToFormGroup())}),c._uU(23),c.ALo(24,"translate"),c.qZA()(),c.TgZ(25,"button",54),c._uU(26),c.ALo(27,"translate"),c.qZA()()()()()()()}if(2&le){const Z=c.oxw();c.Q6J("config",c.DdM(17,fs)),c.xp6(1),c.Q6J("formGroup",Z.formClientSecret),c.xp6(5),c.Oqu(c.lcZ(7,7,"DynamicAuth.UpdateClientSecret.Title")),c.xp6(5),c.Oqu(c.lcZ(12,9,"Common.Close")),c.xp6(4),c.hij("",c.lcZ(16,11,"DynamicAuth.UpdateClientSecret.Description"),":"),c.xp6(8),c.hij(" ",c.lcZ(24,13,"DynamicAuth.UpdateClientSecret.Confirm")," "),c.xp6(3),c.Oqu(c.lcZ(27,15,"DynamicAuth.UpdateClientSecret.No"))}}let Hi=(()=>{class le{constructor(Z,Ae,Nt,Cn,En,er,wr){this.fb=Z,this.errorService=Ae,this.dynamicAuthCacheService=Nt,this.configService=Cn,this.providerValidator=En,this.translate=er,this.toastr=wr,this.dynamicAuthTypes=oe.hH,this.isDeleting=!1,this.allowedFlows=ke.FlowTypes,this.samlSignInSchemeCodeFrag=ke.SamlSignInSchemeCodeFrag,this.samlSignOutSchemeCodeFrag=ke.SamlSignOutSchemeCodeFrag,this.failedToContactAuthority=!1}get ReadOnlyFieldType(){return Tr.O}ngOnInit(){this.defaultToleranceTimes=[{duration:2,unit:_o.f.Minutes},{duration:5,unit:_o.f.Minutes},{duration:10,unit:_o.f.Minutes}],this.configService.getConfig().subscribe({next:Z=>{this.isRskDynamicAuth=Z.featureFlagOptions.dynamicAuthenticationFlag==ln.u.Rsk},error:Z=>{this.errorService.handleError(Z)}}),this.dynamicAuthCacheService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{switch(this.dynamicAuth=Z,this.dynamicAuth.type){case oe.hH.OIDC:this.buildOidcForms(),this.formClientSecret=this.fb.group({newClientSecret:[""]}),this.tryReachAuthority();break;case oe.hH.SAML:this.buildSamlForms()}this.subscribeToValueChanges()},error:Z=>{this.errorService.handleError(Z)}})}ngOnDestroy(){this.formSubscription.unsubscribe(),this.authorityChanged?.unsubscribe()}buildDetailsForm(){return this.fb.group({enabled:[this.dynamicAuth.enabled,[]],displayName:[this.dynamicAuth.displayName,[e.kI.required]]})}buildOidcForms(){this.oidcOptions=(0,Ze.A3)(this.dynamicAuth.options),this.displaySecret=new Vn.I(this.oidcOptions.clientSecret);var Z={authority:[this.oidcOptions.authority,[e.kI.required,e.kI.pattern("^https://.{1,}$")]],clientId:[this.oidcOptions.clientId,[e.kI.required]],flow:[this.oidcOptions.usePkce?je.AuthCodePlusPkce:je.AuthCode,[e.kI.required]]};this.isRskDynamicAuth&&(Z.callbackPath=[this.oidcOptions.callbackPath,[e.kI.required,kn()]]);var Ae={detailsForm:this.buildDetailsForm(),connectionForm:this.fb.group(Z),secretForm:this.fb.group({clientSecret:[this.oidcOptions.clientSecret,[]]})};this.isRskDynamicAuth&&(Ae.signInSchemeForm=this.fb.group({signInScheme:[this.oidcOptions.signInScheme,[e.kI.required]]})),this.formGroup=this.fb.group(Ae)}buildSamlForms(){this.samlOptions=(0,Ze.ZP)(this.dynamicAuth.options),this.formGroup=this.fb.group({detailsForm:this.buildDetailsForm(),signInSchemeForm:this.fb.group({signInScheme:[this.samlOptions.signInScheme,[e.kI.required]],differentSignOut:!(0,ie.Ew)(this.samlOptions.signOutScheme),signOutScheme:[this.samlOptions.signOutScheme]}),timeComparisonTolerance:[this.samlOptions.timeComparisonTolerance,[]]})}tryReachAuthority(){var Z=this.formGroup.get("connectionForm.authority").value;this.providerValidator.isValid(Z).subscribe(Ae=>{Ae||this.toastr.warning(this.translate.instant("DynamicAuth.Authority.ReachableWarningMsg"),this.translate.instant("DynamicAuth.Authority.ReachableWarningTitle"))})}subscribeToValueChanges(){this.formSubscription=this.formGroup.valueChanges.subscribe({next:Z=>{let Nt,Ae={...this.dynamicAuth};Ae=this.updateDetails(Ae),this.dynamicAuth.type===oe.hH.OIDC?(Nt={...this.oidcOptions},Nt=this.updateConnection(Nt),Nt=this.updateSignInScheme(Nt),Nt=this.updateSecret(Nt)):this.dynamicAuth.type===oe.hH.SAML&&(Nt={...this.samlOptions},Nt=this.updateSignInScheme(Nt),Nt=this.updateTimeComparisonTolerance(Nt)),Ae.options=JSON.stringify(Nt),this.dynamicAuthCacheService.unsavedCache.next(Ae)}}),this.dynamicAuth.type===oe.hH.OIDC&&(this.authorityChanged=this.formGroup.get("connectionForm.authority").valueChanges.subscribe(Z=>{this.failedToContactAuthority=!1}))}canSave(){return!1}updateDetails(Z){return this.dynamicAuthCacheService.componentDirtyValidMap.set("DynamicAuthEditDetailsComponent.detailsForm",this.formGroup.get("detailsForm").valid),{...Z,enabled:this.formGroup.get("detailsForm.enabled").value,displayName:this.formGroup.get("detailsForm.displayName").value}}updateConnection(Z){this.dynamicAuthCacheService.componentDirtyValidMap.set("DynamicAuthEditDetailsComponent.connectionForm",this.formGroup.get("connectionForm").valid);var Ae={...Z,authority:this.formGroup.get("connectionForm.authority").value,clientId:this.formGroup.get("connectionForm.clientId").value,usePkce:this.formGroup.get("connectionForm.flow").value==je.AuthCodePlusPkce};return this.isRskDynamicAuth&&(Ae.callbackPath=this.formGroup.get("connectionForm.callbackPath").value),Ae}updateSignInScheme(Z){if(!this.isRskDynamicAuth&&this.dynamicAuth.type==oe.hH.OIDC)return Z;if(this.dynamicAuthCacheService.componentDirtyValidMap.set("DynamicAuthEditDetailsComponent.signInSchemeForm",this.formGroup.get("signInSchemeForm").valid),this.dynamicAuth.type===oe.hH.OIDC)return{...Z,signInScheme:this.formGroup.get("signInSchemeForm.signInScheme").value};if(this.dynamicAuth.type===oe.hH.SAML){var Ae=this.formGroup.get("signInSchemeForm.signOutScheme").value;return this.formGroup.get("signInSchemeForm.differentSignOut").value||(Ae=""),{...this.samlOptions,signInScheme:this.formGroup.get("signInSchemeForm.signInScheme").value,signOutScheme:Ae}}}updateSecret(Z){this.dynamicAuthCacheService.componentDirtyValidMap.set("DynamicAuthEditDetailsComponent.secretForm",this.formGroup.get("secretForm").valid);var Ae=this.formGroup.get("secretForm.clientSecret").value;return this.displaySecret=new Vn.I(Ae),{...Z,clientSecret:Ae}}updateTimeComparisonTolerance(Z){var Ae=this.formGroup.get("timeComparisonTolerance");return this.dynamicAuthCacheService.componentDirtyValidMap.set("DynamicAuthEditDetailsComponent.timeComparisonTolerance",Ae.valid),{...Z,timeComparisonTolerance:Ae.value}}setTimeComparisonTolerance(Z){this.formGroup.controls.timeComparisonTolerance.setValue(Z)}checkTimeComparisonToleranceSelected(Z){return Z==this.formGroup.get("timeComparisonTolerance").value}addNewClientSecretToFormGroup(){var Z=this.formClientSecret.get("newClientSecret").value;this.formGroup.controls.secretForm.setValue({clientSecret:Z}),this.formClientSecret.controls.newClientSecret.setValue(null)}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(e.QS),c.Y36(ze.T),c.Y36(rt.C),c.Y36(_t.E),c.Y36(Se),c.Y36(y.sK),c.Y36(Zt._W))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-edit-details"]],decls:3,vars:2,consts:[["id","editIdPDetails",1,"tw-container","tw-mx-auto"],[3,"formGroup",4,"ngIf"],["bsModal","","id","updateClientSecretModal","class","modal","role","dialog","aria-hidden","true","tabindex","-1",3,"config",4,"ngIf"],[3,"formGroup"],["formGroupName","detailsForm",4,"ngIf"],["formGroupName","connectionForm",4,"ngIf"],["formGroupName","signInSchemeForm",4,"ngIf"],[4,"ngIf"],["formGroupName","secretForm",4,"ngIf"],["formGroupName","detailsForm"],[3,"id","label"],[3,"id","isTraffic","isAlt"],["id","Enabled","formControlName","enabled","type","checkbox",1,"tw-form-switch__input"],[3,"id","label","help"],[3,"fieldType","values"],["type","text","name","DisplayName","id","DisplayName","formControlName","displayName","required","",1,"tw-form-control"],["formGroupName","connectionForm"],["type","text","name","Authority","id","Authority","formControlName","authority","required","",1,"tw-form-control",3,"focusout"],["type","text","name","ClientId","id","ClientId","formControlName","clientId","required","",1,"tw-form-control"],[3,"id","label","help",4,"ngIf"],[1,"tw-form-select"],["id","flow","formControlName","flow",1,"tw-form-control"],[3,"value",4,"ngFor","ngForOf"],["type","text","name","CallbackPath","id","CallbackPath","formControlName","callbackPath","required","",1,"tw-form-control"],[3,"value"],["formGroupName","signInSchemeForm"],[1,"tw-form-input"],["id","signInScheme","formControlName","signInScheme","type","text","name","Sign-In Scheme","left","",1,"tw-form-control",3,"placeholder"],["class","tw-form-typeahead",3,"id","label","help",4,"ngIf"],[1,"tw-form-typeahead",3,"id","label","help"],["id","DifferentSignOut","formControlName","differentSignOut","type","checkbox",1,"tw-form-switch__input"],["id","signOutScheme","formControlName","signOutScheme","type","text","name","Sign-Out Scheme","container","#addIdpModal","autocomplete","off","left","",1,"tw-form-control",3,"typeahead","typeaheadAsync","typeaheadItemTemplate","typeaheadMinLength","placeholder"],[3,"id","label","help","isLast"],["id","timeComparisonTolerance","formControlName","timeComparisonTolerance",3,"buttons"],["formGroupName","secretForm"],[1,"tw-flex","tw-w-full","lg:tw-max-w-2xl"],["type","button","data-toggle","modal","data-target","#updateClientSecretModal","placement","right",1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500","editClientSecret",3,"tooltip"],["id","editIcon","aria-hidden","true",1,"fad","fa-pencil"],[1,"sr-only"],["bsModal","","id","updateClientSecretModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"modal-body","tw-text-left","scrollbars"],[1,"tw-mb-4"],["type","text","name","newClientSecret","id","newClientSecret","formControlName","newClientSecret",1,"tw-form-control"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","updateSecretBtn","data-dismiss","modal",1,"tw-btn-success",3,"click"],["data-dismiss","modal",1,"tw-btn-link","tw--mr-4"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c.YNc(1,Kn,6,6,"form",1),c.qZA(),c.YNc(2,ei,28,18,"div",2)),2&Z&&(c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth&&(Ae.oidcOptions||Ae.samlOptions)),c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth&&Ae.oidcOptions))},dependencies:[n.sg,n.O5,e._Y,e.YN,e.Kr,e.Fj,e.Wl,e.EJ,e.JJ,e.JL,e.Q7,e.sg,e.u,e.x0,x.i9,w.oB,Ii.U,bt.L,Wr.O,Zn,b.Bp,Vi.f,xr.b,y.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();function Te(le,gt){1&le&&(c.TgZ(0,"div")(1,"app-form-row",3),c._UZ(2,"input",7),c.qZA()()),2&le&&(c.xp6(1),c.Q6J("id","IdPInitiatedSsoCompletionPath")("label","DynamicAuth.SAML.IdPInitiatedSsoCompletionPath.Label")("help","DynamicAuth.SAML.IdPInitiatedSsoCompletionPath.Help")("isLast",!0))}function he(le,gt){if(1&le&&(c.TgZ(0,"form",2)(1,"app-form-row",3)(2,"app-form-toggle",4),c._UZ(3,"input",5),c.qZA()(),c.YNc(4,Te,3,4,"div",6),c.qZA()),2&le){const Z=c.oxw();c.Q6J("formGroup",Z.idpAdvancedForm),c.xp6(1),c.Q6J("id","AllowIdpInitiatedSso")("label","DynamicAuth.SAML.AllowIdpInitiatedSso.Label")("help","DynamicAuth.SAML.AllowIdpInitiatedSso.Help")("isLast",!Z.idpAdvancedForm.get("allowIdpInitiatedSso").value),c.xp6(1),c.Q6J("id","AllowIdpInitiatedSso")("isTraffic",!0)("isAlt",!1),c.xp6(2),c.Q6J("ngIf",Z.idpAdvancedForm.get("allowIdpInitiatedSso").value)}}let z=(()=>{class le{constructor(Z,Ae,Nt){this.fb=Z,this.errorService=Ae,this.dynamicAuthCacheService=Nt}ngOnInit(){this.dynamicAuthCacheService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{this.dynamicAuth=Z,this.samlOptions=(0,Ze.ZP)(this.dynamicAuth.options),this.buildForm(),this.subscribeToValueChanges()},error:Z=>{this.errorService.handleError(Z)}})}subscribeToValueChanges(){this.idpAdvancedFormSubscription=this.idpAdvancedForm.valueChanges.subscribe({next:Z=>{this.dynamicAuthCacheService.componentDirtyValidMap.set("DynamicAuthEditSpDetailsComponent",this.idpAdvancedForm.valid);var Ae={...this.samlOptions,allowIdpInitiatedSso:this.idpAdvancedForm.controls.allowIdpInitiatedSso.value,idPInitiatedSsoCompletionPath:this.idpAdvancedForm.controls.idPInitiatedSsoCompletionPath.value};const Nt={...this.dynamicAuth,options:JSON.stringify(Ae)};this.dynamicAuthCacheService.unsavedCache.next(Nt)}})}ngOnDestroy(){this.idpAdvancedFormSubscription.unsubscribe()}buildForm(){this.idpAdvancedForm=this.fb.group({allowIdpInitiatedSso:[this.samlOptions.allowIdpInitiatedSso,[]],idPInitiatedSsoCompletionPath:[this.samlOptions.idPInitiatedSsoCompletionPath,[e.kI.required]]})}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(e.QS),c.Y36(ze.T),c.Y36(rt.C))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-edit-idp-advanced"]],decls:2,vars:1,consts:[["id","editIdpAdvanced",1,"tw-container","tw-mx-auto"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"id","label","help","isLast"],[3,"id","isTraffic","isAlt"],["id","AllowIdpInitiatedSso","formControlName","allowIdpInitiatedSso","type","checkbox",1,"tw-form-switch__input"],[4,"ngIf"],["type","text","name","IdPInitiatedSsoCompletionPath","id","IdPInitiatedSsoCompletionPath","formControlName","idPInitiatedSsoCompletionPath","required","",1,"tw-form-control"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c.YNc(1,he,5,9,"form",1),c.qZA()),2&Z&&(c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth&&Ae.idpAdvancedForm))},dependencies:[n.O5,e._Y,e.Fj,e.Wl,e.JJ,e.JL,e.Q7,e.sg,e.u,bt.L,Wr.O],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();function $e(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"form",2)(1,"app-form-row",3)(2,"app-form-toggle",4),c._UZ(3,"input",5),c.qZA()(),c.TgZ(4,"app-form-row",6)(5,"div",7),c._UZ(6,"input",8),c.TgZ(7,"button",9),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.tryMetadataAddr())}),c.TgZ(8,"span"),c._uU(9),c.ALo(10,"translate"),c.qZA()()()()()}if(2&le){const Z=c.oxw();c.Q6J("formGroup",Z.idpDetailsForm),c.xp6(1),c.Q6J("id","RequireValidMetadataSignature")("label","DynamicAuth.SAML.RequireValidMetadataSignature.Label")("help","DynamicAuth.SAML.RequireValidMetadataSignature.Help"),c.xp6(1),c.Q6J("id","RequireValidMetadataSignature")("isTraffic",!0)("isAlt",!1),c.xp6(2),c.Q6J("id","MetadataAddress")("label","DynamicAuth.SAML.IdpMetadataAddress.Label")("help","DynamicAuth.SAML.IdpMetadataAddress.Help")("isLast",!0),c.xp6(5),c.Oqu(c.lcZ(10,12,"Common.ValidateMetadata"))}}let $t=(()=>{class le{constructor(Z,Ae,Nt,Cn,En,er){this.fb=Z,this.errorService=Ae,this.dynamicAuthCacheService=Nt,this.providerValidator=Cn,this.translate=En,this.toastr=er,this.metadataAddrStream=new xt.t(1)}ngOnInit(){this.dynamicAuthCacheService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{this.dynamicAuth=Z,this.samlOptions=(0,Ze.ZP)(this.dynamicAuth.options),this.buildForm(),this.subscribeToValueChanges(),(0,ie.Ew)(this.samlOptions.idpMetadataAddress)||this.metadataAddrStream.next(this.samlOptions.idpMetadataAddress)},error:Z=>{this.errorService.handleError(Z)}}),this.metadataAddrStream.subscribe(Z=>{this.providerValidator.validateMetadataUrl(Z).subscribe(Ae=>{Ae?this.toastr.success_noduplicate(this.translate.instant("DynamicAuth.Wizard.SAML.ExternalProviderStep.MetadataValidMsg"),this.translate.instant("DynamicAuth.Wizard.SAML.ExternalProviderStep.MetadataValidTitle")):this.toastr.error_noduplicate(this.translate.instant("DynamicAuth.Wizard.SAML.ExternalProviderStep.MetadataInValidMsg"),this.translate.instant("DynamicAuth.Wizard.SAML.ExternalProviderStep.MetadataInValidTitle"))})})}subscribeToValueChanges(){this.idpDetailsFormSubscription=this.idpDetailsForm.valueChanges.subscribe({next:Z=>this.updateCache()})}ngOnDestroy(){this.idpDetailsFormSubscription.unsubscribe(),this.metadataAddrStream.unsubscribe()}buildForm(){var Z={idpMetadataAddress:[this.samlOptions.idpMetadataAddress,[e.kI.required,e.kI.pattern("^https://.{1,}$")]],requireValidMetadataSignature:[this.samlOptions.requireValidMetadataSignature]};this.idpDetailsForm=this.fb.group(Z)}updateCache(){this.dynamicAuthCacheService.componentDirtyValidMap.set("DynamicAuthEditIdpDetailsComponent",this.idpDetailsForm.valid);var Z={...this.samlOptions,idpMetadataAddress:this.idpDetailsForm.controls.idpMetadataAddress.value,requireValidMetadataSignature:this.idpDetailsForm.controls.requireValidMetadataSignature.value};const Ae={...this.dynamicAuth,options:JSON.stringify(Z)};this.dynamicAuthCacheService.unsavedCache.next(Ae)}tryMetadataAddr(){const Z=this.idpDetailsForm.get("idpMetadataAddress");Z.invalid||this.metadataAddrStream.next(Z.value)}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(e.QS),c.Y36(ze.T),c.Y36(rt.C),c.Y36(Se),c.Y36(y.sK),c.Y36(Ui.o))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-edit-idp-details"]],decls:2,vars:1,consts:[["id","editIdpDetails",1,"tw-container","tw-mx-auto"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"id","label","help"],[3,"id","isTraffic","isAlt"],["id","RequireValidMetadataSignature","formControlName","requireValidMetadataSignature","type","checkbox",1,"tw-form-switch__input"],[3,"id","label","help","isLast"],[1,"tw-flex","tw-w-full","lg:tw-max-w-2xl"],["type","text","name","IdpMetadataAddress","id","IdpMetadataAddress","formControlName","idpMetadataAddress","placeholder","https://","required","",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0"],["id","testMetadataAddr",1,"tw-btn","tw-rounded-l-none",3,"click"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c.YNc(1,$e,11,14,"form",1),c.qZA()),2&Z&&(c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth&&Ae.idpDetailsForm))},dependencies:[n.O5,e._Y,e.Fj,e.Wl,e.JJ,e.JL,e.Q7,e.sg,e.u,bt.L,Wr.O,y.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();var xn=m(6478),xi=m(7073);const Dr=["AdvancedTabs"];let Ir=(()=>{class le{constructor(){}ngOnInit(){}}return le.\u0275fac=function(Z){return new(Z||le)},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-edit-idp"]],viewQuery:function(Z,Ae){if(1&Z&&c.Gf(Dr,7),2&Z){let Nt;c.iGM(Nt=c.CRH())&&(Ae.advancedTabs=Nt.first)}},decls:6,vars:5,consts:[[1,"tw-container","tw-mx-auto"],[3,"pillMode"],[3,"tabTitle","tabValue"],["id","editDynamicAuthIdpDetails"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0)(1,"app-custom-tabs",1),c._UZ(2,"app-custom-tab",2)(3,"app-custom-tab",2),c.qZA()(),c.TgZ(4,"div",3),c._UZ(5,"router-outlet"),c.qZA()),2&Z&&(c.xp6(1),c.Q6J("pillMode",!0),c.xp6(1),c.Q6J("tabTitle","Nav.Details")("tabValue","details"),c.xp6(1),c.Q6J("tabTitle","Nav.Advanced")("tabValue","advanced"))},dependencies:[h.lC,xn.v,xi.x],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();function Ji(le,gt){if(1&le&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"slice"),c.qZA()),2&le){const Z=gt.item;c.xp6(1),c.Oqu(Z.length>20?c.Dn7(2,1,Z,0,20)+"...":Z)}}function ai(le,gt){1&le&&(c.TgZ(0,"div",11)(1,"div"),c._uU(2),c.ALo(3,"translate"),c.qZA()()),2&le&&(c.xp6(2),c.hij(" ",c.lcZ(3,1,"DynamicAuth.NoScopesMessage")," "))}function Ie(le,gt){1&le&&(c.TgZ(0,"span",21),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"Common.Reserved")," "))}function Fe(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"button",22),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw().$implicit,Cn=c.oxw(3);return c.KtG(Cn.removeScope(Nt))}),c._UZ(1,"span",23),c.TgZ(2,"span",15),c._uU(3),c.ALo(4,"translate"),c.qZA()()}2&le&&(c.xp6(3),c.Oqu(c.lcZ(4,1,"Common.Delete.Title")))}function yt(le,gt){if(1&le&&(c.TgZ(0,"tr")(1,"td",18)(2,"span"),c._uU(3),c.qZA()(),c.TgZ(4,"td"),c.YNc(5,Ie,3,3,"span",19),c.qZA(),c.TgZ(6,"td"),c.YNc(7,Fe,5,3,"button",20),c.qZA()()),2&le){const Z=gt.$implicit,Ae=c.oxw(3);c.xp6(3),c.Oqu(Z),c.xp6(2),c.Q6J("ngIf",!Ae.allowRemoveScope(Z)),c.xp6(2),c.Q6J("ngIf",Ae.allowRemoveScope(Z))}}function At(le,gt){if(1&le&&(c.TgZ(0,"table",12)(1,"thead",13)(2,"th",14)(3,"span",15),c._uU(4),c.ALo(5,"translate"),c.qZA()(),c.TgZ(6,"th",16)(7,"span",15),c._uU(8),c.ALo(9,"translate"),c.qZA()(),c.TgZ(10,"th",16)(11,"span",15),c._uU(12),c.ALo(13,"translate"),c.qZA()()(),c.TgZ(14,"tbody"),c.YNc(15,yt,8,3,"tr",17),c.qZA()()),2&le){const Z=c.oxw(2);c.xp6(4),c.Oqu(c.lcZ(5,4,"Common.Scope")),c.xp6(4),c.Oqu(c.lcZ(9,6,"Common.Reserved")),c.xp6(4),c.Oqu(c.lcZ(13,8,"Common.Actions")),c.xp6(3),c.Q6J("ngForOf",Z.currentScopes())}}function Bt(le,gt){if(1&le){const Z=c.EpF();c.TgZ(0,"form",3)(1,"app-form-row",4)(2,"app-row-bar",5),c._UZ(3,"input",6),c.ALo(4,"translate"),c.TgZ(5,"button",7),c.NdJ("click",function(){c.CHM(Z);const Nt=c.oxw();return c.KtG(Nt.addScope())}),c._uU(6),c.ALo(7,"translate"),c.qZA()()(),c.TgZ(8,"div",8),c.YNc(9,ai,4,3,"div",9),c.YNc(10,At,16,10,"table",10),c.qZA()()}if(2&le){const Z=c.oxw(),Ae=c.MAs(1);c.Q6J("formGroup",Z.scopesForm),c.xp6(1),c.Q6J("id","NewScope")("hasLabel",!1)("isLast",!0),c.xp6(2),c.s9C("placeholder",c.lcZ(4,15,"DynamicAuth.Scopes.Placeholder")),c.Q6J("typeahead",Z.options)("typeaheadWaitMs",200)("typeaheadAsync",!0)("typeaheadItemTemplate",Ae)("typeaheadMinLength",0)("maxlength",Z.maxScopeLength),c.xp6(3),c.hij(" ",c.lcZ(7,17,"Common.Add")," "),c.xp6(2),c.Q6J("id","Scopes"),c.xp6(1),c.Q6J("ngIf",Z.currentScopes().length<=0),c.xp6(1),c.Q6J("ngIf",Z.currentScopes().length>0)}}let Lt=(()=>{class le{constructor(Z,Ae,Nt,Cn,En,er){this.fb=Z,this.errorService=Ae,this.toastr=Nt,this.translateService=Cn,this.dynamicAuthChachService=En,this.providerValidator=er,this.newScope="",this.dynamicAuthTypes=oe.hH,this.isDeleting=!1,this.maxScopeLength=ke.MaxScopeLength}ngOnInit(){this.dynamicAuthChachService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{this.dynamicAuth=Z,this.oidcOptions=(0,Ze.A3)(this.dynamicAuth.options),this.buildForm(),this.subscribeToValueChanges()},error:Z=>{this.errorService.handleError(Z)}}),this.options=new Ft.y(Z=>{let Ae=this.scopesForm.get("newScope").value;Z.next(Ae)}).pipe((0,jn.w)(Z=>this.providerValidator.supportedScopes(this.oidcOptions.authority).pipe((0,X.U)(Ae=>this.filterScopes(Z,Ae)))))}filterScopes(Z,Ae){const Nt=!Z;return Ae.filter(Cn=>!this.currentScopes().includes(Cn)&&(Nt||Cn.includes(Z)))}subscribeToValueChanges(){this.scopesFormSubscription=this.scopesForm.controls.scopes.valueChanges.subscribe({next:Z=>{this.dynamicAuthChachService.componentDirtyValidMap.set("DynamicAuthEditScopesComponent",this.scopesForm.valid);const Ae={...this.oidcOptions,scope:this.scopesForm.controls.scopes.value},Nt={...this.dynamicAuth,options:JSON.stringify(Ae)};this.dynamicAuthChachService.unsavedCache.next(Nt)}})}ngOnDestroy(){this.scopesFormSubscription.unsubscribe()}buildForm(){this.scopesForm=this.fb.group({newScope:[this.newScope],scopes:[this.oidcOptions.scope]})}addScope(){const Z=this.scopesForm.controls.newScope.value,Ae=this.scopesForm.controls.scopes.value;""!==Z?Z.indexOf(" ")>=0?this.toastr.error(this.translateService.instant("DynamicAuth.Scopes.CannotHaveSpaces")):Ae.includes(Z)?this.toastr.error(this.translateService.instant("DynamicAuth.Scopes.AlreadyAdded")):this.scopesForm.setValue({newScope:"",scopes:[...Ae,Z]}):this.toastr.error(this.translateService.instant("DynamicAuth.Scopes.MustSpecifyScope"))}removeScope(Z){this.scopesForm.controls.scopes.setValue(this.scopesForm.controls.scopes.value.filter(Nt=>Nt!==Z))}currentScopes(){const Z=this.scopesForm.controls.scopes;return Z?Z.value:[]}allowRemoveScope(Z){return ke.AllowRemoveScope(Z)}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(e.QS),c.Y36(ze.T),c.Y36(Zt._W),c.Y36(y.sK),c.Y36(rt.C),c.Y36(Se))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-edit-scopes"]],decls:4,vars:1,consts:[["customItemTemplate",""],["id","editIdPDetails",1,"tw-container","tw-mx-auto"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"id","hasLabel","isLast"],[1,"tw-form-typeahead"],["id","new-scope-input","formControlName","newScope","type","text","name","New Scope","container","#addIdpModal","autocomplete","off","left","",1,"tw-form-control",3,"typeahead","typeaheadWaitMs","typeaheadAsync","typeaheadItemTemplate","typeaheadMinLength","placeholder","maxlength"],["id","addScopeButton","right","",1,"tw-btn-success",3,"click"],[1,"tw-mt-6",3,"id"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable",4,"ngIf"],["role","alert",1,"tw-alert"],[1,"datatable"],[1,""],[1,"tw-w-full"],[1,"sr-only"],[1,"tw-w-1"],[4,"ngFor","ngForOf"],[1,"tw-table-cell","tw-max-w-0","tw-truncate"],["class","tw-pill",4,"ngIf"],["class","tw-btn-link tw-btn-small tw-text-red-500","value","Delete",3,"click",4,"ngIf"],[1,"tw-pill"],["value","Delete",1,"tw-btn-link","tw-btn-small","tw-text-red-500",3,"click"],["aria-hidden","true",1,"fas","fa-times"]],template:function(Z,Ae){1&Z&&(c.YNc(0,Ji,3,5,"ng-template",null,0,c.W1O),c.TgZ(2,"div",1),c.YNc(3,Bt,11,19,"form",2),c.qZA()),2&Z&&(c.xp6(3),c.Q6J("ngIf",Ae.dynamicAuth))},dependencies:[n.sg,n.O5,e._Y,e.Fj,e.JJ,e.JL,e.nD,e.sg,e.u,bt.L,Zn,b.Bp,n.OU,y.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();function tn(le,gt){1&le&&(c._UZ(0,"span",12),c.ALo(1,"translate")),2&le&&c.Q6J("innerHTML",c.lcZ(1,1,"DynamicAuth.FederationPathWarning"),c.oJD)}function fn(le,gt){1&le&&(c._UZ(0,"span",13),c.ALo(1,"translate")),2&le&&c.Q6J("innerHTML",c.lcZ(1,1,"DynamicAuth.FederationPathWarning"),c.oJD)}function $n(le,gt){1&le&&(c._UZ(0,"span",14),c.ALo(1,"translate")),2&le&&c.Q6J("innerHTML",c.lcZ(1,1,"DynamicAuth.FederationPathWarning"),c.oJD)}function Ln(le,gt){if(1&le&&(c.TgZ(0,"form",2)(1,"app-form-row",3),c._UZ(2,"input",4),c.qZA(),c.TgZ(3,"app-form-row",3),c._UZ(4,"input",5),c.YNc(5,tn,2,3,"span",6),c.qZA(),c.TgZ(6,"app-form-row",3),c._UZ(7,"input",7),c.YNc(8,fn,2,3,"span",8),c.qZA(),c.TgZ(9,"app-form-row",9),c._UZ(10,"input",10),c.YNc(11,$n,2,3,"span",11),c.qZA()()),2&le){const Z=c.oxw();c.Q6J("formGroup",Z.spDetailsForm),c.xp6(1),c.Q6J("id","SPEntityID")("label","DynamicAuth.SPEntityID.Label")("help","DynamicAuth.SPEntityID.Help"),c.xp6(2),c.Q6J("id","SpMetadataAddress")("label","DynamicAuth.SpMetadataAddress.Label")("help","DynamicAuth.SpMetadataAddress.Help"),c.xp6(2),c.Q6J("ngIf",!Z.validMetadataPath()),c.xp6(1),c.Q6J("id","CallbackPath")("label","DynamicAuth.CallbackPath.Label")("help","DynamicAuth.CallbackPath.Help"),c.xp6(2),c.Q6J("ngIf",!Z.validCallbackPath()),c.xp6(1),c.Q6J("id","SignedOutCallbackPath")("label","DynamicAuth.SignedOutCallbackPath.Label")("help","DynamicAuth.SignedOutCallbackPath.Help")("isLast",!0),c.xp6(2),c.Q6J("ngIf",!Z.validSignedOutPath())}}let lr=(()=>{class le{constructor(Z,Ae,Nt){this.fb=Z,this.errorService=Ae,this.dynamicAuthCacheService=Nt}ngOnInit(){this.dynamicAuthCacheService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{this.dynamicAuth=Z,this.samlOptions=(0,Ze.ZP)(this.dynamicAuth.options),this.buildForm(),this.subscribeToValueChanges()},error:Z=>{this.errorService.handleError(Z)}})}subscribeToValueChanges(){this.spDetailsFormSubscription=this.spDetailsForm.valueChanges.subscribe({next:Z=>{this.dynamicAuthCacheService.componentDirtyValidMap.set("DynamicAuthEditSpDetailsComponent",this.spDetailsForm.valid);var Ae={...this.samlOptions,spEntityId:this.spDetailsForm.controls.spEntityId.value,spMetadataAddress:this.spDetailsForm.controls.spMetadataAddress.value,callbackPath:this.spDetailsForm.controls.callbackPath.value,signedOutCallbackPath:this.spDetailsForm.controls.signedOutCallbackPath.value};const Nt={...this.dynamicAuth,options:JSON.stringify(Ae)};this.dynamicAuthCacheService.unsavedCache.next(Nt)}})}ngOnDestroy(){this.spDetailsFormSubscription.unsubscribe()}buildForm(){var Z={spEntityId:[this.samlOptions.spEntityId,[e.kI.required]],spMetadataAddress:[this.samlOptions.spMetadataAddress,[e.kI.required,Tn()]],callbackPath:[this.samlOptions.callbackPath,[e.kI.required,Tn()]],signedOutCallbackPath:[this.samlOptions.signedOutCallbackPath,[e.kI.required,Tn()]]};this.spDetailsForm=this.fb.group(Z)}validMetadataPath(){return this.spDetailsForm.get("spMetadataAddress").valid}validCallbackPath(){return this.spDetailsForm.get("callbackPath").valid}validSignedOutPath(){return this.spDetailsForm.get("signedOutCallbackPath").valid}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(e.QS),c.Y36(ze.T),c.Y36(rt.C))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-edit-sp-details"]],decls:2,vars:1,consts:[["id","editSPDetails",1,"tw-container","tw-mx-auto"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[3,"id","label","help"],["type","text","name","DisplayName","id","DisplayName","formControlName","spEntityId","required","",1,"tw-form-control"],["type","text","name","SpMetadataAddress","id","SpMetadataAddress","formControlName","spMetadataAddress","required","",1,"tw-form-control"],["id","MetaWarn","class","tw-form-text-warning",3,"innerHTML",4,"ngIf"],["type","text","name","CallbackPath","id","CallbackPath","formControlName","callbackPath","required","",1,"tw-form-control"],["id","CallbackWarn","class","tw-form-text-warning",3,"innerHTML",4,"ngIf"],[3,"id","label","help","isLast"],["type","text","name","CallbackPath","id","SignedOutCallbackPath","formControlName","signedOutCallbackPath","required","",1,"tw-form-control"],["id","SignOutWarn","class","tw-form-text-warning",3,"innerHTML",4,"ngIf"],["id","MetaWarn",1,"tw-form-text-warning",3,"innerHTML"],["id","CallbackWarn",1,"tw-form-text-warning",3,"innerHTML"],["id","SignOutWarn",1,"tw-form-text-warning",3,"innerHTML"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c.YNc(1,Ln,12,17,"form",1),c.qZA()),2&Z&&(c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth&&Ae.spDetailsForm))},dependencies:[n.O5,e._Y,e.Fj,e.JJ,e.JL,e.Q7,e.sg,e.u,bt.L,y.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();var Pr=m(964);function cr(le,gt){if(1&le&&(c.TgZ(0,"form",7)(1,"app-form-row",16)(2,"app-form-toggle",23),c._UZ(3,"input",24),c.qZA()()()),2&le){const Z=c.oxw();c.Q6J("formGroup",Z.spRequestForm),c.xp6(1),c.Q6J("id","SignAuthenticationRequests")("label","DynamicAuth.SAML.SignAuthenticationRequests.Label")("help","DynamicAuth.SAML.SignAuthenticationRequests.Help"),c.xp6(1),c.Q6J("id","SignAuthenticationRequests")("isTraffic",!0)("isAlt",!1)}}function si(le,gt){1&le&&(c.TgZ(0,"button",25),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"Clients.Saml.AddCert")," "))}function yn(le,gt){1&le&&(c.TgZ(0,"button",26),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"Clients.Saml.ReplaceCertificate")," "))}const Oo=function(){return{animated:!1,backdrop:"static"}};let Xs=(()=>{class le{constructor(Z,Ae,Nt,Cn,En,er,wr){this.fb=Z,this.errorService=Ae,this.dynamicAuthCacheService=Nt,this.toastr=Cn,this.translate=En,this.certService=er,this.dynamicAuthService=wr,this.canDeleteCert=!1,this.selectedFile=void 0,this.fileName=new Vn.I("")}get ReadOnlyFieldType(){return Tr.O}ngOnInit(){this.dynamicAuthCacheService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{this.dynamicAuth=Z,this.samlOptions=(0,Ze.ZP)(this.dynamicAuth.options),this.certificateDescription=this.samlOptions.signingCertificateDto?[this.samlOptions.signingCertificateDto]:[],this.canDeleteCert=this.samlOptions.signAuthenticationRequests,this.buildForm(),this.subscribeToValueChanges()},error:Z=>{this.errorService.handleError(Z)}})}subscribeToValueChanges(){this.spRequestFormSubscription=this.spRequestForm.valueChanges.subscribe({next:Z=>{this.dynamicAuthCacheService.componentDirtyValidMap.set("DynamicAuthEditSpRequestComponent",this.spRequestForm.valid);var Ae={...this.samlOptions,signAuthenticationRequests:this.spRequestForm.controls.signAuthenticationRequests.value};const Nt={...this.dynamicAuth,options:JSON.stringify(Ae)};this.canDeleteCert=this.spRequestForm.controls.signAuthenticationRequests.value,this.dynamicAuthCacheService.unsavedCache.next(Nt)}})}buildForm(){this.spRequestForm=this.fb.group({signAuthenticationRequests:[this.samlOptions.signAuthenticationRequests,[]]}),this.certForm=this.fb.group({selectedFile:void 0,certPassword:["",[]]})}handleFileInput(Z){this.selectedFile=Z.item(0)}updateSigningCert(){this.fileName=new Vn.I("");const Z=this.certForm.get("certPassword").value;this.certService.verifyCertFilePassword(this.selectedFile,Z,{next:Ae=>{this.fileName=new Vn.I(this.selectedFile?.name),this.dynamicAuthService.replaceSigningCert(this.dynamicAuth.scheme,Ae,Z).subscribe(Nt=>{this.certificateDescription=[Nt],this.selectedFile=null,this.certForm.get("certPassword").setValue(""),this.updateSigninCertInCache(Nt)})},error:Ae=>{this.toastr.error(this.translate.instant("Notifications.CertInValidMsg"),this.translate.instant("Notifications.CertInValidTitle")),this.selectedFile=null,this.certForm.get("certPassword").setValue("")}})}removeSigningCert(){this.dynamicAuthService.removeSigningCert(this.dynamicAuth.scheme).subscribe(()=>{this.samlOptions.signingCertificateDto=null,this.certificateDescription=[],this.updateSigninCertInCache(null)},Z=>{this.errorService.handleError(Z)})}updateSigninCertInCache(Z){var Ae={...this.samlOptions,signingCertificateDto:Z};const Nt={...this.dynamicAuth,options:JSON.stringify(Ae)};this.dynamicAuthCacheService.unsavedCache.next(Nt)}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(e.QS),c.Y36(ze.T),c.Y36(rt.C),c.Y36(Zt._W),c.Y36(y.sK),c.Y36(P.S),c.Y36(ft.x))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-edit-sp-request"]],decls:31,vars:26,consts:[["id","editSpRequest",1,"tw-container","tw-mx-auto"],[3,"formGroup",4,"ngIf"],[3,"certificates","showSingle","deleteCertDisabled","delete"],["addButton",""],["id","addCertButton","class","tw-btn-success","type","button","data-toggle","modal","data-target","#addCertificateModal",4,"ngIf"],["id","replaceCertButton","class","tw-btn-success tw-mr-4","type","button","data-toggle","modal","data-target","#addCertificateModal",4,"ngIf"],["bsModal","","id","addCertificateModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[3,"formGroup"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-left","scrollbars"],[3,"id","label","help"],[1,"tw-form-control"],["id","fileInput","type","file","name","file","accept",".pfx,.p12",1,"tw-form-file","tw-max-w-full",3,"change"],["fileInput","","selectedFile",""],["type","text","name","CertPassword","id","CertPassword","formControlName","certPassword",1,"tw-form-control"],[3,"id","isLast"],["id","updateCertBtn","data-dismiss","modal",1,"tw-btn-success",3,"click"],[3,"id","isTraffic","isAlt"],["id","SignAuthenticationRequests","formControlName","signAuthenticationRequests","type","checkbox",1,"tw-form-switch__input"],["id","addCertButton","type","button","data-toggle","modal","data-target","#addCertificateModal",1,"tw-btn-success"],["id","replaceCertButton","type","button","data-toggle","modal","data-target","#addCertificateModal",1,"tw-btn-success","tw-mr-4"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c.YNc(1,cr,4,7,"form",1),c.TgZ(2,"app-saml-cert-list",2),c.NdJ("delete",function(){return Ae.removeSigningCert()}),c.ynx(3,3),c.YNc(4,si,3,3,"button",4),c.YNc(5,yn,3,3,"button",5),c.BQk(),c.qZA(),c.TgZ(6,"div",6)(7,"form",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"h5",11),c._uU(12),c.ALo(13,"translate"),c.qZA(),c.TgZ(14,"button",12),c._UZ(15,"span",13),c.TgZ(16,"span",14),c._uU(17),c.ALo(18,"translate"),c.qZA()()(),c.TgZ(19,"div",15)(20,"app-form-row",16)(21,"div",17)(22,"input",18,19),c.NdJ("change",function(Cn){return Ae.handleFileInput(Cn.target.files)}),c.qZA()()(),c.TgZ(25,"app-form-row",16),c._UZ(26,"input",20),c.qZA(),c.TgZ(27,"app-form-row",21)(28,"button",22),c.NdJ("click",function(){return Ae.updateSigningCert()}),c._uU(29),c.ALo(30,"translate"),c.qZA()()()()()()()()),2&Z&&(c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth&&Ae.spRequestForm),c.xp6(1),c.Q6J("certificates",Ae.certificateDescription)("showSingle",!0)("deleteCertDisabled",Ae.canDeleteCert),c.xp6(2),c.Q6J("ngIf",Ae.certificateDescription.length<1),c.xp6(1),c.Q6J("ngIf",Ae.certificateDescription.length>0),c.xp6(1),c.Q6J("config",c.DdM(25,Oo)),c.xp6(1),c.Q6J("formGroup",Ae.certForm),c.xp6(5),c.Oqu(c.lcZ(13,19,"DynamicAuth.UpdateSigningCertificate.Title")),c.xp6(5),c.Oqu(c.lcZ(18,21,"Common.Close")),c.xp6(3),c.Q6J("id","fileInput")("label","DynamicAuth.CertFile.Label")("help","DynamicAuth.CertFile.Help"),c.xp6(5),c.Q6J("id","CertPassword")("label","DynamicAuth.CertPassword.Label")("help","DynamicAuth.CertPassword.Help"),c.xp6(2),c.Q6J("id","updateCertBtn")("isLast",!0),c.xp6(2),c.Oqu(c.lcZ(30,23,"Common.Update")))},dependencies:[n.O5,e._Y,e.Fj,e.Wl,e.JJ,e.JL,e.sg,e.u,w.oB,bt.L,Wr.O,Pr.z,y.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();function de(le,gt){if(1&le&&(c.TgZ(0,"form",7)(1,"app-form-row",16)(2,"app-form-toggle",23),c._UZ(3,"input",24),c.qZA()(),c.TgZ(4,"app-form-row",16)(5,"app-form-toggle",23),c._UZ(6,"input",25),c.qZA()()()),2&le){const Z=c.oxw();c.Q6J("formGroup",Z.spResponseForm),c.xp6(1),c.Q6J("id","RequireSignedAssertions")("label","DynamicAuth.SAML.RequireSignedAssertions.Label")("help","DynamicAuth.SAML.RequireSignedAssertions.Help"),c.xp6(1),c.Q6J("id","RequireSignedAssertions")("isTraffic",!0)("isAlt",!1),c.xp6(2),c.Q6J("id","RequireEncryptedAssertions")("label","DynamicAuth.SAML.RequireEncryptedAssertions.Label")("help","DynamicAuth.SAML.RequireEncryptedAssertions.Help"),c.xp6(1),c.Q6J("id","RequireEncryptedAssertions")("isTraffic",!0)("isAlt",!1)}}function Oe(le,gt){1&le&&(c.TgZ(0,"button",26),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"Clients.Saml.AddCert")," "))}function ge(le,gt){1&le&&(c.TgZ(0,"button",27),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"Clients.Saml.ReplaceCertificate")," "))}const He=function(){return{animated:!1,backdrop:"static"}};let ot=(()=>{class le{constructor(Z,Ae,Nt,Cn,En,er,wr){this.fb=Z,this.errorService=Ae,this.dynamicAuthCacheService=Nt,this.toastr=Cn,this.translate=En,this.certService=er,this.dynamicAuthService=wr,this.canDeleteCert=!1,this.selectedFile=void 0,this.fileName=new Vn.I("")}get ReadOnlyFieldType(){return Tr.O}ngOnInit(){this.dynamicAuthCacheService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{this.dynamicAuth=Z,this.samlOptions=(0,Ze.ZP)(this.dynamicAuth.options),this.certificateDescription=this.samlOptions.encryptionCertificateDto?[this.samlOptions.encryptionCertificateDto]:[],this.canDeleteCert=this.samlOptions.requireEncryptedAssertions,this.buildForm(),this.subscribeToValueChanges()},error:Z=>{this.errorService.handleError(Z)}})}subscribeToValueChanges(){this.spResponseFormSubscription=this.spResponseForm.valueChanges.subscribe({next:Z=>{this.dynamicAuthCacheService.componentDirtyValidMap.set("DynamicAuthEditSpResponseComponent",this.spResponseForm.valid);var Ae={...this.samlOptions,requireEncryptedAssertions:this.spResponseForm.controls.requireEncryptedAssertions.value,requireSignedAssertions:this.spResponseForm.controls.requireSignedAssertions.value};const Nt={...this.dynamicAuth,options:JSON.stringify(Ae)};this.canDeleteCert=this.spResponseForm.controls.requireEncryptedAssertions.value,this.dynamicAuthCacheService.unsavedCache.next(Nt)}})}buildForm(){this.spResponseForm=this.fb.group({requireEncryptedAssertions:[this.samlOptions.requireEncryptedAssertions,[]],requireSignedAssertions:[this.samlOptions.requireSignedAssertions,[]]}),this.certForm=this.fb.group({selectedFile:void 0,certPassword:["",[]]})}handleFileInput(Z){this.selectedFile=Z.item(0)}updateEncryptionCert(){this.fileName=new Vn.I("");const Z=this.certForm.get("certPassword").value;this.certService.verifyCertFilePassword(this.selectedFile,Z,{next:Ae=>{this.fileName=new Vn.I(this.selectedFile?.name),this.dynamicAuthService.replaceEncryptionCert(this.dynamicAuth.scheme,Ae,Z).subscribe(Nt=>{this.certificateDescription=[Nt],this.selectedFile=null,this.certForm.get("certPassword").setValue(""),this.updateEncryptionCertInCache(Nt)})},error:Ae=>{this.toastr.error(this.translate.instant("Notifications.CertInValidMsg"),this.translate.instant("Notifications.CertInValidTitle")),this.selectedFile=null,this.certForm.get("certPassword").setValue("")}})}removeEncryptionCert(){this.dynamicAuthService.removeEncryptionCert(this.dynamicAuth.scheme).subscribe(()=>{this.samlOptions.encryptionCertificateDto=null,this.certificateDescription=[],this.updateEncryptionCertInCache(null)},Z=>{this.errorService.handleError(Z)})}updateEncryptionCertInCache(Z){var Ae={...this.samlOptions,encryptionCertificateDto:Z};const Nt={...this.dynamicAuth,options:JSON.stringify(Ae)};this.dynamicAuthCacheService.unsavedCache.next(Nt)}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(e.QS),c.Y36(ze.T),c.Y36(rt.C),c.Y36(Zt._W),c.Y36(y.sK),c.Y36(P.S),c.Y36(ft.x))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-edit-sp-response"]],decls:31,vars:26,consts:[["id","editSpResponse|",1,"tw-container","tw-mx-auto"],[3,"formGroup",4,"ngIf"],[3,"certificates","showSingle","deleteCertDisabled","delete"],["addButton",""],["id","addCertButton","class","tw-btn-success","type","button","data-toggle","modal","data-target","#addCertificateModal",4,"ngIf"],["id","replaceCertButton","class","tw-btn-success tw-mr-4","type","button","data-toggle","modal","data-target","#addCertificateModal",4,"ngIf"],["bsModal","","id","addCertificateModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[3,"formGroup"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-left","scrollbars"],[3,"id","label","help"],[1,"tw-form-control"],["id","fileInput","type","file","name","file","accept",".pfx,.p12",1,"tw-form-file","tw-max-w-full",3,"change"],["fileInput","","selectedFile",""],["type","text","name","CertPassword","id","CertPassword","formControlName","certPassword",1,"tw-form-control"],[3,"id","isLast"],["id","updateCertBtn","data-dismiss","modal",1,"tw-btn-success",3,"click"],[3,"id","isTraffic","isAlt"],["id","RequireSignedAssertions","formControlName","requireSignedAssertions","type","checkbox",1,"tw-form-switch__input"],["id","RequireEncryptedAssertions","formControlName","requireEncryptedAssertions","type","checkbox",1,"tw-form-switch__input"],["id","addCertButton","type","button","data-toggle","modal","data-target","#addCertificateModal",1,"tw-btn-success"],["id","replaceCertButton","type","button","data-toggle","modal","data-target","#addCertificateModal",1,"tw-btn-success","tw-mr-4"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c.YNc(1,de,7,13,"form",1),c.TgZ(2,"app-saml-cert-list",2),c.NdJ("delete",function(){return Ae.removeEncryptionCert()}),c.ynx(3,3),c.YNc(4,Oe,3,3,"button",4),c.YNc(5,ge,3,3,"button",5),c.BQk(),c.qZA(),c.TgZ(6,"div",6)(7,"form",7)(8,"div",8)(9,"div",9)(10,"div",10)(11,"h5",11),c._uU(12),c.ALo(13,"translate"),c.qZA(),c.TgZ(14,"button",12),c._UZ(15,"span",13),c.TgZ(16,"span",14),c._uU(17),c.ALo(18,"translate"),c.qZA()()(),c.TgZ(19,"div",15)(20,"app-form-row",16)(21,"div",17)(22,"input",18,19),c.NdJ("change",function(Cn){return Ae.handleFileInput(Cn.target.files)}),c.qZA()()(),c.TgZ(25,"app-form-row",16),c._UZ(26,"input",20),c.qZA(),c.TgZ(27,"app-form-row",21)(28,"button",22),c.NdJ("click",function(){return Ae.updateEncryptionCert()}),c._uU(29),c.ALo(30,"translate"),c.qZA()()()()()()()()),2&Z&&(c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth&&Ae.spResponseForm),c.xp6(1),c.Q6J("certificates",Ae.certificateDescription)("showSingle",!0)("deleteCertDisabled",Ae.canDeleteCert),c.xp6(2),c.Q6J("ngIf",Ae.certificateDescription.length<1),c.xp6(1),c.Q6J("ngIf",Ae.certificateDescription.length>0),c.xp6(1),c.Q6J("config",c.DdM(25,He)),c.xp6(1),c.Q6J("formGroup",Ae.certForm),c.xp6(5),c.Oqu(c.lcZ(13,19,"DynamicAuth.UpdateEncryptionCertificate.Title")),c.xp6(5),c.Oqu(c.lcZ(18,21,"Common.Close")),c.xp6(3),c.Q6J("id","fileInput")("label","DynamicAuth.CertFile.Label")("help","DynamicAuth.CertFile.Help"),c.xp6(5),c.Q6J("id","CertPassword")("label","DynamicAuth.CertPassword.Label")("help","DynamicAuth.CertPassword.Help"),c.xp6(2),c.Q6J("id","updateCertBtn")("isLast",!0),c.xp6(2),c.Oqu(c.lcZ(30,23,"Common.Update")))},dependencies:[n.O5,e._Y,e.Fj,e.Wl,e.JJ,e.JL,e.sg,e.u,w.oB,bt.L,Wr.O,Pr.z,y.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();const Vt=["AdvancedTabs"];let zt=(()=>{class le{constructor(){}ngOnInit(){}}return le.\u0275fac=function(Z){return new(Z||le)},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-edit-sp"]],viewQuery:function(Z,Ae){if(1&Z&&c.Gf(Vt,7),2&Z){let Nt;c.iGM(Nt=c.CRH())&&(Ae.advancedTabs=Nt.first)}},decls:7,vars:7,consts:[[1,"tw-container","tw-mx-auto"],[3,"pillMode"],[3,"tabTitle","tabValue"],["id","editDynamicAuthSpDetails"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0)(1,"app-custom-tabs",1),c._UZ(2,"app-custom-tab",2)(3,"app-custom-tab",2)(4,"app-custom-tab",2),c.qZA()(),c.TgZ(5,"div",3),c._UZ(6,"router-outlet"),c.qZA()),2&Z&&(c.xp6(1),c.Q6J("pillMode",!0),c.xp6(1),c.Q6J("tabTitle","Nav.Details")("tabValue","details"),c.xp6(1),c.Q6J("tabTitle","Nav.Request")("tabValue","request"),c.xp6(1),c.Q6J("tabTitle","Nav.Response")("tabValue","response"))},dependencies:[h.lC,xn.v,xi.x],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();var Pt=m(3570),gi=m(9658),pi=m(1216);function ti(le,gt){1&le&&c._UZ(0,"app-custom-tab",2),2&le&&c.Q6J("tabTitle","Nav.Scopes")("tabValue","scopes")}function Ut(le,gt){1&le&&c._UZ(0,"app-custom-tab",2),2&le&&c.Q6J("tabTitle","Nav.Advanced")("tabValue","advanced")}function Un(le,gt){1&le&&c._UZ(0,"app-custom-tab",2),2&le&&c.Q6J("tabTitle","Nav.SP")("tabValue","sp")}function Ci(le,gt){1&le&&c._UZ(0,"app-custom-tab",2),2&le&&c.Q6J("tabTitle","Nav.IdP")("tabValue","idp")}const hr=function(le,gt){return{title:le,link:gt}},Cr=function(le){return[le]},sr=function(){return{backdrop:"static",keyboard:"false"}};let qs=(()=>{class le{constructor(Z,Ae,Nt,Cn,En,er,wr,Ro,Po,il){this.r=Z,this.route=Ae,this.localize=Nt,this.titleService=Cn,this.translate=En,this.toastr=er,this.errorService=wr,this.dynamicAuthService=Ro,this.dynamicAuthCachService=Po,this.dialogService=il,this.dynamicAuthTypes=oe.hH,this.isFirstCall=!0}ngOnInit(){this.dynamicAuthSub=this.dynamicAuthCachService.unsavedCache$.subscribe({next:Z=>{this.dynamicAuth=Z;const Ae=this.translate.instant("DynamicAuth.Title")+" "+this.dynamicAuth.displayName+" - "+ne.de.SITE_TITLE;if(this.titleService.setTitle(Ae),this.checkSubmitEnabled(),this.dynamicAuth.type==oe.hH.OIDC&&this.isFirstCall){var Nt=(0,Ze.A3)(this.dynamicAuth.options);this.oldSecret=Nt.clientSecret,this.isFirstCall=!1}},error:Z=>{this.errorService.handleError(Z)}})}ngOnDestroy(){this.dynamicAuthSub.unsubscribe()}canDeactivate(){return!(this.dynamicAuthCachService.componentDirtyValidMap.size>0)||(this.dialogService.confirm(),this.dialogService.eventStream.subscribe(Z=>{Z&&this.dynamicAuthCachService.componentDirtyValidMap.size>0&&this.dynamicAuthCachService.componentDirtyValidMap.clear()}),this.dialogService.eventStream)}checkSubmitEnabled(){const Z=[...Array.from(this.dynamicAuthCachService.componentDirtyValidMap.values())];this.saveDisabled=0===Z.length||Z.some(Ae=>!Ae)}mobRoute(Z){this.r.navigate([Z],{relativeTo:this.route})}saveDynamicAuth(){this.saveDisabled||(this.dynamicAuth.type==oe.hH.OIDC&&this.setOidcClientSecret(),this.dynamicAuthService.updateDynamicAuth((0,Ze.ky)(this.dynamicAuth)).subscribe({next:Z=>{this.isFirstCall=!0,this.dynamicAuthCachService.unsavedCache.next((0,Ze.Zn)(Z)),this.dynamicAuthCachService.onSave(),this.toastr.success(this.translate.instant("DynamicAuth.Success.Updated"),this.translate.instant("Notifications.SuccessfullySaved")),this.checkSubmitEnabled()},error:Z=>{this.errorService.handleError(Z)}}))}deleteDynamicAuth(Z){this.dynamicAuthService.deleteDynamicAuth(Z).subscribe({next:Ae=>{const Nt=this.localize.translateRoute("/dynamic-auth");this.r.navigate([Nt]),this.toastr.success(`${Z} ${this.translate.instant("Common.Delete.Deleted")}`,this.translate.instant("Notifications.SuccessfullyDeleted"))},error:Ae=>{this.errorService.handleError(Ae)}})}setOidcClientSecret(){var Z=(0,Ze.A3)(this.dynamicAuth.options);this.oldSecret==Z.clientSecret&&(Z.clientSecret=void 0),this.dynamicAuth.options=JSON.stringify(Z)}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(h.F0),c.Y36(h.gz),c.Y36(S.An),c.Y36(et.Dx),c.Y36(y.sK),c.Y36(Zt._W),c.Y36(ze.T),c.Y36(ft.x),c.Y36(rt.C),c.Y36(Pt.x))},le.\u0275cmp=c.Xpm({type:le,selectors:[["ng-component"]],decls:53,vars:46,consts:[[3,"title","crumbs","hasTabs"],["tabs",""],[3,"tabTitle","tabValue"],[3,"tabTitle","tabValue",4,"ngIf"],["id","editDynamicAuth"],["id","submitBtn",1,"tw-btn-success","tw-mr-3","tw-mb-3",3,"disabled","click"],["right",""],["id","deleteBtn","type","button","data-toggle","modal","data-target","#deleteDynamicAuthModal",1,"tw-btn-danger","tw-mb-3"],["bsModal","","id","deleteDynamicAuthModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-center","scrollbars"],[1,"tw-mb-4"],[1,"tw-pill-danger",3,"innerHTML"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["data-dismiss","modal",1,"tw-btn-danger",3,"click"],["data-dismiss","modal",1,"tw-btn-link","tw--mr-4"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"app-title-bar",0),c.ALo(1,"translate"),c.ALo(2,"localize"),c.ynx(3,1),c.TgZ(4,"app-custom-tabs"),c._UZ(5,"app-custom-tab",2),c.YNc(6,ti,1,2,"app-custom-tab",3),c.YNc(7,Ut,1,2,"app-custom-tab",3),c.YNc(8,Un,1,2,"app-custom-tab",3),c.YNc(9,Ci,1,2,"app-custom-tab",3),c.qZA(),c.BQk(),c.qZA(),c.TgZ(10,"div",4),c._UZ(11,"router-outlet"),c.qZA(),c.TgZ(12,"app-button-bar")(13,"button",5),c.NdJ("click",function(){return Ae.saveDynamicAuth()}),c.TgZ(14,"span"),c._uU(15),c.ALo(16,"translate"),c.qZA()(),c.ynx(17,6),c.TgZ(18,"button",7),c._uU(19),c.ALo(20,"translate"),c.qZA(),c.BQk(),c.qZA(),c.TgZ(21,"div",8)(22,"div",9)(23,"div",10)(24,"div",11)(25,"h5",12),c._uU(26),c.ALo(27,"translate"),c.qZA(),c.TgZ(28,"button",13),c._UZ(29,"span",14),c.TgZ(30,"span",15),c._uU(31),c.ALo(32,"translate"),c.qZA()()(),c.TgZ(33,"div",16)(34,"p",17),c._uU(35),c.ALo(36,"translate"),c.TgZ(37,"strong"),c._uU(38),c.qZA(),c._uU(39,"?"),c.qZA(),c._UZ(40,"p",18),c.ALo(41,"translate"),c.qZA(),c._UZ(42,"div",19),c.TgZ(43,"div",20)(44,"div",21)(45,"div",22)(46,"button",23),c.NdJ("click",function(){return Ae.deleteDynamicAuth(Ae.dynamicAuth.scheme)}),c._uU(47),c.ALo(48,"translate"),c.qZA()(),c.TgZ(49,"button",24),c._uU(50),c.ALo(51,"translate"),c.qZA()()()()()(),c._UZ(52,"app-can-deactivate")),2&Z&&(c.Q6J("title",Ae.dynamicAuth.displayName)("crumbs",c.VKq(43,Cr,c.WLB(40,hr,c.lcZ(1,20,"Nav.DynamicAuth"),c.lcZ(2,22,"/dynamic-auth"))))("hasTabs",!0),c.xp6(5),c.Q6J("tabTitle","Nav.Details")("tabValue","details"),c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth.type==Ae.dynamicAuthTypes.OIDC),c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth.type==Ae.dynamicAuthTypes.OIDC),c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth.type==Ae.dynamicAuthTypes.SAML),c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth.type==Ae.dynamicAuthTypes.SAML),c.xp6(4),c.Q6J("disabled",Ae.saveDisabled),c.xp6(2),c.Oqu(c.lcZ(16,24,"Common.SaveAll")),c.xp6(4),c.Oqu(c.lcZ(20,26,"Common.Delete.Title")),c.xp6(2),c.Q6J("config",c.DdM(45,sr)),c.xp6(5),c.Oqu(c.lcZ(27,28,"Common.Delete.Confirm")),c.xp6(5),c.Oqu(c.lcZ(32,30,"Common.Close")),c.xp6(4),c.hij("",c.lcZ(36,32,"Common.Delete.AreYouSureSimple")," "),c.xp6(3),c.Oqu(Ae.dynamicAuth.displayName),c.xp6(2),c.Q6J("innerHTML",c.lcZ(41,34,"Common.Delete.Warning"),c.oJD),c.xp6(7),c.hij(" ",c.lcZ(48,36,"Common.Delete.Title")," "),c.xp6(3),c.Oqu(c.lcZ(51,38,"Common.Delete.No")))},dependencies:[h.lC,n.O5,xn.v,xi.x,w.oB,gi.J,gn.G,pi.N,y.X$,S.lO],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();var Wi=m(7235);const Ri=function(le){return[le]};function Ds(le,gt){if(1&le&&(c.TgZ(0,"app-form-row",6),c._UZ(1,"app-readonly",4),c.qZA()),2&le){const Z=c.oxw();c.Q6J("id","RemoteSignOutPath")("label","DynamicAuth.RemoteSignOutPath.Label"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(4,Ri,Z.optionsDictionary.remoteSignOutPath))}}function fo(le,gt){if(1&le&&(c.TgZ(0,"app-form-row",6),c._UZ(1,"app-readonly",4),c.qZA()),2&le){const Z=c.oxw();c.Q6J("id","SignedOutRedirectUri")("label","DynamicAuth.SignedOutRedirectUri.Label"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(4,Ri,Z.optionsDictionary.signedOutRedirectUri))}}function ca(le,gt){if(1&le&&(c.TgZ(0,"app-form-row",6),c._UZ(1,"app-readonly",4),c.qZA()),2&le){const Z=c.oxw();c.Q6J("id","SignedOutCallbackPath")("label","DynamicAuth.SignedOutCallbackPath.Label"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(4,Ri,Z.optionsDictionary.signedOutCallbackPath))}}function Yr(le,gt){if(1&le&&(c.TgZ(0,"app-form-row",6),c._UZ(1,"app-readonly",4),c.qZA()),2&le){const Z=c.oxw();c.Q6J("id","ResponseMode")("label","DynamicAuth.ResponseMode.Label"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(4,Ri,Z.optionsDictionary.responseMode))}}function ms(le,gt){if(1&le&&(c.TgZ(0,"app-form-row",7),c._UZ(1,"app-readonly",4),c.qZA()),2&le){const Z=c.oxw();c.Q6J("id","RefreshOnIssuerKeyNotFound")("label","DynamicAuth.RefreshOnIssuerKeyNotFound.Label")("help","DynamicAuth.RefreshOnIssuerKeyNotFound.Help"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(5,Ri,Z.optionsDictionary.refreshOnIssuerKeyNotFound))}}function Jo(le,gt){if(1&le&&(c.TgZ(0,"app-form-row",7),c._UZ(1,"app-readonly",4),c.qZA()),2&le){const Z=c.oxw();c.Q6J("id","SaveTokens")("label","DynamicAuth.SaveTokens.Label")("help","DynamicAuth.SaveTokens.Help"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(5,Ri,Z.optionsDictionary.saveTokens))}}function ba(le,gt){if(1&le&&(c.TgZ(0,"app-form-row",7),c._UZ(1,"app-readonly",4),c.qZA()),2&le){const Z=c.oxw();c.Q6J("id","UseTokenLifetime")("label","DynamicAuth.UseTokenLifetime.Label")("help","DynamicAuth.UseTokenLifetime.Help"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(5,Ri,Z.optionsDictionary.useTokenLifetime))}}function Bs(le,gt){if(1&le&&(c.TgZ(0,"app-form-row",7),c._UZ(1,"app-readonly",4),c.qZA()),2&le){const Z=c.oxw();c.Q6J("id","SkipUnrecognizedRequests")("label","DynamicAuth.SkipUnrecognizedRequests.Label")("help","DynamicAuth.SkipUnrecognizedRequests.Help"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(5,Ri,Z.optionsDictionary.skipUnrecognizedRequests))}}function gs(le,gt){if(1&le&&(c.TgZ(0,"app-form-row",3),c._UZ(1,"app-readonly",4),c.qZA()),2&le){const Z=c.oxw();c.Q6J("id","DisableTelemetry")("label","DynamicAuth.DisableTelemetry.Label")("help","DynamicAuth.DisableTelemetry.Help")("isLast",!0),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(6,Ri,Z.optionsDictionary.disableTelemetry))}}let qo=(()=>{class le{constructor(Z,Ae,Nt){this.errorService=Z,this.dynamicAuthChachService=Ae,this.configService=Nt,this.mode="Query",this.dynamicAuthTypes=oe.hH}get ReadOnlyFieldType(){return Tr.O}ngOnInit(){this.configService.getConfig().subscribe({next:Z=>{this.isRskDynamicAuth=Z.featureFlagOptions.dynamicAuthenticationFlag==ln.u.Rsk},error:Z=>{this.errorService.handleError(Z)}}),this.dynamicAuthChachService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{this.optionsDictionary=new Wi.$((0,Ze.A3)(Z.options))},error:Z=>{this.errorService.handleError(Z)}})}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(ze.T),c.Y36(rt.C),c.Y36(_t.E))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-view-advanced"]],decls:12,vars:17,consts:[["id","viewDynamicAuthAdvancedOptions",1,"tw-container","tw-mx-auto"],[3,"id","label",4,"ngIf"],[3,"id","label","help",4,"ngIf"],[3,"id","label","help","isLast"],[3,"fieldType","values"],[3,"id","label","help","isLast",4,"ngIf"],[3,"id","label"],[3,"id","label","help"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0),c.YNc(1,Ds,2,6,"app-form-row",1),c.YNc(2,fo,2,6,"app-form-row",1),c.YNc(3,ca,2,6,"app-form-row",1),c.YNc(4,Yr,2,6,"app-form-row",1),c.YNc(5,ms,2,7,"app-form-row",2),c.TgZ(6,"app-form-row",3),c._UZ(7,"app-readonly",4),c.qZA(),c.YNc(8,Jo,2,7,"app-form-row",2),c.YNc(9,ba,2,7,"app-form-row",2),c.YNc(10,Bs,2,7,"app-form-row",2),c.YNc(11,gs,2,8,"app-form-row",5),c.qZA()),2&Z&&(c.xp6(1),c.Q6J("ngIf",Ae.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Ae.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Ae.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Ae.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Ae.isRskDynamicAuth),c.xp6(1),c.Q6J("id","GetClaimsFromUserInfoEndpoint")("label","DynamicAuth.GetClaimsFromUserInfoEndpoint.Label")("help","DynamicAuth.GetClaimsFromUserInfoEndpoint.Help")("isLast",!Ae.isRskDynamicAuth),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(15,Ri,Ae.optionsDictionary.getClaimsFromUserInfoEndpoint)),c.xp6(1),c.Q6J("ngIf",Ae.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Ae.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Ae.isRskDynamicAuth),c.xp6(1),c.Q6J("ngIf",Ae.isRskDynamicAuth))},dependencies:[n.O5,bt.L,Vi.f],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();const or=function(le){return[le]};function Is(le,gt){if(1&le&&(c.TgZ(0,"app-form-row",4),c._UZ(1,"app-readonly",3),c.qZA()),2&le){const Z=c.oxw(2);c.Q6J("id","CallbackPath")("label","DynamicAuth.CallbackPath.Label")("help","DynamicAuth.CallbackPath.Help"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(5,or,Z.optionsDictionary.callbackPath))}}function Qo(le,gt){if(1&le&&(c.TgZ(0,"div",8)(1,"app-form-row",4),c._UZ(2,"app-readonly",3),c.qZA(),c.TgZ(3,"app-form-row",4),c._UZ(4,"app-readonly",3),c.qZA(),c.YNc(5,Is,2,7,"app-form-row",9),c.TgZ(6,"app-form-row",4),c._UZ(7,"app-readonly",3),c.qZA()()),2&le){const Z=c.oxw();c.xp6(1),c.Q6J("id","Authority")("label","DynamicAuth.Authority.Label")("help","DynamicAuth.Authority.Help"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(16,or,Z.optionsDictionary.authority)),c.xp6(1),c.Q6J("id","ClientId")("label","DynamicAuth.ClientId.Label")("help","DynamicAuth.ClientId.Help"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(18,or,Z.optionsDictionary.clientId)),c.xp6(1),c.Q6J("ngIf",Z.isRskDynamicAuth),c.xp6(1),c.Q6J("id","Flow")("label","DynamicAuth.Flow.Label")("help","DynamicAuth.Flow.Help"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(20,or,Z.optionsDictionary.flow))}}function wa(le,gt){if(1&le&&(c.TgZ(0,"div")(1,"app-form-row",4),c._UZ(2,"app-readonly",3),c.qZA(),c.TgZ(3,"app-form-row",2),c._UZ(4,"app-readonly",3),c.qZA()()),2&le){const Z=c.oxw(2);c.xp6(1),c.Q6J("id","DifferentSignOut")("label","DynamicAuth.DifferentSignOut.Label")("help","DynamicAuth.DifferentSignOut.Help"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(9,or,Z.optionsDictionary.differentSignOut)),c.xp6(1),c.Q6J("id","SignOutScheme")("label","DynamicAuth.SignOutScheme.Label"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(11,or,Z.optionsDictionary.signOutScheme))}}function eo(le,gt){if(1&le&&(c.TgZ(0,"div",10)(1,"app-form-row",11),c._UZ(2,"app-readonly",3),c.qZA(),c.YNc(3,wa,5,13,"div",12),c.TgZ(4,"app-form-row",13),c._UZ(5,"app-readonly",3),c.qZA()()),2&le){const Z=c.oxw();c.xp6(1),c.Q6J("id","SignInScheme")("label","DynamicAuth.SignInScheme.Label"),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(11,or,Z.optionsDictionary.signInScheme)),c.xp6(1),c.Q6J("ngIf",Z.dynamicAuthType==Z.dynamicAuthTypes.SAML),c.xp6(1),c.Q6J("id","TimeComparisonTolerance")("label","DynamicAuth.SAML.TimeComparisonTolerance.Label")("help","DynamicAuth.SAML.TimeComparisonTolerance.Help")("isLast",!0),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.LifetimePicker)("values",c.VKq(13,or,Z.optionsDictionary.timeComparisonTolerance))}}function Mr(le,gt){if(1&le&&(c.TgZ(0,"div",14)(1,"app-form-row",13),c._UZ(2,"app-readonly",3),c.qZA()()),2&le){const Z=c.oxw();c.xp6(1),c.Q6J("id","ClientSecret")("label","DynamicAuth.ClientSecret.Label")("help","DynamicAuth.ClientSecret.Help")("isLast",!0),c.xp6(1),c.Q6J("fieldType",Z.ReadOnlyFieldType.Single)("values",c.VKq(6,or,Z.optionsDictionary.clientSecret))}}let Va=(()=>{class le{constructor(Z,Ae,Nt,Cn){this.errorService=Z,this.dynamicAuthChachService=Ae,this.configService=Nt,this.translate=Cn,this.dynamicAuthTypes=oe.hH,this.snippet=ke.SamlSignInSchemeCodeFrag}get ReadOnlyFieldType(){return Tr.O}ngOnInit(){this.configService.getConfig().subscribe({next:Z=>{this.isRskDynamicAuth=Z.featureFlagOptions.dynamicAuthenticationFlag==ln.u.Rsk},error:Z=>{this.errorService.handleError(Z)}}),this.dynamicAuthChachService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{switch(this.dynamicAuthType=Z.type,this.dynamicAuthDictionary=new Wi.$(Z),this.dynamicAuthType){case oe.hH.OIDC:this.setOidcOptions(Z.options);break;case oe.hH.SAML:this.setSamlOptions(Z.options)}},error:Z=>{this.errorService.handleError(Z)}})}setOidcOptions(Z){let Ae={...(0,Ze.A3)(Z)};Ae.flow=this.translate.instant("DynamicAuth.Flows."+(Ae.usePkce?je.AuthCodePlusPkce:je.AuthCode)),this.optionsDictionary=new Wi.$(Ae)}setSamlOptions(Z){const Ae=(0,Ze.ZP)(Z);this.optionsDictionary=new Wi.$({...Ae,differentSignOut:!(0,ie.Ew)(Ae.signOutScheme)})}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(ze.T),c.Y36(rt.C),c.Y36(_t.E),c.Y36(y.sK))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-view-details"]],decls:11,vars:23,consts:[["id","viewDynamicAuthDetails",1,"tw-container","tw-mx-auto"],["id","dynamicAuthDetails"],[3,"id","label"],[3,"fieldType","values"],[3,"id","label","help"],["id","connectionDetails",4,"ngIf"],["id","signInSchemeDetails",4,"ngIf"],["id","secretDetails",4,"ngIf"],["id","connectionDetails"],[3,"id","label","help",4,"ngIf"],["id","signInSchemeDetails"],[1,"tw-form-typeahead",3,"id","label"],[4,"ngIf"],[3,"id","label","help","isLast"],["id","secretDetails"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0)(1,"div",1)(2,"app-form-row",2),c._UZ(3,"app-readonly",3),c.qZA(),c.TgZ(4,"app-form-row",4),c._UZ(5,"app-readonly",3),c.qZA(),c.TgZ(6,"app-form-row",4),c._UZ(7,"app-readonly",3),c.qZA()(),c.YNc(8,Qo,8,22,"div",5),c.YNc(9,eo,6,15,"div",6),c.YNc(10,Mr,3,8,"div",7),c.qZA()),2&Z&&(c.xp6(2),c.Q6J("id","Enabled")("label","Common.Enabled"),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(17,or,Ae.dynamicAuthDictionary.enabled)),c.xp6(1),c.Q6J("id","Scheme")("label","DynamicAuth.Scheme.Label")("help","DynamicAuth.Scheme.Help"),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(19,or,Ae.dynamicAuthDictionary.scheme)),c.xp6(1),c.Q6J("id","DisplayName")("label","DynamicAuth.DisplayName.Label")("help","DynamicAuth.DisplayName.Help"),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(21,or,Ae.dynamicAuthDictionary.displayName)),c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuthType==Ae.dynamicAuthTypes.OIDC),c.xp6(1),c.Q6J("ngIf",Ae.isRskDynamicAuth||Ae.dynamicAuthType==Ae.dynamicAuthTypes.SAML),c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuthType==Ae.dynamicAuthTypes.OIDC))},dependencies:[n.O5,bt.L,Vi.f],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();const mo=function(le){return[le]};let So=(()=>{class le{constructor(Z){this.dynamicAuthCacheService=Z}get ReadOnlyFieldType(){return Tr.O}ngOnInit(){this.dynamicAuthCacheService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{var Ae=(0,Ze.ZP)(Z.options);this.idpAdvancedDictionary=new Wi.$({allowIdpInitiatedSso:Ae.allowIdpInitiatedSso,idPInitiatedSsoCompletionPath:Ae.idPInitiatedSsoCompletionPath})}})}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(rt.C))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-view-idp-advanced"]],decls:5,vars:15,consts:[["id","viewIdpAdvanced",1,"tw-container","tw-mx-auto"],[3,"id","label","help"],[3,"fieldType","values"],[3,"id","label","help","isLast"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0)(1,"app-form-row",1),c._UZ(2,"app-readonly",2),c.qZA(),c.TgZ(3,"app-form-row",3),c._UZ(4,"app-readonly",2),c.qZA()()),2&Z&&(c.xp6(1),c.Q6J("id","AllowIdpInitiatedSso")("label","DynamicAuth.SAML.AllowIdpInitiatedSso.Label")("help","DynamicAuth.SAML.AllowIdpInitiatedSso.Help"),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(11,mo,Ae.idpAdvancedDictionary.allowIdpInitiatedSso)),c.xp6(1),c.Q6J("id","IdPInitiatedSsoCompletionPath")("label","DynamicAuth.SAML.IdPInitiatedSsoCompletionPath.Label")("help","DynamicAuth.SAML.IdPInitiatedSsoCompletionPath.Help")("isLast",!0),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(13,mo,Ae.idpAdvancedDictionary.idPInitiatedSsoCompletionPath)))},dependencies:[bt.L,Vi.f],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();const to=function(le){return[le]};let nl=(()=>{class le{constructor(Z){this.dynamicAuthCacheService=Z}get ReadOnlyFieldType(){return Tr.O}ngOnInit(){this.dynamicAuthCacheService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{var Ae=(0,Ze.ZP)(Z.options);this.idpDetailsDictionary=new Wi.$({requireValidMetadataSignature:Ae.requireValidMetadataSignature,idpMetadataAddr:Ae.idpMetadataAddress})}})}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(rt.C))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-view-idp-details"]],decls:5,vars:15,consts:[["id","viewIdpDetails",1,"tw-container","tw-mx-auto"],[3,"id","label","help"],[3,"fieldType","values"],[3,"id","label","help","isLast"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0)(1,"app-form-row",1),c._UZ(2,"app-readonly",2),c.qZA(),c.TgZ(3,"app-form-row",3),c._UZ(4,"app-readonly",2),c.qZA()()),2&Z&&(c.xp6(1),c.Q6J("id","RequireValidMetadataSignature")("label","DynamicAuth.SAML.RequireValidMetadataSignature.Label")("help","DynamicAuth.SAML.RequireValidMetadataSignature.Help"),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(11,to,Ae.idpDetailsDictionary.requireValidMetadataSignature)),c.xp6(1),c.Q6J("id","IdpMetadataAddress")("label","DynamicAuth.SAML.IdpMetadataAddress.Label")("help","DynamicAuth.SAML.IdpMetadataAddress.Help")("isLast",!0),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(13,to,Ae.idpDetailsDictionary.idpMetadataAddr)))},dependencies:[bt.L,Vi.f],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();const ko=["AdvancedTabs"];let Ta=(()=>{class le{constructor(){}ngOnInit(){}}return le.\u0275fac=function(Z){return new(Z||le)},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-view-idp"]],viewQuery:function(Z,Ae){if(1&Z&&c.Gf(ko,7),2&Z){let Nt;c.iGM(Nt=c.CRH())&&(Ae.advancedTabs=Nt.first)}},decls:6,vars:5,consts:[[1,"tw-container","tw-mx-auto"],[3,"pillMode"],[3,"tabTitle","tabValue"],["id","viewDynamicAuthIdpDetails"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0)(1,"app-custom-tabs",1),c._UZ(2,"app-custom-tab",2)(3,"app-custom-tab",2),c.qZA()(),c.TgZ(4,"div",3),c._UZ(5,"router-outlet"),c.qZA()),2&Z&&(c.xp6(1),c.Q6J("pillMode",!0),c.xp6(1),c.Q6J("tabTitle","Nav.Details")("tabValue","details"),c.xp6(1),c.Q6J("tabTitle","Nav.Advanced")("tabValue","advanced"))},dependencies:[h.lC,xn.v,xi.x],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();function Wo(le,gt){if(1&le&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"slice"),c.qZA()),2&le){const Z=gt.item;c.xp6(1),c.Oqu(Z.length>20?c.Dn7(2,1,Z,0,20)+"...":Z)}}function ii(le,gt){1&le&&(c.TgZ(0,"div",5)(1,"div"),c._uU(2),c.ALo(3,"translate"),c.qZA()()),2&le&&(c.xp6(2),c.hij(" ",c.lcZ(3,1,"UserDetails.NoClaimsMessage")," "))}function xo(le,gt){if(1&le&&(c.TgZ(0,"tr")(1,"td",11)(2,"span",12),c._uU(3),c.qZA()()()),2&le){const Z=gt.$implicit;c.xp6(3),c.Oqu(Z)}}function jo(le,gt){if(1&le&&(c.TgZ(0,"table",6)(1,"thead",7)(2,"th",8)(3,"span",9),c._uU(4),c.ALo(5,"translate"),c.qZA()()(),c.TgZ(6,"tbody"),c.YNc(7,xo,4,1,"tr",10),c.qZA()()),2&le){const Z=c.oxw();c.xp6(4),c.Oqu(c.lcZ(5,2,"Common.Scope")),c.xp6(3),c.Q6J("ngForOf",Z.oidcOptions.scope)}}let xe=(()=>{class le{constructor(Z,Ae){this.errorService=Z,this.dynamicAuthChachService=Ae,this.newScope="",this.dynamicAuthTypes=oe.hH,this.isDeleting=!1}ngOnInit(){this.dynamicAuthChachService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{this.dynamicAuth=Z,this.oidcOptions=(0,Ze.A3)(this.dynamicAuth.options)},error:Z=>{this.errorService.handleError(Z)}})}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(ze.T),c.Y36(rt.C))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-view-scopes"]],decls:6,vars:3,consts:[["customItemTemplate",""],["id","viewScopes",1,"tw-container","tw-mx-auto"],[1,"tw-mt-6",3,"id"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable",4,"ngIf"],["role","alert",1,"tw-alert"],[1,"datatable"],[1,""],[1,"tw-w-full"],[1,"sr-only"],[4,"ngFor","ngForOf"],[1,"tw-table-cell","tw-w-full"],[1,"tw-block","tw-truncate"]],template:function(Z,Ae){1&Z&&(c.YNc(0,Wo,3,5,"ng-template",null,0,c.W1O),c.TgZ(2,"div",1)(3,"div",2),c.YNc(4,ii,4,3,"div",3),c.YNc(5,jo,8,4,"table",4),c.qZA()()),2&Z&&(c.xp6(3),c.Q6J("id","Scopes"),c.xp6(1),c.Q6J("ngIf",Ae.oidcOptions.scope.length<=0),c.xp6(1),c.Q6J("ngIf",Ae.oidcOptions.scope.length>0))},dependencies:[n.sg,n.O5,n.OU,y.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();const H=function(le){return[le]};let be=(()=>{class le{constructor(Z){this.dynamicAuthCacheService=Z}get ReadOnlyFieldType(){return Tr.O}ngOnInit(){this.dynamicAuthCacheService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{var Ae=(0,Ze.ZP)(Z.options);this.spDetailsDictionary=new Wi.$({entityId:Ae.spEntityId,metaDataAddr:Ae.spMetadataAddress,callbackPath:Ae.callbackPath,signOutCallbackPath:Ae.signedOutCallbackPath})}})}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(rt.C))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-view-sp-details"]],decls:9,vars:29,consts:[["id","viewSpDetails",1,"tw-container","tw-mx-auto"],[3,"id","label","help"],[3,"fieldType","values"],[3,"id","label","help","isLast"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0)(1,"app-form-row",1),c._UZ(2,"app-readonly",2),c.qZA(),c.TgZ(3,"app-form-row",1),c._UZ(4,"app-readonly",2),c.qZA(),c.TgZ(5,"app-form-row",1),c._UZ(6,"app-readonly",2),c.qZA(),c.TgZ(7,"app-form-row",3),c._UZ(8,"app-readonly",2),c.qZA()()),2&Z&&(c.xp6(1),c.Q6J("id","SPEntityID")("label","DynamicAuth.SPEntityID.Label")("help","DynamicAuth.SPEntityID.Help"),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(21,H,Ae.spDetailsDictionary.entityId)),c.xp6(1),c.Q6J("id","SpMetadataAddress")("label","DynamicAuth.SpMetadataAddress.Label")("help","DynamicAuth.SpMetadataAddress.Help"),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(23,H,Ae.spDetailsDictionary.metaDataAddr)),c.xp6(1),c.Q6J("id","CallbackPath")("label","DynamicAuth.CallbackPath.Label")("help","DynamicAuth.CallbackPath.Help"),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(25,H,Ae.spDetailsDictionary.callbackPath)),c.xp6(1),c.Q6J("id","SignedOutCallbackPath")("label","DynamicAuth.SignedOutCallbackPath.Label")("help","DynamicAuth.SignedOutCallbackPath.Help")("isLast",!0),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(27,H,Ae.spDetailsDictionary.signOutCallbackPath)))},dependencies:[bt.L,Vi.f],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();const Pe=function(le){return[le]};let pt=(()=>{class le{constructor(Z){this.dynamicAuthCacheService=Z}get ReadOnlyFieldType(){return Tr.O}ngOnInit(){this.dynamicAuthCacheService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{var Ae=(0,Ze.ZP)(Z.options);this.spRequestDictionary=new Wi.$({signAuthenticationRequests:Ae.signAuthenticationRequests}),this.certificateDescription=Ae.signingCertificateDto?[Ae.signingCertificateDto]:[]}})}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(rt.C))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-view-sp-request"]],decls:4,vars:10,consts:[["id","viewSpRequest",1,"tw-container","tw-mx-auto"],[3,"id","label","help"],[3,"fieldType","values"],[3,"certificates","showSingle","isReadOnly"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0)(1,"app-form-row",1),c._UZ(2,"app-readonly",2),c.qZA(),c._UZ(3,"app-saml-cert-list",3),c.qZA()),2&Z&&(c.xp6(1),c.Q6J("id","SignAuthenticationRequests")("label","DynamicAuth.SAML.SignAuthenticationRequests.Label")("help","DynamicAuth.SAML.SignAuthenticationRequests.Help"),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(8,Pe,Ae.spRequestDictionary.signAuthenticationRequests)),c.xp6(1),c.Q6J("certificates",Ae.certificateDescription)("showSingle",!0)("isReadOnly",!0))},dependencies:[bt.L,Pr.z,Vi.f],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();const It=function(le){return[le]};let St=(()=>{class le{constructor(Z){this.dynamicAuthCacheService=Z}get ReadOnlyFieldType(){return Tr.O}ngOnInit(){this.dynamicAuthCacheService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{var Ae=(0,Ze.ZP)(Z.options);this.spResponseDictionary=new Wi.$({requireSignedAssertions:Ae.requireSignedAssertions,requireEncryptedAssertions:Ae.requireEncryptedAssertions}),this.certificateDescription=Ae.encryptionCertificateDto?[Ae.encryptionCertificateDto]:[]}})}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(rt.C))},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-view-sp-response"]],decls:6,vars:17,consts:[["id","viewSpResponse",1,"tw-container","tw-mx-auto"],[3,"id","label","help"],[3,"fieldType","values"],[3,"certificates","showSingle","isReadOnly"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0)(1,"app-form-row",1),c._UZ(2,"app-readonly",2),c.qZA(),c.TgZ(3,"app-form-row",1),c._UZ(4,"app-readonly",2),c.qZA(),c._UZ(5,"app-saml-cert-list",3),c.qZA()),2&Z&&(c.xp6(1),c.Q6J("id","RequireSignedAssertions")("label","DynamicAuth.SAML.RequireSignedAssertions.Label")("help","DynamicAuth.SAML.RequireSignedAssertions.Help"),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(13,It,Ae.spResponseDictionary.requireSignedAssertions)),c.xp6(1),c.Q6J("id","RequireEncryptedAssertions")("label","DynamicAuth.SAML.RequireEncryptedAssertions.Label")("help","DynamicAuth.SAML.RequireEncryptedAssertions.Help"),c.xp6(1),c.Q6J("fieldType",Ae.ReadOnlyFieldType.Single)("values",c.VKq(15,It,Ae.spResponseDictionary.requireEncryptedAssertions)),c.xp6(1),c.Q6J("certificates",Ae.certificateDescription)("showSingle",!0)("isReadOnly",!0))},dependencies:[bt.L,Pr.z,Vi.f],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();const Jt=["AdvancedTabs"];let un=(()=>{class le{constructor(){}ngOnInit(){}}return le.\u0275fac=function(Z){return new(Z||le)},le.\u0275cmp=c.Xpm({type:le,selectors:[["app-dynamic-auth-view-sp"]],viewQuery:function(Z,Ae){if(1&Z&&c.Gf(Jt,7),2&Z){let Nt;c.iGM(Nt=c.CRH())&&(Ae.advancedTabs=Nt.first)}},decls:7,vars:7,consts:[[1,"tw-container","tw-mx-auto"],[3,"pillMode"],[3,"tabTitle","tabValue"],["id","viewDynamicAuthSpDetails"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"div",0)(1,"app-custom-tabs",1),c._UZ(2,"app-custom-tab",2)(3,"app-custom-tab",2)(4,"app-custom-tab",2),c.qZA()(),c.TgZ(5,"div",3),c._UZ(6,"router-outlet"),c.qZA()),2&Z&&(c.xp6(1),c.Q6J("pillMode",!0),c.xp6(1),c.Q6J("tabTitle","Nav.Details")("tabValue","details"),c.xp6(1),c.Q6J("tabTitle","Nav.Request")("tabValue","request"),c.xp6(1),c.Q6J("tabTitle","Nav.Response")("tabValue","response"))},dependencies:[h.lC,xn.v,xi.x],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();function pn(le,gt){1&le&&(c.TgZ(0,"option",19),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"Nav.Scopes")))}function _i(le,gt){1&le&&(c.TgZ(0,"option",20),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"Nav.Advanced")))}function Pi(le,gt){1&le&&(c.TgZ(0,"option",21),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"Nav.SP")))}function br(le,gt){1&le&&(c.TgZ(0,"option",22),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"Nav.IdP")))}const ni=function(){return["active"]};function Hr(le,gt){1&le&&(c.TgZ(0,"button",23),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.Q6J("routerLinkActive",c.DdM(4,ni)),c.xp6(1),c.Oqu(c.lcZ(2,2,"Nav.Scopes")))}function Qs(le,gt){1&le&&(c.TgZ(0,"button",24),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.Q6J("routerLinkActive",c.DdM(4,ni)),c.xp6(1),c.Oqu(c.lcZ(2,2,"Nav.Advanced")))}function Ws(le,gt){1&le&&(c.TgZ(0,"button",25),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.Q6J("routerLinkActive",c.DdM(4,ni)),c.xp6(1),c.Oqu(c.lcZ(2,2,"Nav.SP")))}function ua(le,gt){1&le&&(c.TgZ(0,"button",26),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&le&&(c.Q6J("routerLinkActive",c.DdM(4,ni)),c.xp6(1),c.Oqu(c.lcZ(2,2,"Nav.IdP")))}const Ha=function(le,gt){return{title:le,link:gt}},Ja=function(le){return[le]};let js=(()=>{class le{constructor(Z,Ae,Nt,Cn,En,er){this.r=Z,this.route=Ae,this.titleService=Nt,this.translate=Cn,this.errorService=En,this.dynamicAuthCachService=er,this.dynamicAuthTypes=oe.hH}ngOnInit(){this.dynamicAuthSub=this.dynamicAuthCachService.unsavedCache$.pipe((0,it.P)()).subscribe({next:Z=>{this.dynamicAuth=Z;const Ae=this.translate.instant("DynamicAuth.Title")+" "+this.dynamicAuth.displayName+" - "+ne.de.SITE_TITLE;this.titleService.setTitle(Ae)},error:Z=>{this.errorService.handleError(Z)}})}mobRoute(Z){this.r.navigate([Z],{relativeTo:this.route})}}return le.\u0275fac=function(Z){return new(Z||le)(c.Y36(h.F0),c.Y36(h.gz),c.Y36(et.Dx),c.Y36(y.sK),c.Y36(ze.T),c.Y36(rt.C))},le.\u0275cmp=c.Xpm({type:le,selectors:[["ng-component"]],decls:33,vars:36,consts:[[3,"title","crumbs","hasTabs","isReadOnly","isReserved"],["tabs",""],[1,"tw-p-4","md:tw-hidden"],["for","nav-sub-menu",1,"sr-only"],[1,"tw-form-select"],["id","nav-sub-menu",1,"tw-form-control",3,"change"],["value","details"],["value","scopes",4,"ngIf"],["value","advanced",4,"ngIf"],["value","sp",4,"ngIf"],["value","idp",4,"ngIf"],["role","tablist",1,"tabs","tw-hidden","md:tw-flex"],[1,"tabs__item"],["type","button","routerLink","details","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["class","tabs__link","type","button","routerLink","scopes","role","tab","aria-selected","false",3,"routerLinkActive",4,"ngIf"],["class","tabs__link","type","button","routerLink","advanced","role","tab","aria-selected","false",3,"routerLinkActive",4,"ngIf"],["class","tabs__link","type","button","routerLink","sp","role","tab","aria-selected","false",3,"routerLinkActive",4,"ngIf"],["class","tabs__link","type","button","routerLink","idp","role","tab","aria-selected","false",3,"routerLinkActive",4,"ngIf"],["id","editDynamicAuth"],["value","scopes"],["value","advanced"],["value","sp"],["value","idp"],["type","button","routerLink","scopes","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","advanced","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","sp","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","idp","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"]],template:function(Z,Ae){1&Z&&(c.TgZ(0,"app-title-bar",0),c.ALo(1,"translate"),c.ALo(2,"localize"),c.ynx(3,1),c.TgZ(4,"div",2)(5,"label",3),c._uU(6),c.ALo(7,"translate"),c.qZA(),c.TgZ(8,"div",4)(9,"select",5),c.NdJ("change",function(Cn){return Ae.mobRoute(Cn.target.value)}),c.TgZ(10,"option",6),c._uU(11),c.ALo(12,"translate"),c.qZA(),c.YNc(13,pn,3,3,"option",7),c.YNc(14,_i,3,3,"option",8),c.YNc(15,Pi,3,3,"option",9),c.YNc(16,br,3,3,"option",10),c.qZA()()(),c.TgZ(17,"ul",11),c.ALo(18,"translate"),c.TgZ(19,"li",12)(20,"button",13),c._uU(21),c.ALo(22,"translate"),c.qZA()(),c.TgZ(23,"li",12),c.YNc(24,Hr,3,5,"button",14),c.qZA(),c.TgZ(25,"li",12),c.YNc(26,Qs,3,5,"button",15),c.qZA(),c.TgZ(27,"li",12),c.YNc(28,Ws,3,5,"button",16),c.qZA(),c.TgZ(29,"li",12),c.YNc(30,ua,3,5,"button",17),c.qZA()(),c.BQk(),c.qZA(),c.TgZ(31,"div",18),c._UZ(32,"router-outlet"),c.qZA()),2&Z&&(c.Q6J("title",Ae.dynamicAuth.displayName)("crumbs",c.VKq(33,Ja,c.WLB(30,Ha,c.lcZ(1,18,"Nav.DynamicAuth"),c.lcZ(2,20,"/dynamic-auth"))))("hasTabs",!0)("isReadOnly",!0)("isReserved",Ae.dynamicAuth.nonEditable),c.xp6(6),c.Oqu(c.lcZ(7,22,"Nav.SubMenu")),c.xp6(5),c.Oqu(c.lcZ(12,24,"Nav.Details")),c.xp6(2),c.Q6J("ngIf",Ae.dynamicAuth.type==Ae.dynamicAuthTypes.OIDC),c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth.type==Ae.dynamicAuthTypes.OIDC),c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth.type==Ae.dynamicAuthTypes.SAML),c.xp6(1),c.Q6J("ngIf",Ae.dynamicAuth.type==Ae.dynamicAuthTypes.SAML),c.xp6(1),c.uIk("aria-label",c.lcZ(18,26,"Nav.SubMenu")),c.xp6(3),c.Q6J("routerLinkActive",c.DdM(35,ni)),c.xp6(1),c.Oqu(c.lcZ(22,28,"Nav.Details")),c.xp6(3),c.Q6J("ngIf",Ae.dynamicAuth.type==Ae.dynamicAuthTypes.OIDC),c.xp6(2),c.Q6J("ngIf",Ae.dynamicAuth.type==Ae.dynamicAuthTypes.OIDC),c.xp6(2),c.Q6J("ngIf",Ae.dynamicAuth.type==Ae.dynamicAuthTypes.SAML),c.xp6(2),c.Q6J("ngIf",Ae.dynamicAuth.type==Ae.dynamicAuthTypes.SAML))},dependencies:[h.lC,h.rH,h.Od,n.O5,e.YN,e.Kr,gn.G,y.X$,S.lO],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),le})();var Lr=m(1206),no=m(9512),vo=m(8677),io=m(8024);const Ks=[{path:"dynamic-auth",component:zr,canActivate:[vo.B,no.n],data:{permissions:[Lr.y[Lr.y.IdentityServerManager],Lr.y[Lr.y.IdentityServerManagerReadOnly],Lr.y[Lr.y.AllReadOnly],Lr.y[Lr.y.All]]}},{path:"dynamic-auth/:Scheme",component:qs,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:Hi},{path:"scopes",component:Lt},{path:"advanced",component:us},{path:"sp",component:zt,children:[{path:"details",component:lr},{path:"request",component:Xs},{path:"response",component:ot}]},{path:"idp",component:Ir,children:[{path:"details",component:$t},{path:"advanced",component:z}]}],resolve:{dynamicAuth:qt.w},canDeactivate:[io.I],canActivate:[vo.B,no.n],data:{permissions:[Lr.y[Lr.y.IdentityServerManager],Lr.y[Lr.y.All]]}},{path:"dynamic-auth/view/:Scheme",component:js,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:Va},{path:"scopes",component:xe},{path:"advanced",component:qo},{path:"sp",component:un,children:[{path:"details",component:be},{path:"request",component:pt},{path:"response",component:St}]},{path:"idp",component:Ta,children:[{path:"details",component:nl},{path:"advanced",component:So}]}],resolve:{dynamicAuth:qt.w},canActivate:[vo.B,no.n],data:{permissions:[Lr.y[Lr.y.IdentityServerManager],Lr.y[Lr.y.IdentityServerManagerReadOnly],Lr.y[Lr.y.AllReadOnly],Lr.y[Lr.y.All]]}}];let yo=(()=>{class le{}return le.\u0275fac=function(Z){return new(Z||le)},le.\u0275mod=c.oAB({type:le}),le.\u0275inj=c.cJS({imports:[h.Bz.forChild(Ks),S.fQ.forChild(Ks),h.Bz]}),le})(),Ms=(()=>{class le{}return le.\u0275fac=function(Z){return new(Z||le)},le.\u0275mod=c.oAB({type:le}),le.\u0275inj=c.cJS({providers:[qt.w,U.U,V.K,R.N,k.S,B.L,W.i,M.T,P.S,ft.x,rt.C,_t.E,Se,Qe],imports:[yo,n.ez,h.Bz,e.u5,O.D,e.UX,f.P4,G.M,x.z8,w.zk,ye.W,ee.j,y.aw,J._,S.fQ,Y.l,ue.T,g.F,Ge.y,Q.p,De.s,fe.K,E.t,$.I,me.d,qe.W,te.T,we.l,N.P,ve.U,b.H3,tt,ct.G]}),le})()},2831:(nt,_e,m)=>{"use strict";m.d(_e,{A3:()=>S,ZP:()=>y,Zn:()=>e,ky:()=>h});var n=m(6205);function e(f){return{...f,type:n.hH[f.type]}}function h(f){return{...f,type:n.hH[f.type]}}function S(f){return JSON.parse(f)}function y(f){return JSON.parse(f)}},6205:(nt,_e,m)=>{"use strict";m.d(_e,{hH:()=>e});var w,n=m(1330),e=(()=>{return(w=e||(e={}))[w.OIDC=0]="OIDC",w[w.SAML=1]="SAML",e;var w})();(w=e||(e={})).fromWizardType=function f(x){switch(x){case n.Q.AddOidcDynamicAuth:return w.OIDC;case n.Q.AddSamlDynamicAuth:return w.SAML}}},1842:(nt,_e,m)=>{"use strict";m.d(_e,{w:()=>g});var n=m(4004),e=m(262),h=m(515),S=m(4879),y=m(2831),w=m(4650),f=m(618),x=m(3831),b=m(4889);let g=(()=>{class N{constructor(k,O,P){this.dynamicAuthService=k,this.changeCachingService=O,this.errorService=P}resolve(k,O){return this.dynamicAuthService.getDynamicAuth(k.params.Scheme).pipe((0,n.U)(U=>{let W;return U&&(W=(0,y.Zn)(U),this.changeCachingService.unsavedCache.next(W)),W}),(0,e.K)((U,W)=>(404===U.status?this.errorService.resourceNotFound(S._.dynamicAuth):this.errorService.handleError(U),(0,h.c)())))}}return N.\u0275fac=function(k){return new(k||N)(w.LFG(f.x),w.LFG(x.C),w.LFG(b.T))},N.\u0275prov=w.Yz7({token:N,factory:N.\u0275fac}),N})()},618:(nt,_e,m)=>{"use strict";m.d(_e,{x:()=>y});var n=m(529),e=m(8176),h=m(4650),S=m(8564);let y=(()=>{class w{constructor(x,b){this.http=x,this.headersService=b,this.actionUrl="DynamicAuthentication",this.headers=b.setHeaders()}get(x,b,g,N){let R=new n.LE;return(0,e.Ew)(x)||(R=R.append("scheme",x)),b&&(R=R.append("page",b)),g&&(R=R.append("pageSize",g)),(0,e.Ew)(N)||(R=R.append("filters",N)),this.http.get(this.actionUrl,{headers:this.headers,params:R})}createDynamicAuth(x){return this.http.post(this.actionUrl,x,{headers:this.headers})}getDynamicAuth(x){return this.http.get(`${this.actionUrl}/${x}`,{headers:this.headers})}updateDynamicAuth(x){return this.http.put(`${this.actionUrl}/${x.scheme}`,x,{headers:this.headers})}deleteDynamicAuth(x){return this.http.delete(`${this.actionUrl}/${x}`,{headers:this.headers})}replaceSigningCert(x,b,g){return this.http.put(`${this.actionUrl}/${x}/saml/sp/signing-certificate`,{certBase64:b,certPassword:g},{headers:this.headers})}removeSigningCert(x){return this.http.delete(`${this.actionUrl}/${x}/saml/sp/signing-certificate`,{headers:this.headers})}replaceEncryptionCert(x,b,g){return this.http.put(`${this.actionUrl}/${x}/saml/sp/encryption-certificate`,{certBase64:b,certPassword:g},{headers:this.headers})}removeEncryptionCert(x){return this.http.delete(`${this.actionUrl}/${x}/saml/sp/encryption-certificate`,{headers:this.headers})}}return w.\u0275fac=function(x){return new(x||w)(h.LFG(n.eN),h.LFG(S.s))},w.\u0275prov=h.Yz7({token:w,factory:w.\u0275fac}),w})()},4837:(nt,_e,m)=>{"use strict";m.d(_e,{JN:()=>n,op:()=>e});var n=(()=>{return(S=n||(n={}))[S.None=0]="None",S[S.Ascending=1]="Ascending",S[S.Descending=2]="Descending",n;var S})();class e{constructor(y,w){this.sort=n.None,this.sessionId=y.sessionId,this.scheme=y.scheme,this.created=y.created,this.expires=y.expires,this.renewed=y.renewed,this.user=y.user.name??y.user.identifier,this.link={identifier:y.user.identifier,routeForLink:w}}get routeLink(){return`${this.link.routeForLink}/${this.link.identifier}`}}},5613:(nt,_e,m)=>{"use strict";m.d(_e,{$:()=>e,m:()=>n});class n{constructor(S,y,w,f){this.isAllowedCorsOrigin=!1,this.isRedirectUri=!1,this.isPostLogoutRedirectUri=!1,this.url=S,this.isAllowedCorsOrigin=y,this.isRedirectUri=w,this.isPostLogoutRedirectUri=f}}class e extends n{constructor(S,y,w,f,x){super(S,y,w,f),this.oldUrl=S,this.index=x}}},7235:(nt,_e,m)=>{"use strict";m.d(_e,{$:()=>e});var n=m(2951);class e{constructor(S){Object.keys(S).forEach(w=>{let f=S[w];"boolean"==typeof S[w]&&(f=f?"Yes":"No"),S[w]instanceof Date&&(f=f?"Yes":"No"),S[w]instanceof Array&&(f=S[w].join(", ").trimEnd()),this[w]=new n.I(f)})}}},9748:(nt,_e,m)=>{"use strict";m.d(_e,{S:()=>e});var e,n=m(5664);!function(h){const S=new Map([[n.f.Minute,60],[n.f.Minutes,60],[n.f.Hour,3600],[n.f.Hours,3600],[n.f.Day,86400],[n.f.Days,86400],[n.f.Week,604800],[n.f.Weeks,604800],[n.f.Month,2629743],[n.f.Months,2629743],[n.f.Year,31556926],[n.f.Years,31556926],[n.f.Unlimited,null]]);h.getUnitMap=function y(){return S}}(e||(e={}))},9655:(nt,_e,m)=>{"use strict";m.d(_e,{O:()=>n});var n=(()=>{return(e=n||(n={}))[e.Single=0]="Single",e[e.Multi=1]="Multi",e[e.CommaSeparated=2]="CommaSeparated",e[e.LifetimePicker=3]="LifetimePicker",n;var e})()},2951:(nt,_e,m)=>{"use strict";m.d(_e,{I:()=>n});class n{constructor(h,S){this.MainText=h,this.HelpText=S??null}}},3435:(nt,_e,m)=>{"use strict";m.d(_e,{P:()=>n});var n=(()=>{return(e=n||(n={})).Identity="identity",e.Protected="protected",n;var e})()},6045:(nt,_e,m)=>{"use strict";m.d(_e,{T:()=>n});var n=(()=>{return(e=n||(n={})).Jwt="Jwt",e.Reference="Reference",n;var e})()},9848:(nt,_e,m)=>{"use strict";m.d(_e,{B:()=>n});var n=(()=>{return(e=n||(n={})).Unknown="Unknown",e.ServerSide="ServerSide",e.Machine="Machine",e.CIBAMachine="CIBAMachine",e.Native="Native",e.Device="Device",e.Saml="Saml",e.WsFed="WsFed",e.BrowserBased="BrowserBased",e.LegacyClientSide="LegacyClientSide",e.ServerSidePKCE="ServerSidePKCE",e.NativePKCE="NativePKCE",n;var e})()},5664:(nt,_e,m)=>{"use strict";m.d(_e,{f:()=>n});var n=(()=>{return(e=n||(n={})).Minute="Minute",e.Minutes="Minutes",e.Hour="Hour",e.Hours="Hours",e.Day="Day",e.Days="Days",e.Week="Week",e.Weeks="Weeks",e.Month="Month",e.Months="Months",e.Year="Year",e.Years="Years",e.Unlimited="Unlimited",n;var e})()},6193:(nt,_e,m)=>{"use strict";m.d(_e,{N:()=>n});var n=(()=>{return(e=n||(n={})).Sliding="Sliding",e.Absolute="Absolute",n;var e})()},6519:(nt,_e,m)=>{"use strict";m.d(_e,{y:()=>n});var n=(()=>{return(e=n||(n={})).ReUse="ReUse",e.OneTimeOnly="OneTimeOnly",n;var e})()},1330:(nt,_e,m)=>{"use strict";m.d(_e,{Q:()=>n});var n=(()=>{return(e=n||(n={})).Home="Home",e.SinglePageApplication="SinglePageApplication",e.WebApplication="WebApplication",e.NativeApplication="NativeApplication",e.RobotApplication="RobotApplication",e.CIBARobotApplication="CIBARobotApplication",e.DeviceApplication="DeviceApplication",e.SamlApplication="SamlApplication",e.WsFedApplication="WsFedApplication",e.LegacySinglePageApplication="LegacySinglePageApplication",e.PKCEWebApplication="PKCEWebApplication",e.PKCENativeApplication="PKCENativeApplication",e.ImportWizard="ImportWizard",e.AddDynamicAuth="AddDynamicAuth",e.AddOidcDynamicAuth="AddOidcDynamicAuth",e.AddSamlDynamicAuth="AddSamlDynamicAuth",n;var e})()},160:(nt,_e,m)=>{"use strict";m.d(_e,{s:()=>n});var n=(()=>{return(e=n||(n={}))[e.NotHandled=0]="NotHandled",e[e.Toast=1]="Toast",e[e.Navigate=2]="Navigate",n;var e})()},4879:(nt,_e,m)=>{"use strict";m.d(_e,{_:()=>n});var n=(()=>{return(e=n||(n={}))[e.user=0]="user",e[e.role=1]="role",e[e.claimType=2]="claimType",e[e.client=3]="client",e[e.identityResource=4]="identityResource",e[e.protectedResource=5]="protectedResource",e[e.serviceProvider=6]="serviceProvider",e[e.relyingParty=7]="relyingParty",e[e.dynamicAuth=8]="dynamicAuth",n;var e})()},8895:(nt,_e,m)=>{"use strict";m.d(_e,{q:()=>n});let n=(()=>{class e{}return e.Implicit="implicit",e.Hybrid="hybrid",e.AuthorizationCode="authorization_code",e.ClientCredentials="client_credentials",e.ResourceOwnerPassword="password",e.Device="urn:ietf:params:oauth:grant-type:device_code",e.CIBA="urn:openid:params:grant-type:ciba",e})()},5259:(nt,_e,m)=>{"use strict";m.d(_e,{n:()=>n});var n=(()=>{return(e=n||(n={})).Save="Save",e.SaveAndReAdd="SaveAndReAdd",e.Delete="Delete",n;var e})()},1923:(nt,_e,m)=>{"use strict";m.d(_e,{w:()=>n});var n=(()=>{return(e=n||(n={})).Default="Default",e.Warning="Warning",n;var e})()},1206:(nt,_e,m)=>{"use strict";m.d(_e,{y:()=>n});var n=(()=>{return(e=n||(n={})).None="None",e.UserManager="UserManager",e.UserManagerReadOnly="UserManagerReadOnly",e.IdentityServerManager="IdentityServerManager",e.IdentityServerManagerReadOnly="IdentityServerManagerReadOnly",e.Auditer="Auditer",e.AllReadOnly="AllReadOnly",e.All="All",n;var e})()},9272:(nt,_e,m)=>{"use strict";m.d(_e,{s:()=>n});class n{constructor(){this.enabled=!0,this.name="",this.displayName="",this.description="",this.required=!1,this.emphasize=!1,this.userClaims=[],this.showInDiscoveryDocument=!0,this.isFinalInstanceOnResource=!0,this.shared=!1,this.properties=[]}}},6068:(nt,_e,m)=>{"use strict";m.d(_e,{u:()=>e});var n=m(2976);class e{constructor(){this.description="",this.value="",this.expiration=null,this.created=null,this.type=(new n.NA).SharedSecret}}},6502:(nt,_e,m)=>{"use strict";m.d(_e,{i:()=>h});var n=m(5664),e=m(9748);class h{constructor(y){this.unitMap=e.S.getUnitMap(),this.formatSeconds(y)}formatSeconds(y){return this.years=Math.floor(y/this.unitMap.get(n.f.Years)),y-=this.years*this.unitMap.get(n.f.Years),this.months=Math.floor(y/this.unitMap.get(n.f.Month)),y-=this.months*this.unitMap.get(n.f.Month),this.weeks=Math.floor(y/this.unitMap.get(n.f.Weeks)),y-=this.weeks*this.unitMap.get(n.f.Weeks),this.days=Math.floor(y/this.unitMap.get(n.f.Days)),y-=this.days*this.unitMap.get(n.f.Days),this.hours=Math.floor(y/this.unitMap.get(n.f.Hours)),y-=this.hours*this.unitMap.get(n.f.Hours),this.minutes=Math.floor(y/this.unitMap.get(n.f.Minute)),y-=this.minutes*this.unitMap.get(n.f.Minute),this.seconds=y,this}}},5188:(nt,_e,m)=>{"use strict";m.d(_e,{O:()=>e,u:()=>n});var n=(()=>{return(h=n||(n={}))[h.Disabled=0]="Disabled",h[h.Duende=1]="Duende",h[h.Rsk=2]="Rsk",n;var h})();class e{constructor(){this.defaultUserValidation=!0,this.enforcerAuthorizationEnabled=!1,this.enableSharedScopes=!1,this.sessionManagementEnabled=!1,this.dynamicAuthenticationFlag=n.Disabled}}},7393:(nt,_e,m)=>{"use strict";m.d(_e,{w:()=>n});class n{constructor(){this.SigningCertificates=[]}}},3111:(nt,_e,m)=>{"use strict";m.d(_e,{CP:()=>w,JR:()=>e,vZ:()=>h,yr:()=>n});class n{}var e=(()=>{return(f=e||(e={})).Client="Client",f.ClaimType="ClaimType",f.IdentityResource="IdentityResource",f.ProtectedResource="ProtectedResource",e;var f})(),h=(()=>{return(f=h||(h={})).New="New",f.Duplicate="Duplicate",f.Conflicted="Conflicted",h;var f})(),w=(()=>{return(f=w||(w={})).Importing="Importing",f.Existing="Existing",w;var f})()},5669:(nt,_e,m)=>{"use strict";m.d(_e,{m:()=>e});var n=m(3111);let e=(()=>{class h{static getSummaryDisplayType(y){switch(y){case n.JR.Client:return this.client;case n.JR.IdentityResource:case n.JR.ProtectedResource:return this.resource;case n.JR.ClaimType:return this.claimType}}}return h.client="Client",h.resource="Resource",h.protectedResource="ProtectedResource",h.claimType="ClaimType",h})()},7892:(nt,_e,m)=>{"use strict";m.d(_e,{A:()=>n});class n{constructor(){this.nameComponentMap=new Map,this.nameTitleMap=new Map}getWizard(h){return this.nameComponentMap.get(h)}getWizardTitle(h){return this.nameTitleMap.get(h)}}},9326:(nt,_e,m)=>{"use strict";m.d(_e,{K:()=>n});class n{constructor(h,S){this.setupTitle=h,this.summaryTitle=S}}},826:(nt,_e,m)=>{"use strict";m.d(_e,{H:()=>n});class n{constructor(h,S){this.component=h,this.data=S,S||(S={})}}},4456:(nt,_e,m)=>{"use strict";m.d(_e,{T:()=>n});var n=(()=>{return(e=n||(n={})).standardDate="standardDate",e.standardDateTime="standardDateTime",e.prettyDateTime="prettyDateTime",n;var e})()},3110:(nt,_e,m)=>{"use strict";m.d(_e,{C9:()=>S,Xm:()=>h,g9:()=>y});var n=m(8176),e=m(4650);let h=(()=>{class w{transform(x){return(0,n.X1)(x,"ccc LLL dd yyyy, T")}}return w.\u0275fac=function(x){return new(x||w)},w.\u0275pipe=e.Yjl({name:"prettyDateTime",type:w,pure:!0}),w})(),S=(()=>{class w{transform(x){return(0,n.X1)(x,"LLL dd yyyy T")}}return w.\u0275fac=function(x){return new(x||w)},w.\u0275pipe=e.Yjl({name:"standardDateTime",type:w,pure:!0}),w})(),y=(()=>{class w{transform(x){return(0,n.X1)(x,"LLL dd yyyy")}}return w.\u0275fac=function(x){return new(x||w)},w.\u0275pipe=e.Yjl({name:"standardDate",type:w,pure:!0}),w})()},5503:(nt,_e,m)=>{"use strict";m.d(_e,{D:()=>S});var n=m(6895),e=m(9383),h=m(4650);let S=(()=>{class y{}return y.\u0275fac=function(f){return new(f||y)},y.\u0275mod=h.oAB({type:y}),y.\u0275inj=h.cJS({imports:[n.ez,e.aw]}),y})()},6252:(nt,_e,m)=>{"use strict";m.d(_e,{b:()=>h});var n=m(2951),e=m(4650);let h=(()=>{class S{transform(w,f){return new n.I(w)}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275pipe=e.Yjl({name:"readOnlyValue",type:S,pure:!0}),S})()},8853:(nt,_e,m)=>{"use strict";m.d(_e,{r:()=>e});var n=m(4650);let e=(()=>{class h{constructor(){this.map=new Map,this.map.set("description","Common.Description"),this.map.set("clientId","Clients.ID"),this.map.set("entityId","Clients.EntityId"),this.map.set("realm","Clients.Realm"),this.map.set("clientName","Common.DisplayName"),this.map.set("description","Common.Description"),this.map.set("clientUri","Common.DisplayURL"),this.map.set("logoUri","Common.LogoURL"),this.map.set("requireConsent","Clients.RequireConsent.Summary"),this.map.set("callbackUrl","Common.CallbackURL"),this.map.set("logoutUrl","Common.LogoutURL"),this.map.set("corsurl","Common.CORSUrl"),this.map.set("redirectUris","Common.RedirectUris"),this.map.set("secrets","Common.Secrets"),this.map.set("identityResources","Nav.IdentityResources"),this.map.set("protectedResources","Nav.ProtectedResources"),this.map.set("ACSEndpoint","Clients.AcsEndpoints"),this.map.set("SLOEndpoint","Clients.SloEndpoints"),this.map.set("ARSEndpoint","Clients.ArsEndpoints"),this.map.set("cibaLifetime","Common.CIBALifetime"),this.map.set("pollingInterval","Common.PollingInterval"),this.map.set("scheme","DynamicAuth.Scheme.Label"),this.map.set("displayName","DynamicAuth.DisplayName.Label"),this.map.set("authority","DynamicAuth.Authority.Label"),this.map.set("idpClientId","DynamicAuth.ClientId.Label"),this.map.set("callbackPath","DynamicAuth.CallbackPath.Label"),this.map.set("flow","DynamicAuth.Flow.Label"),this.map.set("scopes","DynamicAuth.Scopes.Label"),this.map.set("clientSecret","DynamicAuth.ClientSecret.Label"),this.map.set("signInScheme","DynamicAuth.SignInScheme.Label"),this.map.set("callbackPathAcs","DynamicAuth.CallbackPathAcsEndpoint.Label"),this.map.set("certFile","DynamicAuth.CertFile.Label"),this.map.set("certPassword","DynamicAuth.CertPassword.Label"),this.map.set("metadataAddress","DynamicAuth.SAML.IdpMetadataAddress.Label")}transform(y,w){return this.map.get(y)}}return h.\u0275fac=function(y){return new(y||h)},h.\u0275pipe=n.Yjl({name:"keyToString",type:h,pure:!0}),h})()},7111:(nt,_e,m)=>{"use strict";m.d(_e,{n:()=>h});var n=m(4650),e=m(1060);let h=(()=>{class S{constructor(w){this.securityService=w}notAllowedToEditClaim(w){return!this.securityService.allView&&this.isPolicyClaim(w)}isPolicyClaim(w){if(void 0!==w){const f=this.securityService.policyClaims;for(let x=0;x<f.length;x++)if(f[x].type===w.type&&f[x].value===w.value)return!0;return!1}}}return S.\u0275fac=function(w){return new(w||S)(n.LFG(e.I))},S.\u0275prov=n.Yz7({token:S,factory:S.\u0275fac}),S})()},9455:(nt,_e,m)=>{"use strict";m.d(_e,{t:()=>S});var n=m(1135);class e{constructor(){this.showNav=!1,this.showBanner=!1,this.showFooter=!1}}var h=m(4650);let S=(()=>{class y{constructor(){this.viewConfig=new e,this.viewConfig$=new n.X(this.viewConfig)}startInitialAdminCreation(){this.viewConfig.showNav=!1,this.viewConfig.showFooter=!1,this.viewConfig.showBanner=!1,this.viewConfig$.next(this.viewConfig)}finishInitialAdminCreation(){this.showAll()}failAuth(){this.showAll()}successAuth(){this.showAll()}failedEnforcerCompilation(){this.viewConfig.showFooter=!0,this.viewConfig.showNav=!1,this.viewConfig.showBanner=!0,this.viewConfig$.next(this.viewConfig)}showAll(){this.viewConfig.showFooter=!0,this.viewConfig.showNav=!0,this.viewConfig.showBanner=!0,this.viewConfig$.next(this.viewConfig)}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275prov=h.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},1228:(nt,_e,m)=>{"use strict";m.d(_e,{e:()=>y});var n=m(8176),e=m(4650),h=m(529),S=m(9455);let y=(()=>{class w{constructor(x,b){this.http=x,this.appComponentViewService=b,this.isAuthenticated=!1,this.isCreatingInitialAdministrator=!1;const g=(0,n.SV)();this.actionUrl="auth",this.authUrl=`${g}auth`}login(){window.location.href=`${this.authUrl}/login`}logoff(){this.isAuthenticated=!1,this.appComponentViewService.failAuth(),window.location.href=`${this.authUrl}/logout`}isAuthenticatedCheck(){return this.http.get(`${this.actionUrl}/isauthenticated`)}}return w.\u0275fac=function(x){return new(x||w)(e.LFG(h.eN),e.LFG(S.t))},w.\u0275prov=e.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},1058:(nt,_e,m)=>{"use strict";m.d(_e,{U:()=>e});var n=m(4650);let e=(()=>{class h{constructor(){this.storage=sessionStorage,this.countKey="retryCount",this.maxRetryAttempts=1}startLogin(){this.retryCount=0}endLogin(){this.storage.removeItem(this.countKey)}get canRetryLogin(){return this.retryCount+1<=this.maxRetryAttempts}retryLogin(){this.canRetryLogin&&(this.retryCount+=1)}get retryCount(){const y=this.storage.getItem(this.countKey);let w=y?Number(y):0;return w=isNaN(w)?0:w,w}set retryCount(y){(y=isNaN(y)?0:y)<=this.maxRetryAttempts&&this.storage.setItem(this.countKey,y.toString())}}return h.\u0275fac=function(y){return new(y||h)},h.\u0275prov=n.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},3212:(nt,_e,m)=>{"use strict";m.d(_e,{_:()=>S});var n=m(529),e=m(8176),h=m(4650);let S=(()=>{class y{buildParams(f,x,b,g,N,R,k){let O=new n.LE;return null!=f&&((0,e.Ew)(f.auditAction)||(O=O.append("auditAction",f.auditAction)),(0,e.Ew)(f.subject)||(O=O.append("subject",f.subject)),(0,e.Ew)(f.resourceName)||(O=O.append("resource",f.resourceName)),(0,e.Ew)(f.source)||(O=O.append("source",f.source))),null!=k&&(O=O.append("success",String(k))),(0,e.Ew)(R)||(O=O.append("sort",R)),b&&(O=O.append("to",b)),x&&(O=O.append("from",x)),g&&(O=O.append("page",String(g))),N&&(O=O.append("pageSize",String(N))),O}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275prov=h.Yz7({token:y,factory:y.\u0275fac}),y})()},3831:(nt,_e,m)=>{"use strict";m.d(_e,{C:()=>h});var n=m(1135),e=m(4650);let h=(()=>{class S{constructor(){this.unsavedCache=new n.X(null),this.unsavedCache$=this.unsavedCache.asObservable(),this.savedCache=new n.X(null),this.savedCache$=this.savedCache.asObservable(),this.componentDirtyValidMap=new Map}onSave(){this.componentDirtyValidMap.clear()}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},3257:(nt,_e,m)=>{"use strict";m.d(_e,{U:()=>e});var n=m(4650);let e=(()=>{class S{constructor(){}uploadFile(w,f){throw new Error("not implemented")}uploadViaMetaData(w,f){throw new Error("not implemented")}updateCertCache(w){throw new Error("not implemented")}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=n.Yz7({token:S,factory:S.\u0275fac}),S})()},8117:(nt,_e,m)=>{"use strict";m.d(_e,{S:()=>_l});var n=m(5861);class e{}var h=m(6801);function y(Le,o,u){var _;return Le instanceof Object&&null!==(_=Le[o])&&void 0!==_?_:u}function w(Le,o=0,u=Le.byteLength-o,_=!1){let T="";for(const D of new Uint8Array(Le,o,u)){const F=D.toString(16).toUpperCase();1===F.length&&(T+="0"),T+=F,_&&(T+=" ")}return T.trim()}function f(Le,o,u,_){return o instanceof ArrayBuffer?o.byteLength?u<0?(Le.error="Wrong parameter: inputOffset less than zero",!1):_<0?(Le.error="Wrong parameter: inputLength less than zero",!1):!(o.byteLength-u-_<0&&(Le.error="End of input reached before message was fully decoded (inconsistent offset and length values)",1)):(Le.error="Wrong parameter: inputBuffer has zero length",!1):(Le.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1)}function x(Le,o){let u=0;if(1===Le.length)return Le[0];for(let _=Le.length-1;_>=0;_--)u+=Le[Le.length-1-_]*Math.pow(2,o*_);return u}function b(Le,o,u=-1){const _=u;let T=Le,D=0,F=Math.pow(2,o);for(let re=1;re<8;re++){if(Le<F){let ce;if(_<0)ce=new ArrayBuffer(re),D=re;else{if(_<re)return new ArrayBuffer(0);ce=new ArrayBuffer(_),D=_}const Ee=new Uint8Array(ce);for(let dt=re-1;dt>=0;dt--){const wt=Math.pow(2,dt*o);Ee[D-dt-1]=Math.floor(T/wt),T-=Ee[D-dt-1]*wt}return ce}F*=Math.pow(2,o)}return new ArrayBuffer(0)}function g(...Le){let o=0,u=0;for(const D of Le)o+=D.byteLength;const _=new ArrayBuffer(o),T=new Uint8Array(_);for(const D of Le)T.set(new Uint8Array(D),u),u+=D.byteLength;return _}function N(...Le){let o=0,u=0;for(const D of Le)o+=D.length;const _=new ArrayBuffer(o),T=new Uint8Array(_);for(const D of Le)T.set(D,u),u+=D.length;return T}function R(){const Le=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const ce=0===Le[0]&&0==(128&Le[1]);(255===Le[0]&&128&Le[1]||ce)&&this.warnings.push("Needlessly long format")}const o=new ArrayBuffer(this.valueHex.byteLength),u=new Uint8Array(o);for(let re=0;re<this.valueHex.byteLength;re++)u[re]=0;u[0]=128&Le[0];const _=x(u,8),T=new ArrayBuffer(this.valueHex.byteLength),D=new Uint8Array(T);for(let re=0;re<this.valueHex.byteLength;re++)D[re]=Le[re];return D[0]&=127,x(D,8)-_}function k(Le){const o=Le<0?-1*Le:Le;let u=128;for(let _=1;_<8;_++){if(o<=u){if(Le<0){const re=b(u-o,8,_);return new Uint8Array(re)[0]|=128,re}let T=b(o,8,_),D=new Uint8Array(T);if(128&D[0]){const F=T.slice(0),re=new Uint8Array(F);T=new ArrayBuffer(T.byteLength+1),D=new Uint8Array(T);for(let ce=0;ce<F.byteLength;ce++)D[ce+1]=re[ce];D[0]=0}return T}u*=Math.pow(2,8)}return new ArrayBuffer(0)}function O(Le,o){if(Le.byteLength!==o.byteLength)return!1;const u=new Uint8Array(Le),_=new Uint8Array(o);for(let T=0;T<u.length;T++)if(u[T]!==_[T])return!1;return!0}function P(Le,o){const u=Le.toString(10);if(o<u.length)return"";const _=o-u.length,T=new Array(_);for(let F=0;F<_;F++)T[F]="0";return T.join("").concat(u)}const U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function M(Le,o=!1,u=!1,_=!1){let T=0,D=0,F=0,re="";const ce=o?W:U;if(_){let Ee=0;for(let dt=0;dt<Le.length;dt++)if(0!==Le.charCodeAt(dt)){Ee=dt;break}Le=Le.slice(Ee)}for(;T<Le.length;){const Ee=Le.charCodeAt(T++);T>=Le.length&&(D=1);const dt=Le.charCodeAt(T++);T>=Le.length&&(F=1);const wt=Le.charCodeAt(T++),kt=Ee>>2,sn=(3&Ee)<<4|dt>>4;let Sn=(15&dt)<<2|wt>>6,Dn=63&wt;1===D?Sn=Dn=64:1===F&&(Dn=64),re+=u?64===Sn?`${ce.charAt(kt)}${ce.charAt(sn)}`:64===Dn?`${ce.charAt(kt)}${ce.charAt(sn)}${ce.charAt(Sn)}`:`${ce.charAt(kt)}${ce.charAt(sn)}${ce.charAt(Sn)}${ce.charAt(Dn)}`:`${ce.charAt(kt)}${ce.charAt(sn)}${ce.charAt(Sn)}${ce.charAt(Dn)}`}return re}function B(Le,o=!1,u=!1){const _=o?W:U;function T(ce){for(let Ee=0;Ee<64;Ee++)if(_.charAt(Ee)===ce)return Ee;return 64}function D(ce){return 64===ce?0:ce}let F=0,re="";for(;F<Le.length;){const ce=T(Le.charAt(F++)),Ee=F>=Le.length?0:T(Le.charAt(F++)),dt=F>=Le.length?0:T(Le.charAt(F++)),wt=F>=Le.length?0:T(Le.charAt(F++)),kt=D(ce)<<2|D(Ee)>>4,sn=(15&D(Ee))<<4|D(dt)>>2,Sn=(3&D(dt))<<6|D(wt);re+=String.fromCharCode(kt),64!==dt&&(re+=String.fromCharCode(sn)),64!==wt&&(re+=String.fromCharCode(Sn))}if(u){let Ee=-1;for(let dt=re.length-1;dt>=0;dt--)if(0!==re.charCodeAt(dt)){Ee=dt;break}re=-1!==Ee?re.slice(0,Ee+1):""}return re}function V(Le){let o="";const u=new Uint8Array(Le);for(const _ of u)o+=String.fromCharCode(_);return o}function Q(Le){const o=Le.length,u=new ArrayBuffer(o),_=new Uint8Array(u);for(let T=0;T<o;T++)_[T]=Le.charCodeAt(T);return u}const Y=Math.log(2);function fe(Le){const o=Math.log(Le)/Y,u=Math.floor(o),_=Math.round(o);return u===_?u:_}function J(Le,o){for(const u of o)delete Le[u]}function ee(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function G(Le){let o=0,u=0;for(let T=0;T<Le.length;T++)o+=Le[T].byteLength;const _=new Uint8Array(o);for(let T=0;T<Le.length;T++){const D=Le[T];_.set(new Uint8Array(D),u),u+=D.byteLength}return _.buffer}function E(Le,o,u,_){return o instanceof Uint8Array?o.byteLength?u<0?(Le.error="Wrong parameter: inputOffset less than zero",!1):_<0?(Le.error="Wrong parameter: inputLength less than zero",!1):!(o.byteLength-u-_<0&&(Le.error="End of input reached before message was fully decoded (inconsistent offset and length values)",1)):(Le.error="Wrong parameter: inputBuffer has zero length",!1):(Le.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class te{constructor(){this.items=[]}write(o){this.items.push(o)}final(){return G(this.items)}}const $=[new Uint8Array([1])],ue="0123456789",me="name",we="valueHexView",rt=new ArrayBuffer(0),ft=new Uint8Array(0),qt="EndOfContent",en="OCTET STRING",xt="BIT STRING";function Dt(Le){var o;return(o=class extends Le{constructor(..._){var T;super(..._);const D=_[0]||{};this.isHexOnly=null!==(T=D.isHexOnly)&&void 0!==T&&T,this.valueHexView=D.valueHex?h.vJ.toUint8Array(D.valueHex):ft}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(_){this.valueHexView=new Uint8Array(_)}fromBER(_,T,D){const F=_ instanceof ArrayBuffer?new Uint8Array(_):_;if(!E(this,F,T,D))return-1;const re=T+D;return this.valueHexView=F.subarray(T,re),this.valueHexView.length?(this.blockLength=D,re):(this.warnings.push("Zero buffer length"),T)}toBER(_=!1){return this.isHexOnly?_?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",rt)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:h.ep.ToHex(this.valueHexView)}}}).NAME="hexBlock",o}let X=(()=>{class Le{constructor({blockLength:u=0,error:_="",warnings:T=[],valueBeforeDecode:D=ft}={}){this.blockLength=u,this.error=_,this.warnings=T,this.valueBeforeDecodeView=h.vJ.toUint8Array(D)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(u){this.valueBeforeDecodeView=new Uint8Array(u)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:h.ep.ToHex(this.valueBeforeDecodeView)}}}return Le.NAME="baseBlock",Le})(),j=(()=>{class Le extends X{fromBER(u,_,T){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(u,_){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}return Le.NAME="valueBlock",Le})(),ae=(()=>{class Le extends(Dt(X)){constructor({idBlock:u={}}={}){var _,T,D,F;super(),u?(this.isHexOnly=null!==(_=u.isHexOnly)&&void 0!==_&&_,this.valueHexView=u.valueHex?h.vJ.toUint8Array(u.valueHex):ft,this.tagClass=null!==(T=u.tagClass)&&void 0!==T?T:-1,this.tagNumber=null!==(D=u.tagNumber)&&void 0!==D?D:-1,this.isConstructed=null!==(F=u.isConstructed)&&void 0!==F&&F):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(u=!1){let _=0;switch(this.tagClass){case 1:_|=0;break;case 2:_|=64;break;case 3:_|=128;break;case 4:_|=192;break;default:return this.error="Unknown tag class",rt}if(this.isConstructed&&(_|=32),this.tagNumber<31&&!this.isHexOnly){const D=new Uint8Array(1);if(!u){let F=this.tagNumber;F&=31,_|=F,D[0]=_}return D.buffer}if(!this.isHexOnly){const D=b(this.tagNumber,7),F=new Uint8Array(D),re=D.byteLength,ce=new Uint8Array(re+1);if(ce[0]=31|_,!u){for(let Ee=0;Ee<re-1;Ee++)ce[Ee+1]=128|F[Ee];ce[re]=F[re-1]}return ce.buffer}const T=new Uint8Array(this.valueHexView.byteLength+1);if(T[0]=31|_,!u){const D=this.valueHexView;for(let F=0;F<D.length-1;F++)T[F+1]=128|D[F];T[this.valueHexView.byteLength]=D[D.length-1]}return T.buffer}fromBER(u,_,T){const D=h.vJ.toUint8Array(u);if(!E(this,D,_,T))return-1;const F=D.subarray(_,_+T);if(0===F.length)return this.error="Zero buffer length",-1;switch(192&F[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32==(32&F[0]),this.isHexOnly=!1;const ce=31&F[0];if(31!==ce)this.tagNumber=ce,this.blockLength=1;else{let Ee=1,dt=this.valueHexView=new Uint8Array(255),wt=255;for(;128&F[Ee];){if(dt[Ee-1]=127&F[Ee],Ee++,Ee>=F.length)return this.error="End of input reached before message was fully decoded",-1;if(Ee===wt){wt+=255;const sn=new Uint8Array(wt);for(let Sn=0;Sn<dt.length;Sn++)sn[Sn]=dt[Sn];dt=this.valueHexView=new Uint8Array(wt)}}this.blockLength=Ee+1,dt[Ee-1]=127&F[Ee];const kt=new Uint8Array(Ee);for(let sn=0;sn<Ee;sn++)kt[sn]=dt[sn];dt=this.valueHexView=new Uint8Array(Ee),dt.set(kt),this.blockLength<=9?this.tagNumber=x(dt,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return _+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}return Le.NAME="identificationBlock",Le})(),Be=(()=>{class Le extends X{constructor({lenBlock:u={}}={}){var _,T,D;super(),this.isIndefiniteForm=null!==(_=u.isIndefiniteForm)&&void 0!==_&&_,this.longFormUsed=null!==(T=u.longFormUsed)&&void 0!==T&&T,this.length=null!==(D=u.length)&&void 0!==D?D:0}fromBER(u,_,T){const D=h.vJ.toUint8Array(u);if(!E(this,D,_,T))return-1;const F=D.subarray(_,_+T);if(0===F.length)return this.error="Zero buffer length",-1;if(255===F[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===F[0],this.isIndefiniteForm)return this.blockLength=1,_+this.blockLength;if(this.longFormUsed=!!(128&F[0]),!1===this.longFormUsed)return this.length=F[0],this.blockLength=1,_+this.blockLength;const re=127&F[0];if(re>8)return this.error="Too big integer",-1;if(re+1>F.length)return this.error="End of input reached before message was fully decoded",-1;const ce=_+1,Ee=D.subarray(ce,ce+re);return 0===Ee[re-1]&&this.warnings.push("Needlessly long encoded length"),this.length=x(Ee,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=re+1,_+this.blockLength}toBER(u=!1){let _,T;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return _=new ArrayBuffer(1),!1===u&&(T=new Uint8Array(_),T[0]=128),_;if(this.longFormUsed){const D=b(this.length,8);if(D.byteLength>127)return this.error="Too big length",rt;if(_=new ArrayBuffer(D.byteLength+1),u)return _;const F=new Uint8Array(D);T=new Uint8Array(_),T[0]=128|D.byteLength;for(let re=0;re<D.byteLength;re++)T[re+1]=F[re];return _}return _=new ArrayBuffer(1),!1===u&&(T=new Uint8Array(_),T[0]=this.length),_}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}return Le.NAME="lengthBlock",Le})();const je={};let ke=(()=>{class Le extends X{constructor({name:u="",optional:_=!1,primitiveSchema:T,...D}={},F){super(D),this.name=u,this.optional=_,T&&(this.primitiveSchema=T),this.idBlock=new ae(D),this.lenBlock=new Be(D),this.valueBlock=F?new F(D):new j(D)}fromBER(u,_,T){const D=this.valueBlock.fromBER(u,_,this.lenBlock.isIndefiniteForm?T:this.lenBlock.length);return-1===D?(this.error=this.valueBlock.error,D):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),D)}toBER(u,_){const T=_||new te;_||Re(this);const D=this.idBlock.toBER(u);if(T.write(D),this.lenBlock.isIndefiniteForm)T.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(u,T),T.write(new ArrayBuffer(2));else{const F=this.valueBlock.toBER(u);this.lenBlock.length=F.byteLength;const re=this.lenBlock.toBER(u);T.write(re),T.write(F)}return _?rt:T.final()}toJSON(){const u={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(u.primitiveSchema=this.primitiveSchema.toJSON()),u}toString(u="ascii"){return"ascii"===u?this.onAsciiEncoding():h.ep.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${h.ep.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(u){return this===u||u instanceof this.constructor&&O(this.toBER(),u.toBER())}}return Le.NAME="BaseBlock",Le})();function Re(Le){if(Le instanceof je.Constructed)for(const o of Le.valueBlock.value)Re(o)&&(Le.lenBlock.isIndefiniteForm=!0);return!!Le.lenBlock.isIndefiniteForm}let Se=(()=>{class Le extends ke{constructor({value:u="",..._}={},T){super(_,T),u&&this.fromString(u)}getValue(){return this.valueBlock.value}setValue(u){this.valueBlock.value=u}fromBER(u,_,T){const D=this.valueBlock.fromBER(u,_,this.lenBlock.isIndefiniteForm?T:this.lenBlock.length);return-1===D?(this.error=this.valueBlock.error,D):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),D)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}return Le.NAME="BaseStringBlock",Le})(),Qe=(()=>{class Le extends(Dt(j)){constructor({isHexOnly:u=!0,..._}={}){super(_),this.isHexOnly=u}}return Le.NAME="PrimitiveValueBlock",Le})();class Ke extends ke{constructor(o={}){super(o,Qe),this.idBlock.isConstructed=!1}}function Ct(Le,o=0,u=Le.length){const _=o;let T=new ke({},j);const D=new X;if(!E(D,Le,o,u))return T.error=D.error,{offset:-1,result:T};if(!Le.subarray(o,o+u).length)return T.error="Zero buffer length",{offset:-1,result:T};let re=T.idBlock.fromBER(Le,o,u);if(T.idBlock.warnings.length&&T.warnings.concat(T.idBlock.warnings),-1===re)return T.error=T.idBlock.error,{offset:-1,result:T};if(re=T.lenBlock.fromBER(Le,o=re,u-=T.idBlock.blockLength),T.lenBlock.warnings.length&&T.warnings.concat(T.lenBlock.warnings),-1===re)return T.error=T.lenBlock.error,{offset:-1,result:T};if(o=re,u-=T.lenBlock.blockLength,!T.idBlock.isConstructed&&T.lenBlock.isIndefiniteForm)return T.error="Indefinite length form used for primitive encoding form",{offset:-1,result:T};let ce=ke;if(1===T.idBlock.tagClass){if(T.idBlock.tagNumber>=37&&!1===T.idBlock.isHexOnly)return T.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:T};switch(T.idBlock.tagNumber){case 0:if(T.idBlock.isConstructed&&T.lenBlock.length>0)return T.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:T};ce=je.EndOfContent;break;case 1:ce=je.Boolean;break;case 2:ce=je.Integer;break;case 3:ce=je.BitString;break;case 4:ce=je.OctetString;break;case 5:ce=je.Null;break;case 6:ce=je.ObjectIdentifier;break;case 10:ce=je.Enumerated;break;case 12:ce=je.Utf8String;break;case 13:ce=je.RelativeObjectIdentifier;break;case 14:ce=je.TIME;break;case 15:return T.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:T};case 16:ce=je.Sequence;break;case 17:ce=je.Set;break;case 18:ce=je.NumericString;break;case 19:ce=je.PrintableString;break;case 20:ce=je.TeletexString;break;case 21:ce=je.VideotexString;break;case 22:ce=je.IA5String;break;case 23:ce=je.UTCTime;break;case 24:ce=je.GeneralizedTime;break;case 25:ce=je.GraphicString;break;case 26:ce=je.VisibleString;break;case 27:ce=je.GeneralString;break;case 28:ce=je.UniversalString;break;case 29:ce=je.CharacterString;break;case 30:ce=je.BmpString;break;case 31:ce=je.DATE;break;case 32:ce=je.TimeOfDay;break;case 33:ce=je.DateTime;break;case 34:ce=je.Duration;break;default:{const Ee=T.idBlock.isConstructed?new je.Constructed:new je.Primitive;Ee.idBlock=T.idBlock,Ee.lenBlock=T.lenBlock,Ee.warnings=T.warnings,T=Ee}}}else ce=T.idBlock.isConstructed?je.Constructed:je.Primitive;return T=function Je(Le,o){if(Le instanceof o)return Le;const u=new o;return u.idBlock=Le.idBlock,u.lenBlock=Le.lenBlock,u.warnings=Le.warnings,u.valueBeforeDecodeView=Le.valueBeforeDecodeView,u}(T,ce),re=T.fromBER(Le,o,T.lenBlock.isIndefiniteForm?u:T.lenBlock.length),T.valueBeforeDecodeView=Le.subarray(_,_+T.blockLength),{offset:re,result:T}}function ht(Le){if(!Le.byteLength){const o=new ke({},j);return o.error="Input buffer has zero length",{offset:-1,result:o}}return Ct(h.vJ.toUint8Array(Le).slice(),0,Le.byteLength)}function Ze(Le,o){return Le?1:o}je.Primitive=Ke,Ke.NAME="PRIMITIVE";let oe=(()=>{class Le extends j{constructor({value:u=[],isIndefiniteForm:_=!1,...T}={}){super(T),this.value=u,this.isIndefiniteForm=_}fromBER(u,_,T){const D=h.vJ.toUint8Array(u);if(!E(this,D,_,T))return-1;if(this.valueBeforeDecodeView=D.subarray(_,_+T),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),_;let F=_;for(;Ze(this.isIndefiniteForm,T)>0;){const re=Ct(D,F,T);if(-1===re.offset)return this.error=re.result.error,this.warnings.concat(re.result.warnings),-1;if(F=re.offset,this.blockLength+=re.result.blockLength,T-=re.result.blockLength,this.value.push(re.result),this.isIndefiniteForm&&re.result.constructor.NAME===qt)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===qt?this.value.pop():this.warnings.push("No EndOfContent block encoded")),F}toBER(u,_){const T=_||new te;for(let D=0;D<this.value.length;D++)this.value[D].toBER(u,T);return _?rt:T.final()}toJSON(){const u={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const _ of this.value)u.value.push(_.toJSON());return u}}return Le.NAME="ConstructedValueBlock",Le})();class L extends ke{constructor(o={}){super(o,oe),this.idBlock.isConstructed=!0}fromBER(o,u,_){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const T=this.valueBlock.fromBER(o,u,this.lenBlock.isIndefiniteForm?_:this.lenBlock.length);return-1===T?(this.error=this.valueBlock.error,T):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),T)}onAsciiEncoding(){const o=[];for(const _ of this.valueBlock.value)o.push(_.toString("ascii").split("\n").map(T=>`  ${T}`).join("\n"));const u=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return o.length?`${u} :\n${o.join("\n")}`:`${u} :`}}je.Constructed=L,L.NAME="CONSTRUCTED";let ne=(()=>{class Le extends j{fromBER(u,_,T){return _}toBER(u){return rt}}return Le.override="EndOfContentValueBlock",Le})();class ze extends ke{constructor(o={}){super(o,ne),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}je.EndOfContent=ze,ze.NAME=qt;class Tt extends ke{constructor(o={}){super(o,j),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(o,u,_){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=_,u+_>o.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):u+_}toBER(o,u){const _=new ArrayBuffer(2);if(!o){const T=new Uint8Array(_);T[0]=5,T[1]=0}return u&&u.write(_),_}onAsciiEncoding(){return`${this.constructor.NAME}`}}je.Null=Tt,Tt.NAME="NULL";let Zt=(()=>{class Le extends(Dt(j)){constructor({value:u,..._}={}){super(_),this.valueHexView=_.valueHex?h.vJ.toUint8Array(_.valueHex):new Uint8Array(1),u&&(this.value=u)}get value(){for(const u of this.valueHexView)if(u>0)return!0;return!1}set value(u){this.valueHexView[0]=u?255:0}fromBER(u,_,T){const D=h.vJ.toUint8Array(u);return E(this,D,_,T)?(this.valueHexView=D.subarray(_,_+T),T>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,R.call(this),this.blockLength=T,_+T):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}return Le.NAME="BooleanValueBlock",Le})();class Yt extends ke{constructor(o={}){super(o,Zt),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(o){this.valueBlock.value=o}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}}je.Boolean=Yt,Yt.NAME="BOOLEAN";let on=(()=>{class Le extends(Dt(oe)){constructor({isConstructed:u=!1,..._}={}){super(_),this.isConstructed=u}fromBER(u,_,T){let D=0;if(this.isConstructed){if(this.isHexOnly=!1,D=oe.prototype.fromBER.call(this,u,_,T),-1===D)return D;for(let F=0;F<this.value.length;F++){const re=this.value[F].constructor.NAME;if(re===qt){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(re!==en)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,D=super.fromBER(u,_,T),this.blockLength=T;return D}toBER(u,_){return this.isConstructed?oe.prototype.toBER.call(this,u,_):u?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}return Le.NAME="OctetStringValueBlock",Le})();class it extends ke{constructor({idBlock:o={},lenBlock:u={},..._}={}){var T,D;null!==(T=_.isConstructed)&&void 0!==T||(_.isConstructed=!(null===(D=_.value)||void 0===D||!D.length)),super({idBlock:{isConstructed:_.isConstructed,...o},lenBlock:{...u,isIndefiniteForm:!!_.isIndefiniteForm},..._},on),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(o,u,_){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===_)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),u;if(!this.valueBlock.isConstructed){const D=(o instanceof ArrayBuffer?new Uint8Array(o):o).subarray(u,u+_);try{if(D.byteLength){const F=Ct(D,0,D.byteLength);-1!==F.offset&&F.offset===_&&(this.valueBlock.value=[F.result])}}catch{}}return super.fromBER(o,u,_)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?L.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${h.ep.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const o=[];for(const u of this.valueBlock.value)u instanceof it&&o.push(u.valueBlock.valueHexView);return h.vJ.concat(o)}}je.OctetString=it,it.NAME=en;let Gt=(()=>{class Le extends(Dt(oe)){constructor({unusedBits:u=0,isConstructed:_=!1,...T}={}){super(T),this.unusedBits=u,this.isConstructed=_,this.blockLength=this.valueHexView.byteLength}fromBER(u,_,T){if(!T)return _;let D=-1;if(this.isConstructed){if(D=oe.prototype.fromBER.call(this,u,_,T),-1===D)return D;for(const ce of this.value){const Ee=ce.constructor.NAME;if(Ee===qt){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(Ee!==xt)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const dt=ce.valueBlock;if(this.unusedBits>0&&dt.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=dt.unusedBits}return D}const F=h.vJ.toUint8Array(u);if(!E(this,F,_,T))return-1;const re=F.subarray(_,_+T);if(this.unusedBits=re[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const ce=re.subarray(1);try{if(ce.byteLength){const Ee=Ct(ce,0,ce.byteLength);-1!==Ee.offset&&Ee.offset===T-1&&(this.value=[Ee.result])}}catch{}}return this.valueHexView=re.subarray(1),this.blockLength=re.length,_+T}toBER(u,_){if(this.isConstructed)return oe.prototype.toBER.call(this,u,_);if(u)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return rt;const T=new Uint8Array(this.valueHexView.length+1);return T[0]=this.unusedBits,T.set(this.valueHexView,1),T.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}return Le.NAME="BitStringValueBlock",Le})();var ln;class jt extends ke{constructor({idBlock:o={},lenBlock:u={},..._}={}){var T,D;null!==(T=_.isConstructed)&&void 0!==T||(_.isConstructed=!(null===(D=_.value)||void 0===D||!D.length)),super({idBlock:{isConstructed:_.isConstructed,...o},lenBlock:{...u,isIndefiniteForm:!!_.isIndefiniteForm},..._},Gt),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(o,u,_){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(o,u,_)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return L.prototype.onAsciiEncoding.call(this);{const o=[],u=this.valueBlock.valueHexView;for(const T of u)o.push(T.toString(2).padStart(8,"0"));const _=o.join("");return`${this.constructor.NAME} : ${_.substring(0,_.length-this.valueBlock.unusedBits)}`}}}function kn(Le,o){const u=new Uint8Array([0]),_=new Uint8Array(Le),T=new Uint8Array(o);let D=_.slice(0);const F=D.length-1,re=T.slice(0),ce=re.length-1;let Ee=0,wt=0;for(let kt=ce<F?F:ce;kt>=0;kt--,wt++)Ee=1==wt<re.length?D[F-wt]+re[ce-wt]+u[0]:D[F-wt]+u[0],u[0]=Ee/10,1==wt>=D.length?D=N(new Uint8Array([Ee%10]),D):D[F-wt]=Ee%10;return u[0]>0&&(D=N(u,D)),D}function Tn(Le){if(Le>=$.length)for(let o=$.length;o<=Le;o++){const u=new Uint8Array([0]);let _=$[o-1].slice(0);for(let T=_.length-1;T>=0;T--){const D=new Uint8Array([(_[T]<<1)+u[0]]);u[0]=D[0]/10,_[T]=D[0]%10}u[0]>0&&(_=N(u,_)),$.push(_)}return $[Le]}function qn(Le,o){let u=0;const _=new Uint8Array(Le),T=new Uint8Array(o),D=_.slice(0),F=D.length-1,re=T.slice(0),ce=re.length-1;let Ee,dt=0;for(let wt=ce;wt>=0;wt--,dt++)Ee=D[F-dt]-re[ce-dt]-u,1==Ee<0?(u=1,D[F-dt]=Ee+10):(u=0,D[F-dt]=Ee);if(u>0)for(let wt=F-ce+1;wt>=0;wt--,dt++){if(Ee=D[F-dt]-u,!(Ee<0)){u=0,D[F-dt]=Ee;break}u=1,D[F-dt]=Ee+10}return D.slice()}je.BitString=jt,jt.NAME=xt;class ri extends(Dt(j)){constructor({value:o,...u}={}){super(u),this._valueDec=0,u.valueHex&&this.setValueHex(),void 0!==o&&(this.valueDec=o)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=R.call(this)))}set valueDec(o){this._valueDec=o,this.isHexOnly=!1,this.valueHexView=new Uint8Array(k(o))}get valueDec(){return this._valueDec}fromDER(o,u,_,T=0){const D=this.fromBER(o,u,_);if(-1===D)return D;const F=this.valueHexView;return 0===F[0]&&0!=(128&F[1])?this.valueHexView=F.subarray(1):0!==T&&F.length<T&&(T-F.length>1&&(T=F.length+1),this.valueHexView=F.subarray(T-F.length)),D}toDER(o=!1){const u=this.valueHexView;switch(!0){case 0!=(128&u[0]):{const _=new Uint8Array(this.valueHexView.length+1);_[0]=0,_.set(u,1),this.valueHexView=_}break;case 0===u[0]&&0==(128&u[1]):this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(o)}fromBER(o,u,_){const T=super.fromBER(o,u,_);return-1===T||this.setValueHex(),T}toBER(o){return o?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const o=8*this.valueHexView.length-1;let T,u=new Uint8Array(8*this.valueHexView.length/3),_=0;const D=this.valueHexView;let F="",re=!1;for(let ce=D.byteLength-1;ce>=0;ce--){T=D[ce];for(let Ee=0;Ee<8;Ee++)1==(1&T)&&(_===o?(u=qn(Tn(_),u),F="-"):u=kn(u,Tn(_))),_++,T>>=1}for(let ce=0;ce<u.length;ce++)u[ce]&&(re=!0),re&&(F+=ue.charAt(u[ce]));return!1===re&&(F+=ue.charAt(0)),F}}ln=ri,ri.NAME="IntegerValueBlock",Object.defineProperty(ln.prototype,"valueHex",{set:function(Le){this.valueHexView=new Uint8Array(Le),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class Ft extends ke{constructor(o={}){super(o,ri),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return ee(),BigInt(this.valueBlock.toString())}static fromBigInt(o){ee();const u=BigInt(o),_=new te,T=u.toString(16).replace(/^-/,""),D=new Uint8Array(h.ep.FromHex(T));if(u<0){const re=new Uint8Array(D.length+(128&D[0]?1:0));re[0]|=128;const Ee=BigInt(`0x${h.ep.ToHex(re)}`)+u,dt=h.vJ.toUint8Array(h.ep.FromHex(Ee.toString(16)));dt[0]|=128,_.write(dt)}else 128&D[0]&&_.write(new Uint8Array([0])),_.write(D);return new Ft({valueHex:_.final()})}convertToDER(){const o=new Ft({valueHex:this.valueBlock.valueHexView});return o.valueBlock.toDER(),o}convertFromDER(){return new Ft({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}je.Integer=Ft,Ft.NAME="INTEGER";class In extends Ft{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}je.Enumerated=In,In.NAME="ENUMERATED";let Fn=(()=>{class Le extends(Dt(j)){constructor({valueDec:u=-1,isFirstSid:_=!1,...T}={}){super(T),this.valueDec=u,this.isFirstSid=_}fromBER(u,_,T){if(!T)return _;const D=h.vJ.toUint8Array(u);if(!E(this,D,_,T))return-1;const F=D.subarray(_,_+T);this.valueHexView=new Uint8Array(T);for(let ce=0;ce<T&&(this.valueHexView[ce]=127&F[ce],this.blockLength++,0!=(128&F[ce]));ce++);const re=new Uint8Array(this.blockLength);for(let ce=0;ce<this.blockLength;ce++)re[ce]=this.valueHexView[ce];return this.valueHexView=re,0!=(128&F[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=x(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),_+this.blockLength)}set valueBigInt(u){ee();let _=BigInt(u).toString(2);for(;_.length%7;)_="0"+_;const T=new Uint8Array(_.length/7);for(let D=0;D<T.length;D++)T[D]=parseInt(_.slice(7*D,7*D+7),2)+(D+1<T.length?128:0);this.fromBER(T.buffer,0,T.length)}toBER(u){if(this.isHexOnly){if(u)return new ArrayBuffer(this.valueHexView.byteLength);const D=this.valueHexView,F=new Uint8Array(this.blockLength);for(let re=0;re<this.blockLength-1;re++)F[re]=128|D[re];return F[this.blockLength-1]=D[this.blockLength-1],F.buffer}const _=b(this.valueDec,7);if(0===_.byteLength)return this.error="Error during encoding SID value",rt;const T=new Uint8Array(_.byteLength);if(!u){const D=new Uint8Array(_),F=_.byteLength-1;for(let re=0;re<F;re++)T[re]=128|D[re];T[F]=D[F]}return T}toString(){let u="";if(this.isHexOnly)u=h.ep.ToHex(this.valueHexView);else if(this.isFirstSid){let _=this.valueDec;this.valueDec<=39?u="0.":this.valueDec<=79?(u="1.",_-=40):(u="2.",_-=80),u+=_.toString()}else u=this.valueDec.toString();return u}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}return Le.NAME="sidBlock",Le})(),Zn=(()=>{class Le extends j{constructor({value:u="",..._}={}){super(_),this.value=[],u&&this.fromString(u)}fromBER(u,_,T){let D=_;for(;T>0;){const F=new Fn;if(D=F.fromBER(u,D,T),-1===D)return this.blockLength=0,this.error=F.error,D;0===this.value.length&&(F.isFirstSid=!0),this.blockLength+=F.blockLength,T-=F.blockLength,this.value.push(F)}return D}toBER(u){const _=[];for(let T=0;T<this.value.length;T++){const D=this.value[T].toBER(u);if(0===D.byteLength)return this.error=this.value[T].error,rt;_.push(D)}return G(_)}fromString(u){this.value=[];let _=0,T=0,D="",F=!1;do{if(T=u.indexOf(".",_),D=-1===T?u.substring(_):u.substring(_,T),_=T+1,F){const re=this.value[0];let ce=0;switch(re.valueDec){case 0:break;case 1:ce=40;break;case 2:ce=80;break;default:return void(this.value=[])}const Ee=parseInt(D,10);if(isNaN(Ee))return;re.valueDec=Ee+ce,F=!1}else{const re=new Fn;if(D>Number.MAX_SAFE_INTEGER){ee();const ce=BigInt(D);re.valueBigInt=ce}else if(re.valueDec=parseInt(D,10),isNaN(re.valueDec))return;this.value.length||(re.isFirstSid=!0,F=!0),this.value.push(re)}}while(-1!==T)}toString(){let u="",_=!1;for(let T=0;T<this.value.length;T++){_=this.value[T].isHexOnly;let D=this.value[T].toString();0!==T&&(u=`${u}.`),_?(D=`{${D}}`,this.value[T].isFirstSid?u=`2.{${D} - 80}`:u+=D):u+=D}return u}toJSON(){const u={...super.toJSON(),value:this.toString(),sidArray:[]};for(let _=0;_<this.value.length;_++)u.sidArray.push(this.value[_].toJSON());return u}}return Le.NAME="ObjectIdentifierValueBlock",Le})();class ut extends ke{constructor(o={}){super(o,Zn),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(o){this.valueBlock.fromString(o)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}je.ObjectIdentifier=ut,ut.NAME="OBJECT IDENTIFIER";let vt=(()=>{class Le extends(Dt(X)){constructor({valueDec:u=0,..._}={}){super(_),this.valueDec=u}fromBER(u,_,T){if(0===T)return _;const D=h.vJ.toUint8Array(u);if(!E(this,D,_,T))return-1;const F=D.subarray(_,_+T);this.valueHexView=new Uint8Array(T);for(let ce=0;ce<T&&(this.valueHexView[ce]=127&F[ce],this.blockLength++,0!=(128&F[ce]));ce++);const re=new Uint8Array(this.blockLength);for(let ce=0;ce<this.blockLength;ce++)re[ce]=this.valueHexView[ce];return this.valueHexView=re,0!=(128&F[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=x(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),_+this.blockLength)}toBER(u){if(this.isHexOnly){if(u)return new ArrayBuffer(this.valueHexView.byteLength);const D=this.valueHexView,F=new Uint8Array(this.blockLength);for(let re=0;re<this.blockLength-1;re++)F[re]=128|D[re];return F[this.blockLength-1]=D[this.blockLength-1],F.buffer}const _=b(this.valueDec,7);if(0===_.byteLength)return this.error="Error during encoding SID value",rt;const T=new Uint8Array(_.byteLength);if(!u){const D=new Uint8Array(_),F=_.byteLength-1;for(let re=0;re<F;re++)T[re]=128|D[re];T[F]=D[F]}return T.buffer}toString(){let u="";return u=this.isHexOnly?h.ep.ToHex(this.valueHexView):this.valueDec.toString(),u}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}return Le.NAME="relativeSidBlock",Le})(),at=(()=>{class Le extends j{constructor({value:u="",..._}={}){super(_),this.value=[],u&&this.fromString(u)}fromBER(u,_,T){let D=_;for(;T>0;){const F=new vt;if(D=F.fromBER(u,D,T),-1===D)return this.blockLength=0,this.error=F.error,D;this.blockLength+=F.blockLength,T-=F.blockLength,this.value.push(F)}return D}toBER(u,_){const T=[];for(let D=0;D<this.value.length;D++){const F=this.value[D].toBER(u);if(0===F.byteLength)return this.error=this.value[D].error,rt;T.push(F)}return G(T)}fromString(u){this.value=[];let _=0,T=0,D="";do{T=u.indexOf(".",_),D=-1===T?u.substring(_):u.substring(_,T),_=T+1;const F=new vt;if(F.valueDec=parseInt(D,10),isNaN(F.valueDec))return!0;this.value.push(F)}while(-1!==T);return!0}toString(){let u="",_=!1;for(let T=0;T<this.value.length;T++){_=this.value[T].isHexOnly;let D=this.value[T].toString();0!==T&&(u=`${u}.`),_&&(D=`{${D}}`),u+=D}return u}toJSON(){const u={...super.toJSON(),value:this.toString(),sidArray:[]};for(let _=0;_<this.value.length;_++)u.sidArray.push(this.value[_].toJSON());return u}}return Le.NAME="RelativeObjectIdentifierValueBlock",Le})();class Ht extends ke{constructor(o={}){super(o,at),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(o){this.valueBlock.fromString(o)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}je.RelativeObjectIdentifier=Ht,Ht.NAME="RelativeObjectIdentifier";class Kt extends L{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}je.Sequence=Kt,Kt.NAME="SEQUENCE";class Ei extends L{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}je.Set=Ei,Ei.NAME="SET";let os=(()=>{class Le extends(Dt(j)){constructor({...u}={}){super(u),this.isHexOnly=!0,this.value=""}toJSON(){return{...super.toJSON(),value:this.value}}}return Le.NAME="StringValueBlock",Le})(),Nn=(()=>{class Le extends os{}return Le.NAME="SimpleStringValueBlock",Le})(),mi=(()=>{class Le extends Se{constructor({...u}={}){super(u,Nn)}fromBuffer(u){this.valueBlock.value=String.fromCharCode.apply(null,h.vJ.toUint8Array(u))}fromString(u){const _=u.length,T=this.valueBlock.valueHexView=new Uint8Array(_);for(let D=0;D<_;D++)T[D]=u.charCodeAt(D);this.valueBlock.value=u}}return Le.NAME="SIMPLE STRING",Le})(),ur=(()=>{class Le extends mi{fromBuffer(u){this.valueBlock.valueHexView=h.vJ.toUint8Array(u);try{this.valueBlock.value=h.ep.ToUtf8String(u)}catch(_){this.warnings.push(`Error during "decodeURIComponent": ${_}, using raw string`),this.valueBlock.value=h.ep.ToBinary(u)}}fromString(u){this.valueBlock.valueHexView=new Uint8Array(h.ep.FromUtf8String(u)),this.valueBlock.value=u}}return Le.NAME="Utf8StringValueBlock",Le})();class nr extends ur{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}je.Utf8String=nr,nr.NAME="UTF8String";let Gi=(()=>{class Le extends mi{fromBuffer(u){this.valueBlock.value=h.ep.ToUtf16String(u),this.valueBlock.valueHexView=h.vJ.toUint8Array(u)}fromString(u){this.valueBlock.value=u,this.valueBlock.valueHexView=new Uint8Array(h.ep.FromUtf16String(u))}}return Le.NAME="BmpStringValueBlock",Le})();class Yi extends Gi{constructor({...o}={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}je.BmpString=Yi,Yi.NAME="BMPString";let Jr=(()=>{class Le extends mi{fromBuffer(u){const _=ArrayBuffer.isView(u)?u.slice().buffer:u.slice(0),T=new Uint8Array(_);for(let D=0;D<T.length;D+=4)T[D]=T[D+3],T[D+1]=T[D+2],T[D+2]=0,T[D+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(_))}fromString(u){const _=u.length,T=this.valueBlock.valueHexView=new Uint8Array(4*_);for(let D=0;D<_;D++){const F=b(u.charCodeAt(D),8),re=new Uint8Array(F);if(re.length>4)continue;const ce=4-re.length;for(let Ee=re.length-1;Ee>=0;Ee--)T[4*D+Ee+ce]=re[Ee]}this.valueBlock.value=u}}return Le.NAME="UniversalStringValueBlock",Le})();class Tr extends Jr{constructor({...o}={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}je.UniversalString=Tr,Tr.NAME="UniversalString";class kr extends mi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}je.NumericString=kr,kr.NAME="NumericString";class Ui extends mi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}je.PrintableString=Ui,Ui.NAME="PrintableString";class Ve extends mi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}je.TeletexString=Ve,Ve.NAME="TeletexString";class st extends mi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}je.VideotexString=st,st.NAME="VideotexString";class nn extends mi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}je.IA5String=nn,nn.NAME="IA5String";class bn extends mi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}je.GraphicString=bn,bn.NAME="GraphicString";class wi extends mi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}je.VisibleString=wi,wi.NAME="VisibleString";class oi extends mi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}je.GeneralString=oi,oi.NAME="GeneralString";class pr extends mi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}je.CharacterString=pr,pr.NAME="CharacterString";class Fi extends wi{constructor({value:o,valueDate:u,..._}={}){if(super(_),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,o){this.fromString(o),this.valueBlock.valueHexView=new Uint8Array(o.length);for(let T=0;T<o.length;T++)this.valueBlock.valueHexView[T]=o.charCodeAt(T)}u&&(this.fromDate(u),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(o){this.fromString(String.fromCharCode.apply(null,h.vJ.toUint8Array(o)))}toBuffer(){const o=this.toString(),u=new ArrayBuffer(o.length),_=new Uint8Array(u);for(let T=0;T<o.length;T++)_[T]=o.charCodeAt(T);return u}fromDate(o){this.year=o.getUTCFullYear(),this.month=o.getUTCMonth()+1,this.day=o.getUTCDate(),this.hour=o.getUTCHours(),this.minute=o.getUTCMinutes(),this.second=o.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(o){const _=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(o);if(null===_)return void(this.error="Wrong input string for conversion");const T=parseInt(_[1],10);this.year=T>=50?1900+T:2e3+T,this.month=parseInt(_[2],10),this.day=parseInt(_[3],10),this.hour=parseInt(_[4],10),this.minute=parseInt(_[5],10),this.second=parseInt(_[6],10)}toString(o="iso"){if("iso"===o){const u=new Array(7);return u[0]=P(this.year<2e3?this.year-1900:this.year-2e3,2),u[1]=P(this.month,2),u[2]=P(this.day,2),u[3]=P(this.hour,2),u[4]=P(this.minute,2),u[5]=P(this.second,2),u[6]="Z",u.join("")}return super.toString(o)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}je.UTCTime=Fi,Fi.NAME="UTCTime";class Zi extends Fi{constructor(o={}){var u;super(o),null!==(u=this.millisecond)&&void 0!==u||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(o){super.fromDate(o),this.millisecond=o.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(o){let F,u=!1,_="",T="",D=0,re=0,ce=0;if("Z"===o[o.length-1])_=o.substring(0,o.length-1),u=!0;else{const wt=new Number(o[o.length-1]);if(isNaN(wt.valueOf()))throw new Error("Wrong input string for conversion");_=o}if(u){if(-1!==_.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==_.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let wt=1,kt=_.indexOf("+"),sn="";if(-1===kt&&(kt=_.indexOf("-"),wt=-1),-1!==kt){if(sn=_.substring(kt+1),_=_.substring(0,kt),2!==sn.length&&4!==sn.length)throw new Error("Wrong input string for conversion");let Sn=parseInt(sn.substring(0,2),10);if(isNaN(Sn.valueOf()))throw new Error("Wrong input string for conversion");if(re=wt*Sn,4===sn.length){if(Sn=parseInt(sn.substring(2,4),10),isNaN(Sn.valueOf()))throw new Error("Wrong input string for conversion");ce=wt*Sn}}}let Ee=_.indexOf(".");if(-1===Ee&&(Ee=_.indexOf(",")),-1!==Ee){const wt=new Number(`0${_.substring(Ee)}`);if(isNaN(wt.valueOf()))throw new Error("Wrong input string for conversion");D=wt.valueOf(),T=_.substring(0,Ee)}else T=_;switch(!0){case 8===T.length:if(F=/(\d{4})(\d{2})(\d{2})/gi,-1!==Ee)throw new Error("Wrong input string for conversion");break;case 10===T.length:if(F=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==Ee){let wt=60*D;this.minute=Math.floor(wt),wt=60*(wt-this.minute),this.second=Math.floor(wt),wt=1e3*(wt-this.second),this.millisecond=Math.floor(wt)}break;case 12===T.length:if(F=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==Ee){let wt=60*D;this.second=Math.floor(wt),wt=1e3*(wt-this.second),this.millisecond=Math.floor(wt)}break;case 14===T.length:F=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==Ee&&(this.millisecond=Math.floor(1e3*D));break;default:throw new Error("Wrong input string for conversion")}const dt=F.exec(T);if(null===dt)throw new Error("Wrong input string for conversion");for(let wt=1;wt<dt.length;wt++)switch(wt){case 1:this.year=parseInt(dt[wt],10);break;case 2:this.month=parseInt(dt[wt],10);break;case 3:this.day=parseInt(dt[wt],10);break;case 4:this.hour=parseInt(dt[wt],10)+re;break;case 5:this.minute=parseInt(dt[wt],10)+ce;break;case 6:this.second=parseInt(dt[wt],10);break;default:throw new Error("Wrong input string for conversion")}if(!1===u){const wt=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=wt.getUTCFullYear(),this.month=wt.getUTCMonth(),this.day=wt.getUTCDay(),this.hour=wt.getUTCHours(),this.minute=wt.getUTCMinutes(),this.second=wt.getUTCSeconds(),this.millisecond=wt.getUTCMilliseconds()}}toString(o="iso"){if("iso"===o){const u=[];return u.push(P(this.year,4)),u.push(P(this.month,2)),u.push(P(this.day,2)),u.push(P(this.hour,2)),u.push(P(this.minute,2)),u.push(P(this.second,2)),0!==this.millisecond&&(u.push("."),u.push(P(this.millisecond,3))),u.push("Z"),u.join("")}return super.toString(o)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}je.GeneralizedTime=Zi,Zi.NAME="GeneralizedTime";class ns extends nr{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}je.DATE=ns,ns.NAME="DATE";class po extends nr{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}je.TimeOfDay=po,po.NAME="TimeOfDay";class zs extends nr{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}je.DateTime=zs,zs.NAME="DateTime";class Ts extends nr{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}je.Duration=Ts,Ts.NAME="Duration";class Ys extends nr{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}je.TIME=Ys,Ys.NAME="TIME";class Fr{constructor({name:o="",optional:u=!1}={}){this.name=o,this.optional=u}}class Xi extends Fr{constructor({value:o=[],...u}={}){super(u),this.value=o}}class Si extends Fr{constructor({value:o=new Fr,local:u=!1,..._}={}){super(_),this.value=o,this.local=u}}class Cs{constructor({data:o=ft}={}){this.dataView=h.vJ.toUint8Array(o)}get data(){return this.dataView.slice().buffer}set data(o){this.dataView=h.vJ.toUint8Array(o)}fromBER(o,u,_){const T=u+_;return this.dataView=h.vJ.toUint8Array(o).subarray(u,T),T}toBER(o){return this.dataView.slice().buffer}}function Hn(Le,o,u){if(u instanceof Xi){for(let D=0;D<u.value.length;D++)if(Hn(Le,o,u.value[D]).verified)return{verified:!0,result:Le};{const D={verified:!1,result:{error:"Wrong values for Choice type"}};return u.hasOwnProperty(me)&&(D.name=u.name),D}}if(u instanceof Fr)return u.hasOwnProperty(me)&&(Le[u.name]=o),{verified:!0,result:Le};if(!(Le instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(o instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(u instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("idBlock"in u))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("fromBER"in u.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!("toBER"in u.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const _=u.idBlock.toBER(!1);if(0===_.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===u.idBlock.fromBER(_,0,_.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===u.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(u.idBlock.tagClass!==o.idBlock.tagClass)return{verified:!1,result:Le};if(!1===u.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(u.idBlock.tagNumber!==o.idBlock.tagNumber)return{verified:!1,result:Le};if(!1===u.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(u.idBlock.isConstructed!==o.idBlock.isConstructed)return{verified:!1,result:Le};if(!("isHexOnly"in u.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(u.idBlock.isHexOnly!==o.idBlock.isHexOnly)return{verified:!1,result:Le};if(u.idBlock.isHexOnly){if(!(we in u.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const D=u.idBlock.valueHexView,F=o.idBlock.valueHexView;if(D.length!==F.length)return{verified:!1,result:Le};for(let re=0;re<D.length;re++)if(D[re]!==F[1])return{verified:!1,result:Le}}if(u.name&&(u.name=u.name.replace(/^\s+|\s+$/g,""),u.name&&(Le[u.name]=o)),u instanceof je.Constructed){let D=0,F={verified:!1,result:{error:"Unknown error"}},re=u.valueBlock.value.length;if(re>0&&u.valueBlock.value[0]instanceof Si&&(re=o.valueBlock.value.length),0===re)return{verified:!0,result:Le};if(0===o.valueBlock.value.length&&0!==u.valueBlock.value.length){let ce=!0;for(let Ee=0;Ee<u.valueBlock.value.length;Ee++)ce=ce&&(u.valueBlock.value[Ee].optional||!1);return ce?{verified:!0,result:Le}:(u.name&&(u.name=u.name.replace(/^\s+|\s+$/g,""),u.name&&delete Le[u.name]),Le.error="Inconsistent object length",{verified:!1,result:Le})}for(let ce=0;ce<re;ce++)if(ce-D>=o.valueBlock.value.length){if(!1===u.valueBlock.value[ce].optional){const Ee={verified:!1,result:Le};return Le.error="Inconsistent length between ASN.1 data and schema",u.name&&(u.name=u.name.replace(/^\s+|\s+$/g,""),u.name&&(delete Le[u.name],Ee.name=u.name)),Ee}}else if(u.valueBlock.value[0]instanceof Si){if(F=Hn(Le,o.valueBlock.value[ce],u.valueBlock.value[0].value),!1===F.verified){if(!u.valueBlock.value[0].optional)return u.name&&(u.name=u.name.replace(/^\s+|\s+$/g,""),u.name&&delete Le[u.name]),F;D++}if(me in u.valueBlock.value[0]&&u.valueBlock.value[0].name.length>0){let Ee={};Ee="local"in u.valueBlock.value[0]&&u.valueBlock.value[0].local?o:Le,typeof Ee[u.valueBlock.value[0].name]>"u"&&(Ee[u.valueBlock.value[0].name]=[]),Ee[u.valueBlock.value[0].name].push(o.valueBlock.value[ce])}}else if(F=Hn(Le,o.valueBlock.value[ce-D],u.valueBlock.value[ce]),!1===F.verified){if(!u.valueBlock.value[ce].optional)return u.name&&(u.name=u.name.replace(/^\s+|\s+$/g,""),u.name&&delete Le[u.name]),F;D++}if(!1===F.verified){const ce={verified:!1,result:Le};return u.name&&(u.name=u.name.replace(/^\s+|\s+$/g,""),u.name&&(delete Le[u.name],ce.name=u.name)),ce}return{verified:!0,result:Le}}if(u.primitiveSchema&&we in o.valueBlock){const D=Ct(o.valueBlock.valueHexView);if(-1===D.offset){const F={verified:!1,result:D.result};return u.name&&(u.name=u.name.replace(/^\s+|\s+$/g,""),u.name&&(delete Le[u.name],F.name=u.name)),F}return Hn(Le,D.result,u.primitiveSchema)}return{verified:!0,result:Le}}class Rn{constructor(o={}){this.algorithmId=y(o,"algorithmId",Rn.defaultValues("algorithmId")),"algorithmParams"in o&&(this.algorithmParams=y(o,"algorithmParams",Rn.defaultValues("algorithmParams"))),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"algorithmId":return"";case"algorithmParams":return new Fr;default:throw new Error(`Invalid member name for AlgorithmIdentifier class: ${o}`)}}static compareWithDefault(o,u){switch(o){case"algorithmId":return""===u;case"algorithmParams":return u instanceof Fr;default:throw new Error(`Invalid member name for AlgorithmIdentifier class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",optional:u.optional||!1,value:[new ut({name:u.algorithmIdentifier||""}),new Fr({name:u.algorithmParams||"",optional:!0})]})}fromSchema(o){J(o,["algorithm","params"]);const u=Hn(o,o,Rn.schema({names:{algorithmIdentifier:"algorithm",algorithmParams:"params"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for AlgorithmIdentifier");this.algorithmId=u.result.algorithm.valueBlock.toString(),"params"in u.result&&(this.algorithmParams=u.result.params)}toSchema(){const o=[];return o.push(new ut({value:this.algorithmId})),"algorithmParams"in this&&!(this.algorithmParams instanceof Fr)&&o.push(this.algorithmParams),new Kt({value:o})}toJSON(){const o={algorithmId:this.algorithmId};return"algorithmParams"in this&&!(this.algorithmParams instanceof Fr)&&(o.algorithmParams=this.algorithmParams.toJSON()),o}isEqual(o){return o instanceof Rn&&this.algorithmId===o.algorithmId&&("algorithmParams"in this?"algorithmParams"in o&&JSON.stringify(this.algorithmParams)===JSON.stringify(o.algorithmParams):!("algorithmParams"in o))}}let mr=(()=>{class Le{static register(u,_,T){this.namedCurves[u.toLowerCase()]=this.namedCurves[_]={name:u,id:_,size:T}}static find(u){return this.namedCurves[u.toLowerCase()]||null}}return Le.namedCurves={},Le})();mr.register("P-256","1.2.840.10045.3.1.7",32),mr.register("P-384","1.3.132.0.34",48),mr.register("P-521","1.3.132.0.35",66),mr.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),mr.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),mr.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64);class Sr{constructor(o={}){this.x=y(o,"x",Sr.defaultValues("x")),this.y=y(o,"y",Sr.defaultValues("y")),this.namedCurve=y(o,"namedCurve",Sr.defaultValues("namedCurve")),"schema"in o&&this.fromSchema(o.schema),"json"in o&&this.fromJSON(o.json)}static defaultValues(o){switch(o){case"x":case"y":return new ArrayBuffer(0);case"namedCurve":return"";default:throw new Error(`Invalid member name for ECCPublicKey class: ${o}`)}}static compareWithDefault(o,u){switch(o){case"x":case"y":return O(u,Sr.defaultValues(o));case"namedCurve":return""===u;default:throw new Error(`Invalid member name for ECCPublicKey class: ${o}`)}}static schema(o={}){return new Cs}fromSchema(o){if(!(o instanceof ArrayBuffer))throw new Error("Object's schema was not verified against input data for ECPublicKey");if(4!==new Uint8Array(o)[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");const _=mr.find(this.namedCurve);if(!_)throw new Error(`Incorrect curve OID: ${this.namedCurve}`);const T=_.size;if(o.byteLength!==2*T+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.x=o.slice(1,T+1),this.y=o.slice(1+T,2*T+1)}toSchema(){return new Cs({data:g(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const o=mr.find(this.namedCurve);return{crv:o?o.name:this.namedCurve,x:M(V(this.x),!0,!0,!1),y:M(V(this.y),!0,!0,!1)}}fromJSON(o){let u=0;if(!("crv"in o))throw new Error('Absent mandatory parameter "crv"');{const _=mr.find(o.crv);_&&(this.namedCurve=_.id,u=_.size)}if(!("x"in o))throw new Error('Absent mandatory parameter "x"');{const _=Q(B(o.x,!0));if(_.byteLength<u){this.x=new ArrayBuffer(u);const T=new Uint8Array(this.x),D=new Uint8Array(_);T.set(D,1)}else this.x=_.slice(0,u)}if(!("y"in o))throw new Error('Absent mandatory parameter "y"');{const _=Q(B(o.y,!0));if(_.byteLength<u){this.y=new ArrayBuffer(u);const T=new Uint8Array(this.y),D=new Uint8Array(_);T.set(D,1)}else this.y=_.slice(0,u)}}}class as{constructor(o={}){this.modulus=y(o,"modulus",as.defaultValues("modulus")),this.publicExponent=y(o,"publicExponent",as.defaultValues("publicExponent")),"schema"in o&&this.fromSchema(o.schema),"json"in o&&this.fromJSON(o.json)}static defaultValues(o){switch(o){case"modulus":case"publicExponent":return new Ft;default:throw new Error(`Invalid member name for RSAPublicKey class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Ft({name:u.modulus||""}),new Ft({name:u.publicExponent||""})]})}fromSchema(o){J(o,["modulus","publicExponent"]);const u=Hn(o,o,as.schema({names:{modulus:"modulus",publicExponent:"publicExponent"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for RSAPublicKey");this.modulus=u.result.modulus.convertFromDER(256),this.publicExponent=u.result.publicExponent}toSchema(){return new Kt({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:M(V(this.modulus.valueBlock.valueHex),!0,!0,!0),e:M(V(this.publicExponent.valueBlock.valueHex),!0,!0,!0)}}fromJSON(o){if(!("n"in o))throw new Error('Absent mandatory parameter "n"');{const u=Q(B(o.n,!0));this.modulus=new Ft({valueHex:u.slice(0,Math.pow(2,fe(u.byteLength)))})}if(!("e"in o))throw new Error('Absent mandatory parameter "e"');this.publicExponent=new Ft({valueHex:Q(B(o.e,!0)).slice(0,3)})}}class Qr{constructor(o={}){this.algorithm=y(o,"algorithm",Qr.defaultValues("algorithm")),this.subjectPublicKey=y(o,"subjectPublicKey",Qr.defaultValues("subjectPublicKey")),"parsedKey"in o&&(this.parsedKey=y(o,"parsedKey",Qr.defaultValues("parsedKey"))),"schema"in o&&this.fromSchema(o.schema),"json"in o&&this.fromJSON(o.json)}static defaultValues(o){switch(o){case"algorithm":return new Rn;case"subjectPublicKey":return new jt;default:throw new Error(`Invalid member name for PublicKeyInfo class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[Rn.schema(u.algorithm||{}),new jt({name:u.subjectPublicKey||""})]})}fromSchema(o){J(o,["algorithm","subjectPublicKey"]);const u=Hn(o,o,Qr.schema({names:{algorithm:{names:{blockName:"algorithm"}},subjectPublicKey:"subjectPublicKey"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for PublicKeyInfo");switch(this.algorithm=new Rn({schema:u.result.algorithm}),this.subjectPublicKey=u.result.subjectPublicKey,this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===ut.blockName())try{this.parsedKey=new Sr({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHex})}catch{}break;case"1.2.840.113549.1.1.1":{const _=ht(this.subjectPublicKey.valueBlock.valueHex);if(-1!==_.offset)try{this.parsedKey=new as({schema:_.result})}catch{}}}}toSchema(){return new Kt({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!("parsedKey"in this))return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};const o={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":o.kty="EC";break;case"1.2.840.113549.1.1.1":o.kty="RSA"}const u=this.parsedKey.toJSON();for(const _ of Object.keys(u))o[_]=u[_];return o}fromJSON(o){if("kty"in o){switch(o.kty.toUpperCase()){case"EC":this.parsedKey=new Sr({json:o}),this.algorithm=new Rn({algorithmId:"1.2.840.10045.2.1",algorithmParams:new ut({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new as({json:o}),this.algorithm=new Rn({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new Tt});break;default:throw new Error(`Invalid value for "kty" parameter: ${o.kty}`)}this.subjectPublicKey=new jt({valueHex:this.parsedKey.toSchema().toBER(!1)})}}importKey(o){let u=Promise.resolve();const _=this;if(typeof o>"u")return Promise.reject("Need to provide publicKey input parameter");const T=xs();return typeof T>"u"?Promise.reject("Unable to create WebCrypto object"):(u=u.then(()=>T.exportKey("spki",o)),u=u.then(D=>{const F=ht(D);try{_.fromSchema(F.result)}catch{return Promise.reject("Error during initializing object from schema")}},D=>Promise.reject(`Error during exporting public key: ${D}`)),u)}}class Zr{constructor(o={}){this.type=y(o,"type",Zr.defaultValues("type")),this.values=y(o,"values",Zr.defaultValues("values")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"type":return"";case"values":return[];default:throw new Error(`Invalid member name for Attribute class: ${o}`)}}static compareWithDefault(o,u){switch(o){case"type":return""===u;case"values":return 0===u.length;default:throw new Error(`Invalid member name for Attribute class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new ut({name:u.type||""}),new Ei({name:u.setName||"",value:[new Si({name:u.values||"",value:new Fr})]})]})}fromSchema(o){J(o,["type","values"]);const u=Hn(o,o,Zr.schema({names:{type:"type",values:"values"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for Attribute");this.type=u.result.type.valueBlock.toString(),this.values=u.result.values}toSchema(){return new Kt({value:[new ut({value:this.type}),new Ei({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,o=>o.toJSON())}}}class gr{constructor(o={}){this.version=y(o,"version",gr.defaultValues("version")),this.privateKey=y(o,"privateKey",gr.defaultValues("privateKey")),"namedCurve"in o&&(this.namedCurve=y(o,"namedCurve",gr.defaultValues("namedCurve"))),"publicKey"in o&&(this.publicKey=y(o,"publicKey",gr.defaultValues("publicKey"))),"schema"in o&&this.fromSchema(o.schema),"json"in o&&this.fromJSON(o.json)}static defaultValues(o){switch(o){case"version":return 1;case"privateKey":return new it;case"namedCurve":return"";case"publicKey":return new Sr;default:throw new Error(`Invalid member name for ECCPrivateKey class: ${o}`)}}static compareWithDefault(o,u){switch(o){case"version":return u===gr.defaultValues(o);case"privateKey":return u.isEqual(gr.defaultValues(o));case"namedCurve":return""===u;case"publicKey":return Sr.compareWithDefault("namedCurve",u.namedCurve)&&Sr.compareWithDefault("x",u.x)&&Sr.compareWithDefault("y",u.y);default:throw new Error(`Invalid member name for ECCPrivateKey class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Ft({name:u.version||""}),new it({name:u.privateKey||""}),new L({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new ut({name:u.namedCurve||""})]}),new L({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new jt({name:u.publicKey||""})]})]})}fromSchema(o){J(o,["version","privateKey","namedCurve","publicKey"]);const u=Hn(o,o,gr.schema({names:{version:"version",privateKey:"privateKey",namedCurve:"namedCurve",publicKey:"publicKey"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for ECPrivateKey");if(this.version=u.result.version.valueBlock.valueDec,this.privateKey=u.result.privateKey,"namedCurve"in u.result&&(this.namedCurve=u.result.namedCurve.valueBlock.toString()),"publicKey"in u.result){const _={schema:u.result.publicKey.valueBlock.valueHex};"namedCurve"in this&&(_.namedCurve=this.namedCurve),this.publicKey=new Sr(_)}}toSchema(){const o=[new Ft({value:this.version}),this.privateKey];return"namedCurve"in this&&o.push(new L({idBlock:{tagClass:3,tagNumber:0},value:[new ut({value:this.namedCurve})]})),"publicKey"in this&&o.push(new L({idBlock:{tagClass:3,tagNumber:1},value:[new jt({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new Kt({value:o})}toJSON(){if(!("namedCurve"in this)||gr.compareWithDefault("namedCurve",this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');let o="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":o="P-256";break;case"1.3.132.0.34":o="P-384";break;case"1.3.132.0.35":o="P-521"}const u={crv:o,d:M(V(this.privateKey.valueBlock.valueHex),!0,!0,!1)};if("publicKey"in this){const _=this.publicKey.toJSON();u.x=_.x,u.y=_.y}return u}fromJSON(o){let u=0;if(!("crv"in o))throw new Error('Absent mandatory parameter "crv"');switch(o.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",u=32;break;case"P-384":this.namedCurve="1.3.132.0.34",u=48;break;case"P-521":this.namedCurve="1.3.132.0.35",u=66}if(!("d"in o))throw new Error('Absent mandatory parameter "d"');{const _=Q(B(o.d,!0));if(_.byteLength<u){const T=new ArrayBuffer(u),D=new Uint8Array(T),F=new Uint8Array(_);D.set(F,1),this.privateKey=new it({valueHex:T})}else this.privateKey=new it({valueHex:_.slice(0,u)})}"x"in o&&"y"in o&&(this.publicKey=new Sr({json:o}))}}class ls{constructor(o={}){this.prime=y(o,"prime",ls.defaultValues("prime")),this.exponent=y(o,"exponent",ls.defaultValues("exponent")),this.coefficient=y(o,"coefficient",ls.defaultValues("coefficient")),"schema"in o&&this.fromSchema(o.schema),"json"in o&&this.fromJSON(o.json)}static defaultValues(o){switch(o){case"prime":case"exponent":case"coefficient":return new Ft;default:throw new Error(`Invalid member name for OtherPrimeInfo class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Ft({name:u.prime||""}),new Ft({name:u.exponent||""}),new Ft({name:u.coefficient||""})]})}fromSchema(o){J(o,["prime","exponent","coefficient"]);const u=Hn(o,o,ls.schema({names:{prime:"prime",exponent:"exponent",coefficient:"coefficient"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for OtherPrimeInfo");this.prime=u.result.prime.convertFromDER(),this.exponent=u.result.exponent.convertFromDER(),this.coefficient=u.result.coefficient.convertFromDER()}toSchema(){return new Kt({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:M(V(this.prime.valueBlock.valueHex),!0,!0),d:M(V(this.exponent.valueBlock.valueHex),!0,!0),t:M(V(this.coefficient.valueBlock.valueHex),!0,!0)}}fromJSON(o){if(!("r"in o))throw new Error('Absent mandatory parameter "r"');if(this.prime=new Ft({valueHex:Q(B(o.r,!0))}),!("d"in o))throw new Error('Absent mandatory parameter "d"');if(this.exponent=new Ft({valueHex:Q(B(o.d,!0))}),!("t"in o))throw new Error('Absent mandatory parameter "t"');this.coefficient=new Ft({valueHex:Q(B(o.t,!0))})}}class zi{constructor(o={}){this.version=y(o,"version",zi.defaultValues("version")),this.modulus=y(o,"modulus",zi.defaultValues("modulus")),this.publicExponent=y(o,"publicExponent",zi.defaultValues("publicExponent")),this.privateExponent=y(o,"privateExponent",zi.defaultValues("privateExponent")),this.prime1=y(o,"prime1",zi.defaultValues("prime1")),this.prime2=y(o,"prime2",zi.defaultValues("prime2")),this.exponent1=y(o,"exponent1",zi.defaultValues("exponent1")),this.exponent2=y(o,"exponent2",zi.defaultValues("exponent2")),this.coefficient=y(o,"coefficient",zi.defaultValues("coefficient")),"otherPrimeInfos"in o&&(this.otherPrimeInfos=y(o,"otherPrimeInfos",zi.defaultValues("otherPrimeInfos"))),"schema"in o&&this.fromSchema(o.schema),"json"in o&&this.fromJSON(o.json)}static defaultValues(o){switch(o){case"version":return 0;case"modulus":case"publicExponent":case"privateExponent":case"prime1":case"prime2":case"exponent1":case"exponent2":case"coefficient":return new Ft;case"otherPrimeInfos":return[];default:throw new Error(`Invalid member name for RSAPrivateKey class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Ft({name:u.version||""}),new Ft({name:u.modulus||""}),new Ft({name:u.publicExponent||""}),new Ft({name:u.privateExponent||""}),new Ft({name:u.prime1||""}),new Ft({name:u.prime2||""}),new Ft({name:u.exponent1||""}),new Ft({name:u.exponent2||""}),new Ft({name:u.coefficient||""}),new Kt({optional:!0,value:[new Si({name:u.otherPrimeInfosName||"",value:ls.schema(u.otherPrimeInfo||{})})]})]})}fromSchema(o){J(o,["version","modulus","publicExponent","privateExponent","prime1","prime2","exponent1","exponent2","coefficient","otherPrimeInfos"]);const u=Hn(o,o,zi.schema({names:{version:"version",modulus:"modulus",publicExponent:"publicExponent",privateExponent:"privateExponent",prime1:"prime1",prime2:"prime2",exponent1:"exponent1",exponent2:"exponent2",coefficient:"coefficient",otherPrimeInfo:{names:{blockName:"otherPrimeInfos"}}}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for RSAPrivateKey");this.version=u.result.version.valueBlock.valueDec,this.modulus=u.result.modulus.convertFromDER(256),this.publicExponent=u.result.publicExponent,this.privateExponent=u.result.privateExponent.convertFromDER(256),this.prime1=u.result.prime1.convertFromDER(128),this.prime2=u.result.prime2.convertFromDER(128),this.exponent1=u.result.exponent1.convertFromDER(128),this.exponent2=u.result.exponent2.convertFromDER(128),this.coefficient=u.result.coefficient.convertFromDER(128),"otherPrimeInfos"in u.result&&(this.otherPrimeInfos=Array.from(u.result.otherPrimeInfos,_=>new ls({schema:_})))}toSchema(){const o=[];return o.push(new Ft({value:this.version})),o.push(this.modulus.convertToDER()),o.push(this.publicExponent),o.push(this.privateExponent.convertToDER()),o.push(this.prime1.convertToDER()),o.push(this.prime2.convertToDER()),o.push(this.exponent1.convertToDER()),o.push(this.exponent2.convertToDER()),o.push(this.coefficient.convertToDER()),"otherPrimeInfos"in this&&o.push(new Kt({value:Array.from(this.otherPrimeInfos,u=>u.toSchema())})),new Kt({value:o})}toJSON(){const o={n:M(V(this.modulus.valueBlock.valueHex),!0,!0,!0),e:M(V(this.publicExponent.valueBlock.valueHex),!0,!0,!0),d:M(V(this.privateExponent.valueBlock.valueHex),!0,!0,!0),p:M(V(this.prime1.valueBlock.valueHex),!0,!0,!0),q:M(V(this.prime2.valueBlock.valueHex),!0,!0,!0),dp:M(V(this.exponent1.valueBlock.valueHex),!0,!0,!0),dq:M(V(this.exponent2.valueBlock.valueHex),!0,!0,!0),qi:M(V(this.coefficient.valueBlock.valueHex),!0,!0,!0)};return"otherPrimeInfos"in this&&(o.oth=Array.from(this.otherPrimeInfos,u=>u.toJSON())),o}fromJSON(o){if(!("n"in o))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new Ft({valueHex:Q(B(o.n,!0,!0))}),!("e"in o))throw new Error('Absent mandatory parameter "e"');if(this.publicExponent=new Ft({valueHex:Q(B(o.e,!0,!0))}),!("d"in o))throw new Error('Absent mandatory parameter "d"');if(this.privateExponent=new Ft({valueHex:Q(B(o.d,!0,!0))}),!("p"in o))throw new Error('Absent mandatory parameter "p"');if(this.prime1=new Ft({valueHex:Q(B(o.p,!0,!0))}),!("q"in o))throw new Error('Absent mandatory parameter "q"');if(this.prime2=new Ft({valueHex:Q(B(o.q,!0,!0))}),!("dp"in o))throw new Error('Absent mandatory parameter "dp"');if(this.exponent1=new Ft({valueHex:Q(B(o.dp,!0,!0))}),!("dq"in o))throw new Error('Absent mandatory parameter "dq"');if(this.exponent2=new Ft({valueHex:Q(B(o.dq,!0,!0))}),!("qi"in o))throw new Error('Absent mandatory parameter "qi"');this.coefficient=new Ft({valueHex:Q(B(o.qi,!0,!0))}),"oth"in o&&(this.otherPrimeInfos=Array.from(o.oth,u=>new ls({json:u})))}}class _r{constructor(o={}){this.version=y(o,"version",_r.defaultValues("version")),this.privateKeyAlgorithm=y(o,"privateKeyAlgorithm",_r.defaultValues("privateKeyAlgorithm")),this.privateKey=y(o,"privateKey",_r.defaultValues("privateKey")),"attributes"in o&&(this.attributes=y(o,"attributes",_r.defaultValues("attributes"))),"parsedKey"in o&&(this.parsedKey=y(o,"parsedKey",_r.defaultValues("parsedKey"))),"schema"in o&&this.fromSchema(o.schema),"json"in o&&this.fromJSON(o.json)}static defaultValues(o){switch(o){case"version":return 0;case"privateKeyAlgorithm":return new Rn;case"privateKey":return new it;case"attributes":return[];case"parsedKey":return{};default:throw new Error(`Invalid member name for PrivateKeyInfo class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Ft({name:u.version||""}),Rn.schema(u.privateKeyAlgorithm||{}),new it({name:u.privateKey||""}),new L({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Si({name:u.attributes||"",value:Zr.schema()})]})]})}fromSchema(o){J(o,["version","privateKeyAlgorithm","privateKey","attributes"]);const u=Hn(o,o,_r.schema({names:{version:"version",privateKeyAlgorithm:{names:{blockName:"privateKeyAlgorithm"}},privateKey:"privateKey",attributes:"attributes"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for PrivateKeyInfo");switch(this.version=u.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new Rn({schema:u.result.privateKeyAlgorithm}),this.privateKey=u.result.privateKey,"attributes"in u.result&&(this.attributes=Array.from(u.result.attributes,_=>new Zr({schema:_}))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const _=ht(this.privateKey.valueBlock.valueHex);-1!==_.offset&&(this.parsedKey=new zi({schema:_.result}))}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof ut){const _=ht(this.privateKey.valueBlock.valueHex);-1!==_.offset&&(this.parsedKey=new gr({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:_.result}))}}}toSchema(){const o=[new Ft({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return"attributes"in this&&o.push(new L({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,u=>u.toSchema())})),new Kt({value:o})}toJSON(){if(!("parsedKey"in this)){const _={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return"attributes"in this&&(_.attributes=Array.from(this.attributes,T=>T.toJSON())),_}const o={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":o.kty="EC";break;case"1.2.840.113549.1.1.1":o.kty="RSA"}const u=this.parsedKey.toJSON();for(const _ of Object.keys(u))o[_]=u[_];return o}fromJSON(o){if("kty"in o){switch(o.kty.toUpperCase()){case"EC":this.parsedKey=new gr({json:o}),this.privateKeyAlgorithm=new Rn({algorithmId:"1.2.840.10045.2.1",algorithmParams:new ut({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new zi({json:o}),this.privateKeyAlgorithm=new Rn({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new Tt});break;default:throw new Error(`Invalid value for "kty" parameter: ${o.kty}`)}this.privateKey=new it({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}class cs{constructor(o={}){if(this.contentType=y(o,"contentType",cs.defaultValues("contentType")),this.contentEncryptionAlgorithm=y(o,"contentEncryptionAlgorithm",cs.defaultValues("contentEncryptionAlgorithm")),"encryptedContent"in o&&(this.encryptedContent=o.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&!1===this.encryptedContent.idBlock.isConstructed)){const u=new it({idBlock:{isConstructed:!0},isConstructed:!0});let _=0,T=this.encryptedContent.valueBlock.valueHex.byteLength;for(;T>0;){const D=new Uint8Array(this.encryptedContent.valueBlock.valueHex,_,_+1024>this.encryptedContent.valueBlock.valueHex.byteLength?this.encryptedContent.valueBlock.valueHex.byteLength-_:1024),F=new ArrayBuffer(D.length),re=new Uint8Array(F);for(let ce=0;ce<re.length;ce++)re[ce]=D[ce];u.valueBlock.value.push(new it({valueHex:F})),T-=D.length,_+=D.length}this.encryptedContent=u}"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"contentType":return"";case"contentEncryptionAlgorithm":return new Rn;case"encryptedContent":return new it;default:throw new Error(`Invalid member name for EncryptedContentInfo class: ${o}`)}}static compareWithDefault(o,u){switch(o){case"contentType":return""===u;case"contentEncryptionAlgorithm":return""===u.algorithmId&&!("algorithmParams"in u);case"encryptedContent":return u.isEqual(cs.defaultValues(o));default:throw new Error(`Invalid member name for EncryptedContentInfo class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new ut({name:u.contentType||""}),Rn.schema(u.contentEncryptionAlgorithm||{}),new Xi({value:[new L({name:u.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0},value:[new Si({value:new it})]}),new Ke({name:u.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(o){J(o,["contentType","contentEncryptionAlgorithm","encryptedContent"]);const u=Hn(o,o,cs.schema({names:{contentType:"contentType",contentEncryptionAlgorithm:{names:{blockName:"contentEncryptionAlgorithm"}},encryptedContent:"encryptedContent"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for EncryptedContentInfo");this.contentType=u.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new Rn({schema:u.result.contentEncryptionAlgorithm}),"encryptedContent"in u.result&&(this.encryptedContent=u.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){const o={isIndefiniteForm:!1},u=[];if(u.push(new ut({value:this.contentType})),u.push(this.contentEncryptionAlgorithm.toSchema()),"encryptedContent"in this){o.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const _=this.encryptedContent;_.idBlock.tagClass=3,_.idBlock.tagNumber=0,_.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,u.push(_)}return new Kt({lenBlock:o,value:u})}toJSON(){const o={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return"encryptedContent"in this&&(o.encryptedContent=this.encryptedContent.toJSON()),o}}class vr{constructor(o={}){this.hashAlgorithm=y(o,"hashAlgorithm",vr.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=y(o,"maskGenAlgorithm",vr.defaultValues("maskGenAlgorithm")),this.saltLength=y(o,"saltLength",vr.defaultValues("saltLength")),this.trailerField=y(o,"trailerField",vr.defaultValues("trailerField")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"hashAlgorithm":return new Rn({algorithmId:"1.3.14.3.2.26",algorithmParams:new Tt});case"maskGenAlgorithm":return new Rn({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new Rn({algorithmId:"1.3.14.3.2.26",algorithmParams:new Tt}).toSchema()});case"saltLength":return 20;case"trailerField":return 1;default:throw new Error(`Invalid member name for RSASSAPSSParams class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new L({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[Rn.schema(u.hashAlgorithm||{})]}),new L({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[Rn.schema(u.maskGenAlgorithm||{})]}),new L({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new Ft({name:u.saltLength||""})]}),new L({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new Ft({name:u.trailerField||""})]})]})}fromSchema(o){J(o,["hashAlgorithm","maskGenAlgorithm","saltLength","trailerField"]);const u=Hn(o,o,vr.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},saltLength:"saltLength",trailerField:"trailerField"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for RSASSAPSSParams");"hashAlgorithm"in u.result&&(this.hashAlgorithm=new Rn({schema:u.result.hashAlgorithm})),"maskGenAlgorithm"in u.result&&(this.maskGenAlgorithm=new Rn({schema:u.result.maskGenAlgorithm})),"saltLength"in u.result&&(this.saltLength=u.result.saltLength.valueBlock.valueDec),"trailerField"in u.result&&(this.trailerField=u.result.trailerField.valueBlock.valueDec)}toSchema(){const o=[];return this.hashAlgorithm.isEqual(vr.defaultValues("hashAlgorithm"))||o.push(new L({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(vr.defaultValues("maskGenAlgorithm"))||o.push(new L({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==vr.defaultValues("saltLength")&&o.push(new L({idBlock:{tagClass:3,tagNumber:2},value:[new Ft({value:this.saltLength})]})),this.trailerField!==vr.defaultValues("trailerField")&&o.push(new L({idBlock:{tagClass:3,tagNumber:3},value:[new Ft({value:this.trailerField})]})),new Kt({value:o})}toJSON(){const o={};return this.hashAlgorithm.isEqual(vr.defaultValues("hashAlgorithm"))||(o.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(vr.defaultValues("maskGenAlgorithm"))||(o.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==vr.defaultValues("saltLength")&&(o.saltLength=this.saltLength),this.trailerField!==vr.defaultValues("trailerField")&&(o.trailerField=this.trailerField),o}}class Ni{constructor(o={}){this.salt=y(o,"salt",Ni.defaultValues("salt")),this.iterationCount=y(o,"iterationCount",Ni.defaultValues("iterationCount")),"keyLength"in o&&(this.keyLength=y(o,"keyLength",Ni.defaultValues("keyLength"))),"prf"in o&&(this.prf=y(o,"prf",Ni.defaultValues("prf"))),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"salt":return{};case"iterationCount":return-1;case"keyLength":return 0;case"prf":return new Rn({algorithmId:"1.3.14.3.2.26",algorithmParams:new Tt});default:throw new Error(`Invalid member name for PBKDF2Params class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Xi({value:[new it({name:u.saltPrimitive||""}),Rn.schema(u.saltConstructed||{})]}),new Ft({name:u.iterationCount||""}),new Ft({name:u.keyLength||"",optional:!0}),Rn.schema(u.prf||{names:{optional:!0}})]})}fromSchema(o){J(o,["salt","iterationCount","keyLength","prf"]);const u=Hn(o,o,Ni.schema({names:{saltPrimitive:"salt",saltConstructed:{names:{blockName:"salt"}},iterationCount:"iterationCount",keyLength:"keyLength",prf:{names:{blockName:"prf",optional:!0}}}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for PBKDF2Params");this.salt=u.result.salt,this.iterationCount=u.result.iterationCount.valueBlock.valueDec,"keyLength"in u.result&&(this.keyLength=u.result.keyLength.valueBlock.valueDec),"prf"in u.result&&(this.prf=new Rn({schema:u.result.prf}))}toSchema(){const o=[];return o.push(this.salt),o.push(new Ft({value:this.iterationCount})),"keyLength"in this&&Ni.defaultValues("keyLength")!==this.keyLength&&o.push(new Ft({value:this.keyLength})),"prf"in this&&!1===Ni.defaultValues("prf").isEqual(this.prf)&&o.push(this.prf.toSchema()),new Kt({value:o})}toJSON(){const o={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return"keyLength"in this&&Ni.defaultValues("keyLength")!==this.keyLength&&(o.keyLength=this.keyLength),"prf"in this&&!1===Ni.defaultValues("prf").isEqual(this.prf)&&(o.prf=this.prf.toJSON()),o}}class zr{constructor(o={}){this.keyDerivationFunc=y(o,"keyDerivationFunc",zr.defaultValues("keyDerivationFunc")),this.encryptionScheme=y(o,"encryptionScheme",zr.defaultValues("encryptionScheme")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"keyDerivationFunc":case"encryptionScheme":return new Rn;default:throw new Error(`Invalid member name for PBES2Params class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[Rn.schema(u.keyDerivationFunc||{}),Rn.schema(u.encryptionScheme||{})]})}fromSchema(o){J(o,["keyDerivationFunc","encryptionScheme"]);const u=Hn(o,o,zr.schema({names:{keyDerivationFunc:{names:{blockName:"keyDerivationFunc"}},encryptionScheme:{names:{blockName:"encryptionScheme"}}}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for PBES2Params");this.keyDerivationFunc=new Rn({schema:u.result.keyDerivationFunc}),this.encryptionScheme=new Rn({schema:u.result.encryptionScheme})}toSchema(){return new Kt({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}function Wr(Le,o,u,_,T,D){let F,re;const ce=[];switch(o.toUpperCase()){case"SHA-1":F=20,re=64;break;case"SHA-256":F=32,re=64;break;case"SHA-384":F=48,re=128;break;case"SHA-512":F=64,re=128;break;default:throw new Error("Unsupported hashing algorithm")}const Ee=new Uint8Array(_),dt=new ArrayBuffer(2*_.byteLength+2),wt=new Uint8Array(dt);for(let Or=0;Or<Ee.length;Or++)wt[2*Or]=0,wt[2*Or+1]=Ee[Or];wt[wt.length-2]=0,wt[wt.length-1]=0,_=dt.slice(0);const kt=new ArrayBuffer(re),sn=new Uint8Array(kt);for(let Or=0;Or<kt.byteLength;Or++)sn[Or]=3;const Sn=T.byteLength,Dn=re*Math.ceil(Sn/re),qi=new ArrayBuffer(Dn),Ur=new Uint8Array(qi),Ns=new Uint8Array(T);for(let Or=0;Or<Dn;Or++)Ur[Or]=Ns[Or%Sn];const vs=_.byteLength,Fs=re*Math.ceil(vs/re),Nr=new ArrayBuffer(Fs),Os=new Uint8Array(Nr),rl=new Uint8Array(_);for(let Or=0;Or<Fs;Or++)Os[Or]=rl[Or%vs];let qa=new ArrayBuffer(qi.byteLength+Nr.byteLength),Ll=new Uint8Array(qa);Ll.set(Ur),Ll.set(Os,Ur.length);const Pu=Math.ceil((u>>3)/F);let Lo=Promise.resolve(qa);for(let Or=0;Or<=Pu;Or++){Lo=Lo.then(Sa=>{const $r=new ArrayBuffer(kt.byteLength+Sa.byteLength),vl=new Uint8Array($r);return vl.set(sn),vl.set(Ll,sn.length),$r});for(let Sa=0;Sa<D;Sa++)Lo=Lo.then($r=>Le.digest({name:o},new Uint8Array($r)));Lo=Lo.then(Sa=>{const $r=new ArrayBuffer(re),vl=new Uint8Array($r);for(let sl=0;sl<$r.byteLength;sl++)vl[sl]=Sa[sl%Sa.length];const Lu=Math.ceil(Sn/re)+Math.ceil(vs/re),Ul=[];let Co=0,Uu=re;for(let sl=0;sl<Lu;sl++){const Gc=Array.from(new Uint8Array(qa.slice(Co,Co+Uu)));Co+=re,Co+re>qa.byteLength&&(Uu=qa.byteLength-Co);let Bl=511;for(let xa=$r.byteLength-1;xa>=0;xa--)Bl>>=8,Bl+=vl[xa]+Gc[xa],Gc[xa]=255&Bl;Ul.push(...Gc)}return qa=new ArrayBuffer(Ul.length),Ll=new Uint8Array(qa),Ll.set(Ul),ce.push(...new Uint8Array(Sa)),qa})}return Lo=Lo.then(()=>{const Or=new ArrayBuffer(u>>3);return new Uint8Array(Or).set(new Uint8Array(ce).slice(0,u>>3)),Or}),Lo}class Ls{constructor(o={}){this.crypto=y(o,"crypto",{}),this.subtle=y(o,"subtle",{}),this.name=y(o,"name","")}importKey(o,u,_,T,D){let F={};switch(u instanceof Uint8Array&&(u=u.buffer),o.toLowerCase()){case"raw":return this.subtle.importKey("raw",u,_,T,D);case"spki":{const re=ht(u);if(-1===re.offset)return Promise.reject("Incorrect keyData");const ce=new Qr;try{ce.fromSchema(re.result)}catch{return Promise.reject("Incorrect keyData")}switch(_.name.toUpperCase()){case"RSA-PSS":switch(_.hash.name.toUpperCase()){case"SHA-1":F.alg="PS1";break;case"SHA-256":F.alg="PS256";break;case"SHA-384":F.alg="PS384";break;case"SHA-512":F.alg="PS512";break;default:return Promise.reject(`Incorrect hash algorithm: ${_.hash.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(D=["verify"],F.kty="RSA",F.ext=T,F.key_ops=D,"1.2.840.113549.1.1.1"!==ce.algorithm.algorithmId)return Promise.reject(`Incorrect public key algorithm: ${ce.algorithm.algorithmId}`);if(!("alg"in F))switch(_.hash.name.toUpperCase()){case"SHA-1":F.alg="RS1";break;case"SHA-256":F.alg="RS256";break;case"SHA-384":F.alg="RS384";break;case"SHA-512":F.alg="RS512";break;default:return Promise.reject(`Incorrect hash algorithm: ${_.hash.name.toUpperCase()}`)}const Ee=ce.toJSON();for(const dt of Object.keys(Ee))F[dt]=Ee[dt]}break;case"ECDSA":D=["verify"];case"ECDH":{if(F={kty:"EC",ext:T,key_ops:D},"1.2.840.10045.2.1"!==ce.algorithm.algorithmId)return Promise.reject(`Incorrect public key algorithm: ${ce.algorithm.algorithmId}`);const Ee=ce.toJSON();for(const dt of Object.keys(Ee))F[dt]=Ee[dt]}break;case"RSA-OAEP":{if(F.kty="RSA",F.ext=T,F.key_ops=D,"safari"===this.name.toLowerCase())F.alg="RSA-OAEP";else switch(_.hash.name.toUpperCase()){case"SHA-1":F.alg="RSA-OAEP";break;case"SHA-256":F.alg="RSA-OAEP-256";break;case"SHA-384":F.alg="RSA-OAEP-384";break;case"SHA-512":F.alg="RSA-OAEP-512";break;default:return Promise.reject(`Incorrect hash algorithm: ${_.hash.name.toUpperCase()}`)}const Ee=ce.toJSON();for(const dt of Object.keys(Ee))F[dt]=Ee[dt]}break;case"RSAES-PKCS1-V1_5":{F.kty="RSA",F.ext=T,F.key_ops=D,F.alg="PS1";const Ee=ce.toJSON();for(const dt of Object.keys(Ee))F[dt]=Ee[dt]}break;default:return Promise.reject(`Incorrect algorithm name: ${_.name.toUpperCase()}`)}}break;case"pkcs8":{const re=new _r,ce=ht(u);if(-1===ce.offset)return Promise.reject("Incorrect keyData");try{re.fromSchema(ce.result)}catch{return Promise.reject("Incorrect keyData")}if(!("parsedKey"in re))return Promise.reject("Incorrect keyData");switch(_.name.toUpperCase()){case"RSA-PSS":switch(_.hash.name.toUpperCase()){case"SHA-1":F.alg="PS1";break;case"SHA-256":F.alg="PS256";break;case"SHA-384":F.alg="PS384";break;case"SHA-512":F.alg="PS512";break;default:return Promise.reject(`Incorrect hash algorithm: ${_.hash.name.toUpperCase()}`)}case"RSASSA-PKCS1-V1_5":{if(D=["sign"],F.kty="RSA",F.ext=T,F.key_ops=D,"1.2.840.113549.1.1.1"!==re.privateKeyAlgorithm.algorithmId)return Promise.reject(`Incorrect private key algorithm: ${re.privateKeyAlgorithm.algorithmId}`);if(!("alg"in F))switch(_.hash.name.toUpperCase()){case"SHA-1":F.alg="RS1";break;case"SHA-256":F.alg="RS256";break;case"SHA-384":F.alg="RS384";break;case"SHA-512":F.alg="RS512";break;default:return Promise.reject(`Incorrect hash algorithm: ${_.hash.name.toUpperCase()}`)}const Ee=re.toJSON();for(const dt of Object.keys(Ee))F[dt]=Ee[dt]}break;case"ECDSA":D=["sign"];case"ECDH":{if(F={kty:"EC",ext:T,key_ops:D},"1.2.840.10045.2.1"!==re.privateKeyAlgorithm.algorithmId)return Promise.reject(`Incorrect algorithm: ${re.privateKeyAlgorithm.algorithmId}`);const Ee=re.toJSON();for(const dt of Object.keys(Ee))F[dt]=Ee[dt]}break;case"RSA-OAEP":{if(F.kty="RSA",F.ext=T,F.key_ops=D,"safari"===this.name.toLowerCase())F.alg="RSA-OAEP";else switch(_.hash.name.toUpperCase()){case"SHA-1":F.alg="RSA-OAEP";break;case"SHA-256":F.alg="RSA-OAEP-256";break;case"SHA-384":F.alg="RSA-OAEP-384";break;case"SHA-512":F.alg="RSA-OAEP-512";break;default:return Promise.reject(`Incorrect hash algorithm: ${_.hash.name.toUpperCase()}`)}const Ee=re.toJSON();for(const dt of Object.keys(Ee))F[dt]=Ee[dt]}break;case"RSAES-PKCS1-V1_5":{D=["decrypt"],F.kty="RSA",F.ext=T,F.key_ops=D,F.alg="PS1";const Ee=re.toJSON();for(const dt of Object.keys(Ee))F[dt]=Ee[dt]}break;default:return Promise.reject(`Incorrect algorithm name: ${_.name.toUpperCase()}`)}}break;case"jwk":F=u;break;default:return Promise.reject(`Incorrect format: ${o}`)}return"safari"===this.name.toLowerCase()?Promise.resolve().then(()=>this.subtle.importKey("jwk",Q(JSON.stringify(F)),_,T,D)).then(re=>re,()=>this.subtle.importKey("jwk",F,_,T,D)):this.subtle.importKey("jwk",F,_,T,D)}exportKey(o,u){let _=this.subtle.exportKey("jwk",u);switch("safari"===this.name.toLowerCase()&&(_=_.then(T=>T instanceof ArrayBuffer?JSON.parse(V(T)):T)),o.toLowerCase()){case"raw":return this.subtle.exportKey("raw",u);case"spki":_=_.then(T=>{const D=new Qr;try{D.fromJSON(T)}catch{return Promise.reject("Incorrect key data")}return D.toSchema().toBER(!1)});break;case"pkcs8":_=_.then(T=>{const D=new _r;try{D.fromJSON(T)}catch{return Promise.reject("Incorrect key data")}return D.toSchema().toBER(!1)});break;case"jwk":break;default:return Promise.reject(`Incorrect format: ${o}`)}return _}convert(o,u,_,T,D,F){switch(o.toLowerCase()){case"raw":switch(u.toLowerCase()){case"raw":return Promise.resolve(_);case"spki":return Promise.resolve().then(()=>this.importKey("raw",_,T,D,F)).then(re=>this.exportKey("spki",re));case"pkcs8":return Promise.resolve().then(()=>this.importKey("raw",_,T,D,F)).then(re=>this.exportKey("pkcs8",re));case"jwk":return Promise.resolve().then(()=>this.importKey("raw",_,T,D,F)).then(re=>this.exportKey("jwk",re));default:return Promise.reject(`Incorrect outputFormat: ${u}`)}case"spki":switch(u.toLowerCase()){case"raw":return Promise.resolve().then(()=>this.importKey("spki",_,T,D,F)).then(re=>this.exportKey("raw",re));case"spki":return Promise.resolve(_);case"pkcs8":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"jwk":return Promise.resolve().then(()=>this.importKey("spki",_,T,D,F)).then(re=>this.exportKey("jwk",re));default:return Promise.reject(`Incorrect outputFormat: ${u}`)}case"pkcs8":switch(u.toLowerCase()){case"raw":return Promise.resolve().then(()=>this.importKey("pkcs8",_,T,D,F)).then(re=>this.exportKey("raw",re));case"spki":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"pkcs8":return Promise.resolve(_);case"jwk":return Promise.resolve().then(()=>this.importKey("pkcs8",_,T,D,F)).then(re=>this.exportKey("jwk",re));default:return Promise.reject(`Incorrect outputFormat: ${u}`)}case"jwk":switch(u.toLowerCase()){case"raw":return Promise.resolve().then(()=>this.importKey("jwk",_,T,D,F)).then(re=>this.exportKey("raw",re));case"spki":return Promise.resolve().then(()=>this.importKey("jwk",_,T,D,F)).then(re=>this.exportKey("spki",re));case"pkcs8":return Promise.resolve().then(()=>this.importKey("jwk",_,T,D,F)).then(re=>this.exportKey("pkcs8",re));case"jwk":return Promise.resolve(_);default:return Promise.reject(`Incorrect outputFormat: ${u}`)}default:return Promise.reject(`Incorrect inputFormat: ${o}`)}}encrypt(...o){return this.subtle.encrypt(...o)}decrypt(...o){return this.subtle.decrypt(...o)}sign(...o){return this.subtle.sign(...o)}verify(...o){return this.subtle.verify(...o)}digest(...o){return this.subtle.digest(...o)}generateKey(...o){return this.subtle.generateKey(...o)}deriveKey(...o){return this.subtle.deriveKey(...o)}deriveBits(...o){return this.subtle.deriveBits(...o)}wrapKey(...o){return this.subtle.wrapKey(...o)}unwrapKey(...o){return this.subtle.unwrapKey(...o)}getRandomValues(o){if(!("getRandomValues"in this.crypto))throw new Error("No support for getRandomValues");return this.crypto.getRandomValues(o)}getAlgorithmByOID(o){switch(o){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}return{}}getOIDByAlgorithm(o){let u="";switch(o.name.toUpperCase()){case"RSAES-PKCS1-V1_5":u="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(o.hash.name.toUpperCase()){case"SHA-1":u="1.2.840.113549.1.1.5";break;case"SHA-256":u="1.2.840.113549.1.1.11";break;case"SHA-384":u="1.2.840.113549.1.1.12";break;case"SHA-512":u="1.2.840.113549.1.1.13"}break;case"RSA-PSS":u="1.2.840.113549.1.1.10";break;case"RSA-OAEP":u="1.2.840.113549.1.1.7";break;case"ECDSA":switch(o.hash.name.toUpperCase()){case"SHA-1":u="1.2.840.10045.4.1";break;case"SHA-256":u="1.2.840.10045.4.3.2";break;case"SHA-384":u="1.2.840.10045.4.3.3";break;case"SHA-512":u="1.2.840.10045.4.3.4"}break;case"ECDH":switch(o.kdf.toUpperCase()){case"SHA-1":u="1.3.133.16.840.63.0.2";break;case"SHA-256":u="1.3.132.1.11.1";break;case"SHA-384":u="1.3.132.1.11.2";break;case"SHA-512":u="1.3.132.1.11.3"}break;case"AES-CTR":case"AES-CMAC":case"CONCAT":case"HKDF":break;case"AES-CBC":switch(o.length){case 128:u="2.16.840.1.101.3.4.1.2";break;case 192:u="2.16.840.1.101.3.4.1.22";break;case 256:u="2.16.840.1.101.3.4.1.42"}break;case"AES-GCM":switch(o.length){case 128:u="2.16.840.1.101.3.4.1.6";break;case 192:u="2.16.840.1.101.3.4.1.26";break;case 256:u="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(o.length){case 128:u="2.16.840.1.101.3.4.1.4";break;case 192:u="2.16.840.1.101.3.4.1.24";break;case 256:u="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(o.length){case 128:u="2.16.840.1.101.3.4.1.5";break;case 192:u="2.16.840.1.101.3.4.1.25";break;case 256:u="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(o.hash.name.toUpperCase()){case"SHA-1":u="1.2.840.113549.2.7";break;case"SHA-256":u="1.2.840.113549.2.9";break;case"SHA-384":u="1.2.840.113549.2.10";break;case"SHA-512":u="1.2.840.113549.2.11"}break;case"DH":u="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":u="1.3.14.3.2.26";break;case"SHA-256":u="2.16.840.1.101.3.4.2.1";break;case"SHA-384":u="2.16.840.1.101.3.4.2.2";break;case"SHA-512":u="2.16.840.1.101.3.4.2.3";break;case"PBKDF2":u="1.2.840.113549.1.5.12";break;case"P-256":u="1.2.840.10045.3.1.7";break;case"P-384":u="1.3.132.0.34";break;case"P-521":u="1.3.132.0.35"}return u}getAlgorithmParameters(o,u){let _={algorithm:{},usages:[]};switch(o.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(u.toLowerCase()){case"generatekey":_={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":_={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(u.toLowerCase()){case"sign":case"verify":_={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":_={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":_={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(u.toLowerCase()){case"encrypt":case"decrypt":_={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":_={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":_={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(u.toLowerCase()){case"generatekey":_={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":_={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":_={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(u.toLowerCase()){case"exportkey":case"importkey":case"generatekey":_={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":_={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(u.toLowerCase()){case"importkey":case"exportkey":case"generatekey":_={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":_={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(u.toLowerCase()){case"importkey":case"exportkey":case"generatekey":_={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":_={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(u.toLowerCase()){case"importkey":case"exportkey":case"generatekey":_={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":_={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(u.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":_={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(u.toLowerCase()){case"sign":case"verify":_={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":_={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":if("derivekey"!==u.toLowerCase())return{algorithm:{name:"HKDF"},usages:[]};_={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;case"PBKDF2":if("derivekey"!==u.toLowerCase())return{algorithm:{name:"PBKDF2"},usages:[]};_={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]}}return _}getHashAlgorithm(o){let u="";switch(o.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":u="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":u="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":u="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":u="SHA-512";break;case"1.2.840.113549.1.1.10":try{const _=new vr({schema:o.algorithmParams});if("hashAlgorithm"in _){const T=this.getAlgorithmByOID(_.hashAlgorithm.algorithmId);if(!("name"in T))return"";u=T.name}else u="SHA-1"}catch{}}return u}encryptEncryptedContentInfo(o){if(!(o instanceof Object))return Promise.reject('Parameters must have type "Object"');if(!("password"in o))return Promise.reject('Absent mandatory parameter "password"');if(!("contentEncryptionAlgorithm"in o))return Promise.reject('Absent mandatory parameter "contentEncryptionAlgorithm"');if(!("hmacHashAlgorithm"in o))return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if(!("iterationCount"in o))return Promise.reject('Absent mandatory parameter "iterationCount"');if(!("contentToEncrypt"in o))return Promise.reject('Absent mandatory parameter "contentToEncrypt"');if(!("contentType"in o))return Promise.reject('Absent mandatory parameter "contentType"');const u=this.getOIDByAlgorithm(o.contentEncryptionAlgorithm);if(""===u)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');const _=this.getOIDByAlgorithm({name:"PBKDF2"});if(""===_)return Promise.reject("Can not find OID for PBKDF2");const T=this.getOIDByAlgorithm({name:"HMAC",hash:{name:o.hmacHashAlgorithm}});if(""===T)return Promise.reject(`Incorrect value for "hmacHashAlgorithm": ${o.hmacHashAlgorithm}`);let D=Promise.resolve();const F=new ArrayBuffer(16),re=new Uint8Array(F);this.getRandomValues(re);const ce=new ArrayBuffer(64),Ee=new Uint8Array(ce);this.getRandomValues(Ee);const dt=new Uint8Array(o.contentToEncrypt),wt=new Ni({salt:new it({valueHex:ce}),iterationCount:o.iterationCount,prf:new Rn({algorithmId:T,algorithmParams:new Tt})});return D=D.then(()=>{const kt=new Uint8Array(o.password);return this.importKey("raw",kt,"PBKDF2",!1,["deriveKey"])},kt=>Promise.reject(kt)),D=D.then(kt=>this.deriveKey({name:"PBKDF2",hash:{name:o.hmacHashAlgorithm},salt:Ee,iterations:o.iterationCount},kt,o.contentEncryptionAlgorithm,!1,["encrypt"]),kt=>Promise.reject(kt)),D=D.then(kt=>this.encrypt({name:o.contentEncryptionAlgorithm.name,iv:re},kt,dt),kt=>Promise.reject(kt)),D=D.then(kt=>{const sn=new zr({keyDerivationFunc:new Rn({algorithmId:_,algorithmParams:wt.toSchema()}),encryptionScheme:new Rn({algorithmId:u,algorithmParams:new it({valueHex:F})})});return new cs({contentType:o.contentType,contentEncryptionAlgorithm:new Rn({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:sn.toSchema()}),encryptedContent:new it({valueHex:kt})})},kt=>Promise.reject(kt)),D}decryptEncryptedContentInfo(o){if(!(o instanceof Object))return Promise.reject('Parameters must have type "Object"');if(!("password"in o))return Promise.reject('Absent mandatory parameter "password"');if(!("encryptedContentInfo"in o))return Promise.reject('Absent mandatory parameter "encryptedContentInfo"');if("1.2.840.113549.1.5.13"!==o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)return Promise.reject(`Unknown "contentEncryptionAlgorithm": ${o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId}`);let _,T,u=Promise.resolve();try{_=new zr({schema:o.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch{return Promise.reject('Incorrectly encoded "pbes2Parameters"')}try{T=new Ni({schema:_.keyDerivationFunc.algorithmParams})}catch{return Promise.reject('Incorrectly encoded "pbkdf2Params"')}const D=this.getAlgorithmByOID(_.encryptionScheme.algorithmId);if(!("name"in D))return Promise.reject(`Incorrect OID for "contentEncryptionAlgorithm": ${_.encryptionScheme.algorithmId}`);const re=new Uint8Array(_.encryptionScheme.algorithmParams.valueBlock.valueHex),Ee=new Uint8Array(T.salt.valueBlock.valueHex),dt=T.iterationCount;let wt="SHA-1";if("prf"in T){const kt=this.getAlgorithmByOID(T.prf.algorithmId);if(!("name"in kt))return Promise.reject("Incorrect OID for HMAC hash algorithm");wt=kt.hash.name}return u=u.then(()=>this.importKey("raw",o.password,"PBKDF2",!1,["deriveKey"]),kt=>Promise.reject(kt)),u=u.then(kt=>this.deriveKey({name:"PBKDF2",hash:{name:wt},salt:Ee,iterations:dt},kt,D,!1,["decrypt"]),kt=>Promise.reject(kt)),u=u.then(kt=>{let sn=new ArrayBuffer(0);if(!1===o.encryptedContentInfo.encryptedContent.idBlock.isConstructed)sn=o.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else for(const Sn of o.encryptedContentInfo.encryptedContent.valueBlock.value)sn=g(sn,Sn.valueBlock.valueHex);return this.decrypt({name:D.name,iv:re},kt,sn)},kt=>Promise.reject(kt)),u}stampDataWithPassword(o){if(!(o instanceof Object))return Promise.reject('Parameters must have type "Object"');if(!("password"in o))return Promise.reject('Absent mandatory parameter "password"');if(!("hashAlgorithm"in o))return Promise.reject('Absent mandatory parameter "hashAlgorithm"');if(!("salt"in o))return Promise.reject('Absent mandatory parameter "iterationCount"');if(!("iterationCount"in o))return Promise.reject('Absent mandatory parameter "salt"');if(!("contentToStamp"in o))return Promise.reject('Absent mandatory parameter "contentToStamp"');let u;switch(o.hashAlgorithm.toLowerCase()){case"sha-1":u=160;break;case"sha-256":u=256;break;case"sha-384":u=384;break;case"sha-512":u=512;break;default:return Promise.reject(`Incorrect "parameters.hashAlgorithm" parameter: ${o.hashAlgorithm}`)}let _=Promise.resolve();const T={name:"HMAC",length:u,hash:{name:o.hashAlgorithm}};return _=_.then(()=>Wr(this,o.hashAlgorithm,u,o.password,o.salt,o.iterationCount)),_=_.then(D=>this.importKey("raw",new Uint8Array(D),T,!1,["sign"])),_=_.then(D=>this.sign(T,D,new Uint8Array(o.contentToStamp)),D=>Promise.reject(D)),_}verifyDataStampedWithPassword(o){if(!(o instanceof Object))return Promise.reject('Parameters must have type "Object"');if(!("password"in o))return Promise.reject('Absent mandatory parameter "password"');if(!("hashAlgorithm"in o))return Promise.reject('Absent mandatory parameter "hashAlgorithm"');if(!("salt"in o))return Promise.reject('Absent mandatory parameter "iterationCount"');if(!("iterationCount"in o))return Promise.reject('Absent mandatory parameter "salt"');if(!("contentToVerify"in o))return Promise.reject('Absent mandatory parameter "contentToVerify"');if(!("signatureToVerify"in o))return Promise.reject('Absent mandatory parameter "signatureToVerify"');let u;switch(o.hashAlgorithm.toLowerCase()){case"sha-1":u=160;break;case"sha-256":u=256;break;case"sha-384":u=384;break;case"sha-512":u=512;break;default:return Promise.reject(`Incorrect "parameters.hashAlgorithm" parameter: ${o.hashAlgorithm}`)}let _=Promise.resolve();const T={name:"HMAC",length:u,hash:{name:o.hashAlgorithm}};return _=_.then(()=>Wr(this,o.hashAlgorithm,u,o.password,o.salt,o.iterationCount)),_=_.then(D=>this.importKey("raw",new Uint8Array(D),T,!1,["verify"])),_=_.then(D=>this.verify(T,D,new Uint8Array(o.signatureToVerify),new Uint8Array(o.contentToVerify)),D=>Promise.reject(D)),_}getSignatureParameters(o,u="SHA-1"){if(""===this.getOIDByAlgorithm({name:u}))return Promise.reject(`Unsupported hash algorithm: ${u}`);const T=new Rn,D=this.getAlgorithmParameters(o.algorithm.name,"sign");switch(D.algorithm.hash.name=u,o.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":T.algorithmId=this.getOIDByAlgorithm(D.algorithm);break;case"RSA-PSS":{switch(u.toUpperCase()){case"SHA-256":D.algorithm.saltLength=32;break;case"SHA-384":D.algorithm.saltLength=48;break;case"SHA-512":D.algorithm.saltLength=64}const F={};if("SHA-1"!==u.toUpperCase()){const ce=this.getOIDByAlgorithm({name:u});if(""===ce)return Promise.reject(`Unsupported hash algorithm: ${u}`);F.hashAlgorithm=new Rn({algorithmId:ce,algorithmParams:new Tt}),F.maskGenAlgorithm=new Rn({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:F.hashAlgorithm.toSchema()})}20!==D.algorithm.saltLength&&(F.saltLength=D.algorithm.saltLength);const re=new vr(F);T.algorithmId="1.2.840.113549.1.1.10",T.algorithmParams=re.toSchema()}break;default:return Promise.reject(`Unsupported signature algorithm: ${o.algorithm.name}`)}return Promise.resolve().then(()=>({signatureAlgorithm:T,parameters:D}))}signWithPrivateKey(o,u,_){return this.sign(_.algorithm,u,new Uint8Array(o)).then(T=>("ECDSA"===_.algorithm.name&&(T=function Hs(Le){if(Le.byteLength%2!=0)return new ArrayBuffer(0);const o=Le.byteLength/2,u=new ArrayBuffer(o);new Uint8Array(u).set(new Uint8Array(Le,0,o));const T=new Ft({valueHex:u}),D=new ArrayBuffer(o);new Uint8Array(D).set(new Uint8Array(Le,o,o));const re=new Ft({valueHex:D});return new Kt({value:[T.convertToDER(),re.convertToDER()]}).toBER(!1)}(T)),T),T=>Promise.reject(`Signing error: ${T}`))}fillPublicKeyParameters(o,u){const _={},T=this.getHashAlgorithm(u);if(""===T)return Promise.reject(`Unsupported signature algorithm: ${u.algorithmId}`);let D;D="1.2.840.113549.1.1.10"===u.algorithmId?u.algorithmId:o.algorithm.algorithmId;const F=this.getAlgorithmByOID(D);if("name"in F==="")return Promise.reject(`Unsupported public key algorithm: ${u.algorithmId}`);if(_.algorithm=this.getAlgorithmParameters(F.name,"importkey"),"hash"in _.algorithm.algorithm&&(_.algorithm.algorithm.hash.name=T),"ECDSA"===F.name){let re=!1;if("algorithmParams"in o.algorithm&&"idBlock"in o.algorithm.algorithmParams&&1===o.algorithm.algorithmParams.idBlock.tagClass&&6===o.algorithm.algorithmParams.idBlock.tagNumber&&(re=!0),!1===re)return Promise.reject("Incorrect type for ECDSA public key parameters");const ce=this.getAlgorithmByOID(o.algorithm.algorithmParams.valueBlock.toString());if(!("name"in ce))return Promise.reject(`Unsupported named curve algorithm: ${o.algorithm.algorithmParams.valueBlock.toString()}`);_.algorithm.algorithm.namedCurve=ce.name}return _}getPublicKey(o,u,_=null){null===_&&(_=this.fillPublicKeyParameters(o,u));const D=o.toSchema().toBER(!1),F=new Uint8Array(D);return this.importKey("spki",F,_.algorithm.algorithm,!0,_.algorithm.usages)}verifyWithPublicKey(o,u,_,T,D=null){let F=Promise.resolve();if(null===D){if(""===(D=this.getHashAlgorithm(T)))return Promise.reject(`Unsupported signature algorithm: ${T.algorithmId}`);F=F.then(()=>this.getPublicKey(_,T))}else{const re={};let ce;ce="1.2.840.113549.1.1.10"===T.algorithmId?T.algorithmId:_.algorithm.algorithmId;const Ee=this.getAlgorithmByOID(ce);if("name"in Ee==="")return Promise.reject(`Unsupported public key algorithm: ${T.algorithmId}`);if(re.algorithm=this.getAlgorithmParameters(Ee.name,"importkey"),"hash"in re.algorithm.algorithm&&(re.algorithm.algorithm.hash.name=D),"ECDSA"===Ee.name){let dt=!1;if("algorithmParams"in _.algorithm&&"idBlock"in _.algorithm.algorithmParams&&1===_.algorithm.algorithmParams.idBlock.tagClass&&6===_.algorithm.algorithmParams.idBlock.tagNumber&&(dt=!0),!1===dt)return Promise.reject("Incorrect type for ECDSA public key parameters");const wt=this.getAlgorithmByOID(_.algorithm.algorithmParams.valueBlock.toString());if(!("name"in wt))return Promise.reject(`Unsupported named curve algorithm: ${_.algorithm.algorithmParams.valueBlock.toString()}`);re.algorithm.algorithm.namedCurve=wt.name}F=F.then(()=>this.getPublicKey(_,null,re))}return F=F.then(re=>{const ce=this.getAlgorithmParameters(re.algorithm.name,"verify");"hash"in ce.algorithm&&(ce.algorithm.hash.name=D);let Ee=u.valueBlock.valueHex;if("ECDSA"===re.algorithm.name&&(Ee=function Es(Le){if(!(Le instanceof Kt))return new ArrayBuffer(0);if(2!==Le.valueBlock.value.length)return new ArrayBuffer(0);if(!(Le.valueBlock.value[0]instanceof Ft))return new ArrayBuffer(0);if(!(Le.valueBlock.value[1]instanceof Ft))return new ArrayBuffer(0);const o=Le.valueBlock.value[0].convertFromDER(),u=Le.valueBlock.value[1].convertFromDER();switch(!0){case o.valueBlock.valueHex.byteLength<u.valueBlock.valueHex.byteLength:{if(u.valueBlock.valueHex.byteLength-o.valueBlock.valueHex.byteLength!=1)throw new Error("Incorrect DER integer decoding");const _=u.valueBlock.valueHex.byteLength,T=new Uint8Array(o.valueBlock.valueHex),D=new ArrayBuffer(_),F=new Uint8Array(D);return F.set(T,1),F[0]=0,g(D,u.valueBlock.valueHex)}case o.valueBlock.valueHex.byteLength>u.valueBlock.valueHex.byteLength:{if(o.valueBlock.valueHex.byteLength-u.valueBlock.valueHex.byteLength!=1)throw new Error("Incorrect DER integer decoding");const _=o.valueBlock.valueHex.byteLength,T=new Uint8Array(u.valueBlock.valueHex),D=new ArrayBuffer(_),F=new Uint8Array(D);return F.set(T,1),F[0]=0,g(o.valueBlock.valueHex,D)}default:if(o.valueBlock.valueHex.byteLength%2){const _=o.valueBlock.valueHex.byteLength+1,T=new Uint8Array(o.valueBlock.valueHex),D=new ArrayBuffer(_),F=new Uint8Array(D);F.set(T,1),F[0]=0;const re=new Uint8Array(u.valueBlock.valueHex),ce=new ArrayBuffer(_),Ee=new Uint8Array(ce);return Ee.set(re,1),Ee[0]=0,g(D,ce)}}return g(o.valueBlock.valueHex,u.valueBlock.valueHex)}(ht(Ee).result)),"RSA-PSS"===re.algorithm.name){let dt;try{dt=new vr({schema:T.algorithmParams})}catch(kt){return Promise.reject(kt)}ce.algorithm.saltLength="saltLength"in dt?dt.saltLength:20;let wt="SHA-1";if("hashAlgorithm"in dt){const kt=this.getAlgorithmByOID(dt.hashAlgorithm.algorithmId);if(!("name"in kt))return Promise.reject(`Unrecognized hash algorithm: ${dt.hashAlgorithm.algorithmId}`);wt=kt.name}ce.algorithm.hash.name=wt}return this.verify(ce.algorithm,re,new Uint8Array(Ee),new Uint8Array(o))}),F}}let Rr={name:"none",crypto:null,subtle:null};function Di(){if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){let Le;try{Le=global[process.pid].pkijs.engine}catch{throw new Error('Please call "setEngine" before call to "getEngine"')}return Le}return Rr}function xs(){const Le=Di();if(null!==Le.subtle)return Le.subtle}function Us(Le){let o=!1,u="";const _=Le.trim();for(let T=0;T<_.length;T++)32===_.charCodeAt(T)?!1===o&&(o=!0):(o&&(u+=" ",o=!1),u+=_[T]);return u.toLowerCase()}!function(){if(typeof self<"u"&&"crypto"in self){let o="webcrypto";const u=self.crypto;let _;if("webkitSubtle"in self.crypto){try{_=self.crypto.webkitSubtle}catch{_=self.crypto.subtle}o="safari"}"subtle"in self.crypto&&(_=self.crypto.subtle),Rr=typeof _>"u"?{name:o,crypto:u,subtle:null}:{name:o,crypto:u,subtle:new Ls({name:o,crypto:self.crypto,subtle:_})}}!function Ss(Le,o,u){if(typeof process<"u"&&"pid"in process&&typeof global<"u"&&typeof window>"u"){if(typeof global[process.pid]>"u")global[process.pid]={};else if("object"!=typeof global[process.pid])throw new Error(`Name global.${process.pid} already exists and it is not an object`);if(typeof global[process.pid].pkijs>"u")global[process.pid].pkijs={};else if("object"!=typeof global[process.pid].pkijs)throw new Error(`Name global.${process.pid}.pkijs already exists and it is not an object`);global[process.pid].pkijs.engine={name:Le,crypto:o,subtle:u}}else Rr.name!==Le&&(Rr={name:Le,crypto:o,subtle:u})}(Rr.name,Rr.crypto,Rr.subtle)}();class Ii{constructor(o={}){this.type=y(o,"type",Ii.defaultValues("type")),this.value=y(o,"value",Ii.defaultValues("value")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"type":return"";case"value":return{};default:throw new Error(`Invalid member name for AttributeTypeAndValue class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new ut({name:u.type||""}),new Fr({name:u.value||""})]})}static blockName(){return"AttributeTypeAndValue"}fromSchema(o){J(o,["type","typeValue"]);const u=Hn(o,o,Ii.schema({names:{type:"type",value:"typeValue"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for AttributeTypeAndValue");this.type=u.result.type.valueBlock.toString(),this.value=u.result.typeValue}toSchema(){return new Kt({value:[new ut({value:this.type}),this.value]})}toJSON(){const o={type:this.type};return o.value=0!==Object.keys(this.value).length?this.value.toJSON():this.value,o}isEqual(o){const u=[nr.blockName(),Yi.blockName(),Tr.blockName(),kr.blockName(),Ui.blockName(),Ve.blockName(),st.blockName(),nn.blockName(),bn.blockName(),wi.blockName(),oi.blockName(),pr.blockName()];if(o.constructor.blockName()===Ii.blockName()){if(this.type!==o.type)return!1;let _=[!1,!1];const T=this.value.constructor.blockName();for(const D of u)T===D&&(_[0]=!0),o.value.constructor.blockName()===D&&(_[1]=!0);if(_[0]^_[1])return!1;if(_=_[0]&&_[1],_){const D=Us(this.value.valueBlock.value),F=Us(o.value.valueBlock.value);if(0!==D.localeCompare(F))return!1}else if(!1===O(this.value.valueBeforeDecode,o.value.valueBeforeDecode))return!1;return!0}return o instanceof ArrayBuffer&&O(this.value.valueBeforeDecode,o)}}class Vi{constructor(o={}){this.typesAndValues=y(o,"typesAndValues",Vi.defaultValues("typesAndValues")),this.valueBeforeDecode=y(o,"valueBeforeDecode",Vi.defaultValues("valueBeforeDecode")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"typesAndValues":return[];case"valueBeforeDecode":return new ArrayBuffer(0);default:throw new Error(`Invalid member name for RelativeDistinguishedNames class: ${o}`)}}static compareWithDefault(o,u){switch(o){case"typesAndValues":return 0===u.length;case"valueBeforeDecode":return 0===u.byteLength;default:throw new Error(`Invalid member name for RelativeDistinguishedNames class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Si({name:u.repeatedSequence||"",value:new Ei({value:[new Si({name:u.repeatedSet||"",value:Ii.schema(u.typeAndValue||{})})]})})]})}fromSchema(o){J(o,["RDN","typesAndValues"]);const u=Hn(o,o,Vi.schema({names:{blockName:"RDN",repeatedSet:"typesAndValues"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for RelativeDistinguishedNames");"typesAndValues"in u.result&&(this.typesAndValues=Array.from(u.result.typesAndValues,_=>new Ii({schema:_}))),this.valueBeforeDecode=u.result.RDN.valueBeforeDecode}toSchema(){return 0===this.valueBeforeDecode.byteLength?new Kt({value:[new Ei({value:Array.from(this.typesAndValues,u=>u.toSchema())})]}):ht(this.valueBeforeDecode).result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,o=>o.toJSON())}}isEqual(o){if(o instanceof Vi){if(this.typesAndValues.length!==o.typesAndValues.length)return!1;for(const[u,_]of this.typesAndValues.entries())if(!1===_.isEqual(o.typesAndValues[u]))return!1;return!0}return o instanceof ArrayBuffer&&O(this.valueBeforeDecode,o)}}class xr{constructor(o={}){this.type=y(o,"type",xr.defaultValues("type")),this.value=y(o,"value",xr.defaultValues("value")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"type":return 0;case"value":return new Date(0,0,0);default:throw new Error(`Invalid member name for Time class: ${o}`)}}static schema(o={},u=!1){const _=y(o,"names",{});return new Xi({optional:u,value:[new Fi({name:_.utcTimeName||""}),new Zi({name:_.generalTimeName||""})]})}fromSchema(o){J(o,["utcTimeName","generalTimeName"]);const u=Hn(o,o,xr.schema({names:{utcTimeName:"utcTimeName",generalTimeName:"generalTimeName"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for Time");"utcTimeName"in u.result&&(this.type=0,this.value=u.result.utcTimeName.toDate()),"generalTimeName"in u.result&&(this.type=1,this.value=u.result.generalTimeName.toDate())}toSchema(){let o={};return 0===this.type&&(o=new Fi({valueDate:this.value})),1===this.type&&(o=new Zi({valueDate:this.value})),o}toJSON(){return{type:this.type,value:this.value}}}class Wn{constructor(o={}){this.attributes=y(o,"attributes",Wn.defaultValues("attributes")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){if("attributes"===o)return[];throw new Error(`Invalid member name for SubjectDirectoryAttributes class: ${o}`)}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Si({name:u.attributes||"",value:Zr.schema()})]})}fromSchema(o){J(o,["attributes"]);const u=Hn(o,o,Wn.schema({names:{attributes:"attributes"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for SubjectDirectoryAttributes");this.attributes=Array.from(u.result.attributes,_=>new Zr({schema:_}))}toSchema(){return new Kt({value:Array.from(this.attributes,o=>o.toSchema())})}toJSON(){return{attributes:Array.from(this.attributes,o=>o.toJSON())}}}class Js{constructor(o={}){"notBefore"in o&&(this.notBefore=y(o,"notBefore",Js.defaultValues("notBefore"))),"notAfter"in o&&(this.notAfter=y(o,"notAfter",Js.defaultValues("notAfter"))),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"notBefore":case"notAfter":return new Date;default:throw new Error(`Invalid member name for PrivateKeyUsagePeriod class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Ke({name:u.notBefore||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Ke({name:u.notAfter||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(o){J(o,["notBefore","notAfter"]);const u=Hn(o,o,Js.schema({names:{notBefore:"notBefore",notAfter:"notAfter"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for PrivateKeyUsagePeriod");if("notBefore"in u.result){const _=new Zi;_.fromBuffer(u.result.notBefore.valueBlock.valueHex),this.notBefore=_.toDate()}if("notAfter"in u.result){const _=new Zi({valueHex:u.result.notAfter.valueBlock.valueHex});_.fromBuffer(u.result.notAfter.valueBlock.valueHex),this.notAfter=_.toDate()}}toSchema(){const o=[];return"notBefore"in this&&o.push(new Ke({idBlock:{tagClass:3,tagNumber:0},valueHex:new Zi({valueDate:this.notBefore}).valueBlock.valueHex})),"notAfter"in this&&o.push(new Ke({idBlock:{tagClass:3,tagNumber:1},valueHex:new Zi({valueDate:this.notAfter}).valueBlock.valueHex})),new Kt({value:o})}toJSON(){const o={};return"notBefore"in this&&(o.notBefore=this.notBefore),"notAfter"in this&&(o.notAfter=this.notAfter),o}}function rr(Le={},o=!1){const u=y(Le,"names",{});return new Kt({optional:o,value:[new L({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:u.country_name||"",value:[new Xi({value:[new kr,new Ui]})]}),new L({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:u.administration_domain_name||"",value:[new Xi({value:[new kr,new Ui]})]}),new Ke({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:u.network_address||"",isHexOnly:!0}),new Ke({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:u.terminal_identifier||"",isHexOnly:!0}),new L({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:u.private_domain_name||"",value:[new Xi({value:[new kr,new Ui]})]}),new Ke({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:u.organization_name||"",isHexOnly:!0}),new Ke({optional:!0,name:u.numeric_user_identifier||"",idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new L({optional:!0,name:u.personal_name||"",idBlock:{tagClass:3,tagNumber:5},value:[new Ke({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new Ke({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new Ke({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new Ke({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new L({optional:!0,name:u.organizational_unit_names||"",idBlock:{tagClass:3,tagNumber:6},value:[new Si({value:new Ui})]})]})}function Kr(Le=!1){return new Kt({optional:Le,value:[new Ui,new Ui]})}function Ao(Le=!1){return new Ei({optional:Le,value:[new Ke({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new L({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Fr]})]})}class Ti{constructor(o={}){this.type=y(o,"type",Ti.defaultValues("type")),this.value=y(o,"value",Ti.defaultValues("value")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"type":return 9;case"value":return{};default:throw new Error(`Invalid member name for GeneralName class: ${o}`)}}static compareWithDefault(o,u){switch(o){case"type":return u===Ti.defaultValues(o);case"value":return 0===Object.keys(u).length;default:throw new Error(`Invalid member name for GeneralName class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Xi({value:[new L({idBlock:{tagClass:3,tagNumber:0},name:u.blockName||"",value:[new ut,new L({idBlock:{tagClass:3,tagNumber:0},value:[new Fr]})]}),new Ke({name:u.blockName||"",idBlock:{tagClass:3,tagNumber:1}}),new Ke({name:u.blockName||"",idBlock:{tagClass:3,tagNumber:2}}),new L({idBlock:{tagClass:3,tagNumber:3},name:u.blockName||"",value:[rr(u.builtInStandardAttributes||{},!1),Kr(!0),Ao(!0)]}),new L({idBlock:{tagClass:3,tagNumber:4},name:u.blockName||"",value:[Vi.schema(u.directoryName||{})]}),new L({idBlock:{tagClass:3,tagNumber:5},name:u.blockName||"",value:[new L({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Xi({value:[new Ve,new Ui,new Tr,new nr,new Yi]})]}),new L({idBlock:{tagClass:3,tagNumber:1},value:[new Xi({value:[new Ve,new Ui,new Tr,new nr,new Yi]})]})]}),new Ke({name:u.blockName||"",idBlock:{tagClass:3,tagNumber:6}}),new Ke({name:u.blockName||"",idBlock:{tagClass:3,tagNumber:7}}),new Ke({name:u.blockName||"",idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(o){J(o,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const u=Hn(o,o,Ti.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for GeneralName");switch(this.type=u.result.blockName.idBlock.tagNumber,this.type){case 0:case 3:this.value=u.result.blockName;break;case 1:case 2:case 6:{const _=u.result.blockName;_.idBlock.tagClass=1,_.idBlock.tagNumber=22;const T=_.toBER(!1);this.value=ht(T).result.valueBlock.value}break;case 4:this.value=new Vi({schema:u.result.directoryName});break;case 5:this.value=u.result.ediPartyName;break;case 7:this.value=new it({valueHex:u.result.blockName.valueBlock.valueHex});break;case 8:{const _=u.result.blockName;_.idBlock.tagClass=1,_.idBlock.tagNumber=6;const T=_.toBER(!1);this.value=ht(T).result.valueBlock.toString()}}}toSchema(){switch(this.type){case 0:case 3:case 5:return new L({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const o=new nn({value:this.value});return o.idBlock.tagClass=3,o.idBlock.tagNumber=this.type,o}case 4:return new L({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const o=this.value;return o.idBlock.tagClass=3,o.idBlock.tagNumber=this.type,o}case 8:{const o=new ut({value:this.value});return o.idBlock.tagClass=3,o.idBlock.tagNumber=this.type,o}default:return Ti.schema()}}toJSON(){const o={type:this.type,value:""};if("string"==typeof this.value)o.value=this.value;else try{o.value=this.value.toJSON()}catch{}return o}}class yr{constructor(o={}){this.altNames=y(o,"altNames",yr.defaultValues("altNames")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){if("altNames"===o)return[];throw new Error(`Invalid member name for AltName class: ${o}`)}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Si({name:u.altNames||"",value:Ti.schema()})]})}fromSchema(o){J(o,["altNames"]);const u=Hn(o,o,yr.schema({names:{altNames:"altNames"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for AltName");"altNames"in u.result&&(this.altNames=Array.from(u.result.altNames,_=>new Ti({schema:_})))}toSchema(){return new Kt({value:Array.from(this.altNames,o=>o.toSchema())})}toJSON(){return{altNames:Array.from(this.altNames,o=>o.toJSON())}}}class Vr{constructor(o={}){this.cA=y(o,"cA",!1),"pathLenConstraint"in o&&(this.pathLenConstraint=y(o,"pathLenConstraint",0)),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){if("cA"===o)return!1;throw new Error(`Invalid member name for BasicConstraints class: ${o}`)}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Yt({optional:!0,name:u.cA||""}),new Ft({optional:!0,name:u.pathLenConstraint||""})]})}fromSchema(o){J(o,["cA","pathLenConstraint"]);const u=Hn(o,o,Vr.schema({names:{cA:"cA",pathLenConstraint:"pathLenConstraint"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for BasicConstraints");"cA"in u.result&&(this.cA=u.result.cA.valueBlock.value),"pathLenConstraint"in u.result&&(this.pathLenConstraint=u.result.pathLenConstraint.valueBlock.isHexOnly?u.result.pathLenConstraint:u.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){const o=[];return this.cA!==Vr.defaultValues("cA")&&o.push(new Yt({value:this.cA})),"pathLenConstraint"in this&&o.push(this.pathLenConstraint instanceof Ft?this.pathLenConstraint:new Ft({value:this.pathLenConstraint})),new Kt({value:o})}toJSON(){const o={};return this.cA!==Vr.defaultValues("cA")&&(o.cA=this.cA),"pathLenConstraint"in this&&(o.pathLenConstraint=this.pathLenConstraint instanceof Ft?this.pathLenConstraint.toJSON():this.pathLenConstraint),o}}class Er{constructor(o={}){"distributionPoint"in o&&(this.distributionPoint=y(o,"distributionPoint",Er.defaultValues("distributionPoint"))),this.onlyContainsUserCerts=y(o,"onlyContainsUserCerts",Er.defaultValues("onlyContainsUserCerts")),this.onlyContainsCACerts=y(o,"onlyContainsCACerts",Er.defaultValues("onlyContainsCACerts")),"onlySomeReasons"in o&&(this.onlySomeReasons=y(o,"onlySomeReasons",Er.defaultValues("onlySomeReasons"))),this.indirectCRL=y(o,"indirectCRL",Er.defaultValues("indirectCRL")),this.onlyContainsAttributeCerts=y(o,"onlyContainsAttributeCerts",Er.defaultValues("onlyContainsAttributeCerts")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"distributionPoint":return[];case"onlyContainsUserCerts":case"onlyContainsCACerts":case"indirectCRL":case"onlyContainsAttributeCerts":return!1;case"onlySomeReasons":return 0;default:throw new Error(`Invalid member name for IssuingDistributionPoint class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new L({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Xi({value:[new L({name:u.distributionPoint||"",idBlock:{tagClass:3,tagNumber:0},value:[new Si({name:u.distributionPointNames||"",value:Ti.schema()})]}),new L({name:u.distributionPoint||"",idBlock:{tagClass:3,tagNumber:1},value:Vi.schema().valueBlock.value})]})]}),new Ke({name:u.onlyContainsUserCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Ke({name:u.onlyContainsCACerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new Ke({name:u.onlySomeReasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new Ke({name:u.indirectCRL||"",optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new Ke({name:u.onlyContainsAttributeCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(o){J(o,["distributionPoint","distributionPointNames","onlyContainsUserCerts","onlyContainsCACerts","onlySomeReasons","indirectCRL","onlyContainsAttributeCerts"]);const u=Hn(o,o,Er.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",onlyContainsUserCerts:"onlyContainsUserCerts",onlyContainsCACerts:"onlyContainsCACerts",onlySomeReasons:"onlySomeReasons",indirectCRL:"indirectCRL",onlyContainsAttributeCerts:"onlyContainsAttributeCerts"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for IssuingDistributionPoint");if("distributionPoint"in u.result)switch(!0){case 0===u.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(u.result.distributionPointNames,_=>new Ti({schema:_}));break;case 1===u.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=new Vi({schema:new Kt({value:u.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if("onlyContainsUserCerts"in u.result){const _=new Uint8Array(u.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==_[0]}if("onlyContainsCACerts"in u.result){const _=new Uint8Array(u.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==_[0]}if("onlySomeReasons"in u.result){const _=new Uint8Array(u.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=_[0]}if("indirectCRL"in u.result){const _=new Uint8Array(u.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==_[0]}if("onlyContainsAttributeCerts"in u.result){const _=new Uint8Array(u.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==_[0]}}toSchema(){const o=[];if("distributionPoint"in this){let u;this.distributionPoint instanceof Array?u=new L({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,_=>_.toSchema())}):(u=this.distributionPoint.toSchema(),u.idBlock.tagClass=3,u.idBlock.tagNumber=1),o.push(new L({idBlock:{tagClass:3,tagNumber:0},value:[u]}))}if(this.onlyContainsUserCerts!==Er.defaultValues("onlyContainsUserCerts")&&o.push(new Ke({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==Er.defaultValues("onlyContainsCACerts")&&o.push(new Ke({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),"onlySomeReasons"in this){const u=new ArrayBuffer(1);new Uint8Array(u)[0]=this.onlySomeReasons,o.push(new Ke({idBlock:{tagClass:3,tagNumber:3},valueHex:u}))}return this.indirectCRL!==Er.defaultValues("indirectCRL")&&o.push(new Ke({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==Er.defaultValues("onlyContainsAttributeCerts")&&o.push(new Ke({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new Kt({value:o})}toJSON(){const o={};return"distributionPoint"in this&&(o.distributionPoint=this.distributionPoint instanceof Array?Array.from(this.distributionPoint,u=>u.toJSON()):this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==Er.defaultValues("onlyContainsUserCerts")&&(o.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==Er.defaultValues("onlyContainsCACerts")&&(o.onlyContainsCACerts=this.onlyContainsCACerts),"onlySomeReasons"in this&&(o.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==Er.defaultValues("indirectCRL")&&(o.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==Er.defaultValues("onlyContainsAttributeCerts")&&(o.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),o}}class cn{constructor(o={}){this.names=y(o,"names",cn.defaultValues("names")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){if("names"===o)return[];throw new Error(`Invalid member name for GeneralNames class: ${o}`)}static schema(o={},u=!1){const _=y(o,"names",{});return new Kt({optional:u,name:_.blockName||"",value:[new Si({name:_.generalNames||"",value:Ti.schema()})]})}fromSchema(o){J(o,["names","generalNames"]);const u=Hn(o,o,cn.schema({names:{blockName:"names",generalNames:"generalNames"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for GeneralNames");this.names=Array.from(u.result.generalNames,_=>new Ti({schema:_}))}toSchema(){return new Kt({value:Array.from(this.names,o=>o.toSchema())})}toJSON(){return{names:Array.from(this.names,o=>o.toJSON())}}}class Kn{constructor(o={}){this.base=y(o,"base",Kn.defaultValues("base")),this.minimum=y(o,"minimum",Kn.defaultValues("minimum")),"maximum"in o&&(this.maximum=y(o,"maximum",Kn.defaultValues("maximum"))),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"base":return new Ti;case"minimum":case"maximum":return 0;default:throw new Error(`Invalid member name for GeneralSubtree class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[Ti.schema(u.base||{}),new L({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ft({name:u.minimum||""})]}),new L({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Ft({name:u.maximum||""})]})]})}fromSchema(o){J(o,["base","minimum","maximum"]);const u=Hn(o,o,Kn.schema({names:{base:{names:{blockName:"base"}},minimum:"minimum",maximum:"maximum"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for GeneralSubtree");this.base=new Ti({schema:u.result.base}),"minimum"in u.result&&(this.minimum=u.result.minimum.valueBlock.isHexOnly?u.result.minimum:u.result.minimum.valueBlock.valueDec),"maximum"in u.result&&(this.maximum=u.result.maximum.valueBlock.isHexOnly?u.result.maximum:u.result.maximum.valueBlock.valueDec)}toSchema(){const o=[];if(o.push(this.base.toSchema()),0!==this.minimum){let u=0;u=this.minimum instanceof Ft?this.minimum:new Ft({value:this.minimum}),o.push(new L({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[u]}))}if("maximum"in this){let u=0;u=this.maximum instanceof Ft?this.maximum:new Ft({value:this.maximum}),o.push(new L({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[u]}))}return new Kt({value:o})}toJSON(){const o={base:this.base.toJSON()};return 0!==this.minimum&&(o.minimum="number"==typeof this.minimum?this.minimum:this.minimum.toJSON()),"maximum"in this&&(o.maximum="number"==typeof this.maximum?this.maximum:this.maximum.toJSON()),o}}class fs{constructor(o={}){"permittedSubtrees"in o&&(this.permittedSubtrees=y(o,"permittedSubtrees",fs.defaultValues("permittedSubtrees"))),"excludedSubtrees"in o&&(this.excludedSubtrees=y(o,"excludedSubtrees",fs.defaultValues("excludedSubtrees"))),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"permittedSubtrees":case"excludedSubtrees":return[];default:throw new Error(`Invalid member name for NameConstraints class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new L({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Si({name:u.permittedSubtrees||"",value:Kn.schema()})]}),new L({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Si({name:u.excludedSubtrees||"",value:Kn.schema()})]})]})}fromSchema(o){J(o,["permittedSubtrees","excludedSubtrees"]);const u=Hn(o,o,fs.schema({names:{permittedSubtrees:"permittedSubtrees",excludedSubtrees:"excludedSubtrees"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for NameConstraints");"permittedSubtrees"in u.result&&(this.permittedSubtrees=Array.from(u.result.permittedSubtrees,_=>new Kn({schema:_}))),"excludedSubtrees"in u.result&&(this.excludedSubtrees=Array.from(u.result.excludedSubtrees,_=>new Kn({schema:_})))}toSchema(){const o=[];return"permittedSubtrees"in this&&o.push(new L({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,u=>u.toSchema())})),"excludedSubtrees"in this&&o.push(new L({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,u=>u.toSchema())})),new Kt({value:o})}toJSON(){const o={};return"permittedSubtrees"in this&&(o.permittedSubtrees=Array.from(this.permittedSubtrees,u=>u.toJSON())),"excludedSubtrees"in this&&(o.excludedSubtrees=Array.from(this.excludedSubtrees,u=>u.toJSON())),o}}class ei{constructor(o={}){"distributionPoint"in o&&(this.distributionPoint=y(o,"distributionPoint",ei.defaultValues("distributionPoint"))),"reasons"in o&&(this.reasons=y(o,"reasons",ei.defaultValues("reasons"))),"cRLIssuer"in o&&(this.cRLIssuer=y(o,"cRLIssuer",ei.defaultValues("cRLIssuer"))),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"distributionPoint":case"cRLIssuer":return[];case"reasons":return new jt;default:throw new Error(`Invalid member name for DistributionPoint class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new L({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Xi({value:[new L({name:u.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Si({name:u.distributionPointNames||"",value:Ti.schema()})]}),new L({name:u.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Vi.schema().valueBlock.value})]})]}),new Ke({name:u.reasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new L({name:u.cRLIssuer||"",optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new Si({name:u.cRLIssuerNames||"",value:Ti.schema()})]})]})}fromSchema(o){J(o,["distributionPoint","distributionPointNames","reasons","cRLIssuer","cRLIssuerNames"]);const u=Hn(o,o,ei.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",reasons:"reasons",cRLIssuer:"cRLIssuer",cRLIssuerNames:"cRLIssuerNames"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for DistributionPoint");"distributionPoint"in u.result&&(0===u.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(u.result.distributionPointNames,_=>new Ti({schema:_}))),1===u.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=new Vi({schema:new Kt({value:u.result.distributionPoint.valueBlock.value})}))),"reasons"in u.result&&(this.reasons=new jt({valueHex:u.result.reasons.valueBlock.valueHex})),"cRLIssuer"in u.result&&(this.cRLIssuer=Array.from(u.result.cRLIssuerNames,_=>new Ti({schema:_})))}toSchema(){const o=[];if("distributionPoint"in this){let u;u=new L(this.distributionPoint instanceof Array?{idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,_=>_.toSchema())}:{idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),o.push(new L({idBlock:{tagClass:3,tagNumber:0},value:[u]}))}return"reasons"in this&&o.push(new Ke({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHex})),"cRLIssuer"in this&&o.push(new L({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,u=>u.toSchema())})),new Kt({value:o})}toJSON(){const o={};return"distributionPoint"in this&&(o.distributionPoint=this.distributionPoint instanceof Array?Array.from(this.distributionPoint,u=>u.toJSON()):this.distributionPoint.toJSON()),"reasons"in this&&(o.reasons=this.reasons.toJSON()),"cRLIssuer"in this&&(o.cRLIssuer=Array.from(this.cRLIssuer,u=>u.toJSON())),o}}class Hi{constructor(o={}){this.distributionPoints=y(o,"distributionPoints",Hi.defaultValues("distributionPoints")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){if("distributionPoints"===o)return[];throw new Error(`Invalid member name for CRLDistributionPoints class: ${o}`)}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Si({name:u.distributionPoints||"",value:ei.schema()})]})}fromSchema(o){J(o,["distributionPoints"]);const u=Hn(o,o,Hi.schema({names:{distributionPoints:"distributionPoints"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for CRLDistributionPoints");this.distributionPoints=Array.from(u.result.distributionPoints,_=>new ei({schema:_}))}toSchema(){return new Kt({value:Array.from(this.distributionPoints,o=>o.toSchema())})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,o=>o.toJSON())}}}class Te{constructor(o={}){this.policyQualifierId=y(o,"policyQualifierId",Te.defaultValues("policyQualifierId")),this.qualifier=y(o,"qualifier",Te.defaultValues("qualifier")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"policyQualifierId":return"";case"qualifier":return new Fr;default:throw new Error(`Invalid member name for PolicyQualifierInfo class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new ut({name:u.policyQualifierId||""}),new Fr({name:u.qualifier||""})]})}fromSchema(o){J(o,["policyQualifierId","qualifier"]);const u=Hn(o,o,Te.schema({names:{policyQualifierId:"policyQualifierId",qualifier:"qualifier"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for PolicyQualifierInfo");this.policyQualifierId=u.result.policyQualifierId.valueBlock.toString(),this.qualifier=u.result.qualifier}toSchema(){return new Kt({value:[new ut({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}class he{constructor(o={}){this.policyIdentifier=y(o,"policyIdentifier",he.defaultValues("policyIdentifier")),"policyQualifiers"in o&&(this.policyQualifiers=y(o,"policyQualifiers",he.defaultValues("policyQualifiers"))),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"policyIdentifier":return"";case"policyQualifiers":return[];default:throw new Error(`Invalid member name for PolicyInformation class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new ut({name:u.policyIdentifier||""}),new Kt({optional:!0,value:[new Si({name:u.policyQualifiers||"",value:Te.schema()})]})]})}fromSchema(o){J(o,["policyIdentifier","policyQualifiers"]);const u=Hn(o,o,he.schema({names:{policyIdentifier:"policyIdentifier",policyQualifiers:"policyQualifiers"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for PolicyInformation");this.policyIdentifier=u.result.policyIdentifier.valueBlock.toString(),"policyQualifiers"in u.result&&(this.policyQualifiers=Array.from(u.result.policyQualifiers,_=>new Te({schema:_})))}toSchema(){const o=[];return o.push(new ut({value:this.policyIdentifier})),"policyQualifiers"in this&&o.push(new Kt({value:Array.from(this.policyQualifiers,u=>u.toSchema())})),new Kt({value:o})}toJSON(){const o={policyIdentifier:this.policyIdentifier};return"policyQualifiers"in this&&(o.policyQualifiers=Array.from(this.policyQualifiers,u=>u.toJSON())),o}}class z{constructor(o={}){this.certificatePolicies=y(o,"certificatePolicies",z.defaultValues("certificatePolicies")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){if("certificatePolicies"===o)return[];throw new Error(`Invalid member name for CertificatePolicies class: ${o}`)}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Si({name:u.certificatePolicies||"",value:he.schema()})]})}fromSchema(o){J(o,["certificatePolicies"]);const u=Hn(o,o,z.schema({names:{certificatePolicies:"certificatePolicies"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for CertificatePolicies");this.certificatePolicies=Array.from(u.result.certificatePolicies,_=>new he({schema:_}))}toSchema(){return new Kt({value:Array.from(this.certificatePolicies,o=>o.toSchema())})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,o=>o.toJSON())}}}class $e{constructor(o={}){this.issuerDomainPolicy=y(o,"issuerDomainPolicy",$e.defaultValues("issuerDomainPolicy")),this.subjectDomainPolicy=y(o,"subjectDomainPolicy",$e.defaultValues("subjectDomainPolicy")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"issuerDomainPolicy":case"subjectDomainPolicy":return"";default:throw new Error(`Invalid member name for PolicyMapping class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new ut({name:u.issuerDomainPolicy||""}),new ut({name:u.subjectDomainPolicy||""})]})}fromSchema(o){J(o,["issuerDomainPolicy","subjectDomainPolicy"]);const u=Hn(o,o,$e.schema({names:{issuerDomainPolicy:"issuerDomainPolicy",subjectDomainPolicy:"subjectDomainPolicy"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for PolicyMapping");this.issuerDomainPolicy=u.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=u.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new Kt({value:[new ut({value:this.issuerDomainPolicy}),new ut({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}class $t{constructor(o={}){this.mappings=y(o,"mappings",$t.defaultValues("mappings")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){if("mappings"===o)return[];throw new Error(`Invalid member name for PolicyMappings class: ${o}`)}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Si({name:u.mappings||"",value:$e.schema()})]})}fromSchema(o){J(o,["mappings"]);const u=Hn(o,o,$t.schema({names:{mappings:"mappings"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for PolicyMappings");this.mappings=Array.from(u.result.mappings,_=>new $e({schema:_}))}toSchema(){return new Kt({value:Array.from(this.mappings,o=>o.toSchema())})}toJSON(){return{mappings:Array.from(this.mappings,o=>o.toJSON())}}}class xn{constructor(o={}){"keyIdentifier"in o&&(this.keyIdentifier=y(o,"keyIdentifier",xn.defaultValues("keyIdentifier"))),"authorityCertIssuer"in o&&(this.authorityCertIssuer=y(o,"authorityCertIssuer",xn.defaultValues("authorityCertIssuer"))),"authorityCertSerialNumber"in o&&(this.authorityCertSerialNumber=y(o,"authorityCertSerialNumber",xn.defaultValues("authorityCertSerialNumber"))),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"keyIdentifier":return new it;case"authorityCertIssuer":return[];case"authorityCertSerialNumber":return new Ft;default:throw new Error(`Invalid member name for AuthorityKeyIdentifier class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Ke({name:u.keyIdentifier||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new L({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new Si({name:u.authorityCertIssuer||"",value:Ti.schema()})]}),new Ke({name:u.authorityCertSerialNumber||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(o){J(o,["keyIdentifier","authorityCertIssuer","authorityCertSerialNumber"]);const u=Hn(o,o,xn.schema({names:{keyIdentifier:"keyIdentifier",authorityCertIssuer:"authorityCertIssuer",authorityCertSerialNumber:"authorityCertSerialNumber"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for AuthorityKeyIdentifier");"keyIdentifier"in u.result&&(this.keyIdentifier=new it({valueHex:u.result.keyIdentifier.valueBlock.valueHex})),"authorityCertIssuer"in u.result&&(this.authorityCertIssuer=Array.from(u.result.authorityCertIssuer,_=>new Ti({schema:_}))),"authorityCertSerialNumber"in u.result&&(this.authorityCertSerialNumber=new Ft({valueHex:u.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){const o=[];return"keyIdentifier"in this&&o.push(new Ke({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHex})),"authorityCertIssuer"in this&&o.push(new L({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,u=>u.toSchema())})),"authorityCertSerialNumber"in this&&o.push(new Ke({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHex})),new Kt({value:o})}toJSON(){const o={};return"keyIdentifier"in this&&(o.keyIdentifier=this.keyIdentifier.toJSON()),"authorityCertIssuer"in this&&(o.authorityCertIssuer=Array.from(this.authorityCertIssuer,u=>u.toJSON())),"authorityCertSerialNumber"in this&&(o.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),o}}class xi{constructor(o={}){"requireExplicitPolicy"in o&&(this.requireExplicitPolicy=y(o,"requireExplicitPolicy",xi.defaultValues("requireExplicitPolicy"))),"inhibitPolicyMapping"in o&&(this.inhibitPolicyMapping=y(o,"inhibitPolicyMapping",xi.defaultValues("inhibitPolicyMapping"))),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"requireExplicitPolicy":case"inhibitPolicyMapping":return 0;default:throw new Error(`Invalid member name for PolicyConstraints class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Ke({name:u.requireExplicitPolicy||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new Ke({name:u.inhibitPolicyMapping||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(o){J(o,["requireExplicitPolicy","inhibitPolicyMapping"]);const u=Hn(o,o,xi.schema({names:{requireExplicitPolicy:"requireExplicitPolicy",inhibitPolicyMapping:"inhibitPolicyMapping"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for PolicyConstraints");if("requireExplicitPolicy"in u.result){const _=u.result.requireExplicitPolicy;_.idBlock.tagClass=1,_.idBlock.tagNumber=2;const D=ht(_.toBER(!1));this.requireExplicitPolicy=D.result.valueBlock.valueDec}if("inhibitPolicyMapping"in u.result){const _=u.result.inhibitPolicyMapping;_.idBlock.tagClass=1,_.idBlock.tagNumber=2;const D=ht(_.toBER(!1));this.inhibitPolicyMapping=D.result.valueBlock.valueDec}}toSchema(){const o=[];if("requireExplicitPolicy"in this){const u=new Ft({value:this.requireExplicitPolicy});u.idBlock.tagClass=3,u.idBlock.tagNumber=0,o.push(u)}if("inhibitPolicyMapping"in this){const u=new Ft({value:this.inhibitPolicyMapping});u.idBlock.tagClass=3,u.idBlock.tagNumber=1,o.push(u)}return new Kt({value:o})}toJSON(){const o={};return"requireExplicitPolicy"in this&&(o.requireExplicitPolicy=this.requireExplicitPolicy),"inhibitPolicyMapping"in this&&(o.inhibitPolicyMapping=this.inhibitPolicyMapping),o}}class Dr{constructor(o={}){this.keyPurposes=y(o,"keyPurposes",Dr.defaultValues("keyPurposes")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){if("keyPurposes"===o)return[];throw new Error(`Invalid member name for ExtKeyUsage class: ${o}`)}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Si({name:u.keyPurposes||"",value:new ut})]})}fromSchema(o){J(o,["keyPurposes"]);const u=Hn(o,o,Dr.schema({names:{keyPurposes:"keyPurposes"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for ExtKeyUsage");this.keyPurposes=Array.from(u.result.keyPurposes,_=>_.valueBlock.toString())}toSchema(){return new Kt({value:Array.from(this.keyPurposes,o=>new ut({value:o}))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}class Ir{constructor(o={}){this.accessMethod=y(o,"accessMethod",Ir.defaultValues("accessMethod")),this.accessLocation=y(o,"accessLocation",Ir.defaultValues("accessLocation")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"accessMethod":return"";case"accessLocation":return new Ti;default:throw new Error(`Invalid member name for AccessDescription class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new ut({name:u.accessMethod||""}),Ti.schema(u.accessLocation||{})]})}fromSchema(o){J(o,["accessMethod","accessLocation"]);const u=Hn(o,o,Ir.schema({names:{accessMethod:"accessMethod",accessLocation:{names:{blockName:"accessLocation"}}}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for AccessDescription");this.accessMethod=u.result.accessMethod.valueBlock.toString(),this.accessLocation=new Ti({schema:u.result.accessLocation})}toSchema(){return new Kt({value:[new ut({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}class Ji{constructor(o={}){this.accessDescriptions=y(o,"accessDescriptions",Ji.defaultValues("accessDescriptions")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){if("accessDescriptions"===o)return[];throw new Error(`Invalid member name for InfoAccess class: ${o}`)}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Si({name:u.accessDescriptions||"",value:Ir.schema()})]})}fromSchema(o){J(o,["accessDescriptions"]);const u=Hn(o,o,Ji.schema({names:{accessDescriptions:"accessDescriptions"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for InfoAccess");this.accessDescriptions=Array.from(u.result.accessDescriptions,_=>new Ir({schema:_}))}toSchema(){return new Kt({value:Array.from(this.accessDescriptions,o=>o.toSchema())})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,o=>o.toJSON())}}}class ai{constructor(o={}){if("view"in o)this.fromUint8Array(o.view);else if("buffer"in o)this.fromArrayBuffer(o.buffer);else if("string"in o)this.fromString(o.string);else if("hexstring"in o)this.fromHexString(o.hexstring);else if("length"in o&&o.length>0){if(this.length=o.length,o.stub)for(let u=0;u<this._view.length;u++)this._view[u]=o.stub}else this.length=0}set buffer(o){this._buffer=o,this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(o){this._buffer=new ArrayBuffer(o.length),this._view=new Uint8Array(this._buffer),this._view.set(o)}get view(){return this._view}get length(){return this.view.byteLength}set length(o){this._buffer=new ArrayBuffer(o),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(o){this._buffer=o,this._view=new Uint8Array(this._buffer)}fromUint8Array(o){this.fromArrayBuffer(new Uint8Array(o).buffer)}fromString(o){const u=o.length;this.length=u;for(let _=0;_<u;_++)this.view[_]=o.charCodeAt(_)}toString(o=0,u=this.view.length-o){let _="";(o>=this.view.length||o<0)&&(o=0),(u>=this.view.length||u<0)&&(u=this.view.length-o);for(let T=o;T<o+u;T++)_+=String.fromCharCode(this.view[T]);return _}fromHexString(o){const u=o.length;this.buffer=new ArrayBuffer(u>>1),this.view=new Uint8Array(this.buffer);const _=new Map;_.set("0",0),_.set("1",1),_.set("2",2),_.set("3",3),_.set("4",4),_.set("5",5),_.set("6",6),_.set("7",7),_.set("8",8),_.set("9",9),_.set("A",10),_.set("a",10),_.set("B",11),_.set("b",11),_.set("C",12),_.set("c",12),_.set("D",13),_.set("d",13),_.set("E",14),_.set("e",14),_.set("F",15),_.set("f",15);let T=0,D=0;for(let F=0;F<u;F++)F%2?(D|=_.get(o.charAt(F)),this.view[T]=D,T++):D=_.get(o.charAt(F))<<4}toHexString(o=0,u=this.view.length-o){let _="";(o>=this.view.length||o<0)&&(o=0),(u>=this.view.length||u<0)&&(u=this.view.length-o);for(let T=o;T<o+u;T++){const D=this.view[T].toString(16).toUpperCase();_=_+(1==D.length?"0":"")+D}return _}copy(o=0,u=this.length-o){if(!o&&!this.length)return new ai;if(o<0||o>this.length-1)throw new Error(`Wrong start position: ${o}`);return new ai({buffer:this._buffer.slice(o,o+u)})}slice(o=0,u=this.length){if(!o&&!this.length)return new ai;if(o<0||o>this.length-1)throw new Error(`Wrong start position: ${o}`);return new ai({buffer:this._buffer.slice(o,u)})}realloc(o){const u=new ArrayBuffer(o);new Uint8Array(u).set(o>this._view.length?this._view:new Uint8Array(this._buffer,0,o)),this._buffer=u,this._view=new Uint8Array(this._buffer)}append(o){const u=this.length,_=o.length,T=o._view.subarray();this.realloc(u+_),this._view.set(T,u)}insert(o,u=0,_=this.length-u){return!(u>this.length-1||(_>this.length-u&&(_=this.length-u),_>o.length&&(_=o.length),this._view.set(_==o.length?o._view:o._view.subarray(0,_),u),0))}isEqual(o){if(this.length!=o.length)return!1;for(let u=0;u<o.length;u++)if(this.view[u]!=o.view[u])return!1;return!0}isEqualView(o){if(o.length!=this.view.length)return!1;for(let u=0;u<o.length;u++)if(this.view[u]!=o[u])return!1;return!0}findPattern(o,u,_,T){const{start:D,length:F,backward:re}=this.prepareFindParameters(u,_,T),ce=o.length;if(ce>F)return-1;const Ee=[];for(let dt=0;dt<ce;dt++)Ee.push(o.view[dt]);for(let dt=0;dt<=F-ce;dt++){let wt=!0;const kt=re?D-ce-dt:D+dt;for(let sn=0;sn<ce;sn++)if(this.view[sn+kt]!=Ee[sn]){wt=!1;break}if(wt)return re?D-ce-dt:D+ce+dt}return-1}findFirstIn(o,u,_,T){const{start:D,length:F,backward:re}=this.prepareFindParameters(u,_,T),ce={id:-1,position:re?0:D+F,length:0};for(let Ee=0;Ee<o.length;Ee++){const dt=this.findPattern(o[Ee],D,F,re);if(-1!=dt){let wt=!1;const kt=o[Ee].length;re?dt-kt>=ce.position-ce.length&&(wt=!0):dt-kt<=ce.position-ce.length&&(wt=!0),wt&&(ce.position=dt,ce.id=Ee,ce.length=kt)}}return ce}findAllIn(o,u,_){let{start:T,length:D}=this.prepareFindParameters(u,_);const F=[];let re={id:-1,position:T};for(;;){const ce=re.position;if(re=this.findFirstIn(o,re.position,D),-1==re.id)break;D-=re.position-ce,F.push({id:re.id,position:re.position})}return F}findAllPatternIn(o,u,_){const{start:T,length:D}=this.prepareFindParameters(u,_),F=[],re=o.length;if(re>D)return-1;const ce=Array.from(o.view);for(let Ee=0;Ee<=D-re;Ee++){let dt=!0;const wt=T+Ee;for(let kt=0;kt<re;kt++)if(this.view[kt+wt]!=ce[kt]){dt=!1;break}dt&&(F.push(T+re+Ee),Ee+=re-1)}return F}findFirstNotIn(o,u,_,T){let{start:D,length:F,backward:re}=this.prepareFindParameters(u,_,T);const ce={left:{id:-1,position:D},right:{id:-1,position:0},value:new ai};let Ee=F;for(;Ee>0;){if(ce.right=this.findFirstIn(o,re?D-F+Ee:D+F-Ee,Ee,re),-1==ce.right.id){F=Ee,re?D-=F:D=ce.left.position,ce.value=new ai({buffer:this._buffer.slice(D,D+F)});break}if(ce.right.position!=(re?ce.left.position-o[ce.right.id].length:ce.left.position+o[ce.right.id].length)){re?(D=ce.right.position+o[ce.right.id].length,F=ce.left.position-ce.right.position-o[ce.right.id].length):(D=ce.left.position,F=ce.right.position-ce.left.position-o[ce.right.id].length),ce.value=new ai({buffer:this._buffer.slice(D,D+F)});break}ce.left=ce.right,Ee-=o[ce.right.id].length}if(re){const dt=ce.right;ce.right=ce.left,ce.left=dt}return ce}findAllNotIn(o,u,_){let{start:T,length:D}=this.prepareFindParameters(u,_);const F=[];let re={left:{id:-1,position:T},right:{id:-1,position:T},value:new ai};do{const ce=re.right.position;re=this.findFirstNotIn(o,re.right.position,D),D-=re.right.position-ce,F.push({left:{id:re.left.id,position:re.left.position},right:{id:re.right.id,position:re.right.position},value:re.value})}while(-1!=re.right.id);return F}findFirstSequence(o,u,_,T){let{start:D,length:F,backward:re}=this.prepareFindParameters(u,_,T);const ce=this.skipNotPatterns(o,D,F,re);if(-1==ce)return{position:-1,value:new ai};const Ee=this.skipPatterns(o,ce,F-(re?D-ce:ce-D),re);return re?(D=Ee,F=ce-Ee):(D=ce,F=Ee-ce),{position:Ee,value:new ai({buffer:this._buffer.slice(D,D+F)})}}findAllSequences(o,u,_){let{start:T,length:D}=this.prepareFindParameters(u,_);const F=[];let re={position:T,value:new ai};do{const ce=re.position;re=this.findFirstSequence(o,re.position,D),-1!=re.position&&(D-=re.position-ce,F.push({position:re.position,value:re.value}))}while(-1!=re.position);return F}findPairedPatterns(o,u,_,T){const D=[];if(o.isEqual(u))return D;const{start:F,length:re}=this.prepareFindParameters(_,T);let ce=0;const Ee=this.findAllPatternIn(o,F,re);if(!Array.isArray(Ee)||0==Ee.length)return D;const dt=this.findAllPatternIn(u,F,re);if(!Array.isArray(dt)||0==dt.length)return D;for(;ce<Ee.length&&0!=dt.length;)if(Ee[0]!=dt[0]){if(Ee[ce]>dt[0])break;for(;Ee[ce]<dt[0]&&(ce++,!(ce>=Ee.length)););D.push({left:Ee[ce-1],right:dt[0]}),Ee.splice(ce-1,1),dt.splice(0,1),ce=0}else D.push({left:Ee[0],right:dt[0]}),Ee.splice(0,1),dt.splice(0,1);return D.sort((wt,kt)=>wt.left-kt.left),D}findPairedArrays(o,u,_,T){const{start:D,length:F}=this.prepareFindParameters(_,T),re=[];let ce=0;const Ee=this.findAllIn(o,D,F);if(0==Ee.length)return re;const dt=this.findAllIn(u,D,F);if(0==dt.length)return re;for(;ce<Ee.length&&0!=dt.length;)if(Ee[0].position!=dt[0].position){if(Ee[ce].position>dt[0].position)break;for(;Ee[ce].position<dt[0].position&&(ce++,!(ce>=Ee.length)););re.push({left:Ee[ce-1],right:dt[0]}),Ee.splice(ce-1,1),dt.splice(0,1),ce=0}else re.push({left:Ee[0],right:dt[0]}),Ee.splice(0,1),dt.splice(0,1);return re.sort((wt,kt)=>wt.left.position-kt.left.position),re}replacePattern(o,u,_,T,D=null){let re,F=[];const ce={status:-1,searchPatternPositions:[],replacePatternPositions:[]},{start:Ee,length:dt}=this.prepareFindParameters(_,T);if(null==D){if(F=this.findAllIn([o],Ee,dt),0==F.length)return ce}else F=D;ce.searchPatternPositions.push(...Array.from(F,Sn=>Sn.position));const wt=o.length-u.length,kt=new ArrayBuffer(this.view.length-F.length*wt),sn=new Uint8Array(kt);for(sn.set(new Uint8Array(this.buffer,0,Ee)),re=0;re<F.length;re++){const Sn=0==re?Ee:F[re-1].position;sn.set(new Uint8Array(this.buffer,Sn,F[re].position-o.length-Sn),Sn-re*wt),sn.set(u.view,F[re].position-o.length-re*wt),ce.replacePatternPositions.push(F[re].position-o.length-re*wt)}return re--,sn.set(new Uint8Array(this.buffer,F[re].position,this.length-F[re].position),F[re].position-o.length+u.length-re*wt),this.buffer=kt,this.view=new Uint8Array(this.buffer),ce.status=1,ce}skipPatterns(o,u,_,T){const{start:D,length:F,backward:re}=this.prepareFindParameters(u,_,T);let ce=D;for(let Ee=0;Ee<o.length;Ee++){const dt=o[Ee].length,wt=re?ce-dt:ce;let kt=!0;for(let sn=0;sn<dt;sn++)if(this.view[sn+wt]!=o[Ee].view[sn]){kt=!1;break}if(kt)if(Ee=-1,re){if(ce-=dt,ce<=0)return ce}else if(ce+=dt,ce>=D+F)return ce}return ce}skipNotPatterns(o,u,_,T){const{start:D,length:F,backward:re}=this.prepareFindParameters(u,_,T);let ce=-1;for(let Ee=0;Ee<F;Ee++){for(let dt=0;dt<o.length;dt++){const wt=o[dt].length,kt=re?D-Ee-wt:D+Ee;let sn=!0;for(let Sn=0;Sn<wt;Sn++)if(this.view[Sn+kt]!=o[dt].view[Sn]){sn=!1;break}if(sn){ce=re?D-Ee:D+Ee;break}}if(-1!=ce)break}return ce}prepareFindParameters(o=null,u=null,_=!1){return null===o&&(o=_?this.length:0),o>this.length&&(o=this.length),_?(null===u&&(u=o),u>o&&(u=o)):(null===u&&(u=this.length-o),u>this.length-o&&(u=this.length-o)),{start:o,length:u,backward:_}}}let Ie=(()=>{class Le{constructor(u={}){this._stream=new ai,this._length=0,this._start=0,this.backward=!1,this.appendBlock=0,this.prevLength=0,this.prevStart=0,this.stream="view"in u?new ai({view:u.view}):"buffer"in u?new ai({buffer:u.buffer}):"string"in u?new ai({string:u.string}):"hexstring"in u?new ai({hexstring:u.hexstring}):"stream"in u?u.stream.slice():new ai,"backward"in u&&u.backward&&(this.backward=u.backward,this._start=this.stream.length),"length"in u&&u.length>0&&(this._length=u.length),"start"in u&&u.start&&u.start>0&&(this._start=u.start),"appendBlock"in u&&u.appendBlock&&u.appendBlock>0&&(this.appendBlock=u.appendBlock)}set stream(u){this._stream=u,this.prevLength=this._length,this._length=u.length,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(u){this.prevLength=this._length,this._length=u}get length(){return this.appendBlock?this.start:this._length}set start(u){u>this.stream.length||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-u:u-this._start,this._start=u)}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(u,_=null){(null==_||_>this.length)&&(_=this.length);const T=this.stream.findPattern(u,this.start,this.length,this.backward);if(-1==T)return T;if(this.backward){if(T<this.start-u.length-_)return-1}else if(T>this.start+u.length+_)return-1;return this.start=T,T}findFirstIn(u,_=null){(null==_||_>this.length)&&(_=this.length);const T=this.stream.findFirstIn(u,this.start,this.length,this.backward);if(-1==T.id)return T;if(this.backward){if(T.position<this.start-u[T.id].length-_)return{id:-1,position:this.backward?0:this.start+this.length}}else if(T.position>this.start+u[T.id].length+_)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=T.position,T}findAllIn(u){return this.stream.findAllIn(u,this.backward?this.start-this.length:this.start,this.length)}findFirstNotIn(u,_=null){(null==_||_>this._length)&&(_=this._length);const T=this._stream.findFirstNotIn(u,this._start,this._length,this.backward);if(-1==T.left.id&&-1==T.right.id)return T;if(this.backward){if(-1!=T.right.id&&T.right.position<this._start-u[T.right.id].length-_)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ai}}else if(-1!=T.left.id&&T.left.position>this._start+u[T.left.id].length+_)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new ai};return this.start=this.backward?-1==T.left.id?0:T.left.position:-1==T.right.id?this._start+this._length:T.right.position,T}findAllNotIn(u){return this._stream.findAllNotIn(u,this.backward?this._start-this._length:this._start,this._length)}findFirstSequence(u,_=null,T=null){(null==_||_>this._length)&&(_=this._length),(null==T||T>_)&&(T=_);const D=this._stream.findFirstSequence(u,this._start,_,this.backward);if(0==D.value.length)return D;if(this.backward){if(D.position<this._start-D.value.length-T)return{position:-1,value:new ai}}else if(D.position>this._start+D.value.length+T)return{position:-1,value:new ai};return this.start=D.position,D}findAllSequences(u){return this.stream.findAllSequences(u,this.backward?this.start-this.length:this.start,this.length)}findPairedPatterns(u,_,T=null){(null==T||T>this.length)&&(T=this.length);const F=this.stream.findPairedPatterns(u,_,this.backward?this.start-this.length:this.start,this.length);if(F.length)if(this.backward){if(F[0].right<this.start-_.length-T)return[]}else if(F[0].left>this.start+u.length+T)return[];return F}findPairedArrays(u,_,T=null){(null==T||T>this.length)&&(T=this.length);const F=this.stream.findPairedArrays(u,_,this.backward?this.start-this.length:this.start,this.length);if(F.length)if(this.backward){if(F[0].right.position<this.start-_[F[0].right.id].length-T)return[]}else if(F[0].left.position>this.start+u[F[0].left.id].length+T)return[];return F}replacePattern(u,_){return this.stream.replacePattern(u,_,this.backward?this.start-this.length:this.start,this.length)}skipPatterns(u){const _=this.stream.skipPatterns(u,this.start,this.length,this.backward);return this.start=_,_}skipNotPatterns(u){const _=this.stream.skipNotPatterns(u,this.start,this.length,this.backward);return-1==_?-1:(this.start=_,_)}append(u){this.beforeAppend(u.length),this._stream.view.set(u.view,this._start),this._length+=2*u.length,this.start=this._start+u.length,this.prevLength-=2*u.length}appendView(u){this.beforeAppend(u.length),this._stream.view.set(u,this._start),this._length+=2*u.length,this.start=this._start+u.length,this.prevLength-=2*u.length}appendChar(u){this.beforeAppend(1),this._stream.view[this._start]=u,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(u){this.beforeAppend(2);const _=new Uint16Array([u]),T=new Uint8Array(_.buffer);this.stream.view[this._start]=T[1],this._stream.view[this._start+1]=T[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(u){this.beforeAppend(3);const _=new Uint32Array([u]),T=new Uint8Array(_.buffer);this._stream.view[this._start]=T[2],this._stream.view[this._start+1]=T[1],this._stream.view[this._start+2]=T[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(u){this.beforeAppend(4);const _=new Uint32Array([u]),T=new Uint8Array(_.buffer);this._stream.view[this._start]=T[3],this._stream.view[this._start+1]=T[2],this._stream.view[this._start+2]=T[1],this._stream.view[this._start+3]=T[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}appendInt16(u){this.beforeAppend(2);const _=new Int16Array([u]),T=new Uint8Array(_.buffer);this._stream.view[this._start]=T[1],this._stream.view[this._start+1]=T[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendInt32(u){this.beforeAppend(4);const _=new Int32Array([u]),T=new Uint8Array(_.buffer);this._stream.view[this._start]=T[3],this._stream.view[this._start+1]=T[2],this._stream.view[this._start+2]=T[1],this._stream.view[this._start+3]=T[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(u,_=!0){if(this._length<=0)return new Uint8Array(0);let T;if(this._length<u&&(u=this._length),this.backward){const D=this._stream.view.subarray(this._length-u,this._length);T=new Uint8Array(u);for(let F=0;F<u;F++)T[u-1-F]=D[F]}else T=this._stream.view.subarray(this._start,this._start+u);return _&&(this.start+=this.backward?-1*u:u),T}getUint16(u=!0){const _=this.getBlock(2,u);if(_.length<2)return 0;const T=new Uint16Array(1),D=new Uint8Array(T.buffer);return D[0]=_[1],D[1]=_[0],T[0]}getInt16(u=!0){const _=this.getBlock(2,u);if(_.length<2)return 0;const T=new Int16Array(1),D=new Uint8Array(T.buffer);return D[0]=_[1],D[1]=_[0],T[0]}getUint24(u=!0){const _=this.getBlock(3,u);if(_.length<3)return 0;const T=new Uint32Array(1),D=new Uint8Array(T.buffer);for(let F=3;F>=1;F--)D[3-F]=_[F-1];return T[0]}getUint32(u=!0){const _=this.getBlock(4,u);if(_.length<4)return 0;const T=new Uint32Array(1),D=new Uint8Array(T.buffer);for(let F=3;F>=0;F--)D[3-F]=_[F];return T[0]}getInt32(u=!0){const _=this.getBlock(4,u);if(_.length<4)return 0;const T=new Int32Array(1),D=new Uint8Array(T.buffer);for(let F=3;F>=0;F--)D[3-F]=_[F];return T[0]}beforeAppend(u){this._start+u>this._stream.length&&(u>this.appendBlock&&(this.appendBlock=u+Le.APPEND_BLOCK),this._stream.realloc(this._stream.length+this.appendBlock))}}return Le.APPEND_BLOCK=1e3,Le})();class Fe{constructor(o={}){this.version=y(o,"version",Fe.defaultValues("version")),this.logID=y(o,"logID",Fe.defaultValues("logID")),this.timestamp=y(o,"timestamp",Fe.defaultValues("timestamp")),this.extensions=y(o,"extensions",Fe.defaultValues("extensions")),this.hashAlgorithm=y(o,"hashAlgorithm",Fe.defaultValues("hashAlgorithm")),this.signatureAlgorithm=y(o,"signatureAlgorithm",Fe.defaultValues("signatureAlgorithm")),this.signature=y(o,"signature",Fe.defaultValues("signature")),"schema"in o&&this.fromSchema(o.schema),"stream"in o&&this.fromStream(o.stream)}static defaultValues(o){switch(o){case"version":return 0;case"logID":case"extensions":return new ArrayBuffer(0);case"timestamp":return new Date(0);case"hashAlgorithm":case"signatureAlgorithm":return"";case"signature":return new Fr;default:throw new Error(`Invalid member name for SignedCertificateTimestamp class: ${o}`)}}fromSchema(o){if(!(o instanceof Cs))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const u=new Ie({stream:new ai({buffer:o.data})});this.fromStream(u)}fromStream(o){const u=o.getUint16();if(this.version=o.getBlock(1)[0],0===this.version){this.logID=new Uint8Array(o.getBlock(32)).buffer.slice(0),this.timestamp=new Date(x(new Uint8Array(o.getBlock(8)),8));const _=o.getUint16();switch(this.extensions=new Uint8Array(o.getBlock(_)).buffer.slice(0),o.getBlock(1)[0]){case 0:this.hashAlgorithm="none";break;case 1:this.hashAlgorithm="md5";break;case 2:this.hashAlgorithm="sha1";break;case 3:this.hashAlgorithm="sha224";break;case 4:this.hashAlgorithm="sha256";break;case 5:this.hashAlgorithm="sha384";break;case 6:this.hashAlgorithm="sha512";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(o.getBlock(1)[0]){case 0:this.signatureAlgorithm="anonymous";break;case 1:this.signatureAlgorithm="rsa";break;case 2:this.signatureAlgorithm="dsa";break;case 3:this.signatureAlgorithm="ecdsa";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const T=o.getUint16(),F=ht(new Uint8Array(o.getBlock(T)).buffer.slice(0));if(-1===F.offset)throw new Error("Object's stream was not correct for SignedCertificateTimestamp");if(this.signature=F.result,u!==47+_+T)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){const o=this.toStream();return new Cs({data:o.stream.buffer})}toStream(){const o=new Ie;o.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecode.byteLength),o.appendChar(this.version),o.appendView(new Uint8Array(this.logID));const u=new ArrayBuffer(8),_=new Uint8Array(u),T=b(this.timestamp.valueOf(),8);let D,F;switch(_.set(new Uint8Array(T),8-T.byteLength),o.appendView(_),o.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&o.appendView(new Uint8Array(this.extensions)),this.hashAlgorithm.toLowerCase()){case"none":D=0;break;case"md5":D=1;break;case"sha1":D=2;break;case"sha224":D=3;break;case"sha256":D=4;break;case"sha384":D=5;break;case"sha512":D=6;break;default:throw new Error(`Incorrect data for hashAlgorithm: ${this.hashAlgorithm}`)}switch(o.appendChar(D),this.signatureAlgorithm.toLowerCase()){case"anonymous":F=0;break;case"rsa":F=1;break;case"dsa":F=2;break;case"ecdsa":F=3;break;default:throw new Error(`Incorrect data for signatureAlgorithm: ${this.signatureAlgorithm}`)}o.appendChar(F);const re=this.signature.toBER(!1);return o.appendUint16(re.byteLength),o.appendView(new Uint8Array(re)),o}toJSON(){return{version:this.version,logID:w(this.logID),timestamp:this.timestamp,extensions:w(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}verify(o,u,_=0){var T=this;return(0,n.Z)(function*(){let re,D=M(V(T.logID)),F=null,ce=new Ie;for(const sn of o)if(sn.log_id===D){F=sn.key;break}if(null===F)throw new Error(`Public key not found for CT with logId: ${D}`);const Ee=ht(Q(B(F)));if(-1===Ee.offset)throw new Error(`Incorrect key value for CT Log with logId: ${D}`);re=new Qr({schema:Ee.result}),ce.appendChar(0),ce.appendChar(0);const dt=new ArrayBuffer(8),wt=new Uint8Array(dt),kt=b(T.timestamp.valueOf(),8);return wt.set(new Uint8Array(kt),8-kt.byteLength),ce.appendView(wt),ce.appendUint16(_),0===_&&ce.appendUint24(u.byteLength),ce.appendView(new Uint8Array(u)),ce.appendUint16(T.extensions.byteLength),0!==T.extensions.byteLength&&ce.appendView(new Uint8Array(T.extensions)),Di().subtle.verifyWithPublicKey(ce._stream._buffer.slice(0,ce._length),{valueBlock:{valueHex:T.signature.toBER(!1)}},re,{algorithmId:""},"SHA-256")})()}}class yt{constructor(o={}){this.timestamps=y(o,"timestamps",yt.defaultValues("timestamps")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){if("timestamps"===o)return[];throw new Error(`Invalid member name for SignedCertificateTimestampList class: ${o}`)}static compareWithDefault(o,u){if("timestamps"===o)return 0===u.length;throw new Error(`Invalid member name for SignedCertificateTimestampList class: ${o}`)}static schema(o={}){const u=y(o,"names",{});return"optional"in u||(u.optional=!1),new it({name:u.blockName||"SignedCertificateTimestampList",optional:u.optional})}fromSchema(o){if(!(o instanceof it))throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");const u=new Ie({stream:new ai({buffer:o.valueBlock.valueHex})});if(u.getUint16()!==u.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;u.length;)this.timestamps.push(new Fe({stream:u}))}toSchema(){const o=new Ie;let u=0;const _=[];for(const T of this.timestamps){const D=T.toStream();_.push(D),u+=D.stream.buffer.byteLength}o.appendUint16(u);for(const T of _)o.appendView(T.stream.view);return new it({valueHex:o.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,o=>o.toJSON())}}}class Lt{constructor(o={}){this.templateID=y(o,"templateID",Lt.defaultValues("templateID")),"templateMajorVersion"in o&&(this.templateMajorVersion=y(o,"templateMajorVersion",Lt.defaultValues("templateMajorVersion"))),"templateMinorVersion"in o&&(this.templateMinorVersion=y(o,"templateMinorVersion",Lt.defaultValues("templateMinorVersion"))),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"templateID":return"";case"templateMajorVersion":case"templateMinorVersion":return 0;default:throw new Error(`Invalid member name for CertificateTemplate class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new ut({name:u.templateID||""}),new Ft({name:u.templateMajorVersion||"",optional:!0}),new Ft({name:u.templateMinorVersion||"",optional:!0})]})}fromSchema(o){J(o,["templateID","templateMajorVersion","templateMinorVersion"]);let u=Hn(o,o,Lt.schema({names:{templateID:"templateID",templateMajorVersion:"templateMajorVersion",templateMinorVersion:"templateMinorVersion"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for CertificateTemplate");this.templateID=u.result.templateID.valueBlock.toString(),"templateMajorVersion"in u.result&&(this.templateMajorVersion=u.result.templateMajorVersion.valueBlock.valueDec),"templateMinorVersion"in u.result&&(this.templateMinorVersion=u.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){const o=[];return o.push(new ut({value:this.templateID})),"templateMajorVersion"in this&&o.push(new Ft({value:this.templateMajorVersion})),"templateMinorVersion"in this&&o.push(new Ft({value:this.templateMinorVersion})),new Kt({value:o})}toJSON(){const o={extnID:this.templateID};return"templateMajorVersion"in this&&(o.templateMajorVersion=this.templateMajorVersion),"templateMinorVersion"in this&&(o.templateMinorVersion=this.templateMinorVersion),o}}class tn{constructor(o={}){this.certificateIndex=y(o,"certificateIndex",tn.defaultValues("certificateIndex")),this.keyIndex=y(o,"keyIndex",tn.defaultValues("keyIndex")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"certificateIndex":case"keyIndex":return 0;default:throw new Error(`Invalid member name for CAVersion class: ${o}`)}}static schema(o={}){return new Ft}fromSchema(o){if(o.constructor.blockName()!==Ft.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let u=o.valueBlock.valueHex.slice(0);const _=new Uint8Array(u);switch(!0){case u.byteLength<4:{const wt=new ArrayBuffer(4);new Uint8Array(wt).set(_,4-u.byteLength),u=wt.slice(0)}break;case u.byteLength>4:{const wt=new ArrayBuffer(4);new Uint8Array(wt).set(_.slice(0,4)),u=wt.slice(0)}}const T=u.slice(0,2),D=new Uint8Array(T);let F=D[0];D[0]=D[1],D[1]=F;const re=new Uint16Array(T);this.keyIndex=re[0];const ce=u.slice(2),Ee=new Uint8Array(ce);F=Ee[0],Ee[0]=Ee[1],Ee[1]=F;const dt=new Uint16Array(ce);this.certificateIndex=dt[0]}toSchema(){const o=new ArrayBuffer(2);new Uint16Array(o)[0]=this.certificateIndex;const _=new Uint8Array(o);let T=_[0];_[0]=_[1],_[1]=T;const D=new ArrayBuffer(2);new Uint16Array(D)[0]=this.keyIndex;const re=new Uint8Array(D);return T=re[0],re[0]=re[1],re[1]=T,new Ft({valueHex:g(D,o)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}class fn{constructor(o={}){this.id=y(o,"id",fn.defaultValues("id")),"type"in o&&(this.type=y(o,"type",fn.defaultValues("type"))),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"id":return"";case"type":return new Tt;default:throw new Error(`Invalid member name for QCStatement class: ${o}`)}}static compareWithDefault(o,u){switch(o){case"id":return""===u;case"type":return u instanceof Tt;default:throw new Error(`Invalid member name for QCStatement class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new ut({name:u.id||""}),new Fr({name:u.type||"",optional:!0})]})}fromSchema(o){J(o,["id","type"]);const u=Hn(o,o,fn.schema({names:{id:"id",type:"type"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for QCStatement");this.id=u.result.id.valueBlock.toString(),"type"in u.result&&(this.type=u.result.type)}toSchema(){const o=[new ut({value:this.id})];return"type"in this&&o.push(this.type),new Kt({value:o})}toJSON(){const o={id:this.id};return"type"in this&&(o.type=this.type.toJSON()),o}}class $n{constructor(o={}){this.values=y(o,"values",$n.defaultValues("values")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){if("values"===o)return[];throw new Error(`Invalid member name for QCStatements class: ${o}`)}static compareWithDefault(o,u){if("values"===o)return 0===u.length;throw new Error(`Invalid member name for QCStatements class: ${o}`)}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new Si({name:u.values||"",value:fn.schema(u.value||{})})]})}fromSchema(o){J(o,["values"]);const u=Hn(o,o,$n.schema({names:{values:"values"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for QCStatements");this.values=Array.from(u.result.values,_=>new fn({schema:_}))}toSchema(){return new Kt({value:Array.from(this.values,o=>o.toSchema())})}toJSON(){return{extensions:Array.from(this.values,o=>o.toJSON())}}}class Ln{constructor(o={}){this.extnID=y(o,"extnID",Ln.defaultValues("extnID")),this.critical=y(o,"critical",Ln.defaultValues("critical")),this.extnValue="extnValue"in o?new it({valueHex:o.extnValue}):Ln.defaultValues("extnValue"),"parsedValue"in o&&(this.parsedValue=y(o,"parsedValue",Ln.defaultValues("parsedValue"))),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"extnID":return"";case"critical":return!1;case"extnValue":return new it;case"parsedValue":return{};default:throw new Error(`Invalid member name for Extension class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[new ut({name:u.extnID||""}),new Yt({name:u.critical||"",optional:!0}),new it({name:u.extnValue||""})]})}fromSchema(o){J(o,["extnID","critical","extnValue"]);let u=Hn(o,o,Ln.schema({names:{extnID:"extnID",critical:"critical",extnValue:"extnValue"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for Extension");if(this.extnID=u.result.extnID.valueBlock.toString(),"critical"in u.result&&(this.critical=u.result.critical.valueBlock.value),this.extnValue=u.result.extnValue,u=ht(this.extnValue.valueBlock.valueHex),-1!==u.offset)switch(this.extnID){case"2.5.29.9":try{this.parsedValue=new Wn({schema:u.result})}catch{this.parsedValue=new Wn,this.parsedValue.parsingError="Incorrectly formated SubjectDirectoryAttributes"}break;case"2.5.29.14":case"2.5.29.15":case"2.5.29.20":case"2.5.29.27":case"2.5.29.21":case"2.5.29.24":case"2.5.29.54":case"1.3.6.1.4.1.311.20.2":case"1.3.6.1.4.1.311.21.2":this.parsedValue=u.result;break;case"2.5.29.16":try{this.parsedValue=new Js({schema:u.result})}catch{this.parsedValue=new Js,this.parsedValue.parsingError="Incorrectly formated PrivateKeyUsagePeriod"}break;case"2.5.29.17":case"2.5.29.18":try{this.parsedValue=new yr({schema:u.result})}catch{this.parsedValue=new yr,this.parsedValue.parsingError="Incorrectly formated AltName"}break;case"2.5.29.19":try{this.parsedValue=new Vr({schema:u.result})}catch{this.parsedValue=new Vr,this.parsedValue.parsingError="Incorrectly formated BasicConstraints"}break;case"2.5.29.28":try{this.parsedValue=new Er({schema:u.result})}catch{this.parsedValue=new Er,this.parsedValue.parsingError="Incorrectly formated IssuingDistributionPoint"}break;case"2.5.29.29":try{this.parsedValue=new cn({schema:u.result})}catch{this.parsedValue=new cn,this.parsedValue.parsingError="Incorrectly formated GeneralNames"}break;case"2.5.29.30":try{this.parsedValue=new fs({schema:u.result})}catch{this.parsedValue=new fs,this.parsedValue.parsingError="Incorrectly formated NameConstraints"}break;case"2.5.29.31":case"2.5.29.46":try{this.parsedValue=new Hi({schema:u.result})}catch{this.parsedValue=new Hi,this.parsedValue.parsingError="Incorrectly formated CRLDistributionPoints"}break;case"2.5.29.32":case"1.3.6.1.4.1.311.21.10":try{this.parsedValue=new z({schema:u.result})}catch{this.parsedValue=new z,this.parsedValue.parsingError="Incorrectly formated CertificatePolicies"}break;case"2.5.29.33":try{this.parsedValue=new $t({schema:u.result})}catch{this.parsedValue=new $t,this.parsedValue.parsingError="Incorrectly formated CertificatePolicies"}break;case"2.5.29.35":try{this.parsedValue=new xn({schema:u.result})}catch{this.parsedValue=new xn,this.parsedValue.parsingError="Incorrectly formated AuthorityKeyIdentifier"}break;case"2.5.29.36":try{this.parsedValue=new xi({schema:u.result})}catch{this.parsedValue=new xi,this.parsedValue.parsingError="Incorrectly formated PolicyConstraints"}break;case"2.5.29.37":try{this.parsedValue=new Dr({schema:u.result})}catch{this.parsedValue=new Dr,this.parsedValue.parsingError="Incorrectly formated ExtKeyUsage"}break;case"1.3.6.1.5.5.7.1.1":case"1.3.6.1.5.5.7.1.11":try{this.parsedValue=new Ji({schema:u.result})}catch{this.parsedValue=new Ji,this.parsedValue.parsingError="Incorrectly formated InfoAccess"}break;case"1.3.6.1.4.1.11129.2.4.2":try{this.parsedValue=new yt({schema:u.result})}catch{this.parsedValue=new yt,this.parsedValue.parsingError="Incorrectly formated SignedCertificateTimestampList"}break;case"1.3.6.1.4.1.311.21.7":try{this.parsedValue=new Lt({schema:u.result})}catch{this.parsedValue=new Lt,this.parsedValue.parsingError="Incorrectly formated CertificateTemplate"}break;case"1.3.6.1.4.1.311.21.1":try{this.parsedValue=new tn({schema:u.result})}catch{this.parsedValue=new tn,this.parsedValue.parsingError="Incorrectly formated CAVersion"}break;case"1.3.6.1.5.5.7.1.3":try{this.parsedValue=new $n({schema:u.result})}catch{this.parsedValue=new $n,this.parsedValue.parsingError="Incorrectly formated QCStatements"}}}toSchema(){const o=[];return o.push(new ut({value:this.extnID})),this.critical!==Ln.defaultValues("critical")&&o.push(new Yt({value:this.critical})),o.push(this.extnValue),new Kt({value:o})}toJSON(){const o={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==Ln.defaultValues("critical")&&(o.critical=this.critical),"parsedValue"in this&&"toJSON"in this.parsedValue&&(o.parsedValue=this.parsedValue.toJSON()),o}}class lr{constructor(o={}){this.extensions=y(o,"extensions",lr.defaultValues("extensions")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){if("extensions"===o)return[];throw new Error(`Invalid member name for Extensions class: ${o}`)}static schema(o={},u=!1){const _=y(o,"names",{});return new Kt({optional:u,name:_.blockName||"",value:[new Si({name:_.extensions||"",value:Ln.schema(_.extension||{})})]})}fromSchema(o){J(o,["extensions"]);const u=Hn(o,o,lr.schema({names:{extensions:"extensions"}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for Extensions");this.extensions=Array.from(u.result.extensions,_=>new Ln({schema:_}))}toSchema(){return new Kt({value:Array.from(this.extensions,o=>o.toSchema())})}toJSON(){return{extensions:Array.from(this.extensions,o=>o.toJSON())}}}function Pr(Le={}){const o=y(Le,"names",{});return new Kt({name:o.blockName||"tbsCertificate",value:[new L({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ft({name:o.tbsCertificateVersion||"tbsCertificate.version"})]}),new Ft({name:o.tbsCertificateSerialNumber||"tbsCertificate.serialNumber"}),Rn.schema(o.signature||{names:{blockName:"tbsCertificate.signature"}}),Vi.schema(o.issuer||{names:{blockName:"tbsCertificate.issuer"}}),new Kt({name:o.tbsCertificateValidity||"tbsCertificate.validity",value:[xr.schema(o.notBefore||{names:{utcTimeName:"tbsCertificate.notBefore",generalTimeName:"tbsCertificate.notBefore"}}),xr.schema(o.notAfter||{names:{utcTimeName:"tbsCertificate.notAfter",generalTimeName:"tbsCertificate.notAfter"}})]}),Vi.schema(o.subject||{names:{blockName:"tbsCertificate.subject"}}),Qr.schema(o.subjectPublicKeyInfo||{names:{blockName:"tbsCertificate.subjectPublicKeyInfo"}}),new Ke({name:o.tbsCertificateIssuerUniqueID||"tbsCertificate.issuerUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new Ke({name:o.tbsCertificateSubjectUniqueID||"tbsCertificate.subjectUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new L({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[lr.schema(o.extensions||{names:{blockName:"tbsCertificate.extensions"}})]})]})}class cr{constructor(o={}){this.tbs=y(o,"tbs",cr.defaultValues("tbs")),this.version=y(o,"version",cr.defaultValues("version")),this.serialNumber=y(o,"serialNumber",cr.defaultValues("serialNumber")),this.signature=y(o,"signature",cr.defaultValues("signature")),this.issuer=y(o,"issuer",cr.defaultValues("issuer")),this.notBefore=y(o,"notBefore",cr.defaultValues("notBefore")),this.notAfter=y(o,"notAfter",cr.defaultValues("notAfter")),this.subject=y(o,"subject",cr.defaultValues("subject")),this.subjectPublicKeyInfo=y(o,"subjectPublicKeyInfo",cr.defaultValues("subjectPublicKeyInfo")),"issuerUniqueID"in o&&(this.issuerUniqueID=y(o,"issuerUniqueID",cr.defaultValues("issuerUniqueID"))),"subjectUniqueID"in o&&(this.subjectUniqueID=y(o,"subjectUniqueID",cr.defaultValues("subjectUniqueID"))),"extensions"in o&&(this.extensions=y(o,"extensions",cr.defaultValues("extensions"))),this.signatureAlgorithm=y(o,"signatureAlgorithm",cr.defaultValues("signatureAlgorithm")),this.signatureValue=y(o,"signatureValue",cr.defaultValues("signatureValue")),"schema"in o&&this.fromSchema(o.schema)}static defaultValues(o){switch(o){case"tbs":case"issuerUniqueID":case"subjectUniqueID":return new ArrayBuffer(0);case"version":return 0;case"serialNumber":return new Ft;case"signature":case"signatureAlgorithm":return new Rn;case"issuer":case"subject":return new Vi;case"notBefore":case"notAfter":return new xr;case"subjectPublicKeyInfo":return new Qr;case"extensions":return[];case"signatureValue":return new jt;default:throw new Error(`Invalid member name for Certificate class: ${o}`)}}static schema(o={}){const u=y(o,"names",{});return new Kt({name:u.blockName||"",value:[Pr(u.tbsCertificate),Rn.schema(u.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new jt({name:u.signatureValue||"signatureValue"})]})}fromSchema(o){J(o,["tbsCertificate","tbsCertificate.extensions","tbsCertificate.version","tbsCertificate.serialNumber","tbsCertificate.signature","tbsCertificate.issuer","tbsCertificate.notBefore","tbsCertificate.notAfter","tbsCertificate.subject","tbsCertificate.subjectPublicKeyInfo","tbsCertificate.issuerUniqueID","tbsCertificate.subjectUniqueID","signatureAlgorithm","signatureValue"]);const u=Hn(o,o,cr.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:"tbsCertificate.extensions"}}}}}}));if(!1===u.verified)throw new Error("Object's schema was not verified against input data for Certificate");this.tbs=u.result.tbsCertificate.valueBeforeDecode,"tbsCertificate.version"in u.result&&(this.version=u.result["tbsCertificate.version"].valueBlock.valueDec),this.serialNumber=u.result["tbsCertificate.serialNumber"],this.signature=new Rn({schema:u.result["tbsCertificate.signature"]}),this.issuer=new Vi({schema:u.result["tbsCertificate.issuer"]}),this.notBefore=new xr({schema:u.result["tbsCertificate.notBefore"]}),this.notAfter=new xr({schema:u.result["tbsCertificate.notAfter"]}),this.subject=new Vi({schema:u.result["tbsCertificate.subject"]}),this.subjectPublicKeyInfo=new Qr({schema:u.result["tbsCertificate.subjectPublicKeyInfo"]}),"tbsCertificate.issuerUniqueID"in u.result&&(this.issuerUniqueID=u.result["tbsCertificate.issuerUniqueID"].valueBlock.valueHex),"tbsCertificate.subjectUniqueID"in u.result&&(this.subjectUniqueID=u.result["tbsCertificate.subjectUniqueID"].valueBlock.valueHex),"tbsCertificate.extensions"in u.result&&(this.extensions=Array.from(u.result["tbsCertificate.extensions"],_=>new Ln({schema:_}))),this.signatureAlgorithm=new Rn({schema:u.result.signatureAlgorithm}),this.signatureValue=u.result.signatureValue}encodeTBS(){const o=[];return"version"in this&&this.version!==cr.defaultValues("version")&&o.push(new L({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new Ft({value:this.version})]})),o.push(this.serialNumber),o.push(this.signature.toSchema()),o.push(this.issuer.toSchema()),o.push(new Kt({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),o.push(this.subject.toSchema()),o.push(this.subjectPublicKeyInfo.toSchema()),"issuerUniqueID"in this&&o.push(new Ke({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),"subjectUniqueID"in this&&o.push(new Ke({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),"extensions"in this&&o.push(new L({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new Kt({value:Array.from(this.extensions,u=>u.toSchema())})]})),new Kt({value:o})}toSchema(o=!1){let u={};if(!1===o){if(0===this.tbs.length)return cr.schema().value[0];u=ht(this.tbs).result}else u=this.encodeTBS();return new Kt({value:[u,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const o={tbs:w(this.tbs,0,this.tbs.byteLength),serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"version"in this&&this.version!==cr.defaultValues("version")&&(o.version=this.version),"issuerUniqueID"in this&&(o.issuerUniqueID=w(this.issuerUniqueID,0,this.issuerUniqueID.byteLength)),"subjectUniqueID"in this&&(o.subjectUniqueID=w(this.subjectUniqueID,0,this.subjectUniqueID.byteLength)),"extensions"in this&&(o.extensions=Array.from(this.extensions,u=>u.toJSON())),o}getPublicKey(o=null){return Di().subtle.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,o)}getKeyHash(o="SHA-1"){const u=xs();return typeof u>"u"?Promise.reject("Unable to create WebCrypto object"):u.digest({name:o},new Uint8Array(this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))}sign(o,u="SHA-1"){if(typeof o>"u")return Promise.reject("Need to provide a private key for signing");let T,_=Promise.resolve();const D=Di();return _=_.then(()=>D.subtle.getSignatureParameters(o,u)),_=_.then(F=>{T=F.parameters,this.signature=F.signatureAlgorithm,this.signatureAlgorithm=F.signatureAlgorithm}),_=_.then(()=>{this.tbs=this.encodeTBS().toBER(!1)}),_=_.then(()=>D.subtle.signWithPrivateKey(this.tbs,o,T)),_=_.then(F=>{this.signatureValue=new jt({valueHex:F})}),_}verify(o=null){let u={};return null!==o?u=o.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(u=this.subjectPublicKeyInfo),u instanceof Qr?Di().subtle.verifyWithPublicKey(this.tbs,this.signatureValue,u,this.signatureAlgorithm):Promise.reject("Please provide issuer certificate as a parameter")}}function si(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function yn(Le){if(Le.idBlock.isConstructed)for(let o=0;o<Le.valueBlock.value.length;o++)yn(Le.valueBlock.value[o])&&(Le.lenBlock.isIndefiniteForm=!0);return!!Le.lenBlock.isIndefiniteForm}function Oo(Le){let o=0,u=0;for(let D=0;D<Le.length;D++)o+=Le[D].byteLength;const _=new ArrayBuffer(o),T=new Uint8Array(_);for(let D=0;D<Le.length;D++){const F=Le[D];T.set(new Uint8Array(F),u),u+=F.byteLength}return _}const Xs=[new Uint8Array([1])],de="0123456789",zt="valueHex",Pt="isHexOnly",Ut="isConstructed",Ci="isIndefiniteForm",sr="optional",qs="primitiveSchema",Wi="value",Ri="valueDate",ms="valueDec",gs=new ArrayBuffer(0);class qo{constructor(){this.items=[]}write(o){this.items.push(o)}final(){return Oo(this.items)}}class or{constructor(o={}){this.blockLength=y(o,"blockLength",0),this.error=y(o,"error",""),this.warnings=y(o,"warnings",[]),this.valueBeforeDecode="valueBeforeDecode"in o?o.valueBeforeDecode.slice(0):gs}static blockName(){return"baseBlock"}toJSON(){return{blockName:this.constructor.blockName(),blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:w(this.valueBeforeDecode,0,this.valueBeforeDecode.byteLength)}}}const Is=Le=>class extends Le{constructor(u={}){super(u),this.isHexOnly=y(u,Pt,!1),this.valueHex=zt in u?u.valueHex.slice(0):gs}static blockName(){return"hexBlock"}fromBER(u,_,T){return!1===f(this,u,_,T)?-1:0===new Uint8Array(u,_,T).length?(this.warnings.push("Zero buffer length"),_):(this.valueHex=u.slice(_,_+T),this.blockLength=T,_+T)}toBER(u=!1){return!0!==this.isHexOnly?(this.error='Flag "isHexOnly" is not set, abort',gs):!0===u?new ArrayBuffer(this.valueHex.byteLength):this.valueHex.slice(0)}toJSON(){let u={};try{u=super.toJSON()}catch{}return u.blockName=this.constructor.blockName(),u.isHexOnly=this.isHexOnly,u.valueHex=w(this.valueHex,0,this.valueHex.byteLength),u}};class Qo extends(Is(or)){constructor(o={}){super(),"idBlock"in o?(this.isHexOnly=y(o.idBlock,Pt,!1),this.valueHex=y(o.idBlock,zt,gs),this.tagClass=y(o.idBlock,"tagClass",-1),this.tagNumber=y(o.idBlock,"tagNumber",-1),this.isConstructed=y(o.idBlock,Ut,!1)):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}static blockName(){return"identificationBlock"}toBER(o=!1){let _,T,u=0;switch(this.tagClass){case 1:u|=0;break;case 2:u|=64;break;case 3:u|=128;break;case 4:u|=192;break;default:return this.error="Unknown tag class",gs}if(this.isConstructed&&(u|=32),this.tagNumber<31&&!this.isHexOnly){if(_=new ArrayBuffer(1),T=new Uint8Array(_),!o){let D=this.tagNumber;D&=31,u|=D,T[0]=u}return _}if(!1===this.isHexOnly){const D=b(this.tagNumber,7),F=new Uint8Array(D),re=D.byteLength;if(_=new ArrayBuffer(re+1),T=new Uint8Array(_),T[0]=31|u,!o){for(let ce=0;ce<re-1;ce++)T[ce+1]=128|F[ce];T[re]=F[re-1]}return _}if(_=new ArrayBuffer(this.valueHex.byteLength+1),T=new Uint8Array(_),T[0]=31|u,!1===o){const D=new Uint8Array(this.valueHex);for(let F=0;F<D.length-1;F++)T[F+1]=128|D[F];T[this.valueHex.byteLength]=D[D.length-1]}return _}fromBER(o,u,_){if(!1===f(this,o,u,_))return-1;const T=new Uint8Array(o,u,_);if(0===T.length)return this.error="Zero buffer length",-1;switch(192&T[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=32==(32&T[0]),this.isHexOnly=!1;const F=31&T[0];if(31!==F)this.tagNumber=F,this.blockLength=1;else{let re=1;this.valueHex=new ArrayBuffer(255);let ce=255,Ee=new Uint8Array(this.valueHex);for(;128&T[re];){if(Ee[re-1]=127&T[re],re++,re>=T.length)return this.error="End of input reached before message was fully decoded",-1;if(re===ce){ce+=255;const kt=new ArrayBuffer(ce),sn=new Uint8Array(kt);for(let Sn=0;Sn<Ee.length;Sn++)sn[Sn]=Ee[Sn];this.valueHex=new ArrayBuffer(ce),Ee=new Uint8Array(this.valueHex)}}this.blockLength=re+1,Ee[re-1]=127&T[re];const dt=new ArrayBuffer(re),wt=new Uint8Array(dt);for(let kt=0;kt<re;kt++)wt[kt]=Ee[kt];this.valueHex=new ArrayBuffer(re),Ee=new Uint8Array(this.valueHex),Ee.set(wt),this.blockLength<=9?this.tagNumber=x(Ee,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return u+this.blockLength}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.blockName=this.constructor.blockName(),o.tagClass=this.tagClass,o.tagNumber=this.tagNumber,o.isConstructed=this.isConstructed,o}}class wa extends or{constructor(o={}){super(),"lenBlock"in o?(this.isIndefiniteForm=y(o.lenBlock,Ci,!1),this.longFormUsed=y(o.lenBlock,"longFormUsed",!1),this.length=y(o.lenBlock,"length",0)):(this.isIndefiniteForm=!1,this.longFormUsed=!1,this.length=0)}static blockName(){return"lengthBlock"}fromBER(o,u,_){if(!1===f(this,o,u,_))return-1;const T=new Uint8Array(o,u,_);if(0===T.length)return this.error="Zero buffer length",-1;if(255===T[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===T[0],!0===this.isIndefiniteForm)return this.blockLength=1,u+this.blockLength;if(this.longFormUsed=!!(128&T[0]),!1===this.longFormUsed)return this.length=T[0],this.blockLength=1,u+this.blockLength;const D=127&T[0];if(D>8)return this.error="Too big integer",-1;if(D+1>T.length)return this.error="End of input reached before message was fully decoded",-1;const F=new Uint8Array(D);for(let re=0;re<D;re++)F[re]=T[re+1];return 0===F[D-1]&&this.warnings.push("Needlessly long encoded length"),this.length=x(F,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=D+1,u+this.blockLength}toBER(o=!1){let u,_;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return u=new ArrayBuffer(1),!1===o&&(_=new Uint8Array(u),_[0]=128),u;if(!0===this.longFormUsed){const T=b(this.length,8);if(T.byteLength>127)return this.error="Too big length",gs;if(u=new ArrayBuffer(T.byteLength+1),!0===o)return u;const D=new Uint8Array(T);_=new Uint8Array(u),_[0]=128|T.byteLength;for(let F=0;F<T.byteLength;F++)_[F+1]=D[F];return u}return u=new ArrayBuffer(1),!1===o&&(_=new Uint8Array(u),_[0]=this.length),u}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.blockName=this.constructor.blockName(),o.isIndefiniteForm=this.isIndefiniteForm,o.longFormUsed=this.longFormUsed,o.length=this.length,o}}class eo extends or{constructor(o={}){super(o)}static blockName(){return"valueBlock"}fromBER(o,u,_){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}toBER(o=!1){throw TypeError('User need to make a specific function in a class which extends "ValueBlock"')}}class Mr extends or{constructor(o={},u=eo){super(o),"name"in o&&(this.name=o.name),sr in o&&(this.optional=o.optional),qs in o&&(this.primitiveSchema=o.primitiveSchema),this.idBlock=new Qo(o),this.lenBlock=new wa(o),this.valueBlock=new u(o)}static blockName(){return"BaseBlock"}fromBER(o,u,_){const T=this.valueBlock.fromBER(o,u,!0===this.lenBlock.isIndefiniteForm?_:this.lenBlock.length);return-1===T?(this.error=this.valueBlock.error,T):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),T)}toBER(o=!1,u){const _=u||new qo;u||yn(this);const T=this.idBlock.toBER(o);if(_.write(T),this.lenBlock.isIndefiniteForm)_.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(o,_),_.write(new ArrayBuffer(2));else{const D=this.valueBlock.toBER(!0);this.lenBlock.length=D.byteLength;const F=this.lenBlock.toBER(o);_.write(F);const re=o?new ArrayBuffer(this.lenBlock.length):this.valueBlock.toBER(o);_.write(re,_)}if(!u)return _.final()}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.idBlock=this.idBlock.toJSON(),o.lenBlock=this.lenBlock.toJSON(),o.valueBlock=this.valueBlock.toJSON(),"name"in this&&(o.name=this.name),sr in this&&(o.optional=this.optional),qs in this&&(o.primitiveSchema=this.primitiveSchema.toJSON()),o}toString(){return`${this.constructor.blockName()} : ${w(this.valueBlock.valueHex)}`}}class Va extends eo{constructor(o={}){super(o),this.valueHex=zt in o?o.valueHex.slice(0):gs,this.isHexOnly=y(o,Pt,!0)}fromBER(o,u,_){if(!1===f(this,o,u,_))return-1;const T=new Uint8Array(o,u,_);if(0===T.length)return this.warnings.push("Zero buffer length"),u;this.valueHex=new ArrayBuffer(T.length);const D=new Uint8Array(this.valueHex);for(let F=0;F<T.length;F++)D[F]=T[F];return this.blockLength=_,u+_}toBER(o=!1){return this.valueHex.slice(0)}static blockName(){return"PrimitiveValueBlock"}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.valueHex=w(this.valueHex,0,this.valueHex.byteLength),o.isHexOnly=this.isHexOnly,o}}class mo extends Mr{constructor(o={}){super(o,Va),this.idBlock.isConstructed=!1}static blockName(){return"PRIMITIVE"}}class So extends eo{constructor(o={}){super(o),this.value=y(o,Wi,[]),this.isIndefiniteForm=y(o,Ci,!1)}fromBER(o,u,_){const T=u,D=_;if(!1===f(this,o,u,_))return-1;if(0===new Uint8Array(o,u,_).length)return this.warnings.push("Zero buffer length"),u;let ce=u;for(;(!0===this.isIndefiniteForm?1:_)>0;){const Ee=_s(o,ce,_);if(-1===Ee.offset)return this.error=Ee.result.error,this.warnings.concat(Ee.result.warnings),-1;if(ce=Ee.offset,this.blockLength+=Ee.result.blockLength,_-=Ee.result.blockLength,this.value.push(Ee.result),!0===this.isIndefiniteForm&&Ee.result.constructor.blockName()===ko.blockName())break}return!0===this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.blockName()===ko.blockName()?this.value.pop():this.warnings.push("No EndOfContent block encoded")),this.valueBeforeDecode=o.slice(T,T+D),ce}toBER(o=!1,u){const _=u||new qo;for(let T=0;T<this.value.length;T++)this.value[T].toBER(o,_);if(!u)return _.final()}static blockName(){return"ConstructedValueBlock"}toJSON(){let o={};try{o=super.toJSON()}catch{}o.isIndefiniteForm=this.isIndefiniteForm,o.value=[];for(let u=0;u<this.value.length;u++)o.value.push(this.value[u].toJSON());return o}}class to extends Mr{constructor(o={}){super(o,So),this.idBlock.isConstructed=!0}static blockName(){return"CONSTRUCTED"}fromBER(o,u,_){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const T=this.valueBlock.fromBER(o,u,!0===this.lenBlock.isIndefiniteForm?_:this.lenBlock.length);return-1===T?(this.error=this.valueBlock.error,T):(0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),T)}toString(){const o=[];for(const _ of this.valueBlock.value)o.push(_.toString().split("\n").map(T=>`  ${T}`).join("\n"));const u=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.blockName();return o.length?`${u} :\n${o.join("\n")}`:`${u} :`}}class nl extends eo{constructor(o={}){super(o)}fromBER(o,u,_){return u}toBER(o=!1){return gs}static blockName(){return"EndOfContentValueBlock"}}class ko extends Mr{constructor(o={}){super(o,nl),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}static blockName(){return"EndOfContent"}}class Ta extends eo{constructor(o={}){super(o),this.value=y(o,Wi,!1),this.isHexOnly=y(o,Pt,!1),zt in o?this.valueHex=o.valueHex.slice(0):(this.valueHex=new ArrayBuffer(1),!0===this.value&&(new Uint8Array(this.valueHex)[0]=255))}fromBER(o,u,_){if(!1===f(this,o,u,_))return-1;const T=new Uint8Array(o,u,_);_>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,this.valueHex=new ArrayBuffer(T.length);const D=new Uint8Array(this.valueHex);for(let F=0;F<T.length;F++)D[F]=T[F];return this.value=0!==R.call(this),this.blockLength=_,u+_}toBER(o=!1){return this.valueHex}static blockName(){return"BooleanValueBlock"}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.value=this.value,o.isHexOnly=this.isHexOnly,o.valueHex=w(this.valueHex,0,this.valueHex.byteLength),o}}class Wo extends Mr{constructor(o={}){super(o,Ta),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}static blockName(){return"BOOLEAN"}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class ii extends to{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}static blockName(){return"SEQUENCE"}}class xo extends to{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}static blockName(){return"SET"}}class jo extends Mr{constructor(o={}){super(o,or),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}static blockName(){return"NULL"}fromBER(o,u,_){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=_,u+_>o.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):u+_}toBER(o=!1,u){const _=new ArrayBuffer(2);if(!o){const T=new Uint8Array(_);T[0]=5,T[1]=0}return u&&u.write(_),_}toString(){return`${this.constructor.blockName()}`}}class xe extends(Is(So)){constructor(o={}){super(o),this.isConstructed=y(o,Ut,!1)}fromBER(o,u,_){let T=0;if(!0===this.isConstructed){if(this.isHexOnly=!1,T=So.prototype.fromBER.call(this,o,u,_),-1===T)return T;for(let D=0;D<this.value.length;D++){const F=this.value[D].constructor.blockName();if(F===ko.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(F!==H.blockName())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,T=super.fromBER(o,u,_),this.blockLength=_;return T}toBER(o=!1,u){if(!0===this.isConstructed)return So.prototype.toBER.call(this,o,u);let _=new ArrayBuffer(this.valueHex.byteLength);return!0===o||0===this.valueHex.byteLength||(_=this.valueHex.slice(0)),_}static blockName(){return"OctetStringValueBlock"}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.isConstructed=this.isConstructed,o.isHexOnly=this.isHexOnly,o.valueHex=w(this.valueHex,0,this.valueHex.byteLength),o}}class H extends Mr{constructor(o={}){super(o,xe),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(o,u,_){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===_)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),u;if(!this.valueBlock.isConstructed){const T=o.slice(u,u+_);try{const D=Aa(T);-1!==D.offset&&D.offset===_&&(this.valueBlock.value=[D.result])}catch{}}return super.fromBER(o,u,_)}static blockName(){return"OCTET STRING"}isEqual(o){return!(!(o instanceof H)||JSON.stringify(this)!==JSON.stringify(o))}toString(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?to.prototype.toString.call(this):`${this.constructor.blockName()} : ${w(this.valueBlock.valueHex)}`}}class be extends(Is(So)){constructor(o={}){super(o),this.unusedBits=y(o,"unusedBits",0),this.isConstructed=y(o,Ut,!1),this.blockLength=this.valueHex.byteLength}fromBER(o,u,_){if(0===_)return u;let T=-1;if(!0===this.isConstructed){if(T=So.prototype.fromBER.call(this,o,u,_),-1===T)return T;for(let re=0;re<this.value.length;re++){const ce=this.value[re].constructor.blockName();if(ce===ko.blockName()){if(!0===this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(ce!==Pe.blockName())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unusedBits>0&&this.value[re].valueBlock.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unusedBits=this.value[re].valueBlock.unusedBits,this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1}return T}if(!1===f(this,o,u,_))return-1;const D=new Uint8Array(o,u,_);if(this.unusedBits=D[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const re=o.slice(u+1,u+_);try{const ce=Aa(re);-1!==ce.offset&&ce.offset===_-1&&(this.value=[ce.result])}catch{}}this.valueHex=new ArrayBuffer(D.length-1);const F=new Uint8Array(this.valueHex);for(let re=0;re<_-1;re++)F[re]=D[re+1];return this.blockLength=D.length,u+_}toBER(o=!1,u){if(!0===this.isConstructed)return So.prototype.toBER.call(this,o,u);if(!0===o)return new ArrayBuffer(this.valueHex.byteLength+1);if(0===this.valueHex.byteLength)return gs;const _=new Uint8Array(this.valueHex),T=new ArrayBuffer(this.valueHex.byteLength+1),D=new Uint8Array(T);D[0]=this.unusedBits;for(let F=0;F<this.valueHex.byteLength;F++)D[F+1]=_[F];return T}static blockName(){return"BitStringValueBlock"}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.unusedBits=this.unusedBits,o.isConstructed=this.isConstructed,o.isHexOnly=this.isHexOnly,o.valueHex=w(this.valueHex,0,this.valueHex.byteLength),o}}class Pe extends Mr{constructor(o={}){super(o,be),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}static blockName(){return"BIT STRING"}fromBER(o,u,_){return 0===_?u:(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(o,u,_))}isEqual(o){return!(!(o instanceof Pe)||JSON.stringify(this)!==JSON.stringify(o))}toString(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return to.prototype.toString.call(this);{const o=[],u=new Uint8Array(this.valueBlock.valueHex);for(const _ of u)o.push(_.toString(2).padStart(8,"0"));return`${this.constructor.blockName()} : ${o.join("")}`}}}class pt extends(Is(eo)){constructor(o={}){super(o),Wi in o&&(this.valueDec=o.value)}set valueHex(o){this._valueHex=o.slice(0),o.byteLength>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,o.byteLength>0&&(this._valueDec=R.call(this)))}get valueHex(){return this._valueHex}set valueDec(o){this._valueDec=o,this.isHexOnly=!1,this._valueHex=k(o)}get valueDec(){return this._valueDec}fromDER(o,u,_,T=0){const D=this.fromBER(o,u,_);if(-1===D)return D;const F=new Uint8Array(this._valueHex);if(0===F[0]&&0!=(128&F[1])){const re=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(re).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=re.slice(0)}else if(0!==T&&this._valueHex.byteLength<T){T-this._valueHex.byteLength>1&&(T=this._valueHex.byteLength+1);const re=new ArrayBuffer(T);new Uint8Array(re).set(F,T-this._valueHex.byteLength),this._valueHex=re.slice(0)}return D}toDER(o=!1){const u=new Uint8Array(this._valueHex);switch(!0){case 0!=(128&u[0]):{const _=new ArrayBuffer(this._valueHex.byteLength+1),T=new Uint8Array(_);T[0]=0,T.set(u,1),this._valueHex=_.slice(0)}break;case 0===u[0]&&0==(128&u[1]):{const _=new ArrayBuffer(this._valueHex.byteLength-1);new Uint8Array(_).set(new Uint8Array(this._valueHex,1,this._valueHex.byteLength-1)),this._valueHex=_.slice(0)}}return this.toBER(o)}fromBER(o,u,_){const T=super.fromBER(o,u,_);return-1===T?T:(this.blockLength=_,u+_)}toBER(o=!1){return this.valueHex.slice(0)}static blockName(){return"IntegerValueBlock"}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.valueDec=this.valueDec,o}toString(){function o(wt,kt){const sn=new Uint8Array([0]);let Sn=new Uint8Array(wt),Dn=new Uint8Array(kt),qi=Sn.slice(0);const Ur=qi.length-1;let Ns=Dn.slice(0);const vs=Ns.length-1;let Fs=0,Os=0;for(let rl=vs<Ur?Ur:vs;rl>=0;rl--,Os++)Fs=1==Os<Ns.length?qi[Ur-Os]+Ns[vs-Os]+sn[0]:qi[Ur-Os]+sn[0],sn[0]=Fs/10,1==Os>=qi.length?qi=N(new Uint8Array([Fs%10]),qi):qi[Ur-Os]=Fs%10;return sn[0]>0&&(qi=N(sn,qi)),qi.slice(0)}function u(wt){if(wt>=Xs.length)for(let kt=Xs.length;kt<=wt;kt++){const sn=new Uint8Array([0]);let Sn=Xs[kt-1].slice(0);for(let Dn=Sn.length-1;Dn>=0;Dn--){const qi=new Uint8Array([(Sn[Dn]<<1)+sn[0]]);sn[0]=qi[0]/10,Sn[Dn]=qi[0]%10}sn[0]>0&&(Sn=N(sn,Sn)),Xs.push(Sn)}return Xs[wt]}function _(wt,kt){let sn=0,Sn=new Uint8Array(wt),Dn=new Uint8Array(kt),qi=Sn.slice(0);const Ur=qi.length-1;let Ns=Dn.slice(0);const vs=Ns.length-1;let Fs,Nr=0;for(let Os=vs;Os>=0;Os--,Nr++)Fs=qi[Ur-Nr]-Ns[vs-Nr]-sn,1==Fs<0?(sn=1,qi[Ur-Nr]=Fs+10):(sn=0,qi[Ur-Nr]=Fs);if(sn>0)for(let Os=Ur-vs+1;Os>=0;Os--,Nr++){if(Fs=qi[Ur-Nr]-sn,!(Fs<0)){sn=0,qi[Ur-Nr]=Fs;break}sn=1,qi[Ur-Nr]=Fs+10}return qi.slice()}const T=8*this._valueHex.byteLength-1;let re,D=new Uint8Array(8*this._valueHex.byteLength/3),F=0;const ce=new Uint8Array(this._valueHex);let Ee="",dt=!1;for(let wt=this._valueHex.byteLength-1;wt>=0;wt--){re=ce[wt];for(let kt=0;kt<8;kt++)1==(1&re)&&(F===T?(D=_(u(F),D),Ee="-"):D=o(D,u(F))),F++,re>>=1}for(let wt=0;wt<D.length;wt++)D[wt]&&(dt=!0),dt&&(Ee+=de.charAt(D[wt]));return!1===dt&&(Ee+=de.charAt(0)),Ee}}class It extends Mr{constructor(o={}){super(o,pt),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}static blockName(){return"INTEGER"}isEqual(o){return o instanceof It?this.valueBlock.isHexOnly&&o.valueBlock.isHexOnly?O(this.valueBlock.valueHex,o.valueBlock.valueHex):this.valueBlock.isHexOnly===o.valueBlock.isHexOnly&&this.valueBlock.valueDec===o.valueBlock.valueDec:o instanceof ArrayBuffer&&O(this.valueBlock.valueHex,o)}convertToDER(){const o=new It({valueHex:this.valueBlock.valueHex});return o.valueBlock.toDER(),o}convertFromDER(){const o=this.valueBlock.valueHex.byteLength%2?this.valueBlock.valueHex.byteLength+1:this.valueBlock.valueHex.byteLength,u=new It({valueHex:this.valueBlock.valueHex});return u.valueBlock.fromDER(u.valueBlock.valueHex,0,u.valueBlock.valueHex.byteLength,o),u}toString(){si();const o=w(this.valueBlock.valueHex),u=BigInt(`0x${o}`);return`${this.constructor.blockName()} : ${u.toString()}`}}class St extends It{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}static blockName(){return"ENUMERATED"}}class Jt extends(Is(or)){constructor(o={}){super(o),this.valueDec=y(o,ms,-1),this.isFirstSid=y(o,"isFirstSid",!1)}static blockName(){return"sidBlock"}fromBER(o,u,_){if(0===_)return u;if(!1===f(this,o,u,_))return-1;const T=new Uint8Array(o,u,_);this.valueHex=new ArrayBuffer(_);let D=new Uint8Array(this.valueHex);for(let ce=0;ce<_&&(D[ce]=127&T[ce],this.blockLength++,0!=(128&T[ce]));ce++);const F=new ArrayBuffer(this.blockLength),re=new Uint8Array(F);for(let ce=0;ce<this.blockLength;ce++)re[ce]=D[ce];return this.valueHex=F.slice(0),D=new Uint8Array(this.valueHex),0!=(128&T[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===D[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=x(D,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),u+this.blockLength)}set valueBigInt(o){si();let u=BigInt(o).toString(2);for(;u.length%7;)u="0"+u;const _=new Uint8Array(u.length/7);for(let T=0;T<_.length;T++)_[T]=parseInt(u.slice(7*T,7*T+7),2)+(T+1<_.length?128:0);this.fromBER(_.buffer,0,_.length)}toBER(o=!1){let u,_;if(this.isHexOnly){if(!0===o)return new ArrayBuffer(this.valueHex.byteLength);const D=new Uint8Array(this.valueHex);u=new ArrayBuffer(this.blockLength),_=new Uint8Array(u);for(let F=0;F<this.blockLength-1;F++)_[F]=128|D[F];return _[this.blockLength-1]=D[this.blockLength-1],u}const T=b(this.valueDec,7);if(0===T.byteLength)return this.error="Error during encoding SID value",gs;if(u=new ArrayBuffer(T.byteLength),!1===o){const D=new Uint8Array(T);_=new Uint8Array(u);for(let F=0;F<T.byteLength-1;F++)_[F]=128|D[F];_[T.byteLength-1]=D[T.byteLength-1]}return u}toString(){let o="";if(!0===this.isHexOnly)o=w(this.valueHex,0,this.valueHex.byteLength);else if(this.isFirstSid){let u=this.valueDec;this.valueDec<=39?o="0.":this.valueDec<=79?(o="1.",u-=40):(o="2.",u-=80),o+=u.toString()}else o=this.valueDec.toString();return o}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.valueDec=this.valueDec,o.isFirstSid=this.isFirstSid,o}}class un extends eo{constructor(o={}){super(o),this.fromString(y(o,Wi,""))}fromBER(o,u,_){let T=u;for(;_>0;){const D=new Jt;if(T=D.fromBER(o,T,_),-1===T)return this.blockLength=0,this.error=D.error,T;0===this.value.length&&(D.isFirstSid=!0),this.blockLength+=D.blockLength,_-=D.blockLength,this.value.push(D)}return T}toBER(o=!1){const u=[];for(let _=0;_<this.value.length;_++){const T=this.value[_].toBER(o);if(0===T.byteLength)return this.error=this.value[_].error,gs;u.push(T)}return Oo(u)}fromString(o){this.value=[];let u=0,_=0,T="",D=!1;do{if(_=o.indexOf(".",u),T=-1===_?o.substr(u):o.substr(u,_-u),u=_+1,D){const F=this.value[0];let re=0;switch(F.valueDec){case 0:break;case 1:re=40;break;case 2:re=80;break;default:return this.value=[],!1}const ce=parseInt(T,10);if(isNaN(ce))return!0;F.valueDec=ce+re,D=!1}else{const F=new Jt;if(T>Number.MAX_SAFE_INTEGER){si();const re=BigInt(T);F.valueBigInt=re}else if(F.valueDec=parseInt(T,10),isNaN(F.valueDec))return!0;0===this.value.length&&(F.isFirstSid=!0,D=!0),this.value.push(F)}}while(-1!==_);return!0}toString(){let o="",u=!1;for(let _=0;_<this.value.length;_++){u=this.value[_].isHexOnly;let T=this.value[_].toString();0!==_&&(o=`${o}.`),u?(T=`{${T}}`,this.value[_].isFirstSid?o=`2.{${T} - 80}`:o+=T):o+=T}return o}static blockName(){return"ObjectIdentifierValueBlock"}toJSON(){let o={};try{o=super.toJSON()}catch{}o.value=this.toString(),o.sidArray=[];for(let u=0;u<this.value.length;u++)o.sidArray.push(this.value[u].toJSON());return o}}class pn extends Mr{constructor(o={}){super(o,un),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}static blockName(){return"OBJECT IDENTIFIER"}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.toString()}`}}class _i extends(Is(or)){constructor(o={}){super(o),this.isHexOnly=!0,this.value=""}static blockName(){return"Utf8StringValueBlock"}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.value=this.value,o}}class Pi extends Mr{constructor(o={}){super(o,_i),Wi in o&&this.fromString(o.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}static blockName(){return"UTF8String"}fromBER(o,u,_){const T=this.valueBlock.fromBER(o,u,!0===this.lenBlock.isIndefiniteForm?_:this.lenBlock.length);return-1===T?(this.error=this.valueBlock.error,T):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),T)}fromBuffer(o){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(o));try{this.valueBlock.value=decodeURIComponent(escape(this.valueBlock.value))}catch(u){this.warnings.push(`Error during "decodeURIComponent": ${u}, using raw string`)}}fromString(o){const u=unescape(encodeURIComponent(o)),_=u.length;this.valueBlock.valueHex=new ArrayBuffer(_);const T=new Uint8Array(this.valueBlock.valueHex);for(let D=0;D<_;D++)T[D]=u.charCodeAt(D);this.valueBlock.value=o}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class br extends(Is(or)){constructor(o={}){super(o),this.valueDec=y(o,ms,-1)}static blockName(){return"relativeSidBlock"}fromBER(o,u,_){if(0===_)return u;if(!1===f(this,o,u,_))return-1;const T=new Uint8Array(o,u,_);this.valueHex=new ArrayBuffer(_);let D=new Uint8Array(this.valueHex);for(let ce=0;ce<_&&(D[ce]=127&T[ce],this.blockLength++,0!=(128&T[ce]));ce++);const F=new ArrayBuffer(this.blockLength),re=new Uint8Array(F);for(let ce=0;ce<this.blockLength;ce++)re[ce]=D[ce];return this.valueHex=F.slice(0),D=new Uint8Array(this.valueHex),0!=(128&T[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===D[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=x(D,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),u+this.blockLength)}toBER(o=!1){let u,_;if(this.isHexOnly){if(!0===o)return new ArrayBuffer(this.valueHex.byteLength);const D=new Uint8Array(this.valueHex);u=new ArrayBuffer(this.blockLength),_=new Uint8Array(u);for(let F=0;F<this.blockLength-1;F++)_[F]=128|D[F];return _[this.blockLength-1]=D[this.blockLength-1],u}const T=b(this.valueDec,7);if(0===T.byteLength)return this.error="Error during encoding SID value",gs;if(u=new ArrayBuffer(T.byteLength),!1===o){const D=new Uint8Array(T);_=new Uint8Array(u);for(let F=0;F<T.byteLength-1;F++)_[F]=128|D[F];_[T.byteLength-1]=D[T.byteLength-1]}return u}toString(){let o="";return o=!0===this.isHexOnly?w(this.valueHex,0,this.valueHex.byteLength):this.valueDec.toString(),o}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.valueDec=this.valueDec,o}}class ni extends eo{constructor(o={}){super(o),this.fromString(y(o,Wi,""))}fromBER(o,u,_){let T=u;for(;_>0;){const D=new br;if(T=D.fromBER(o,T,_),-1===T)return this.blockLength=0,this.error=D.error,T;this.blockLength+=D.blockLength,_-=D.blockLength,this.value.push(D)}return T}toBER(o=!1){let u=[];for(let _=0;_<this.value.length;_++){const T=this.value[_].toBER(o);if(0===T.byteLength)return this.error=this.value[_].error,gs;u.push(T)}return Oo(u)}fromString(o){this.value=[];let u=0,_=0,T="";do{_=o.indexOf(".",u),T=-1===_?o.substr(u):o.substr(u,_-u),u=_+1;const D=new br;if(D.valueDec=parseInt(T,10),isNaN(D.valueDec))return!0;this.value.push(D)}while(-1!==_);return!0}toString(){let o="",u=!1;for(let _=0;_<this.value.length;_++){u=this.value[_].isHexOnly;let T=this.value[_].toString();0!==_&&(o=`${o}.`),u&&(T=`{${T}}`),o+=T}return o}static blockName(){return"RelativeObjectIdentifierValueBlock"}toJSON(){let o={};try{o=super.toJSON()}catch{}o.value=this.toString(),o.sidArray=[];for(let u=0;u<this.value.length;u++)o.sidArray.push(this.value[u].toJSON());return o}}class Hr extends Mr{constructor(o={}){super(o,ni),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}static blockName(){return"RelativeObjectIdentifier"}}class Qs extends(Is(or)){constructor(o={}){super(o),this.isHexOnly=!0,this.value=""}static blockName(){return"BmpStringValueBlock"}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.value=this.value,o}}class Ws extends Mr{constructor(o={}){super(o,Qs),Wi in o&&this.fromString(o.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}static blockName(){return"BMPString"}fromBER(o,u,_){const T=this.valueBlock.fromBER(o,u,!0===this.lenBlock.isIndefiniteForm?_:this.lenBlock.length);return-1===T?(this.error=this.valueBlock.error,T):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),T)}fromBuffer(o){const u=o.slice(0),_=new Uint8Array(u);for(let T=0;T<_.length;T+=2){const D=_[T];_[T]=_[T+1],_[T+1]=D}this.valueBlock.value=String.fromCharCode.apply(null,new Uint16Array(u))}fromString(o){const u=o.length;this.valueBlock.valueHex=new ArrayBuffer(2*u);const _=new Uint8Array(this.valueBlock.valueHex);for(let T=0;T<u;T++){const D=b(o.charCodeAt(T),8),F=new Uint8Array(D);if(F.length>2)continue;const re=2-F.length;for(let ce=F.length-1;ce>=0;ce--)_[2*T+ce+re]=F[ce]}this.valueBlock.value=o}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class ua extends(Is(or)){constructor(o={}){super(o),this.isHexOnly=!0,this.value=""}static blockName(){return"UniversalStringValueBlock"}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.value=this.value,o}}class Ha extends Mr{constructor(o={}){super(o,ua),Wi in o&&this.fromString(o.value),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}static blockName(){return"UniversalString"}fromBER(o,u,_){const T=this.valueBlock.fromBER(o,u,!0===this.lenBlock.isIndefiniteForm?_:this.lenBlock.length);return-1===T?(this.error=this.valueBlock.error,T):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),T)}fromBuffer(o){const u=o.slice(0),_=new Uint8Array(u);for(let T=0;T<_.length;T+=4)_[T]=_[T+3],_[T+1]=_[T+2],_[T+2]=0,_[T+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(u))}fromString(o){const u=o.length;this.valueBlock.valueHex=new ArrayBuffer(4*u);const _=new Uint8Array(this.valueBlock.valueHex);for(let T=0;T<u;T++){const D=b(o.charCodeAt(T),8),F=new Uint8Array(D);if(F.length>4)continue;const re=4-F.length;for(let ce=F.length-1;ce>=0;ce--)_[4*T+ce+re]=F[ce]}this.valueBlock.value=o}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class Ja extends(Is(or)){constructor(o={}){super(o),this.value="",this.isHexOnly=!0}static blockName(){return"SimpleStringValueBlock"}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.value=this.value,o}}class js extends Mr{constructor(o={}){super(o,Ja),Wi in o&&this.fromString(o.value)}static blockName(){return"SIMPLESTRING"}fromBER(o,u,_){const T=this.valueBlock.fromBER(o,u,!0===this.lenBlock.isIndefiniteForm?_:this.lenBlock.length);return-1===T?(this.error=this.valueBlock.error,T):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),T)}fromBuffer(o){this.valueBlock.value=String.fromCharCode.apply(null,new Uint8Array(o))}fromString(o){const u=o.length;this.valueBlock.valueHex=new ArrayBuffer(u);const _=new Uint8Array(this.valueBlock.valueHex);for(let T=0;T<u;T++)_[T]=o.charCodeAt(T);this.valueBlock.value=o}toString(){return`${this.constructor.blockName()} : ${this.valueBlock.value}`}}class Lr extends js{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}static blockName(){return"NumericString"}}class no extends js{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}static blockName(){return"PrintableString"}}class vo extends js{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}static blockName(){return"TeletexString"}}class io extends js{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}static blockName(){return"VideotexString"}}class Ks extends js{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}static blockName(){return"IA5String"}}class yo extends js{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}static blockName(){return"GraphicString"}}class Ms extends js{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}static blockName(){return"VisibleString"}}class le extends js{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}static blockName(){return"GeneralString"}}class gt extends js{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}static blockName(){return"CharacterString"}}class Z extends Ms{constructor(o={}){if(super(o),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,Wi in o){this.fromString(o.value),this.valueBlock.valueHex=new ArrayBuffer(o.value.length);const u=new Uint8Array(this.valueBlock.valueHex);for(let _=0;_<o.value.length;_++)u[_]=o.value.charCodeAt(_)}Ri in o&&(this.fromDate(o.valueDate),this.valueBlock.valueHex=this.toBuffer()),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBER(o,u,_){const T=this.valueBlock.fromBER(o,u,!0===this.lenBlock.isIndefiniteForm?_:this.lenBlock.length);return-1===T?(this.error=this.valueBlock.error,T):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),T)}fromBuffer(o){this.fromString(String.fromCharCode.apply(null,new Uint8Array(o)))}toBuffer(){const o=this.toString(),u=new ArrayBuffer(o.length),_=new Uint8Array(u);for(let T=0;T<o.length;T++)_[T]=o.charCodeAt(T);return u}fromDate(o){this.year=o.getUTCFullYear(),this.month=o.getUTCMonth()+1,this.day=o.getUTCDate(),this.hour=o.getUTCHours(),this.minute=o.getUTCMinutes(),this.second=o.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(o){const _=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(o);if(null===_)return void(this.error="Wrong input string for conversion");const T=parseInt(_[1],10);this.year=T>=50?1900+T:2e3+T,this.month=parseInt(_[2],10),this.day=parseInt(_[3],10),this.hour=parseInt(_[4],10),this.minute=parseInt(_[5],10),this.second=parseInt(_[6],10)}toString(){const o=new Array(7);return o[0]=P(this.year<2e3?this.year-1900:this.year-2e3,2),o[1]=P(this.month,2),o[2]=P(this.day,2),o[3]=P(this.hour,2),o[4]=P(this.minute,2),o[5]=P(this.second,2),o[6]="Z",o.join("")}static blockName(){return"UTCTime"}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.year=this.year,o.month=this.month,o.day=this.day,o.hour=this.hour,o.minute=this.minute,o.second=this.second,o}}class Ae extends Ms{constructor(o={}){if(super(o),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,this.millisecond=0,Wi in o){this.fromString(o.value),this.valueBlock.valueHex=new ArrayBuffer(o.value.length);const u=new Uint8Array(this.valueBlock.valueHex);for(let _=0;_<o.value.length;_++)u[_]=o.value.charCodeAt(_)}Ri in o&&(this.fromDate(o.valueDate),this.valueBlock.valueHex=this.toBuffer()),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromBER(o,u,_){const T=this.valueBlock.fromBER(o,u,!0===this.lenBlock.isIndefiniteForm?_:this.lenBlock.length);return-1===T?(this.error=this.valueBlock.error,T):(this.fromBuffer(this.valueBlock.valueHex),0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),0===this.valueBlock.error.length&&(this.blockLength+=this.valueBlock.blockLength),T)}fromBuffer(o){this.fromString(String.fromCharCode.apply(null,new Uint8Array(o)))}toBuffer(){const o=this.toString(),u=new ArrayBuffer(o.length),_=new Uint8Array(u);for(let T=0;T<o.length;T++)_[T]=o.charCodeAt(T);return u}fromDate(o){this.year=o.getUTCFullYear(),this.month=o.getUTCMonth()+1,this.day=o.getUTCDate(),this.hour=o.getUTCHours(),this.minute=o.getUTCMinutes(),this.second=o.getUTCSeconds(),this.millisecond=o.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(o){let F,u=!1,_="",T="",D=0,re=0,ce=0;if("Z"===o[o.length-1])_=o.substr(0,o.length-1),u=!0;else{const wt=new Number(o[o.length-1]);if(isNaN(wt.valueOf()))throw new Error("Wrong input string for conversion");_=o}if(u){if(-1!==_.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==_.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let wt=1,kt=_.indexOf("+"),sn="";if(-1===kt&&(kt=_.indexOf("-"),wt=-1),-1!==kt){if(sn=_.substr(kt+1),_=_.substr(0,kt),2!==sn.length&&4!==sn.length)throw new Error("Wrong input string for conversion");let Sn=new Number(sn.substr(0,2));if(isNaN(Sn.valueOf()))throw new Error("Wrong input string for conversion");if(re=wt*Sn,4===sn.length){if(Sn=new Number(sn.substr(2,2)),isNaN(Sn.valueOf()))throw new Error("Wrong input string for conversion");ce=wt*Sn}}}let Ee=_.indexOf(".");if(-1===Ee&&(Ee=_.indexOf(",")),-1!==Ee){const wt=new Number(`0${_.substr(Ee)}`);if(isNaN(wt.valueOf()))throw new Error("Wrong input string for conversion");D=wt.valueOf(),T=_.substr(0,Ee)}else T=_;switch(!0){case 8===T.length:if(F=/(\d{4})(\d{2})(\d{2})/gi,-1!==Ee)throw new Error("Wrong input string for conversion");break;case 10===T.length:if(F=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==Ee){let wt=60*D;this.minute=Math.floor(wt),wt=60*(wt-this.minute),this.second=Math.floor(wt),wt=1e3*(wt-this.second),this.millisecond=Math.floor(wt)}break;case 12===T.length:if(F=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==Ee){let wt=60*D;this.second=Math.floor(wt),wt=1e3*(wt-this.second),this.millisecond=Math.floor(wt)}break;case 14===T.length:F=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==Ee&&(this.millisecond=Math.floor(1e3*D));break;default:throw new Error("Wrong input string for conversion")}const dt=F.exec(T);if(null===dt)throw new Error("Wrong input string for conversion");for(let wt=1;wt<dt.length;wt++)switch(wt){case 1:this.year=parseInt(dt[wt],10);break;case 2:this.month=parseInt(dt[wt],10);break;case 3:this.day=parseInt(dt[wt],10);break;case 4:this.hour=parseInt(dt[wt],10)+re;break;case 5:this.minute=parseInt(dt[wt],10)+ce;break;case 6:this.second=parseInt(dt[wt],10);break;default:throw new Error("Wrong input string for conversion")}if(!1===u){const wt=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=wt.getUTCFullYear(),this.month=wt.getUTCMonth(),this.day=wt.getUTCDay(),this.hour=wt.getUTCHours(),this.minute=wt.getUTCMinutes(),this.second=wt.getUTCSeconds(),this.millisecond=wt.getUTCMilliseconds()}}toString(){const o=[];return o.push(P(this.year,4)),o.push(P(this.month,2)),o.push(P(this.day,2)),o.push(P(this.hour,2)),o.push(P(this.minute,2)),o.push(P(this.second,2)),0!==this.millisecond&&(o.push("."),o.push(P(this.millisecond,3))),o.push("Z"),o.join("")}static blockName(){return"GeneralizedTime"}toJSON(){let o={};try{o=super.toJSON()}catch{}return o.year=this.year,o.month=this.month,o.day=this.day,o.hour=this.hour,o.minute=this.minute,o.second=this.second,o.millisecond=this.millisecond,o}}class Nt extends Pi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}static blockName(){return"DATE"}}class Cn extends Pi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}static blockName(){return"TimeOfDay"}}class En extends Pi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}static blockName(){return"DateTime"}}class er extends Pi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}static blockName(){return"Duration"}}class wr extends Pi{constructor(o={}){super(o),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}static blockName(){return"TIME"}}function _s(Le,o,u){const _=o;let D=new Mr({},Object);const F=new or;if(!1===f(F,Le,o,u))return D.error=F.error,{offset:-1,result:D};if(0===new Uint8Array(Le,o,u).length)return D.error="Zero buffer length",{offset:-1,result:D};let ce=D.idBlock.fromBER(Le,o,u);if(D.warnings.concat(D.idBlock.warnings),-1===ce)return D.error=D.idBlock.error,{offset:-1,result:D};if(ce=D.lenBlock.fromBER(Le,o=ce,u-=D.idBlock.blockLength),D.warnings.concat(D.lenBlock.warnings),-1===ce)return D.error=D.lenBlock.error,{offset:-1,result:D};if(o=ce,u-=D.lenBlock.blockLength,!1===D.idBlock.isConstructed&&!0===D.lenBlock.isIndefiniteForm)return D.error="Indefinite length form used for primitive encoding form",{offset:-1,result:D};let Ee=Mr;if(1===D.idBlock.tagClass){if(D.idBlock.tagNumber>=37&&!1===D.idBlock.isHexOnly)return D.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:D};switch(D.idBlock.tagNumber){case 0:if(!0===D.idBlock.isConstructed&&D.lenBlock.length>0)return D.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:D};Ee=ko;break;case 1:Ee=Wo;break;case 2:Ee=It;break;case 3:Ee=Pe;break;case 4:Ee=H;break;case 5:Ee=jo;break;case 6:Ee=pn;break;case 10:Ee=St;break;case 12:Ee=Pi;break;case 13:Ee=Hr;break;case 14:Ee=wr;break;case 15:return D.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:D};case 16:Ee=ii;break;case 17:Ee=xo;break;case 18:Ee=Lr;break;case 19:Ee=no;break;case 20:Ee=vo;break;case 21:Ee=io;break;case 22:Ee=Ks;break;case 23:Ee=Z;break;case 24:Ee=Ae;break;case 25:Ee=yo;break;case 26:Ee=Ms;break;case 27:Ee=le;break;case 28:Ee=Ha;break;case 29:Ee=gt;break;case 30:Ee=Ws;break;case 31:Ee=Nt;break;case 32:Ee=Cn;break;case 33:Ee=En;break;case 34:Ee=er;break;default:{let dt;dt=!0===D.idBlock.isConstructed?new to:new mo,dt.idBlock=D.idBlock,dt.lenBlock=D.lenBlock,dt.warnings=D.warnings,D=dt}}}else Ee=!0===D.idBlock.isConstructed?to:mo;return D=function T(dt,wt){if(dt instanceof wt)return dt;const kt=new wt;return kt.idBlock=dt.idBlock,kt.lenBlock=dt.lenBlock,kt.warnings=dt.warnings,kt.valueBeforeDecode=dt.valueBeforeDecode.slice(0),kt}(D,Ee),ce=D.fromBER(Le,o,!0===D.lenBlock.isIndefiniteForm?u:D.lenBlock.length),D.valueBeforeDecode=Le.slice(_,_+D.blockLength),{offset:ce,result:D}}function Aa(Le){if(0===Le.byteLength){const o=new Mr({},Object);return o.error="Input buffer has zero length",{offset:-1,result:o}}return _s(Le,0,Le.byteLength)}var ro=m(3172),Xo=m(1935),Pl=m(4650);let _l=(()=>{class Le{convertStringToArrayBuffer(u){const _=new ro.lW(u,"base64").toString("binary"),T=new ArrayBuffer(2*_.length),D=new Uint8Array(T);for(let F=0,re=_.length;F<re;F++)D[F]=_.charCodeAt(F);return T}buildCertModelFromArrayBuffer(u,_){var T=this;return(0,n.Z)(function*(){const D=Aa(u),F=new cr({schema:D.result}),re=new e,ce=T.getSubject(F),Ee=yield T.calculateCertificateThumbprint(_);return re.base64Cert=_,re.subject=ce,re.thumbprint=Ee,re})()}verifyCertFilePassword(u,_,T){let D=new FileReader;D.onload=F=>{try{const re=ro.lW.from(D.result),ce=this.arrayBufferToBase64(re);(0,Xo.KG)(re,_),T.next(ce)}catch(re){console.log("Invalid cert!"),T.error(re)}},D.onerror=F=>{T.error(F)},D.readAsArrayBuffer(u)}getSubject(u){const _={"2.5.4.6":"C","2.5.4.10":"O","2.5.4.11":"OU","2.5.4.3":"CN","2.5.4.7":"L","2.5.4.8":"S","2.5.4.12":"T","2.5.4.42":"GN","2.5.4.43":"I","2.5.4.4":"SN","1.2.840.113549.1.9.1":"E-mail"},T=new Array;for(const F of u.subject.typesAndValues){let re=_[F.type];typeof re>"u"&&(re=F.type),T.push(`${re}=${F.value.valueBlock.value}`)}return T.reverse().join(", ")}calculateCertificateThumbprint(u){var _=this;return(0,n.Z)(function*(){const T=new ro.lW(u,"base64"),D=yield crypto.subtle.digest("SHA-1",T);return _.computeHex(D)})()}computeHex(u){return[].map.call(new Uint8Array(u),_=>("00"+_.toString(16)).slice(-2)).join("")}arrayBufferToBase64(u){for(var _="",T=new Uint8Array(u),D=T.byteLength,F=0;F<D;F++)_+=String.fromCharCode(T[F]);return window.btoa(_)}}return Le.\u0275fac=function(u){return new(u||Le)},Le.\u0275prov=Pl.Yz7({token:Le,factory:Le.\u0275fac}),Le})()},146:(nt,_e,m)=>{"use strict";m.d(_e,{M:()=>w});var n=m(529),e=m(4707),h=m(8176),S=m(4650),y=m(8564);let w=(()=>{class f{constructor(b,g){this.http=b,this.claimTypeSubject=new e.t(1),this.actionUrl="ClaimTypes",this.headers=g.setHeaders()}getCachedClaimType(){return this.claimTypeSubject}getClaimType(b){return this.http.get(`${this.actionUrl}/${b}`,{headers:this.headers})}getClaimTypes(b,g,N=!1){let R=new n.LE;return(0,h.Ew)(b)||(R=R.append("name",b)),R=R.append("sort",(0,h.Ew)(g)?"name":g),this.http.get(N?`${this.actionUrl}/ClaimTypesLightWeight`:this.actionUrl,{headers:this.headers,params:R})}addClaimType(b){const g=`${this.actionUrl}`,N=JSON.stringify(b);return this.http.post(g,N,{headers:this.headers})}updateClaimType(b){const g=`${this.actionUrl}/${b.id}`,N=JSON.stringify(b);return this.http.put(g,N,{headers:this.headers})}deleteClaimType(b){return this.http.delete(`${this.actionUrl}/${b.id}`,{headers:this.headers})}getAllowedValues(b,g,N){let R=new n.LE;return(0,h.Ew)(g)||(R=R.append("query",g)),N&&(R=R.append("resultThreshold",N)),this.http.get(`${this.actionUrl}/AllowedValues/${b}`,{headers:this.headers,params:R})}}return f.\u0275fac=function(b){return new(b||f)(S.LFG(n.eN),S.LFG(y.s))},f.\u0275prov=S.Yz7({token:f,factory:f.\u0275fac}),f})()},8190:(nt,_e,m)=>{"use strict";m.d(_e,{F:()=>x});var n=m(515),e=m(4004),h=m(262),S=m(4879),y=m(4650),w=m(146),f=m(4889);let x=(()=>{class b{constructor(N,R){this.claimTypeService=N,this.errorService=R}resolve(N,R){return this.claimTypeService.getClaimType(N.params.Id).pipe((0,e.U)(O=>(O&&this.claimTypeService.getCachedClaimType().next(O),O)),(0,h.K)((O,P)=>(404===O.status?this.errorService.resourceNotFound(S._.claimType):this.errorService.handleError(O),(0,n.c)())))}}return b.\u0275fac=function(N){return new(N||b)(y.LFG(w.M),y.LFG(f.T))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})()},4608:(nt,_e,m)=>{"use strict";m.d(_e,{Z:()=>h});var n=m(1135),e=m(4650);let h=(()=>{class S{constructor(){this.unsavedCache=new n.X(null),this.unsavedCache$=this.unsavedCache.asObservable(),this.savedCache=new n.X(null),this.savedCache$=this.savedCache.asObservable(),this.componentDirtyValidMap=new Map}onClientSave(){this.componentDirtyValidMap.clear()}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},6297:(nt,_e,m)=>{"use strict";m.d(_e,{Zy:()=>y,rJ:()=>w,wf:()=>S});var n=m(4650),e=m(529),h=m(8564);let S=(()=>{class x{constructor(g,N){this.http=g,this.headersService=N,this.actionUrl="clients/import"}validateImportFile(g){const k=this.headersService.setHeaders("application/vnd.adminui.import-clients-validation-v1+json","application/vnd.adminui.import-clients-validation-result-v1+json");return this.http.post(`${this.actionUrl}/validate`,g,{headers:k})}completeImport(g,N){const R=this.appendImportConfiguration(g,N),O=this.headersService.setHeaders("application/vnd.adminui.import-clients-v1+json");return this.http.post(`${this.actionUrl}`,R,{headers:O})}appendImportConfiguration(g,N){const R=JSON.parse(g);return R.importConfiguration={clients:N.clients,protectedResources:N.protectedResources},JSON.stringify(R)}}return x.\u0275fac=function(g){return new(g||x)(n.LFG(e.eN),n.LFG(h.s))},x.\u0275prov=n.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();class y{}class w{constructor(){this.certificates=new f}}class f{}},9470:(nt,_e,m)=>{"use strict";m.d(_e,{a:()=>y});var n=m(9848),e=m(8895),h=m(4650),S=m(4608);let y=(()=>{class J{constructor(G){this.cache=G,this.defaultClientGrantTypeMap=new Map([[n.B.BrowserBased,e.q.AuthorizationCode],[n.B.ServerSidePKCE,e.q.AuthorizationCode],[n.B.ServerSide,e.q.Hybrid],[n.B.Native,e.q.Hybrid],[n.B.Machine,e.q.ClientCredentials],[n.B.CIBAMachine,e.q.CIBA],[n.B.Device,e.q.Device],[n.B.LegacyClientSide,e.q.Implicit]]),this.clientCacheSubscription=this.cache.unsavedCache$.subscribe(E=>{this.initClientViews(E)})}ngOnDestroy(){this.clientCacheSubscription.unsubscribe()}initClientViews(G){this.resetTabs(),this.isStandardClientFormat(G)||G.clientType===n.B.Saml||G.clientType===n.B.WsFed?this.initUsingClientType(G.clientType):0!==G.allowedGrantTypes.length?this.initUsingGrantTypes(G.allowedGrantTypes):this.initDefaults()}resetTabs(){this.details=new w,this.applicationUrls=new f,this.secrets=new x,this.resources=new b,this.tokens=new fe,this.claims=new N,this.grantTypes=new R,this.refreshTokens=new B,this.identityProviders=new k,this.properties=new O,this.other=new P,this.pkce=new U,this.deviceFlow=new W,this.ssoTab=new M,this.consent=new V,this.saml=new Q,this.wsFed=new Y,this.ciba=new g}isStandardClientFormat(G){if(G.clientType===n.B.Unknown||G.allowedGrantTypes.length>1)return!1;const E=this.defaultClientGrantTypeMap.get(G.clientType);return G.allowedGrantTypes[0]===E}initUsingClientType(G){switch(G){case n.B.BrowserBased:this.consent.display=!0,this.ssoTab.display=!0,this.pkce.display=!0,this.other.display=!0,this.other.userSSOLifetime=!0,this.applicationUrls.display=!0,this.applicationUrls.redirectUris=!0,this.applicationUrls.postLogoutRedirectUris=!0,this.applicationUrls.allowedCorsOrigins=!0,this.resources.allowedScopesIdentity=!0,this.resources.allowedScopesAPI=!0,this.claims.display=!0,this.grantTypes.display=!0,this.identityProviders.display=!0,this.properties.display=!0,this.tokens.identityTokenLifetime=!0,this.tokens.accessTokenLifetime=!0,this.tokens.authorizationCodeLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.tokens.alwaysIncludeUserClaimsInIdToken=!0;break;case n.B.ServerSide:case n.B.ServerSidePKCE:this.refreshTokens.display=!0,this.consent.display=!0,this.ssoTab.display=!0,this.ssoTab.backChannelLogoutSessionRequired=!0,this.ssoTab.backChannelLogoutUri=!0,this.pkce.display=!0,this.other.display=!0,this.other.userSSOLifetime=!0,this.applicationUrls.display=!0,this.applicationUrls.redirectUris=!0,this.applicationUrls.postLogoutRedirectUris=!0,this.secrets.display=!0,this.resources.allowedScopesAPI=!0,this.resources.allowedScopesIdentity=!0,this.claims.display=!0,this.grantTypes.display=!0,this.identityProviders.display=!0,this.properties.display=!0,this.tokens.identityTokenLifetime=!0,this.tokens.accessTokenLifetime=!0,this.tokens.authorizationCodeLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.tokens.alwaysIncludeUserClaimsInIdToken=!0;break;case n.B.Native:this.consent.display=!0,this.refreshTokens.display=!0,this.ssoTab.display=!0,this.ssoTab.backChannelLogoutSessionRequired=!0,this.ssoTab.backChannelLogoutUri=!0,this.pkce.display=!0,this.other.display=!0,this.other.userSSOLifetime=!0,this.applicationUrls.display=!0,this.applicationUrls.redirectUris=!0,this.applicationUrls.postLogoutRedirectUris=!0,this.secrets.display=!0,this.resources.allowedScopesAPI=!0,this.resources.allowedScopesIdentity=!0,this.claims.display=!0,this.grantTypes.display=!0,this.identityProviders.display=!0,this.properties.display=!0,this.tokens.identityTokenLifetime=!0,this.tokens.accessTokenLifetime=!0,this.tokens.authorizationCodeLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.tokens.alwaysIncludeUserClaimsInIdToken=!0;break;case n.B.Machine:this.other.display=!0,this.secrets.display=!0,this.resources.allowedScopesAPI=!0,this.claims.display=!0,this.grantTypes.display=!0,this.properties.display=!0,this.tokens.accessTokenLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0;break;case n.B.CIBAMachine:this.other.display=!0,this.secrets.display=!0,this.resources.allowedScopesAPI=!0,this.resources.allowedScopesIdentity=!0,this.claims.display=!0,this.grantTypes.display=!0,this.properties.display=!0,this.tokens.accessTokenLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.ciba.display=!0;break;case n.B.Device:this.consent.display=!0,this.refreshTokens.display=!0,this.deviceFlow.display=!0,this.other.display=!0,this.other.userSSOLifetime=!0,this.deviceFlow.display=!0,this.applicationUrls.display=!0,this.applicationUrls.allowedCorsOrigins=!0,this.secrets.display=!0,this.resources.allowedScopesIdentity=!0,this.resources.allowedScopesAPI=!0,this.claims.display=!0,this.grantTypes.display=!0,this.identityProviders.display=!0,this.properties.display=!0,this.tokens.identityTokenLifetime=!0,this.tokens.accessTokenLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.tokens.alwaysIncludeUserClaimsInIdToken=!0;break;case n.B.Saml:this.other.display=!0,this.other.userSSOLifetime=!0,this.tokens.display=!1,this.resources.allowedScopesIdentity=!0,this.identityProviders.display=!0,this.properties.display=!0,this.saml.display=!0;break;case n.B.WsFed:this.other.display=!0,this.other.userSSOLifetime=!0,this.tokens.display=!1,this.applicationUrls.display=!0,this.applicationUrls.redirectUris=!0,this.applicationUrls.postLogoutRedirectUris=!0,this.resources.allowedScopesIdentity=!0,this.identityProviders.display=!0,this.properties.display=!0,this.tokens.identityTokenLifetime=!0,this.wsFed.display=!0;break;case n.B.LegacyClientSide:this.consent.display=!0,this.ssoTab.display=!0,this.other.display=!0,this.other.userSSOLifetime=!0,this.applicationUrls.display=!0,this.applicationUrls.redirectUris=!0,this.applicationUrls.postLogoutRedirectUris=!0,this.applicationUrls.allowedCorsOrigins=!0,this.resources.allowedScopesIdentity=!0,this.resources.allowedScopesAPI=!0,this.claims.display=!0,this.grantTypes.display=!0,this.identityProviders.display=!0,this.properties.display=!0,this.tokens.allowAccessTokensViaBrowser=!0,this.tokens.identityTokenLifetime=!0,this.tokens.accessTokenLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.tokens.alwaysIncludeUserClaimsInIdToken=!0}}initUsingGrantTypes(G){this.saml.display=!1,this.wsFed.display=!1,G.forEach(E=>{switch(E){case e.q.Implicit:this.consent.display=!0,this.ssoTab.display=!0,this.other.display=!0,this.other.userSSOLifetime=!0,this.applicationUrls.display=!0,this.applicationUrls.redirectUris=!0,this.applicationUrls.postLogoutRedirectUris=!0,this.applicationUrls.allowedCorsOrigins=!0,this.resources.allowedScopesIdentity=!0,this.resources.allowedScopesAPI=!0,this.claims.display=!0,this.grantTypes.display=!0,this.identityProviders.display=!0,this.properties.display=!0,this.tokens.allowAccessTokensViaBrowser=!0,this.tokens.identityTokenLifetime=!0,this.tokens.accessTokenLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.tokens.alwaysIncludeUserClaimsInIdToken=!0;break;case e.q.Hybrid:this.consent.display=!0,this.refreshTokens.display=!0,this.ssoTab.display=!0,this.ssoTab.backChannelLogoutSessionRequired=!0,this.ssoTab.backChannelLogoutUri=!0,this.pkce.display=!0,this.other.display=!0,this.other.userSSOLifetime=!0,this.applicationUrls.display=!0,this.applicationUrls.redirectUris=!0,this.applicationUrls.postLogoutRedirectUris=!0,this.secrets.display=!0,this.resources.allowedScopesAPI=!0,this.resources.allowedScopesIdentity=!0,this.claims.display=!0,this.grantTypes.display=!0,this.identityProviders.display=!0,this.properties.display=!0,this.tokens.allowAccessTokensViaBrowser=!0,this.tokens.identityTokenLifetime=!0,this.tokens.accessTokenLifetime=!0,this.tokens.authorizationCodeLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.tokens.alwaysIncludeUserClaimsInIdToken=!0;break;case e.q.AuthorizationCode:this.consent.display=!0,this.refreshTokens.display=!0,this.ssoTab.display=!0,this.ssoTab.backChannelLogoutSessionRequired=!0,this.ssoTab.backChannelLogoutUri=!0,this.pkce.display=!0,this.other.display=!0,this.other.userSSOLifetime=!0,this.applicationUrls.display=!0,this.applicationUrls.redirectUris=!0,this.applicationUrls.postLogoutRedirectUris=!0,this.secrets.display=!0,this.resources.allowedScopesAPI=!0,this.resources.allowedScopesIdentity=!0,this.claims.display=!0,this.grantTypes.display=!0,this.identityProviders.display=!0,this.properties.display=!0,this.tokens.identityTokenLifetime=!0,this.tokens.accessTokenLifetime=!0,this.tokens.authorizationCodeLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.tokens.alwaysIncludeUserClaimsInIdToken=!0;break;case e.q.ClientCredentials:this.other.display=!0,this.secrets.display=!0,this.resources.allowedScopesAPI=!0,this.claims.display=!0,this.grantTypes.display=!0,this.properties.display=!0,this.tokens.accessTokenLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0;break;case e.q.CIBA:this.other.display=!0,this.secrets.display=!0,this.resources.allowedScopesAPI=!0,this.claims.display=!0,this.grantTypes.display=!0,this.properties.display=!0,this.tokens.accessTokenLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.ciba.display=!0;break;case e.q.ResourceOwnerPassword:this.refreshTokens.display=!0,this.other.display=!0,this.secrets.display=!0,this.resources.allowedScopesIdentity=!0,this.resources.allowedScopesAPI=!0,this.claims.display=!0,this.grantTypes.display=!0,this.properties.display=!0,this.tokens.identityTokenLifetime=!0,this.tokens.accessTokenLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.tokens.alwaysIncludeUserClaimsInIdToken=!0;break;case e.q.Device:this.consent.display=!0,this.refreshTokens.display=!0,this.deviceFlow.display=!0,this.other.display=!0,this.other.userSSOLifetime=!0,this.applicationUrls.display=!0,this.applicationUrls.allowedCorsOrigins=!0,this.secrets.display=!0,this.resources.allowedScopesIdentity=!0,this.resources.allowedScopesAPI=!0,this.claims.display=!0,this.grantTypes.display=!0,this.identityProviders.display=!0,this.properties.display=!0,this.tokens.identityTokenLifetime=!0,this.tokens.accessTokenLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.tokens.alwaysIncludeUserClaimsInIdToken=!0;break;default:this.initDefaults()}})}initDefaults(){this.consent.display=!0,this.refreshTokens.display=!0,this.ssoTab.display=!0,this.ssoTab.backChannelLogoutUri=!0,this.ssoTab.backChannelLogoutSessionRequired=!0,this.deviceFlow.display=!0,this.pkce.display=!0,this.other.display=!0,this.other.userSSOLifetime=!0,this.applicationUrls.display=!0,this.applicationUrls.redirectUris=!0,this.applicationUrls.postLogoutRedirectUris=!0,this.applicationUrls.allowedCorsOrigins=!0,this.secrets.display=!0,this.resources.allowedScopesIdentity=!0,this.resources.allowedScopesAPI=!0,this.claims.display=!0,this.grantTypes.display=!0,this.identityProviders.display=!0,this.properties.display=!0,this.tokens.allowAccessTokensViaBrowser=!0,this.tokens.identityTokenLifetime=!0,this.tokens.accessTokenLifetime=!0,this.tokens.authorizationCodeLifetime=!0,this.tokens.accessTokenType=!0,this.tokens.includeJwtId=!0,this.tokens.alwaysIncludeUserClaimsInIdToken=!0}}return J.\u0275fac=function(G){return new(G||J)(h.LFG(S.Z))},J.\u0275prov=h.Yz7({token:J,factory:J.\u0275fac}),J})();class w{}class f{constructor(){this.display=!1,this.redirectUris=!1,this.postLogoutRedirectUris=!1,this.allowedCorsOrigins=!1}}class x{constructor(){this.display=!1}}class b{constructor(){this.allowedScopesIdentity=!1,this.allowedScopesAPI=!1}}class g{constructor(){this.display=!1}}class N{constructor(){this.display=!1}}class R{constructor(){this.display=!1}}class k{constructor(){this.display=!1}}class O{constructor(){this.display=!1}}class P{constructor(){this.display=!1,this.userSSOLifetime=!1}}class U{constructor(){this.display=!1}}class W{constructor(){this.display=!1}}class M{constructor(){this.display=!1,this.backChannelLogoutUri=!1,this.backChannelLogoutSessionRequired=!1}}class B{constructor(){this.display=!1}}class V{constructor(){this.display=!1}}class Q{constructor(){this.display=!1}}class Y{constructor(){this.display=!1}}class fe{constructor(){this.display=!0,this.allowAccessTokensViaBrowser=!1,this.identityTokenLifetime=!1,this.accessTokenLifetime=!1,this.authorizationCodeLifetime=!1,this.accessTokenType=!1,this.includeJwtId=!1,this.alwaysIncludeUserClaimsInIdToken=!1}}},9012:(nt,_e,m)=>{"use strict";m.d(_e,{a:()=>f});var n=m(529),e=m(4707),h=m(8176),S=m(9848),y=m(4650),w=m(8564);let f=(()=>{class x{constructor(g,N){this.http=g,this.headersService=N,this.clientSubject=new e.t(1),this.actionUrl="clients",this.headers=N.setHeaders()}getClients(g,N,R){let k=new n.LE;return(0,h.Ew)(g)||(k=k.append("name",g)),N&&(k=k.append("page",N)),R&&(k=k.append("pageSize",R)),this.http.get(this.actionUrl,{headers:this.headers,params:k})}getClient(g){return this.http.get(`${this.actionUrl}/${g}`,{headers:this.headers})}getCachedClient(){return this.clientSubject}addClient(g){let N;switch(g.clientType){case S.B.Saml:N=this.headersService.setHeaders("application/vnd.adminui.new-saml-client-v1+json");break;case S.B.WsFed:N=this.headersService.setHeaders("application/vnd.adminui.new-wsfed-client-v1+json");break;default:N=this.headersService.setHeaders()}const R=`${this.actionUrl}/`,k=JSON.stringify(g);return this.http.post(R,k,{headers:N})}updateClient(g){return this.http.put(`${this.actionUrl}/${g.id}`,g,{headers:this.headers})}addClientSecret(g,N){return this.http.post(`${this.actionUrl}/${g}/secrets`,N,{headers:this.headers})}removeClientSecret(g,N){return this.http.delete(`${this.actionUrl}/${g}/secrets/${N.id}`,{headers:this.headers})}deleteClient(g){return this.http.delete(`${this.actionUrl}/${g}`,{headers:this.headers})}cloneClient(g,N){const R=`${this.actionUrl}/${g}/clone`,k=this.headersService.setHeaders("application/vnd.adminui.clone-client-v1+json");return this.http.post(R,N,{headers:k,observe:"response"})}}return x.\u0275fac=function(g){return new(g||x)(y.LFG(n.eN),y.LFG(w.s))},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()},9881:(nt,_e,m)=>{"use strict";m.d(_e,{E:()=>N});var n=m(529),e=m(9646),h=m(7579),S=m(5188);function w(R){return{...R,dynamicAuthenticationFlag:S.u[R.dynamicAuthenticationFlag]}}class b{}var g=m(4650);let N=(()=>{class R{constructor(O){this.http=O,this.headers=new n.WM,this.actionUrl="UIConfiguration"}getConfig(O=!1){const P=new b;if(P.addUserPassword=!1,P.resetPasswordConfigured=!1,P.isDemo=!1,P.targetIdentityServer4=!1,P.resetMfaConfigured=!1,P.featureFlagOptions=new S.O,this.uiOptions&&!O)return(0,e.of)(this.uiOptions);const U=new h.x;return this.headers=this.headers.set("Content-Type","application/json").set("Accept","application/json").set("Access-Control-Allow-Origin","true"),this.http.get(this.actionUrl,{headers:this.headers}).subscribe({next:W=>{this.uiOptions=function x(R){return{...R,featureFlagOptions:w(R.featureFlagOptions)}}(W),U.next(this.uiOptions)},error:W=>U.next(P)}),U.asObservable()}}return R.\u0275fac=function(O){return new(O||R)(g.LFG(n.eN))},R.\u0275prov=g.Yz7({token:R,factory:R.\u0275fac}),R})()},9327:(nt,_e,m)=>{"use strict";m.d(_e,{A:()=>b});var n=m(515),e=m(4004),h=m(262),S=m(4879),y=m(4650),w=m(9012),f=m(4608),x=m(4889);let b=(()=>{class g{constructor(R,k,O){this.clientService=R,this.clientCachingService=k,this.errorService=O}resolve(R,k){const O=R.paramMap.get("Id");return this.clientService.getClient(O).pipe((0,e.U)(P=>(this.clientCachingService.unsavedCache.next(P),P)),(0,h.K)(P=>(404===P.status?this.errorService.resourceNotFound(S._.client):this.errorService.handleError(P),(0,n.c)())))}}return g.\u0275fac=function(R){return new(R||g)(y.LFG(w.a),y.LFG(f.Z),y.LFG(x.T))},g.\u0275prov=y.Yz7({token:g,factory:g.\u0275fac}),g})()},4995:(nt,_e,m)=>{"use strict";m.d(_e,{U:()=>b});var n=m(515),e=m(4004),h=m(262),S=m(4879),y=m(4650),w=m(3499),f=m(5150),x=m(4889);let b=(()=>{class g{constructor(R,k,O){this.wsfedClientService=R,this.relyingPartyCache=k,this.errorService=O}resolve(R,k){const O=R.parent.paramMap.get("Id");if(!(this.relyingPartyCache.componentDirtyValidMap.size>0))return this.wsfedClientService.getRelyingParty(O).pipe((0,e.U)(P=>{const U=JSON.parse(JSON.stringify(P.claimMappings)),W=new Map;for(const M in U)U.hasOwnProperty(M)&&W.set(M,U[M]);return P.claimMappings=W,this.relyingPartyCache.unsavedCache.next(P),P}),(0,h.K)(P=>(404===P.status?this.errorService.resourceNotFound(S._.relyingParty):this.errorService.handleError(P),(0,n.c)())));this.relyingPartyCache.unsavedCache$.subscribe(P=>P)}}return g.\u0275fac=function(R){return new(R||g)(y.LFG(w.K),y.LFG(f.N),y.LFG(x.T))},g.\u0275prov=y.Yz7({token:g,factory:g.\u0275fac}),g})()},1428:(nt,_e,m)=>{"use strict";m.d(_e,{d:()=>N});var n=m(8007),e=m(515),h=m(4004),S=m(262),y=m(4879),w=m(4650),f=m(1339),x=m(9536),b=m(8185),g=m(4889);let N=(()=>{class R{constructor(O,P,U,W){this.serviceProviderService=O,this.serviceproviderCache=P,this.router=U,this.errorSerivce=W}resolve(O,P){const U=O.parent.paramMap.get("Id");if(!(this.serviceproviderCache.componentDirtyValidMap.size>0))return this.serviceProviderService.getServiceProvider(U).pipe((0,h.U)(W=>{const M=JSON.parse(JSON.stringify(W.claimMappings)),B=new Map;for(const V in M)M.hasOwnProperty(V)&&B.set(V,M[V]);return W.claimMappings=B,this.serviceproviderCache.unsavedCache.next(W),this.serviceproviderCache.savedCache.next(W),W}),(0,S.K)((W,M)=>(404===W.status?this.errorSerivce.resourceNotFound(y._.serviceProvider):this.errorSerivce.handleError(W),(0,e.c)())));this.serviceproviderCache.unsavedCache$.subscribe(W=>W)}}return R.\u0275fac=function(O){return new(O||R)(w.LFG(f.G),w.LFG(x.S),w.LFG(b.F0),w.LFG(g.T))},R.\u0275prov=w.Yz7({token:R,factory:R.\u0275fac,providedIn:n.V}),R})()},3883:(nt,_e,m)=>{"use strict";m.d(_e,{i:()=>w});var n=m(590),e=m(4650),h=m(1339),S=m(9536),y=m(4889);let w=(()=>{class f{constructor(b,g,N){this.serviceProviderService=b,this.cache=g,this.errorService=N}uploadFile(b,g){return this.serviceProviderService.setEncryptionCertificateViaFile(b,g)}uploadViaMetaData(b,g){return this.serviceProviderService.setEncryptionCertificateViaMetadata(b,g)}updateCertCache(b){this.serviceProviderService.getServiceProvider(b).subscribe(g=>{this.cache.unsavedCache$.pipe((0,n.P)()).subscribe(N=>{N.encryptionCertificate=g.encryptionCertificate,this.cache.unsavedCache.next(N)})},g=>{this.errorService.handleError(g)})}}return f.\u0275fac=function(b){return new(b||f)(e.LFG(h.G),e.LFG(S.S),e.LFG(y.T))},f.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac}),f})()},4889:(nt,_e,m)=>{"use strict";m.d(_e,{T:()=>b});var n=m(8176),e=m(4879),h=m(160),S=m(4650),y=m(8185),w=m(2979),f=m(7185),x=m(9383);let b=(()=>{class g{constructor(R,k,O,P){this.router=R,this.localize=k,this.toast=O,this.translate=P}resourceNotFound(R){this.router.navigate([this.localize.translateRoute("/resourcenotfound/"+e._[R])])}handleError(R,k,O){let P=h.s.NotHandled;const U=this.getDefaultNavigationPath(R);if(U)this.router.navigate([this.localize.translateRoute(U)]),P|=h.s.Navigate;else{const W=this.getOptionsToastBody(R,k)||this.getDefaultToastBody(R),M=this.getOptionsToastTitle(R,k)||this.getDefaultToastTitle(R);W&&M&&(O?this.toast.error(W,M,O):this.toast.error(W,M),P|=h.s.Toast)}return P}getOptionsToastBody(R,k){if(!k)return;const O="number"==typeof R.status&&k.statusToastOptions?k.statusToastOptions[R.status]:k;return O&&O.toastBody}getOptionsToastTitle(R,k){if(!k)return;const O="number"==typeof R.status&&k.statusToastOptions?k.statusToastOptions[R.status]:k;return O&&O.toastTitle}getDefaultNavigationPath(R){switch(R.status){case 401:return"/unauthorized";case 403:return"/forbidden";case 404:return"/404";default:return}}getDefaultToastTitle(R){switch(R.status){case 400:case 420:return"Bad Request";case 405:return"Method Not Allowed";default:return this.translate.instant("Notifications.Error")}}getDefaultToastBody(R){return 500===R.status?`${this.translate.instant("Notifications.SomethingWrong")}. ${this.translate.instant("Notifications.CheckLogs")}`:R.error&&R.error.errors&&R.error.errors.length>0?R.error.errors[0]:(0,n.Ew)(R._body)&&(0,n.Ew)(R.error)?`${this.translate.instant("Notifications.SomethingWrong")}. ${this.translate.instant("Notifications.CheckLogs")}`:(0,n.Ew)(R.error)?R._body:R.error}}return g.\u0275fac=function(R){return new(R||g)(S.LFG(y.F0),S.LFG(w.An),S.LFG(f._W),S.LFG(x.sK))},g.\u0275prov=S.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},9002:(nt,_e,m)=>{"use strict";m.d(_e,{T:()=>h});var n=m(4650),e=m(1888);let h=(()=>{class S{constructor(w){this.fileDownloader=w,this.actionUrl="clients/export"}exportAllClients(){this.fileDownloader.buildForm(this.actionUrl).submitForm()}exportSelectedClients(w){const f=this.actionUrl+"/specified",x=new Map;x.set("clientIds",w.join(",")),this.fileDownloader.buildFormWithCustomInputs(f,x).submitForm()}}return S.\u0275fac=function(w){return new(w||S)(n.LFG(e.B))},S.\u0275prov=n.Yz7({token:S,factory:S.\u0275fac}),S})()},1888:(nt,_e,m)=>{"use strict";m.d(_e,{B:()=>S});class n{constructor(w){this.form=w}submitForm(){document.body.appendChild(this.form),this.form.submit(),document.body.removeChild(this.form)}}var e=m(4650),h=m(1060);let S=(()=>{class y{constructor(f){this.securityService=f}buildForm(f){const x=this.buildStandardForm(f);return new n(x)}buildStandardForm(f){const x=document.createElement("form");return x.setAttribute("method","post"),x.setAttribute("action",f),x}appendInput(f,x,b){const g=document.createElement("input");g.setAttribute("type","text"),g.setAttribute("name",f),g.setAttribute("value",x),b.appendChild(g)}buildFormWithCustomInputs(f,x){const b=this.buildStandardForm(f);return x.forEach((g,N)=>{this.appendInput(N,g,b)}),new n(b)}}return y.\u0275fac=function(f){return new(f||y)(e.LFG(h.I))},y.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac}),y})()},9512:(nt,_e,m)=>{"use strict";m.d(_e,{n:()=>f});var n=m(590),e=m(4004),h=m(5188),S=m(4650),y=m(8185),w=m(9881);let f=(()=>{class x{constructor(g,N){this.router=g,this.config=N}canActivate(g,N){return this.config.getConfig().pipe((0,n.P)(),(0,e.U)(R=>(R?.featureFlagOptions?.dynamicAuthenticationFlag??h.u.Disabled)!=h.u.Disabled||this.router.parseUrl("/resourcenotfound/dynamic-auth")))}}return x.\u0275fac=function(g){return new(g||x)(S.LFG(y.F0),S.LFG(w.E))},x.\u0275prov=S.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})()},8564:(nt,_e,m)=>{"use strict";m.d(_e,{s:()=>h});var n=m(529),e=m(4650);let h=(()=>{class S{setHeaders(w,f){return(new n.WM).set("Content-Type",w||"application/json").set("Accept",f||"application/json").set("Access-Control-Allow-Origin","true").set("Cache-Control","no-cache").set("Pragma","no-cache").set("Expires","Sat, 01 Jan 2000 00:00:00 GMT")}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac}),S})()},4946:(nt,_e,m)=>{"use strict";m.d(_e,{G:()=>S});var n=m(4707),e=m(4650),h=m(529);let S=(()=>{class y{constructor(f){this.http=f,this.idsReady=!1,this.idsHealthCheckComplete=new n.t(1),this.uiReady=!1,this.uiHealthCheckComplete=new n.t(1),this.actionUrl="healthcheck"}checkHealthIdentityServer(){return this.http.get(`${this.actionUrl}/checkidentityserver`)}checkHealthUi(){return this.http.get(`${this.actionUrl}/checkui`)}}return y.\u0275fac=function(f){return new(f||y)(e.LFG(h.eN))},y.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac}),y})()},8506:(nt,_e,m)=>{"use strict";m.d(_e,{Q:()=>w});var n=m(529),e=m(4707),h=m(8176),S=m(4650),y=m(8564);let w=(()=>{class f{constructor(b,g){this.http=b,this.headersService=g,this.identityResourceSubject=new e.t(1),this.actionUrl="IdentityResources",this.headers=g.setHeaders()}getCachedIdentityResource(){return this.identityResourceSubject}getIdentityResources(b){let g=new n.LE;return(0,h.Ew)(b)||(g=g.append("name",b)),this.http.get(this.actionUrl,{headers:this.headers,params:g})}addResource(b){const g=`${this.actionUrl}/`,N=JSON.stringify(b);return this.http.post(g,N,{headers:this.headers})}getResource(b){return this.http.get(`${this.actionUrl}/${b}`,{headers:this.headers})}updateResource(b){return this.http.put(`${this.actionUrl}/${b.id}`,b,{headers:this.headers})}deleteIdentityResource(b){return this.http.delete(`${this.actionUrl}/${b}`,{headers:this.headers})}}return f.\u0275fac=function(b){return new(b||f)(S.LFG(n.eN),S.LFG(y.s))},f.\u0275prov=S.Yz7({token:f,factory:f.\u0275fac}),f})()},9659:(nt,_e,m)=>{"use strict";m.d(_e,{o:()=>W});var n=m(7579),e=m(4707),h=m(3334),S=m(590),y=m(3111),w=m(6126),f=m(8255),x=m(7243),b=m(7363),g=m(6068),N=m(8176),R=m(6679),k=m(7393),O=m(4650),P=m(1501),U=m(7481);let W=(()=>{class M{constructor(V,Q){this.importWizardProvider=V,this.importWizardService=Q,this.stepModified=!0,this.disableCloseButton=!1,this.stepsAhead=new Array,this.stepsCompleted=new Array,this.move=new n.x}setupInitialStep(){const V=this.importWizardProvider.getStep(h.K.clientSummary);this.stepsAhead.push(V)}goToNextStep(){const V=this.stepsAhead.pop();this.stepsCompleted.push(V),V.component===w.j&&V.data.includes(y.JR.Client)?this.createWizard().subscribe(()=>{this.move.next(!1)}):(V.component===b.$&&V.data.rememberSecretAction?this.stepsAhead=this.applyRememberDecision(V):V.component===R.V7&&V.data.rememberCertificateAction&&(this.stepsAhead=this.applyCertificateRememberDecision(V)),this.move.next(!1))}applyCertificateRememberDecision(V){const Q=[];return this.stepsAhead.forEach(Y=>{Y.component!==R.V7||Y.data.existingHasCertificates!==V.data.existingHasCertificates||(V.data.certificateAction===R.R6.DoNotSet?Y.data.certificates=new k.w:V.data.certificateAction===R.R6.UseExisting&&(Y.data.certificates=new k.w,Y.data.useExistingCertificates=!0),Q.push(Y),this.stepsCompleted.push(Y))}),this.stepsAhead.filter(Y=>!Q.includes(Y))}applyRememberDecision(V){const Q=[];return this.stepsAhead.forEach(Y=>{if(Y.component===b.$&&Y.data.resourceType===V.data.resourceType&&Y.data.existingHasSecrets===V.data.existingHasSecrets){if(V.data.secretsAction===b.C.DoNotSet)Y.data.secrets=[];else if(V.data.secretsAction===b.C.UseExistingSecret)Y.data.useExistingSecrets=!0;else if(V.data.secretsAction===b.C.Generate){const fe=new g.u;fe.value=(0,N.qs)(),fe.type="Shared Secret",fe.description="",Y.data.secrets=[fe]}Q.push(Y),this.stepsCompleted.push(Y)}}),this.stepsAhead.filter(Y=>!Q.includes(Y))}areStepsRemaning(){return this.stepsAhead.length>0}getCurrentStep(){return this.stepsAhead[this.stepsAhead.length-1]}goToPreviousStep(){if(0===this.stepsCompleted.length)return void this.insertAndOpenStep(h.K.importCloseWarning,!0);this.getCurrentStep().isDeadEnd&&this.stepsAhead.pop();const Q=this.stepsCompleted[this.stepsCompleted.length-1];if(Q.component===b.$)this.goToLastRememberedDecision(Q.component,Y=>Y.data.rememberSecretAction);else if(Q.component===R.V7)this.goToLastRememberedDecision(Q.component,Y=>Y.data.rememberCertificateAction&&Y.data.existingHasCertificates===Q.data.existingHasCertificates);else{const Y=this.stepsCompleted.pop();this.stepsAhead.push(Y)}this.move.next(!1)}goToLastRememberedDecision(V,Q){const Y=this.stepsCompleted.filter(fe=>fe.component===V);if(Y.length>1){const fe=Y.filter(Q);if(fe){const ee=this.stepsCompleted.indexOf(fe[fe.length-1]),G=this.stepsCompleted.splice(ee,this.stepsCompleted.length-1);this.stepsAhead=[...this.stepsAhead,...G.reverse()]}else{const J=this.stepsCompleted.pop();this.stepsAhead.push(J)}}else{const fe=this.stepsCompleted.pop();this.stepsAhead.push(fe)}}goToFinalSummary(){const V=this.stepsAhead.findIndex(Y=>Y.component===f.o),Q=this.stepsAhead.splice(V+1);for(;Q.length>0;){const Y=Q.pop();this.stepsCompleted.push(Y)}this.move.next(!1)}goToSummaryStep(V){const Q=this.stepsCompleted.findIndex(fe=>fe.component===w.j&&fe.data.includes(V)),Y=this.stepsCompleted.splice(Q);for(;Y.length>0;){const fe=Y.pop();this.stepsAhead.push(fe)}this.stepModified=!1,this.move.next(!1)}quit(){this.move.next(!0)}cancel(){const V=this.getCurrentStep();V.component===x.l?this.quit():V.isDeadEnd?this.goToPreviousStep():this.insertAndOpenStep(h.K.importCloseWarning)}clear(){this.stepsAhead=[],this.stepsCompleted=[],this.stepModified=!0}insertAndOpenStep(V,Q){const Y=this.stepsAhead.pop();this.stepsCompleted.push(Y);const fe=this.importWizardProvider.getStep(V);fe.data=Q,this.stepsAhead.push(fe),this.move.next(!1)}reset(){this.clear(),this.setupInitialStep(),this.move.next(!1)}createWizard(){this.stepsAhead=[];const V=new e.t;return this.importWizardService.cache.pipe((0,S.P)()).subscribe(Q=>{this.stepsAhead.push(this.importWizardProvider.getStep(h.K.importComplete)),this.showFinalSummary(Q)&&this.stepsAhead.push(this.importWizardProvider.getStep(h.K.finalSummary));const Y=this.sortImportResources(Q),fe=[],J=[];for(let ee=Y.length;ee>0;ee--){const G=Y[ee-1];let E=!1;G.resourceType===y.JR.ProtectedResource&&G.dependantClients.forEach(te=>{E=Q.some($=>$.identifier===te.identifier&&$.resourceState!==y.vZ.Duplicate)}),(G.selected||E)&&(G.existingHasSecrets&&fe.push(this.importWizardProvider.getSecretStep(G)),G.hadSecrets&&!G.existingHasSecrets&&fe.push(this.importWizardProvider.getSecretStep(G)),G.existingHasCertificates&&J.push(this.importWizardProvider.getCertificateStep(G)),G.hadCertificates&&!G.existingHasCertificates&&J.push(this.importWizardProvider.getCertificateStep(G)))}this.stepsAhead.push(...fe),this.stepsAhead.push(...J),this.showClaimTypeSummary(Q)&&this.stepsAhead.push(this.importWizardProvider.getStep(h.K.claimTypeSummary)),this.showResourceSummary(Q)&&this.stepsAhead.push(this.importWizardProvider.getStep(h.K.resourcesSummary)),V.next()}),V}sortImportResources(V){V=(V=V.sort((Y,fe)=>Y.displayName.toUpperCase().localeCompare(fe.displayName.toUpperCase()))).sort((Y,fe)=>+Y.conflictedByDependencies-+fe.conflictedByDependencies);const Q=[y.vZ.Conflicted,y.vZ.New,y.vZ.Duplicate];return V.sort((Y,fe)=>Q.indexOf(Y.resourceState)-Q.indexOf(fe.resourceState))}showResourceSummary(V){const Q=V.filter(fe=>fe.resourceType===y.JR.Client&&!0===fe.selected).map(fe=>fe.identifier),Y=V.filter(fe=>(fe.resourceType===y.JR.IdentityResource||fe.resourceType===y.JR.ProtectedResource)&&fe.dependantClients.map(J=>J.identifier).some(J=>Q.includes(J)));return Y.length>0&&Y.some(fe=>fe.resourceState===y.vZ.Conflicted)}showClaimTypeSummary(V){const Q=V.filter(fe=>fe.resourceType===y.JR.Client&&!0===fe.selected).map(fe=>fe.identifier),Y=V.filter(fe=>fe.resourceType===y.JR.ClaimType&&fe.dependantClients.map(J=>J.identifier).some(J=>Q.includes(J)));return Y.length>0&&Y.some(fe=>fe.resourceState===y.vZ.Conflicted)}showFinalSummary(V){return V.some(Q=>Q.resourceType!==y.JR.Client)}}return M.\u0275fac=function(V){return new(V||M)(O.LFG(P.o),O.LFG(U.U))},M.\u0275prov=O.Yz7({token:M,factory:M.\u0275fac}),M})()},1501:(nt,_e,m)=>{"use strict";m.d(_e,{o:()=>J});var n=m(3111),e=m(6126),h=m(7331),S=m(5744),y=m(9506),w=m(4650),f=m(7481),x=m(9383);let b=(()=>{class G extends y.n{constructor(te){super(),this.importWizardService=te,this.isWarningModal=!0,this.resetOnClose=!1}set data(te){null!==te&&(this.resetOnClose=te)}yes(){this.resetOnClose?this.importWizardService.resetImport.next("Resetting Import"):this.quit()}no(){this.back()}}return G.\u0275fac=function(te){return new(te||G)(w.Y36(f.U))},G.\u0275cmp=w.Xpm({type:G,selectors:[["app-import-close-warning"]],features:[w.qOj],decls:14,vars:12,consts:[[1,"modal-body","tw-text-center","scrollbars"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","stayBtn",1,"tw-btn-danger",3,"click"],["id","leaveBtn",1,"tw-btn-link","tw--mr-4",3,"click"]],template:function(te,$){1&te&&(w.TgZ(0,"div",0)(1,"p"),w._uU(2),w.ALo(3,"translate"),w.ALo(4,"translate"),w.qZA()(),w.TgZ(5,"div",1)(6,"div",2)(7,"div",3)(8,"button",4),w.NdJ("click",function(){return $.no()}),w._uU(9),w.ALo(10,"translate"),w.qZA()(),w.TgZ(11,"button",5),w.NdJ("click",function(){return $.yes()}),w._uU(12),w.ALo(13,"translate"),w.qZA()()()),2&te&&(w.xp6(2),w.AsE("",w.lcZ(3,4,"Clients.Import.Wizard.Warning.Text1")," ",w.lcZ(4,6,"Clients.Import.Wizard.Warning.Text2"),""),w.xp6(7),w.Oqu(w.lcZ(10,8,"Notifications.StayHere")),w.xp6(3),w.Oqu(w.lcZ(13,10,"Notifications.DiscardChanges")))},dependencies:[x.X$],encapsulation:2}),G})();var g=m(3334),N=m(5669),R=m(6895);function k(G,E){1&G&&(w.TgZ(0,"p"),w._uU(1),w.ALo(2,"translate"),w.qZA()),2&G&&(w.xp6(1),w.Oqu(w.lcZ(2,1,"Clients.Import.Wizard.Summary.Conflicts.Confirmation.Resource")))}let O=(()=>{class G extends y.n{constructor(te){super(),this.importWizardService=te,this.isWarningModal=!0}set data(te){this.resource=te,this.summaryDisplayType=N.m.getSummaryDisplayType(te.resourceType)}yes(){this.importWizardService.deselectResource(this.resource),this.reset()}no(){this.back()}}return G.\u0275fac=function(te){return new(te||G)(w.Y36(f.U))},G.\u0275cmp=w.Xpm({type:G,selectors:[["app-conflicts-confirmation"]],features:[w.qOj],decls:14,vars:11,consts:[[1,"modal-body","tw-text-center"],[4,"ngIf"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","leaveBtn",1,"tw-btn-danger","tw--mr-4",3,"click"],["id","stayBtn",1,"tw-btn-link",3,"click"]],template:function(te,$){1&te&&(w.TgZ(0,"div",0)(1,"p"),w._uU(2),w.ALo(3,"translate"),w.qZA(),w.YNc(4,k,3,3,"p",1),w.qZA(),w.TgZ(5,"div",2)(6,"div",3)(7,"div",4)(8,"button",5),w.NdJ("click",function(){return $.no()}),w._uU(9),w.ALo(10,"translate"),w.qZA()(),w.TgZ(11,"button",6),w.NdJ("click",function(){return $.yes()}),w._uU(12),w.ALo(13,"translate"),w.qZA()()()),2&te&&(w.xp6(2),w.AsE("",w.lcZ(3,5,"Clients.Import.Wizard.Summary.Conflicts.Confirmation.AreYouSure")," ",null==$.resource?null:$.resource.displayName,""),w.xp6(2),w.Q6J("ngIf","Client"!==$.summaryDisplayType),w.xp6(5),w.Oqu(w.lcZ(10,7,"Clients.Import.Wizard.Warning.No")),w.xp6(3),w.Oqu(w.lcZ(13,9,"Clients.Import.Wizard.Warning.Yes")))},dependencies:[R.O5,x.X$],encapsulation:2}),G})();var P=m(8255),U=m(7363),W=m(7243),M=m(6679),B=m(5861),V=m(1696);const Q=["certReader"],Y=["nextButton"];let fe=(()=>{class G extends y.n{constructor(te){super(),this.translate=te}get data(){return this._subject}set data(te){this._subject=te}certificateDataLoaded(te){this.nextButton.nativeElement.disabled=!te}goNext(){var te=this;return(0,B.Z)(function*(){const $=yield te.certReaderComponent.getCertificateModel();te.data.next($),te.importWizardController.goToPreviousStep()})()}}return G.\u0275fac=function(te){return new(te||G)(w.Y36(x.sK))},G.\u0275cmp=w.Xpm({type:G,selectors:[["app-import-certificate-picker"]],viewQuery:function(te,$){if(1&te&&(w.Gf(Q,5),w.Gf(Y,5)),2&te){let ue;w.iGM(ue=w.CRH())&&($.certReaderComponent=ue.first),w.iGM(ue=w.CRH())&&($.nextButton=ue.first)}},features:[w.qOj],decls:21,vars:21,consts:[[1,"modal-body"],[3,"uploadCert","uploadCertHelp","certMetaData","certMetaDataHelp","dataExists"],["certReader",""],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","nextBtn","disabled","",1,"tw-btn-success","tw-mr-3",3,"click"],["nextButton",""],["id","backBtn",1,"tw-btn",3,"click"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"]],template:function(te,$){1&te&&(w.TgZ(0,"div",0)(1,"app-cert-reader",1,2),w.NdJ("dataExists",function(me){return $.certificateDataLoaded(me)}),w.ALo(3,"translate"),w.ALo(4,"translate"),w.ALo(5,"translate"),w.ALo(6,"translate"),w.qZA()(),w._UZ(7,"div",3),w.TgZ(8,"div",4)(9,"div",5)(10,"div",6)(11,"button",7,8),w.NdJ("click",function(){return $.goNext()}),w._uU(13),w.ALo(14,"translate"),w.qZA(),w.TgZ(15,"button",9),w.NdJ("click",function(){return $.back()}),w._uU(16),w.ALo(17,"translate"),w.qZA()(),w.TgZ(18,"button",10),w.NdJ("click",function(){return $.cancel()}),w._uU(19),w.ALo(20,"translate"),w.qZA()()()),2&te&&(w.xp6(1),w.Q6J("uploadCert",w.lcZ(3,7,"Clients.Saml.UploadCert"))("uploadCertHelp",w.lcZ(4,9,"Clients.Saml.UploadCertHelp"))("certMetaData",w.lcZ(5,11,"Clients.Saml.ServiceProviderSigningCert"))("certMetaDataHelp",w.lcZ(6,13,"Clients.Saml.ServiceProviderSigningCertHelp")),w.xp6(12),w.hij(" ",w.lcZ(14,15,"Common.Add")," "),w.xp6(3),w.hij(" ",w.lcZ(17,17,"Common.Back")," "),w.xp6(3),w.hij(" ",w.lcZ(20,19,"Common.Cancel")," "))},dependencies:[V.c,x.X$],encapsulation:2}),G})(),J=(()=>{class G{constructor(){this.stepMap=new Map,this.stepMap.set(g.K.clientSummary,new ee(e.j,"Clients.Import.Wizard.Summary.Title.Client",[n.JR.Client])),this.stepMap.set(g.K.resourcesSummary,new ee(e.j,"Clients.Import.Wizard.Summary.Title.Resource",[n.JR.IdentityResource,n.JR.ProtectedResource])),this.stepMap.set(g.K.claimTypeSummary,new ee(e.j,"Clients.Import.Wizard.Summary.Title.ClaimType",[n.JR.ClaimType])),this.stepMap.set(g.K.summaryConflicts,new ee(S.Gz,"Clients.Import.Wizard.Summary.Conflicts.ReviewChanges",null,!0)),this.stepMap.set(g.K.importComplete,new ee(h.l,"Clients.Import.Wizard.CompleteImport.ImportComplete")),this.stepMap.set(g.K.importCloseWarning,new ee(b,"Clients.Import.Wizard.Warning.Title",null,!0)),this.stepMap.set(g.K.summaryConflictsConfirmation,new ee(O,"Clients.Import.Wizard.Warning.Title",null,!0)),this.stepMap.set(g.K.finalSummary,new ee(P.o,"Clients.Import.Wizard.Summary.Title.Final")),this.stepMap.set(g.K.importDownloadWarning,new ee(W.l,"Clients.Import.Wizard.CompleteImport.DownloadSecrets")),this.stepMap.set(g.K.importUploadCertificate,new ee(fe,"Clients.Import.Wizard.Certificates.AddCertificate",null,!0))}getStep(te){return this.stepMap.get(te)}getSecretStep(te){return new ee(U.$,"Clients.Import.Wizard.Secrets.Title",te)}getCertificateStep(te){return new ee(M.V7,"Clients.Import.Wizard.Certificates.Title",te)}}return G.\u0275fac=function(te){return new(te||G)},G.\u0275prov=w.Yz7({token:G,factory:G.\u0275fac}),G})();class ee{constructor(E,te,$,ue=!1){this.component=E,this.stepTitle=te,this.data=$,this.isDeadEnd=ue}}},7481:(nt,_e,m)=>{"use strict";m.d(_e,{U:()=>y});var n=m(3111),e=m(4707),h=m(590),S=m(4650);let y=(()=>{class w{constructor(){this.importResourceTypeMap=new Map([[n.JR.Client,"Client"],[n.JR.ClaimType,"Claim Type"],[n.JR.ProtectedResource,"Protected Resource"],[n.JR.IdentityResource,"Identity Resource"]]),this.cache=new e.t(1),this.resetImport=new e.t(1)}updateSelectedClients(x){this.cache.pipe((0,h.P)()).subscribe(b=>{x=x.filter(g=>g.resourceType===n.JR.Client),b.forEach(g=>{const N=x.find(R=>R.identifier===g.identifier);void 0!==N&&(g.selected=N.selected)}),this.cache.next(b)})}selectResource(x){this.setResourcesSelected(x,!0)}deselectResource(x){this.setResourcesSelected(x,!1)}setResourcesSelected(x,b){this.cache.pipe((0,h.P)()).subscribe(g=>{let N;N=x.resourceType===n.JR.Client?[x.identifier]:x.dependantClients.filter(k=>k.state===n.CP.Importing).map(k=>k.identifier),N.forEach(R=>{g.find(k=>k.identifier===R&&k.resourceType===n.JR.Client).selected=b}),this.cache.next(g)})}downloadClientSecretsFromCache(){const x=new e.t;return this.cache.pipe((0,h.P)()).subscribe(b=>{const g=b.filter(O=>O.secrets&&O.secrets.length>0);let N="Type,Id,Name,Secret\r\n";g.forEach(O=>{O.secrets.forEach(P=>{N+=this.importResourceTypeMap.get(O.resourceType)+","+O.identifier+","+O.displayName+","+P.value+"\r\n"})});const R=new Blob([N],{type:"application/csv"}),k=document.createElement("a");k.download="import-secrets.csv",k.href=window.URL.createObjectURL(R),k.click(),k.remove(),x.next()}),x}}return w.\u0275fac=function(x){return new(x||w)},w.\u0275prov=S.Yz7({token:w,factory:w.\u0275fac}),w})()},3334:(nt,_e,m)=>{"use strict";m.d(_e,{K:()=>n});let n=(()=>{class e{}return e.importUploadCertificate="CertificateUpload",e.clientSummary="ClientSummary",e.resourcesSummary="ResourcesSummary",e.summaryConflicts="SummaryConflicts",e.claimTypeSummary="ClaimTypeSummary",e.importComplete="ImportComplete",e.importCloseWarning="ImportCloseWarning",e.summaryConflictsConfirmation="SummaryConflictsConfirmation",e.finalSummary="FinalSummary",e.importDownloadWarning="ImportDownloadWarning",e})()},4717:(nt,_e,m)=>{"use strict";m.d(_e,{E:()=>h});var n=m(529),e=m(4650);let h=(()=>{class S{constructor(w){this.http=w,this.headers=new n.WM,this.actionUrl="license"}getLicenseInfo(){return this.headers=this.headers.set("Content-Type","application/json").set("Accept","application/json").set("Access-Control-Allow-Origin","true"),this.http.get(this.actionUrl,{headers:this.headers})}}return S.\u0275fac=function(w){return new(w||S)(e.LFG(n.eN))},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac}),S})()},6548:(nt,_e,m)=>{"use strict";m.d(_e,{$:()=>h});var n=m(529),e=m(4650);let h=(()=>{class S{constructor(w){this.http=w,this.headers=new n.WM,this.actionUrl="permission",this.headers=this.headers.set("Content-Type","application/json").set("Accept","application/json").set("Access-Control-Allow-Origin","true")}getUserPermissions(){return this.http.get(this.actionUrl,{headers:this.headers})}getAvaliablePermissions(){return this.http.get(this.actionUrl+"/avaliable",{headers:this.headers})}}return S.\u0275fac=function(w){return new(w||S)(e.LFG(n.eN))},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac}),S})()},7733:(nt,_e,m)=>{"use strict";m.d(_e,{m:()=>w});var n=m(529),e=m(4707),h=m(8176),S=m(4650),y=m(8564);let w=(()=>{class f{constructor(b,g){this.http=b,this.headersService=g,this.protectedResourceSubject=new e.t(1),this.actionUrl="ProtectedResources",this.headers=g.setHeaders()}getCachedProtectedResource(){return this.protectedResourceSubject}getProtectedResources(b){let g=new n.LE;return(0,h.Ew)(b)||(g=g.set("name",b)),this.http.get(this.actionUrl,{headers:this.headers,params:g})}getResourcesPaginated(b,g,N){const R=`${this.actionUrl}/getPaginated`;let k=new n.LE;return(0,h.Ew)(b)||(k=k.set("name",b)),g&&(k=k.append("page",g)),N&&(k=k.append("pageSize",N)),this.http.get(R,{headers:this.headers,params:k})}addResource(b){const g=`${this.actionUrl}/`,N=JSON.stringify(b);return this.http.post(g,N,{headers:this.headers})}getResource(b){return this.http.get(`${this.actionUrl}/${b}`,{headers:this.headers})}updateResource(b){return this.http.put(`${this.actionUrl}/${b.id}`,b,{headers:this.headers})}updateResourceSecret(b,g){return this.http.put(`${this.actionUrl}/${b}/secrets/${g.id}`,g,{headers:this.headers})}removeResourceSecret(b,g){return this.http.delete(`${this.actionUrl}/${b}/secrets/${g}`,{headers:this.headers})}addResourceSecret(b,g){return this.http.post(`${this.actionUrl}/${b}/secrets`,g,{headers:this.headers})}updateResourceScope(b,g,N){const R=encodeURIComponent(N);return this.http.put(`${this.actionUrl}/${b}/scopes/${R}`,g,{headers:this.headers})}addResourceScope(b,g){return this.http.post(`${this.actionUrl}/${b}/scopes`,g,{headers:this.headers})}deleteProtectedResource(b){return this.http.delete(`${this.actionUrl}/${b}`,{headers:this.headers})}deleteScope(b,g){const N=encodeURIComponent(g);return this.http.delete(`${this.actionUrl}/${b}/scopes/${N}`,{headers:this.headers})}getAllScopes(){return this.http.get(`${this.actionUrl}/scopes`,{headers:this.headers})}}return f.\u0275fac=function(b){return new(b||f)(S.LFG(n.eN),S.LFG(y.s))},f.\u0275prov=S.Yz7({token:f,factory:f.\u0275fac}),f})()},927:(nt,_e,m)=>{"use strict";m.d(_e,{O:()=>b});var n=m(515),e=m(4004),h=m(262),S=m(4879),y=m(4650),w=m(9883),f=m(8185),x=m(4889);let b=(()=>{class g{constructor(R,k,O){this.roleService=R,this.router=k,this.errorService=O}resolve(R,k){const O=R.paramMap.get("Id");return this.roleService.getRole(O).pipe((0,e.U)(P=>(P&&this.roleService.getCachedRole().next(P),P)),(0,h.K)((P,U)=>(404===P.status?this.errorService.resourceNotFound(S._.role):this.errorService.handleError(P),(0,n.c)())))}}return g.\u0275fac=function(R){return new(R||g)(y.LFG(w.f),y.LFG(f.F0),y.LFG(x.T))},g.\u0275prov=y.Yz7({token:g,factory:g.\u0275fac}),g})()},9883:(nt,_e,m)=>{"use strict";m.d(_e,{f:()=>w});var n=m(529),e=m(4707),h=m(8176),S=m(4650),y=m(8564);let w=(()=>{class f{constructor(b,g){this.http=b,this.RoleSubject=new e.t(1),this.actionUrl="roles",this.headers=g.setHeaders()}getCachedRole(){return this.RoleSubject}setCachedRole(b){this.RoleSubject.next(b)}getRoles(b,g){let N=new n.LE;return(0,h.Ew)(b)||(N=N.append("name",b)),N=N.append("sort",(0,h.Ew)(g)?"name":g),this.http.get(this.actionUrl,{headers:this.headers,params:N})}getRole(b){return this.http.get(`${this.actionUrl}/${b}`,{headers:this.headers})}deleteRole(b){return this.http.delete(`${this.actionUrl}/${b.id}`,{headers:this.headers})}addRole(b){const g=`${this.actionUrl}/`,N=JSON.stringify(b);return this.http.post(g,N,{headers:this.headers})}updateRole(b){const g=JSON.stringify(b);return this.http.put(`${this.actionUrl}/${b.id}`,g,{headers:this.headers})}getUsersInRole(b,g,N,R){let k=new n.LE;return(0,h.Ew)(R)||(k=k.append("q",R)),g&&(k=k.append("page",String(g))),N&&(k=k.append("pageSize",String(N))),this.http.get(`${this.actionUrl}/${b}/users`,{headers:this.headers,params:k})}addAndRemoveUsers(b,g){const N=JSON.stringify(g);return this.http.put(`${this.actionUrl}/${b}/users`,N,{headers:this.headers})}}return f.\u0275fac=function(b){return new(b||f)(S.LFG(n.eN),S.LFG(y.s))},f.\u0275prov=S.Yz7({token:f,factory:f.\u0275fac}),f})()},8677:(nt,_e,m)=>{"use strict";m.d(_e,{B:()=>U});var n=m(9646),e=m(1848),h=m(7579),S=m(3900),y=m(5373),w=m(4650),f=m(1060),x=m(4946),b=m(1228),g=m(2979),N=m(4889),R=m(1058),k=m(8185),O=m(9881),P=m(9455);let U=(()=>{class W{constructor(B,V,Q,Y,fe,J,ee,G,E){this.securityService=B,this.healthCheckService=V,this.authService=Q,this.localizeRouter=Y,this.errorService=fe,this.loginTrackingService=J,this.router=ee,this.configService=G,this.appComponentViewService=E}canActivate(B,V){return this.healthCheckService.uiReady?this.authDecision(B,V):this.healthCheckService.uiHealthCheckComplete.pipe((0,S.w)(Q=>this.authDecision(B,V)))}authDecision(B,V){return document.dispatchEvent(new Event("appready")),this.authService.isAuthenticated?(this.authService.user==y.n.DefaultAdministratorUsername&&!this.authService.isCreatingInitialAdministrator&&this.configService.getConfig().subscribe(Q=>{if(Q.featureFlagOptions.defaultUserValidation){this.authService.isCreatingInitialAdministrator=!0;const Y=this.localizeRouter.translateRoute("/initial-admin-creation");this.router.navigate([Y])}}),void 0!==this.securityService.userPermissions?(0,n.of)(this.permissionAuthDecision(B)):this.permissionAuthDecisionAsObservable(B)):(this.securityService.startLogin(V.url),e.C)}permissionAuthDecision(B){const V=B.data.permissions;if(void 0===V)return!0;for(let Q=0;Q<V.length;Q++)if(this.securityService.userPermissions.includes(V[Q]))return!0;return this.errorService.handleError({status:403}),!1}permissionAuthDecisionAsObservable(B){const V=new h.x;return this.securityService.init().subscribe(()=>{V.next(this.permissionAuthDecision(B))}),V.asObservable()}}return W.\u0275fac=function(B){return new(B||W)(w.LFG(f.I),w.LFG(x.G),w.LFG(b.e),w.LFG(g.An),w.LFG(N.T),w.LFG(R.U),w.LFG(k.F0),w.LFG(O.E),w.LFG(P.t))},W.\u0275prov=w.Yz7({token:W,factory:W.\u0275fac}),W})()},1060:(nt,_e,m)=>{"use strict";m.d(_e,{I:()=>B});var n=m(7579);class e extends n.x{constructor(){super(...arguments),this._value=null,this._hasValue=!1,this._isComplete=!1}_checkFinalizedStatuses(Q){const{hasError:Y,_hasValue:fe,_value:J,thrownError:ee,isStopped:G,_isComplete:E}=this;Y?Q.error(ee):(G||E)&&(fe&&Q.next(J),Q.complete())}next(Q){this.isStopped||(this._value=Q,this._hasValue=!0)}complete(){const{_hasValue:Q,_value:Y,_isComplete:fe}=this;fe||(this._isComplete=!0,Q&&super.next(Y),super.complete())}}var h=m(4128),S=m(1206),y=m(4004),w=m(5698),f=m(8176),x=m(2976),b=m(4650),g=m(8185),N=m(2979),R=m(9881),k=m(1228),O=m(6548),P=m(4717),U=m(4889),W=m(1058),M=m(9383);let B=(()=>{class V{constructor(Y,fe,J,ee,G,E,te,$,ue){this.router=Y,this.localize=fe,this.configService=J,this.authService=ee,this.permissionService=G,this.licenseService=E,this.errorService=te,this.loginTrackingService=$,this.translate=ue,this.userPermissions$=new e,this.userManagerView=!1,this.userManagerReadOnlyView=!1,this.identityServerManagerView=!1,this.identityServerManagerReadOnlyView=!1,this.allReadOnlyView=!1,this.allView=!1,this.auditerView=!1,this.noPermissions=!1,this.licenseType="",this.organisation="",this.nonProduction=!1,this.storage=sessionStorage}startLogin(Y){let J=Y??this.router.url;J=J.replace(`/${this.localize.parser.currentLang}`,""),this.storage.setItem("redirectUrl",J),this.loginTrackingService.startLogin(),this.authService.login()}onAuthorizationResultComplete(Y){if(Y.isAuthenticated){let fe=this.storage.getItem("redirectUrl");null==fe&&(fe="/home");const J=this.localize.translateRoute(fe);this.handleSuccessfulAuthorization(J)}else this.handleUnsuccessfulAuthorization(Y.username)}handleSuccessfulAuthorization(Y){this.init().subscribe(()=>{this.loginTrackingService.endLogin(),this.storage.removeItem("redirectUrl"),this.router.navigateByUrl(Y)},fe=>{this.loginTrackingService.canRetryLogin?(this.loginTrackingService.retryLogin(),this.authService.login()):this.errorService.handleError(fe,{toastBody:this.translate.instant("Errors.LoginLoopError",{link:x.de.loginRedirectLoopDocs}),toastTitle:this.translate.instant("Notifications.Error")},{timeOut:0,extendedTimeOut:0,enableHtml:!0})})}handleUnsuccessfulAuthorization(Y){if((0,f.Ew)(Y))return void(this.loginTrackingService.canRetryLogin?(this.loginTrackingService.retryLogin(),this.authService.login()):this.errorService.handleError({},{toastBody:this.translate.instant("Errors.LoginLoopError",{link:x.de.loginRedirectLoopDocs}),toastTitle:this.translate.instant("Notifications.Error")},{timeOut:0,extendedTimeOut:0,enableHtml:!0}));const fe=this.localize.translateRoute("/unauthorized");this.router.navigateByUrl(fe)}isNonProd(){return"Demo"===this.licenseType||"Non-Production"===this.licenseType}init(){const Y=[this.initUsersPermissions(),this.initLicenseInfo(),this.initUiConfiguration()];return(0,h.D)(Y)}initUsersPermissions(){return this.permissionService.getUserPermissions().pipe((0,y.U)(Y=>{this.userPermissions=Y.permissions,this.policyClaims=Y.policyClaims,void 0!==this.userPermissions&&(this.userPermissions.includes(S.y[S.y.All])?(this.userManagerView=!0,this.userManagerReadOnlyView=!1,this.identityServerManagerView=!0,this.identityServerManagerReadOnlyView=!1,this.allReadOnlyView=!1,this.auditerView=!0,this.allView=!0):this.userPermissions.includes(S.y[S.y.AllReadOnly])?(this.userManagerView=!1,this.userManagerReadOnlyView=!0,this.identityServerManagerView=!1,this.identityServerManagerReadOnlyView=!0,this.allReadOnlyView=!0,this.auditerView=!0,this.allView=!1):(this.userManagerView=this.userPermissions.includes(S.y[S.y.UserManager]),this.userManagerReadOnlyView=this.userPermissions.includes(S.y[S.y.UserManagerReadOnly]),this.identityServerManagerView=this.userPermissions.includes(S.y[S.y.IdentityServerManager]),this.identityServerManagerReadOnlyView=this.userPermissions.includes(S.y[S.y.IdentityServerManagerReadOnly]),this.auditerView=this.userPermissions.includes(S.y[S.y.Auditer]),this.userManagerView||this.userManagerReadOnlyView||this.identityServerManagerView||this.identityServerManagerReadOnlyView||this.auditerView||this.allView||this.allReadOnlyView||(this.noPermissions=!0))),this.userPermissions$.next(Y.permissions),this.userPermissions$.complete()},Y=>{this.errorService.handleError(Y)}))}initLicenseInfo(){return this.licenseService.getLicenseInfo().pipe((0,y.U)(Y=>{this.licenseType=Y.licenseType,"NonProduction"===this.licenseType&&(this.licenseType="Non-Production"),this.nonProduction="Production"!==Y.licenseType,this.organisation=Y.organisation}))}initUiConfiguration(){return this.configService.getConfig().pipe((0,w.q)(1))}}return V.\u0275fac=function(Y){return new(Y||V)(b.LFG(g.F0),b.LFG(N.An),b.LFG(R.E),b.LFG(k.e),b.LFG(O.$),b.LFG(P.E),b.LFG(U.T),b.LFG(W.U),b.LFG(M.sK))},V.\u0275prov=b.Yz7({token:V,factory:V.\u0275fac}),V})()},1339:(nt,_e,m)=>{"use strict";m.d(_e,{G:()=>y});var n=m(4707),e=m(4650),h=m(529),S=m(8564);let y=(()=>{class w{constructor(x,b){this.http=x,this.headersService=b,this.ServiceProviderSubject=new n.t(1),this.actionUrl="clients",this.headers=b.setHeaders()}getCachedServiceProvider(){return this.ServiceProviderSubject}getServiceProvider(x){return this.http.get(`${this.actionUrl}/${x}/saml`,{headers:this.headers})}updateServiceProvider(x,b){const g=`${this.actionUrl}/${x}/saml`,N={allowIdpInitiatedSso:b.allowIdpInitiatedSso,assertionConsumerServices:b.assertionConsumerServices,artifactResolutionServices:b.artifactResolutionServices,claimMappings:b.claimMappings,encryptAssertions:b.encryptAssertions,requireSamlMessageDestination:b.requireSamlMessageDestination,signAssertions:b.signAssertions,singleLogoutServices:b.singleLogoutServices,requireAuthenticationRequestsSigned:b.requireAuthenticationRequestsSigned,artifactDeliveryBindingType:b.artifactDeliveryBindingType,requireSignedArtifactResolveRequests:b.requireSignedArtifactResolveRequests,requireSignedArtifactResponses:b.requireSignedArtifactResponses,nameIdentifierFormat:b.nameIdentifierFormat},R=this.headersService.setHeaders("application/vnd.adminui.sam-client-update-v2+json","application/vnd.adminui.saml-client-v2+json");return this.http.put(g,N,{headers:R})}setEncryptionCertificateViaFile(x,b){const g=`${this.actionUrl}/${x}/saml/certificates/encryption`,N=b,R=this.headersService.setHeaders("application/x-x509-ca-cert");return this.http.put(g,N,{headers:R})}setEncryptionCertificateViaMetadata(x,b){const g=`${this.actionUrl}/${x}/saml/certificates/encryption`,N=b,R=this.headersService.setHeaders("application/x-x509-ca-cert-base64");return this.http.put(g,N,{headers:R})}deleteEncryptionCertificate(x){return this.http.delete(`${this.actionUrl}/${x}/saml/certificates/encryption`,{headers:this.headers})}addSigningCertificateViaFile(x,b){const g=`${this.actionUrl}/${x}/saml/certificates/signing`,N=b,R=this.headersService.setHeaders("application/x-x509-ca-cert");return this.http.post(g,N,{headers:R})}addSigningCertificateViaMetadata(x,b){const g=`${this.actionUrl}/${x}/saml/certificates/signing`,N=b,R=this.headersService.setHeaders("application/x-x509-ca-cert-base64");return this.http.post(g,N,{headers:R})}deleteSigningCertificate(x,b){return this.http.delete(`${this.actionUrl}/${x}/saml/certificates/signing/${b}`,{headers:this.headers})}}return w.\u0275fac=function(x){return new(x||w)(e.LFG(h.eN),e.LFG(S.s))},w.\u0275prov=e.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},5302:(nt,_e,m)=>{"use strict";m.d(_e,{L:()=>w});var n=m(590),e=m(4650),h=m(1339),S=m(9536),y=m(4889);let w=(()=>{class f{constructor(b,g,N){this.serviceProviderService=b,this.cache=g,this.errorService=N}uploadFile(b,g){return this.serviceProviderService.addSigningCertificateViaFile(b,g)}uploadViaMetaData(b,g){return this.serviceProviderService.addSigningCertificateViaMetadata(b,g)}updateCertCache(b){this.serviceProviderService.getServiceProvider(b).subscribe(g=>{this.cache.unsavedCache$.pipe((0,n.P)()).subscribe(N=>{N.signingCertificates=g.signingCertificates,this.cache.unsavedCache.next(N)})},g=>{this.errorService.handleError(g)})}}return f.\u0275fac=function(b){return new(b||f)(e.LFG(h.G),e.LFG(S.S),e.LFG(y.T))},f.\u0275prov=e.Yz7({token:f,factory:f.\u0275fac}),f})()},9260:(nt,_e,m)=>{"use strict";m.d(_e,{O:()=>h});var n=m(1837),e=m(4650);let h=(()=>{class S{now(){return n.ou.now()}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac}),S})()},9490:(nt,_e,m)=>{"use strict";m.d(_e,{o:()=>h});var n=m(4650),e=m(7185);let h=(()=>{class S{constructor(w){this.inner=w}success_noduplicate(w,f){return this.showToast(w,f,(x,b)=>this.inner.success(x,b))}error_noduplicate(w,f){return this.showToast(w,f,(x,b)=>this.inner.error(x,b))}showToast(w,f,x){var b=this.inner.findDuplicate(f,w,!1,!1);return b&&this.inner.remove(b.toastId),x(w,f)}}return S.\u0275fac=function(w){return new(w||S)(n.LFG(e._W))},S.\u0275prov=n.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},8783:(nt,_e,m)=>{"use strict";m.d(_e,{L:()=>x});var n=m(515),e=m(4004),h=m(262),S=m(4879),y=m(4650),w=m(4961),f=m(4889);let x=(()=>{class b{constructor(N,R){this.userService=N,this.errorService=R}resolve(N,R){return this.userService.getUser(N.params.Id).pipe((0,e.U)(O=>(O&&this.userService.getCachedUser().next(O),O)),(0,h.K)((O,P)=>(404===O.status?this.errorService.resourceNotFound(S._.user):this.errorService.handleError(O),(0,n.c)())))}}return b.\u0275fac=function(N){return new(N||b)(y.LFG(w.K),y.LFG(f.T))},b.\u0275prov=y.Yz7({token:b,factory:b.\u0275fac}),b})()},4961:(nt,_e,m)=>{"use strict";m.d(_e,{K:()=>f});var n=m(529),e=m(4707),h=m(4004),S=m(8176),y=m(4650),w=m(8564);let f=(()=>{class x{constructor(g,N){this.http=g,this.headersService=N,this.userSubject=new e.t(1),this.actionUrl="users",this.headers=this.headersService.setHeaders()}getUser(g){return this.http.get(`${this.actionUrl}/${g}`,{headers:this.headers}).pipe((0,h.U)(R=>(this.userSubject.next(R),R),R=>(this.userSubject.error(R),R)))}getCachedUser(){return this.userSubject}getUsers(g,N,R,k,O){let P=new n.LE;return(0,S.Ew)(g)||(P=P.append("q",g)),N&&(P=P.append("page",String(N))),R&&(P=P.append("pageSize",String(R))),k&&(P=P.append("state",k.toString())),O&&(P=P.append("sort",O.toString())),this.http.get(this.actionUrl,{headers:this.headers,params:P})}getUsersLightweight(g,N,R,k,O){let P=new n.LE;return(0,S.Ew)(g)||(P=P.append("q",g)),N&&(P=P.append("page",String(N))),R&&(P=P.append("pageSize",String(R))),k&&(P=P.append("state",k.toString())),O&&(P=P.append("advancedFilters",O.toString())),this.http.get(`${this.actionUrl}/lightweight`,{headers:this.headers,params:P})}addUser(g){const N=`${this.actionUrl}/`,R=JSON.stringify(g);return this.http.post(N,R,{headers:this.headers,observe:"response"})}addInitialAdministrator(g){const N=`${this.actionUrl}/initialadmin`,R=JSON.stringify(g);return this.http.post(N,R,{headers:this.headers,observe:"response"})}getUserApps(g){return this.http.get(`${this.actionUrl}/${g}/apps`,{headers:this.headers})}revokeAllUserApps(g){return this.http.delete(`${this.actionUrl}/${g}/apps`,{headers:this.headers})}revokeSingleUserApp(g,N){return this.http.delete(`${this.actionUrl}/${g}/apps/${N}`,{headers:this.headers})}updateUser(g){const N=`${this.actionUrl}/${g.subject}`,R=JSON.stringify(g);return this.http.put(N,R,{headers:this.headers})}deleteUser(g){return this.http.delete(`${this.actionUrl}/${g.subject}`,{headers:this.headers})}deleteDefaultUser(){return this.http.delete(`${this.actionUrl}/removedefaultuser`,{headers:this.headers})}addUserRoles(g,N){return this.http.post(`${this.actionUrl}/${g}/roles`,N,{headers:this.headers})}deleteUserRoles(g,N){return this.http.request("delete",`${this.actionUrl}/${g}/roles`,{headers:this.headers,body:N})}addUserClaim(g,N){return this.http.post(`${this.actionUrl}/${g}/claims`,N,{headers:this.headers})}updateUserClaim(g,N){return this.http.put(`${this.actionUrl}/${g}/claims`,N,{headers:this.headers})}deleteUserClaim(g,N){return this.http.request("delete",`${this.actionUrl}/${g}/claims`,{headers:this.headers,body:N})}resetPassword(g){return this.http.get(`${this.actionUrl}/${g}/password/reset`,{headers:this.headers})}resetMfa(g){return this.http.get(`${this.actionUrl}/${g}/mfa/reset`,{headers:this.headers})}getUserLogins(g){return this.http.get(`${this.actionUrl}/${g}/logins`,{headers:this.headers})}revokeUserLogin(g,N){return this.http.request("delete",`${this.actionUrl}/${g}/logins`,{headers:this.headers,body:N})}getLightweightUsersAndIfInRole(g,N,R,k,O){let P=new n.LE;N&&(P=P.append("state",N.toString()));const U=`${this.actionUrl}/lightweight/isinrole/${g}`;return(0,S.Ew)(R)||(P=P.append("searchTerm",R)),k&&(P=P.append("page",String(k))),O&&(P=P.append("pageSize",String(O))),this.http.get(U,{headers:this.headers,params:P})}}return x.\u0275fac=function(g){return new(g||x)(y.LFG(n.eN),y.LFG(w.s))},x.\u0275prov=y.Yz7({token:x,factory:x.\u0275fac}),x})()},3499:(nt,_e,m)=>{"use strict";m.d(_e,{K:()=>S});var n=m(4650),e=m(529),h=m(8564);let S=(()=>{class y{constructor(f,x){this.http=f,this.headersService=x,this.actionUrl="clients"}getRelyingParty(f){const x=`${this.actionUrl}/${f}/wsfed`,b=this.headersService.setHeaders();return this.http.get(x,{headers:b})}updateRelyingParty(f,x){const b=`${this.actionUrl}/${f}/wsfed`,g=this.headersService.setHeaders("application/vnd.adminui.wsfed-relying-party-v1+json");return this.http.put(b,x,{headers:g})}}return y.\u0275fac=function(f){return new(f||y)(n.LFG(e.eN),n.LFG(h.s))},y.\u0275prov=n.Yz7({token:y,factory:y.\u0275fac}),y})()},8163:(nt,_e,m)=>{"use strict";m.d(_e,{K:()=>S});var n=m(4650);const e=[[["","left",""]],[["","right",""]]],h=["[left]","[right]"];let S=(()=>{class y{}return y.\u0275fac=function(f){return new(f||y)},y.\u0275cmp=n.Xpm({type:y,selectors:[["app-action-bar"]],ngContentSelectors:h,decls:4,vars:0,consts:[[1,"tw-flex","tw-items-center","tw-bg-grey-100","tw-py-4","tw-sticky","tw-top-0","tw-z-20"],[1,"tw-shrink-0","tw-ml-auto"]],template:function(f,x){1&f&&(n.F$t(e),n.TgZ(0,"div",0),n.Hsn(1),n.TgZ(2,"div",1),n.Hsn(3,1),n.qZA()())},encapsulation:2}),y})()},4022:(nt,_e,m)=>{"use strict";m.d(_e,{p:()=>w});var n=m(6895),e=m(8185),h=m(5503),S=m(9383),y=m(4650);let w=(()=>{class f{}return f.\u0275fac=function(b){return new(b||f)},f.\u0275mod=y.oAB({type:f}),f.\u0275inj=y.cJS({imports:[n.ez,e.Bz,h.D,S.aw]}),f})()},6055:(nt,_e,m)=>{"use strict";m.d(_e,{Ic:()=>e,zS:()=>h});var n=m(7340);function e(){return(0,n.X$)("fadeInOut",[(0,n.eR)(":enter",[(0,n.oB)({opacity:0}),(0,n.jt)("250ms",(0,n.oB)({opacity:1}))]),(0,n.eR)(":leave",[(0,n.oB)({opacity:1}),(0,n.jt)("250ms",(0,n.oB)({opacity:0}))])])}function h(){return(0,n.X$)("initLoad",[(0,n.eR)(":enter",[(0,n.oB)({opacity:0}),(0,n.jt)("250ms",(0,n.oB)({opacity:1}))]),(0,n.eR)(":leave",[(0,n.oB)({opacity:1}),(0,n.jt)("250ms",(0,n.oB)({opacity:0}))])])}},8192:(nt,_e,m)=>{"use strict";m.d(_e,{h:()=>g});var n=m(4006),e=m(8265),h=m(2320),S=m(9241),y=m(9383),w=m(9650),f=m(6493),x=m(6895),b=m(4650);let g=(()=>{class N{}return N.\u0275fac=function(k){return new(k||N)},N.\u0275mod=b.oAB({type:N}),N.\u0275inj=b.cJS({imports:[x.ez,e.j,n.UX,S.P4,y.aw,h.z8,w.I,f.l]}),N})()},7356:(nt,_e,m)=>{"use strict";m.d(_e,{$:()=>Qe});var n=m(7579),e=m(8675),h=m(5577),S=m(4006);class y{constructor(Ke,Je,Ct,ht){this.auditAction=Ke||"",this.subject=Je||"",this.resourceName=Ct||"",this.source=ht||""}}class w{constructor(Ke){this.auditAction=Ke.auditSearch.auditAction,this.subject=Ke.auditSearch.subject,this.resourceName=Ke.auditSearch.resourceName,this.source=Ke.auditSearch.source,this.fromDate=Ke.fromDate.toString(),this.toDate=Ke.toDate.toString(),this.page=Ke.page,this.pageSize=Ke.pageSize,this.sortCriteria=Ke.sortCriteria,this.success=Ke.success}}class f{constructor(Ke,Je,Ct,ht,Ze,oe,ie){this.auditSearch=Ke,this.fromDate=Je,this.toDate=Ct,this.page=ht,this.pageSize=Ze,this.sortCriteria=oe,this.success=ie}}var x=m(8176),b=m(1837),g=m(4650),N=m(3212),R=m(2979),k=m(8185),O=m(1060),P=m(1888),U=m(9260),W=m(6895),M=m(2320),B=m(7696),V=m(8163),Q=m(5925),Y=m(4225),fe=m(9383),J=m(3110);function ee(Xe,Ke){1&Xe&&(g.TgZ(0,"span",62),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&Xe&&(g.xp6(1),g.hij(" ",g.lcZ(2,1,"Auditing.FromDateWarning")," "))}function G(Xe,Ke){1&Xe&&(g.TgZ(0,"span",63),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&Xe&&(g.xp6(1),g.hij(" ",g.lcZ(2,1,"Auditing.ToDateBehindWarning")," "))}function E(Xe,Ke){if(1&Xe){const Je=g.EpF();g.TgZ(0,"li",67)(1,"button",68),g.NdJ("click",function(){g.CHM(Je);const ht=g.oxw(2);return g.KtG(ht.removeFilter("source"))}),g.TgZ(2,"b",69),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.TgZ(5,"span"),g._uU(6),g.qZA(),g._UZ(7,"span",70),g.qZA()()}if(2&Xe){const Je=g.oxw(2);g.xp6(3),g.hij("",g.lcZ(4,2,"Auditing.Source"),":"),g.xp6(3),g.Oqu(Je.filterForm.get("auditSearch").get("source").value)}}function te(Xe,Ke){if(1&Xe){const Je=g.EpF();g.TgZ(0,"li",67)(1,"button",71),g.NdJ("click",function(){g.CHM(Je);const ht=g.oxw(2);return g.KtG(ht.removeFilter("subject"))}),g.TgZ(2,"b",69),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.TgZ(5,"span"),g._uU(6),g.qZA(),g._UZ(7,"span",70),g.qZA()()}if(2&Xe){const Je=g.oxw(2);g.xp6(3),g.hij("",g.lcZ(4,2,"Auditing.Subject"),":"),g.xp6(3),g.Oqu(Je.filterForm.get("auditSearch").get("subject").value)}}function $(Xe,Ke){if(1&Xe){const Je=g.EpF();g.TgZ(0,"li",67)(1,"button",71),g.NdJ("click",function(){g.CHM(Je);const ht=g.oxw(2);return g.KtG(ht.removeFilter("auditAction"))}),g.TgZ(2,"b",69),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.TgZ(5,"span"),g._uU(6),g.qZA(),g._UZ(7,"span",70),g.qZA()()}if(2&Xe){const Je=g.oxw(2);g.xp6(3),g.hij("",g.lcZ(4,2,"Auditing.Action"),":"),g.xp6(3),g.Oqu(Je.filterForm.get("auditSearch").get("auditAction").value)}}function ue(Xe,Ke){if(1&Xe){const Je=g.EpF();g.TgZ(0,"li",67)(1,"button",71),g.NdJ("click",function(){g.CHM(Je);const ht=g.oxw(2);return g.KtG(ht.removeFilter("resourceName"))}),g.TgZ(2,"b",69),g._uU(3),g.ALo(4,"translate"),g.qZA(),g.TgZ(5,"span"),g._uU(6),g.qZA(),g._UZ(7,"span",70),g.qZA()()}if(2&Xe){const Je=g.oxw(2);g.xp6(3),g.hij("",g.lcZ(4,2,"Auditing.Resource"),":"),g.xp6(3),g.Oqu(Je.filterForm.get("auditSearch").get("resourceName").value)}}function me(Xe,Ke){if(1&Xe&&(g.TgZ(0,"div",64)(1,"p",47),g._uU(2),g.ALo(3,"translate"),g.qZA(),g.TgZ(4,"ul",65),g.YNc(5,E,8,4,"li",66),g.YNc(6,te,8,4,"li",66),g.YNc(7,$,8,4,"li",66),g.YNc(8,ue,8,4,"li",66),g.qZA()()),2&Xe){const Je=g.oxw();g.xp6(2),g.Oqu(g.lcZ(3,5,"Auditing.ActiveFilters")),g.xp6(3),g.Q6J("ngIf",Je.filterForm.get("auditSearch").get("source").value),g.xp6(1),g.Q6J("ngIf",Je.filterForm.get("auditSearch").get("subject").value),g.xp6(1),g.Q6J("ngIf",Je.filterForm.get("auditSearch").get("auditAction").value),g.xp6(1),g.Q6J("ngIf",Je.filterForm.get("auditSearch").get("resourceName").value&&!Je.resourceOnly)}}function we(Xe,Ke){1&Xe&&(g.TgZ(0,"span"),g._UZ(1,"span",72),g._uU(2),g.ALo(3,"translate"),g.qZA()),2&Xe&&(g.xp6(2),g.hij(" ",g.lcZ(3,1,"Auditing.ShowFilters")," "))}function ye(Xe,Ke){1&Xe&&(g.TgZ(0,"span"),g._UZ(1,"span",73),g._uU(2),g.ALo(3,"translate"),g.qZA()),2&Xe&&(g.xp6(2),g.hij(" ",g.lcZ(3,1,"Auditing.HideFilters")," "))}function qe(Xe,Ke){1&Xe&&(g.TgZ(0,"option",74),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&Xe&&(g.xp6(1),g.Oqu(g.lcZ(2,1,"Auditing.Resource")))}function De(Xe,Ke){1&Xe&&(g.TgZ(0,"p",75),g._UZ(1,"span",76),g._uU(2),g.ALo(3,"translate"),g.qZA()),2&Xe&&(g.xp6(2),g.hij(" ",g.lcZ(3,1,"Auditing.UpdateWarning")," "))}function Ge(Xe,Ke){1&Xe&&(g.TgZ(0,"span",81)(1,"span",47),g._uU(2),g.ALo(3,"translate"),g.qZA()()),2&Xe&&(g.xp6(2),g.Oqu(g.lcZ(3,1,"Common.Loading")))}function ve(Xe,Ke){if(1&Xe){const Je=g.EpF();g.TgZ(0,"app-action-bar"),g.ynx(1,77),g.YNc(2,Ge,4,3,"span",78),g.TgZ(3,"button",79),g.NdJ("click",function(){g.CHM(Je);const ht=g.oxw();return g.KtG(ht.getCSV())}),g.ALo(4,"translate"),g.TgZ(5,"span"),g._UZ(6,"span",80),g.qZA(),g.TgZ(7,"span",47),g._uU(8),g.ALo(9,"translate"),g.qZA()(),g.BQk(),g.qZA()}if(2&Xe){const Je=g.oxw();g.xp6(2),g.Q6J("ngIf",Je.loadingCSV),g.xp6(1),g.Q6J("tooltip",g.lcZ(4,4,"Auditing.DownloadResults"))("disabled",(null==Je.pagedResult?null:Je.pagedResult.results.length)<1&&!Je.isLoading||Je.loadingCSV),g.xp6(5),g.Oqu(g.lcZ(9,6,"Auditing.DownloadResults"))}}function c(Xe,Ke){1&Xe&&g._UZ(0,"app-simple-loader")}function tt(Xe,Ke){1&Xe&&(g.TgZ(0,"div",82)(1,"div"),g._uU(2),g.ALo(3,"translate"),g.qZA()()),2&Xe&&(g.xp6(2),g.Oqu(g.lcZ(3,1,"Auditing.NoAuditsFound")))}function _t(Xe,Ke){1&Xe&&(g.TgZ(0,"th",95),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&Xe&&(g.xp6(1),g.hij(" ",g.lcZ(2,1,"Auditing.Resource")," "))}function ct(Xe,Ke){if(1&Xe&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&Xe){const Je=g.oxw().$implicit;g.xp6(1),g.Oqu(Je.subject.name)}}function rt(Xe,Ke){if(1&Xe){const Je=g.EpF();g.TgZ(0,"span")(1,"a",108),g.NdJ("click",function(){g.CHM(Je);const ht=g.oxw().$implicit,Ze=g.oxw(2);return g.KtG(!!Ze.resourceNavigate(ht.subject))}),g._uU(2),g.qZA()()}if(2&Xe){const Je=g.oxw().$implicit,Ct=g.oxw(2);g.xp6(1),g.s9C("href",Ct.buildLink(Je.subject),g.LSH),g.xp6(1),g.hij(" ",Je.subject.name," ")}}function ft(Xe,Ke){if(1&Xe&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&Xe){const Je=g.oxw(2).$implicit;g.xp6(1),g.hij(" ",Je.resource.name," ")}}function qt(Xe,Ke){if(1&Xe&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&Xe){const Je=g.oxw(3).$implicit;g.xp6(1),g.Oqu(Je.resource.identifier)}}function en(Xe,Ke){if(1&Xe&&(g.TgZ(0,"span"),g._uU(1),g.qZA()),2&Xe){const Je=g.oxw(3).$implicit;g.xp6(1),g.Oqu(Je.resource.name)}}function xt(Xe,Ke){if(1&Xe){const Je=g.EpF();g.TgZ(0,"span")(1,"a",108),g.NdJ("click",function(){g.CHM(Je);const ht=g.oxw(2).$implicit,Ze=g.oxw(2);return g.KtG(!!Ze.resourceNavigate(ht.resource))}),g.YNc(2,qt,2,1,"span",29),g.YNc(3,en,2,1,"span",29),g.qZA()()}if(2&Xe){const Je=g.oxw(2).$implicit,Ct=g.oxw(2);g.xp6(1),g.s9C("href",Ct.buildLink(Je.resource),g.LSH),g.xp6(1),g.Q6J("ngIf",""==Je.name),g.xp6(1),g.Q6J("ngIf",""!=Je.name)}}function Dt(Xe,Ke){if(1&Xe&&(g.TgZ(0,"td",109),g.YNc(1,ft,2,1,"span",29),g.YNc(2,xt,4,3,"span",29),g.qZA()),2&Xe){const Je=g.oxw().$implicit,Ct=g.oxw(2);g.xp6(1),g.Q6J("ngIf","*"==Je.resource.name||""==Ct.buildLink(Je.resource)),g.xp6(1),g.Q6J("ngIf","*"!=Je.resource.name&&""!=Ct.buildLink(Je.resource))}}function X(Xe,Ke){1&Xe&&(g.TgZ(0,"span",110)(1,"span",47),g._uU(2),g.ALo(3,"translate"),g.qZA()()),2&Xe&&(g.xp6(2),g.Oqu(g.lcZ(3,1,"Common.Yes")))}function j(Xe,Ke){1&Xe&&(g.TgZ(0,"span",111)(1,"span",47),g._uU(2),g.ALo(3,"translate"),g.qZA()()),2&Xe&&(g.xp6(2),g.Oqu(g.lcZ(3,1,"Common.No")))}function ae(Xe,Ke){1&Xe&&g._UZ(0,"span",118)}function Be(Xe,Ke){1&Xe&&g._UZ(0,"span",119)}function je(Xe,Ke){if(1&Xe&&(g.TgZ(0,"tr",112),g._UZ(1,"td"),g.TgZ(2,"td",113)(3,"div",114)(4,"span",115),g.YNc(5,ae,1,0,"span",116),g.YNc(6,Be,1,0,"span",117),g.qZA(),g.TgZ(7,"span"),g._uU(8),g.qZA()()()()),2&Xe){const Je=g.oxw().$implicit;g.xp6(5),g.Q6J("ngIf",Je.succeeded),g.xp6(1),g.Q6J("ngIf",!Je.succeeded),g.xp6(2),g.Oqu(Je.description)}}function ke(Xe,Ke){if(1&Xe){const Je=g.EpF();g.ynx(0,null,96),g.TgZ(2,"tr")(3,"td",97)(4,"button",98),g.NdJ("click",function(){g.CHM(Je);const ht=g.MAs(1);return g.KtG(ht.isOpen=!ht.isOpen)}),g._UZ(5,"span",99),g.TgZ(6,"span",47),g._uU(7),g.ALo(8,"translate"),g.qZA()()(),g.TgZ(9,"td"),g._uU(10),g.ALo(11,"standardDateTime"),g._UZ(12,"div"),g.qZA(),g.TgZ(13,"td",100),g._uU(14),g.qZA(),g.TgZ(15,"td",101),g.YNc(16,ct,2,1,"span",29),g.YNc(17,rt,3,2,"span",29),g.qZA(),g.TgZ(18,"td",102),g._uU(19),g.qZA(),g.YNc(20,Dt,3,2,"td",103),g.TgZ(21,"td",104),g.YNc(22,X,4,3,"span",105),g.YNc(23,j,4,3,"span",106),g.qZA()(),g.YNc(24,je,9,3,"tr",107),g.BQk()}if(2&Xe){const Je=Ke.$implicit,Ct=g.MAs(1),ht=g.oxw(2);g.xp6(5),g.ekj("fa-caret-right",!Ct.isOpen),g.xp6(2),g.hij(" ",g.lcZ(8,12,"Auditing.ToggleDetails")," "),g.xp6(3),g.hij(" ",g.lcZ(11,14,Je.when)," "),g.xp6(4),g.hij(" ",Je.source," "),g.xp6(2),g.Q6J("ngIf",""==ht.buildLink(Je.subject)),g.xp6(1),g.Q6J("ngIf",""!=ht.buildLink(Je.subject)),g.xp6(2),g.hij(" ",Je.action," "),g.xp6(1),g.Q6J("ngIf",!ht.resourceOnly),g.xp6(2),g.Q6J("ngIf",Je.succeeded),g.xp6(1),g.Q6J("ngIf",!Je.succeeded),g.xp6(1),g.Q6J("ngIf",Ct.isOpen)}}function Re(Xe,Ke){if(1&Xe){const Je=g.EpF();g.TgZ(0,"table",83)(1,"thead")(2,"tr")(3,"th",84)(4,"span",47),g._uU(5),g.ALo(6,"translate"),g.qZA()(),g.TgZ(7,"th",85),g.NdJ("click",function(){g.CHM(Je);const ht=g.oxw();return g.KtG(ht.sortResults())}),g.TgZ(8,"span",86),g._uU(9),g.ALo(10,"translate"),g.qZA(),g._UZ(11,"span",87),g.qZA(),g.TgZ(12,"th",88),g._uU(13),g.ALo(14,"translate"),g.qZA(),g.TgZ(15,"th",89),g._uU(16),g.ALo(17,"translate"),g.qZA(),g.TgZ(18,"th",90),g._uU(19),g.ALo(20,"translate"),g.qZA(),g.YNc(21,_t,3,3,"th",91),g.TgZ(22,"th",92),g._uU(23),g.ALo(24,"translate"),g.qZA()()(),g.TgZ(25,"tbody",93),g.YNc(26,ke,25,16,"ng-container",94),g.qZA()()}if(2&Xe){const Je=g.oxw();g.xp6(5),g.Oqu(g.lcZ(6,10,"Common.Actions")),g.xp6(4),g.Oqu(g.lcZ(10,12,"Auditing.When")),g.xp6(2),g.ekj("fa-caret-up","when"==Je.filterSort),g.xp6(2),g.Oqu(g.lcZ(14,14,"Auditing.Source")),g.xp6(3),g.Oqu(g.lcZ(17,16,"Auditing.Subject")),g.xp6(3),g.Oqu(g.lcZ(20,18,"Auditing.Action")),g.xp6(2),g.Q6J("ngIf",!Je.resourceOnly),g.xp6(2),g.hij(" ",g.lcZ(24,20,"Notifications.Success")," "),g.xp6(3),g.Q6J("ngForOf",Je.pagedResult.results)}}function Se(Xe,Ke){if(1&Xe){const Je=g.EpF();g.TgZ(0,"app-pager",120),g.NdJ("onGoToPage",function(ht){g.CHM(Je);const Ze=g.oxw();return g.KtG(Ze.goToPage(ht))}),g.qZA()}if(2&Xe){const Je=g.oxw();g.Q6J("totalResults",null==Je.pagedResult?null:Je.pagedResult.totalCount)("currentPage",Je.filterForm.get("page").value)("lastPage",null==Je.pagedResult?null:Je.pagedResult.pageCount)}}let Qe=(()=>{class Xe{constructor(Je,Ct,ht,Ze,oe,ie,L,ne){this.auditingService=Je,this.localizeRouter=Ct,this.router=ht,this.fb=Ze,this.activatedRoute=oe,this.securityService=ie,this.fileDownloader=L,this.timeService=ne,this.sortAsc="when",this.sortDesc="-when",this.isLoading=!1,this.loadingCSV=!1,this.showAddFilter=!1,this.filterHasChanged=!1,this.auditStream=new n.x}get resourceOnly(){return!(0,x.Ew)(this.resourceName)}userManagerReadOnly(){return(0,x.ub)(this.securityService.userPermissions)}identityServerManagerReadOnly(){return(0,x.gR)(this.securityService.userPermissions)}ngOnInit(){this.setupFilterForm(this.activatedRoute.snapshot.queryParams),this.auditStream.pipe((0,e.O)({auditSearch:this.filterForm.value.auditSearch,toDate:this.filterForm.value.toDate,fromDate:this.filterForm.value.fromDate,page:this.filterForm.value.page,pageSize:this.filterForm.value.pageSize,sortCriteria:this.filterForm.value.sortCriteria,success:this.filterForm.value.success}),(0,h.z)(Ct=>(this.isLoading=!0,this.auditingService.getAudits(Ct.auditSearch,Ct.toDate.toString(),Ct.fromDate.toString(),Ct.page,Ct.pageSize,Ct.sortCriteria,Ct.success)))).subscribe(Ct=>{this.isLoading=!1,this.pagedResult=Ct;const ht=new w(this.filterForm.value);this.router.navigate([this.router.url.split("?")[0]],{queryParams:ht})})}applyForm(Je){Je&&this.filterForm.patchValue({page:1}),this.auditStream.next(this.filterForm.value),this.filterHasChanged=!1}goToPage(Je){this.filterForm.patchValue({page:Je}),this.applyForm(!1)}setDateToday(){this.filterForm.patchValue({fromDate:this.timeService.now().startOf("day"),toDate:this.timeService.now().endOf("day")})}setDateLast24Hours(){this.filterForm.patchValue({fromDate:this.timeService.now().minus({hours:24}),toDate:this.timeService.now()})}setDateYesterday(){this.filterForm.patchValue({fromDate:this.timeService.now().startOf("day").minus({hours:24}),toDate:this.timeService.now().endOf("day").minus({hours:24})})}setDateLastWeek(){this.filterForm.patchValue({fromDate:this.timeService.now().minus({weeks:1}).startOf("day"),toDate:this.timeService.now().endOf("day")})}goToResource(Je){this.router.config.find(ht=>void 0!==ht.children)}auditSearch(Je,Ct){this.filterForm.patchValue({auditSearch:{[Je]:Ct.value}})}selectFilterType(Je,Ct){const ht=this.filterForm.get("auditSearch").get(Je).value;Ct.value=ht}removeFilter(Je){this.filterForm.patchValue({auditSearch:{[Je]:""}})}checkQuickDate(Je){switch(Je){case"today":return this.stripSecondsFromString(this.filterForm.get("fromDate").value)===this.stripSecondsFromDateTime(this.timeService.now().startOf("day"))&&this.stripSecondsFromString(this.filterForm.get("toDate").value)===this.stripSecondsFromDateTime(this.timeService.now().endOf("day"));case"24hours":return this.stripSecondsFromString(this.filterForm.get("fromDate").value)===this.stripSecondsFromDateTime(this.timeService.now().minus({hours:24}))&&this.stripSecondsFromString(this.filterForm.get("toDate").value)===this.stripSecondsFromDateTime(this.timeService.now());case"yesterday":return this.stripSecondsFromString(this.filterForm.get("fromDate").value)===this.stripSecondsFromDateTime(this.timeService.now().startOf("day").minus({hours:24}))&&this.stripSecondsFromString(this.filterForm.get("toDate").value)===this.stripSecondsFromDateTime(this.timeService.now().endOf("day").minus({hours:24}));case"week":return this.stripSecondsFromString(this.filterForm.get("fromDate").value)===this.stripSecondsFromDateTime(this.timeService.now().minus({weeks:1}).startOf("day"))&&this.stripSecondsFromString(this.filterForm.get("toDate").value)===this.stripSecondsFromDateTime(this.timeService.now().endOf("day"))}}stripSecondsFromString(Je){return this.stripSecondsFromDateTime(b.ou.fromISO(Je))}stripSecondsFromDateTime(Je){return Je.set({second:0,millisecond:0}).toString()}setShowing(Je,Ct){this.successfulFilter=Je,this.unsuccessfulFilter=Ct,this.filter()}showActiveFilters(){const Je=this.filterForm.get("auditSearch");return!!(Je.get("source").value||Je.get("subject").value||Je.get("auditAction").value||Je.get("resourceName").value)}filter(){this.filterForm.patchValue({success:this.successfulFilter&&this.unsuccessfulFilter||!this.successfulFilter&&!this.unsuccessfulFilter?null:this.successfulFilter})}getCSV(){this.fileDownloader.buildForm(this.buildActionUrl()).submitForm()}buildActionUrl(){let Je=`${this.auditingService.actionUrl}`;const Ct=this.activatedRoute.snapshot.queryParams;return this.resourceOnly&&(Je+=`/${this.resourceName}/auditedEvents`),Je+=`?sort=${Ct.sortCriteria}`,(0,x.Ew)(Ct.auditAction)||(Je+=`&auditAction=${Ct.auditAction}`),(0,x.Ew)(Ct.subject)||(Je+=`&subject=${Ct.subject}`),(0,x.Ew)(Ct.resourceName)||(Je+=`&resource=${Ct.resourceName}`),(0,x.Ew)(Ct.source)||(Je+=`&source=${Ct.source}`),null!=Ct.success&&(Je+=`&success=${Ct.success}`),null!=Ct.toDate&&(Je+=`&to=${Ct.toDate}`),null!=Ct.fromDate&&(Je+=`&from=${Ct.fromDate}`),Je}sortResults(){const Je=this.activatedRoute.snapshot.queryParams,Ct=new y(Je.auditAction,Je.subject,Je.resourceName,Je.source),ht=void 0===Je.fromDate?this.timeService.now().startOf("day"):b.ou.fromISO(Je.fromDate),Ze=void 0===Je.toDate?this.timeService.now().startOf("day"):b.ou.fromISO(Je.toDate);this.filterSort=this.filterSort===this.sortAsc?this.sortDesc:this.sortAsc;const oe=new f(Ct,ht,Ze,Je.page,Je.pageSize,this.filterSort,Je.success);this.auditStream.next(oe),this.filterHasChanged=!1}resetForm(){this.filterForm.setValue({fromDate:this.timeService.now().startOf("day"),toDate:this.timeService.now(),auditSearch:{auditAction:"",resourceName:this.resourceName||"",subject:"",source:""},page:1,pageSize:25,sortCriteria:this.sortDesc,success:null}),this.filterHasChanged=!1,this.successfulFilter=!1,this.unsuccessfulFilter=!1,this.applyForm(!0)}setupFilterForm(Je){const Ct=void 0===Je.fromDate?this.timeService.now().startOf("day"):b.ou.fromISO(Je.fromDate),ht=void 0===Je.toDate?this.timeService.now().endOf("day"):b.ou.fromISO(Je.toDate);this.filterForm=this.fb.nonNullable.group({fromDate:[Ct,[S.kI.required,x.eC]],toDate:[ht],auditSearch:this.fb.group({auditAction:[Je.auditAction||""],resourceName:[this.resourceName||Je.resourceName||""],subject:[Je.subject||""],source:[Je.source||""]}),page:[Je.page||1],pageSize:[Je.pageSize>1e3?1e3:Je.pageSize||25],sortCriteria:[Je.sortCriteria||this.sortDesc],success:[Je.success||null]},{validators:x.sY}),this.filterSort=this.filterForm.value.sortCriteria,this.filterForm.valueChanges.subscribe(()=>{this.filterHasChanged=!0})}Navigate(Je,Ct){this.router.navigate([Je,Ct])}resourceNavigate(Je){const Ct=this.buildTranslatedRoute(Je);"*"!==Je.name&&this.Navigate(Ct,Je.identifier)}buildLink(Je){let Ct=this.buildTranslatedRoute(Je);return Ct+=`/${Je.identifier}`,Ct}buildTranslatedRoute(Je){switch(Je.type){case"User":return this.userManagerReadOnly()?`${this.localizeRouter.translateRoute("/users/view")}`:`${this.localizeRouter.translateRoute("/users")}`;case"Client":case"Machine":return this.identityServerManagerReadOnly()?`${this.localizeRouter.translateRoute("/clients/view")}`:`${this.localizeRouter.translateRoute("/clients")}`;case"IdentityResource":return this.identityServerManagerReadOnly()?`${this.localizeRouter.translateRoute("/identityresources/view")}`:`${this.localizeRouter.translateRoute("/identityresources")}`;case"ProtectedResource":return this.identityServerManagerReadOnly()?`${this.localizeRouter.translateRoute("/protectedresources/view")}`:`${this.localizeRouter.translateRoute("/protectedresources")}`;case"ClaimType":return this.userManagerReadOnly()?`${this.localizeRouter.translateRoute("/claim-types/view")}`:`${this.localizeRouter.translateRoute("/claim-types")}`;case"Role":return this.userManagerReadOnly()?`${this.localizeRouter.translateRoute("/roles/view")}`:`${this.localizeRouter.translateRoute("/roles")}`;default:return""}}}return Xe.\u0275fac=function(Je){return new(Je||Xe)(g.Y36(N._),g.Y36(R.An),g.Y36(k.F0),g.Y36(S.qu),g.Y36(k.gz),g.Y36(O.I),g.Y36(P.B),g.Y36(U.O))},Xe.\u0275cmp=g.Xpm({type:Xe,selectors:[["app-audits-list"]],inputs:{resourceName:"resourceName"},decls:130,vars:106,consts:[["id","auditingList"],[1,"",3,"formGroup"],[1,"tw-border-b","tw-border-grey-200","tw-mb-4","tw-pb-5"],[1,"tw-flex-grid","tw-mb-3","lg:tw-flex-nowrap"],[1,"tw-flex-grid-col","xs:tw-w-1/2","lg:tw-w-1/4"],[1,"tw-form-group","tw-mb-0"],["for","fromDate",1,"tw-form-label"],["id","fromDate","name","fromDate","formControlName","fromDate","aria-describedby","toErrorLabel",3,"displayType"],["id","fromErrorLabel","class","tw-form-text-danger",4,"ngIf"],["for","toDate",1,"tw-form-label"],["id","toDate","name","toDate","formControlName","toDate","aria-describedby","toErrorLabel",3,"displayType"],["id","toErrorLabel","class","tw-form-text-danger",4,"ngIf"],[1,"tw-hidden","tw-flex-grid-col","xs:tw-block","sm:tw-w-auto","sm:tw-mr-auto"],["aria-hidden","true",1,"tw-hidden","tw-form-label","tw-invisible","sm:tw-inline-block"],[1,"tw-flex","tw-items-center"],["name","setToday","id","setToday",1,"tw-btn",3,"click"],["name","set24hrs","id","set24hrs",1,"tw-btn",3,"click"],["name","setYesterday","id","setYesterday",1,"tw-btn",3,"click"],["name","setLastWeek","id","setLastWeek",1,"tw-btn",3,"click"],[1,"tw-flex-grid-col","tw-w-40"],["for","pageSize",1,"tw-form-label"],[1,"tw-form-select"],["id","pageSize","formControlName","pageSize",1,"tw-form-control"],["pageLength",""],[3,"value"],["formGroupName","auditSearch"],["class","tw-my-4",4,"ngIf"],[1,"tw-mb-4"],["id","showFilterButton","type","button","aria-expanded","showAddFilter",1,"tw-btn-link","tw-btn-small","tw-px-0",3,"click"],[4,"ngIf"],["id","toggleFilters","aria-labelledby","showFilterButton",1,"tw-mt-3","tw-mb-6",3,"hidden"],[1,"tw-flex-grid","md:tw-flex-nowrap"],[1,"tw-flex-grid-col","md:tw-w-2/3","lg:tw-w-3/5"],["for","filterType",1,"tw-form-label"],[1,"tw-flex-grid"],[1,"tw-flex-grid-col","xs:tw-w-2/5","sm:tw-w-1/3"],["id","filterType","name","filterType",1,"tw-form-control",3,"change"],["filterType",""],["value","source"],["value","subject"],["value","auditAction"],["value","resourceName",4,"ngIf"],[1,"tw-flex-grid-col","tw-flex","xs:tw-w-3/5","sm:tw-w-2/3"],["id","filterTerm","type","text","autocomplete","off",1,"tw-form-control","tw-border-r-0","tw-rounded-r-none"],["filterValue",""],["type","submit",1,"tw-btn","tw-rounded-l-none",3,"click"],["aria-hidden","true",1,"far","fa-plus"],[1,"sr-only"],[1,"tw-flex-grid-col","md:tw-ml-auto","md:tw-w-auto"],[1,"tw-form-label"],["id","allFilter",1,"tw-btn",3,"click"],["id","activeFilter",1,"tw-btn",3,"click"],["id","blockedFilter",1,"tw-btn",3,"click"],[1,"tw-flex","tw-flex-wrap","tw-items-center"],["type","hidden"],["sortCriteria",""],["id","applyBtn",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],[1,"tw-btn-link","tw-mr-3",3,"click"],["class","tw-pill-warning tw-my-2",4,"ngIf"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable hover",4,"ngIf"],[3,"totalResults","currentPage","lastPage","onGoToPage",4,"ngIf"],["id","fromErrorLabel",1,"tw-form-text-danger"],["id","toErrorLabel",1,"tw-form-text-danger"],[1,"tw-my-4"],[1,"tw-flex","tw-flex-wrap","tw-items-start","tw--mt-2","tw--ml-2"],["class","tw-pt-2 tw-pl-2",4,"ngIf"],[1,"tw-pt-2","tw-pl-2"],["id","sourceSearchValue",1,"tw-btn-danger","tw-btn-small",3,"click"],[1,"tw-font-bold","tw-mr-1"],["aria-hidden","true",1,"fas","fa-times","tw-ml-3"],[1,"tw-btn-danger","tw-btn-small",3,"click"],["aria-hidden","true",1,"fas","fa-angle-down","tw-mr-1"],["aria-hidden","true",1,"fas","fa-angle-up","tw-mr-1"],["value","resourceName"],[1,"tw-pill-warning","tw-my-2"],["aria-hidden","true",1,"fas","fa-info-circle","tw-mr-1"],["right",""],["class","fad fa-spinner-third fa-spin tw-text-xs tw-text-grey-700 tw-mr-3",4,"ngIf"],["id","getCSVBtn","container","body",1,"tw-btn-white",3,"tooltip","disabled","click"],["aria-hidden","true",1,"fad","fa-arrow-to-bottom"],[1,"fad","fa-spinner-third","fa-spin","tw-text-xs","tw-text-grey-700","tw-mr-3"],["role","alert",1,"tw-alert"],[1,"datatable","hover"],[1,"toggle","tw-w-1"],["id","sortWhen",1,"tw-cursor-pointer","xs:tw-w-40",3,"click"],[1,"tw-mr-2"],["aria-hidden","true",1,"fas","fa-caret-down"],[1,"tw-hidden","tw-w-32","md:tw-table-cell","xl:tw-w-40"],[1,"tw-hidden","xs:tw-table-cell","lg:tw-w-1/4"],[1,"tw-hidden","xl:tw-table-cell"],["id","ResourceHeading","class","tw-hidden lg:tw-table-cell",4,"ngIf"],[1,"tw-hidden","tw-w-1","tw-text-center","sm:tw-table-cell"],["id","auditsTable"],[4,"ngFor","ngForOf"],["id","ResourceHeading",1,"tw-hidden","lg:tw-table-cell"],["group",""],[1,"toggle"],[1,"tw-btn-link","tw-btn-small",3,"click"],["aria-hidden","true",1,"fas","fa-caret-down","fa-fw"],[1,"tw-hidden","tw-max-w-0","tw-truncate","md:tw-table-cell"],[1,"tw-hidden","tw-max-w-0","tw-truncate","xs:tw-table-cell"],[1,"tw-hidden","tw-max-w-0","tw-truncate","xl:tw-table-cell"],["class","tw-hidden tw-max-w-0 tw-truncate lg:tw-table-cell resource",4,"ngIf"],[1,"tw-hidden","tw-text-center","sm:tw-table-cell"],["class","fas fa-check tw-text-green-500",4,"ngIf"],["class","fas fa-times tw-text-red-500 tw-opacity-50",4,"ngIf"],["class","disabled toggle-row",4,"ngIf"],[3,"href","click"],[1,"tw-hidden","tw-max-w-0","tw-truncate","lg:tw-table-cell","resource"],[1,"fas","fa-check","tw-text-green-500"],[1,"fas","fa-times","tw-text-red-500","tw-opacity-50"],[1,"disabled","toggle-row"],["colspan","6",1,"tw-text-grey-800"],[1,"tw-flex","tw-items-start"],["aria-hidden","true",1,"tw-shrink-0","tw-mr-1"],["class","fas fa-check tw-text-green-500 fa-fw",4,"ngIf"],["class","fas fa-times tw-text-red-500 fa-fw",4,"ngIf"],[1,"fas","fa-check","tw-text-green-500","fa-fw"],[1,"fas","fa-times","tw-text-red-500","fa-fw"],[3,"totalResults","currentPage","lastPage","onGoToPage"]],template:function(Je,Ct){if(1&Je){const ht=g.EpF();g.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),g._uU(7),g.ALo(8,"translate"),g.qZA(),g.TgZ(9,"div"),g._UZ(10,"app-date-time",7),g.YNc(11,ee,3,3,"span",8),g.qZA()()(),g.TgZ(12,"div",4)(13,"div",5)(14,"label",9),g._uU(15),g.ALo(16,"translate"),g.qZA(),g.TgZ(17,"div"),g._UZ(18,"app-date-time",10),g.YNc(19,G,3,3,"span",11),g.qZA()()(),g.TgZ(20,"div",12)(21,"div",5)(22,"label",13),g._uU(23,"\xa0"),g.qZA(),g.TgZ(24,"ul",14)(25,"li")(26,"button",15),g.NdJ("click",function(){return Ct.setDateToday()}),g.ALo(27,"translate"),g._uU(28),g.ALo(29,"translate"),g.qZA()(),g.TgZ(30,"li")(31,"button",16),g.NdJ("click",function(){return Ct.setDateLast24Hours()}),g.ALo(32,"translate"),g._uU(33),g.ALo(34,"translate"),g.qZA()(),g.TgZ(35,"li")(36,"button",17),g.NdJ("click",function(){return Ct.setDateYesterday()}),g.ALo(37,"translate"),g._uU(38),g.ALo(39,"translate"),g.qZA()(),g.TgZ(40,"li")(41,"button",18),g.NdJ("click",function(){return Ct.setDateLastWeek()}),g.ALo(42,"translate"),g._uU(43),g.ALo(44,"translate"),g.qZA()()()()(),g.TgZ(45,"div",19)(46,"div",5)(47,"label",20),g._uU(48),g.ALo(49,"translate"),g.qZA(),g.TgZ(50,"div",21)(51,"select",22,23)(53,"option",24),g._uU(54,"25 "),g.qZA(),g.TgZ(55,"option",24),g._uU(56,"50"),g.qZA(),g.TgZ(57,"option",24),g._uU(58,"100"),g.qZA()()()()()(),g.TgZ(59,"form",25),g.YNc(60,me,9,7,"div",26),g.TgZ(61,"div",27)(62,"button",28),g.NdJ("click",function(){return Ct.showAddFilter=!Ct.showAddFilter}),g.YNc(63,we,4,3,"span",29),g.YNc(64,ye,4,3,"span",29),g.qZA(),g.TgZ(65,"div",30)(66,"div",31)(67,"div",32)(68,"div",5)(69,"label",33),g._uU(70),g.ALo(71,"translate"),g.qZA(),g.TgZ(72,"div",34)(73,"div",35)(74,"div",21)(75,"select",36,37),g.NdJ("change",function(){g.CHM(ht);const oe=g.MAs(76),ie=g.MAs(89);return g.KtG(Ct.selectFilterType(oe.value,ie))}),g.TgZ(77,"option",38),g._uU(78),g.ALo(79,"translate"),g.qZA(),g.TgZ(80,"option",39),g._uU(81),g.ALo(82,"translate"),g.qZA(),g.TgZ(83,"option",40),g._uU(84),g.ALo(85,"translate"),g.qZA(),g.YNc(86,qe,3,3,"option",41),g.qZA()()(),g.TgZ(87,"div",42),g._UZ(88,"input",43,44),g.ALo(90,"translate"),g.ALo(91,"translate"),g.TgZ(92,"button",45),g.NdJ("click",function(){g.CHM(ht);const oe=g.MAs(76),ie=g.MAs(89);return g.KtG(Ct.auditSearch(oe.value,ie))}),g._UZ(93,"span",46),g.TgZ(94,"span",47),g._uU(95),g.ALo(96,"translate"),g.qZA()()()()()(),g.TgZ(97,"div",48)(98,"div",5)(99,"p",49),g._uU(100),g.ALo(101,"translate"),g.qZA(),g.TgZ(102,"ul",14)(103,"li")(104,"button",50),g.NdJ("click",function(){return Ct.setShowing(!1,!1)}),g._uU(105),g.ALo(106,"translate"),g.qZA()(),g.TgZ(107,"li")(108,"button",51),g.NdJ("click",function(){return Ct.setShowing(!0,!1)}),g._uU(109),g.ALo(110,"translate"),g.qZA()(),g.TgZ(111,"li")(112,"button",52),g.NdJ("click",function(){return Ct.setShowing(!1,!0)}),g._uU(113),g.ALo(114,"translate"),g.qZA()()()()()()()(),g.TgZ(115,"div",53),g._UZ(116,"input",54,55),g.TgZ(118,"button",56),g.NdJ("click",function(){return Ct.applyForm(!0)}),g._uU(119),g.ALo(120,"translate"),g.qZA(),g.TgZ(121,"button",57),g.NdJ("click",function(){return Ct.resetForm()}),g._uU(122),g.ALo(123,"translate"),g.qZA(),g.YNc(124,De,4,3,"p",58),g.qZA()()()(),g.YNc(125,ve,10,8,"app-action-bar",29),g.YNc(126,c,1,0,"app-simple-loader",29),g.YNc(127,tt,4,3,"div",59),g.YNc(128,Re,27,22,"table",60),g.YNc(129,Se,1,3,"app-pager",61),g.qZA()}if(2&Je){let ht;g.xp6(1),g.Q6J("formGroup",Ct.filterForm),g.xp6(6),g.Oqu(g.lcZ(8,58,"Auditing.FromDate")),g.xp6(3),g.Q6J("displayType","date"),g.xp6(1),g.Q6J("ngIf",Ct.filterForm.get("fromDate").hasError("dateInFuture")),g.xp6(4),g.Oqu(g.lcZ(16,60,"Auditing.ToDate")),g.xp6(3),g.Q6J("displayType","date"),g.xp6(1),g.Q6J("ngIf",Ct.filterForm.hasError("fromDateIsAfterToDate")),g.xp6(7),g.ekj("tw-btn-link",!Ct.checkQuickDate("today")),g.uIk("aria-label",g.lcZ(27,62,"Auditing.SetDateToday")),g.xp6(2),g.hij(" ",g.lcZ(29,64,"Auditing.Today")," "),g.xp6(3),g.ekj("tw-btn-link",!Ct.checkQuickDate("24hours")),g.uIk("aria-label",g.lcZ(32,66,"Auditing.SetDateLast24Hours")),g.xp6(2),g.hij(" ",g.lcZ(34,68,"Auditing.24Hours")," "),g.xp6(3),g.ekj("tw-btn-link",!Ct.checkQuickDate("yesterday")),g.uIk("aria-label",g.lcZ(37,70,"Auditing.SetDateYesterday")),g.xp6(2),g.hij(" ",g.lcZ(39,72,"Auditing.Yesterday")," "),g.xp6(3),g.ekj("tw-btn-link",!Ct.checkQuickDate("week")),g.uIk("aria-label",g.lcZ(42,74,"Auditing.SetDateLastWeek")),g.xp6(2),g.hij(" ",g.lcZ(44,76,"Auditing.Week")," "),g.xp6(5),g.Oqu(g.lcZ(49,78,"Auditing.ResultsPerPage")),g.xp6(5),g.Q6J("value",25),g.xp6(2),g.Q6J("value",50),g.xp6(2),g.Q6J("value",100),g.xp6(3),g.Q6J("ngIf",Ct.showActiveFilters()),g.xp6(3),g.Q6J("ngIf",!Ct.showAddFilter),g.xp6(1),g.Q6J("ngIf",Ct.showAddFilter),g.xp6(1),g.Q6J("hidden",!Ct.showAddFilter),g.xp6(5),g.Oqu(g.lcZ(71,80,"Auditing.AddFilter")),g.xp6(8),g.Oqu(g.lcZ(79,82,"Auditing.Source")),g.xp6(3),g.Oqu(g.lcZ(82,84,"Auditing.Subject")),g.xp6(3),g.Oqu(g.lcZ(85,86,"Auditing.Action")),g.xp6(2),g.Q6J("ngIf",!Ct.resourceOnly),g.xp6(2),g.uIk("placeholder",g.lcZ(90,88,"Auditing.FilterTermPlaceholder"))("aria-label",g.lcZ(91,90,"Auditing.AddFilterTerm")),g.xp6(7),g.Oqu(g.lcZ(96,92,"Common.Add")),g.xp6(5),g.Oqu(g.lcZ(101,94,"Auditing.Showing")),g.xp6(4),g.ekj("tw-btn-link",!(!Ct.successfulFilter&&!Ct.unsuccessfulFilter)),g.xp6(1),g.hij(" ",g.lcZ(106,96,"Permission.All")," "),g.xp6(3),g.ekj("tw-btn-link",!(Ct.successfulFilter&&!Ct.unsuccessfulFilter)),g.xp6(1),g.hij(" ",g.lcZ(110,98,"Notifications.Success")," "),g.xp6(3),g.ekj("tw-btn-link",!(Ct.unsuccessfulFilter&&!Ct.successfulFilter)),g.xp6(1),g.hij(" ",g.lcZ(114,100,"Notifications.Failure")," "),g.xp6(5),g.Q6J("disabled",(null==Ct.filterForm?null:Ct.filterForm.errors)||(null==(ht=Ct.filterForm.get("fromDate"))?null:ht.hasError("dateInFuture"))),g.xp6(1),g.hij(" ",g.lcZ(120,102,"Auditing.ExecuteAndDisplay")," "),g.xp6(3),g.hij(" ",g.lcZ(123,104,"Auditing.Reset")," "),g.xp6(2),g.Q6J("ngIf",Ct.filterHasChanged),g.xp6(1),g.Q6J("ngIf",!Ct.isLoading),g.xp6(1),g.Q6J("ngIf",Ct.isLoading),g.xp6(1),g.Q6J("ngIf",(null==Ct.pagedResult?null:Ct.pagedResult.results.length)<1&&!Ct.isLoading),g.xp6(1),g.Q6J("ngIf",(null==Ct.pagedResult?null:Ct.pagedResult.results.length)>0&&!Ct.isLoading),g.xp6(1),g.Q6J("ngIf",(null==Ct.pagedResult?null:Ct.pagedResult.results.length)>0&&!Ct.isLoading)}},dependencies:[W.sg,W.O5,S._Y,S.YN,S.Kr,S.EJ,S.JJ,S.JL,S.F,S.sg,S.u,S.x0,M.i9,B.P,V.K,Q.w,Y.j,fe.X$,J.C9],encapsulation:2}),Xe})()},4362:(nt,_e,m)=>{"use strict";m.d(_e,{l:()=>O});var n=m(6895),e=m(2979),h=m(4006),S=m(2320),y=m(5241),w=m(9383),f=m(5785),x=m(4022),b=m(5971),g=m(5898),N=m(5503),R=m(9260),k=m(4650);let O=(()=>{class P{}return P.\u0275fac=function(W){return new(W||P)},P.\u0275mod=k.oAB({type:P}),P.\u0275inj=k.cJS({providers:[R.O],imports:[n.ez,h.u5,h.UX,e.fQ,w.aw,y.fx,S.z8,f.U,x.p,b.s,g.T,N.D]}),P})()},1216:(nt,_e,m)=>{"use strict";m.d(_e,{N:()=>S});var n=m(4650);const e=["*",[["","right",""]]],h=["*","[right]"];let S=(()=>{class y{}return y.\u0275fac=function(f){return new(f||y)},y.\u0275cmp=n.Xpm({type:y,selectors:[["app-button-bar"]],ngContentSelectors:h,decls:6,vars:0,consts:[[1,"tw-bg-grey-200","tw-border","tw-border-grey-300","tw-mt-8","tw-px-4","tw-pt-4","tw-pb-1","xs:tw-border-0","xs:tw-border-t","xs:tw-mb-12","xs:tw-inset-x-0","xs:tw-bottom-0","xs:tw-fixed","xs:tw-z-20"],[1,"tw-container","tw-mx-auto"],[1,"tw-flex","tw-flex-wrap"],[1,"tw-mr-auto"]],template:function(f,x){1&f&&(n.F$t(e),n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n.Hsn(4),n.qZA(),n.Hsn(5,1),n.qZA()()())},encapsulation:2}),y})()},6980:(nt,_e,m)=>{"use strict";m.d(_e,{K:()=>h});var n=m(6895),e=m(4650);let h=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275mod=e.oAB({type:S}),S.\u0275inj=e.cJS({imports:[n.ez]}),S})()},3570:(nt,_e,m)=>{"use strict";m.d(_e,{x:()=>h});var n=m(7579),e=m(4650);let h=(()=>{class S{constructor(){this.emitter=new n.x,this.eventStream=new n.x}getChangeEmitter(){return this.emitter}confirm(){this.emitter.next()}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac}),S})()},9658:(nt,_e,m)=>{"use strict";m.d(_e,{J:()=>f});var n=m(4650),e=m(3570),h=m(9383),S=m(388);const y=["canDeactivate"],w=function(){return{animated:!1,backdrop:"static"}};let f=(()=>{class x{constructor(g,N){this.service=g,this.translate=N,this.param={value:"world"}}ngOnInit(){}ngAfterViewInit(){this.listener=this.service.getChangeEmitter().subscribe(g=>{this.modal.show()})}leave(){this.modal.hide(),this.service.eventStream.next(!0)}stay(){this.modal.hide(),this.service.eventStream.next(!1)}ngOnDestroy(){this.listener?.unsubscribe()}}return x.\u0275fac=function(g){return new(g||x)(n.Y36(e.x),n.Y36(h.sK))},x.\u0275cmp=n.Xpm({type:x,selectors:[["app-can-deactivate"]],viewQuery:function(g,N){if(1&g&&n.Gf(y,7),2&g){let R;n.iGM(R=n.CRH())&&(N.modal=R.first)}},decls:28,vars:20,consts:[["bsModal","","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["canDeactivate","bs-modal"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-center","scrollbars"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","stayBtn",1,"tw-btn-danger",3,"click"],["id","leaveBtn",1,"tw-btn-link","tw--mr-4",3,"click"]],template:function(g,N){1&g&&(n.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),n._uU(6),n.ALo(7,"translate"),n.qZA(),n.TgZ(8,"button",6),n.NdJ("click",function(){return N.stay()}),n._UZ(9,"span",7),n.TgZ(10,"span",8),n._uU(11),n.ALo(12,"translate"),n.qZA()()(),n.TgZ(13,"div",9)(14,"p"),n._uU(15),n.ALo(16,"translate"),n.ALo(17,"translate"),n.qZA()(),n._UZ(18,"div",10),n.TgZ(19,"div",11)(20,"div",12)(21,"div",13)(22,"button",14),n.NdJ("click",function(){return N.stay()}),n._uU(23),n.ALo(24,"translate"),n.qZA()(),n.TgZ(25,"button",15),n.NdJ("click",function(){return N.leave()}),n._uU(26),n.ALo(27,"translate"),n.qZA()()()()()()),2&g&&(n.Q6J("config",n.DdM(19,w)),n.xp6(6),n.Oqu(n.lcZ(7,7,"Notifications.UnsavedChangesTitle")),n.xp6(5),n.Oqu(n.lcZ(12,9,"Common.Close")),n.xp6(4),n.AsE("",n.lcZ(16,11,"Notifications.UnsavedChanges")," ",n.lcZ(17,13,"Notifications.ContinueWithoutSaving"),""),n.xp6(8),n.Oqu(n.lcZ(24,15,"Notifications.StayHere")),n.xp6(3),n.Oqu(n.lcZ(27,17,"Notifications.DiscardChanges")))},dependencies:[S.oB,h.X$],encapsulation:2}),x})()},7023:(nt,_e,m)=>{"use strict";m.d(_e,{_:()=>f});var n=m(388),e=m(8024),h=m(3570),S=m(9383),y=m(6895),w=m(4650);let f=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=w.oAB({type:x}),x.\u0275inj=w.cJS({providers:[e.I,h.x],imports:[y.ez,n.zk,S.aw]}),x})()},8024:(nt,_e,m)=>{"use strict";m.d(_e,{I:()=>e});var n=m(4650);let e=(()=>{class h{canDeactivate(y){return!y.canDeactivate||y.canDeactivate()}}return h.\u0275fac=function(y){return new(y||h)},h.\u0275prov=n.Yz7({token:h,factory:h.\u0275fac}),h})()},1696:(nt,_e,m)=>{"use strict";m.d(_e,{c:()=>b});var n=m(5861),e=m(4650),h=m(8117),S=m(7185),y=m(9383),w=m(4006),f=m(7608);const x=["fileInput"];let b=(()=>{class g{constructor(R,k,O){this.certPickerService=R,this.toastr=k,this.translate=O,this.metadata="",this.dataExists=new e.vpe}ngOnInit(){}handleFileInput(R){this.fileToUpload=R.item(0),this.dataExists.emit(this.hasData())}metaDataKeyDown(){this.dataExists.emit(this.hasData())}hasData(){return!(this.metadata.length<=1&&!this.fileToUpload)}getCertificateModel(){var R=this;return(0,n.Z)(function*(){let k="";if(R.fileToUpload){const P=R.fileToUpload.slice(0),U=new FileReader,M=new Promise(function(B,V){U.onloadend=function(){const Y=U.result.split("base64,");B(Y[1])}});U.readAsDataURL(P),k=yield M}else""!==R.metadata&&(k=R.metadata);const O=yield R.tryBuildCertModel(k);return R.resetForm(R),O})()}resetForm(R){R.fileToUpload=null,R.fileInput.nativeElement.value="",R.metadata="",R.dataExists.emit(R.hasData())}tryBuildCertModel(R){var k=this;return(0,n.Z)(function*(){let O;try{const P=k.certPickerService.convertStringToArrayBuffer(R);O=yield k.certPickerService.buildCertModelFromArrayBuffer(P,R)}catch(P){throw k.toastr.error(k.translate.instant("Clients.Import.Wizard.Certificates.TryAgainDifferentFile"),k.translate.instant("Clients.Import.Wizard.Certificates.FailedToParseCertificate")),P}return O})()}}return g.\u0275fac=function(R){return new(R||g)(e.Y36(h.S),e.Y36(S._W),e.Y36(y.sK))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-cert-reader"]],viewQuery:function(R,k){if(1&R&&e.Gf(x,7),2&R){let O;e.iGM(O=e.CRH())&&(k.fileInput=O.first)}},inputs:{uploadCert:"uploadCert",uploadCertHelp:"uploadCertHelp",certMetaData:"certMetaData",certMetaDataHelp:"certMetaDataHelp"},outputs:{dataExists:"dataExists"},decls:11,vars:14,consts:[[3,"id","label","help","isLast"],[1,"tw-form-control"],["id","fileInput","type","file","name","cert","accept",".cer",1,"tw-form-file","tw-max-w-full",3,"disabled","change"],["fileInput",""],[1,"tw-flex","tw-items-center","tw-justify-center","tw-border-b","tw-border-grey-300","tw-my-8","tw-relative","tw-z-10"],[1,"tw-inline-block","tw-bg-grey-100","tw-text-xs","tw-leading-none","tw-uppercase","tw-text-grey-500","tw--my-2","tw-px-2"],["id","metaData",1,"tw-form-control",3,"disabled","ngModel","ngModelChange","keyup"]],template:function(R,k){1&R&&(e.TgZ(0,"app-form-row",0)(1,"div",1)(2,"input",2,3),e.NdJ("change",function(P){return k.handleFileInput(P.target.files)}),e.qZA()()(),e.TgZ(4,"div",4)(5,"span",5),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"app-form-row",0)(9,"textarea",6),e.NdJ("ngModelChange",function(P){return k.metadata=P})("keyup",function(){return k.metaDataKeyDown()}),e._uU(10,"  "),e.qZA()()),2&R&&(e.Q6J("id","fileInput")("label",k.uploadCert)("help",k.uploadCertHelp)("isLast",!0),e.xp6(2),e.Q6J("disabled",""!=k.metadata),e.xp6(4),e.Oqu(e.lcZ(7,12,"Common.Or")),e.xp6(2),e.Q6J("id","metaData")("label",k.certMetaData)("help",k.certMetaDataHelp)("isLast",!0),e.xp6(1),e.Q6J("disabled",null!=k.fileToUpload)("ngModel",k.metadata))},dependencies:[w.Fj,w.JJ,w.On,f.L,y.X$],encapsulation:2}),g})()},2699:(nt,_e,m)=>{"use strict";m.d(_e,{Y:()=>f});var n=m(5503),e=m(6895),h=m(9383),S=m(4006),y=m(9650),w=m(4650);let f=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=w.oAB({type:x}),x.\u0275inj=w.cJS({imports:[n.D,e.ez,h.aw,S.u5,y.I]}),x})()},8265:(nt,_e,m)=>{"use strict";m.d(_e,{j:()=>w});var n=m(4006),e=m(5503),h=m(6895),S=m(9383),y=m(4650);let w=(()=>{class f{}return f.\u0275fac=function(b){return new(b||f)},f.\u0275mod=y.oAB({type:f}),f.\u0275inj=y.cJS({imports:[h.ez,n.u5,e.D,S.aw]}),f})()},1230:(nt,_e,m)=>{"use strict";m.d(_e,{M:()=>y});var n=m(6895),e=m(9383),h=m(8185),S=m(4650);let y=(()=>{class w{}return w.\u0275fac=function(x){return new(x||w)},w.\u0275mod=S.oAB({type:w}),w.\u0275inj=S.cJS({imports:[n.ez,e.aw,h.Bz]}),w})()},6478:(nt,_e,m)=>{"use strict";m.d(_e,{v:()=>S});var n=m(4650),e=m(8185);const h=["*"];let S=(()=>{class y{constructor(f){this.activatedRoute=f,this.active=!1}ngOnInit(){const f=this.activatedRoute.snapshot;null!==f.firstChild&&null!==f.firstChild.routeConfig&&f.firstChild.routeConfig.path===this.value&&(this.active=!0)}}return y.\u0275fac=function(f){return new(f||y)(n.Y36(e.gz))},y.\u0275cmp=n.Xpm({type:y,selectors:[["app-custom-tab"]],inputs:{title:["tabTitle","title"],value:["tabValue","value"]},ngContentSelectors:h,decls:1,vars:0,template:function(f,x){1&f&&(n.F$t(),n.Hsn(0))},encapsulation:2}),y})()},7073:(nt,_e,m)=>{"use strict";m.d(_e,{x:()=>g});var n=m(6478),e=m(4650),h=m(8185),S=m(6895),y=m(9383);const w=function(N,R){return{tabs__item:N,"pill-tabs__item":R}},f=function(N,R){return{tabs__link:N,"pill-tabs__link":R}};function x(N,R){if(1&N){const k=e.EpF();e.TgZ(0,"li",2)(1,"button",3),e.NdJ("click",function(){const U=e.CHM(k).$implicit,W=e.oxw();return e.KtG(W.changeTab(U))}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&N){const k=R.$implicit,O=e.oxw();e.Q6J("ngClass",e.WLB(9,w,!O.pillMode,O.pillMode)),e.xp6(1),e.ekj("active",k.active),e.Q6J("ngClass",e.WLB(12,f,!O.pillMode,O.pillMode)),e.uIk("data-value",k.value)("aria-selected",k.active),e.xp6(1),e.Oqu(e.lcZ(3,7,k.title))}}const b=function(N,R){return{tabs:N,"pill-tabs":R}};let g=(()=>{class N{constructor(k,O){this.router=k,this.activatedRoute=O,this.pillMode=!1}ngOnInit(){"string"==typeof this.pillMode&&(this.pillMode="true"===this.pillMode)}ngAfterContentInit(){const k=this.tabs.filter(O=>O.active);k&&!k.length&&this.changeTab(this.tabs.first)}changeTab(k){!this.tabs||!this.tabs.length||k.active||(this.setActiveTab(k),this.router.navigate([k.value],{relativeTo:this.activatedRoute}))}setActiveTab(k){this.tabs.toArray().forEach(O=>O.active=!1),k.active=!0}}return N.\u0275fac=function(k){return new(k||N)(e.Y36(h.F0),e.Y36(h.gz))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-custom-tabs"]],contentQueries:function(k,O,P){if(1&k&&e.Suo(P,n.v,4),2&k){let U;e.iGM(U=e.CRH())&&(O.tabs=U)}},inputs:{pillMode:"pillMode"},decls:3,vars:8,consts:[["role","tablist",3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],["role","tab",3,"ngClass","click"]],template:function(k,O){1&k&&(e.TgZ(0,"ul",0),e.ALo(1,"translate"),e.YNc(2,x,4,15,"li",1),e.qZA()),2&k&&(e.Q6J("ngClass",e.WLB(5,b,!O.pillMode,O.pillMode)),e.uIk("aria-label",e.lcZ(1,3,"Nav.SubMenu")),e.xp6(2),e.Q6J("ngForOf",O.tabs))},dependencies:[S.mk,S.sg,y.X$],encapsulation:2}),N})()},2808:(nt,_e,m)=>{"use strict";m.d(_e,{E:()=>f,X:()=>w});var n=m(4650),e=m(3110),h=m(4837),S=m(4456),y=m(8285);class w{constructor(b=S.T.standardDate,g="Common.NoDateSet"){this._datePipe=new e.g9,this.noDateLabel=g??"Common.NoDateSet",this._datePipe=(()=>{switch(b){case S.T.standardDate:return new e.g9;case S.T.standardDateTime:return new e.C9;case S.T.prettyDateTime:return new e.Xm;default:return new e.g9}})()}get datePipe(){return this._datePipe}}let f=(()=>{class x{constructor(g){this.dataTableService=g,this.headClasses="",this.cellClasses="",this.isPlaceholder=!1,this.isBoolean=!1,this.placeholder="",this.navigate=new n.vpe}ngOnDestroy(){this.dataTableSub?.unsubscribe()}ngOnInit(){this.dataTableSub=this.dataTableService.sortCompletedEvent.subscribe(g=>{null!=this.sort&&this.setSort(g)})}get dateColumn(){return"boolean"==typeof this.date?new w:this.date}format(g){return void 0!==this.formatter?this.formatter(g):g}get sortClass(){if(null==this.sort)return"";switch(this.sort){case h.JN.None:return"fad fa-sort";case h.JN.Ascending:return"fas fa-caret-up";case h.JN.Descending:return"fas fa-caret-down"}}setSort(g){this.sort=g==this.prop?this.sort==h.JN.Descending?h.JN.Ascending:h.JN.Descending:h.JN.None}}return x.\u0275fac=function(g){return new(g||x)(n.Y36(y.n))},x.\u0275cmp=n.Xpm({type:x,selectors:[["app-data-table-column"]],inputs:{title:"title",prop:"prop",headClasses:"headClasses",cellClasses:"cellClasses",date:"date",link:"link",isPlaceholder:"isPlaceholder",isBoolean:"isBoolean",placeholder:"placeholder",formatter:"formatter",sort:"sort"},outputs:{navigate:"navigate"},decls:0,vars:0,template:function(g,N){},encapsulation:2}),x})()},572:(nt,_e,m)=>{"use strict";m.d(_e,{Qj:()=>qe,Xz:()=>De});var n=m(4650),e=m(2808),h=m(8185),S=m(8285),y=m(6895),w=m(9383);const f=["selectButton"],x=["deleteButton"];function b(ve,c){if(1&ve&&(n.TgZ(0,"div",2),n._UZ(1,"div",3),n.ALo(2,"translate"),n.qZA()),2&ve){const tt=n.oxw();n.xp6(1),n.Q6J("innerHTML",n.lcZ(2,1,tt.noRowsLabel),n.oJD)}}function g(ve,c){if(1&ve&&n._UZ(0,"span",9),2&ve){const tt=n.oxw().$implicit;n.Q6J("ngClass",tt.sortClass)}}const N=function(ve){return{"tw-mr-2":ve}};function R(ve,c){if(1&ve){const tt=n.EpF();n.TgZ(0,"th",8),n.NdJ("click",function(){const rt=n.CHM(tt).$implicit,ft=n.oxw(2);return n.KtG(ft.sortColumn(rt))}),n.TgZ(1,"span",9),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,g,1,1,"span",10),n.qZA()}if(2&ve){const tt=c.$implicit;n.Q6J("className",tt.headClasses),n.xp6(1),n.Q6J("ngClass",n.VKq(6,N,null!=tt.sort)),n.xp6(1),n.Oqu(n.lcZ(3,4,tt.title)),n.xp6(2),n.Q6J("ngIf",null!=tt.sort)}}function k(ve,c){1&ve&&(n.TgZ(0,"th",11)(1,"span",12),n._uU(2),n.ALo(3,"translate"),n.qZA()()),2&ve&&(n.xp6(2),n.Oqu(n.lcZ(3,1,"Common.Actions")))}function O(ve,c){if(1&ve&&(n.ynx(0),n._uU(1),n.BQk()),2&ve){const tt=n.oxw(3).$implicit;n.xp6(1),n.hij(" ",tt," ")}}function P(ve,c){if(1&ve&&(n.ynx(0),n._uU(1),n.BQk()),2&ve){const tt=n.oxw(4).$implicit,_t=n.oxw().$implicit;n.xp6(1),n.hij(" ",tt.dateColumn.datePipe.transform(_t[tt.prop])," ")}}function U(ve,c){if(1&ve&&(n._uU(0),n.ALo(1,"translate")),2&ve){const tt=n.oxw(4).$implicit;n.hij(" ",n.lcZ(1,1,tt.dateColumn.noDateLabel)," ")}}function W(ve,c){if(1&ve&&(n.ynx(0),n.YNc(1,P,2,1,"ng-container",16),n.YNc(2,U,2,3,"ng-template",null,18,n.W1O),n.BQk()),2&ve){const tt=n.MAs(3),_t=n.oxw(3).$implicit,ct=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf",ct[_t.prop])("ngIfElse",tt)}}function M(ve,c){if(1&ve){const tt=n.EpF();n.ynx(0),n.TgZ(1,"a",20),n.NdJ("click",function(){n.CHM(tt);const ct=n.oxw(5).$implicit,rt=n.oxw(2);return n.KtG(!!rt.clickLinkCell(ct.link))}),n._uU(2),n.qZA(),n.BQk()}if(2&ve){const tt=n.oxw(4).$implicit,_t=n.oxw().$implicit;n.xp6(1),n.s9C("href",_t.routeLink,n.LSH),n.xp6(1),n.hij(" ",_t[tt.prop]," ")}}function B(ve,c){if(1&ve&&n._UZ(0,"span",21),2&ve){const tt=n.oxw(4).$implicit,_t=n.oxw().$implicit;n.Q6J("innerHTML",tt.format(_t[tt.prop]),n.oJD)}}function V(ve,c){if(1&ve&&(n.YNc(0,M,3,2,"ng-container",16),n.YNc(1,B,1,1,"ng-template",null,19,n.W1O)),2&ve){const tt=n.MAs(2),_t=n.oxw(3).$implicit;n.Q6J("ngIf",_t.link)("ngIfElse",tt)}}function Q(ve,c){if(1&ve&&(n.ynx(0),n.YNc(1,W,4,2,"ng-container",16),n.YNc(2,V,3,2,"ng-template",null,17,n.W1O),n.BQk()),2&ve){const tt=n.MAs(3),_t=n.oxw(2).$implicit;n.xp6(1),n.Q6J("ngIf",_t.date)("ngIfElse",tt)}}function Y(ve,c){if(1&ve&&(n.ynx(0),n.YNc(1,O,2,1,"ng-container",15),n.YNc(2,Q,4,2,"ng-container",15),n.BQk()),2&ve){const tt=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf",null==tt.prop),n.xp6(1),n.Q6J("ngIf",null!=tt.prop)}}function fe(ve,c){if(1&ve&&(n.ynx(0),n.TgZ(1,"span",22),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.BQk()),2&ve){const tt=n.oxw().$implicit;n.xp6(2),n.Oqu(n.lcZ(3,1,tt.placeholder))}}function J(ve,c){1&ve&&(n.TgZ(0,"span",25)(1,"span",12),n._uU(2),n.ALo(3,"translate"),n.qZA()()),2&ve&&(n.xp6(2),n.Oqu(n.lcZ(3,1,"Common.Yes")))}function ee(ve,c){1&ve&&(n.TgZ(0,"span",26)(1,"span",12),n._uU(2),n.ALo(3,"translate"),n.qZA()()),2&ve&&(n.xp6(2),n.Oqu(n.lcZ(3,1,"Common.No")))}function G(ve,c){if(1&ve&&(n.ynx(0),n.YNc(1,J,4,3,"span",23),n.YNc(2,ee,4,3,"span",24),n.BQk()),2&ve){const tt=n.oxw().$implicit,_t=n.oxw().$implicit;n.xp6(1),n.Q6J("ngIf",_t[tt.prop]),n.xp6(1),n.Q6J("ngIf",!_t[tt.prop])}}function E(ve,c){if(1&ve&&(n.TgZ(0,"td",14),n.YNc(1,Y,3,2,"ng-container",15),n.YNc(2,fe,4,3,"ng-container",15),n.YNc(3,G,3,2,"ng-container",15),n.qZA()),2&ve){const tt=c.$implicit;n.Q6J("className",tt.cellClasses),n.uIk("data-label",tt.title),n.xp6(1),n.Q6J("ngIf",!tt.isPlaceholder&&!tt.isBoolean),n.xp6(1),n.Q6J("ngIf",tt.isPlaceholder),n.xp6(1),n.Q6J("ngIf",tt.isBoolean)}}function te(ve,c){if(1&ve){const tt=n.EpF();n.TgZ(0,"button",30,31),n.NdJ("click",function(){n.CHM(tt);const ct=n.oxw(2).$implicit,rt=n.oxw(2);return n.KtG(rt.selectRow(ct))}),n._UZ(2,"span",32),n.TgZ(3,"span",12),n._uU(4),n.ALo(5,"translate"),n.qZA()()}2&ve&&(n.xp6(4),n.Oqu(n.lcZ(5,1,"Common.Edit")))}function $(ve,c){if(1&ve){const tt=n.EpF();n.TgZ(0,"button",33,34),n.NdJ("click",function(){n.CHM(tt);const ct=n.oxw(2).index,rt=n.oxw(2);return n.KtG(rt.deleteRow(ct))}),n._UZ(2,"span",35),n.TgZ(3,"span",12),n._uU(4),n.ALo(5,"translate"),n.qZA()()}2&ve&&(n.xp6(4),n.Oqu(n.lcZ(5,1,"Common.Remove.Title")))}function ue(ve,c){if(1&ve&&(n.TgZ(0,"td",11)(1,"div",27),n.YNc(2,te,6,3,"button",28),n.YNc(3,$,6,3,"button",29),n.qZA()()),2&ve){const tt=n.oxw(3);n.xp6(2),n.Q6J("ngIf",tt.canSelect),n.xp6(1),n.Q6J("ngIf",tt.canDelete)}}function me(ve,c){if(1&ve&&(n.TgZ(0,"tr"),n.YNc(1,E,4,5,"td",13),n.YNc(2,ue,4,2,"td",6),n.qZA()),2&ve){const tt=n.oxw(2);n.xp6(1),n.Q6J("ngForOf",tt.columns),n.xp6(1),n.Q6J("ngIf",tt.actions)}}const we=function(ve){return{hover:ve}};function ye(ve,c){if(1&ve&&(n.TgZ(0,"table",4)(1,"thead")(2,"tr"),n.YNc(3,R,5,8,"th",5),n.YNc(4,k,4,3,"th",6),n.qZA()(),n.TgZ(5,"tbody"),n.YNc(6,me,3,2,"tr",7),n.qZA()()),2&ve){const tt=n.oxw();n.Q6J("ngClass",n.VKq(4,we,!tt.isReadOnly)),n.xp6(3),n.Q6J("ngForOf",tt.columns),n.xp6(1),n.Q6J("ngIf",tt.actions),n.xp6(2),n.Q6J("ngForOf",tt.rows)}}let qe=(()=>{class ve{constructor(tt,_t){this.router=tt,this.dataTableService=_t,this.onSelect=new n.vpe}set isReadOnly(tt){this._isReadOnly=tt||!1}get isReadOnly(){return this._isReadOnly}ngOnInit(){this.isReadOnly?(this.canDelete=!1,this.canSelect=!1):this.actions&&(this.canDelete=this.actions.includes(De.Delete),this.canSelect=this.actions.includes(De.Select))}ngAfterViewInit(){this.dataTableService.columns=this.columns}deleteRow(tt){this.canDelete&&this.dataTableService.deleteRowEvent.next(tt)}selectRow(tt){if(this.canSelect){const _t=new Ge(tt,this.selectButtonRef);this.onSelect.emit(_t)}}clickLinkCell(tt){this.router.navigate([`${tt.routeForLink}`,tt.identifier])}sortColumn(tt){(null!=tt.sort||null!=tt.sort)&&this.dataTableService.sortColumnEvent.next(tt)}}return ve.\u0275fac=function(tt){return new(tt||ve)(n.Y36(h.F0),n.Y36(S.n))},ve.\u0275cmp=n.Xpm({type:ve,selectors:[["app-data-table"]],contentQueries:function(tt,_t,ct){if(1&tt&&n.Suo(ct,e.E,4),2&tt){let rt;n.iGM(rt=n.CRH())&&(_t.columns=rt)}},viewQuery:function(tt,_t){if(1&tt&&(n.Gf(f,5),n.Gf(x,5)),2&tt){let ct;n.iGM(ct=n.CRH())&&(_t.selectButtonRef=ct.first),n.iGM(ct=n.CRH())&&(_t.deleteButtonRef=ct.first)}},inputs:{noRowsLabel:["norowslabel","noRowsLabel"],rows:"rows",actions:"actions",isReadOnly:"isReadOnly"},outputs:{onSelect:"onSelect"},decls:2,vars:2,consts:[["class","tw-alert tw-mb-4","role","alert",4,"ngIf"],["class","datatable",3,"ngClass",4,"ngIf"],["role","alert",1,"tw-alert","tw-mb-4"],["id","noRowsLabel",3,"innerHTML"],[1,"datatable",3,"ngClass"],[3,"className","click",4,"ngFor","ngForOf"],["class","tw-w-1",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"className","click"],[3,"ngClass"],[3,"ngClass",4,"ngIf"],[1,"tw-w-1"],[1,"sr-only"],[3,"className",4,"ngFor","ngForOf"],[3,"className"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["nonDateRow",""],["dateRowWithNoValue",""],["normalRowWithoutLink",""],[3,"href","click"],[3,"innerHTML"],[1,"tw-italic","tw-text-grey-800"],["class","fas fa-check tw-text-green-500",4,"ngIf"],["class","fas fa-times tw-opacity-25",4,"ngIf"],[1,"fas","fa-check","tw-text-green-500"],[1,"fas","fa-times","tw-opacity-25"],[1,"tw-flex","tw-items-center"],["id","selectButton","class","tw-btn-link tw-btn-small tw-mr-1","value","Edit",3,"click",4,"ngIf"],["id","deleteButton","class","tw-btn-link tw-btn-small tw-text-red-500","value","Delete",3,"click",4,"ngIf"],["id","selectButton","value","Edit",1,"tw-btn-link","tw-btn-small","tw-mr-1",3,"click"],["selectButton",""],["aria-hidden","true",1,"fad","fa-pencil"],["id","deleteButton","value","Delete",1,"tw-btn-link","tw-btn-small","tw-text-red-500",3,"click"],["deleteButton",""],["aria-hidden","true",1,"fas","fa-times"]],template:function(tt,_t){1&tt&&(n.YNc(0,b,3,3,"div",0),n.YNc(1,ye,7,6,"table",1)),2&tt&&(n.Q6J("ngIf",(null==_t.rows?null:_t.rows.length)<1),n.xp6(1),n.Q6J("ngIf",(null==_t.rows?null:_t.rows.length)>0))},dependencies:[y.mk,y.sg,y.O5,w.X$],encapsulation:2}),ve})();var De=(()=>{return(ve=De||(De={})).Delete="Delete",ve.Select="Select",De;var ve})();class Ge{constructor(c,tt=null){this.data=c,this.element=tt}}},4380:(nt,_e,m)=>{"use strict";m.d(_e,{t:()=>f});var n=m(9383),e=m(6895),h=m(2320),S=m(5503),y=m(8285),w=m(4650);let f=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=w.oAB({type:x}),x.\u0275inj=w.cJS({providers:[y.n],imports:[e.ez,n.aw,h.z8,S.D]}),x})()},8285:(nt,_e,m)=>{"use strict";m.d(_e,{n:()=>h});var n=m(7579),e=m(4650);let h=(()=>{class S{constructor(){this.sortColumnEvent=new n.x,this.sortCompletedEvent=new n.x,this.deleteRowEvent=new n.x}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},4225:(nt,_e,m)=>{"use strict";m.d(_e,{V:()=>W,j:()=>M});var n=m(4650),e=m(4006),h=m(1837),S=m(8176),y=m(6895);function w(B,V){1&B&&n.GkF(0)}function f(B,V){if(1&B&&(n.TgZ(0,"div",4),n.YNc(1,w,1,0,"ng-container",5),n.qZA()),2&B){n.oxw();const Q=n.MAs(5);n.xp6(1),n.Q6J("ngTemplateOutlet",Q)}}function x(B,V){1&B&&n.GkF(0)}function b(B,V){1&B&&n.GkF(0)}function g(B,V){if(1&B&&(n.TgZ(0,"div",6)(1,"div",7),n.YNc(2,x,1,0,"ng-container",5),n.qZA(),n.TgZ(3,"div",8),n.YNc(4,b,1,0,"ng-container",5),n.qZA()()),2&B){n.oxw();const Q=n.MAs(7),Y=n.MAs(5);n.xp6(2),n.Q6J("ngTemplateOutlet",Q),n.xp6(2),n.Q6J("ngTemplateOutlet",Y)}}function N(B,V){1&B&&n.GkF(0)}function R(B,V){if(1&B&&(n.TgZ(0,"div",6),n.YNc(1,N,1,0,"ng-container",5),n.qZA()),2&B){n.oxw();const Q=n.MAs(7);n.xp6(1),n.Q6J("ngTemplateOutlet",Q)}}function k(B,V){if(1&B&&(n.TgZ(0,"option",15),n._uU(1),n.ALo(2,"number"),n.qZA()),2&B){const Q=V.index;n.Q6J("value",Q),n.xp6(1),n.Oqu(n.xi3(2,2,Q,"2.0"))}}function O(B,V){if(1&B&&(n.TgZ(0,"option",15),n._uU(1),n.ALo(2,"number"),n.qZA()),2&B){const Q=V.index;n.Q6J("value",Q),n.xp6(1),n.Oqu(n.xi3(2,2,Q,"2.0"))}}function P(B,V){if(1&B){const Q=n.EpF();n.TgZ(0,"label",9),n._uU(1,"Hours"),n.qZA(),n.TgZ(2,"div",10)(3,"select",11),n.NdJ("ngModelChange",function(fe){n.CHM(Q);const J=n.oxw();return n.KtG(J.onHoursChange(fe))}),n.TgZ(4,"option",12),n._uU(5,"HH"),n.qZA(),n.YNc(6,k,3,5,"option",13),n.qZA()(),n.TgZ(7,"span",14),n._uU(8,":"),n.qZA(),n.TgZ(9,"label",9),n._uU(10,"Minutes"),n.qZA(),n.TgZ(11,"div",10)(12,"select",11),n.NdJ("ngModelChange",function(fe){n.CHM(Q);const J=n.oxw();return n.KtG(J.onMinutesChange(fe))}),n.TgZ(13,"option",12),n._uU(14,"MM"),n.qZA(),n.YNc(15,O,3,5,"option",13),n.qZA()()}if(2&B){const Q=n.oxw();n.Q6J("for",Q.id+"-time-hours"),n.xp6(3),n.Q6J("id",Q.id+"-time-hours")("ngModel",Q.hours),n.xp6(1),n.Q6J("value",void 0),n.xp6(2),n.Q6J("ngForOf",Q.counter(23)),n.xp6(3),n.Q6J("for",Q.id+"-time-minutes"),n.xp6(3),n.Q6J("id",Q.id+"-time-minutes")("ngModel",Q.minutes),n.xp6(1),n.Q6J("value",void 0),n.xp6(2),n.Q6J("ngForOf",Q.counter(59))}}function U(B,V){if(1&B){const Q=n.EpF();n.TgZ(0,"input",16),n.NdJ("ngModelChange",function(fe){n.CHM(Q);const J=n.oxw();return n.KtG(J.onDateChange(fe))})("keyup",function(fe){n.CHM(Q);const J=n.oxw();return n.KtG(J.onKeyUp(fe))}),n.qZA()}if(2&B){const Q=n.oxw();n.Q6J("id",Q.id+"-date")("ngModel",Q.stringDate),n.uIk("required",Q.required?"":null)("min",Q.minDate)("max",Q.maxDate)}}var W=(()=>{return(B=W||(W={})).Date="date",B.Time="time",B.DateTime="datetime",W;var B})();let M=(()=>{class B{constructor(){this.id=(0,S.qs)(),this.displayType=W.DateTime,this.required=!1,this.disabled=!1,this.keyup=new n.vpe,this.onChange=Q=>{},this.onTouched=()=>{}}set value(Q){this.setDate(Q)}set min(Q){this.minDate=this.toMinMaxDateString(Q)}set max(Q){this.maxDate=this.toMinMaxDateString(Q)}get hours(){return(this.date?this.date:void 0)?.hour}get minutes(){return(this.date?this.date:void 0)?.minute}ngOnInit(){}writeValue(Q){this.setDate(Q)}registerOnChange(Q){this.onChange=Q}registerOnTouched(Q){this.onTouched=Q}setDisabledState(Q){this.disabled=Q}get opacity(){return this.disabled?.25:1}validate(Q){return!this.required||this.date?null:{required:{valid:!1}}}onKeyUp(Q){this.keyup.emit(Q)}onHoursChange(Q){this.date=this.date?this.date.set({hour:Q}):h.ou.now().set({hour:Q}),this.onChange(this.date.toString())}onMinutesChange(Q){this.date=this.date?this.date.set({minute:Q}):h.ou.now().set({minute:Q}),this.onChange(this.date.toString())}onDateChange(Q){this.stringDate=Q;let Y=h.ou.fromFormat(Q,"yyyy-MM-dd");Y.isValid&&(this.date=this.date?this.date.set({year:Y.year,month:Y.month,day:Y.day}):Y,this.onChange(this.date.toString()))}counter(Q){return new Array(Q+1)}setDate(Q){if(Q){if(Q instanceof h.ou&&(this.date=Q),"string"==typeof Q){const Y=h.ou.fromISO(Q);this.date=Y.isValid?Y:void 0}this.stringDate=this.date.toFormat("yyyy-MM-dd")}}toMinMaxDateString(Q){let Y;return Y=Q instanceof h.ou?Q:h.ou.fromISO(Q.toString()),Y.toFormat("yyyy-MM-dd")}}return B.\u0275fac=function(Q){return new(Q||B)},B.\u0275cmp=n.Xpm({type:B,selectors:[["app-date-time"]],hostVars:2,hostBindings:function(Q,Y){2&Q&&n.Udp("opacity",Y.opacity)},inputs:{id:"id",value:"value",displayType:"displayType",required:"required",disabled:"disabled",min:"min",max:"max"},outputs:{keyup:"keyup"},features:[n._Bn([{provide:e.JU,useExisting:(0,n.Gpc)(()=>B),multi:!0},{provide:e.Cf,useExisting:(0,n.Gpc)(()=>B),multi:!0}])],decls:8,vars:3,consts:[["class","tw-flex tw-items-center",4,"ngIf"],["class","tw-flex tw-flex-wrap",4,"ngIf"],["timeTemplate",""],["dateTemplate",""],[1,"tw-flex","tw-items-center"],[4,"ngTemplateOutlet"],[1,"tw-flex","tw-flex-wrap"],[1,"tw-w-18"],[1,"tw-flex-none","tw-flex","tw-items-center","tw-pl-3"],[1,"sr-only",3,"for"],[1,"tw-form-select","tw-flex-no-shrink","tw-w-18"],[1,"tw-form-control",3,"id","ngModel","ngModelChange"],["disabled","","selected","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["aria-hidden","true",1,"tw-font-semibold","tw-flex-no-shrink","px-1"],[3,"value"],["type","date","placeholder","dd/mm/yyyy",1,"tw-form-control",3,"id","ngModel","ngModelChange","keyup"]],template:function(Q,Y){1&Q&&(n.TgZ(0,"div"),n.YNc(1,f,2,1,"div",0),n.YNc(2,g,5,2,"div",1),n.YNc(3,R,2,1,"div",1),n.YNc(4,P,16,10,"ng-template",null,2,n.W1O),n.YNc(6,U,1,5,"ng-template",null,3,n.W1O),n.qZA()),2&Q&&(n.xp6(1),n.Q6J("ngIf","time"==Y.displayType),n.xp6(1),n.Q6J("ngIf","datetime"==Y.displayType),n.xp6(1),n.Q6J("ngIf","date"==Y.displayType))},dependencies:[y.sg,y.O5,y.tP,e.YN,e.Kr,e.Fj,e.EJ,e.JJ,e.Q7,e.On,y.JJ],encapsulation:2}),B})()},5898:(nt,_e,m)=>{"use strict";m.d(_e,{T:()=>w});var n=m(6895),e=m(5503),h=m(9383),S=m(4006),y=m(4650);let w=(()=>{class f{}return f.\u0275fac=function(b){return new(b||f)},f.\u0275mod=y.oAB({type:f}),f.\u0275inj=y.cJS({imports:[n.ez,S.u5,e.D,h.aw]}),f})()},85:(nt,_e,m)=>{"use strict";m.d(_e,{e:()=>w});var n=m(7185),e=m(8185),h=m(9383),S=m(4650),y=m(2979);let w=(()=>{class f{constructor(b){this.injector=b}handleError(b){if((0,S.X6Q)())console.log(b);else{const g=this.injector.get(e.F0),N=this.injector.get(n._W),R=this.injector.get(h.sK),k=this.injector.get(y.An);N.info(R.instant("Notifications.Support")),N.info(R.instant("Notifications.Apology"),R.instant("Notifications.Sorry"));const O=k.translateRoute("/home");g.navigateByUrl(O)}}}return f.\u0275fac=function(b){return new(b||f)(S.LFG(S.zs3))},f.\u0275prov=S.Yz7({token:f,factory:f.\u0275fac}),f})()},9650:(nt,_e,m)=>{"use strict";m.d(_e,{I:()=>f});var n=m(6895),e=m(9383),h=m(4006),S=m(5898),y=m(1191),w=m(4650);let f=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=w.oAB({type:x}),x.\u0275inj=w.cJS({imports:[h.u5,h.UX,y.H3,n.ez,e.aw,S.T]}),x})()},7608:(nt,_e,m)=>{"use strict";m.d(_e,{L:()=>g});var n=m(4650),e=m(6895),h=m(9383);function S(N,R){if(1&N&&(n._UZ(0,"span",7),n.ALo(1,"translate")),2&N){const k=n.oxw(2);n.Q6J("innerHtml",n.lcZ(1,1,k.helpText),n.oJD)}}function y(N,R){if(1&N&&(n.TgZ(0,"label",4)(1,"span",5),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,S,2,3,"span",6),n.qZA()),2&N){const k=n.oxw();n.Q6J("for",k.idFor),n.xp6(2),n.Oqu(n.lcZ(3,3,k.labelText)),n.xp6(2),n.Q6J("ngIf",k.showHelpText)}}function w(N,R){if(1&N&&(n._UZ(0,"span",7),n.ALo(1,"translate")),2&N){const k=n.oxw(2);n.Q6J("innerHtml",n.lcZ(1,1,k.helpText),n.oJD)}}function f(N,R){if(1&N&&(n.TgZ(0,"p",8)(1,"span",5),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,w,2,3,"span",6),n.qZA()),2&N){const k=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,2,k.labelText)),n.xp6(2),n.Q6J("ngIf",k.showHelpText)}}const x=function(N){return{"last:tw-border-0 last:tw-mb-0 last:tw-pb-0":N}},b=["*"];let g=(()=>{class N{constructor(){this.helpText="",this.hasLabel=!0,this.isLast=!1,this.showHelpText=!1}ngOnInit(){""!==this.helpText&&(this.showHelpText=!0)}}return N.\u0275fac=function(k){return new(k||N)},N.\u0275cmp=n.Xpm({type:N,selectors:[["app-form-row"]],inputs:{idFor:["id","idFor"],labelText:["label","labelText"],helpText:["help","helpText"],hasLabel:"hasLabel",isLast:"isLast"},ngContentSelectors:b,decls:5,vars:5,consts:[[1,"tw-form-row-border","tw-flex","tw-items-center",3,"ngClass"],["class","tw-form-label-inline",3,"for",4,"ngIf"],["class","tw-form-label-inline",4,"ngIf"],[1,"tw-w-full"],[1,"tw-form-label-inline",3,"for"],[1,"tw-block"],["class","tw-form-label-help",3,"innerHtml",4,"ngIf"],[1,"tw-form-label-help",3,"innerHtml"],[1,"tw-form-label-inline"]],template:function(k,O){1&k&&(n.F$t(),n.TgZ(0,"div",0),n.YNc(1,y,5,5,"label",1),n.YNc(2,f,5,4,"p",2),n.TgZ(3,"div",3),n.Hsn(4),n.qZA()()),2&k&&(n.Q6J("ngClass",n.VKq(3,x,O.isLast)),n.xp6(1),n.Q6J("ngIf",O.idFor&&O.hasLabel),n.xp6(1),n.Q6J("ngIf",!O.idFor&&O.hasLabel))},dependencies:[e.mk,e.O5,h.X$],encapsulation:2}),N})()},799:(nt,_e,m)=>{"use strict";m.d(_e,{O:()=>w});var n=m(4650),e=m(6895);const h=function(f,x){return{"tw-form-switch__slider--traffic":f,"tw-form-switch__slider--alt":x}},S=function(f,x){return{"tw-form-switch__state--traffic":f,"tw-form-switch__state--alt":x}},y=["*"];let w=(()=>{class f{constructor(){this.isAlt=!1,this.isTraffic=!1}}return f.\u0275fac=function(b){return new(b||f)},f.\u0275cmp=n.Xpm({type:f,selectors:[["app-form-toggle"]],inputs:{idFor:["id","idFor"],isAlt:"isAlt",isTraffic:"isTraffic"},ngContentSelectors:y,decls:4,vars:9,consts:[[1,"tw-form-switch",3,"for"],[1,"tw-form-switch__slider",3,"ngClass"],[1,"tw-form-switch__state",3,"ngClass"]],template:function(b,g){1&b&&(n.F$t(),n.TgZ(0,"label",0),n.Hsn(1),n.TgZ(2,"span",1),n._UZ(3,"span",2),n.qZA()()),2&b&&(n.Q6J("for",g.idFor),n.xp6(2),n.Q6J("ngClass",n.WLB(3,h,g.isTraffic,g.isAlt)),n.xp6(1),n.Q6J("ngClass",n.WLB(6,S,g.isTraffic,g.isAlt)))},dependencies:[e.mk],encapsulation:2}),f})()},8176:(nt,_e,m)=>{"use strict";m.d(_e,{AZ:()=>x,Ew:()=>y,Fd:()=>O,GA:()=>M,Hr:()=>ee,RW:()=>w,SV:()=>B,X1:()=>h,Zr:()=>J,eC:()=>P,gR:()=>V,hC:()=>Q,le:()=>S,lm:()=>b,mn:()=>g,qs:()=>R,ry:()=>k,sY:()=>U,ub:()=>Y});var n=m(1206),e=m(1837);function h(G,E){return`${e.ou.fromISO(G).toFormat(E)} UTC`}function S(G){return null==G}function y(G){return null==G||"string"!=typeof G||""===G||null!==G.match(/^ *$/)}function w(G){const E=document.createElement("a");return E.href=G,E.protocol+"//"+decodeURIComponent(E.host)}function x(G){const te=new RegExp("(^https?://|urn:|tcp://)").exec(G);if(te){if("urn:"===te[0])return!1}else G="http://"+G;const $=G.split("/");return G.endsWith("/")?$.length>4:$.length>3}function b(G){const te=new RegExp("https?://|urn:|tcp://").exec(G);return te?te[0]:null}function g(G,E){const te=JSON.parse(JSON.stringify(G));return E.forEach($=>{let ue=te.length;for(;ue--;)te[ue].name===$.name&&te.splice(ue,1)}),te}function R(){let G=(new Date).getTime();return typeof performance<"u"&&"function"==typeof performance.now&&(G+=performance.now()),"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(E){const te=(G+16*Math.random())%16|0;return G=Math.floor(G/16),("x"===E?te:3&te|8).toString(16)})}function k(G){return E=>G.test(E.value)?null:{regex:{value:E.value}}}function O(){return G=>0===(G.value||"").trim().length?{whitespace:{value:G.value}}:null}function P(G){const E=e.ou.now();return e.ou.fromISO(G.value).diff(E).milliseconds>1?{dateInFuture:!0}:null}function U(G){const E=e.ou.fromISO(G.get("fromDate").value);return e.ou.fromISO(G.get("toDate").value).diff(E,"minutes").minutes<1?{fromDateIsAfterToDate:!0}:null}function M(G){if(G&&G.size>0){const E={};return G.forEach((te,$)=>{E[$]=te}),E}return{}}function B(){const G=document.getElementsByTagName("base")[0].attributes.href.value;return y(G)?"/":G.endsWith("/")?G:`${G}/`}function V(G){return!(!G||0===G.length)&&(G.includes(n.y.IdentityServerManagerReadOnly)||G.includes(n.y.AllReadOnly))&&!(G.includes(n.y.IdentityServerManager)||G.includes(n.y.All))}function Q(G){return!(!G||0===G.length)&&(G.includes(n.y.IdentityServerManager)||G.includes(n.y.All))}function Y(G){return!(!G||0===G.length)&&(G.includes(n.y.UserManagerReadOnly)||G.includes(n.y.AllReadOnly))&&!(G.includes(n.y.UserManager)||G.includes(n.y.All))}function J(G){return!(!G||0===G.length)&&G.includes(n.y.All)}function ee(G){return!(!G||0===G.length)&&G.includes(n.y.AllReadOnly)&&!G.includes(n.y.All)}},9465:(nt,_e,m)=>{"use strict";m.d(_e,{U:()=>fe});var n=m(4650),e=m(4006),h=m(9748),S=m(5664),y=m(6502),w=m(8176),f=m(6895),x=m(9383);function b(J,ee){if(1&J&&(n.TgZ(0,"div"),n._UZ(1,"input",7),n.qZA()),2&J){const G=n.oxw();n.xp6(1),n.s9C("id",G.id+"-input"),n.Q6J("ngModel",G.value)}}function g(J,ee){if(1&J){const G=n.EpF();n.TgZ(0,"div")(1,"input",8),n.NdJ("keydown",function(te){n.CHM(G);const $=n.oxw();return n.KtG($.onKeyDown(te))})("paste",function(te){n.CHM(G);const $=n.oxw();return n.KtG($.onPaste(te))})("ngModelChange",function(te){n.CHM(G);const $=n.oxw();return n.KtG($.onValueChange(te))}),n.qZA()()}if(2&J){const G=n.oxw();n.xp6(1),n.s9C("id",G.id+"-input"),n.Q6J("ngModel",G.value)}}function N(J,ee){if(1&J&&(n.TgZ(0,"span",13),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&J){const G=n.oxw(2);n.xp6(1),n.AsE(" ",G.timeSpan.years," ",n.lcZ(2,2,G.displayTimeSpanUnit(G.timeSpan.years,"Year"))," ")}}function R(J,ee){if(1&J&&(n.TgZ(0,"span",13),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&J){const G=n.oxw(2);n.xp6(1),n.AsE(" ",G.timeSpan.months," ",n.lcZ(2,2,G.displayTimeSpanUnit(G.timeSpan.months,"Month"))," ")}}function k(J,ee){if(1&J&&(n.TgZ(0,"span",13),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&J){const G=n.oxw(2);n.xp6(1),n.AsE(" ",G.timeSpan.weeks," ",n.lcZ(2,2,G.displayTimeSpanUnit(G.timeSpan.weeks,"Week"))," ")}}function O(J,ee){if(1&J&&(n.TgZ(0,"span",13),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&J){const G=n.oxw(2);n.xp6(1),n.AsE(" ",G.timeSpan.days," ",n.lcZ(2,2,G.displayTimeSpanUnit(G.timeSpan.days,"Day"))," ")}}function P(J,ee){if(1&J&&(n.TgZ(0,"span",13),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&J){const G=n.oxw(2);n.xp6(1),n.AsE(" ",G.timeSpan.hours," ",n.lcZ(2,2,G.displayTimeSpanUnit(G.timeSpan.hours,"Hour"))," ")}}function U(J,ee){if(1&J&&(n.TgZ(0,"span",13),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&J){const G=n.oxw(2);n.xp6(1),n.AsE(" ",G.timeSpan.minutes," ",n.lcZ(2,2,G.displayTimeSpanUnit(G.timeSpan.minutes,"Minute"))," ")}}function W(J,ee){if(1&J&&(n.TgZ(0,"span",13),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&J){const G=n.oxw(2);n.xp6(1),n.AsE(" ",G.timeSpan.seconds," ",n.lcZ(2,2,G.displayTimeSpanUnit(G.timeSpan.seconds,"Second"))," ")}}function M(J,ee){1&J&&(n.TgZ(0,"span",13),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&J&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Clients.Tokens.Durations.Unlimited")," "))}function B(J,ee){if(1&J&&(n.TgZ(0,"p",9),n._UZ(1,"span",10),n.ALo(2,"translate"),n.TgZ(3,"span",11),n.YNc(4,N,3,4,"span",12),n.YNc(5,R,3,4,"span",12),n.YNc(6,k,3,4,"span",12),n.YNc(7,O,3,4,"span",12),n.YNc(8,P,3,4,"span",12),n.YNc(9,U,3,4,"span",12),n.YNc(10,W,3,4,"span",12),n.YNc(11,M,3,3,"span",12),n.qZA()()),2&J){const G=n.oxw();n.s9C("id",G.id+"-longTimeLabel"),n.xp6(1),n.uIk("aria-label",n.lcZ(2,10,"Clients.Tokens.DurationTitle")),n.xp6(3),n.Q6J("ngIf",G.timeSpan.years>0),n.xp6(1),n.Q6J("ngIf",G.timeSpan.months>0),n.xp6(1),n.Q6J("ngIf",G.timeSpan.weeks>0),n.xp6(1),n.Q6J("ngIf",G.timeSpan.days>0),n.xp6(1),n.Q6J("ngIf",G.timeSpan.hours>0),n.xp6(1),n.Q6J("ngIf",G.timeSpan.minutes>0),n.xp6(1),n.Q6J("ngIf",G.timeSpan.seconds>0),n.xp6(1),n.Q6J("ngIf",G.showUnlimitedTimeSpan())}}function V(J,ee){if(1&J&&(n.TgZ(0,"span",16),n._uU(1),n.qZA()),2&J){const G=n.oxw().$implicit;n.xp6(1),n.Oqu(G.duration)}}const Q=function(J,ee){return{"tw-btn active":J,"tw-btn-link":ee}};function Y(J,ee){if(1&J){const G=n.EpF();n.TgZ(0,"li")(1,"button",14),n.NdJ("click",function(){const $=n.CHM(G).$implicit,ue=n.oxw();return n.KtG(ue.setInput($))}),n.YNc(2,V,2,1,"span",15),n.TgZ(3,"span"),n._uU(4),n.ALo(5,"translate"),n.qZA()()()}if(2&J){const G=ee.$implicit,E=n.oxw();n.xp6(1),n.Q6J("ngClass",n.WLB(6,Q,E.checkSelected(G),!E.checkSelected(G)))("disabled",E.disabled),n.xp6(1),n.Q6J("ngIf",G.duration),n.xp6(2),n.Oqu(n.lcZ(5,4,"Clients.Tokens.Durations."+G.unit+"Short"))}}let fe=(()=>{class J{constructor(){this.id=(0,w.qs)(),this.allowUnlimited=!1,this.disabled=!1,this.required=!1,this.unitMap=h.S.getUnitMap(),this.LifetimeUnit=S.f,this.onChange=G=>{},this.onTouched=()=>{}}set value(G){this.setValue(G,!1)}get value(){return this._value}setValue(G,E=!0){!Number.isInteger(G)||(this._value=G,this.timeSpan?this.timeSpan.formatSeconds(G):this.timeSpan=new y.i(G),E&&this.onChange(G))}onValueChange(G){this.setValue(G)}onKeyDown(G){return 69!==G.keyCode&&189!==G.keyCode&&190!==G.keyCode}onPaste(G){const te=G.clipboardData?.getData("text"),$=Number(te);Number.isInteger($)&&($>0||$>=0&&this.allowUnlimited)||G.preventDefault()}writeValue(G){this.setValue(G,!1)}registerOnChange(G){this.onChange=G}registerOnTouched(G){this.onTouched=G}setDisabledState(G){this.disabled=G}validate(G){if(this.required){if(!this.value)return{required:{valid:!1}}}else if(!this.value)return null;return!isNaN(this.value)&&this.value>0?null:{number:{valid:!1}}}setInput(G){const E=G.duration*this.unitMap.get(G.unit);this.setValue(E)}checkSelected(G){return this.value===G.duration*this.unitMap.get(G.unit)}displayTimeSpanUnit(G,E){return"Clients.Tokens.Durations."+E+(G>1?"s":"")}showUnlimitedTimeSpan(){return!(!this.allowUnlimited||null!=this.timeSpan&&(0!==this.timeSpan.years||0!==this.timeSpan.months||0!==this.timeSpan.weeks||0!==this.timeSpan.days||0!==this.timeSpan.hours||0!==this.timeSpan.minutes||0!==this.timeSpan.seconds))}}return J.\u0275fac=function(G){return new(G||J)},J.\u0275cmp=n.Xpm({type:J,selectors:[["app-lifetime-picker"]],inputs:{id:"id",value:"value",buttons:"buttons",allowUnlimited:"allowUnlimited",disabled:"disabled",required:"required"},features:[n._Bn([{provide:e.JU,useExisting:(0,n.Gpc)(()=>J),multi:!0},{provide:e.Cf,useExisting:(0,n.Gpc)(()=>J),multi:!0}])],decls:8,vars:5,consts:[[1,"tw-flex-grid","sm:tw-flex-nowrap","lg:tw-max-w-2xl"],[1,"tw-flex-grid-col"],[4,"ngIf"],["class","tw-form-text tw-flex tw-items-center",3,"id",4,"ngIf"],[1,"tw-flex-grid-col","sm:tw-w-auto"],[1,"tw-flex","tw-items-center",3,"id"],[4,"ngFor","ngForOf"],["type","number","min","0","disabled","",1,"tw-form-control",3,"id","ngModel"],["type","number","min","0",1,"tw-form-control",3,"id","ngModel","keydown","paste","ngModelChange"],[1,"tw-form-text","tw-flex","tw-items-center",3,"id"],[1,"far","fa-clock","tw-mr-2","tw--mt-px"],[1,"tw-flex","tw-flex-wrap"],["class","tw-mr-2",4,"ngIf"],[1,"tw-mr-2"],[3,"ngClass","disabled","click"],["class","tw-mr-1",4,"ngIf"],[1,"tw-mr-1"]],template:function(G,E){1&G&&(n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,b,2,2,"div",2),n.YNc(3,g,2,2,"div",2),n.YNc(4,B,12,12,"p",3),n.qZA(),n.TgZ(5,"div",4)(6,"ul",5),n.YNc(7,Y,6,9,"li",6),n.qZA()()()),2&G&&(n.xp6(2),n.Q6J("ngIf",E.disabled),n.xp6(1),n.Q6J("ngIf",!E.disabled),n.xp6(1),n.Q6J("ngIf",E.value>0||E.value>=0&&E.allowUnlimited),n.xp6(2),n.s9C("id",E.id+"-buttonList"),n.xp6(1),n.Q6J("ngForOf",E.buttons))},dependencies:[f.mk,f.sg,f.O5,e.Fj,e.wV,e.JJ,e.qQ,e.On,x.X$],encapsulation:2}),J})()},1274:(nt,_e,m)=>{"use strict";m.d(_e,{T:()=>w});var n=m(6895),e=m(2979),h=m(4006),S=m(9383),y=m(4650);let w=(()=>{class f{}return f.\u0275fac=function(b){return new(b||f)},f.\u0275mod=y.oAB({type:f}),f.\u0275inj=y.cJS({imports:[n.ez,h.u5,h.UX,e.fQ,S.aw]}),f})()},8975:(nt,_e,m)=>{"use strict";m.d(_e,{d:()=>w});var n=m(6895),e=m(9383),h=m(6980),S=m(4022),y=m(4650);let w=(()=>{class f{}return f.\u0275fac=function(b){return new(b||f)},f.\u0275mod=y.oAB({type:f}),f.\u0275inj=y.cJS({imports:[n.ez,e.aw,h.K,S.p]}),f})()},965:(nt,_e,m)=>{"use strict";m.d(_e,{R:()=>J});var n=m(4650),e=m(6895),h=m(7579),S=m(4968),y=m(2722),w=m(4004),f=m(8675),x=m(9300),b=m(1365);const g=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");var k=m(5259),O=m(1923),P=m(6219),U=m(9383);function W(ee,G){if(1&ee){const E=n.EpF();n.TgZ(0,"button",16),n.NdJ("click",function(){n.CHM(E);const $=n.oxw();return n.KtG($.cancel())}),n._UZ(1,"span",17),n.TgZ(2,"span",18),n._uU(3),n.ALo(4,"translate"),n.qZA()()}2&ee&&(n.xp6(3),n.Oqu(n.lcZ(4,1,"Common.Close")))}function M(ee,G){if(1&ee){const E=n.EpF();n.TgZ(0,"button",19),n.NdJ("click",function(){n.CHM(E);const $=n.oxw();return n.KtG($.save())}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&ee){const E=n.oxw();n.Q6J("disabled",E.addDisabled),n.xp6(1),n.hij(" ",n.lcZ(2,2,E.saveText)," ")}}function B(ee,G){if(1&ee){const E=n.EpF();n.TgZ(0,"button",20),n.NdJ("click",function(){n.CHM(E);const $=n.oxw();return n.KtG($.delete())}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&ee){const E=n.oxw();n.Q6J("disabled",E.deleteDisabled),n.xp6(1),n.hij(" ",n.lcZ(2,2,E.deleteText)," ")}}function V(ee,G){if(1&ee){const E=n.EpF();n.TgZ(0,"div",21)(1,"button",22),n.NdJ("click",function(){n.CHM(E);const $=n.oxw();return n.KtG($.saveAndReAdd())}),n._uU(2),n.ALo(3,"translate"),n.qZA()()}if(2&ee){const E=n.oxw();n.xp6(1),n.Q6J("disabled",E.addDisabled),n.xp6(1),n.hij(" ",n.lcZ(3,2,E.saveAndReAddText)," ")}}function Q(ee,G){if(1&ee){const E=n.EpF();n.TgZ(0,"button",23),n.NdJ("click",function(){n.CHM(E);const $=n.oxw();return n.KtG($.cancel())}),n._uU(1),n.ALo(2,"translate"),n.qZA()}2&ee&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Common.Cancel")," "))}function Y(ee,G){1&ee&&n._UZ(0,"div",24)}const fe=["*"];let J=(()=>{class ee{constructor(E,te,$){this.document=E,this.elRef=te,this.modalService=$,this.hideCancel=!1,this.modalType=O.w.Default,this.saveText="Common.Save",this.saveAndReAddText="Common.SaveAndAdd",this.deleteText="Common.Delete.Title",this.addDisabled=!1,this.deleteDisabled=!1,this.onSave=new n.vpe,this.onSaveAndReAdd=new n.vpe,this.onDelete=new n.vpe,this.onCancel=new n.vpe,this.isVisible=!1,this.isVisible$=new h.x,this.showBackdrop=!1}ngOnInit(){this.modalService.add(this),this.element=this.elRef.nativeElement.firstChild,this.actions&&(this.canDelete=this.actions.includes(k.n.Delete),this.canSave=this.actions.includes(k.n.Save),this.canSaveAndReAdd=this.actions.includes(k.n.SaveAndReAdd))}delete(){this.onDelete.emit()}save(){this.onSave.emit(),this.modalService.hideById(this.modalId)}saveAndReAdd(){this.onSaveAndReAdd.emit()}show(){this.isVisible=!0,function N(ee,G){const E=function R(ee){const G=Array.from(ee.querySelectorAll(g)).filter(E=>-1!==E.tabIndex);return[G[0],G[G.length-1]]}(ee),[te,$]=E,ue=(0,S.R)(ee,"focusin").pipe((0,y.R)(G),(0,w.U)(me=>me.target),(0,f.O)(te));te.focus(),(0,S.R)(ee,"keydown").pipe((0,y.R)(G),(0,x.h)(me=>"Tab"===me.key),(0,b.M)(ue)).subscribe(([me,we])=>{(we===te||we===ee)&&me.shiftKey&&($.focus(),me.preventDefault()),we===$&&!me.shiftKey&&(te.focus(),me.preventDefault())}),(0,S.R)(document,"click").pipe((0,y.R)(G),(0,b.M)(ue),(0,w.U)(me=>me[1])).subscribe(me=>{me.focus()})}(this.element,this.isVisible$),1===this.modalService.visibleModals()&&(this.showBackdrop=!0,this.document.body.classList.add("tw-overflow-hidden")),(0,S.R)(this.document,"keydown").pipe((0,y.R)(this.isVisible$),(0,x.h)(E=>"Esc"===E.key)).subscribe(()=>{this.isVisible&&this.cancel()})}cancel(){!1===this.hideCancel&&this.onCancel.emit()}hide(){this.isVisible=!1,this.isVisible$.next(),this.modalService.visibleModals()<1&&(this.showBackdrop=!1,this.document.body.classList.remove("tw-overflow-hidden"))}ngOnDestroy(){this.modalService.hideById(this.modalId),this.modalService.remove(this)}}return ee.\u0275fac=function(E){return new(E||ee)(n.Y36(e.K0),n.Y36(n.SBq),n.Y36(P.Z))},ee.\u0275cmp=n.Xpm({type:ee,selectors:[["app-custom-modal"]],inputs:{modalId:"modalId",title:"title",actions:"actions",hideCancel:"hideCancel",modalType:"modalType",saveText:"saveText",saveAndReAddText:"saveAndReAddText",deleteText:"deleteText",addDisabled:"addDisabled",deleteDisabled:"deleteDisabled"},outputs:{onSave:"onSave",onSaveAndReAdd:"onSaveAndReAdd",onDelete:"onDelete",onCancel:"onCancel"},ngContentSelectors:fe,decls:19,vars:14,consts:[["role","dialog","aria-modal","true","tabindex","-1",1,"modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title",3,"id"],["type","button","class","modal-close",3,"click",4,"ngIf"],[1,"modal-body","scrollbars"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","save","class","tw-btn-success tw-mr-3","type","submit",3,"disabled","click",4,"ngIf"],["id","delete","class","tw-btn-danger tw-mr-3","type","submit",3,"disabled","click",4,"ngIf"],["class","tw-hidden tw-mr-3 md:tw-block",4,"ngIf"],["class","tw-btn-link tw--mr-4",3,"click",4,"ngIf"],["id","backdrop","class","modal-backdrop show",4,"ngIf"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],["id","save","type","submit",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],["id","delete","type","submit",1,"tw-btn-danger","tw-mr-3",3,"disabled","click"],[1,"tw-hidden","tw-mr-3","md:tw-block"],["id","saveAndReSubmit","type","submit",1,"tw-btn",3,"disabled","click"],[1,"tw-btn-link","tw--mr-4",3,"click"],["id","backdrop",1,"modal-backdrop","show"]],template:function(E,te){1&E&&(n.F$t(),n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),n._uU(5),n.ALo(6,"translate"),n.qZA(),n.YNc(7,W,5,3,"button",5),n.qZA(),n.TgZ(8,"div",6),n.Hsn(9),n.qZA(),n._UZ(10,"div",7),n.TgZ(11,"div",8)(12,"div",9)(13,"div",10),n.YNc(14,M,3,4,"button",11),n.YNc(15,B,3,4,"button",12),n.YNc(16,V,4,4,"div",13),n.qZA(),n.YNc(17,Q,3,3,"button",14),n.qZA()()()()(),n.YNc(18,Y,1,0,"div",15)),2&E&&(n.ekj("show",te.isVisible),n.uIk("aria-hidden",!te.isVisible)("aria-labelledby","modal-title-"+te.modalId),n.xp6(4),n.MGl("id","modal-title-",te.modalId,""),n.xp6(1),n.Oqu(n.lcZ(6,12,te.title)),n.xp6(2),n.Q6J("ngIf",!te.hideCancel),n.xp6(7),n.Q6J("ngIf",te.canSave),n.xp6(1),n.Q6J("ngIf",te.canDelete),n.xp6(1),n.Q6J("ngIf",te.canSaveAndReAdd),n.xp6(1),n.Q6J("ngIf",!te.hideCancel),n.xp6(1),n.Q6J("ngIf",te.showBackdrop))},dependencies:[e.O5,U.X$],encapsulation:2}),ee})()},6219:(nt,_e,m)=>{"use strict";m.d(_e,{Z:()=>h});var n=m(6895),e=m(4650);let h=(()=>{class S{constructor(w){this.document=w,this.modalList=[]}add(w){this.modalList.push(w)}remove(w){const f=this.modalList.indexOf(w);this.modalList.splice(f)}visibleModals(){return this.modalList.filter(w=>w.isVisible).length}showById(w,f){null!=f&&null!=f.nativeElement&&(this.lastClickedEl=f.nativeElement),this.modalList.find(b=>b.modalId===w).show()}hideById(w){const f=this.modalList.find(x=>x.modalId===w);f&&(f.hide(),this.focusLastEl())}focusLastEl(){this.lastClickedEl&&this.lastClickedEl.focus()}}return S.\u0275fac=function(w){return new(w||S)(e.LFG(n.K0))},S.\u0275prov=e.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},7696:(nt,_e,m)=>{"use strict";m.d(_e,{P:()=>f});var n=m(4650),e=m(6895),h=m(9383);function S(x,b){if(1&x&&(n.TgZ(0,"span",6),n._uU(1),n.qZA()),2&x){const g=n.oxw();n.xp6(1),n.Oqu(g.pageXofX)}}function y(x,b){1&x&&(n.TgZ(0,"span",7),n._uU(1,"\u2022"),n.qZA())}function w(x,b){if(1&x){const g=n.EpF();n.TgZ(0,"nav",8),n.ALo(1,"translate"),n.TgZ(2,"ul",9)(3,"li")(4,"button",10),n.NdJ("click",function(){n.CHM(g);const R=n.oxw();return n.KtG(R.goToPage(1))}),n.TgZ(5,"span"),n._UZ(6,"span",11),n.qZA(),n.TgZ(7,"span",12),n._uU(8),n.ALo(9,"translate"),n.qZA()()(),n.TgZ(10,"li",13)(11,"button",14),n.NdJ("click",function(){n.CHM(g);const R=n.oxw();return n.KtG(R.goToPage(R.currentPage-1))}),n.TgZ(12,"span"),n._UZ(13,"span",15),n.qZA(),n.TgZ(14,"span",12),n._uU(15),n.ALo(16,"translate"),n.qZA()()(),n.TgZ(17,"li",13)(18,"button",16),n.NdJ("click",function(){n.CHM(g);const R=n.oxw();return n.KtG(R.goToPage(R.currentPage+1))}),n.TgZ(19,"span"),n._UZ(20,"span",17),n.qZA(),n.TgZ(21,"span",12),n._uU(22),n.ALo(23,"translate"),n.qZA()()(),n.TgZ(24,"li",13)(25,"button",18),n.NdJ("click",function(){n.CHM(g);const R=n.oxw();return n.KtG(R.goToPage(R.lastPage))}),n.TgZ(26,"span"),n._UZ(27,"span",19),n.qZA(),n.TgZ(28,"span",12),n._uU(29),n.ALo(30,"translate"),n.qZA()()()()()}if(2&x){const g=n.oxw();n.uIk("aria-label",n.lcZ(1,9,"Nav.Page")),n.xp6(4),n.Q6J("disabled",1==g.currentPage),n.xp6(4),n.Oqu(n.lcZ(9,11,"Nav.First")),n.xp6(3),n.Q6J("disabled",1==g.currentPage),n.xp6(4),n.Oqu(n.lcZ(16,13,"Nav.Previous")),n.xp6(3),n.Q6J("disabled",g.currentPage==g.lastPage),n.xp6(4),n.Oqu(n.lcZ(23,15,"Nav.Next")),n.xp6(3),n.Q6J("disabled",g.currentPage==g.lastPage),n.xp6(4),n.Oqu(n.lcZ(30,17,"Nav.Last"))}}let f=(()=>{class x{constructor(g,N){this.translate=g,this.decimalPipe=N,this.onGoToPage=new n.vpe}ngOnInit(){this.setupDefaults(),this.setupPages()}setupDefaults(){this.totalResults=void 0===this.totalResults?0:this.totalResults,this.currentPage=void 0===this.currentPage?1:this.currentPage,this.lastPage=void 0===this.lastPage?1:this.lastPage,this.hidePager=void 0!==this.hidePager}setupPages(){let g=this.translate.instant("Nav.PageXofX");g=g.replace("{0}",this.decimalPipe.transform(this.currentPage)),g=g.replace("{1}",this.decimalPipe.transform(this.lastPage)),this.pageXofX=g}goToPage(g){void 0!==this.onGoToPage&&(g<1?g=1:g>this.lastPage&&(g=this.lastPage),this.onGoToPage.emit(g))}}return x.\u0275fac=function(g){return new(g||x)(n.Y36(h.sK),n.Y36(e.JJ))},x.\u0275cmp=n.Xpm({type:x,selectors:[["app-pager"]],inputs:{totalResults:"totalResults",currentPage:"currentPage",lastPage:"lastPage",hidePager:"hidePager"},outputs:{onGoToPage:"onGoToPage"},features:[n._Bn([e.JJ])],decls:9,vars:9,consts:[[1,"tw-flex","tw-flex-wrap","tw-items-center","tw-justify-between","tw-mt-2"],[1,"tw-flex","tw-items-center","tw-justify-center","tw-w-full","tw-text-xs","tw-text-grey-700","tw-px-3","tw-py-2","sm:tw-w-auto"],["class","tw-hidden md:tw-inline",4,"ngIf"],["class","tw-hidden tw-text-base tw-mx-2 tw-opacity-50 md:tw-inline","aria-hidden","true",4,"ngIf"],["id","pager-total-results"],["class","tw-mt-2 tw-mx-auto sm:mt-0 sm:tw-mr-0",4,"ngIf"],[1,"tw-hidden","md:tw-inline"],["aria-hidden","true",1,"tw-hidden","tw-text-base","tw-mx-2","tw-opacity-50","md:tw-inline"],[1,"tw-mt-2","tw-mx-auto","sm:mt-0","sm:tw-mr-0"],[1,"tw-flex","tw-items-center","tw-justify-center","tw-bg-white","tw-rounded"],["id","pagerFirstPage",1,"tw-btn-link",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-angle-double-left"],[1,"sr-only"],[1,"tw-border-l-2","tw-border-grey-100"],["id","pagerPrevPage",1,"tw-btn-link",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-angle-left"],["id","pagerNextPage",1,"tw-btn-link",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-angle-right"],["id","pagerLastPage",1,"tw-btn-link",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-angle-double-right"]],template:function(g,N){1&g&&(n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,S,2,1,"span",2),n.YNc(3,y,2,0,"span",3),n.TgZ(4,"span",4),n._uU(5),n.ALo(6,"number"),n.ALo(7,"translate"),n.qZA()(),n.YNc(8,w,31,19,"nav",5),n.qZA()),2&g&&(n.xp6(2),n.Q6J("ngIf",!N.hidePager),n.xp6(1),n.Q6J("ngIf",!N.hidePager),n.xp6(2),n.AsE("",n.lcZ(6,5,N.totalResults)," ",n.lcZ(7,7,"Nav.ResultsFound"),""),n.xp6(3),n.Q6J("ngIf",!N.hidePager))},dependencies:[e.O5,e.JJ,h.X$],encapsulation:2}),x})()},5785:(nt,_e,m)=>{"use strict";m.d(_e,{U:()=>w});var n=m(6895),e=m(8185),h=m(5503),S=m(9383),y=m(4650);let w=(()=>{class f{}return f.\u0275fac=function(b){return new(b||f)},f.\u0275mod=y.oAB({type:f}),f.\u0275inj=y.cJS({imports:[n.ez,e.Bz,h.D,S.aw]}),f})()},2147:(nt,_e,m)=>{"use strict";m.d(_e,{l:()=>h});var n=m(6895),e=m(4650);let h=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275mod=e.oAB({type:S}),S.\u0275inj=e.cJS({imports:[n.ez]}),S})()},6001:(nt,_e,m)=>{"use strict";m.d(_e,{s:()=>V});var n=m(4650);class e{constructor(){this.key="",this.value=""}}class h extends e{constructor(){super()}}var S=m(572),y=m(5259),w=m(7185),f=m(9383),x=m(6219),b=m(8285),g=m(6895),N=m(4006),R=m(2808),k=m(8163),O=m(965),P=m(7608);const U=["addButton"];function W(Q,Y){if(1&Q){const fe=n.EpF();n.TgZ(0,"app-action-bar"),n.ynx(1,4),n.TgZ(2,"button",5,6),n.NdJ("click",function(){n.CHM(fe);const ee=n.oxw();return n.KtG(ee.openAddModal())}),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.BQk(),n.qZA()}2&Q&&(n.xp6(2),n.Q6J("id","addClaim"),n.xp6(2),n.hij(" ",n.lcZ(5,2,"Clients.Properties.AddProperty")," "))}function M(Q,Y){if(1&Q){const fe=n.EpF();n.TgZ(0,"app-custom-modal",7),n.NdJ("onCancel",function(){n.CHM(fe);const ee=n.oxw();return n.KtG(ee.closeAddAndReset())})("onSave",function(){n.CHM(fe);const ee=n.oxw();return n.KtG(ee.addProperty())}),n.TgZ(1,"app-form-row",8)(2,"input",9),n.NdJ("ngModelChange",function(ee){n.CHM(fe);const G=n.oxw();return n.KtG(G.addProp.key=ee)}),n.qZA()(),n.TgZ(3,"app-form-row",10)(4,"input",11),n.NdJ("ngModelChange",function(ee){n.CHM(fe);const G=n.oxw();return n.KtG(G.addProp.value=ee)}),n.qZA()()()}if(2&Q){const fe=n.oxw();n.Q6J("title","Clients.Properties.AddProperty")("modalId",fe.addModalId)("actions",fe.addModalActions)("addDisabled",fe.addProp.key.length<1||fe.addProp.value.length<1),n.xp6(1),n.Q6J("label","Common.Key")("id","propertyAddKey"),n.xp6(1),n.Q6J("ngModel",fe.addProp.key),n.xp6(1),n.Q6J("label","Common.Value")("id","propertyAddValue")("isLast",!0),n.xp6(1),n.Q6J("ngModel",fe.addProp.value)}}function B(Q,Y){if(1&Q){const fe=n.EpF();n.TgZ(0,"app-custom-modal",7),n.NdJ("onCancel",function(){n.CHM(fe);const ee=n.oxw();return n.KtG(ee.closeModalAndReset())})("onSave",function(){n.CHM(fe);const ee=n.oxw();return n.KtG(ee.saveEdit())}),n.TgZ(1,"app-form-row",8)(2,"input",12),n.NdJ("ngModelChange",function(ee){n.CHM(fe);const G=n.oxw();return n.KtG(G.editProp.key=ee)}),n.qZA()(),n.TgZ(3,"app-form-row",10)(4,"input",13),n.NdJ("ngModelChange",function(ee){n.CHM(fe);const G=n.oxw();return n.KtG(G.editProp.value=ee)}),n.qZA()()()}if(2&Q){const fe=n.oxw();n.Q6J("title","Clients.Properties.EditProperty")("modalId",fe.editModalId)("actions",fe.editModalActions)("addDisabled",fe.editProp.key.length<1||fe.editProp.value.length<1),n.xp6(1),n.Q6J("label","Common.Key")("id","propertyEditKey"),n.xp6(1),n.Q6J("ngModel",fe.editProp.key),n.xp6(1),n.Q6J("label","Common.Value")("id","propertyEditValue")("isLast",!0),n.xp6(1),n.Q6J("ngModel",fe.editProp.value)}}let V=(()=>{class Q{constructor(fe,J,ee,G){this.toastr=fe,this.translate=J,this.modalService=ee,this.dataTableService=G,this.propertiesChanged=new n.vpe,this.addProp=new e,this.editing=!1,this.editProp=new h,this.propertyDataTableActions=[S.Xz.Delete,S.Xz.Select],this.addModalActions=[y.n.Save],this.editModalActions=[y.n.Save],this._properties=[]}set properties(fe){this._properties=fe||[]}get properties(){return this._properties}set isReadOnly(fe){this._isReadOnly=fe||!1}get isReadOnly(){return this._isReadOnly}set modalId(fe){this._addModalId="add_"+fe,this._editModalId="edit_"+fe}get addModalId(){return this._addModalId}get editModalId(){return this._editModalId}ngOnInit(){this.dtsSubscription=this.dataTableService.deleteRowEvent.subscribe(fe=>{this.deleteProperty(fe)})}ngOnDestroy(){this.dtsSubscription?.unsubscribe()}openAddModal(){this.modalService.showById(this.addModalId,this.addButtonRef)}closeAddAndReset(){this.addProp=new e,this.modalService.hideById(this.addModalId)}editProperty(fe){this.editProp=JSON.parse(JSON.stringify(fe.data)),this.editProp.originalIndex=this.properties.indexOf(fe.data),this.editing=!0,this.modalService.showById(this.editModalId,fe.element)}closeModalAndReset(){this.editProp=new h,this.editing=!1,this.modalService.hideById(this.editModalId)}saveEdit(){const fe=this.properties.slice(),J=fe[this.editProp.originalIndex];J.key=this.editProp.key,J.value=this.editProp.value,this.updateProperties(fe),this.closeModalAndReset()}addProperty(){if(this.properties.find(J=>J.key===this.addProp.key))return void this.toastr.error(this.translate.instant("Clients.UnableToAddProperty"),this.translate.instant("Notifications.Error"));if(null==this.addProp.key||""===this.addProp.key.trim())return void this.toastr.error("Key is Invalid",this.translate.instant("Notifications.Error"));if(null==this.addProp.value||""===this.addProp.value.trim())return void this.toastr.error("Value is Invalid",this.translate.instant("Notifications.Error"));const fe=this.properties.slice();fe.push(this.addProp),this.updateProperties(fe),this.addProp=new e}deleteProperty(fe){const J=this.properties.slice();J.splice(fe,1),this.updateProperties(J)}updateProperties(fe){this.properties=fe,this.propertiesChanged.emit(this.properties)}}return Q.\u0275fac=function(fe){return new(fe||Q)(n.Y36(w._W),n.Y36(f.sK),n.Y36(x.Z),n.Y36(b.n))},Q.\u0275cmp=n.Xpm({type:Q,selectors:[["app-properties-editor"]],viewQuery:function(fe,J){if(1&fe&&n.Gf(U,5),2&fe){let ee;n.iGM(ee=n.CRH())&&(J.addButtonRef=ee.first)}},inputs:{properties:"properties",isReadOnly:"isReadOnly",modalId:"modalId"},outputs:{propertiesChanged:"propertiesChanged"},decls:6,vars:15,consts:[[4,"ngIf"],[3,"title","modalId","actions","addDisabled","onCancel","onSave",4,"ngIf"],[3,"isReadOnly","rows","norowslabel","actions","onSelect"],[3,"prop","title","headClasses","cellClasses"],["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"title","modalId","actions","addDisabled","onCancel","onSave"],[3,"label","id"],["id","propertyAddKey","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"],[3,"label","id","isLast"],["id","propertyAddValue","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"],["id","propertyEditKey","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"],["id","propertyEditValue","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"]],template:function(fe,J){1&fe&&(n.YNc(0,W,6,4,"app-action-bar",0),n.YNc(1,M,5,11,"app-custom-modal",1),n.TgZ(2,"app-data-table",2),n.NdJ("onSelect",function(G){return J.editProperty(G)}),n._UZ(3,"app-data-table-column",3)(4,"app-data-table-column",3),n.qZA(),n.YNc(5,B,5,11,"app-custom-modal",1)),2&fe&&(n.Q6J("ngIf",!J.isReadOnly),n.xp6(1),n.Q6J("ngIf",!J.isReadOnly),n.xp6(1),n.Q6J("isReadOnly",J.isReadOnly)("rows",J.properties)("norowslabel","Clients.Properties.None")("actions",J.propertyDataTableActions),n.xp6(1),n.Q6J("prop","key")("title","Common.Key")("headClasses","md:tw-w-1/3")("cellClasses","tw-max-w-0 tw-truncate"),n.xp6(1),n.Q6J("prop","value")("title","Common.Value")("headClasses","tw-hidden sm:tw-table-cell")("cellClasses","tw-hidden tw-max-w-0 tw-truncate sm:tw-table-cell"),n.xp6(1),n.Q6J("ngIf",!J.isReadOnly))},dependencies:[g.O5,N.Fj,N.JJ,N.On,S.Qj,R.E,k.K,O.R,P.L,f.X$],encapsulation:2}),Q})()},6493:(nt,_e,m)=>{"use strict";m.d(_e,{l:()=>g});var n=m(6895),e=m(5503),h=m(9383),S=m(4380),y=m(4022),w=m(8975),f=m(4006),x=m(9650),b=m(4650);let g=(()=>{class N{}return N.\u0275fac=function(k){return new(k||N)},N.\u0275mod=b.oAB({type:N}),N.\u0275inj=b.cJS({imports:[n.ez,f.u5,e.D,h.aw,S.t,y.p,w.d,x.I]}),N})()},2830:(nt,_e,m)=>{"use strict";m.d(_e,{f:()=>te});var n=m(9655),e=m(6502),h=m(4650),S=m(6895),y=m(9383);function w($,ue){if(1&$&&(h.TgZ(0,"div")(1,"p",3),h._uU(2),h.qZA()()),2&$){const me=h.oxw(3);h.xp6(2),h.Oqu(me.displayValue)}}function f($,ue){if(1&$&&(h.TgZ(0,"div"),h.YNc(1,w,3,1,"div",0),h.qZA()),2&$){const me=h.oxw(2),we=h.MAs(2);h.xp6(1),h.Q6J("ngIf",me.displayValue)("ngIfElse",we)}}function x($,ue){if(1&$&&(h.TgZ(0,"div",9),h._uU(1),h.TgZ(2,"small",10),h._uU(3),h.qZA()()),2&$){const me=h.oxw(),ye=me.$implicit;h.Q6J("id","multiMainText"+me.i),h.xp6(1),h.hij(" ",ye.MainText," "),h.xp6(2),h.Oqu(ye.HelpText)}}function b($,ue){if(1&$&&(h.TgZ(0,"li",7),h.YNc(1,x,4,3,"div",8),h.qZA()),2&$){const me=ue.$implicit;h.oxw(3);const we=h.MAs(2);h.xp6(1),h.Q6J("ngIf",me.MainText)("ngIfElse",we)}}function g($,ue){if(1&$&&(h.TgZ(0,"div")(1,"div",4)(2,"ul",5),h.YNc(3,b,2,2,"li",6),h.qZA()()()),2&$){const me=h.oxw(2);h.xp6(3),h.Q6J("ngForOf",me.filteredValues)}}function N($,ue){1&$&&h._UZ(0,"div")}function R($,ue){if(1&$&&(h.TgZ(0,"p",22),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&$){const me=h.oxw(5);h.xp6(1),h.AsE(" ",me.timeSpan.years," ",h.lcZ(2,2,me.displayTimeSpanUnit(me.timeSpan.years,"Year"))," ")}}function k($,ue){if(1&$&&(h.TgZ(0,"p",23),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&$){const me=h.oxw(5);h.xp6(1),h.AsE(" ",me.timeSpan.months," ",h.lcZ(2,2,me.displayTimeSpanUnit(me.timeSpan.months,"Month"))," ")}}function O($,ue){if(1&$&&(h.TgZ(0,"p",24),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&$){const me=h.oxw(5);h.xp6(1),h.AsE(" ",me.timeSpan.weeks," ",h.lcZ(2,2,me.displayTimeSpanUnit(me.timeSpan.weeks,"Week"))," ")}}function P($,ue){if(1&$&&(h.TgZ(0,"p",25),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&$){const me=h.oxw(5);h.xp6(1),h.AsE(" ",me.timeSpan.days," ",h.lcZ(2,2,me.displayTimeSpanUnit(me.timeSpan.days,"Day"))," ")}}function U($,ue){if(1&$&&(h.TgZ(0,"p",26),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&$){const me=h.oxw(5);h.xp6(1),h.AsE(" ",me.timeSpan.hours," ",h.lcZ(2,2,me.displayTimeSpanUnit(me.timeSpan.hours,"Hour"))," ")}}function W($,ue){if(1&$&&(h.TgZ(0,"p",27),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&$){const me=h.oxw(5);h.xp6(1),h.AsE(" ",me.timeSpan.minutes," ",h.lcZ(2,2,me.displayTimeSpanUnit(me.timeSpan.minutes,"Minute"))," ")}}function M($,ue){if(1&$&&(h.TgZ(0,"span",28),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&$){const me=h.oxw(5);h.xp6(1),h.AsE(" ",me.timeSpan.seconds," ",h.lcZ(2,2,me.displayTimeSpanUnit(me.timeSpan.seconds,"Second"))," ")}}function B($,ue){if(1&$&&(h.TgZ(0,"div")(1,"div",13),h.YNc(2,R,3,4,"p",14),h.YNc(3,k,3,4,"p",15),h.YNc(4,O,3,4,"p",16),h.YNc(5,P,3,4,"p",17),h.YNc(6,U,3,4,"p",18),h.YNc(7,W,3,4,"p",19),h.YNc(8,M,3,4,"span",20),h.qZA(),h.TgZ(9,"small",21),h._uU(10),h.qZA()()),2&$){const me=h.oxw(4);h.xp6(2),h.Q6J("ngIf",me.timeSpan.years>0),h.xp6(1),h.Q6J("ngIf",me.timeSpan.months>0),h.xp6(1),h.Q6J("ngIf",me.timeSpan.weeks>0),h.xp6(1),h.Q6J("ngIf",me.timeSpan.days>0),h.xp6(1),h.Q6J("ngIf",me.timeSpan.hours>0),h.xp6(1),h.Q6J("ngIf",me.timeSpan.minutes>0),h.xp6(1),h.Q6J("ngIf",me.timeSpan.seconds>0),h.xp6(2),h.Oqu(me.values[0].MainText)}}function V($,ue){1&$&&(h.TgZ(0,"div")(1,"p",29),h._uU(2),h.ALo(3,"translate"),h.qZA()()),2&$&&(h.xp6(2),h.AsE("",0," ",h.lcZ(3,2,"Clients.Tokens.Durations.Seconds"),""))}function Q($,ue){1&$&&(h.TgZ(0,"div")(1,"p",30),h._uU(2),h.ALo(3,"translate"),h.qZA()()),2&$&&(h.xp6(2),h.Oqu(h.lcZ(3,1,"Clients.Tokens.Durations.Unlimited")))}function Y($,ue){if(1&$&&(h.YNc(0,B,11,8,"div",2),h.YNc(1,V,4,4,"div",2),h.YNc(2,Q,4,3,"div",2)),2&$){const me=h.oxw(3);h.Q6J("ngIf","Unlimited"!=me.values[0].MainText&&0!==me.values[0].MainText&&"0"!==me.values[0].MainText),h.xp6(1),h.Q6J("ngIf",0===me.values[0].MainText||"0"===me.values[0].MainText),h.xp6(1),h.Q6J("ngIf","Unlimited"==me.values[0].MainText)}}function fe($,ue){if(1&$&&(h.TgZ(0,"div"),h.YNc(1,N,1,0,"div",11),h.YNc(2,Y,3,3,"ng-template",null,12,h.W1O),h.qZA()),2&$){const me=h.MAs(3),we=h.oxw(2),ye=h.MAs(2);h.xp6(1),h.Q6J("ngIf",null==we.values[0].MainText)("ngIfThen",ye)("ngIfElse",me)}}function J($,ue){if(1&$&&(h.TgZ(0,"div"),h.YNc(1,f,2,2,"div",2),h.YNc(2,g,4,1,"div",2),h.YNc(3,fe,4,3,"div",2),h.qZA()),2&$){const me=h.oxw();h.xp6(1),h.Q6J("ngIf",me.fieldType==me.ReadOnlyFieldType.Single||me.fieldType==me.ReadOnlyFieldType.CommaSeparated),h.xp6(1),h.Q6J("ngIf",me.fieldType==me.ReadOnlyFieldType.Multi),h.xp6(1),h.Q6J("ngIf",me.fieldType==me.ReadOnlyFieldType.LifetimePicker)}}function ee($,ue){1&$&&(h.TgZ(0,"div")(1,"p",32),h._uU(2),h.ALo(3,"translate"),h.qZA()()),2&$&&(h.xp6(2),h.hij(" ",h.lcZ(3,1,"Common.NoValue")," "))}function G($,ue){1&$&&(h.TgZ(0,"p",33),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&$&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"Common.NoValues")," "))}function E($,ue){if(1&$&&(h.YNc(0,ee,4,3,"div",0),h.YNc(1,G,3,3,"ng-template",null,31,h.W1O)),2&$){const me=h.MAs(2),we=h.oxw();h.Q6J("ngIf",we.fieldType==we.ReadOnlyFieldType.Single||we.fieldType==we.ReadOnlyFieldType.LifetimePicker)("ngIfElse",me)}}let te=(()=>{class ${constructor(){this.filteredValues=[]}ngOnChanges(me){this.initData()}ngOnInit(){this.initData()}initData(){!this.values||void 0===this.values||(this.filteredValues=this.values.filter(me=>null!=me),this.filteredValues.length<1)||(this.fieldType===n.O.Single?this.displayValue=this.filteredValues[0].MainText||null:this.fieldType===n.O.CommaSeparated?this.displayValue=this.filteredValues.map(me=>me.MainText).join(", ").trimEnd():this.fieldType===n.O.LifetimePicker&&null!==this.values[0].MainText&&"Unlimited"!==this.values[0].MainText&&(this.timeSpan=new e.i(+this.values[0].MainText)))}displayTimeSpanUnit(me,we){return"Clients.Tokens.Durations."+we+(me>1?"s":"")}get ReadOnlyFieldType(){return n.O}}return $.\u0275fac=function(me){return new(me||$)},$.\u0275cmp=h.Xpm({type:$,selectors:[["app-readonly"]],inputs:{fieldType:"fieldType",values:"values"},features:[h.TTD],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["valuesEmptyBlock",""],[4,"ngIf"],["id","singleCommaMainText"],[1,"tw-overflow-hidden","tw-overflow-y-auto","scrollbars","tw-max-h-readonly-field"],[1,"tw--mt-2"],["class","tw-pt-2",4,"ngFor","ngForOf"],[1,"tw-pt-2"],[3,"id",4,"ngIf","ngIfElse"],[3,"id"],["id","multiHelpText",1,"tw-block","tw-text-grey-700"],[4,"ngIf","ngIfThen","ngIfElse"],["lifetimeHasValueBlock",""],[1,"tw-flex","tw-flex-wrap"],["class","tw-mr-2","id","lifetimeYears",4,"ngIf"],["class","tw-mr-2","id","lifetimeMonths",4,"ngIf"],["class","tw-mr-2","id","lifetimeWeeks",4,"ngIf"],["class","tw-mr-2","id","lifetimeDays",4,"ngIf"],["class","tw-mr-2","id","lifetimeHours",4,"ngIf"],["class","tw-mr-2","id","lifetimeMinutes",4,"ngIf"],["class","tw-mr-2","id","lifetimeSeconds",4,"ngIf"],["id","lifetimeSeconds",1,"tw-block","tw-text-grey-700"],["id","lifetimeYears",1,"tw-mr-2"],["id","lifetimeMonths",1,"tw-mr-2"],["id","lifetimeWeeks",1,"tw-mr-2"],["id","lifetimeDays",1,"tw-mr-2"],["id","lifetimeHours",1,"tw-mr-2"],["id","lifetimeMinutes",1,"tw-mr-2"],["id","lifetimeSeconds",1,"tw-mr-2"],["id","zero"],["id","unlimited"],["multiBlock",""],["id","singleValuesUndefined",1,"tw-italic","tw-text-grey-400"],["id","multiValuesUndefined",1,"tw-italic","tw-text-grey-400"]],template:function(me,we){if(1&me&&(h.YNc(0,J,4,3,"div",0),h.YNc(1,E,3,2,"ng-template",null,1,h.W1O)),2&me){const ye=h.MAs(2);h.Q6J("ngIf",(null==we.filteredValues?null:we.filteredValues.length)>0)("ngIfElse",ye)}},dependencies:[S.sg,S.O5,y.X$]}),$})()},4091:(nt,_e,m)=>{"use strict";m.d(_e,{G:()=>S});var n=m(6895),e=m(9383),h=m(4650);let S=(()=>{class y{}return y.\u0275fac=function(f){return new(f||y)},y.\u0275mod=h.oAB({type:y}),y.\u0275inj=h.cJS({imports:[e.aw,n.ez]}),y})()},7770:(nt,_e,m)=>{"use strict";m.d(_e,{t:()=>w});var n=m(4006),e=m(6895),h=m(8185),S=m(9383),y=m(4650);let w=(()=>{class f{}return f.\u0275fac=function(b){return new(b||f)},f.\u0275mod=y.oAB({type:f}),f.\u0275inj=y.cJS({imports:[e.ez,h.Bz,S.aw,n.u5]}),f})()},1660:(nt,_e,m)=>{"use strict";m.d(_e,{P:()=>qe});var n=m(5861),e=m(4650),h=m(4006),S=m(2976),y=m(7579),w=m(8176),f=m(6055),x=m(572),b=m(5259),g=m(1837),N=m(6219),R=m(8285),k=m(6895),O=m(1696),P=m(7608),U=m(799),W=m(2808),M=m(965),B=m(4225),V=m(9383);const Q=["certificateReader"],Y=["addCertificateBtn"],fe=["showModalButton"],J=["secretPicker"],ee=["certificateReaderNonModal"],G=["addCertificateBtnNonModal"];function E(De,Ge){if(1&De&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&De){const ve=Ge.$implicit;e.Q6J("value",ve.value),e.xp6(1),e.Oqu(ve.value)}}function te(De,Ge){1&De&&(e.TgZ(0,"p",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&De&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Secret Picker.LastWarning")))}function $(De,Ge){if(1&De&&e._UZ(0,"app-date-time",42),2&De){const ve=e.oxw(2);e.Q6J("min",ve.minDate)}}function ue(De,Ge){if(1&De){const ve=e.EpF();e.TgZ(0,"form",11)(1,"div",12)(2,"div",13)(3,"app-form-row",14)(4,"div",15)(5,"select",16),e.YNc(6,E,2,2,"option",17),e.ALo(7,"keyvalue"),e.qZA()()(),e.TgZ(8,"app-form-row",14)(9,"div",18)(10,"div",19),e._UZ(11,"input",20),e.TgZ(12,"button",21),e.NdJ("click",function(){e.CHM(ve);const tt=e.oxw();return e.KtG(tt.generateRandom())}),e._UZ(13,"span",22),e.TgZ(14,"span",23),e._uU(15),e.ALo(16,"translate"),e.qZA()()(),e._UZ(17,"input",24),e.TgZ(18,"div",25)(19,"button",26,27),e.NdJ("click",function(){e.CHM(ve);const tt=e.oxw();return e.KtG(tt.openCertificateReaderModel())}),e.TgZ(21,"span"),e._uU(22),e.ALo(23,"translate"),e.qZA()()(),e.YNc(24,te,3,3,"p",28),e.qZA()(),e.TgZ(25,"app-form-row",29)(26,"div",18)(27,"div",30)(28,"div",31)(29,"app-form-toggle",32)(30,"input",33),e.NdJ("change",function(){e.CHM(ve);const tt=e.oxw();return e.KtG(tt.toggleExpirationDateInput())}),e.qZA()()()(),e.YNc(31,$,1,1,"app-date-time",34),e.qZA()(),e.TgZ(32,"app-form-row",35),e._UZ(33,"textarea",36),e.qZA()()(),e.TgZ(34,"div",37)(35,"button",38),e.NdJ("click",function(){e.CHM(ve);const tt=e.oxw();return e.KtG(tt.addSecret())}),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"button",39),e.NdJ("click",function(){e.CHM(ve);const tt=e.oxw();return e.KtG(tt.resetForm())}),e._uU(39),e.ALo(40,"translate"),e.qZA()()()}if(2&De){const ve=e.oxw();e.Q6J("formGroup",ve.secretForm),e.xp6(3),e.Q6J("id","SecretType")("label","Common.Type"),e.xp6(3),e.Q6J("ngForOf",e.lcZ(7,23,ve.secretTypes)),e.xp6(2),e.Q6J("id","SecretValue")("label","Common.Value"),e.xp6(2),e.Q6J("hidden","Shared Secret"!==ve.secretForm.controls.type.value),e.xp6(5),e.Oqu(e.lcZ(16,25,"Common.GenerateRandom")),e.xp6(2),e.Q6J("hidden","Shared Secret"===ve.secretForm.controls.type.value),e.xp6(2),e.Q6J("hidden","Shared Secret"===ve.secretForm.controls.type.value),e.xp6(3),e.Oqu(e.lcZ(23,27,"Common.ReadCertificate")),e.xp6(2),e.Q6J("ngIf",ve.displayWarnings),e.xp6(1),e.Q6J("id","SecretExpiry")("label","Common.ExpirationDate")("help","Common.Dates.UTCWarning"),e.xp6(4),e.Q6J("id","expirationDateEnabled"),e.xp6(2),e.Q6J("ngIf",ve.expirationDateEnabled),e.xp6(1),e.Q6J("id","SecretDescription")("label","Common.Description")("isLast",!0),e.xp6(3),e.Q6J("disabled",!ve.secretForm.valid),e.xp6(1),e.Oqu(e.lcZ(37,29,"Common.Add")),e.xp6(3),e.Oqu(e.lcZ(40,31,"Common.Clear"))}}function me(De,Ge){1&De&&e._UZ(0,"app-data-table-column",43),2&De&&e.Q6J("prop","created")("date",!0)("title","Common.Created")("headClasses","tw-hidden tw-w-40 md:tw-table-cell")("cellClasses","tw-hidden md:tw-table-cell")}function we(De,Ge){if(1&De){const ve=e.EpF();e.TgZ(0,"div",44,45)(2,"div",46)(3,"app-cert-reader",47,48),e.NdJ("dataExists",function(tt){e.CHM(ve);const _t=e.oxw();return e.KtG(_t.certificateDataLoaded(tt))}),e.ALo(5,"translate"),e.ALo(6,"translate"),e.ALo(7,"translate"),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"div",37)(10,"button",49,50),e.NdJ("click",function(){e.CHM(ve);const tt=e.oxw();return e.KtG(tt.hideCertReaderNonModal(!0))}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"button",39),e.NdJ("click",function(){e.CHM(ve);const tt=e.oxw();return e.KtG(tt.hideCertReaderNonModal(!1))}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()}2&De&&(e.xp6(3),e.Q6J("uploadCert",e.lcZ(5,6,"Secret Picker.UploadCert"))("uploadCertHelp",e.lcZ(6,8,"Secret Picker.UploadCertHelp"))("certMetaData",e.lcZ(7,10,"Secret Picker.MetaData"))("certMetaDataHelp",e.lcZ(8,12,"Secret Picker.MetaDataHelp")),e.xp6(9),e.Oqu(e.lcZ(13,14,"Common.Use")),e.xp6(3),e.Oqu(e.lcZ(16,16,"Common.Cancel")))}function ye(De,Ge){if(1&De){const ve=e.EpF();e.TgZ(0,"app-custom-modal",51),e.NdJ("onSave",function(){e.CHM(ve);const tt=e.oxw();return e.KtG(tt.closeCertificateReaderModelAndReadCertificate())})("onCancel",function(){e.CHM(ve);const tt=e.oxw();return e.KtG(tt.closeCertificateReaderModel())}),e.TgZ(1,"app-cert-reader",52,48),e.NdJ("dataExists",function(tt){e.CHM(ve);const _t=e.oxw();return e.KtG(_t.certificateDataLoaded(tt))}),e.ALo(3,"translate"),e.ALo(4,"translate"),e.ALo(5,"translate"),e.ALo(6,"translate"),e.qZA()()}if(2&De){const ve=e.oxw();e.Q6J("modalId",ve.certModalId)("title","Secret Picker.ReadCertificate")("actions",ve.modalActions),e.xp6(1),e.Q6J("uploadCert",e.lcZ(3,7,"Secret Picker.UploadCert"))("uploadCertHelp",e.lcZ(4,9,"Secret Picker.UploadCertHelp"))("certMetaData",e.lcZ(5,11,"Secret Picker.MetaData"))("certMetaDataHelp",e.lcZ(6,13,"Secret Picker.MetaDataHelp"))}}let qe=(()=>{class De{constructor(ve,c,tt){this.fb=ve,this.modalService=c,this.dataTableService=tt,this._clientSecrets=[],this.nonModelCertPicker=!1,this.showCreatedColumn=!0,this.secretTypes=new S.NA,this.minDate=g.ou.now(),this.secretsAddStream=new y.x,this.secretsRemoveStream=new y.x,this.descFocus=!1,this.displayWarnings=!0,this.dataTableActions=[x.Xz.Delete],this.modalActions=[b.n.Delete,b.n.Save],this.certModalId="CertificatePickerModal",this.expirationDateEnabled=!1,this.filepickerDisplayed=new e.vpe}set clientSecrets(ve){this._clientSecrets=ve||[]}get clientSecrets(){return this._clientSecrets}set isReadOnly(ve){this._isReadOnly=ve||!1}get isReadOnly(){return this._isReadOnly}ngOnDestroy(){this.dtsSubscription.unsubscribe()}keydown(ve){"Enter"===ve.key&&this.secretForm.valid&&!this.descFocus&&this.addSecret()}ngOnInit(){const ve=g.ou.now().toISO();this.secretForm=this.fb.group({description:["",h.kI.maxLength(1e3)],value:["",h.kI.required],expiration:[{value:ve,disabled:!0}],type:["Shared Secret"],enabled:[]}),this.dtsSubscription=this.dataTableService.deleteRowEvent.subscribe(c=>{this.deleteSecret(c)})}selectedDate(ve){this.secretForm.controls.expiration.setValue(ve)}toggleExpirationDateInput(){this.expirationDateEnabled=!this.expirationDateEnabled,this.updateExpiration()}generateRandom(){this.secretForm.controls.value.setValue((0,w.qs)())}dateSelected(ve){this.secretForm.controls.expiration.setValue(ve)}addSecret(){const ve=this.secretForm.value;ve.expiration=this.expirationDateEnabled?g.ou.fromISO(ve.expiration).toString():null,this.secretsAddStream.next(ve),this.secretForm.reset(),this.resetForm()}updateExpiration(){const ve=this.secretForm.controls.expiration;this.expirationDateEnabled?(ve.addValidators(h.kI.required),ve.enable()):(ve.removeValidators(h.kI.required),ve.disable()),ve.reset()}deleteSecret(ve){this.secretsRemoveStream.next(this.clientSecrets[ve])}resetForm(){this.secretForm.setValue({description:"",value:"",expiration:"",type:"Shared Secret",enabled:""}),this.expirationDateEnabled=!1,this.updateExpiration()}openCertificateReaderModel(){this.nonModelCertPicker?(this.certificateReaderNonModal.nativeElement.hidden=!1,this.secretPicker.nativeElement.hidden=!0):this.modalService.showById(this.certModalId,this.showModalButton),this.filepickerDisplayed.emit(!0)}resetState(){this.nonModelCertPicker?(this.certificateReaderNonModal.nativeElement.hidden=!0,this.secretPicker.nativeElement.hidden=!1):this.modalService.hideById(this.certModalId),this.filepickerDisplayed.emit(!1)}closeCertificateReaderModel(){this.modalService.hideById(this.certModalId),this.filepickerDisplayed.emit(!1)}closeCertificateReaderModelAndReadCertificate(){var ve=this;return(0,n.Z)(function*(){ve.modalService.hideById(ve.certModalId),ve.filepickerDisplayed.emit(!1),yield ve.ReadCertificateModel()})()}ReadCertificateModel(){var ve=this;return(0,n.Z)(function*(){const c=yield ve.certReaderComponent.getCertificateModel();let tt="";switch(ve.secretForm.controls.type.value){case"X509 Certificate Base64":tt=c.base64Cert;break;case"X509 Name":tt=c.subject;break;case"X509 Thumbprint":tt=c.thumbprint}ve.secretForm.controls.value.setValue(tt)})()}certificateDataLoaded(ve){this.addCertificateButton&&(this.addCertificateButton.nativeElement.disabled=!ve),this.addCertificateBtnNonModal&&(this.addCertificateBtnNonModal.nativeElement.disabled=!ve)}hideCertReaderNonModal(ve){var c=this;return(0,n.Z)(function*(){c.certificateReaderNonModal.nativeElement.hidden=!0,c.secretPicker.nativeElement.hidden=!1,ve&&(yield c.ReadCertificateModel()),c.filepickerDisplayed.emit(!1)})()}}return De.\u0275fac=function(ve){return new(ve||De)(e.Y36(h.QS),e.Y36(N.Z),e.Y36(R.n))},De.\u0275cmp=e.Xpm({type:De,selectors:[["app-secret-picker"]],viewQuery:function(ve,c){if(1&ve&&(e.Gf(Q,5),e.Gf(Y,5),e.Gf(fe,5),e.Gf(J,5),e.Gf(ee,5),e.Gf(G,5)),2&ve){let tt;e.iGM(tt=e.CRH())&&(c.certReaderComponent=tt.first),e.iGM(tt=e.CRH())&&(c.addCertificateButton=tt.first),e.iGM(tt=e.CRH())&&(c.showModalButton=tt.first),e.iGM(tt=e.CRH())&&(c.secretPicker=tt.first),e.iGM(tt=e.CRH())&&(c.certificateReaderNonModal=tt.first),e.iGM(tt=e.CRH())&&(c.addCertificateBtnNonModal=tt.first)}},hostBindings:function(ve,c){1&ve&&e.NdJ("keydown",function(_t){return c.keydown(_t)},!1,e.evT)},inputs:{clientSecrets:"clientSecrets",isReadOnly:"isReadOnly",nonModelCertPicker:"nonModelCertPicker",showCreatedColumn:"showCreatedColumn"},outputs:{filepickerDisplayed:"filepickerDisplayed"},decls:11,vars:25,consts:[["id","secretPicker"],["secretPicker",""],["id","secretForm",3,"formGroup",4,"ngIf"],[3,"isReadOnly","rows","norowslabel","actions"],[3,"prop","title","headClasses"],[3,"title","isPlaceholder","placeholder","headClasses","cellClasses"],[3,"prop","title","headClasses","cellClasses"],["id","createdColumn",3,"prop","date","title","headClasses","cellClasses",4,"ngIf"],[3,"prop","date","title","headClasses","cellClasses"],["hidden","",4,"ngIf"],[3,"modalId","title","actions","onSave","onCancel",4,"ngIf"],["id","secretForm",3,"formGroup"],[1,"tw-flex-grid","tw-mb-6","md:tw-flex-nowrap"],[1,"tw-flex-grid-col"],[3,"id","label"],[1,"tw-form-select"],["id","SecretType","name","type","formControlName","type",1,"tw-form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"tw-w-full","lg:tw-max-w-2xl"],[1,"tw-flex",3,"hidden"],["type","text","id","SecretValue","formControlName","value","name","SecretValue","autocomplete","off",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0"],["id","generateSecret",1,"tw-btn","tw-rounded-l-none",3,"click"],["aria-hidden","true",1,"far","fa-random"],[1,"sr-only"],["type","text","id","SecretValue","formControlName","value","name","SecretValue","autocomplete","off",1,"tw-form-control",3,"hidden"],[1,"tw-form-text"],["id","readCertificate",1,"tw-underline","hover:tw-no-underline",3,"hidden","click"],["showCertModalButton",""],["class","tw-form-text-danger",4,"ngIf"],[3,"id","label","help"],[1,"tw-form-row","tw-flex","tw-items-center"],[1,"tw-shrink-0","tw-block"],[3,"id"],["formControlName","enabled","type","checkbox","id","expirationDateEnabled","name","expirationDateEnabled",1,"tw-form-switch__input",3,"change"],["id","expiration","formControlName","expiration",3,"min",4,"ngIf"],[3,"id","label","isLast"],["id","SecretDescription","name","SecretDescription","formControlName","description",1,"tw-form-control","md:tw-h-56"],[1,"tw-flex","tw-mb-6"],["id","addSecretBtn",1,"tw-btn-success","tw-mr-4",3,"disabled","click"],[1,"tw-btn",3,"click"],[3,"value"],[1,"tw-form-text-danger"],["id","expiration","formControlName","expiration",3,"min"],["id","createdColumn",3,"prop","date","title","headClasses","cellClasses"],["hidden",""],["certificateReaderNonModal",""],[1,"tw-mb-6","md:tw-flex-nowrap"],["id","certificateReader",3,"uploadCert","uploadCertHelp","certMetaData","certMetaDataHelp","dataExists"],["certificateReader",""],["id","addCertificateBtn","disabled","",1,"tw-btn-success","tw-mr-4",3,"click"],["addCertificateBtnNonModal",""],[3,"modalId","title","actions","onSave","onCancel"],["id","",3,"uploadCert","uploadCertHelp","certMetaData","certMetaDataHelp","dataExists"]],template:function(ve,c){1&ve&&(e.TgZ(0,"div",0,1),e.YNc(2,ue,41,33,"form",2),e.TgZ(3,"app-data-table",3),e._UZ(4,"app-data-table-column",4)(5,"app-data-table-column",5)(6,"app-data-table-column",6),e.YNc(7,me,1,5,"app-data-table-column",7),e._UZ(8,"app-data-table-column",8),e.qZA()(),e.YNc(9,we,17,18,"div",9),e.YNc(10,ye,7,15,"app-custom-modal",10)),2&ve&&(e.xp6(2),e.Q6J("ngIf",!c.isReadOnly),e.xp6(1),e.Q6J("isReadOnly",c.isReadOnly)("rows",c.clientSecrets)("norowslabel","Clients.NoSecrets")("actions",c.dataTableActions),e.xp6(1),e.Q6J("prop","type")("title","Common.Type")("headClasses","sm:tw-w-1/3 md:tw-w-1/4"),e.xp6(1),e.Q6J("title","Common.Value")("isPlaceholder",!0)("placeholder","Secret Picker.HiddenValue")("headClasses","tw-hidden tw-w-40 xl:tw-table-cell")("cellClasses","tw-hidden xl:tw-table-cell"),e.xp6(1),e.Q6J("prop","description")("title","Common.Description")("headClasses","tw-hidden sm:tw-table-cell")("cellClasses","tw-hidden tw-max-w-0 tw-truncate sm:tw-table-cell"),e.xp6(1),e.Q6J("ngIf",c.showCreatedColumn),e.xp6(1),e.Q6J("prop","expiration")("date",!0)("title","Common.Expiration")("headClasses","tw-hidden tw-w-40 md:tw-table-cell")("cellClasses","tw-hidden md:tw-table-cell"),e.xp6(1),e.Q6J("ngIf",c.nonModelCertPicker),e.xp6(1),e.Q6J("ngIf",!1===c.nonModelCertPicker))},dependencies:[k.sg,k.O5,h._Y,h.YN,h.Kr,h.Fj,h.Wl,h.EJ,h.JJ,h.JL,h.sg,h.u,O.c,P.L,U.O,x.Qj,W.E,M.R,B.j,k.Nd,V.X$],encapsulation:2,data:{animation:[(0,f.Ic)()]}}),De})()},8761:(nt,_e,m)=>{"use strict";m.d(_e,{W:()=>k});var n=m(4006),e=m(6895),h=m(5503),S=m(9383),y=m(388),w=m(2699),f=m(9650),x=m(4380),b=m(8975),g=m(5898),N=m(8285),R=m(4650);let k=(()=>{class O{}return O.\u0275fac=function(U){return new(U||O)},O.\u0275mod=R.oAB({type:O}),O.\u0275inj=R.cJS({providers:[N.n],imports:[e.ez,n.UX,h.D,S.aw,n.u5,y.zk,w.Y,f.I,x.t,b.d,g.T]}),O})()},9046:(nt,_e,m)=>{"use strict";m.d(_e,{bk:()=>b});var n=m(7579),e=m(8372),h=m(1884),S=m(9300),y=m(4004);class b{constructor(N,R,k){this.toastr=N,this.translate=R,this.canSearchEmptyString=k,this.searchTerm="",this.searchTermStream=new n.x,this.enterKeyStream=new n.x,this.searchSource=this.searchTermStream.pipe((0,e.b)(600),(0,h.x)(),(0,S.h)(O=>this.filterSearchTerm(O)),(0,y.U)(O=>this.mapSearchTerm(O))),this.enterKeySource=this.enterKeyStream.pipe((0,e.b)(600),(0,S.h)(()=>this.filterSearchTerm(this.searchTerm)),(0,y.U)(()=>this.mapSearchTerm(this.searchTerm)))}filterSearchTerm(N){return this.canSearchEmptyString?N.length<50&&1!==N.length:!(N.length<2||N.length>50)&&""!==N.trim()}search(N){"Enter"===N.key?1===this.searchTerm.length?this.toastr.warning(this.translate.instant("Users.MinimumSearchLength"),this.translate.instant("Notifications.Sorry")):this.enterKeyStream.next():1!==this.searchTerm.length&&this.searchTermStream.next(this.searchTerm)}}},1436:(nt,_e,m)=>{"use strict";m.d(_e,{W:()=>f});var n=m(6895),e=m(4006),h=m(5503),S=m(9650),y=m(9383),w=m(4650);let f=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=w.oAB({type:x}),x.\u0275inj=w.cJS({imports:[n.ez,e.u5,e.UX,S.I,h.D,y.aw]}),x})()},5925:(nt,_e,m)=>{"use strict";m.d(_e,{w:()=>w});var n=m(4650),e=m(6895),h=m(9383);function S(f,x){1&f&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&f&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"Common.LoadingPleaseWait")))}function y(f,x){if(1&f&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&f){const b=n.oxw();n.xp6(1),n.Oqu(b.text)}}let w=(()=>{class f{constructor(){this.text=""}}return f.\u0275fac=function(b){return new(b||f)},f.\u0275cmp=n.Xpm({type:f,selectors:[["app-simple-loader"]],inputs:{text:"text"},decls:4,vars:2,consts:[[1,"tw-flex","tw-items-center","tw-justify-center","tw-text-sm","tw-min-h-48"],[1,"fad","fa-spinner-third","fa-spin","tw-text-secondary-500","tw-mr-2"],[4,"ngIf"]],template:function(b,g){1&b&&(n.TgZ(0,"div",0),n._UZ(1,"span",1),n.YNc(2,S,3,3,"span",2),n.YNc(3,y,2,1,"span",2),n.qZA()),2&b&&(n.xp6(2),n.Q6J("ngIf",""==g.text),n.xp6(1),n.Q6J("ngIf",""!=g.text))},dependencies:[e.O5,h.X$],encapsulation:2}),f})()},5971:(nt,_e,m)=>{"use strict";m.d(_e,{s:()=>w});var n=m(4006),e=m(6895),h=m(8185),S=m(9383),y=m(4650);let w=(()=>{class f{}return f.\u0275fac=function(b){return new(b||f)},f.\u0275mod=y.oAB({type:f}),f.\u0275inj=y.cJS({imports:[e.ez,h.Bz,S.aw,n.u5]}),f})()},2294:(nt,_e,m)=>{"use strict";m.d(_e,{G:()=>U});var n=m(4650),e=m(6895),h=m(8185),S=m(9383),y=m(2979);function w(W,M){if(1&W&&(n.ynx(0),n.TgZ(1,"li",7)(2,"span",17),n._uU(3,"/"),n.qZA(),n.TgZ(4,"a",8),n._uU(5),n.qZA()(),n.BQk()),2&W){const B=M.$implicit;n.xp6(4),n.Q6J("routerLink",B.link),n.xp6(1),n.hij(" ",B.title," ")}}function f(W,M){1&W&&(n.TgZ(0,"span",18),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&W&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Common.ReadOnly")," "))}function x(W,M){1&W&&(n.TgZ(0,"span",19),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&W&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Common.Reserved")," "))}function b(W,M){1&W&&(n.TgZ(0,"span",20),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&W&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"Common.UserTOTPEnabled")," "))}function g(W,M){1&W&&(n.TgZ(0,"div",21),n.Hsn(1,1),n.qZA())}function N(W,M){1&W&&(n.ynx(0),n.TgZ(1,"div",22),n.Hsn(2,2),n.qZA(),n.BQk())}const R=[[["","badge",""]],[["","button",""]],[["","tabs",""]]],k=function(W){return[W]},O=["[badge]","[button]","[tabs]"];let U=(()=>{class W{constructor(){this.hasButton=!1,this.hasTabs=!1,this.isReadOnly=!1,this.isReserved=!1,this.totpEnabled=!1}}return W.\u0275fac=function(B){return new(B||W)},W.\u0275cmp=n.Xpm({type:W,selectors:[["app-title-bar"]],inputs:{title:"title",crumbs:"crumbs",hasButton:"hasButton",hasTabs:"hasTabs",isReadOnly:"isReadOnly",isReserved:"isReserved",totpEnabled:"totpEnabled"},ngContentSelectors:O,decls:23,vars:18,consts:[[1,"tw-bg-grey-200","tw-border-b","tw-border-grey-300","tw--mt-5","tw--mx-4","tw-mb-6"],[1,"tw-px-4","tw-py-5"],[1,"tw-container","tw-mx-auto","tw-text-left"],[1,"tw-flex","tw-items-end","tw-justify-between"],[1,"tw-content","tw-min-w-0"],[1,"tw-mb-2"],["id","pageCrumbs",1,"tw-flex","tw-items-center","tw-text-xs","tw-leading-none","tw-text-grey-700"],[1,"tw-flex","tw-items-center"],[1,"tw-inline-block","tw-text-grey-700","tw-font-normal","hover:tw-text-body",3,"routerLink"],[4,"ngFor","ngForOf"],[1,"md:tw-flex","md:tw-items-center"],["id","pageTitle",1,"tw-text-xl","tw-font-semibold","tw-mb-2","tw-truncate","md:tw-mb-0","md:tw-mr-3","md:tw-text-2xl","last:tw-mb-0"],["id","readOnlyBadge","class","tw-pill tw-mr-2",4,"ngIf"],["id","reservedBadge","class","tw-pill tw-mr-2",4,"ngIf"],["class","tw-pill tw-mr-2",4,"ngIf"],["class","tw-shrink-0 tw-ml-4",4,"ngIf"],[4,"ngIf"],["aria-hidden","true",1,"tw-mx-2","tw-opacity-75"],["id","readOnlyBadge",1,"tw-pill","tw-mr-2"],["id","reservedBadge",1,"tw-pill","tw-mr-2"],[1,"tw-pill","tw-mr-2"],[1,"tw-shrink-0","tw-ml-4"],[1,"tw-container","tw-mx-auto","tw--mt-2"]],template:function(B,V){1&B&&(n.F$t(R),n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"nav",5),n.ALo(6,"translate"),n.TgZ(7,"ol",6)(8,"li",7)(9,"a",8),n.ALo(10,"localize"),n._uU(11),n.ALo(12,"translate"),n.qZA()(),n.YNc(13,w,6,2,"ng-container",9),n.qZA()(),n.TgZ(14,"div",10)(15,"h1",11),n._uU(16),n.qZA(),n.Hsn(17),n.YNc(18,f,3,3,"span",12),n.YNc(19,x,3,3,"span",13),n.YNc(20,b,3,3,"span",14),n.qZA()(),n.YNc(21,g,2,0,"div",15),n.qZA()()(),n.YNc(22,N,3,0,"ng-container",16),n.qZA()),2&B&&(n.xp6(5),n.uIk("aria-label",n.lcZ(6,10,"Nav.Breadcrumbs")),n.xp6(4),n.Q6J("routerLink",n.VKq(16,k,n.lcZ(10,12,"/home"))),n.xp6(2),n.hij(" ",n.lcZ(12,14,"Nav.Home")," "),n.xp6(2),n.Q6J("ngForOf",V.crumbs),n.xp6(3),n.Oqu(V.title),n.xp6(2),n.Q6J("ngIf",V.isReadOnly&&!V.isReserved),n.xp6(1),n.Q6J("ngIf",V.isReserved),n.xp6(1),n.Q6J("ngIf",V.totpEnabled),n.xp6(1),n.Q6J("ngIf",V.hasButton),n.xp6(1),n.Q6J("ngIf",V.hasTabs))},dependencies:[e.sg,e.O5,h.yS,S.X$,y.lO],encapsulation:2}),W})()},5084:(nt,_e,m)=>{"use strict";m.d(_e,{y:()=>f});var n=m(6895),e=m(8185),h=m(5503),S=m(2979),y=m(9383),w=m(4650);let f=(()=>{class x{}return x.\u0275fac=function(g){return new(g||x)},x.\u0275mod=w.oAB({type:x}),x.\u0275inj=w.cJS({imports:[n.ez,e.Bz,h.D,y.aw,S.fQ]}),x})()},9141:(nt,_e,m)=>{"use strict";m.d(_e,{G:()=>S});var n=m(4650),e=m(5221),h=m(5712);let S=(()=>{class y{constructor(){this.wizardCancel=new n.vpe,this.finish=new n.vpe,this.hide=new n.vpe,this.titleId=h.G.TileId,this.index=0,this.progressPercent=0}ngOnInit(){this.setupWizard(),this.createComponentAtCurrentIndex(),this.displayComponentAtCurrentIndex()}setupWizard(){this.wizardSteps=this.wizardProvider.getWizard(this.wizardName),this.wizardTitles=this.wizardProvider.getWizardTitle(this.wizardName)}keydown(f){"Enter"===f.key&&this.canNext()&&this.nextTab()}hideWizard(){this.hide.emit()}cancelWizard(){this.wizardCancel.emit()}finishWizard(){this.finish.emit()}displayComponentAtCurrentIndex(){this.wizardHost.viewContainerRef.detach();const f=this.components.get(this.index);this.wizardHost.viewContainerRef.insert(f.hostView),this.components.get(this.index).instance.hosted(),this.updateProgress()}createComponentAtCurrentIndex(){const x=this.wizardHost.viewContainerRef.createComponent(this.wizardSteps[this.index].component);this.components.set(this.index,x),x.instance.data=this.wizardSteps[this.index].data,this.wizardHost.viewContainerRef.detach()}canNext(){return this.components.get(this.index).instance.canNext()}updateProgress(){this.progressPercent=(this.index+1)/(this.wizardSteps.length+1)*100}ngOnDestroy(){this.clearComponents()}clearComponents(){this.components.forEach(f=>{f?.destroy()}),this.components.clear()}}return y.\u0275fac=function(f){return new(f||y)},y.\u0275dir=n.lG2({type:y,viewQuery:function(f,x){if(1&f&&n.Gf(e.S,7),2&f){let b;n.iGM(b=n.CRH())&&(x.wizardHost=b.first)}},hostBindings:function(f,x){1&f&&n.NdJ("keydown",function(g){return x.keydown(g)},!1,n.evT)},inputs:{wizardName:"wizardName"},outputs:{wizardCancel:"wizardCancel",finish:"finish",hide:"hide"}}),y})()},5221:(nt,_e,m)=>{"use strict";m.d(_e,{S:()=>e});var n=m(4650);let e=(()=>{class h{constructor(y){this.viewContainerRef=y}}return h.\u0275fac=function(y){return new(y||h)(n.Y36(n.s_b))},h.\u0275dir=n.lG2({type:h,selectors:[["","appStepHost",""]]}),h})()},6679:(nt,_e,m)=>{"use strict";m.d(_e,{R6:()=>J,V7:()=>G});var n=m(9506),e=m(4006),h=m(3334),S=m(7579),y=m(5669),w=m(4650),f=m(7185),x=m(9383),b=m(6895);function g(E,te){if(1&E&&(w.TgZ(0,"li",10)(1,"label",22),w._UZ(2,"input",23),w.TgZ(3,"span"),w._uU(4),w.ALo(5,"translate"),w.qZA()()()),2&E){const $=w.oxw();w.xp6(2),w.Q6J("value",$.CertificateAction.DoNotSet),w.xp6(2),w.Oqu(w.lcZ(5,2,"Clients.Import.Wizard.Certificates.DoNotSet"))}}function N(E,te){if(1&E&&(w.TgZ(0,"li",10)(1,"label",24),w._UZ(2,"input",25),w.TgZ(3,"span"),w._uU(4),w.ALo(5,"translate"),w.qZA()()()),2&E){const $=w.oxw();w.xp6(2),w.Q6J("value",$.CertificateAction.UseExisting),w.xp6(2),w.Oqu(w.lcZ(5,2,"Clients.Import.Wizard.Certificates.UseExistingCertificates"))}}function R(E,te){if(1&E){const $=w.EpF();w.TgZ(0,"tr")(1,"td",39),w._uU(2),w.qZA(),w.TgZ(3,"td")(4,"button",40),w.NdJ("click",function(){const we=w.CHM($).$implicit,ye=w.oxw(5);return w.KtG(ye.deleteCert(we))}),w._uU(5),w._UZ(6,"span",41),w.TgZ(7,"span",37),w._uU(8),w.ALo(9,"translate"),w.qZA()()()()}if(2&E){const $=te.$implicit,ue=w.oxw(5);w.xp6(2),w.hij(" ",null==$?null:$.subject," "),w.xp6(3),w.hij(" ",ue.deleteDisabled," "),w.xp6(3),w.Oqu(w.lcZ(9,3,"Clients.Saml.DeleteCert"))}}function k(E,te){if(1&E&&(w.ynx(0),w.YNc(1,R,10,5,"tr",38),w.BQk()),2&E){const $=w.oxw(4);w.xp6(1),w.Q6J("ngForOf",$.data.certificates.SigningCertificates)}}function O(E,te){if(1&E){const $=w.EpF();w.ynx(0),w.TgZ(1,"tr")(2,"td",39),w._uU(3),w.qZA(),w.TgZ(4,"td")(5,"button",40),w.NdJ("click",function(){w.CHM($);const me=w.oxw(4);return w.KtG(me.deleteCert(null))}),w._uU(6),w._UZ(7,"span",41),w.TgZ(8,"span",37),w._uU(9),w.ALo(10,"translate"),w.qZA()()()(),w.BQk()}if(2&E){const $=w.oxw(4);w.xp6(3),w.hij(" ",$.data.certificates.EncryptionCertificate.subject," "),w.xp6(3),w.hij(" ",$.deleteDisabled," "),w.xp6(3),w.Oqu(w.lcZ(10,3,"Clients.Saml.DeleteCert"))}}function P(E,te){if(1&E&&(w.TgZ(0,"table",34)(1,"thead")(2,"tr")(3,"th",35),w._uU(4),w.ALo(5,"translate"),w.qZA(),w.TgZ(6,"th",36)(7,"span",37),w._uU(8),w.ALo(9,"translate"),w.qZA()()()(),w.TgZ(10,"tbody"),w.YNc(11,k,2,1,"ng-container",13),w.YNc(12,O,11,5,"ng-container",13),w.qZA()()),2&E){const $=w.oxw(3);w.xp6(4),w.Oqu(w.lcZ(5,4,"Common.Subject")),w.xp6(4),w.Oqu(w.lcZ(9,6,"Common.Actions")),w.xp6(3),w.Q6J("ngIf",$.activeTab===$.ActiveTab.Request),w.xp6(1),w.Q6J("ngIf",$.activeTab===$.ActiveTab.Response)}}function U(E,te){if(1&E&&(w.TgZ(0,"div"),w.YNc(1,P,13,8,"table",33),w.qZA()),2&E){const $=w.oxw(2);w.xp6(1),w.Q6J("ngIf",$.activeTab==$.ActiveTab.Request?$.data.certificates.SigningCertificates.length>0:$.data.certificates.EncryptionCertificate)}}function W(E,te){1&E&&(w.TgZ(0,"div",42)(1,"div"),w._uU(2),w.ALo(3,"translate"),w.qZA()()),2&E&&(w.xp6(2),w.Oqu(w.lcZ(3,1,"Clients.NoCertificates")))}function M(E,te){if(1&E){const $=w.EpF();w.TgZ(0,"button",43),w.NdJ("click",function(){w.CHM($);const me=w.oxw(3);return w.KtG(me.addCert())}),w._uU(1),w.ALo(2,"translate"),w.qZA()}2&E&&(w.xp6(1),w.Oqu(w.lcZ(2,1,"Clients.Saml.AddCert")))}function B(E,te){if(1&E){const $=w.EpF();w.TgZ(0,"button",43),w.NdJ("click",function(){w.CHM($);const me=w.oxw(3);return w.KtG(me.addCert())}),w._uU(1),w.ALo(2,"translate"),w.qZA()}2&E&&(w.xp6(1),w.Oqu(w.lcZ(2,1,"Clients.Saml.ReplaceCertificate")))}function V(E,te){if(1&E&&(w.ynx(0),w.YNc(1,M,3,3,"button",32),w.YNc(2,B,3,3,"button",32),w.BQk()),2&E){const $=w.oxw(2);w.xp6(1),w.Q6J("ngIf",!$.data.certificates.EncryptionCertificate||""===$.data.certificates.EncryptionCertificate),w.xp6(1),w.Q6J("ngIf",$.data.certificates.EncryptionCertificate&&""!==$.data.certificates.EncryptionCertificate)}}function Q(E,te){if(1&E){const $=w.EpF();w.TgZ(0,"button",43),w.NdJ("click",function(){w.CHM($);const me=w.oxw(2);return w.KtG(me.addCert())}),w._uU(1),w.ALo(2,"translate"),w.qZA()}2&E&&(w.xp6(1),w.Oqu(w.lcZ(2,1,"Clients.Saml.AddCert")))}function Y(E,te){if(1&E){const $=w.EpF();w.TgZ(0,"div")(1,"ul",26)(2,"li",27)(3,"button",28),w.NdJ("click",function(){w.CHM($);const me=w.oxw();return w.KtG(me.activeTab=me.ActiveTab.Request)}),w._uU(4),w.ALo(5,"translate"),w.qZA()(),w.TgZ(6,"li",27)(7,"button",29),w.NdJ("click",function(){w.CHM($);const me=w.oxw();return w.KtG(me.activeTab=me.ActiveTab.Response)}),w._uU(8),w.ALo(9,"translate"),w.qZA()()(),w.YNc(10,U,2,1,"div",13),w.YNc(11,W,4,3,"div",30),w.TgZ(12,"div",31),w.YNc(13,V,3,2,"ng-container",13),w.YNc(14,Q,3,3,"button",32),w.qZA()()}if(2&E){const $=w.oxw();w.xp6(3),w.ekj("active",$.activeTab===$.ActiveTab.Request),w.xp6(1),w.Oqu(w.lcZ(5,10,"Clients.Saml.Request")),w.xp6(3),w.ekj("active",$.activeTab===$.ActiveTab.Response),w.xp6(1),w.Oqu(w.lcZ(9,12,"Clients.Saml.Response")),w.xp6(2),w.Q6J("ngIf",$.data.certificates),w.xp6(1),w.Q6J("ngIf",$.activeTab==$.ActiveTab.Request&&0===$.data.certificates.SigningCertificates.length||$.activeTab==$.ActiveTab.Response&&!$.data.certificates.EncryptionCertificate),w.xp6(2),w.Q6J("ngIf",$.activeTab===$.ActiveTab.Response),w.xp6(1),w.Q6J("ngIf",$.activeTab===$.ActiveTab.Request)}}function fe(E,te){if(1&E){const $=w.EpF();w.TgZ(0,"div",44)(1,"ul",45)(2,"li",10)(3,"label",46)(4,"input",47),w.NdJ("ngModelChange",function(me){w.CHM($);const we=w.oxw();return w.KtG(we.data.rememberCertificateAction=me)}),w.qZA(),w.TgZ(5,"span",48),w._uU(6),w.ALo(7,"translate"),w.qZA()()()()()}if(2&E){const $=w.oxw();w.xp6(4),w.Q6J("ngModel",$.data.rememberCertificateAction),w.xp6(2),w.hij(" ",w.lcZ(7,2,"Clients.Import.Wizard.Certificates.RememberMyDecision")," ")}}var J=(()=>{return(E=J||(J={}))[E.DoNotSet=0]="DoNotSet",E[E.UseExisting=1]="UseExisting",E[E.ManuallyCreate=2]="ManuallyCreate",J;var E})(),ee=(()=>{return(E=ee||(ee={}))[E.Request=0]="Request",E[E.Response=1]="Response",ee;var E})();let G=(()=>{class E extends n.n{constructor($,ue,me,we){super(),this.fb=$,this.changeDetector=ue,this.toastr=me,this.translate=we,this.CertificateAction=J,this.ActiveTab=ee}get data(){return this._selectableImportResource}set data($){this._selectableImportResource=$}ngOnInit(){if(this.form=this.fb.group({certificateAction:[J.UseExisting,e.kI.required]}),this.data){const $=this.data.certificateAction===J.ManuallyCreate;let ue;ue=this.data.existingHasCertificates?$?J.ManuallyCreate:J.UseExisting:J.DoNotSet,this.data.certificateAction=ue,this.form.get("certificateAction").setValue(ue),this.displayResourceType=y.m.getSummaryDisplayType(this.data.resourceType)}this.data.certificateAction===J.ManuallyCreate&&(this.showCertificatePicker=!0,this.changeDetector.detectChanges(),this.data.certificates&&(this.activeTab=ee.Request,this.data.certificates.SigningCertificates&&this.data.certificates.SigningCertificates.length>0?this.activeTab=ee.Request:this.data.certificates.EncryptionCertificate&&(this.activeTab=ee.Response))),this.form.valueChanges.subscribe(()=>{const $=this.form.value.certificateAction;this.data.certificateAction=$,$===J.ManuallyCreate?(this.showCertificatePicker=!0,this.activeTab=ee.Request,this.changeDetector.detectChanges()):this.showCertificatePicker=!1}),this.updatedCertificatesObservable&&this.updatedCertificatesObservable.unsubscribe()}addCert(){this.updatedCertificatesObservable&&(this.updatedCertificatesObservable.unsubscribe(),this.updatedCertificatesObservable=null),this.updatedCertificateSubject=new S.x,this.updatedCertificatesObservable=this.updatedCertificateSubject.subscribe($=>{this.activeTab===ee.Request?(this.stripContentTypeFromData($),this.data.certificates.SigningCertificates.some(ue=>ue.base64Cert===$.base64Cert)?this.toastr.error(this.translate.instant("Clients.Import.Wizard.Certificates.DuplicateCertificate"),this.translate.instant("Clients.Import.Wizard.Certificates.InvalidCertificate")):this.data.certificates.SigningCertificates.push($)):(this.stripContentTypeFromData($),this.data.certificates.EncryptionCertificate=$)}),this.openModal(h.K.importUploadCertificate,this.updatedCertificatesObservable)}stripContentTypeFromData($){const ue=$.base64Cert.split("base64,");ue.length>1&&($.base64Cert=ue[1])}deleteCert($){if(this.activeTab===ee.Request){const ue=this.data.certificates.SigningCertificates.indexOf($);this.data.certificates.SigningCertificates.splice(ue,1)}else this.data.certificates.EncryptionCertificate=null}goNext(){this.data.certificateAction===J.ManuallyCreate&&(!this.data.certificates||!(this.data.certificates.SigningCertificates.length>0||this.data.certificates.EncryptionCertificate&&this.data.certificates.EncryptionCertificate.base64Cert))||(this.data.certificateAction===J.DoNotSet?(this.data.certificates.SigningCertificates=[],this.data.certificates.EncryptionCertificate=null):this.data.certificateAction===J.UseExisting&&(this.data.useExistingCertificates=!0),this.next())}disableNext(){return!(this.data.certificateAction===J.DoNotSet||this.data.certificateAction===J.UseExisting||null!==this.data.certificates&&(null!==this.data.certificates.SigningCertificates&&0!==this.data.certificates.SigningCertificates.length||this.data.certificates.EncryptionCertificate&&""!==this.data.certificates.EncryptionCertificate.base64Cert))}ngOnDestroy(){this.updatedCertificatesObservable&&this.updatedCertificatesObservable.unsubscribe()}}return E.\u0275fac=function($){return new($||E)(w.Y36(e.QS),w.Y36(w.sBO),w.Y36(f._W),w.Y36(x.sK))},E.\u0275cmp=w.Xpm({type:E,selectors:[["app-import-certificates"]],features:[w.qOj],decls:38,vars:29,consts:[[1,"modal-body"],[1,"tw-mb-4"],[1,"tw-font-semibold","tw-mr-2"],["id","displayName"],[1,"cms"],["id","certActionsLabel"],[3,"formGroup"],["role","group","aria-labelledby","certActionsLabel",1,"tw-form-checks"],["class","tw-form-checks__item",4,"ngIf","ngIfElse"],["existingHasCertificates",""],[1,"tw-form-checks__item"],["for","manually-create",1,"tw-form-checks__label"],["id","manually-create","formControlName","certificateAction","type","radio",1,"tw-form-checks__input",3,"value"],[4,"ngIf"],["class","tw-border-t tw-border-grey-200 tw-px-4 tw-pt-4 tw--mx-5 tw-mt-4",4,"ngIf"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","nextBtn",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],["id","backBtn",1,"tw-btn",3,"click"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],["for","do-not-set",1,"tw-form-checks__label"],["id","do-not-set","formControlName","certificateAction","type","radio",1,"tw-form-checks__input",3,"value"],["for","existing-certificate",1,"tw-form-checks__label"],["id","existing-certificate","formControlName","certificateAction","type","radio",1,"tw-form-checks__input",3,"value"],[1,"pill-tabs"],[1,"pill-tabs__item"],["id","requestSpan",1,"pill-tabs__link",3,"click"],["id","responseSpan",1,"pill-tabs__link",3,"click"],["id","noCertsAlert","class","tw-alert tw-mb-4","role","alert",4,"ngIf"],[1,"tw-flex","tw-justify-end"],["id","addButton","class","tw-btn-success",3,"click",4,"ngIf"],["id","certificateTable","class","datatable hover tw-mb-4",4,"ngIf"],["id","certificateTable",1,"datatable","hover","tw-mb-4"],[1,""],[1,"tw-w-1"],[1,"sr-only"],[4,"ngFor","ngForOf"],[1,"tw-max-w-0","tw-truncate"],["type","button",1,"tw-btn-link","tw-btn-small","tw-text-red-500",3,"click"],["aria-hidden","true",1,"fas","fa-times"],["id","noCertsAlert","role","alert",1,"tw-alert","tw-mb-4"],["id","addButton",1,"tw-btn-success",3,"click"],[1,"tw-border-t","tw-border-grey-200","tw-px-4","tw-pt-4","tw--mx-5","tw-mt-4"],[1,"tw-form-checks"],["for","remember-my-decision",1,"tw-form-checks__label"],["id","remember-my-decision","type","checkbox",1,"tw-form-checks__input",3,"ngModel","ngModelChange"],[1,"tw-font-normal"]],template:function($,ue){if(1&$&&(w.TgZ(0,"div",0)(1,"h2",1)(2,"span",2),w._uU(3),w.ALo(4,"translate"),w.qZA(),w.TgZ(5,"span",3),w._uU(6),w.ALo(7,"translate"),w.qZA()(),w.TgZ(8,"div",4)(9,"p",5),w._uU(10),w.ALo(11,"translate"),w.qZA()(),w.TgZ(12,"form",6)(13,"ul",7),w.YNc(14,g,6,4,"li",8),w.YNc(15,N,6,4,"ng-template",null,9,w.W1O),w.TgZ(17,"li",10)(18,"label",11),w._UZ(19,"input",12),w.TgZ(20,"span"),w._uU(21),w.ALo(22,"translate"),w.qZA()()()()(),w.YNc(23,Y,15,14,"div",13),w.YNc(24,fe,8,4,"div",14),w.qZA(),w._UZ(25,"div",15),w.TgZ(26,"div",16)(27,"div",17)(28,"div",18)(29,"button",19),w.NdJ("click",function(){return ue.goNext()}),w._uU(30),w.ALo(31,"translate"),w.qZA(),w.TgZ(32,"button",20),w.NdJ("click",function(){return ue.back()}),w._uU(33),w.ALo(34,"translate"),w.qZA()(),w.TgZ(35,"button",21),w.NdJ("click",function(){return ue.cancel()}),w._uU(36),w.ALo(37,"translate"),w.qZA()()()),2&$){const me=w.MAs(16);w.xp6(3),w.hij("",w.lcZ(4,15,"Clients.Import.Wizard.Certificates.Title"),":"),w.xp6(3),w.AsE("",null==ue.data?null:ue.data.displayName," (",w.lcZ(7,17,"Clients.Import.Wizard.Secrets."+ue.displayResourceType),")"),w.xp6(4),w.Oqu(w.lcZ(11,19,"Clients.Import.Wizard.Certificates.ChooseWhatToDo")),w.xp6(2),w.Q6J("formGroup",ue.form),w.xp6(2),w.Q6J("ngIf",!(null!=ue.data&&ue.data.existingHasCertificates))("ngIfElse",me),w.xp6(5),w.Q6J("value",ue.CertificateAction.ManuallyCreate),w.xp6(2),w.Oqu(w.lcZ(22,21,"Clients.Import.Wizard.Certificates.UploadNewCertificates")),w.xp6(2),w.Q6J("ngIf",ue.showCertificatePicker),w.xp6(1),w.Q6J("ngIf",!ue.showCertificatePicker),w.xp6(5),w.Q6J("disabled",ue.disableNext()),w.xp6(1),w.Oqu(w.lcZ(31,23,"Common.Next")),w.xp6(3),w.Oqu(w.lcZ(34,25,"Common.Back")),w.xp6(3),w.Oqu(w.lcZ(37,27,"Common.Cancel"))}},dependencies:[b.sg,b.O5,e._Y,e.Fj,e.Wl,e._,e.JJ,e.JL,e.On,e.sg,e.u,x.X$],encapsulation:2}),E})()},7243:(nt,_e,m)=>{"use strict";m.d(_e,{l:()=>y});var n=m(9506),e=m(4650),h=m(7481),S=m(9383);let y=(()=>{class w extends n.n{constructor(x){super(),this.importWizardService=x,this.hideProgressBar=!0}downloadAndQuit(){this.importWizardService.downloadClientSecretsFromCache().subscribe(()=>{this.quit()})}yes(){this.quit()}}return w.\u0275fac=function(x){return new(x||w)(e.Y36(h.U))},w.\u0275cmp=e.Xpm({type:w,selectors:[["app-import-download-warning"]],features:[e.qOj],decls:17,vars:15,consts:[[1,"modal-body","tw-text-center"],[1,"tw-mb-4"],[1,"tw-pill-danger"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","leaveBtn",1,"tw-btn-success",3,"click"],["id","stayBtn",1,"tw-btn-link","tw--mr-4",3,"click"]],template:function(x,b){1&x&&(e.TgZ(0,"div",0)(1,"p",1),e._uU(2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"p",2),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",3)(9,"div",4)(10,"div",5)(11,"button",6),e.NdJ("click",function(){return b.downloadAndQuit()}),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"button",7),e.NdJ("click",function(){return b.yes()}),e._uU(15),e.ALo(16,"translate"),e.qZA()()()),2&x&&(e.xp6(2),e.AsE(" ",e.lcZ(3,5,"Clients.Import.Wizard.Warning.DownloadSecrets")," ",e.lcZ(4,7,"Clients.Import.Wizard.Warning.Text2")," "),e.xp6(4),e.Oqu(e.lcZ(7,9,"Secret Picker.LastWarning")),e.xp6(6),e.Oqu(e.lcZ(13,11,"Clients.Import.Wizard.CompleteImport.DownloadSecrets")),e.xp6(3),e.Oqu(e.lcZ(16,13,"Clients.Import.Wizard.CompleteImport.FinishImport")))},dependencies:[S.X$],encapsulation:2}),w})()},7363:(nt,_e,m)=>{"use strict";m.d(_e,{$:()=>W,C:()=>U});var n=m(3111),e=m(4006),h=m(6068),S=m(8176),y=m(9506),w=m(5669),f=m(4650),x=m(9383),b=m(6895),g=m(1660);const N=["secretPicker"];function R(M,B){if(1&M&&(f.TgZ(0,"li",10)(1,"label",27),f._UZ(2,"input",28),f.TgZ(3,"span"),f._uU(4),f.ALo(5,"translate"),f.qZA()()()),2&M){const V=f.oxw();f.xp6(2),f.Q6J("value",V.SecretsActions.DoNotSet),f.xp6(2),f.Oqu(f.lcZ(5,2,"Clients.Import.Wizard.Secrets.DoNotSet"))}}function k(M,B){if(1&M&&(f.TgZ(0,"li",10)(1,"label",29),f._UZ(2,"input",30),f.TgZ(3,"span"),f._uU(4),f.ALo(5,"translate"),f.qZA()()()),2&M){const V=f.oxw();f.xp6(2),f.Q6J("value",V.SecretsActions.UseExistingSecret),f.xp6(2),f.Oqu(f.lcZ(5,2,"Clients.Import.Wizard.Secrets.UseExistingSecrets"))}}function O(M,B){if(1&M&&f._UZ(0,"app-secret-picker",31,32),2&M){const V=f.oxw();f.Q6J("clientSecrets",V.possibleSecrets)("nonModelCertPicker",!1)}}function P(M,B){if(1&M){const V=f.EpF();f.TgZ(0,"div",33)(1,"ul",34)(2,"li",10)(3,"label",35)(4,"input",36),f.NdJ("ngModelChange",function(Y){f.CHM(V);const fe=f.oxw();return f.KtG(fe.data.rememberSecretAction=Y)}),f.qZA(),f.TgZ(5,"span",37),f._uU(6),f.ALo(7,"translate"),f.qZA()()()()()}if(2&M){const V=f.oxw();f.xp6(4),f.Q6J("ngModel",V.data.rememberSecretAction),f.xp6(2),f.hij(" ",f.lcZ(7,2,"Clients.Import.Wizard.Secrets.RememberMyDecision")," ")}}var U=(()=>{return(M=U||(U={}))[M.DoNotSet=0]="DoNotSet",M[M.Generate=1]="Generate",M[M.ManuallyCreate=2]="ManuallyCreate",M[M.UseExistingSecret=3]="UseExistingSecret",U;var M})();let W=(()=>{class M extends y.n{constructor(V,Q,Y){super(),this.translate=V,this.fb=Q,this.changeDetector=Y,this.SecretsActions=U,this.possibleSecrets=[]}get data(){return this._selectableImportResource}set data(V){this._selectableImportResource=V}ngOnInit(){if(this.form=this.fb.group({secretAction:["",e.kI.required]}),this.data){const V=this.data.existingHasSecrets?U.UseExistingSecret:U.DoNotSet;this.form.get("secretAction").setValue(V),this.displayResourceType=this.data.resourceType===n.JR.Client?w.m.client:w.m.protectedResource}this.data.secrets&&this.data.secrets.length>0&&(this.data.secretsAction===U.ManuallyCreate?(this.possibleSecrets=this.data.secrets,this.form.setValue({secretAction:U.ManuallyCreate}),this.showSecretPicker=!0,this.changeDetector.detectChanges(),this.secretPicker.displayWarnings=!1,this.manageSecretStreams()):this.form.setValue({secretAction:U.Generate})),this.form.valueChanges.subscribe(()=>{const V=this.form.value.secretAction;this.data.secretsAction=V,V===U.ManuallyCreate?(this.showSecretPicker=!0,this.changeDetector.detectChanges(),this.secretPicker.displayWarnings=!1,this.manageSecretStreams()):this.showSecretPicker=!1})}getResourceType(){return this.data?n.JR[this.data.resourceType]:""}goNext(){const V=this.form.get("secretAction");if(V.value===U.DoNotSet)this.data.secrets=[];else if(V.value===U.UseExistingSecret)this.data.useExistingSecrets=!0;else if(V.value===U.Generate){const Q=new h.u;Q.value=(0,S.qs)(),Q.type="Shared Secret",Q.description="",this.data.secrets=[Q]}else this.data.secrets=this.possibleSecrets;this.data.secretsAction=this.form.get("secretAction").value,this.next()}manageSecretStreams(){this.secretAddSubscription=this.secretPicker.secretsAddStream.subscribe(V=>{this.possibleSecrets.push(V)}),this.secretDeleteSubscription=this.secretPicker.secretsRemoveStream.subscribe(V=>{this.secretPicker.clientSecrets.splice(this.secretPicker.clientSecrets.indexOf(V),1)})}ngOnDestroy(){this.secretAddSubscription&&(this.secretAddSubscription.unsubscribe(),this.secretDeleteSubscription.unsubscribe())}}return M.\u0275fac=function(V){return new(V||M)(f.Y36(x.sK),f.Y36(e.QS),f.Y36(f.sBO))},M.\u0275cmp=f.Xpm({type:M,selectors:[["app-import-secrets"]],viewQuery:function(V,Q){if(1&V&&f.Gf(N,5),2&V){let Y;f.iGM(Y=f.CRH())&&(Q.secretPicker=Y.first)}},features:[f.qOj],decls:51,vars:38,consts:[[1,"modal-body"],[1,"tw-mb-4"],[1,"tw-font-semibold","tw-mr-2"],["id","displayName"],[1,"cms"],["id","secretActionsLabel"],[3,"formGroup"],["role","group","aria-labelledby","secretActionsLabel",1,"tw-form-checks"],["class","tw-form-checks__item",4,"ngIf","ngIfElse"],["existingHasSecrets",""],[1,"tw-form-checks__item"],["for","generate",1,"tw-form-checks__label"],["id","generate","formControlName","secretAction","type","radio",1,"tw-form-checks__input",3,"value"],["for","manually-create",1,"tw-form-checks__label"],["id","manually-create","formControlName","secretAction","type","radio",1,"tw-form-checks__input",3,"value"],[1,"tw-text-center","tw-mb-8"],[1,"tw-pill","tw-mx-auto"],[1,"tw-font-bold"],[3,"clientSecrets","nonModelCertPicker",4,"ngIf"],["class","tw-border-t tw-border-grey-200 tw-px-4 tw-pt-4 tw--mx-5 tw-mt-4",4,"ngIf"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","nextBtn",1,"tw-btn-success","tw-mr-3",3,"click"],["id","backBtn",1,"tw-btn",3,"click"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],["for","do-not-set",1,"tw-form-checks__label"],["id","do-not-set","formControlName","secretAction","type","radio",1,"tw-form-checks__input",3,"value"],["for","existing-secrets",1,"tw-form-checks__label"],["id","existing-secrets","formControlName","secretAction","type","radio",1,"tw-form-checks__input",3,"value"],[3,"clientSecrets","nonModelCertPicker"],["secretPicker",""],[1,"tw-border-t","tw-border-grey-200","tw-px-4","tw-pt-4","tw--mx-5","tw-mt-4"],[1,"tw-form-checks"],["for","remember-my-decision",1,"tw-form-checks__label"],["id","remember-my-decision","type","checkbox",1,"tw-form-checks__input",3,"ngModel","ngModelChange"],[1,"tw-font-normal"]],template:function(V,Q){if(1&V&&(f.TgZ(0,"div",0)(1,"h2",1)(2,"span",2),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"span",3),f._uU(6),f.ALo(7,"translate"),f.qZA()(),f.TgZ(8,"div",4)(9,"p",5),f._uU(10),f.ALo(11,"translate"),f.qZA()(),f.TgZ(12,"form",6)(13,"ul",7),f.YNc(14,R,6,4,"li",8),f.YNc(15,k,6,4,"ng-template",null,9,f.W1O),f.TgZ(17,"li",10)(18,"label",11),f._UZ(19,"input",12),f.TgZ(20,"span"),f._uU(21),f.ALo(22,"translate"),f.qZA()()(),f.TgZ(23,"li",10)(24,"label",13),f._UZ(25,"input",14),f.TgZ(26,"span"),f._uU(27),f.ALo(28,"translate"),f.qZA()()()()(),f.TgZ(29,"div",15)(30,"p",16)(31,"b",17),f._uU(32),f.ALo(33,"translate"),f.qZA(),f._uU(34),f.ALo(35,"translate"),f.qZA()(),f.YNc(36,O,2,2,"app-secret-picker",18),f.YNc(37,P,8,4,"div",19),f.qZA(),f._UZ(38,"div",20),f.TgZ(39,"div",21)(40,"div",22)(41,"div",23)(42,"button",24),f.NdJ("click",function(){return Q.goNext()}),f._uU(43),f.ALo(44,"translate"),f.qZA(),f.TgZ(45,"button",25),f.NdJ("click",function(){return Q.back()}),f._uU(46),f.ALo(47,"translate"),f.qZA()(),f.TgZ(48,"button",26),f.NdJ("click",function(){return Q.cancel()}),f._uU(49),f.ALo(50,"translate"),f.qZA()()()),2&V){const Y=f.MAs(16);f.xp6(3),f.hij("",f.lcZ(4,18,"Clients.Import.Wizard.Secrets.Title"),":"),f.xp6(3),f.AsE("",null==Q.data?null:Q.data.displayName," (",f.lcZ(7,20,"Clients.Import.Wizard.Secrets."+Q.displayResourceType),")"),f.xp6(4),f.Oqu(f.lcZ(11,22,"Clients.Import.Wizard.Secrets.ChooseWhatToDo")),f.xp6(2),f.Q6J("formGroup",Q.form),f.xp6(2),f.Q6J("ngIf",!(null!=Q.data&&Q.data.existingHasSecrets))("ngIfElse",Y),f.xp6(5),f.Q6J("value",Q.SecretsActions.Generate),f.xp6(2),f.Oqu(f.lcZ(22,24,"Clients.Import.Wizard.Secrets.Generate")),f.xp6(4),f.Q6J("value",Q.SecretsActions.ManuallyCreate),f.xp6(2),f.Oqu(f.lcZ(28,26,"Clients.Import.Wizard.Secrets.ManuallyCreate")),f.xp6(5),f.hij("",f.lcZ(33,28,"Clients.Import.Wizard.Secrets.Note.Title"),":"),f.xp6(2),f.hij(" ",f.lcZ(35,30,"Clients.Import.Wizard.Secrets.Note.Note")," "),f.xp6(2),f.Q6J("ngIf",Q.showSecretPicker),f.xp6(1),f.Q6J("ngIf",!Q.showSecretPicker),f.xp6(6),f.Oqu(f.lcZ(44,32,"Common.Next")),f.xp6(3),f.Oqu(f.lcZ(47,34,"Common.Back")),f.xp6(3),f.Oqu(f.lcZ(50,36,"Common.Cancel"))}},dependencies:[b.O5,e._Y,e.Fj,e.Wl,e._,e.JJ,e.JL,e.On,e.sg,e.u,g.P,x.X$],encapsulation:2}),M})()},8255:(nt,_e,m)=>{"use strict";m.d(_e,{o:()=>J});var n=m(3111),e=m(3334),h=m(9506),S=m(4650),y=m(7481),w=m(9383),f=m(6895);function x(ee,G){1&ee&&S.GkF(0)}const b=function(ee,G,E,te,$){return{title:ee,editable:!0,header1:G,header2:E,header3:te,data:$}};function g(ee,G){if(1&ee&&(S.TgZ(0,"div"),S.YNc(1,x,1,0,"ng-container",12),S.ALo(2,"translate"),S.ALo(3,"translate"),S.ALo(4,"translate"),S.ALo(5,"translate"),S.qZA()),2&ee){const E=S.oxw(),te=S.MAs(9);S.xp6(1),S.Q6J("ngTemplateOutlet",te)("ngTemplateOutletContext",S.qbA(10,b,S.lcZ(2,2,"Nav.Clients"),S.lcZ(3,4,"Clients.Import.Wizard.Summary.Name.Client"),S.lcZ(4,6,"Clients.Import.Wizard.Summary.Identifier.Client"),S.lcZ(5,8,"Clients.Import.Wizard.Summary.Type.Client"),E.clients))}}function N(ee,G){1&ee&&S.GkF(0)}const R=function(ee,G,E,te,$,ue){return{title:ee,editable:G,header1:E,header2:te,header3:$,data:ue}};function k(ee,G){if(1&ee&&(S.TgZ(0,"div",13),S.YNc(1,N,1,0,"ng-container",12),S.ALo(2,"translate"),S.ALo(3,"translate"),S.ALo(4,"translate"),S.ALo(5,"translate"),S.qZA()),2&ee){const E=S.oxw(),te=S.MAs(9);S.xp6(1),S.Q6J("ngTemplateOutlet",te)("ngTemplateOutletContext",S.HTZ(10,R,S.lcZ(2,2,"Nav.Resources"),E.canEdit(E.resources),S.lcZ(3,4,"Clients.Import.Wizard.Summary.Name.Resource"),S.lcZ(4,6,"Clients.Import.Wizard.Summary.Identifier.Resource"),S.lcZ(5,8,"Clients.Import.Wizard.Summary.Type.Resource"),E.resources))}}function O(ee,G){1&ee&&S.GkF(0)}function P(ee,G){if(1&ee&&(S.TgZ(0,"div",13),S.YNc(1,O,1,0,"ng-container",12),S.ALo(2,"translate"),S.ALo(3,"translate"),S.ALo(4,"translate"),S.ALo(5,"translate"),S.qZA()),2&ee){const E=S.oxw(),te=S.MAs(9);S.xp6(1),S.Q6J("ngTemplateOutlet",te)("ngTemplateOutletContext",S.HTZ(10,R,S.lcZ(2,2,"Nav.ClaimTypes"),E.canEdit(E.claims),S.lcZ(3,4,"Clients.Import.Wizard.Summary.Name.Resource"),S.lcZ(4,6,"Clients.Import.Wizard.Summary.Identifier.ClaimType"),S.lcZ(5,8,"Clients.Import.Wizard.Summary.Type.ClaimType"),E.claims))}}function U(ee,G){if(1&ee&&(S.ynx(0),S.TgZ(1,"td",31),S._UZ(2,"span",32),S.qZA(),S.TgZ(3,"td")(4,"span",33),S._uU(5),S.qZA()(),S.BQk()),2&ee){const E=S.oxw().$implicit,te=S.oxw(2);S.xp6(5),S.Oqu(te.getConflicts(E))}}function W(ee,G){1&ee&&S._UZ(0,"span",37)}function M(ee,G){1&ee&&S._UZ(0,"span",38)}function B(ee,G){1&ee&&S._UZ(0,"span",32)}function V(ee,G){if(1&ee&&(S.ynx(0),S.TgZ(1,"td",31),S.YNc(2,W,1,0,"span",34),S.YNc(3,M,1,0,"span",35),S.YNc(4,B,1,0,"span",36),S.qZA(),S.TgZ(5,"td")(6,"span",33),S._uU(7),S.qZA()(),S.BQk()),2&ee){const E=S.oxw().$implicit,te=S.oxw(2);S.xp6(2),S.Q6J("ngIf",E.resourceState==te.resourceStates.New),S.xp6(1),S.Q6J("ngIf",E.resourceState==te.resourceStates.Duplicate),S.xp6(1),S.Q6J("ngIf",E.conflictedByDependencies),S.xp6(2),S.ekj("tw-italic",E.resourceState===te.resourceStates.Duplicate),S.xp6(1),S.hij(" ",te.getResourceState(E)," ")}}const Q=function(ee){return{"inactive disabled tw-opacity-50 tw-pointer-events-none":ee}};function Y(ee,G){if(1&ee&&(S.TgZ(0,"tr",27)(1,"td",28)(2,"b"),S._uU(3),S.qZA()(),S.TgZ(4,"td",29),S._uU(5),S.qZA(),S.TgZ(6,"td",30),S._uU(7),S.ALo(8,"translate"),S.qZA(),S.YNc(9,U,6,1,"ng-container",2),S.YNc(10,V,8,6,"ng-container",2),S.qZA()),2&ee){const E=G.$implicit,te=S.oxw(2);S.Q6J("ngClass",S.VKq(9,Q,E.resourceState===te.resourceStates.Duplicate)),S.xp6(1),S.Q6J("title",E.displayName),S.xp6(2),S.Oqu(E.displayName),S.xp6(2),S.hij(" ",E.identifier," "),S.xp6(2),S.hij(" ",S.lcZ(8,7,"Clients.Import.Wizard.Summary.ResourceTypes."+E.displayType)," "),S.xp6(2),S.Q6J("ngIf",E.resourceState===te.resourceStates.Conflicted&&!E.conflictedByDependencies),S.xp6(1),S.Q6J("ngIf",E.resourceState!==te.resourceStates.Conflicted||E.conflictedByDependencies)}}function fe(ee,G){if(1&ee){const E=S.EpF();S.TgZ(0,"h2",14)(1,"span",15),S._uU(2),S.qZA(),S.TgZ(3,"button",16),S.NdJ("click",function(){const ue=S.CHM(E).data,me=S.oxw();return S.KtG(me.editResourceSummary(ue))}),S._UZ(4,"span",17),S.TgZ(5,"span",18),S._uU(6),S.ALo(7,"translate"),S.qZA()()(),S.TgZ(8,"table",19)(9,"thead")(10,"tr")(11,"th",20),S._uU(12),S.qZA(),S.TgZ(13,"th",21),S._uU(14),S.qZA(),S.TgZ(15,"th",22),S._uU(16),S.qZA(),S._UZ(17,"td",23),S.TgZ(18,"th",24)(19,"span",25),S._uU(20),S.ALo(21,"translate"),S.qZA()()()(),S.TgZ(22,"tbody"),S.YNc(23,Y,11,11,"tr",26),S.qZA()()}if(2&ee){const E=G.title,te=G.editable,$=G.header1,ue=G.header2,me=G.header3,we=G.data;S.xp6(2),S.Oqu(E),S.xp6(1),S.Q6J("disabled",!te),S.xp6(3),S.Oqu(S.lcZ(7,8,"Common.Edit")),S.xp6(6),S.Oqu($),S.xp6(2),S.Oqu(ue),S.xp6(2),S.Oqu(me),S.xp6(4),S.Oqu(S.lcZ(21,10,"Common.Status")),S.xp6(3),S.Q6J("ngForOf",we)}}let J=(()=>{class ee extends h.n{constructor(E,te){super(),this.importWizardService=E,this.translate=te,this.resourceStates=n.vZ,this.resourceTypes=n.JR}ngOnInit(){this.importWizardService.cache.subscribe(E=>{const te=[this.resourceStates.Conflicted,this.resourceStates.New,this.resourceStates.Duplicate],$=E.filter(we=>we.resourceType===n.JR.Client&&(we.selected||we.resourceState===n.vZ.Duplicate)),ue=[],me=[];E.forEach(we=>{we.resourceType!==n.JR.Client&&$.some(ye=>we.dependantClients.some(qe=>qe.identifier===ye.identifier))&&(we.resourceType===n.JR.ClaimType?ue.push(we):me.push(we))}),this.clients=$.sort((we,ye)=>te.indexOf(we.resourceState)-te.indexOf(ye.resourceState)),this.claims=ue.sort((we,ye)=>te.indexOf(we.resourceState)-te.indexOf(ye.resourceState)),this.resources=me.sort((we,ye)=>te.indexOf(we.resourceState)-te.indexOf(ye.resourceState))})}canNext(){return!0}goNext(){this.next()}viewConflicts(E,te){E.stopPropagation(),this.openModal(e.K.summaryConflicts,te)}getResourceState(E){return E.conflictedByDependencies?this.translate.instant("Clients.Import.Wizard.Summary.DependencyConflicts"):this.resourceStates[E.resourceState]}canEdit(E){return E.length>0&&E.some(te=>te.resourceState!==n.vZ.Duplicate)}editResourceSummary(E){this.importWizardController.goToSummaryStep(E[0].resourceType)}getConflicts(E){let $,te=0;return E.conflicts.forEach(ue=>{te+=ue.conflicts.length}),$=this.translate.instant(1===te?"Clients.Import.Wizard.Summary.Change":"Clients.Import.Wizard.Summary.Changes"),te+" "+$}}return ee.\u0275fac=function(E){return new(E||ee)(S.Y36(y.U),S.Y36(w.sK))},ee.\u0275cmp=S.Xpm({type:ee,selectors:[["app-import-summary-all"]],features:[S.qOj],decls:23,vars:16,consts:[[1,"modal-body"],[1,"cms"],[4,"ngIf"],["class","tw-mt-8",4,"ngIf"],["commonDatatable",""],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","nextBtn",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],["id","backBtn",1,"tw-btn",3,"click"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tw-mt-8"],[1,"tw-border-b","tw-border-grey-200","tw-mb-3","tw-pb-1","tw-font-semibold","md:tw-flex","md:tw-items-center"],[1,"tw-block","tw-mb-2","md:tw-mb-0"],[1,"tw-btn","tw-btn-small","tw-btn-link","md:tw-ml-auto",3,"disabled","click"],["aria-hidden","true",1,"fad","fa-pencil"],[1,"tw-ml-2"],[1,"datatable"],[1,"md:tw-w-1/3","lg:tw-w-1/4"],[1,"tw-hidden","sm:tw-table-cell","md:tw-w-1/3"],[1,"tw-hidden","lg:tw-table-cell"],["aria-hidden","true",1,"tw-hidden","tw-w-1","xs:tw-table-cell"],[1,"tw-w-1"],[1,"sr-only"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"tw-truncate","tw-max-w-0",3,"title"],[1,"tw-hidden","tw-truncate","sm:tw-table-cell"],[1,"tw-hidden","tw-truncate","lg:tw-table-cell"],["aria-hidden","true",1,"tw-hidden","tw-text-right","xs:tw-table-cell"],[1,"fas","fa-exclamation-triangle","tw-text-orange-500","tw--mr-3"],[1,"tw-whitespace-nowrap"],["class","fas fa-check tw-text-green-500 tw--mr-3",4,"ngIf"],["class","far fa-copy tw--mr-3",4,"ngIf"],["class","fas fa-exclamation-triangle tw-text-orange-500 tw--mr-3",4,"ngIf"],[1,"fas","fa-check","tw-text-green-500","tw--mr-3"],[1,"far","fa-copy","tw--mr-3"]],template:function(E,te){1&E&&(S.TgZ(0,"div",0)(1,"div",1)(2,"p"),S._uU(3),S.ALo(4,"translate"),S.qZA()(),S.YNc(5,g,6,16,"div",2),S.YNc(6,k,6,17,"div",3),S.YNc(7,P,6,17,"div",3),S.YNc(8,fe,24,12,"ng-template",null,4,S.W1O),S.qZA(),S._UZ(10,"div",5),S.TgZ(11,"div",6)(12,"div",7)(13,"div",8)(14,"button",9),S.NdJ("click",function(){return te.goNext()}),S._uU(15),S.ALo(16,"translate"),S.qZA(),S.TgZ(17,"button",10),S.NdJ("click",function(){return te.back()}),S._uU(18),S.ALo(19,"translate"),S.qZA()(),S.TgZ(20,"button",11),S.NdJ("click",function(){return te.cancel()}),S._uU(21),S.ALo(22,"translate"),S.qZA()()()),2&E&&(S.xp6(3),S.Oqu(S.lcZ(4,8,"Clients.Import.Wizard.Summary.FinalSummary")),S.xp6(2),S.Q6J("ngIf",(null==te.clients?null:te.clients.length)>0),S.xp6(1),S.Q6J("ngIf",(null==te.resources?null:te.resources.length)>0),S.xp6(1),S.Q6J("ngIf",(null==te.claims?null:te.claims.length)>0),S.xp6(7),S.Q6J("disabled",!te.canNext()),S.xp6(1),S.Oqu(S.lcZ(16,10,"Clients.Import.Import")),S.xp6(3),S.Oqu(S.lcZ(19,12,"Common.Back")),S.xp6(3),S.Oqu(S.lcZ(22,14,"Common.Cancel")))},dependencies:[f.mk,f.sg,f.O5,f.tP,w.X$],encapsulation:2}),ee})()},5744:(nt,_e,m)=>{"use strict";m.d(_e,{Gz:()=>ze});var n=m(3111),e=m(3334),h=m(8176),S=m(5669),y=m(9506);let w=(()=>{class it{}return it.RelyingPartyProperty="RelyingParty",it.RelyingPartyIdentifier="Relying Party",it.ServiceProviderProperty="ServiceProvider",it.ServiceProviderIdentifier="Service Provider",it.ClaimsProperty="Claims",it.PropertiesProperty="Properties",it.ScopesProperty="Scopes",it.UserClaimsProperty="UserClaims",it.sloProperty="SingleLogoutServices",it.acsProperty="AssertionConsumerServices",it.sloIdentifier="Single Logout Services",it.acsIdentifier="Assertion Consumer Services",it.ClaimMappingsIdentifier="Claim Mappings",it.ClaimMappingsKey="ClaimMappings",it.SamlDisplayType="Saml",it.WsFedDisplayType="WsFed",it.Client="Client",it.Endpoint="Endpoint",it.ProtectedResources="ProtectedResources",it.IdentityResources="IdentityResources",it.ClaimTypes="ClaimTypes",it.Secrets="Secrets",it.Certificates="Certificates",it})();var f=m(4650),x=m(7481),b=m(9383),g=m(2979),N=m(6895);let R=(()=>{class it{transform(bt){if(bt){const jt=[...bt];let ln="",kn="";for(let Tn=0;Tn<jt.length;Tn++){const qn=jt[Tn];if(0===ln.length)ln=qn.toUpperCase();else if(Tn+1===jt.length)kn===kn.toUpperCase()||qn===qn.toLowerCase()?ln+=qn:ln+=`${qn}`;else if(qn===qn.toUpperCase()){const ri=kn===kn.toUpperCase(),Yn=jt[Tn+1];ri?Yn===Yn.toLowerCase()?ln+=` ${qn}`:ln+=qn:ln+=` ${qn}`}else ln+=qn;kn=qn}bt=ln}return bt}}return it.\u0275fac=function(bt){return new(bt||it)},it.\u0275pipe=f.Yjl({name:"beautifyPropertyName",type:it,pure:!0}),it})();const k=["importSummaryConflictsModal"];function O(it,Gt){1&it&&f._UZ(0,"span",24)}function P(it,Gt){1&it&&f._UZ(0,"span",25)}function U(it,Gt){1&it&&(f.TgZ(0,"span",35),f._uU(1,", "),f.qZA())}function W(it,Gt){if(1&it&&(f.TgZ(0,"li",33)(1,"span"),f._uU(2),f.qZA(),f.YNc(3,U,2,0,"span",34),f.qZA()),2&it){const bt=Gt.$implicit,jt=Gt.last;f.xp6(2),f.Oqu(bt.displayName),f.xp6(1),f.Q6J("ngIf",!jt)}}function M(it,Gt){if(1&it&&(f.TgZ(0,"dl",29)(1,"dt",30),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.TgZ(4,"dd")(5,"ul",31),f.YNc(6,W,4,2,"li",32),f.qZA()()()),2&it){const bt=f.oxw(3);f.xp6(2),f.hij(" ",f.lcZ(3,2,"Clients.Import.Wizard.Summary.EffectsImportClients"),": "),f.xp6(4),f.Q6J("ngForOf",bt.linkedNewClients)}}function B(it,Gt){1&it&&(f.TgZ(0,"span",35),f._uU(1,", "),f.qZA())}function V(it,Gt){if(1&it&&(f.TgZ(0,"li",33)(1,"a",37),f._uU(2),f.qZA(),f.YNc(3,B,2,0,"span",34),f.qZA()),2&it){const bt=Gt.$implicit,jt=Gt.last,ln=f.oxw(4);f.xp6(1),f.Q6J("href",ln.buildHref(bt.existingIdentifier),f.LSH),f.xp6(1),f.hij(" ",bt.displayName," "),f.xp6(1),f.Q6J("ngIf",!jt)}}function Q(it,Gt){if(1&it&&(f.TgZ(0,"dl",36)(1,"dt",30),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.TgZ(4,"dd",33)(5,"ul",31),f.YNc(6,V,4,3,"li",32),f.qZA()()()),2&it){const bt=f.oxw(3);f.xp6(2),f.hij(" ",f.lcZ(3,2,"Clients.Import.Wizard.Summary.EffectsExistingClients"),": "),f.xp6(4),f.Q6J("ngForOf",bt.linkedExistingClients)}}function Y(it,Gt){if(1&it&&(f.TgZ(0,"div",26),f.YNc(1,M,7,4,"dl",27),f.YNc(2,Q,7,4,"dl",28),f.qZA()),2&it){const bt=f.oxw(2);f.xp6(1),f.Q6J("ngIf",bt.linkedNewClients.length>0),f.xp6(1),f.Q6J("ngIf",bt.linkedExistingClients.length>0)}}function fe(it,Gt){if(1&it){const bt=f.EpF();f.TgZ(0,"div",17)(1,"div",18)(2,"button",19),f.NdJ("click",function(){f.CHM(bt);const ln=f.oxw();return f.KtG(ln.toggleDisplayLinkedClientsDropdown())}),f.TgZ(3,"span"),f._uU(4),f.ALo(5,"translate"),f.qZA(),f.TgZ(6,"span",20),f.YNc(7,O,1,0,"span",21),f.YNc(8,P,1,0,"span",22),f.qZA()(),f.YNc(9,Y,3,2,"div",23),f.qZA()()}if(2&it){const bt=f.oxw();f.ekj("tw-alert-warning",bt.linkedExistingClients.length>0),f.xp6(4),f.Oqu(f.lcZ(5,6,"Clients.Import.Wizard.Summary.LinkedClients")),f.xp6(3),f.Q6J("ngIf",bt.displayLinkedClientsDropdown),f.xp6(1),f.Q6J("ngIf",!bt.displayLinkedClientsDropdown),f.xp6(1),f.Q6J("ngIf",bt.displayLinkedClientsDropdown)}}function J(it,Gt){if(1&it&&(f.TgZ(0,"span",46),f._uU(1),f.qZA()),2&it){const bt=f.oxw().$implicit;f.xp6(1),f.hij(" ",bt.previous," ")}}function ee(it,Gt){1&it&&(f.TgZ(0,"i",47),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&it&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Clients.Import.Wizard.Summary.Conflicts.NoValue")," "))}function G(it,Gt){if(1&it&&(f.TgZ(0,"span",48),f._uU(1),f.qZA()),2&it){const bt=f.oxw().$implicit;f.xp6(1),f.hij(" ",bt.new," ")}}function E(it,Gt){1&it&&(f.TgZ(0,"i",47),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&it&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Clients.Import.Wizard.Summary.Conflicts.Deleted")," "))}function te(it,Gt){if(1&it){const bt=f.EpF();f.TgZ(0,"tr",42),f.NdJ("change",function(){f.CHM(bt);const ln=f.oxw(2);return f.KtG(ln.setupTableHeadings())}),f.TgZ(1,"td"),f._uU(2),f.ALo(3,"beautifyPropertyName"),f.qZA(),f.TgZ(4,"td"),f.YNc(5,J,2,1,"span",43),f.YNc(6,ee,3,3,"i",44),f.qZA(),f.TgZ(7,"td"),f.YNc(8,G,2,1,"span",45),f.YNc(9,E,3,3,"i",44),f.qZA()()}if(2&it){const bt=Gt.$implicit,jt=f.oxw(2);f.xp6(2),f.Oqu(f.lcZ(3,5,bt.propertyName)),f.xp6(3),f.Q6J("ngIf",jt.hasValue(bt.previous)),f.xp6(1),f.Q6J("ngIf",!jt.hasValue(bt.previous)),f.xp6(2),f.Q6J("ngIf",jt.hasValue(bt.new)),f.xp6(1),f.Q6J("ngIf",!jt.hasValue(bt.new))}}function $(it,Gt){if(1&it&&(f.TgZ(0,"div",38)(1,"table",39)(2,"thead")(3,"tr")(4,"th"),f._uU(5),f.ALo(6,"translate"),f.qZA(),f.TgZ(7,"th",40),f._uU(8),f.ALo(9,"translate"),f.qZA(),f.TgZ(10,"th",40),f._uU(11),f.ALo(12,"translate"),f.qZA()()(),f.TgZ(13,"tbody"),f.YNc(14,te,10,7,"tr",41),f.qZA()()()),2&it){const bt=f.oxw();f.xp6(5),f.Oqu(f.lcZ(6,4,"Clients.Import.Wizard.Summary.Conflicts.Property")),f.xp6(3),f.Oqu(f.lcZ(9,6,"Clients.Import.Wizard.Summary.Conflicts.OldValue")),f.xp6(3),f.Oqu(f.lcZ(12,8,"Clients.Import.Wizard.Summary.Conflicts.NewValue")),f.xp6(3),f.Q6J("ngForOf",null==bt.fieldConflicts?null:bt.fieldConflicts.conflicts)}}function ue(it,Gt){if(1&it&&(f.TgZ(0,"span",46),f._uU(1),f.qZA()),2&it){const bt=f.oxw().$implicit;f.xp6(1),f.hij(" ",bt.previous," ")}}function me(it,Gt){1&it&&(f.TgZ(0,"i",47),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&it&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Clients.Import.Wizard.Summary.Conflicts.NoValue")," "))}function we(it,Gt){if(1&it&&(f.TgZ(0,"span",48),f._uU(1),f.qZA()),2&it){const bt=f.oxw().$implicit;f.xp6(1),f.hij(" ",bt.new," ")}}function ye(it,Gt){1&it&&(f.TgZ(0,"i",47),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&it&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Clients.Import.Wizard.Summary.Conflicts.Deleted")," "))}function qe(it,Gt){if(1&it){const bt=f.EpF();f.TgZ(0,"tr",42),f.NdJ("change",function(){f.CHM(bt);const ln=f.oxw(3);return f.KtG(ln.setupTableHeadings())}),f.TgZ(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f.YNc(4,ue,2,1,"span",43),f.YNc(5,me,3,3,"i",44),f.qZA(),f.TgZ(6,"td"),f.YNc(7,we,2,1,"span",45),f.YNc(8,ye,3,3,"i",44),f.qZA()()}if(2&it){const bt=Gt.$implicit,jt=f.oxw(3);f.xp6(2),f.Oqu(bt.propertyName),f.xp6(2),f.Q6J("ngIf",jt.hasValue(bt.previous)),f.xp6(1),f.Q6J("ngIf",!jt.hasValue(bt.previous)),f.xp6(2),f.Q6J("ngIf",jt.hasValue(bt.new)),f.xp6(1),f.Q6J("ngIf",!jt.hasValue(bt.new))}}function De(it,Gt){if(1&it&&(f.TgZ(0,"div",51)(1,"h4",52),f._uU(2),f.ALo(3,"beautifyPropertyName"),f.qZA(),f.TgZ(4,"table",39)(5,"thead")(6,"tr")(7,"th"),f._uU(8),f.ALo(9,"translate"),f.qZA(),f.TgZ(10,"th",40),f._uU(11),f.ALo(12,"translate"),f.qZA(),f.TgZ(13,"th",40),f._uU(14),f.ALo(15,"translate"),f.qZA()()(),f.TgZ(16,"tbody"),f.YNc(17,qe,9,5,"tr",41),f.qZA()()()),2&it){const bt=Gt.$implicit;f.xp6(2),f.hij(" ",f.lcZ(3,5,bt.identifier)," "),f.xp6(6),f.Oqu(f.lcZ(9,7,"Clients.Import.Wizard.Summary.Conflicts.Key")),f.xp6(3),f.Oqu(f.lcZ(12,9,"Clients.Import.Wizard.Summary.Conflicts.OldValue")),f.xp6(3),f.Oqu(f.lcZ(15,11,"Clients.Import.Wizard.Summary.Conflicts.NewValue")),f.xp6(3),f.Q6J("ngForOf",null==bt?null:bt.conflicts)}}function Ge(it,Gt){if(1&it&&(f.TgZ(0,"div",49),f.YNc(1,De,18,13,"div",50),f.qZA()),2&it){const bt=f.oxw();f.xp6(1),f.Q6J("ngForOf",bt.clientKeyValueConflicts)}}function ve(it,Gt){if(1&it&&(f.TgZ(0,"span",46),f._uU(1),f.qZA()),2&it){const bt=f.oxw().$implicit;f.xp6(1),f.hij(" ",bt.previous," ")}}function c(it,Gt){1&it&&(f.TgZ(0,"i",47),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&it&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Clients.Import.Wizard.Summary.Conflicts.NoValue")," "))}function tt(it,Gt){if(1&it&&(f.TgZ(0,"span",48),f._uU(1),f.qZA()),2&it){const bt=f.oxw().$implicit;f.xp6(1),f.hij(" ",bt.new," ")}}function _t(it,Gt){1&it&&(f.TgZ(0,"i",47),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&it&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Clients.Import.Wizard.Summary.Conflicts.Deleted")," "))}function ct(it,Gt){if(1&it){const bt=f.EpF();f.TgZ(0,"tr",42),f.NdJ("change",function(){f.CHM(bt);const ln=f.oxw(3);return f.KtG(ln.setupTableHeadings())}),f.TgZ(1,"td"),f._uU(2),f.ALo(3,"beautifyPropertyName"),f.qZA(),f.TgZ(4,"td"),f.YNc(5,ve,2,1,"span",43),f.YNc(6,c,3,3,"i",44),f.qZA(),f.TgZ(7,"td"),f.YNc(8,tt,2,1,"span",45),f.YNc(9,_t,3,3,"i",44),f.qZA()()}if(2&it){const bt=Gt.$implicit,jt=f.oxw(3);f.xp6(2),f.Oqu(f.lcZ(3,5,bt.propertyName)),f.xp6(3),f.Q6J("ngIf",jt.hasValue(bt.previous)),f.xp6(1),f.Q6J("ngIf",!jt.hasValue(bt.previous)),f.xp6(2),f.Q6J("ngIf",jt.hasValue(bt.new)),f.xp6(1),f.Q6J("ngIf",!jt.hasValue(bt.new))}}function rt(it,Gt){if(1&it&&(f.TgZ(0,"div",51)(1,"h4",52),f._uU(2),f.ALo(3,"beautifyPropertyName"),f.qZA(),f.TgZ(4,"table",39)(5,"thead")(6,"tr")(7,"th"),f._uU(8),f.ALo(9,"translate"),f.qZA(),f.TgZ(10,"th",40),f._uU(11),f.ALo(12,"translate"),f.qZA(),f.TgZ(13,"th",40),f._uU(14),f.ALo(15,"translate"),f.qZA()()(),f.TgZ(16,"tbody"),f.YNc(17,ct,10,7,"tr",41),f.qZA()()()),2&it){const bt=Gt.$implicit;f.xp6(2),f.hij(" ",f.lcZ(3,5,bt.identifier)," "),f.xp6(6),f.Oqu(f.lcZ(9,7,"Clients.Import.Wizard.Summary.Conflicts.Property")),f.xp6(3),f.Oqu(f.lcZ(12,9,"Clients.Import.Wizard.Summary.Conflicts.OldValue")),f.xp6(3),f.Oqu(f.lcZ(15,11,"Clients.Import.Wizard.Summary.Conflicts.NewValue")),f.xp6(3),f.Q6J("ngForOf",null==bt?null:bt.conflicts)}}function ft(it,Gt){if(1&it&&(f.TgZ(0,"div",53)(1,"h3",54),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.YNc(4,rt,18,13,"div",50),f.qZA()),2&it){const bt=f.oxw();f.xp6(2),f.hij(" ",f.lcZ(3,2,"Clients.Import.Wizard.Summary.Conflicts.ConflictedScopes")," "),f.xp6(2),f.Q6J("ngForOf",bt.scopeConflicts)}}function qt(it,Gt){if(1&it&&(f.TgZ(0,"td"),f._uU(1),f.ALo(2,"beautifyPropertyName"),f.qZA()),2&it){const bt=f.oxw().$implicit;f.xp6(1),f.Oqu(f.lcZ(2,1,bt.propertyName))}}function en(it,Gt){if(1&it&&(f.TgZ(0,"td"),f._uU(1),f.qZA()),2&it){const bt=f.oxw().$implicit;f.xp6(1),f.Oqu(bt.propertyName)}}function xt(it,Gt){if(1&it&&(f.TgZ(0,"dl",60)(1,"dt",61),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.TgZ(4,"dd",62),f._uU(5),f.qZA(),f.TgZ(6,"dt",61),f._uU(7),f.ALo(8,"translate"),f.qZA(),f.TgZ(9,"dd",62),f._uU(10),f.qZA(),f.TgZ(11,"dt",61),f._uU(12),f.ALo(13,"translate"),f.qZA(),f.TgZ(14,"dd",46),f._uU(15),f.qZA()()),2&it){const bt=f.oxw(2).$implicit;f.xp6(2),f.hij("",f.lcZ(3,6,"Common.URL"),":"),f.xp6(3),f.Oqu(bt.previous.location),f.xp6(2),f.hij("",f.lcZ(8,8,"Clients.Saml.BindingType"),":"),f.xp6(3),f.Oqu(bt.previous.binding),f.xp6(2),f.hij("",f.lcZ(13,10,"Clients.Saml.Index"),":"),f.xp6(3),f.Oqu(bt.previous.index)}}function Dt(it,Gt){1&it&&(f.TgZ(0,"dl")(1,"i",47),f._uU(2),f.ALo(3,"translate"),f.qZA()()),2&it&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Clients.Import.Wizard.Summary.Conflicts.NoValue")," "))}function X(it,Gt){if(1&it&&(f.TgZ(0,"dl",60)(1,"dt",61),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.TgZ(4,"dd",63),f._uU(5),f.qZA(),f.TgZ(6,"dt",61),f._uU(7),f.ALo(8,"translate"),f.qZA(),f.TgZ(9,"dd",63),f._uU(10),f.qZA(),f.TgZ(11,"dt",61),f._uU(12),f.ALo(13,"translate"),f.qZA(),f.TgZ(14,"dd",48),f._uU(15),f.qZA()()),2&it){const bt=f.oxw(2).$implicit;f.xp6(2),f.hij("",f.lcZ(3,6,"Common.URL"),":"),f.xp6(3),f.Oqu(bt.new.location),f.xp6(2),f.hij("",f.lcZ(8,8,"Clients.Saml.BindingType"),":"),f.xp6(3),f.Oqu(bt.new.binding),f.xp6(2),f.hij("",f.lcZ(13,10,"Clients.Saml.Index"),":"),f.xp6(3),f.Oqu(bt.new.index)}}function j(it,Gt){1&it&&(f.TgZ(0,"dl")(1,"i",47),f._uU(2),f.ALo(3,"translate"),f.qZA()()),2&it&&(f.xp6(2),f.hij(" ",f.lcZ(3,1,"Clients.Import.Wizard.Summary.Conflicts.Deleted")," "))}function ae(it,Gt){if(1&it&&(f.ynx(0),f.TgZ(1,"td"),f.YNc(2,xt,16,12,"dl",59),f.YNc(3,Dt,4,3,"dl",56),f.qZA(),f.TgZ(4,"td"),f.YNc(5,X,16,12,"dl",59),f.YNc(6,j,4,3,"dl",56),f.qZA(),f.BQk()),2&it){const bt=f.oxw().$implicit,jt=f.oxw(3);f.xp6(2),f.Q6J("ngIf",jt.hasValue(bt.previous)),f.xp6(1),f.Q6J("ngIf",!jt.hasValue(bt.previous)),f.xp6(2),f.Q6J("ngIf",jt.hasValue(bt.new)),f.xp6(1),f.Q6J("ngIf",!jt.hasValue(bt.new))}}function Be(it,Gt){if(1&it&&(f.TgZ(0,"span",46),f._uU(1),f.qZA()),2&it){const bt=f.oxw(2).$implicit;f.xp6(1),f.hij(" ",bt.previous," ")}}function je(it,Gt){1&it&&(f.TgZ(0,"i",47),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&it&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Clients.Import.Wizard.Summary.Conflicts.NoValue")," "))}function ke(it,Gt){if(1&it&&(f.TgZ(0,"span",48),f._uU(1),f.qZA()),2&it){const bt=f.oxw(2).$implicit;f.xp6(1),f.hij(" ",bt.new," ")}}function Re(it,Gt){1&it&&(f.TgZ(0,"i",47),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&it&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Clients.Import.Wizard.Summary.Conflicts.Deleted")," "))}function Se(it,Gt){if(1&it&&(f.TgZ(0,"td",64),f.YNc(1,Be,2,1,"span",43),f.YNc(2,je,3,3,"i",44),f.qZA(),f.TgZ(3,"td",64),f.YNc(4,ke,2,1,"span",45),f.YNc(5,Re,3,3,"i",44),f.qZA()),2&it){const bt=f.oxw().$implicit,jt=f.oxw(3);f.xp6(1),f.Q6J("ngIf",jt.hasValue(bt.previous)),f.xp6(1),f.Q6J("ngIf",!jt.hasValue(bt.previous)),f.xp6(2),f.Q6J("ngIf",jt.hasValue(bt.new)),f.xp6(1),f.Q6J("ngIf",!jt.hasValue(bt.new))}}function Qe(it,Gt){if(1&it){const bt=f.EpF();f.TgZ(0,"tr",42),f.NdJ("change",function(){f.CHM(bt);const ln=f.oxw(3);return f.KtG(ln.setupTableHeadings())}),f.YNc(1,qt,3,3,"td",56),f.YNc(2,en,2,1,"td",56),f.YNc(3,ae,7,4,"ng-container",57),f.YNc(4,Se,6,4,"ng-template",null,58,f.W1O),f.qZA()}if(2&it){const bt=f.MAs(5),jt=f.oxw().$implicit,ln=f.oxw(2);f.xp6(1),f.Q6J("ngIf",jt.identifier!=ln.summaryConflictsConstants.ClaimMappingsKey),f.xp6(1),f.Q6J("ngIf",jt.identifier==ln.summaryConflictsConstants.ClaimMappingsKey),f.xp6(1),f.Q6J("ngIf",jt.identifier==ln.summaryConflictsConstants.sloProperty||jt.identifier==ln.summaryConflictsConstants.acsProperty)("ngIfElse",bt)}}function Xe(it,Gt){if(1&it&&(f.TgZ(0,"div",51)(1,"h4",52),f._uU(2),f.ALo(3,"beautifyPropertyName"),f.qZA(),f.TgZ(4,"table",39)(5,"thead")(6,"tr")(7,"th"),f._uU(8),f.ALo(9,"translate"),f.qZA(),f.TgZ(10,"th",40),f._uU(11),f.ALo(12,"translate"),f.qZA(),f.TgZ(13,"th",40),f._uU(14),f.ALo(15,"translate"),f.qZA()()(),f.TgZ(16,"tbody"),f.YNc(17,Qe,6,4,"tr",41),f.qZA()()()),2&it){const bt=Gt.$implicit;f.xp6(2),f.hij(" ",f.lcZ(3,5,bt.identifier)," "),f.xp6(6),f.Oqu(f.lcZ(9,7,"Clients.Import.Wizard.Summary.Conflicts.Property")),f.xp6(3),f.Oqu(f.lcZ(12,9,"Clients.Import.Wizard.Summary.Conflicts.OldValue")),f.xp6(3),f.Oqu(f.lcZ(15,11,"Clients.Import.Wizard.Summary.Conflicts.NewValue")),f.xp6(3),f.Q6J("ngForOf",null==bt?null:bt.conflicts)}}function Ke(it,Gt){if(1&it&&(f.TgZ(0,"div",55)(1,"h3",54),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.YNc(4,Xe,18,13,"div",50),f.qZA()),2&it){const bt=f.oxw();f.xp6(2),f.hij(" ",f.lcZ(3,2,"Clients.Import.Wizard.Summary.Conflicts.ConflictedServiceProvider")," "),f.xp6(2),f.Q6J("ngForOf",bt.serviceProviderConflicts)}}function Je(it,Gt){if(1&it&&(f.TgZ(0,"td"),f._uU(1),f.ALo(2,"beautifyPropertyName"),f.qZA()),2&it){const bt=f.oxw().$implicit;f.xp6(1),f.Oqu(f.lcZ(2,1,bt.propertyName))}}function Ct(it,Gt){if(1&it&&(f.TgZ(0,"td"),f._uU(1),f.qZA()),2&it){const bt=f.oxw().$implicit;f.xp6(1),f.Oqu(bt.propertyName)}}function ht(it,Gt){if(1&it&&(f.TgZ(0,"span",46),f._uU(1),f.qZA()),2&it){const bt=f.oxw().$implicit;f.xp6(1),f.hij(" ",bt.previous," ")}}function Ze(it,Gt){1&it&&(f.TgZ(0,"i",47),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&it&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Clients.Import.Wizard.Summary.Conflicts.NoValue")," "))}function oe(it,Gt){if(1&it&&(f.TgZ(0,"span",48),f._uU(1),f.qZA()),2&it){const bt=f.oxw().$implicit;f.xp6(1),f.hij(" ",bt.new," ")}}function ie(it,Gt){1&it&&(f.TgZ(0,"i",47),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&it&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"Clients.Import.Wizard.Summary.Conflicts.Deleted")," "))}function L(it,Gt){if(1&it){const bt=f.EpF();f.TgZ(0,"tr",42),f.NdJ("change",function(){f.CHM(bt);const ln=f.oxw(3);return f.KtG(ln.setupTableHeadings())}),f.YNc(1,Je,3,3,"td",56),f.YNc(2,Ct,2,1,"td",56),f.TgZ(3,"td",64),f.YNc(4,ht,2,1,"span",43),f.YNc(5,Ze,3,3,"i",44),f.qZA(),f.TgZ(6,"td",64),f.YNc(7,oe,2,1,"span",45),f.YNc(8,ie,3,3,"i",44),f.qZA()()}if(2&it){const bt=Gt.$implicit,jt=f.oxw().$implicit,ln=f.oxw(2);f.xp6(1),f.Q6J("ngIf",jt.identifier!=ln.summaryConflictsConstants.ClaimMappingsIdentifier),f.xp6(1),f.Q6J("ngIf",jt.identifier==ln.summaryConflictsConstants.ClaimMappingsIdentifier),f.xp6(2),f.Q6J("ngIf",ln.hasValue(bt.previous)),f.xp6(1),f.Q6J("ngIf",!ln.hasValue(bt.previous)),f.xp6(2),f.Q6J("ngIf",ln.hasValue(bt.new)),f.xp6(1),f.Q6J("ngIf",!ln.hasValue(bt.new))}}function ne(it,Gt){if(1&it&&(f.TgZ(0,"div",51)(1,"h4",52),f._uU(2),f.ALo(3,"beautifyPropertyName"),f.qZA(),f.TgZ(4,"table",39)(5,"thead")(6,"tr")(7,"th"),f._uU(8),f.ALo(9,"translate"),f.qZA(),f.TgZ(10,"th",40),f._uU(11),f.ALo(12,"translate"),f.qZA(),f.TgZ(13,"th",40),f._uU(14),f.ALo(15,"translate"),f.qZA()()(),f.TgZ(16,"tbody"),f.YNc(17,L,9,6,"tr",41),f.qZA()()()),2&it){const bt=Gt.$implicit;f.xp6(2),f.hij(" ",f.lcZ(3,5,bt.identifier)," "),f.xp6(6),f.Oqu(f.lcZ(9,7,"Clients.Import.Wizard.Summary.Conflicts.Property")),f.xp6(3),f.Oqu(f.lcZ(12,9,"Clients.Import.Wizard.Summary.Conflicts.OldValue")),f.xp6(3),f.Oqu(f.lcZ(15,11,"Clients.Import.Wizard.Summary.Conflicts.NewValue")),f.xp6(3),f.Q6J("ngForOf",null==bt?null:bt.conflicts)}}function Ne(it,Gt){if(1&it&&(f.TgZ(0,"div",65)(1,"h3",54),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.YNc(4,ne,18,13,"div",50),f.qZA()),2&it){const bt=f.oxw();f.xp6(2),f.hij(" ",f.lcZ(3,2,"Clients.Import.Wizard.Summary.Conflicts.ConflictedRelyingParty")," "),f.xp6(2),f.Q6J("ngForOf",bt.relyingPartyConflicts)}}let ze=(()=>{class it extends y.n{constructor(bt,jt,ln){super(),this.importWizardService=bt,this.translate=jt,this.localizeRouterService=ln,this.clientKeyValueConflicts=[],this.scopeConflicts=[],this.serviceProviderConflicts=[],this.relyingPartyConflicts=[],this.summaryConflictsConstants=w}set data(bt){const jt=JSON.parse(JSON.stringify(bt));this.resource=jt,this.summaryDisplayType=S.m.getSummaryDisplayType(jt.resourceType),this.setupLinkedClients(jt),this.resource.resourceType===n.JR.ClaimType&&(this.fieldConflicts=this.resource.conflicts.find(ln=>ln.identifier===w.ClaimTypes)),this.resource.resourceType===n.JR.IdentityResource&&(this.fieldConflicts=this.resource.conflicts.find(ln=>ln.identifier===w.IdentityResources)),this.resource.resourceType===n.JR.Client&&(this.initClient(),this.resource.displayType===w.SamlDisplayType?this.initServiceProvider():this.resource.displayType===w.WsFedDisplayType&&this.initRelyingParty()),this.resource.resourceType===n.JR.ProtectedResource&&(this.fieldConflicts=this.resource.conflicts.find(ln=>ln.identifier===w.ProtectedResources),this.initScopeConflicts())}accept(){this.importWizardController.stepModified=!0,this.summaryDisplayType===S.m.client&&this.importWizardService.selectResource(this.resource),this.back()}decline(){this.importWizardController.stepModified=!0,this.openModal(e.K.summaryConflictsConfirmation,this.resource)}setupLinkedClients(bt){null!==bt.dependantClients&&0!==bt.dependantClients.length?(this.displayLinkedClients=!0,this.linkedNewClients=this.sortDependentClients(bt.dependantClients.filter(jt=>jt.state===n.CP.Importing)),this.linkedExistingClients=this.sortDependentClients(bt.dependantClients.filter(jt=>jt.state===n.CP.Existing)),this.displayLinkedClientsDropdown=this.linkedExistingClients.length>0&&this.linkedExistingClients.length<8&&this.linkedNewClients.length<8):this.displayLinkedClients=!1}sortDependentClients(bt){return bt.sort((jt,ln)=>jt.displayName.localeCompare(ln.displayName))}buildHref(bt){return this.localizeRouterService.translateRoute(`/clients/${bt}`)}toggleDisplayLinkedClientsDropdown(){this.displayLinkedClientsDropdown=!this.displayLinkedClientsDropdown}hasValue(bt){return!(null==bt||(0,h.Ew)(bt.toString()))}initClient(){const bt=this.resource.conflicts.find(kn=>kn.identifier===w.Client),jt=this.resource.conflicts.find(kn=>kn.identifier===w.ClaimsProperty),ln=this.resource.conflicts.find(kn=>kn.identifier===w.PropertiesProperty);bt&&(this.fieldConflicts=bt),jt&&this.clientKeyValueConflicts.push(jt),ln&&this.clientKeyValueConflicts.push(ln)}initRelyingParty(){const bt=this.resource.conflicts.find(ln=>ln.identifier===w.RelyingPartyProperty),jt=this.resource.conflicts.find(ln=>ln.identifier===w.ClaimMappingsKey);bt&&this.relyingPartyConflicts.push(bt),jt&&this.relyingPartyConflicts.push(jt)}initServiceProvider(){const bt=this.resource.conflicts.find(Tn=>Tn.identifier===w.ServiceProviderProperty),jt=this.resource.conflicts.find(Tn=>Tn.identifier===w.ClaimMappingsKey),ln=this.resource.conflicts.find(Tn=>Tn.identifier===w.acsProperty),kn=this.resource.conflicts.find(Tn=>Tn.identifier===w.sloProperty);bt&&this.serviceProviderConflicts.push(bt),jt&&this.serviceProviderConflicts.push(jt),ln&&this.serviceProviderConflicts.push(ln),kn&&this.serviceProviderConflicts.push(kn)}initScopeConflicts(){const bt=this.resource.conflicts.filter(jt=>jt.identifier!==w.ProtectedResources);void 0!==bt&&(bt.forEach(jt=>{const ln=jt.conflicts.find(kn=>kn.propertyName===w.UserClaimsProperty);ln&&(ln.new=ln.new.join(", "),ln.previous=ln.previous.join(", "))}),this.scopeConflicts=bt)}}return it.\u0275fac=function(bt){return new(bt||it)(f.Y36(x.U),f.Y36(b.sK),f.Y36(g.An))},it.\u0275cmp=f.Xpm({type:it,selectors:[["app-import-summary-conflicts"]],viewQuery:function(bt,jt){if(1&bt&&f.Gf(k,7),2&bt){let ln;f.iGM(ln=f.CRH())&&(jt.importSummaryConflictsModal=ln.first)}},features:[f.qOj],decls:30,vars:22,consts:[[1,"modal-body"],[1,"tw-mb-4"],[1,"tw-font-semibold","tw-mr-2"],[1,"cms"],["class","tw-alert tw-mb-6",3,"tw-alert-warning",4,"ngIf"],["class","tw-mb-6 last:tw-mb-0",4,"ngIf"],["id","clientKeyValueConflictsSection",4,"ngIf"],["id","scopeConflictsSection",4,"ngIf"],["id","serviceProviderConflictsSection",4,"ngIf"],["id","relyingPartyConflictsSection",4,"ngIf"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],[1,"tw-btn-success","tw-mr-3",3,"click"],[1,"tw-btn-danger",3,"click"],[1,"tw-btn-link","tw--mr-4",3,"click"],[1,"tw-alert","tw-mb-6"],[1,"tw-w-full"],[1,"tw-flex","tw-items-center","tw-font-semibold","tw-text-left","tw-w-full",3,"click"],["aria-hidden","true",1,"tw-ml-auto"],["class","fas fa-caret-up fa-fw",4,"ngIf"],["class","fas fa-caret-down fa-fw",4,"ngIf"],["class","tw-pt-2 tw-pb-1",4,"ngIf"],[1,"fas","fa-caret-up","fa-fw"],[1,"fas","fa-caret-down","fa-fw"],[1,"tw-pt-2","tw-pb-1"],["class","tw-flex tw-mb-1 last:tw-mb-0",4,"ngIf"],["id","existingClients","class","tw-flex tw-text-red-500",4,"ngIf"],[1,"tw-flex","tw-mb-1","last:tw-mb-0"],[1,"tw-shrink-0","tw-mr-2","tw-font-semibold","tw-w-20"],[1,"tw-flex","tw-flex-wrap"],["class","tw-inline-flex tw-mr-2",4,"ngFor","ngForOf"],[1,"tw-inline-flex","tw-mr-2"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],["id","existingClients",1,"tw-flex","tw-text-red-500"],["target","_blank",1,"tw-text-red-500","tw-font-normal","tw-underline","hover:tw-text-red-500","hover:tw-no-underline",3,"href"],[1,"tw-mb-6","last:tw-mb-0"],[1,"datatable"],[1,"md:tw-w-1/3","lg:tw-w-2/5"],[3,"change",4,"ngFor","ngForOf"],[3,"change"],["class","tw-text-red-500",4,"ngIf"],["class","tw-text-grey-600",4,"ngIf"],["class","tw-text-green-500",4,"ngIf"],[1,"tw-text-red-500"],[1,"tw-text-grey-600"],[1,"tw-text-green-500"],["id","clientKeyValueConflictsSection"],["class","tw-mb-5 last:tw-mb-0",4,"ngFor","ngForOf"],[1,"tw-mb-5","last:tw-mb-0"],[1,"tw-font-semibold","tw-text-sm","tw-mb-4","tw-px-3"],["id","scopeConflictsSection"],[1,"tw-border-b","tw-border-grey-200","tw-mb-4","tw-pb-2","tw-font-semibold","md:tw-flex","md:tw-items-center","ng-star-inserted"],["id","serviceProviderConflictsSection"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["normalConflicts",""],["class","tw-text-grey-700",4,"ngIf"],[1,"tw-text-grey-700"],[1,"tw-font-normal"],[1,"tw-text-red-500","tw-mb-1"],[1,"tw-text-green-500","tw-mb-1"],[1,"tw-max-w-0","wrap-words"],["id","relyingPartyConflictsSection"]],template:function(bt,jt){1&bt&&(f.TgZ(0,"div",0)(1,"h2",1)(2,"span",2),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"span"),f._uU(6),f.qZA()(),f.TgZ(7,"div",3)(8,"p"),f._uU(9),f.ALo(10,"translate"),f.qZA()(),f.YNc(11,fe,10,8,"div",4),f.YNc(12,$,15,10,"div",5),f.YNc(13,Ge,2,1,"div",6),f.YNc(14,ft,5,4,"div",7),f.YNc(15,Ke,5,4,"div",8),f.YNc(16,Ne,5,4,"div",9),f.qZA(),f._UZ(17,"div",10),f.TgZ(18,"div",11)(19,"div",12)(20,"div",13)(21,"button",14),f.NdJ("click",function(){return jt.accept()}),f._uU(22),f.ALo(23,"translate"),f.qZA(),f.TgZ(24,"button",15),f.NdJ("click",function(){return jt.decline()}),f._uU(25),f.ALo(26,"translate"),f.qZA()(),f.TgZ(27,"button",16),f.NdJ("click",function(){return jt.back()}),f._uU(28),f.ALo(29,"translate"),f.qZA()()()),2&bt&&(f.xp6(3),f.hij("",f.lcZ(4,12,"Clients.Import.Wizard.Summary.Identifier."+jt.summaryDisplayType),":"),f.xp6(3),f.Oqu(null==jt.resource?null:jt.resource.displayName),f.xp6(3),f.Oqu(f.lcZ(10,14,"Clients.Import.Wizard.Summary.Conflicts.ConfirmationText."+jt.summaryDisplayType)),f.xp6(2),f.Q6J("ngIf",jt.displayLinkedClients),f.xp6(1),f.Q6J("ngIf",jt.fieldConflicts&&jt.fieldConflicts.conflicts.length>0),f.xp6(1),f.Q6J("ngIf",jt.clientKeyValueConflicts.length>0),f.xp6(1),f.Q6J("ngIf",jt.scopeConflicts.length>0),f.xp6(1),f.Q6J("ngIf",jt.serviceProviderConflicts.length>0),f.xp6(1),f.Q6J("ngIf",jt.relyingPartyConflicts.length>0),f.xp6(6),f.Oqu(f.lcZ(23,16,"Clients.Import.Wizard.Summary.Conflicts.Accept")),f.xp6(3),f.Oqu(f.lcZ(26,18,"Clients.Import.Wizard.Summary.Conflicts.Decline")),f.xp6(3),f.Oqu(f.lcZ(29,20,"Clients.Import.Wizard.Summary.Conflicts.Cancel")))},dependencies:[N.sg,N.O5,b.X$,R],encapsulation:2}),it})()},6126:(nt,_e,m)=>{"use strict";m.d(_e,{j:()=>G});var n=m(3111),e=m(3334),h=m(5669),S=m(9506),y=m(4650),w=m(7481),f=m(9383),x=m(6895),b=m(4006);function g(E,te){if(1&E){const $=y.EpF();y.TgZ(0,"th",21)(1,"label",22)(2,"input",23),y.NdJ("ngModelChange",function(me){y.CHM($);const we=y.oxw();return y.KtG(we.allSelected=me)})("change",function(){y.CHM($);const me=y.oxw();return y.KtG(me.toggleAllSelected())}),y.qZA()()()}if(2&E){const $=y.oxw();y.xp6(2),y.Q6J("ngModel",$.allSelected)}}function N(E,te){if(1&E&&(y.TgZ(0,"th",24),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&E){const $=y.oxw();y.xp6(1),y.Oqu(y.lcZ(2,1,"Clients.Import.Wizard.Summary.Identifier."+$.summaryDisplayType))}}function R(E,te){1&E&&(y.TgZ(0,"th",25),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&E&&(y.xp6(1),y.hij("",y.lcZ(2,1,"Nav.Clients")," *"))}function k(E,te){if(1&E){const $=y.EpF();y.TgZ(0,"label",22)(1,"input",23),y.NdJ("ngModelChange",function(me){y.CHM($);const we=y.oxw(2).$implicit;return y.KtG(we.selected=me)})("change",function(){y.CHM($);const me=y.oxw(3);return y.KtG(me.selectionChanged())}),y.ALo(2,"translate"),y.qZA()()}if(2&E){const $=y.oxw(2).$implicit;y.xp6(1),y.Q6J("ngModel",$.selected),y.uIk("aria-label",y.lcZ(2,2,"Common.Add"))}}function O(E,te){if(1&E&&(y.TgZ(0,"td",21),y.YNc(1,k,3,4,"label",32),y.qZA()),2&E){const $=y.oxw().$implicit;y.xp6(1),y.Q6J("ngIf",$.isSelectable)}}function P(E,te){if(1&E){const $=y.EpF();y.TgZ(0,"td",33),y.NdJ("click",function(){y.CHM($);const me=y.oxw().$implicit,we=y.oxw();return y.KtG(we.toggle(me))}),y._uU(1),y.qZA()}if(2&E){const $=y.oxw().$implicit;y.Q6J("title",$.identifier),y.xp6(1),y.hij(" ",$.identifier," ")}}function U(E,te){if(1&E&&(y.TgZ(0,"td",34),y._uU(1),y.qZA()),2&E){const $=y.oxw().$implicit,ue=y.oxw();y.xp6(1),y.hij(" ",ue.displayLinkedClients($)," ")}}function W(E,te){1&E&&y._UZ(0,"span",40)}function M(E,te){if(1&E){const $=y.EpF();y.ynx(0),y.TgZ(1,"td",35),y.NdJ("click",function(me){y.CHM($);const we=y.oxw().$implicit,ye=y.oxw();return y.KtG(ye.viewConflicts(me,we))}),y.YNc(2,W,1,0,"span",36),y.qZA(),y.TgZ(3,"td",37),y.NdJ("click",function(me){y.CHM($);const we=y.oxw().$implicit,ye=y.oxw();return y.KtG(ye.viewConflicts(me,we))}),y.TgZ(4,"button",38),y.NdJ("click",function(me){y.CHM($);const we=y.oxw().$implicit,ye=y.oxw();return y.KtG(ye.viewConflicts(me,we))}),y.TgZ(5,"span",39),y._uU(6),y.qZA()()(),y.BQk()}if(2&E){const $=y.oxw().$implicit,ue=y.oxw();y.xp6(2),y.Q6J("ngIf",$.resourceState==ue.resourceStates.Conflicted),y.xp6(4),y.Oqu(ue.getConflicts($))}}function B(E,te){1&E&&y._UZ(0,"span",45)}function V(E,te){1&E&&y._UZ(0,"span",46)}function Q(E,te){1&E&&y._UZ(0,"span",40)}function Y(E,te){if(1&E){const $=y.EpF();y.ynx(0),y.TgZ(1,"td",41),y.NdJ("click",function(){y.CHM($);const me=y.oxw().$implicit,we=y.oxw();return y.KtG(we.toggle(me))}),y.YNc(2,B,1,0,"span",42),y.YNc(3,V,1,0,"span",43),y.YNc(4,Q,1,0,"span",36),y.qZA(),y.TgZ(5,"td",44),y.NdJ("click",function(){y.CHM($);const me=y.oxw().$implicit,we=y.oxw();return y.KtG(we.toggle(me))}),y.TgZ(6,"span",39),y._uU(7),y.qZA()(),y.BQk()}if(2&E){const $=y.oxw().$implicit,ue=y.oxw();y.xp6(2),y.Q6J("ngIf",$.resourceState==ue.resourceStates.New),y.xp6(1),y.Q6J("ngIf",$.resourceState==ue.resourceStates.Duplicate),y.xp6(1),y.Q6J("ngIf",$.conflictedByDependencies),y.xp6(2),y.ekj("tw-italic",!$.isSelectable),y.xp6(1),y.hij(" ",ue.getResourceState($)," ")}}const fe=function(E){return{"inactive disabled tw-opacity-50 tw-pointer-events-none":E}};function J(E,te){if(1&E){const $=y.EpF();y.TgZ(0,"tr",26),y.YNc(1,O,2,1,"td",3),y.TgZ(2,"td",27),y.NdJ("click",function(){const we=y.CHM($).$implicit,ye=y.oxw();return y.KtG(ye.toggle(we))}),y.TgZ(3,"b"),y._uU(4),y.qZA()(),y.YNc(5,P,2,2,"td",28),y.TgZ(6,"td",29),y.NdJ("click",function(){const we=y.CHM($).$implicit,ye=y.oxw();return y.KtG(ye.toggle(we))}),y._uU(7),y.ALo(8,"translate"),y.qZA(),y.YNc(9,U,2,1,"td",30),y.YNc(10,M,7,2,"ng-container",31),y.YNc(11,Y,8,6,"ng-container",31),y.qZA()}if(2&E){const $=te.$implicit,ue=y.oxw();y.Q6J("ngClass",y.VKq(11,fe,$.resourceState===ue.resourceStates.Duplicate)),y.xp6(1),y.Q6J("ngIf",ue.showSelectAll()),y.xp6(1),y.Q6J("title",$.displayName),y.xp6(2),y.Oqu($.displayName),y.xp6(1),y.Q6J("ngIf","ClaimType"!==ue.summaryDisplayType),y.xp6(2),y.hij(" ",y.lcZ(8,9,"Clients.Import.Wizard.Summary.ResourceTypes."+$.displayType)," "),y.xp6(2),y.Q6J("ngIf","Client"!==ue.summaryDisplayType),y.xp6(1),y.Q6J("ngIf",$.resourceState===ue.resourceStates.Conflicted&&!$.conflictedByDependencies),y.xp6(1),y.Q6J("ngIf",$.resourceState!==ue.resourceStates.Conflicted||$.conflictedByDependencies)}}function ee(E,te){1&E&&(y.TgZ(0,"p",47),y._uU(1),y.ALo(2,"translate"),y.qZA()),2&E&&(y.xp6(1),y.hij(" * ",y.lcZ(2,1,"Clients.Import.Wizard.Summary.ClientsHelp")," "))}let G=(()=>{class E extends S.n{constructor($,ue){super(),this.importWizardService=$,this.translate=ue,this.resourceStates=n.vZ,this.nextImport=!1}get data(){return this._importResourceType}set data($){this._importResourceType=$}ngOnInit(){this.summaryDisplayType=h.m.getSummaryDisplayType(this.data[0]),this.importWizardService.cache.subscribe($=>{$.every(me=>me.resourceType===n.JR.Client)&&(this.nextImport=!0);let ue=$.filter(me=>this.data.includes(me.resourceType));if(!this.data.includes(n.JR.Client)){const me=$.filter(we=>we.resourceType===n.JR.Client&&!0===we.selected).map(we=>we.identifier);ue=ue.filter(we=>we.dependantClients.map(ye=>ye.identifier).some(ye=>me.includes(ye)))}if(1===this.data.length&&this.data.includes(n.JR.Client)){const me=ue.filter(ye=>ye.resourceState===n.vZ.Duplicate),we=$.filter(ye=>ye.resourceType!==n.JR.Client&&ye.dependantClients.length>0&&ye.resourceState===n.vZ.Conflicted);me.forEach(ye=>{we.filter(De=>De.dependantClients.some(Ge=>Ge.identifier===ye.identifier)).length>0&&(ye.resourceState=n.vZ.Conflicted,ye.selected=!0,ye.conflictedByDependencies=!0)})}this.displayData=this.importWizardController.sortImportResources(ue),this.checkAllSelected()})}getNextText(){return this.translate.instant(this.nextImport?"Clients.Import.Import":"Common.Next")}canNext(){return this.displayData.some($=>$.selected)||this.displayData.every($=>!1===$.isSelectable)&&this.summaryDisplayType!==h.m.client}goNext(){this.importWizardController.stepModified?(this.summaryDisplayType===h.m.client&&this.importWizardService.updateSelectedClients(this.displayData.filter($=>$.selected)),this.next()):this.importWizardController.goToFinalSummary()}goBack(){this.importWizardController.stepModified=!0,this.back()}selectionChanged(){this.importWizardController.stepModified=!0,this.checkAllSelected()}checkAllSelected(){this.allSelected=this.displayData.filter($=>$.resourceState!==this.resourceStates.Duplicate).every($=>!0===$.selected)}toggle($){$.isSelectable&&($.selected=!$.selected,this.selectionChanged())}toggleAllSelected(){this.displayData.forEach($=>$.selected=this.allSelected),this.selectionChanged()}getConflicts($){let me,ue=0;return $.conflicts.forEach(we=>{ue+=we.conflicts.length}),me=this.translate.instant(1===ue?"Clients.Import.Wizard.Summary.Change":"Clients.Import.Wizard.Summary.Changes"),ue+" "+me}viewConflicts($,ue){$.stopPropagation(),this.openModal(e.K.summaryConflicts,ue)}showSelectAll(){return this.displayData.some($=>$.isSelectable)&&!this.displayData.every($=>$.resourceState===n.vZ.Duplicate)}displayLinkedClients($){return null===$.dependantClients||0===$.dependantClients.length?"-":$.dependantClients.length.toString()}getResourceState($){return $.conflictedByDependencies?this.translate.instant("Clients.Import.Wizard.Summary.DependencyConflicts"):this.resourceStates[$.resourceState]}}return E.\u0275fac=function($){return new($||E)(y.Y36(w.U),y.Y36(f.sK))},E.\u0275cmp=y.Xpm({type:E,selectors:[["app-import-summary"]],features:[y.qOj],decls:37,vars:27,consts:[[1,"modal-body"],[1,"cms"],[1,"datatable","hover"],["class","toggle tw-w-1",4,"ngIf"],[1,"md:tw-w-1/3","lg:tw-w-1/4"],["class","tw-hidden sm:tw-table-cell md:tw-w-1/3",4,"ngIf"],[1,"tw-hidden","lg:tw-table-cell"],["class","tw-hidden tw-text-center lg:tw-table-cell",4,"ngIf"],["aria-hidden","true",1,"tw-hidden","tw-w-1","xs:tw-table-cell"],[1,"tw-w-1"],[1,"sr-only"],["id","resourceTable"],[3,"ngClass",4,"ngFor","ngForOf"],["class","tw-text-xs tw-text-grey-700 tw-px-3 tw-py-2",4,"ngIf"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","nextBtn",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],["id","backBtn",1,"tw-btn",3,"click"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],[1,"toggle","tw-w-1"],[1,"toggle-label"],["type","checkbox",1,"tw-block","tw-cursor-pointer",3,"ngModel","ngModelChange","change"],[1,"tw-hidden","sm:tw-table-cell","md:tw-w-1/3"],[1,"tw-hidden","tw-text-center","lg:tw-table-cell"],[3,"ngClass"],[1,"tw-hidden","tw-max-w-0","tw-truncate","lg:tw-table-cell",3,"title","click"],["class","tw-hidden tw-max-w-1 tw-truncate sm:tw-table-cell",3,"title","click",4,"ngIf"],[1,"tw-hidden","lg:tw-table-cell","tw-truncate",3,"click"],["class","tw-text-center",4,"ngIf"],[4,"ngIf"],["class","toggle-label",4,"ngIf"],[1,"tw-hidden","tw-max-w-1","tw-truncate","sm:tw-table-cell",3,"title","click"],[1,"tw-text-center"],["aria-hidden","true","data-toggle","modal","data-target","#displayConflictsModal",1,"tw-hidden","tw-cursor-pointer","tw-text-right","xs:tw-table-cell",3,"click"],["class","fas fa-exclamation-triangle tw-text-orange-500 tw--mr-3",4,"ngIf"],["data-toggle","modal","data-target","#displayConflictsModal",1,"tw-cursor-pointer",3,"click"],["data-toggle","modal","data-target","#displayConflictsModal",1,"tw-font-semibold","tw-text-blue-500",3,"click"],[1,"tw-whitespace-nowrap"],[1,"fas","fa-exclamation-triangle","tw-text-orange-500","tw--mr-3"],["aria-hidden","true",1,"tw-hidden","tw-cursor-pointer","tw-text-right","xs:tw-table-cell",3,"click"],["class","fas fa-check tw-text-green-500 tw--mr-3",4,"ngIf"],["class","far fa-copy tw--mr-3",4,"ngIf"],[3,"click"],[1,"fas","fa-check","tw-text-green-500","tw--mr-3"],[1,"far","fa-copy","tw--mr-3"],[1,"tw-text-xs","tw-text-grey-700","tw-px-3","tw-py-2"]],template:function($,ue){1&$&&(y.TgZ(0,"div",0)(1,"div",1)(2,"p"),y._uU(3),y.ALo(4,"translate"),y.qZA()(),y.TgZ(5,"table",2)(6,"thead")(7,"tr"),y.YNc(8,g,3,1,"th",3),y.TgZ(9,"th",4),y._uU(10),y.ALo(11,"translate"),y.qZA(),y.YNc(12,N,3,3,"th",5),y.TgZ(13,"th",6),y._uU(14),y.ALo(15,"translate"),y.qZA(),y.YNc(16,R,3,3,"th",7),y._UZ(17,"td",8),y.TgZ(18,"th",9)(19,"span",10),y._uU(20),y.ALo(21,"translate"),y.qZA()()()(),y.TgZ(22,"tbody",11),y.YNc(23,J,12,13,"tr",12),y.qZA()(),y.YNc(24,ee,3,3,"p",13),y.qZA(),y._UZ(25,"div",14),y.TgZ(26,"div",15)(27,"div",16)(28,"div",17)(29,"button",18),y.NdJ("click",function(){return ue.goNext()}),y._uU(30),y.qZA(),y.TgZ(31,"button",19),y.NdJ("click",function(){return ue.goBack()}),y._uU(32),y.ALo(33,"translate"),y.qZA()(),y.TgZ(34,"button",20),y.NdJ("click",function(){return ue.cancel()}),y._uU(35),y.ALo(36,"translate"),y.qZA()()()),2&$&&(y.xp6(3),y.Oqu(y.lcZ(4,15,"Clients.Import.Wizard.Summary.Intro."+ue.summaryDisplayType)),y.xp6(2),y.ekj("selectable",ue.showSelectAll()),y.xp6(3),y.Q6J("ngIf",ue.showSelectAll()),y.xp6(2),y.Oqu(y.lcZ(11,17,"Clients.Import.Wizard.Summary.Name."+ue.summaryDisplayType)),y.xp6(2),y.Q6J("ngIf","ClaimType"!==ue.summaryDisplayType),y.xp6(2),y.Oqu(y.lcZ(15,19,"Clients.Import.Wizard.Summary.Type."+ue.summaryDisplayType)),y.xp6(2),y.Q6J("ngIf","Client"!==ue.summaryDisplayType),y.xp6(4),y.Oqu(y.lcZ(21,21,"Common.Status")),y.xp6(3),y.Q6J("ngForOf",ue.displayData),y.xp6(1),y.Q6J("ngIf","Client"!==ue.summaryDisplayType),y.xp6(5),y.Q6J("disabled",!ue.canNext()),y.xp6(1),y.Oqu(ue.getNextText()),y.xp6(2),y.Oqu(y.lcZ(33,23,"Common.Back")),y.xp6(3),y.Oqu(y.lcZ(36,25,"Common.Cancel")))},dependencies:[x.mk,x.sg,x.O5,b.Wl,b.JJ,b.On,f.X$],encapsulation:2}),E})()},9506:(nt,_e,m)=>{"use strict";m.d(_e,{n:()=>n});class n{constructor(){this.isWarningModal=!1,this.hideProgressBar=!1}get data(){return this._data}set data(h){this._data=h}next(){this.importWizardController.goToNextStep()}back(){this.importWizardController.goToPreviousStep()}cancel(){this.importWizardController.cancel()}openModal(h,S){this.importWizardController.insertAndOpenStep(h,S)}quit(){this.importWizardController.quit()}reset(){this.importWizardController.reset()}}},7305:(nt,_e,m)=>{"use strict";m.d(_e,{j:()=>e});var n=m(4650);let e=(()=>{class h{constructor(){this.assignedIdentityResources=[],this.assignedProtectedResources=[]}}return h.\u0275fac=function(y){return new(y||h)},h.\u0275prov=n.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},1503:(nt,_e,m)=>{"use strict";m.d(_e,{q:()=>g});var n=m(4650),e=m(4006),h=m(6895),S=m(9383),y=m(8853);function w(N,R){if(1&N&&(n.TgZ(0,"span",17),n._uU(1),n.qZA()),2&N){const k=R.$implicit;n.xp6(1),n.Oqu(k)}}function f(N,R){if(1&N){const k=n.EpF();n.TgZ(0,"tr",11)(1,"td",12),n.NdJ("click",function(){n.CHM(k);const P=n.oxw().$implicit,U=n.oxw();return n.KtG(U.jumpToTab(P.stepName))}),n.TgZ(2,"b"),n._uU(3),n.ALo(4,"translate"),n.ALo(5,"keyToString"),n.qZA()(),n.TgZ(6,"td",13),n.NdJ("click",function(){n.CHM(k);const P=n.oxw().$implicit,U=n.oxw();return n.KtG(U.jumpToTab(P.stepName))}),n.YNc(7,w,2,1,"span",14),n.qZA(),n.TgZ(8,"td",12),n.NdJ("click",function(){n.CHM(k);const P=n.oxw().$implicit,U=n.oxw();return n.KtG(U.jumpToTab(P.stepName))}),n.TgZ(9,"button",15),n.NdJ("click",function(){n.CHM(k);const P=n.oxw().$implicit,U=n.oxw();return n.KtG(U.jumpToTab(P.stepName))}),n._UZ(10,"span",16),n.TgZ(11,"span",2),n._uU(12),n.ALo(13,"translate"),n.qZA()()()()}if(2&N){const k=R.$implicit;n.xp6(3),n.Oqu(n.lcZ(4,3,n.lcZ(5,5,k.key))),n.xp6(4),n.Q6J("ngForOf",k.value),n.xp6(5),n.Oqu(n.lcZ(13,7,"Common.Edit"))}}function x(N,R){if(1&N&&(n.ynx(0),n.YNc(1,f,14,9,"tr",10),n.ALo(2,"keyvalue"),n.BQk()),2&N){const k=R.$implicit;n.xp6(1),n.Q6J("ngForOf",n.lcZ(2,1,k.stepData))}}function b(N,R){if(1&N&&(n.TgZ(0,"form",18)(1,"div",19),n._UZ(2,"input",20),n.TgZ(3,"label",21),n._uU(4),n.ALo(5,"translate"),n.qZA()()()),2&N){const k=n.oxw();n.Q6J("formGroup",k.summaryForm),n.xp6(1),n.Q6J("ngClass","last:tw-border-0 last:tw-mb-0 last:tw-pb-0"),n.xp6(3),n.Oqu(n.lcZ(5,3,"Common.Enabled"))}}let g=(()=>{class N{constructor(k){this.fb=k,this.askIfEnabled=!1,this.emitNavigate=new n.vpe}ngOnInit(){this.summaryForm=this.fb.group({enabled:[!0]})}jumpToTab(k){this.emitNavigate.emit(k)}isEnabled(){return this.summaryForm.get("enabled").value}}return N.\u0275fac=function(k){return new(k||N)(n.Y36(e.QS))},N.\u0275cmp=n.Xpm({type:N,selectors:[["app-wizard-summary"]],inputs:{askIfEnabled:"askIfEnabled"},decls:30,vars:20,consts:[[1,"cms","tw-mb-6"],["id","reviewTable",1,"datatable","selectable","hover"],[1,"sr-only"],[1,"disabled","inactive"],[1,"sm:tw-w-40"],[1,"tw-hidden","tw-max-w-0","tw-truncate","sm:tw-table-cell"],[1,"tw-italic"],[1,"tw-w-1"],[4,"ngFor","ngForOf"],[3,"formGroup",4,"ngIf"],["id","summaryItemRow","class","group",4,"ngFor","ngForOf"],["id","summaryItemRow",1,"group"],[3,"click"],[1,"tw-hidden","sm:tw-table-cell","tw-max-w-0","tw-wrap",3,"click"],["class","tw-block",4,"ngFor","ngForOf"],[1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500",3,"click"],["aria-hidden","true",1,"fad","fa-pencil"],[1,"tw-block"],[3,"formGroup"],[1,"tw-form-row-border","tw-mt-6",3,"ngClass"],["id","enabledCheck","type","checkbox","value","false","formControlName","enabled",1,"tw-h-full","tw-ml-2","tw-mr-6"],["for","enabledCheck",1,"tw-form-label-inline","align-middle"]],template:function(k,O){1&k&&(n.TgZ(0,"div",0)(1,"p"),n._uU(2),n.ALo(3,"translate"),n.qZA()(),n.TgZ(4,"table",1)(5,"thead",2)(6,"tr")(7,"th"),n._uU(8),n.ALo(9,"translate"),n.qZA(),n.TgZ(10,"th"),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.TgZ(13,"th")(14,"span",2),n._uU(15),n.ALo(16,"translate"),n.qZA()()()(),n.TgZ(17,"tbody")(18,"tr",3)(19,"td",4)(20,"b"),n._uU(21),n.ALo(22,"translate"),n.qZA()(),n.TgZ(23,"td",5)(24,"span",6),n._uU(25),n.ALo(26,"translate"),n.qZA()(),n._UZ(27,"td",7),n.qZA(),n.YNc(28,x,3,3,"ng-container",8),n.qZA()(),n.YNc(29,b,6,5,"form",9)),2&k&&(n.xp6(2),n.Oqu(n.lcZ(3,8,"Common.Wizards.Review")),n.xp6(6),n.Oqu(n.lcZ(9,10,"Common.Key")),n.xp6(3),n.Oqu(n.lcZ(12,12,"Common.Value")),n.xp6(4),n.Oqu(n.lcZ(16,14,"Common.Actions")),n.xp6(6),n.Oqu(n.lcZ(22,16,"Common.Type")),n.xp6(4),n.Oqu(n.lcZ(26,18,O.summaryTitle)),n.xp6(3),n.Q6J("ngForOf",O.summary),n.xp6(1),n.Q6J("ngIf",O.askIfEnabled))},dependencies:[h.mk,h.sg,h.O5,e._Y,e.Wl,e.JJ,e.JL,e.sg,e.u,h.Nd,S.X$,y.r],encapsulation:2}),N})()},9679:(nt,_e,m)=>{"use strict";m.d(_e,{F:()=>B});var n=m(4006),e=m(6895),h=m(9383),S=m(1191),y=m(5503),w=m(8761),f=m(8265),x=m(7481),b=m(5971),g=m(1501),N=m(388),R=m(2320),k=m(9659),O=m(2699),P=m(9650),U=m(7305),W=m(4091),M=m(4650);let B=(()=>{class V{}return V.\u0275fac=function(Y){return new(Y||V)},V.\u0275mod=M.oAB({type:V}),V.\u0275inj=M.cJS({providers:[U.j,x.U,g.o,k.o],imports:[e.ez,n.u5,n.UX,S.H3,h.aw,R.z8,y.D,N.zk,w.W,f.j,b.s,O.Y,P.I,W.G]}),V})()},2329:(nt,_e,m)=>{"use strict";var n=m(1481),e=m(4650),h=m(4006),S=m(529),y=m(7340);function f(r){return new e.vHH(3e3,!1)}function qt(){return typeof window<"u"&&typeof window.document<"u"}function en(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function xt(r){switch(r.length){case 0:return new y.ZN;case 1:return r[0];default:return new y.ZE(r)}}function Dt(r,l,t,i,p=new Map,C=new Map){const K=[],Ce=[];let Ue=-1,lt=null;if(i.forEach(Et=>{const Wt=Et.get("offset"),an=Wt==Ue,mn=an&&lt||new Map;Et.forEach((Mn,vn)=>{let Bn=vn,Gn=Mn;if("offset"!==vn)switch(Bn=l.normalizePropertyName(Bn,K),Gn){case y.k1:Gn=p.get(vn);break;case y.l3:Gn=C.get(vn);break;default:Gn=l.normalizeStyleValue(vn,Bn,Gn,K)}mn.set(Bn,Gn)}),an||Ce.push(mn),lt=mn,Ue=Wt}),K.length)throw function me(r){return new e.vHH(3502,!1)}();return Ce}function X(r,l,t,i){switch(l){case"start":r.onStart(()=>i(t&&j(t,"start",r)));break;case"done":r.onDone(()=>i(t&&j(t,"done",r)));break;case"destroy":r.onDestroy(()=>i(t&&j(t,"destroy",r)))}}function j(r,l,t){const C=ae(r.element,r.triggerName,r.fromState,r.toState,l||r.phaseName,t.totalTime??r.totalTime,!!t.disabled),K=r._data;return null!=K&&(C._data=K),C}function ae(r,l,t,i,p="",C=0,K){return{element:r,triggerName:l,fromState:t,toState:i,phaseName:p,totalTime:C,disabled:!!K}}function Be(r,l,t){let i=r.get(l);return i||r.set(l,i=t),i}function je(r){const l=r.indexOf(":");return[r.substring(1,l),r.slice(l+1)]}let ke=(r,l)=>!1,Re=(r,l,t)=>[],Se=null;function Qe(r){const l=r.parentNode||r.host;return l===Se?null:l}(en()||typeof Element<"u")&&(qt()?(Se=(()=>document.documentElement)(),ke=(r,l)=>{for(;l;){if(l===r)return!0;l=Qe(l)}return!1}):ke=(r,l)=>r.contains(l),Re=(r,l,t)=>{if(t)return Array.from(r.querySelectorAll(l));const i=r.querySelector(l);return i?[i]:[]});let Je=null,Ct=!1;const ie=ke,L=Re;let Ne=(()=>{class r{validateStyleProperty(t){return function ht(r){Je||(Je=function oe(){return typeof document<"u"?document.body:null}()||{},Ct=!!Je.style&&"WebkitAppearance"in Je.style);let l=!0;return Je.style&&!function Ke(r){return"ebkit"==r.substring(1,6)}(r)&&(l=r in Je.style,!l&&Ct&&(l="Webkit"+r.charAt(0).toUpperCase()+r.slice(1)in Je.style)),l}(t)}matchesElement(t,i){return!1}containsElement(t,i){return ie(t,i)}getParentElement(t){return Qe(t)}query(t,i,p){return L(t,i,p)}computeStyle(t,i,p){return p||""}animate(t,i,p,C,K,Ce=[],Ue){return new y.ZN(p,C)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})(),ze=(()=>{class r{}return r.NOOP=new Ne,r})();const gn="ng-enter",Yt="ng-leave",on="ng-trigger",Xt=".ng-trigger",it="ng-animating",Gt=".ng-animating";function bt(r){if("number"==typeof r)return r;const l=r.match(/^(-?[\.\d]+)(m?s)/);return!l||l.length<2?0:jt(parseFloat(l[1]),l[2])}function jt(r,l){return"s"===l?1e3*r:r}function ln(r,l,t){return r.hasOwnProperty("duration")?r:function kn(r,l,t){let p,C=0,K="";if("string"==typeof r){const Ce=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===Ce)return l.push(f()),{duration:0,delay:0,easing:""};p=jt(parseFloat(Ce[1]),Ce[2]);const Ue=Ce[3];null!=Ue&&(C=jt(parseFloat(Ue),Ce[4]));const lt=Ce[5];lt&&(K=lt)}else p=r;if(!t){let Ce=!1,Ue=l.length;p<0&&(l.push(function x(){return new e.vHH(3100,!1)}()),Ce=!0),C<0&&(l.push(function b(){return new e.vHH(3101,!1)}()),Ce=!0),Ce&&l.splice(Ue,0,f())}return{duration:p,delay:C,easing:K}}(r,l,t)}function Tn(r,l={}){return Object.keys(r).forEach(t=>{l[t]=r[t]}),l}function qn(r){const l=new Map;return Object.keys(r).forEach(t=>{l.set(t,r[t])}),l}function Ft(r,l=new Map,t){if(t)for(let[i,p]of t)l.set(i,p);for(let[i,p]of r)l.set(i,p);return l}function jn(r,l,t){return t?l+":"+t+";":""}function In(r){let l="";for(let t=0;t<r.style.length;t++){const i=r.style.item(t);l+=jn(0,i,r.style.getPropertyValue(i))}for(const t in r.style)r.style.hasOwnProperty(t)&&!t.startsWith("_")&&(l+=jn(0,Xn(t),r.style[t]));r.setAttribute("style",l)}function Fn(r,l,t){r.style&&(l.forEach((i,p)=>{const C=Kt(p);t&&!t.has(p)&&t.set(p,r.style[C]),r.style[C]=i}),en()&&In(r))}function Zn(r,l){r.style&&(l.forEach((t,i)=>{const p=Kt(i);r.style[p]=""}),en()&&In(r))}function zn(r){return Array.isArray(r)?1==r.length?r[0]:(0,y.vP)(r):r}const vt=new RegExp("{{\\s*(.+?)\\s*}}","g");function at(r){let l=[];if("string"==typeof r){let t;for(;t=vt.exec(r);)l.push(t[1]);vt.lastIndex=0}return l}function Ot(r,l,t){const i=r.toString(),p=i.replace(vt,(C,K)=>{let Ce=l[K];return null==Ce&&(t.push(function N(r){return new e.vHH(3003,!1)}()),Ce=""),Ce.toString()});return p==i?r:p}function Ht(r){const l=[];let t=r.next();for(;!t.done;)l.push(t.value),t=r.next();return l}const hn=/-+([a-z0-9])/g;function Kt(r){return r.replace(hn,(...l)=>l[1].toUpperCase())}function Xn(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Nn(r,l,t){switch(l.type){case 7:return r.visitTrigger(l,t);case 0:return r.visitState(l,t);case 1:return r.visitTransition(l,t);case 2:return r.visitSequence(l,t);case 3:return r.visitGroup(l,t);case 4:return r.visitAnimate(l,t);case 5:return r.visitKeyframes(l,t);case 6:return r.visitStyle(l,t);case 8:return r.visitReference(l,t);case 9:return r.visitAnimateChild(l,t);case 10:return r.visitAnimateRef(l,t);case 11:return r.visitQuery(l,t);case 12:return r.visitStagger(l,t);default:throw function R(r){return new e.vHH(3004,!1)}()}}function mi(r,l){return window.getComputedStyle(r)[l]}function Tr(r,l){const t=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(i=>function Vn(r,l,t){if(":"==r[0]){const Ue=function kr(r,l){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return l.push(function E(r){return new e.vHH(3016,!1)}()),"* => *"}}(r,t);if("function"==typeof Ue)return void l.push(Ue);r=Ue}const i=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function G(r){return new e.vHH(3015,!1)}()),l;const p=i[1],C=i[2],K=i[3];l.push(ws(p,K));"<"==C[0]&&!("*"==p&&"*"==K)&&l.push(ws(K,p))}(i,t,l)):t.push(r),t}const ts=new Set(["true","1"]),Ui=new Set(["false","0"]);function ws(r,l){const t=ts.has(r)||Ui.has(r),i=ts.has(l)||Ui.has(l);return(p,C)=>{let K="*"==r||r==p,Ce="*"==l||l==C;return!K&&t&&"boolean"==typeof p&&(K=p?ts.has(r):Ui.has(r)),!Ce&&i&&"boolean"==typeof C&&(Ce=C?ts.has(l):Ui.has(l)),K&&Ce}}const We=new RegExp("s*:selfs*,?","g");function st(r,l,t,i){return new nn(r).build(l,t,i)}class nn{constructor(l){this._driver=l}build(l,t,i){const p=new An(t);return this._resetContextStyleTimingState(p),Nn(this,zn(l),p)}_resetContextStyleTimingState(l){l.currentQuerySelector="",l.collectedStyles=new Map,l.collectedStyles.set("",new Map),l.currentTime=0}visitTrigger(l,t){let i=t.queryCount=0,p=t.depCount=0;const C=[],K=[];return"@"==l.name.charAt(0)&&t.errors.push(function O(){return new e.vHH(3006,!1)}()),l.definitions.forEach(Ce=>{if(this._resetContextStyleTimingState(t),0==Ce.type){const Ue=Ce,lt=Ue.name;lt.toString().split(/\s*,\s*/).forEach(Et=>{Ue.name=Et,C.push(this.visitState(Ue,t))}),Ue.name=lt}else if(1==Ce.type){const Ue=this.visitTransition(Ce,t);i+=Ue.queryCount,p+=Ue.depCount,K.push(Ue)}else t.errors.push(function P(){return new e.vHH(3007,!1)}())}),{type:7,name:l.name,states:C,transitions:K,queryCount:i,depCount:p,options:null}}visitState(l,t){const i=this.visitStyle(l.styles,t),p=l.options&&l.options.params||null;if(i.containsDynamicStyles){const C=new Set,K=p||{};i.styles.forEach(Ce=>{Ce instanceof Map&&Ce.forEach(Ue=>{at(Ue).forEach(lt=>{K.hasOwnProperty(lt)||C.add(lt)})})}),C.size&&(Ht(C.values()),t.errors.push(function U(r,l){return new e.vHH(3008,!1)}()))}return{type:0,name:l.name,style:i,options:p?{params:p}:null}}visitTransition(l,t){t.queryCount=0,t.depCount=0;const i=Nn(this,zn(l.animation),t);return{type:1,matchers:Tr(l.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:oi(l.options)}}visitSequence(l,t){return{type:2,steps:l.steps.map(i=>Nn(this,i,t)),options:oi(l.options)}}visitGroup(l,t){const i=t.currentTime;let p=0;const C=l.steps.map(K=>{t.currentTime=i;const Ce=Nn(this,K,t);return p=Math.max(p,t.currentTime),Ce});return t.currentTime=p,{type:3,steps:C,options:oi(l.options)}}visitAnimate(l,t){const i=function di(r,l){if(r.hasOwnProperty("duration"))return r;if("number"==typeof r)return dr(ln(r,l).duration,0,"");const t=r;if(t.split(/\s+/).some(C=>"{"==C.charAt(0)&&"{"==C.charAt(1))){const C=dr(0,0,"");return C.dynamic=!0,C.strValue=t,C}const p=ln(t,l);return dr(p.duration,p.delay,p.easing)}(l.timings,t.errors);t.currentAnimateTimings=i;let p,C=l.styles?l.styles:(0,y.oB)({});if(5==C.type)p=this.visitKeyframes(C,t);else{let K=l.styles,Ce=!1;if(!K){Ce=!0;const lt={};i.easing&&(lt.easing=i.easing),K=(0,y.oB)(lt)}t.currentTime+=i.duration+i.delay;const Ue=this.visitStyle(K,t);Ue.isEmptyStep=Ce,p=Ue}return t.currentAnimateTimings=null,{type:4,timings:i,style:p,options:null}}visitStyle(l,t){const i=this._makeStyleAst(l,t);return this._validateStyleAst(i,t),i}_makeStyleAst(l,t){const i=[],p=Array.isArray(l.styles)?l.styles:[l.styles];for(let Ce of p)"string"==typeof Ce?Ce===y.l3?i.push(Ce):t.errors.push(new e.vHH(3002,!1)):i.push(qn(Ce));let C=!1,K=null;return i.forEach(Ce=>{if(Ce instanceof Map&&(Ce.has("easing")&&(K=Ce.get("easing"),Ce.delete("easing")),!C))for(let Ue of Ce.values())if(Ue.toString().indexOf("{{")>=0){C=!0;break}}),{type:6,styles:i,easing:K,offset:l.offset,containsDynamicStyles:C,options:null}}_validateStyleAst(l,t){const i=t.currentAnimateTimings;let p=t.currentTime,C=t.currentTime;i&&C>0&&(C-=i.duration+i.delay),l.styles.forEach(K=>{"string"!=typeof K&&K.forEach((Ce,Ue)=>{const lt=t.collectedStyles.get(t.currentQuerySelector),Et=lt.get(Ue);let Wt=!0;Et&&(C!=p&&C>=Et.startTime&&p<=Et.endTime&&(t.errors.push(function B(r,l,t,i,p){return new e.vHH(3010,!1)}()),Wt=!1),C=Et.startTime),Wt&&lt.set(Ue,{startTime:C,endTime:p}),t.options&&function ut(r,l,t){const i=l.params||{},p=at(r);p.length&&p.forEach(C=>{i.hasOwnProperty(C)||t.push(function g(r){return new e.vHH(3001,!1)}())})}(Ce,t.options,t.errors)})})}visitKeyframes(l,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function V(){return new e.vHH(3011,!1)}()),i;let C=0;const K=[];let Ce=!1,Ue=!1,lt=0;const Et=l.steps.map(Gn=>{const li=this._makeStyleAst(Gn,t);let ji=null!=li.offset?li.offset:function wi(r){if("string"==typeof r)return null;let l=null;if(Array.isArray(r))r.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;l=parseFloat(i.get("offset")),i.delete("offset")}});else if(r instanceof Map&&r.has("offset")){const t=r;l=parseFloat(t.get("offset")),t.delete("offset")}return l}(li.styles),vi=0;return null!=ji&&(C++,vi=li.offset=ji),Ue=Ue||vi<0||vi>1,Ce=Ce||vi<lt,lt=vi,K.push(vi),li});Ue&&t.errors.push(function Q(){return new e.vHH(3012,!1)}()),Ce&&t.errors.push(function Y(){return new e.vHH(3200,!1)}());const Wt=l.steps.length;let an=0;C>0&&C<Wt?t.errors.push(function fe(){return new e.vHH(3202,!1)}()):0==C&&(an=1/(Wt-1));const mn=Wt-1,Mn=t.currentTime,vn=t.currentAnimateTimings,Bn=vn.duration;return Et.forEach((Gn,li)=>{const ji=an>0?li==mn?1:an*li:K[li],vi=ji*Bn;t.currentTime=Mn+vn.delay+vi,vn.duration=vi,this._validateStyleAst(Gn,t),Gn.offset=ji,i.styles.push(Gn)}),i}visitReference(l,t){return{type:8,animation:Nn(this,zn(l.animation),t),options:oi(l.options)}}visitAnimateChild(l,t){return t.depCount++,{type:9,options:oi(l.options)}}visitAnimateRef(l,t){return{type:10,animation:this.visitReference(l.animation,t),options:oi(l.options)}}visitQuery(l,t){const i=t.currentQuerySelector,p=l.options||{};t.queryCount++,t.currentQuery=l;const[C,K]=function rn(r){const l=!!r.split(/\s*,\s*/).find(t=>":self"==t);return l&&(r=r.replace(We,"")),r=r.replace(/@\*/g,Xt).replace(/@\w+/g,t=>Xt+"-"+t.slice(1)).replace(/:animating/g,Gt),[r,l]}(l.selector);t.currentQuerySelector=i.length?i+" "+C:C,Be(t.collectedStyles,t.currentQuerySelector,new Map);const Ce=Nn(this,zn(l.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:C,limit:p.limit||0,optional:!!p.optional,includeSelf:K,animation:Ce,originalSelector:l.selector,options:oi(l.options)}}visitStagger(l,t){t.currentQuery||t.errors.push(function J(){return new e.vHH(3013,!1)}());const i="full"===l.timings?{duration:0,delay:0,easing:"full"}:ln(l.timings,t.errors,!0);return{type:12,animation:Nn(this,zn(l.animation),t),timings:i,options:null}}}class An{constructor(l){this.errors=l,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function oi(r){return r?(r=Tn(r)).params&&(r.params=function bn(r){return r?Tn(r):null}(r.params)):r={},r}function dr(r,l,t){return{duration:r,delay:l,easing:t}}function pr(r,l,t,i,p,C,K=null,Ce=!1){return{type:1,element:r,keyframes:l,preStyleProps:t,postStyleProps:i,duration:p,delay:C,totalTime:p+C,easing:K,subTimeline:Ce}}class Ar{constructor(){this._map=new Map}get(l){return this._map.get(l)||[]}append(l,t){let i=this._map.get(l);i||this._map.set(l,i=[]),i.push(...t)}has(l){return this._map.has(l)}clear(){this._map.clear()}}const Zi=new RegExp(":enter","g"),ns=new RegExp(":leave","g");function Gs(r,l,t,i,p,C=new Map,K=new Map,Ce,Ue,lt=[]){return(new po).buildKeyframes(r,l,t,i,p,C,K,Ce,Ue,lt)}class po{buildKeyframes(l,t,i,p,C,K,Ce,Ue,lt,Et=[]){lt=lt||new Ar;const Wt=new zs(l,t,lt,p,C,Et,[]);Wt.options=Ue;const an=Ue.delay?bt(Ue.delay):0;Wt.currentTimeline.delayNextStep(an),Wt.currentTimeline.setStyles([K],null,Wt.errors,Ue),Nn(this,i,Wt);const mn=Wt.timelines.filter(Mn=>Mn.containsAnimation());if(mn.length&&Ce.size){let Mn;for(let vn=mn.length-1;vn>=0;vn--){const Bn=mn[vn];if(Bn.element===t){Mn=Bn;break}}Mn&&!Mn.allowOnlyTimelineStyles()&&Mn.setStyles([Ce],null,Wt.errors,Ue)}return mn.length?mn.map(Mn=>Mn.buildKeyframes()):[pr(t,[],[],[],0,an,"",!1)]}visitTrigger(l,t){}visitState(l,t){}visitTransition(l,t){}visitAnimateChild(l,t){const i=t.subInstructions.get(t.element);if(i){const p=t.createSubContext(l.options),C=t.currentTimeline.currentTime,K=this._visitSubInstructions(i,p,p.options);C!=K&&t.transformIntoNewTimeline(K)}t.previousNode=l}visitAnimateRef(l,t){const i=t.createSubContext(l.options);i.transformIntoNewTimeline(),this._applyAnimateRefDelay(l.animation,t,i),this.visitReference(l.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=l}_applyAnimateRefDelay(l,t,i){var p;const C=null===(p=l.options)||void 0===p?void 0:p.delay;if(!C)return;let K;var Ce,Ue;"string"==typeof C?K=bt(Ot(C,null!==(Ce=null===(Ue=l.options)||void 0===Ue?void 0:Ue.params)&&void 0!==Ce?Ce:{},t.errors)):K=C;i.delayNextStep(K)}_visitSubInstructions(l,t,i){let C=t.currentTimeline.currentTime;const K=null!=i.duration?bt(i.duration):null,Ce=null!=i.delay?bt(i.delay):null;return 0!==K&&l.forEach(Ue=>{const lt=t.appendInstructionToTimeline(Ue,K,Ce);C=Math.max(C,lt.duration+lt.delay)}),C}visitReference(l,t){t.updateOptions(l.options,!0),Nn(this,l.animation,t),t.previousNode=l}visitSequence(l,t){const i=t.subContextCount;let p=t;const C=l.options;if(C&&(C.params||C.delay)&&(p=t.createSubContext(C),p.transformIntoNewTimeline(),null!=C.delay)){6==p.previousNode.type&&(p.currentTimeline.snapshotCurrentStyles(),p.previousNode=ys);const K=bt(C.delay);p.delayNextStep(K)}l.steps.length&&(l.steps.forEach(K=>Nn(this,K,p)),p.currentTimeline.applyStylesToKeyframe(),p.subContextCount>i&&p.transformIntoNewTimeline()),t.previousNode=l}visitGroup(l,t){const i=[];let p=t.currentTimeline.currentTime;const C=l.options&&l.options.delay?bt(l.options.delay):0;l.steps.forEach(K=>{const Ce=t.createSubContext(l.options);C&&Ce.delayNextStep(C),Nn(this,K,Ce),p=Math.max(p,Ce.currentTimeline.currentTime),i.push(Ce.currentTimeline)}),i.forEach(K=>t.currentTimeline.mergeTimelineCollectedStyles(K)),t.transformIntoNewTimeline(p),t.previousNode=l}_visitTiming(l,t){if(l.dynamic){const i=l.strValue;return ln(t.params?Ot(i,t.params,t.errors):i,t.errors)}return{duration:l.duration,delay:l.delay,easing:l.easing}}visitAnimate(l,t){const i=t.currentAnimateTimings=this._visitTiming(l.timings,t),p=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),p.snapshotCurrentStyles());const C=l.style;5==C.type?this.visitKeyframes(C,t):(t.incrementTime(i.duration),this.visitStyle(C,t),p.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=l}visitStyle(l,t){const i=t.currentTimeline,p=t.currentAnimateTimings;!p&&i.hasCurrentStyleProperties()&&i.forwardFrame();const C=p&&p.easing||l.easing;l.isEmptyStep?i.applyEmptyStep(C):i.setStyles(l.styles,C,t.errors,t.options),t.previousNode=l}visitKeyframes(l,t){const i=t.currentAnimateTimings,p=t.currentTimeline.duration,C=i.duration,Ce=t.createSubContext().currentTimeline;Ce.easing=i.easing,l.styles.forEach(Ue=>{Ce.forwardTime((Ue.offset||0)*C),Ce.setStyles(Ue.styles,Ue.easing,t.errors,t.options),Ce.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(Ce),t.transformIntoNewTimeline(p+C),t.previousNode=l}visitQuery(l,t){const i=t.currentTimeline.currentTime,p=l.options||{},C=p.delay?bt(p.delay):0;C&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=ys);let K=i;const Ce=t.invokeQuery(l.selector,l.originalSelector,l.limit,l.includeSelf,!!p.optional,t.errors);t.currentQueryTotal=Ce.length;let Ue=null;Ce.forEach((lt,Et)=>{t.currentQueryIndex=Et;const Wt=t.createSubContext(l.options,lt);C&&Wt.delayNextStep(C),lt===t.element&&(Ue=Wt.currentTimeline),Nn(this,l.animation,Wt),Wt.currentTimeline.applyStylesToKeyframe(),K=Math.max(K,Wt.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(K),Ue&&(t.currentTimeline.mergeTimelineCollectedStyles(Ue),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=l}visitStagger(l,t){const i=t.parentContext,p=t.currentTimeline,C=l.timings,K=Math.abs(C.duration),Ce=K*(t.currentQueryTotal-1);let Ue=K*t.currentQueryIndex;switch(C.duration<0?"reverse":C.easing){case"reverse":Ue=Ce-Ue;break;case"full":Ue=i.currentStaggerTime}const Et=t.currentTimeline;Ue&&Et.delayNextStep(Ue);const Wt=Et.currentTime;Nn(this,l.animation,t),t.previousNode=l,i.currentStaggerTime=p.currentTime-Wt+(p.startTime-i.currentTimeline.startTime)}}const ys={};class zs{constructor(l,t,i,p,C,K,Ce,Ue){this._driver=l,this.element=t,this.subInstructions=i,this._enterClassName=p,this._leaveClassName=C,this.errors=K,this.timelines=Ce,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ys,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Ue||new is(this._driver,t,0),Ce.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(l,t){if(!l)return;const i=l;let p=this.options;null!=i.duration&&(p.duration=bt(i.duration)),null!=i.delay&&(p.delay=bt(i.delay));const C=i.params;if(C){let K=p.params;K||(K=this.options.params={}),Object.keys(C).forEach(Ce=>{(!t||!K.hasOwnProperty(Ce))&&(K[Ce]=Ot(C[Ce],K,this.errors))})}}_copyOptions(){const l={};if(this.options){const t=this.options.params;if(t){const i=l.params={};Object.keys(t).forEach(p=>{i[p]=t[p]})}}return l}createSubContext(l=null,t,i){const p=t||this.element,C=new zs(this._driver,p,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(p,i||0));return C.previousNode=this.previousNode,C.currentAnimateTimings=this.currentAnimateTimings,C.options=this._copyOptions(),C.updateOptions(l),C.currentQueryIndex=this.currentQueryIndex,C.currentQueryTotal=this.currentQueryTotal,C.parentContext=this,this.subContextCount++,C}transformIntoNewTimeline(l){return this.previousNode=ys,this.currentTimeline=this.currentTimeline.fork(this.element,l),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(l,t,i){const p={duration:t??l.duration,delay:this.currentTimeline.currentTime+(i??0)+l.delay,easing:""},C=new Ts(this._driver,l.element,l.keyframes,l.preStyleProps,l.postStyleProps,p,l.stretchStartingKeyframe);return this.timelines.push(C),p}incrementTime(l){this.currentTimeline.forwardTime(this.currentTimeline.duration+l)}delayNextStep(l){l>0&&this.currentTimeline.delayNextStep(l)}invokeQuery(l,t,i,p,C,K){let Ce=[];if(p&&Ce.push(this.element),l.length>0){l=(l=l.replace(Zi,"."+this._enterClassName)).replace(ns,"."+this._leaveClassName);let lt=this._driver.query(this.element,l,1!=i);0!==i&&(lt=i<0?lt.slice(lt.length+i,lt.length):lt.slice(0,i)),Ce.push(...lt)}return!C&&0==Ce.length&&K.push(function ee(r){return new e.vHH(3014,!1)}()),Ce}}class is{constructor(l,t,i,p){this._driver=l,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=p,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(l){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+l),t&&this.snapshotCurrentStyles()):this.startTime+=l}fork(l,t){return this.applyStylesToKeyframe(),new is(this._driver,l,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(l){this.applyStylesToKeyframe(),this.duration=l,this._loadKeyframe()}_updateStyle(l,t){this._localTimelineStyles.set(l,t),this._globalTimelineStyles.set(l,t),this._styleSummary.set(l,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(l){l&&this._previousKeyframe.set("easing",l);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||y.l3),this._currentKeyframe.set(t,y.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(l,t,i,p){t&&this._previousKeyframe.set("easing",t);const C=p&&p.params||{},K=function Ys(r,l){const t=new Map;let i;return r.forEach(p=>{if("*"===p){i=i||l.keys();for(let C of i)t.set(C,y.l3)}else Ft(p,t)}),t}(l,this._globalTimelineStyles);for(let[Ue,lt]of K){const Et=Ot(lt,C,i);var Ce;this._pendingStyles.set(Ue,Et),this._localTimelineStyles.has(Ue)||this._backFill.set(Ue,null!==(Ce=this._globalTimelineStyles.get(Ue))&&void 0!==Ce?Ce:y.l3),this._updateStyle(Ue,Et)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((l,t)=>{this._currentKeyframe.set(t,l)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((l,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,l)}))}snapshotCurrentStyles(){for(let[l,t]of this._localTimelineStyles)this._pendingStyles.set(l,t),this._updateStyle(l,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const l=[];for(let t in this._currentKeyframe)l.push(t);return l}mergeTimelineCollectedStyles(l){l._styleSummary.forEach((t,i)=>{const p=this._styleSummary.get(i);(!p||t.time>p.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const l=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let p=[];this._keyframes.forEach((Ce,Ue)=>{const lt=Ft(Ce,new Map,this._backFill);lt.forEach((Et,Wt)=>{Et===y.k1?l.add(Wt):Et===y.l3&&t.add(Wt)}),i||lt.set("offset",Ue/this.duration),p.push(lt)});const C=l.size?Ht(l.values()):[],K=t.size?Ht(t.values()):[];if(i){const Ce=p[0],Ue=new Map(Ce);Ce.set("offset",0),Ue.set("offset",1),p=[Ce,Ue]}return pr(this.element,p,C,K,this.duration,this.startTime,this.easing,!1)}}class Ts extends is{constructor(l,t,i,p,C,K,Ce=!1){super(l,t,K.delay),this.keyframes=i,this.preStyleProps=p,this.postStyleProps=C,this._stretchStartingKeyframe=Ce,this.timings={duration:K.duration,delay:K.delay,easing:K.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let l=this.keyframes,{delay:t,duration:i,easing:p}=this.timings;if(this._stretchStartingKeyframe&&t){const C=[],K=i+t,Ce=t/K,Ue=Ft(l[0]);Ue.set("offset",0),C.push(Ue);const lt=Ft(l[0]);lt.set("offset",ho(Ce)),C.push(lt);const Et=l.length-1;for(let Wt=1;Wt<=Et;Wt++){let an=Ft(l[Wt]);const mn=an.get("offset");an.set("offset",ho((t+mn*i)/K)),C.push(an)}i=K,t=0,p="",l=C}return pr(this.element,l,this.preStyleProps,this.postStyleProps,i,t,p,!0)}}function ho(r,l=3){const t=Math.pow(10,l-1);return Math.round(r*t)/t}class Xi{}const Cs=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Hn extends Xi{normalizePropertyName(l,t){return Kt(l)}normalizeStyleValue(l,t,i,p){let C="";const K=i.toString().trim();if(Cs.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)C="px";else{const Ce=i.match(/^[+-]?[\d\.]+([a-z]*)$/);Ce&&0==Ce[1].length&&p.push(function k(r,l){return new e.vHH(3005,!1)}())}return K+C}}function As(r,l,t,i,p,C,K,Ce,Ue,lt,Et,Wt,an){return{type:0,element:r,triggerName:l,isRemovalTransition:p,fromState:t,fromStyles:C,toState:i,toStyles:K,timelines:Ce,queriedElements:Ue,preStyleProps:lt,postStyleProps:Et,totalTime:Wt,errors:an}}const Rn={};class mr{constructor(l,t,i){this._triggerName=l,this.ast=t,this._stateStyles=i}match(l,t,i,p){return function as(r,l,t,i,p){return r.some(C=>C(l,t,i,p))}(this.ast.matchers,l,t,i,p)}buildStyles(l,t,i){let p=this._stateStyles.get("*");return void 0!==l&&(p=this._stateStyles.get(l?.toString())||p),p?p.buildStyles(t,i):new Map}build(l,t,i,p,C,K,Ce,Ue,lt,Et){var Wt;const an=[],mn=this.ast.options&&this.ast.options.params||Rn,vn=this.buildStyles(i,Ce&&Ce.params||Rn,an),Bn=Ue&&Ue.params||Rn,Gn=this.buildStyles(p,Bn,an),li=new Set,ji=new Map,vi=new Map,Bi="void"===p,Qi={params:Qr(Bn,mn),delay:null===(Wt=this.ast.options)||void 0===Wt?void 0:Wt.delay},Ki=Et?[]:Gs(l,t,this.ast.animation,C,K,vn,Gn,Qi,lt,an);let $i=0;if(Ki.forEach(Gr=>{$i=Math.max(Gr.duration+Gr.delay,$i)}),an.length)return As(t,this._triggerName,i,p,Bi,vn,Gn,[],[],ji,vi,$i,an);Ki.forEach(Gr=>{const ps=Gr.element,Ho=Be(ji,ps,new Set);Gr.preStyleProps.forEach(ya=>Ho.add(ya));const co=Be(vi,ps,new Set);Gr.postStyleProps.forEach(ya=>co.add(ya)),ps!==t&&li.add(ps)});const Ps=Ht(li.values());return As(t,this._triggerName,i,p,Bi,vn,Gn,Ki,Ps,ji,vi,$i)}}function Qr(r,l){const t=Tn(l);for(const i in r)r.hasOwnProperty(i)&&null!=r[i]&&(t[i]=r[i]);return t}class Zr{constructor(l,t,i){this.styles=l,this.defaultParams=t,this.normalizer=i}buildStyles(l,t){const i=new Map,p=Tn(this.defaultParams);return Object.keys(l).forEach(C=>{const K=l[C];null!==K&&(p[C]=K)}),this.styles.styles.forEach(C=>{"string"!=typeof C&&C.forEach((K,Ce)=>{K&&(K=Ot(K,p,t));const Ue=this.normalizer.normalizePropertyName(Ce,t);K=this.normalizer.normalizeStyleValue(Ce,Ue,K,t),i.set(Ue,K)})}),i}}class ls{constructor(l,t,i){this.name=l,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(p=>{this.states.set(p.name,new Zr(p.style,p.options&&p.options.params||{},i))}),_r(this.states,"true","1"),_r(this.states,"false","0"),t.transitions.forEach(p=>{this.transitionFactories.push(new mr(l,p,this.states))}),this.fallbackTransition=function zi(r,l,t){return new mr(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(K,Ce)=>!0],options:null,queryCount:0,depCount:0},l)}(l,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(l,t,i,p){return this.transitionFactories.find(K=>K.match(l,t,i,p))||null}matchStyles(l,t,i){return this.fallbackTransition.buildStyles(l,t,i)}}function _r(r,l,t){r.has(l)?r.has(t)||r.set(t,r.get(l)):r.has(t)&&r.set(l,r.get(t))}const cs=new Ar;class vr{constructor(l,t,i){this.bodyNode=l,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(l,t){const i=[],C=st(this._driver,t,i,[]);if(i.length)throw function we(r){return new e.vHH(3503,!1)}();this._animations.set(l,C)}_buildPlayer(l,t,i){const p=l.element,C=Dt(0,this._normalizer,0,l.keyframes,t,i);return this._driver.animate(p,C,l.duration,l.delay,l.easing,[],!0)}create(l,t,i={}){const p=[],C=this._animations.get(l);let K;const Ce=new Map;if(C?(K=Gs(this._driver,t,C,gn,Yt,new Map,new Map,i,cs,p),K.forEach(Et=>{const Wt=Be(Ce,Et.element,new Map);Et.postStyleProps.forEach(an=>Wt.set(an,null))})):(p.push(function ye(){return new e.vHH(3300,!1)}()),K=[]),p.length)throw function qe(r){return new e.vHH(3504,!1)}();Ce.forEach((Et,Wt)=>{Et.forEach((an,mn)=>{Et.set(mn,this._driver.computeStyle(Wt,mn,y.l3))})});const lt=xt(K.map(Et=>{const Wt=Ce.get(Et.element);return this._buildPlayer(Et,new Map,Wt)}));return this._playersById.set(l,lt),lt.onDestroy(()=>this.destroy(l)),this.players.push(lt),lt}destroy(l){const t=this._getPlayer(l);t.destroy(),this._playersById.delete(l);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(l){const t=this._playersById.get(l);if(!t)throw function De(r){return new e.vHH(3301,!1)}();return t}listen(l,t,i,p){const C=ae(t,"","","");return X(this._getPlayer(l),i,C,p),()=>{}}command(l,t,i,p){if("register"==i)return void this.register(l,p[0]);if("create"==i)return void this.create(l,t,p[0]||{});const C=this._getPlayer(l);switch(i){case"play":C.play();break;case"pause":C.pause();break;case"reset":C.reset();break;case"restart":C.restart();break;case"finish":C.finish();break;case"init":C.init();break;case"setPosition":C.setPosition(parseFloat(p[0]));break;case"destroy":this.destroy(l)}}}const Ni="ng-animate-queued",Wr="ng-animate-disabled",Di=[],xs={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},To={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},jr="__ng_removed";class ss{constructor(l,t=""){this.namespaceId=t;const i=l&&l.hasOwnProperty("value");if(this.value=function _o(r){return r??null}(i?l.value:l),i){const C=Tn(l);delete C.value,this.options=C}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(l){const t=l.params;if(t){const i=this.options.params;Object.keys(t).forEach(p=>{null==i[p]&&(i[p]=t[p])})}}}const Hs="void",Us=new ss(Hs);class Es{constructor(l,t,i){this.id=l,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+l,rr(t,this._hostClassName)}listen(l,t,i,p){if(!this._triggers.has(t))throw function Ge(r,l){return new e.vHH(3302,!1)}();if(null==i||0==i.length)throw function ve(r){return new e.vHH(3303,!1)}();if(!function Vi(r){return"start"==r||"done"==r}(i))throw function c(r,l){return new e.vHH(3400,!1)}();const C=Be(this._elementListeners,l,[]),K={name:t,phase:i,callback:p};C.push(K);const Ce=Be(this._engine.statesByElement,l,new Map);return Ce.has(t)||(rr(l,on),rr(l,on+"-"+t),Ce.set(t,Us)),()=>{this._engine.afterFlush(()=>{const Ue=C.indexOf(K);Ue>=0&&C.splice(Ue,1),this._triggers.has(t)||Ce.delete(t)})}}register(l,t){return!this._triggers.has(l)&&(this._triggers.set(l,t),!0)}_getTrigger(l){const t=this._triggers.get(l);if(!t)throw function tt(r){return new e.vHH(3401,!1)}();return t}trigger(l,t,i,p=!0){const C=this._getTrigger(t),K=new No(this.id,t,l);let Ce=this._engine.statesByElement.get(l);Ce||(rr(l,on),rr(l,on+"-"+t),this._engine.statesByElement.set(l,Ce=new Map));let Ue=Ce.get(t);const lt=new ss(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&Ue&&lt.absorbOptions(Ue.options),Ce.set(t,lt),Ue||(Ue=Us),lt.value!==Hs&&Ue.value===lt.value){if(!function Vr(r,l){const t=Object.keys(r),i=Object.keys(l);if(t.length!=i.length)return!1;for(let p=0;p<t.length;p++){const C=t[p];if(!l.hasOwnProperty(C)||r[C]!==l[C])return!1}return!0}(Ue.params,lt.params)){const vn=[],Bn=C.matchStyles(Ue.value,Ue.params,vn),Gn=C.matchStyles(lt.value,lt.params,vn);vn.length?this._engine.reportError(vn):this._engine.afterFlush(()=>{Zn(l,Bn),Fn(l,Gn)})}return}const an=Be(this._engine.playersByElement,l,[]);an.forEach(vn=>{vn.namespaceId==this.id&&vn.triggerName==t&&vn.queued&&vn.destroy()});let mn=C.matchTransition(Ue.value,lt.value,l,lt.params),Mn=!1;if(!mn){if(!p)return;mn=C.fallbackTransition,Mn=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:l,triggerName:t,transition:mn,fromState:Ue,toState:lt,player:K,isFallbackTransition:Mn}),Mn||(rr(l,Ni),K.onStart(()=>{Kr(l,Ni)})),K.onDone(()=>{let vn=this.players.indexOf(K);vn>=0&&this.players.splice(vn,1);const Bn=this._engine.playersByElement.get(l);if(Bn){let Gn=Bn.indexOf(K);Gn>=0&&Bn.splice(Gn,1)}}),this.players.push(K),an.push(K),K}deregister(l){this._triggers.delete(l),this._engine.statesByElement.forEach(t=>t.delete(l)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(p=>p.name!=l))})}clearElementCache(l){this._engine.statesByElement.delete(l),this._elementListeners.delete(l);const t=this._engine.playersByElement.get(l);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(l))}_signalRemovalForInnerTriggers(l,t){const i=this._engine.driver.query(l,Xt,!0);i.forEach(p=>{if(p[jr])return;const C=this._engine.fetchNamespacesByElement(p);C.size?C.forEach(K=>K.triggerLeaveAnimation(p,t,!1,!0)):this.clearElementCache(p)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(p=>this.clearElementCache(p)))}triggerLeaveAnimation(l,t,i,p){const C=this._engine.statesByElement.get(l),K=new Map;if(C){const Ce=[];if(C.forEach((Ue,lt)=>{if(K.set(lt,Ue.value),this._triggers.has(lt)){const Et=this.trigger(l,lt,Hs,p);Et&&Ce.push(Et)}}),Ce.length)return this._engine.markElementAsRemoved(this.id,l,!0,t,K),i&&xt(Ce).onDone(()=>this._engine.processLeaveNode(l)),!0}return!1}prepareLeaveAnimationListeners(l){const t=this._elementListeners.get(l),i=this._engine.statesByElement.get(l);if(t&&i){const p=new Set;t.forEach(C=>{const K=C.name;if(p.has(K))return;p.add(K);const Ue=this._triggers.get(K).fallbackTransition,lt=i.get(K)||Us,Et=new ss(Hs),Wt=new No(this.id,K,l);this._engine.totalQueuedPlayers++,this._queue.push({element:l,triggerName:K,transition:Ue,fromState:lt,toState:Et,player:Wt,isFallbackTransition:!0})})}}removeNode(l,t){const i=this._engine;if(l.childElementCount&&this._signalRemovalForInnerTriggers(l,t),this.triggerLeaveAnimation(l,t,!0))return;let p=!1;if(i.totalAnimations){const C=i.players.length?i.playersByQueriedElement.get(l):[];if(C&&C.length)p=!0;else{let K=l;for(;K=K.parentNode;)if(i.statesByElement.get(K)){p=!0;break}}}if(this.prepareLeaveAnimationListeners(l),p)i.markElementAsRemoved(this.id,l,!1,t);else{const C=l[jr];(!C||C===xs)&&(i.afterFlush(()=>this.clearElementCache(l)),i.destroyInnerAnimations(l),i._onRemovalComplete(l,t))}}insertNode(l,t){rr(l,this._hostClassName)}drainQueuedTransitions(l){const t=[];return this._queue.forEach(i=>{const p=i.player;if(p.destroyed)return;const C=i.element,K=this._elementListeners.get(C);K&&K.forEach(Ce=>{if(Ce.name==i.triggerName){const Ue=ae(C,i.triggerName,i.fromState.value,i.toState.value);Ue._data=l,X(i.player,Ce.phase,Ue,Ce.callback)}}),p.markedForDestroy?this._engine.afterFlush(()=>{p.destroy()}):t.push(i)}),this._queue=[],t.sort((i,p)=>{const C=i.transition.ast.depCount,K=p.transition.ast.depCount;return 0==C||0==K?C-K:this._engine.driver.containsElement(i.element,p.element)?1:-1})}destroy(l){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,l)}elementContainsData(l){let t=!1;return this._elementListeners.has(l)&&(t=!0),t=!!this._queue.find(i=>i.element===l)||t,t}}class ki{constructor(l,t,i){this.bodyNode=l,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(p,C)=>{}}_onRemovalComplete(l,t){this.onRemovalComplete(l,t)}get queuedPlayers(){const l=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&l.push(i)})}),l}createNamespace(l,t){const i=new Es(l,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[l]=i}_balanceNamespaceList(l,t){const i=this._namespaceList,p=this.namespacesByHostElement;if(i.length-1>=0){let K=!1,Ce=this.driver.getParentElement(t);for(;Ce;){const Ue=p.get(Ce);if(Ue){const lt=i.indexOf(Ue);i.splice(lt+1,0,l),K=!0;break}Ce=this.driver.getParentElement(Ce)}K||i.unshift(l)}else i.push(l);return p.set(t,l),l}register(l,t){let i=this._namespaceLookup[l];return i||(i=this.createNamespace(l,t)),i}registerTrigger(l,t,i){let p=this._namespaceLookup[l];p&&p.register(t,i)&&this.totalAnimations++}destroy(l,t){if(!l)return;const i=this._fetchNamespace(l);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[l];const p=this._namespaceList.indexOf(i);p>=0&&this._namespaceList.splice(p,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(l){return this._namespaceLookup[l]}fetchNamespacesByElement(l){const t=new Set,i=this.statesByElement.get(l);if(i)for(let p of i.values())if(p.namespaceId){const C=this._fetchNamespace(p.namespaceId);C&&t.add(C)}return t}trigger(l,t,i,p){if(Ii(t)){const C=this._fetchNamespace(l);if(C)return C.trigger(t,i,p),!0}return!1}insertNode(l,t,i,p){if(!Ii(t))return;const C=t[jr];if(C&&C.setForRemoval){C.setForRemoval=!1,C.setForMove=!0;const K=this.collectedLeaveElements.indexOf(t);K>=0&&this.collectedLeaveElements.splice(K,1)}if(l){const K=this._fetchNamespace(l);K&&K.insertNode(t,i)}p&&this.collectEnterElement(t)}collectEnterElement(l){this.collectedEnterElements.push(l)}markElementAsDisabled(l,t){t?this.disabledNodes.has(l)||(this.disabledNodes.add(l),rr(l,Wr)):this.disabledNodes.has(l)&&(this.disabledNodes.delete(l),Kr(l,Wr))}removeNode(l,t,i,p){if(Ii(t)){const C=l?this._fetchNamespace(l):null;if(C?C.removeNode(t,p):this.markElementAsRemoved(l,t,!1,p),i){const K=this.namespacesByHostElement.get(t);K&&K.id!==l&&K.removeNode(t,p)}}else this._onRemovalComplete(t,p)}markElementAsRemoved(l,t,i,p,C){this.collectedLeaveElements.push(t),t[jr]={namespaceId:l,setForRemoval:p,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:C}}listen(l,t,i,p,C){return Ii(t)?this._fetchNamespace(l).listen(t,i,p,C):()=>{}}_buildInstruction(l,t,i,p,C){return l.transition.build(this.driver,l.element,l.fromState.value,l.toState.value,i,p,l.fromState.options,l.toState.options,t,C)}destroyInnerAnimations(l){let t=this.driver.query(l,Xt,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(l,Gt,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(l){const t=this.playersByElement.get(l);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(l){const t=this.playersByQueriedElement.get(l);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(l=>{if(this.players.length)return xt(this.players).onDone(()=>l());l()})}processLeaveNode(l){var t;const i=l[jr];if(i&&i.setForRemoval){if(l[jr]=xs,i.namespaceId){this.destroyInnerAnimations(l);const p=this._fetchNamespace(i.namespaceId);p&&p.clearElementCache(l)}this._onRemovalComplete(l,i.setForRemoval)}null!==(t=l.classList)&&void 0!==t&&t.contains(Wr)&&this.markElementAsDisabled(l,!1),this.driver.query(l,".ng-animate-disabled",!0).forEach(p=>{this.markElementAsDisabled(p,!1)})}flush(l=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,p)=>this._balanceNamespaceList(i,p)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)rr(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,l)}finally{for(let p=0;p<i.length;p++)i[p]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?xt(t).onDone(()=>{i.forEach(p=>p())}):i.forEach(p=>p())}}reportError(l){throw function _t(r){return new e.vHH(3402,!1)}()}_flushAnimations(l,t){const i=new Ar,p=[],C=new Map,K=[],Ce=new Map,Ue=new Map,lt=new Map,Et=new Set;this.disabledNodes.forEach(Pn=>{Et.add(Pn);const Qn=this.driver.query(Pn,".ng-animate-queued",!0);for(let ui=0;ui<Qn.length;ui++)Et.add(Qn[ui])});const Wt=this.bodyNode,an=Array.from(this.statesByElement.keys()),mn=Js(an,this.collectedEnterElements),Mn=new Map;let vn=0;mn.forEach((Pn,Qn)=>{const ui=gn+vn++;Mn.set(Qn,ui),Pn.forEach(Oi=>rr(Oi,ui))});const Bn=[],Gn=new Set,li=new Set;for(let Pn=0;Pn<this.collectedLeaveElements.length;Pn++){const Qn=this.collectedLeaveElements[Pn],ui=Qn[jr];ui&&ui.setForRemoval&&(Bn.push(Qn),Gn.add(Qn),ui.hasAnimation?this.driver.query(Qn,".ng-star-inserted",!0).forEach(Oi=>Gn.add(Oi)):li.add(Qn))}const ji=new Map,vi=Js(an,Array.from(Gn));vi.forEach((Pn,Qn)=>{const ui=Yt+vn++;ji.set(Qn,ui),Pn.forEach(Oi=>rr(Oi,ui))}),l.push(()=>{mn.forEach((Pn,Qn)=>{const ui=Mn.get(Qn);Pn.forEach(Oi=>Kr(Oi,ui))}),vi.forEach((Pn,Qn)=>{const ui=ji.get(Qn);Pn.forEach(Oi=>Kr(Oi,ui))}),Bn.forEach(Pn=>{this.processLeaveNode(Pn)})});const Bi=[],Qi=[];for(let Pn=this._namespaceList.length-1;Pn>=0;Pn--)this._namespaceList[Pn].drainQueuedTransitions(t).forEach(ui=>{const Oi=ui.player,hs=ui.element;if(Bi.push(Oi),this.collectedEnterElements.length){const uo=hs[jr];if(uo&&uo.setForMove){if(uo.previousTriggersValues&&uo.previousTriggersValues.has(ui.triggerName)){const la=uo.previousTriggersValues.get(ui.triggerName),zo=this.statesByElement.get(ui.element);if(zo&&zo.has(ui.triggerName)){const Wd=zo.get(ui.triggerName);Wd.value=la,zo.set(ui.triggerName,Wd)}}return void Oi.destroy()}}const Ca=!Wt||!this.driver.containsElement(Wt,hs),wo=ji.get(hs),Za=Mn.get(hs),es=this._buildInstruction(ui,i,Za,wo,Ca);if(es.errors&&es.errors.length)return void Qi.push(es);if(Ca)return Oi.onStart(()=>Zn(hs,es.fromStyles)),Oi.onDestroy(()=>Fn(hs,es.toStyles)),void p.push(Oi);if(ui.isFallbackTransition)return Oi.onStart(()=>Zn(hs,es.fromStyles)),Oi.onDestroy(()=>Fn(hs,es.toStyles)),void p.push(Oi);const gl=[];es.timelines.forEach(uo=>{uo.stretchStartingKeyframe=!0,this.disabledNodes.has(uo.element)||gl.push(uo)}),es.timelines=gl,i.append(hs,es.timelines),K.push({instruction:es,player:Oi,element:hs}),es.queriedElements.forEach(uo=>Be(Ce,uo,[]).push(Oi)),es.preStyleProps.forEach((uo,la)=>{if(uo.size){let zo=Ue.get(la);zo||Ue.set(la,zo=new Set),uo.forEach((Wd,Ou)=>zo.add(Ou))}}),es.postStyleProps.forEach((uo,la)=>{let zo=lt.get(la);zo||lt.set(la,zo=new Set),uo.forEach((Wd,Ou)=>zo.add(Ou))})});if(Qi.length){const Pn=[];Qi.forEach(Qn=>{Pn.push(function rt(r,l){return new e.vHH(3505,!1)}())}),Bi.forEach(Qn=>Qn.destroy()),this.reportError(Pn)}const Ki=new Map,$i=new Map;K.forEach(Pn=>{const Qn=Pn.element;i.has(Qn)&&($i.set(Qn,Qn),this._beforeAnimationBuild(Pn.player.namespaceId,Pn.instruction,Ki))}),p.forEach(Pn=>{const Qn=Pn.element;this._getPreviousPlayers(Qn,!1,Pn.namespaceId,Pn.triggerName,null).forEach(Oi=>{Be(Ki,Qn,[]).push(Oi),Oi.destroy()})});const Ps=Bn.filter(Pn=>Er(Pn,Ue,lt)),Gr=new Map;Wn(Gr,this.driver,li,lt,y.l3).forEach(Pn=>{Er(Pn,Ue,lt)&&Ps.push(Pn)});const Ho=new Map;mn.forEach((Pn,Qn)=>{Wn(Ho,this.driver,new Set(Pn),Ue,y.k1)}),Ps.forEach(Pn=>{var Qn,ui;const Oi=Gr.get(Pn),hs=Ho.get(Pn);Gr.set(Pn,new Map([...Array.from(null!==(Qn=Oi?.entries())&&void 0!==Qn?Qn:[]),...Array.from(null!==(ui=hs?.entries())&&void 0!==ui?ui:[])]))});const co=[],ya=[],Rl={};K.forEach(Pn=>{const{element:Qn,player:ui,instruction:Oi}=Pn;if(i.has(Qn)){if(Et.has(Qn))return ui.onDestroy(()=>Fn(Qn,Oi.toStyles)),ui.disabled=!0,ui.overrideTotalTime(Oi.totalTime),void p.push(ui);let hs=Rl;if($i.size>1){let wo=Qn;const Za=[];for(;wo=wo.parentNode;){const es=$i.get(wo);if(es){hs=es;break}Za.push(wo)}Za.forEach(es=>$i.set(es,hs))}const Ca=this._buildAnimation(ui.namespaceId,Oi,Ki,C,Ho,Gr);if(ui.setRealPlayer(Ca),hs===Rl)co.push(ui);else{const wo=this.playersByElement.get(hs);wo&&wo.length&&(ui.parentPlayer=xt(wo)),p.push(ui)}}else Zn(Qn,Oi.fromStyles),ui.onDestroy(()=>Fn(Qn,Oi.toStyles)),ya.push(ui),Et.has(Qn)&&p.push(ui)}),ya.forEach(Pn=>{const Qn=C.get(Pn.element);if(Qn&&Qn.length){const ui=xt(Qn);Pn.setRealPlayer(ui)}}),p.forEach(Pn=>{Pn.parentPlayer?Pn.syncPlayerEvents(Pn.parentPlayer):Pn.destroy()});for(let Pn=0;Pn<Bn.length;Pn++){const Qn=Bn[Pn],ui=Qn[jr];if(Kr(Qn,Yt),ui&&ui.hasAnimation)continue;let Oi=[];if(Ce.size){let Ca=Ce.get(Qn);Ca&&Ca.length&&Oi.push(...Ca);let wo=this.driver.query(Qn,Gt,!0);for(let Za=0;Za<wo.length;Za++){let es=Ce.get(wo[Za]);es&&es.length&&Oi.push(...es)}}const hs=Oi.filter(Ca=>!Ca.destroyed);hs.length?Ao(this,Qn,hs):this.processLeaveNode(Qn)}return Bn.length=0,co.forEach(Pn=>{this.players.push(Pn),Pn.onDone(()=>{Pn.destroy();const Qn=this.players.indexOf(Pn);this.players.splice(Qn,1)}),Pn.play()}),co}elementContainsData(l,t){let i=!1;const p=t[jr];return p&&p.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(l).elementContainsData(t)||i}afterFlush(l){this._flushFns.push(l)}afterFlushAnimationsDone(l){this._whenQuietFns.push(l)}_getPreviousPlayers(l,t,i,p,C){let K=[];if(t){const Ce=this.playersByQueriedElement.get(l);Ce&&(K=Ce)}else{const Ce=this.playersByElement.get(l);if(Ce){const Ue=!C||C==Hs;Ce.forEach(lt=>{lt.queued||!Ue&&lt.triggerName!=p||K.push(lt)})}}return(i||p)&&(K=K.filter(Ce=>!(i&&i!=Ce.namespaceId||p&&p!=Ce.triggerName))),K}_beforeAnimationBuild(l,t,i){const C=t.element,K=t.isRemovalTransition?void 0:l,Ce=t.isRemovalTransition?void 0:t.triggerName;for(const Ue of t.timelines){const lt=Ue.element,Et=lt!==C,Wt=Be(i,lt,[]);this._getPreviousPlayers(lt,Et,K,Ce,t.toState).forEach(mn=>{const Mn=mn.getRealPlayer();Mn.beforeDestroy&&Mn.beforeDestroy(),mn.destroy(),Wt.push(mn)})}Zn(C,t.fromStyles)}_buildAnimation(l,t,i,p,C,K){const Ce=t.triggerName,Ue=t.element,lt=[],Et=new Set,Wt=new Set,an=t.timelines.map(Mn=>{const vn=Mn.element;Et.add(vn);const Bn=vn[jr];if(Bn&&Bn.removedBeforeQueried)return new y.ZN(Mn.duration,Mn.delay);const Gn=vn!==Ue,li=function Ti(r){const l=[];return yr(r,l),l}((i.get(vn)||Di).map(Ki=>Ki.getRealPlayer())).filter(Ki=>!!Ki.element&&Ki.element===vn),ji=C.get(vn),vi=K.get(vn),Bi=Dt(0,this._normalizer,0,Mn.keyframes,ji,vi),Qi=this._buildPlayer(Mn,Bi,li);if(Mn.subTimeline&&p&&Wt.add(vn),Gn){const Ki=new No(l,Ce,vn);Ki.setRealPlayer(Qi),lt.push(Ki)}return Qi});lt.forEach(Mn=>{Be(this.playersByQueriedElement,Mn.element,[]).push(Mn),Mn.onDone(()=>function us(r,l,t){let i=r.get(l);if(i){if(i.length){const p=i.indexOf(t);i.splice(p,1)}0==i.length&&r.delete(l)}return i}(this.playersByQueriedElement,Mn.element,Mn))}),Et.forEach(Mn=>rr(Mn,it));const mn=xt(an);return mn.onDestroy(()=>{Et.forEach(Mn=>Kr(Mn,it)),Fn(Ue,t.toStyles)}),Wt.forEach(Mn=>{Be(p,Mn,[]).push(mn)}),mn}_buildPlayer(l,t,i){return t.length>0?this.driver.animate(l.element,t,l.duration,l.delay,l.easing,i):new y.ZN(l.duration,l.delay)}}class No{constructor(l,t,i){this.namespaceId=l,this.triggerName=t,this.element=i,this._player=new y.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(l){this._containsRealPlayer||(this._player=l,this._queuedCallbacks.forEach((t,i)=>{t.forEach(p=>X(l,i,void 0,p))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(l.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(l){this.totalTime=l}syncPlayerEvents(l){const t=this._player;t.triggerCallback&&l.onStart(()=>t.triggerCallback("start")),l.onDone(()=>this.finish()),l.onDestroy(()=>this.destroy())}_queueEvent(l,t){Be(this._queuedCallbacks,l,[]).push(t)}onDone(l){this.queued&&this._queueEvent("done",l),this._player.onDone(l)}onStart(l){this.queued&&this._queueEvent("start",l),this._player.onStart(l)}onDestroy(l){this.queued&&this._queueEvent("destroy",l),this._player.onDestroy(l)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(l){this.queued||this._player.setPosition(l)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(l){const t=this._player;t.triggerCallback&&t.triggerCallback(l)}}function Ii(r){return r&&1===r.nodeType}function xr(r,l){const t=r.style.display;return r.style.display=l??"none",t}function Wn(r,l,t,i,p){const C=[];t.forEach(Ue=>C.push(xr(Ue)));const K=[];i.forEach((Ue,lt)=>{const Et=new Map;Ue.forEach(Wt=>{const an=l.computeStyle(lt,Wt,p);Et.set(Wt,an),(!an||0==an.length)&&(lt[jr]=To,K.push(lt))}),r.set(lt,Et)});let Ce=0;return t.forEach(Ue=>xr(Ue,C[Ce++])),K}function Js(r,l){const t=new Map;if(r.forEach(Ce=>t.set(Ce,[])),0==l.length)return t;const p=new Set(l),C=new Map;function K(Ce){if(!Ce)return 1;let Ue=C.get(Ce);if(Ue)return Ue;const lt=Ce.parentNode;return Ue=t.has(lt)?lt:p.has(lt)?1:K(lt),C.set(Ce,Ue),Ue}return l.forEach(Ce=>{const Ue=K(Ce);1!==Ue&&t.get(Ue).push(Ce)}),t}function rr(r,l){var t;null===(t=r.classList)||void 0===t||t.add(l)}function Kr(r,l){var t;null===(t=r.classList)||void 0===t||t.remove(l)}function Ao(r,l,t){xt(t).onDone(()=>r.processLeaveNode(l))}function yr(r,l){for(let t=0;t<r.length;t++){const i=r[t];i instanceof y.ZE?yr(i.players,l):l.push(i)}}function Er(r,l,t){const i=t.get(r);if(!i)return!1;let p=l.get(r);return p?i.forEach(C=>p.add(C)):l.set(r,i),t.delete(r),!0}class cn{constructor(l,t,i){this.bodyNode=l,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(p,C)=>{},this._transitionEngine=new ki(l,t,i),this._timelineEngine=new vr(l,t,i),this._transitionEngine.onRemovalComplete=(p,C)=>this.onRemovalComplete(p,C)}registerTrigger(l,t,i,p,C){const K=l+"-"+p;let Ce=this._triggerCache[K];if(!Ce){const Ue=[],Et=st(this._driver,C,Ue,[]);if(Ue.length)throw function ue(r,l){return new e.vHH(3404,!1)}();Ce=function gr(r,l,t){return new ls(r,l,t)}(p,Et,this._normalizer),this._triggerCache[K]=Ce}this._transitionEngine.registerTrigger(t,p,Ce)}register(l,t){this._transitionEngine.register(l,t)}destroy(l,t){this._transitionEngine.destroy(l,t)}onInsert(l,t,i,p){this._transitionEngine.insertNode(l,t,i,p)}onRemove(l,t,i,p){this._transitionEngine.removeNode(l,t,p||!1,i)}disableAnimations(l,t){this._transitionEngine.markElementAsDisabled(l,t)}process(l,t,i,p){if("@"==i.charAt(0)){const[C,K]=je(i);this._timelineEngine.command(C,t,K,p)}else this._transitionEngine.trigger(l,t,i,p)}listen(l,t,i,p,C){if("@"==i.charAt(0)){const[K,Ce]=je(i);return this._timelineEngine.listen(K,t,Ce,C)}return this._transitionEngine.listen(l,t,i,p,C)}flush(l=-1){this._transitionEngine.flush(l)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let fs=(()=>{class r{constructor(t,i,p){this._element=t,this._startStyles=i,this._endStyles=p,this._state=0;let C=r.initialStylesByElement.get(t);C||r.initialStylesByElement.set(t,C=new Map),this._initialStyles=C}start(){this._state<1&&(this._startStyles&&Fn(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Fn(this._element,this._initialStyles),this._endStyles&&(Fn(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(Zn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Zn(this._element,this._endStyles),this._endStyles=null),Fn(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function ei(r){let l=null;return r.forEach((t,i)=>{(function Hi(r){return"display"===r||"position"===r})(i)&&(l=l||new Map,l.set(i,t))}),l}class Te{constructor(l,t,i,p){this.element=l,this.keyframes=t,this.options=i,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(l=>l()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const l=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,l,this.options),this._finalKeyframe=l.length?l[l.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(l){const t=[];return l.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(l,t,i){return l.animate(this._convertKeyframesToObject(t),i)}onStart(l){this._originalOnStartFns.push(l),this._onStartFns.push(l)}onDone(l){this._originalOnDoneFns.push(l),this._onDoneFns.push(l)}onDestroy(l){this._onDestroyFns.push(l)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(l=>l()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(l=>l()),this._onDestroyFns=[])}setPosition(l){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=l*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const l=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,p)=>{"offset"!==p&&l.set(p,this._finished?i:mi(this.element,p))}),this.currentSnapshot=l}triggerCallback(l){const t="start"===l?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class he{validateStyleProperty(l){return!0}validateAnimatableStyleProperty(l){return!0}matchesElement(l,t){return!1}containsElement(l,t){return ie(l,t)}getParentElement(l){return Qe(l)}query(l,t,i){return L(l,t,i)}computeStyle(l,t,i){return window.getComputedStyle(l)[t]}animate(l,t,i,p,C,K=[]){const Ue={duration:i,delay:p,fill:0==p?"both":"forwards"};C&&(Ue.easing=C);const lt=new Map,Et=K.filter(mn=>mn instanceof Te);(function Ei(r,l){return 0===r||0===l})(i,p)&&Et.forEach(mn=>{mn.currentSnapshot.forEach((Mn,vn)=>lt.set(vn,Mn))});let Wt=function ri(r){return r.length?r[0]instanceof Map?r:r.map(l=>qn(l)):[]}(t).map(mn=>Ft(mn));Wt=function os(r,l,t){if(t.size&&l.length){let i=l[0],p=[];if(t.forEach((C,K)=>{i.has(K)||p.push(K),i.set(K,C)}),p.length)for(let C=1;C<l.length;C++){let K=l[C];p.forEach(Ce=>K.set(Ce,mi(r,Ce)))}}return l}(l,Wt,lt);const an=function Kn(r,l){let t=null,i=null;return Array.isArray(l)&&l.length?(t=ei(l[0]),l.length>1&&(i=ei(l[l.length-1]))):l instanceof Map&&(t=ei(l)),t||i?new fs(r,t,i):null}(l,Wt);return new Te(l,Wt,Ue,an)}}var z=m(6895);let $e=(()=>{class r extends y._j{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:e.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const p=Array.isArray(t)?(0,y.vP)(t):t;return xi(this._renderer,null,i,"register",[p]),new $t(i,this._renderer)}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(e.FYo),e.LFG(z.K0))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();class $t extends y.LC{constructor(l,t){super(),this._id=l,this._renderer=t}create(l,t){return new xn(this._id,l,t||{},this._renderer)}}class xn{constructor(l,t,i,p){this.id=l,this.element=t,this._renderer=p,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(l,t){return this._renderer.listen(this.element,`@@${this.id}:${l}`,t)}_command(l,...t){return xi(this._renderer,this.element,this.id,l,t)}onDone(l){this._listen("done",l)}onStart(l){this._listen("start",l)}onDestroy(l){this._listen("destroy",l)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(l){this._command("setPosition",l)}getPosition(){var l,t;return null!==(l=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==l?l:0}}function xi(r,l,t,i,p){return r.setProperty(l,`@@${t}:${i}`,p)}const Ir="@.disabled";let Ji=(()=>{class r{constructor(t,i,p){this.delegate=t,this.engine=i,this._zone=p,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(C,K)=>{const Ce=K?.parentNode(C);Ce&&K.removeChild(Ce,C)}}createRenderer(t,i){const C=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let Et=this._rendererCache.get(C);return Et||(Et=new ai("",C,this.engine),this._rendererCache.set(C,Et)),Et}const K=i.id,Ce=i.id+"-"+this._currentId;this._currentId++,this.engine.register(Ce,t);const Ue=Et=>{Array.isArray(Et)?Et.forEach(Ue):this.engine.registerTrigger(K,Ce,t,Et.name,Et)};return i.data.animation.forEach(Ue),new Ie(this,Ce,C,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,p){t>=0&&t<this._microtaskId?this._zone.run(()=>i(p)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(C=>{const[K,Ce]=C;K(Ce)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,p]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(e.FYo),e.LFG(cn),e.LFG(e.R0b))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();class ai{constructor(l,t,i){this.namespaceId=l,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?p=>t.destroyNode(p):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(l,t){return this.delegate.createElement(l,t)}createComment(l){return this.delegate.createComment(l)}createText(l){return this.delegate.createText(l)}appendChild(l,t){this.delegate.appendChild(l,t),this.engine.onInsert(this.namespaceId,t,l,!1)}insertBefore(l,t,i,p=!0){this.delegate.insertBefore(l,t,i),this.engine.onInsert(this.namespaceId,t,l,p)}removeChild(l,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(l,t){return this.delegate.selectRootElement(l,t)}parentNode(l){return this.delegate.parentNode(l)}nextSibling(l){return this.delegate.nextSibling(l)}setAttribute(l,t,i,p){this.delegate.setAttribute(l,t,i,p)}removeAttribute(l,t,i){this.delegate.removeAttribute(l,t,i)}addClass(l,t){this.delegate.addClass(l,t)}removeClass(l,t){this.delegate.removeClass(l,t)}setStyle(l,t,i,p){this.delegate.setStyle(l,t,i,p)}removeStyle(l,t,i){this.delegate.removeStyle(l,t,i)}setProperty(l,t,i){"@"==t.charAt(0)&&t==Ir?this.disableAnimations(l,!!i):this.delegate.setProperty(l,t,i)}setValue(l,t){this.delegate.setValue(l,t)}listen(l,t,i){return this.delegate.listen(l,t,i)}disableAnimations(l,t){this.engine.disableAnimations(l,t)}}class Ie extends ai{constructor(l,t,i,p){super(t,i,p),this.factory=l,this.namespaceId=t}setProperty(l,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Ir?this.disableAnimations(l,i=void 0===i||!!i):this.engine.process(this.namespaceId,l,t.slice(1),i):this.delegate.setProperty(l,t,i)}listen(l,t,i){if("@"==t.charAt(0)){const p=function Fe(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(l);let C=t.slice(1),K="";return"@"!=C.charAt(0)&&([C,K]=function yt(r){const l=r.indexOf(".");return[r.substring(0,l),r.slice(l+1)]}(C)),this.engine.listen(this.namespaceId,p,C,K,Ce=>{this.factory.scheduleListenerCallback(Ce._data||-1,i,Ce)})}return this.delegate.listen(l,t,i)}}const tn=[{provide:y._j,useClass:$e},{provide:Xi,useFactory:function Bt(){return new Hn}},{provide:cn,useClass:(()=>{class r extends cn{constructor(t,i,p,C){super(t.body,i,p)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(z.K0),e.LFG(ze),e.LFG(Xi),e.LFG(e.z2F))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})()},{provide:e.FYo,useFactory:function Lt(r,l,t){return new Ji(r,l,t)},deps:[n.se,cn,e.R0b]}],fn=[{provide:ze,useFactory:()=>new he},{provide:e.QbO,useValue:"BrowserAnimations"},...tn],$n=[{provide:ze,useClass:Ne},{provide:e.QbO,useValue:"NoopAnimations"},...tn];let Ln=(()=>{class r{static withConfig(t){return{ngModule:r,providers:t.disableAnimations?$n:fn}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:fn,imports:[n.b2]}),r})();var si=m(7185),yn=m(8185),Oo=m(6055),Xs=m(4128),de=m(9300),Oe=m(5698);const ge="6.8.0";var He=m(2976),ot=m(8176),Vt=m(5259),zt=m(5373),Pt=m(1206),gi=m(1837),pi=m(5188),ti=m(1060),Ut=m(9383),Un=m(2979),Ci=m(4946),hr=m(1228),Cr=m(4961),sr=m(6219),qs=m(5834);let Wi=(()=>{class r{constructor(){let t=new qs.UAParser,i=t.getBrowser(),p=t.getOS();this.browserName=i.name,this.browserVersion=i.major,this.browserVersionToInt=parseInt(i.major),this.operatingSystem=p.name,this.operatingSystemVersion=p.version}validBrowser(){switch(this.browserName){case Ri.InternetExplorer:return this.verifyInternetExplorer();case Ri.Edge:return this.verifyEdge();case Ri.Firefox:return this.verifyFirefox();case Ri.Chrome:return this.verifyChrome();case Ri.Safari:case Ri.MobileSafari:return this.verifySafari();case Ri.Opera:case Ri.OperaMobile:return this.verifyOpera();case Ri.SamsungBrowser:return this.verifySamsungInternet()}return!1}verifyInternetExplorer(){return this.browserVersion.startsWith("11")&&this.operatingSystem==Ds.Windows&&this.operatingSystemVersion.startsWith("10")}verifyEdge(){return this.browserVersionToInt>=16}verifyFirefox(){return this.operatingSystem==Ds.Android||this.operatingSystem==Ds.ApplePhone?this.browserVersionToInt>=92:this.browserVersionToInt>=60}verifyChrome(){return this.operatingSystem==Ds.Android||this.operatingSystem==Ds.ApplePhone?this.browserVersionToInt>=93:this.browserVersionToInt>=51}verifySafari(){const t=parseFloat(this.operatingSystemVersion);return this.browserName==Ri.MobileSafari?this.browserVersionToInt>=12:this.browserVersionToInt>14||this.browserVersionToInt>=12&&t>=10.14}verifyOpera(){return this.browserName==Ri.OperaMobile?this.browserVersionToInt>12:this.browserVersionToInt>=39}verifySamsungInternet(){return this.browserVersionToInt>=5}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})(),Ri=(()=>{class r{}return r.InternetExplorer="IE",r.Edge="Edge",r.Firefox="Firefox",r.Chrome="Chrome",r.Safari="Safari",r.MobileSafari="Mobile Safari",r.Opera="Opera",r.OperaMobile="Opera Mobi",r.SamsungBrowser="Samsung Browser",r})(),Ds=(()=>{class r{}return r.Windows="Windows",r.Android="Android",r.ApplePhone="iOS",r})();var fo=m(9455),ca=m(4717),Yr=m(9881),ms=m(965);const Jo=["resourcesMenu"],ba=["sameSiteBrowserNotification"],Bs=["defaultUserResolveButton"];function gs(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"nav",14,15),e.ALo(2,"translate"),e.TgZ(3,"div",16)(4,"div",17)(5,"div",18)(6,"div",19)(7,"b",20),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"button",21),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.closeSameSiteBrowserNotification())}),e.TgZ(11,"b"),e._uU(12),e.ALo(13,"translate"),e.qZA()()()()()()()}2&r&&(e.uIk("aria-label",e.lcZ(2,3,"Nav.Account")),e.xp6(8),e.hij(" ",e.lcZ(9,5,"Common.SameSiteCookiesBannerError")," "),e.xp6(4),e.Oqu(e.lcZ(13,7,"Common.Close")))}function qo(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"nav",22),e.ALo(1,"translate"),e.TgZ(2,"div",16)(3,"div",17)(4,"div",18)(5,"div",19)(6,"b",20),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"button",23,24),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.defaultUserDeleteConfirmation())}),e.TgZ(11,"b"),e._uU(12),e.ALo(13,"translate"),e.qZA()()()()()()()}2&r&&(e.uIk("aria-label",e.lcZ(1,3,"Nav.Account")),e.xp6(7),e.hij(" ",e.lcZ(8,5,"InitialAdminCreation.ReminderMessage")," "),e.xp6(5),e.Oqu(e.lcZ(13,7,"InitialAdminCreation.Resolve")))}function or(r,l){if(1&r&&(e.TgZ(0,"nav",25),e.ALo(1,"translate"),e.TgZ(2,"div",16)(3,"div",17)(4,"div",18)(5,"div",19)(6,"b",20),e._uU(7),e.qZA()()()()()()),2&r){const t=e.oxw();e.uIk("aria-label",e.lcZ(1,2,"Nav.Account")),e.xp6(7),e.hij(" ",t.licenseIsInGracePeriodMessage," ")}}const Is=function(r,l){return{"tw-opacity-75":r,"tw-pill-info":l}};function Qo(r,l){if(1&r&&(e.TgZ(0,"div",34),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);e.Q6J("ngClass",e.WLB(2,Is,t.securityService.isNonProd(),!t.securityService.isNonProd())),e.xp6(1),e.hij(" ",t.securityService.licenseType," ")}}function wa(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"nav",26),e.ALo(1,"translate"),e.TgZ(2,"div",16)(3,"div",27),e.YNc(4,Qo,2,5,"div",28),e.TgZ(5,"div",29),e._UZ(6,"span",30),e.TgZ(7,"span",31),e._uU(8),e.qZA(),e.TgZ(9,"span",32),e._uU(10,"\u2022"),e.qZA()(),e.TgZ(11,"button",33),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.logoff())}),e._uU(12),e.ALo(13,"translate"),e.qZA()()()()}if(2&r){const t=e.oxw();e.uIk("aria-label",e.lcZ(1,4,"Nav.Account")),e.xp6(4),e.Q6J("ngIf","Legacy"!=t.securityService.organisation),e.xp6(4),e.Oqu(t.authService.user),e.xp6(4),e.hij(" ",e.lcZ(13,6,"Nav.Logout")," ")}}function eo(r,l){1&r&&e._UZ(0,"span",47)}function Mr(r,l){1&r&&e._UZ(0,"span",48)}function Va(r,l){1&r&&e._UZ(0,"div",54)}function mo(r,l){1&r&&e.GkF(0)}function So(r,l){1&r&&e.GkF(0)}function to(r,l){1&r&&e.GkF(0)}function nl(r,l){1&r&&e.GkF(0)}function ko(r,l){1&r&&e.GkF(0)}function Ta(r,l){1&r&&e.GkF(0)}function Wo(r,l){1&r&&e.GkF(0)}const ii=function(r){return{title:r,classes:"",activeClass:"tw-subnav-active",sub:!0,route:"/identityresources",display:!0}},xo=function(r){return{title:r,classes:"",activeClass:"tw-subnav-active",sub:!0,route:"/protectedresources",display:!0}};function jo(r,l){if(1&r&&(e.TgZ(0,"li",55,56)(2,"button",57)(3,"span",58),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"span",59),e.qZA(),e.TgZ(7,"nav",60),e.ALo(8,"translate"),e.TgZ(9,"ul",61),e.YNc(10,Ta,1,0,"ng-container",11),e.ALo(11,"translate"),e.YNc(12,Wo,1,0,"ng-container",11),e.ALo(13,"translate"),e.qZA()()()),2&r){const t=e.oxw(3),i=e.MAs(9);e.xp6(2),e.ekj("tw-nav-active",t.isActiveResourceRoute()),e.xp6(2),e.Oqu(e.lcZ(5,8,"Nav.Resources")),e.xp6(3),e.uIk("aria-label",e.lcZ(8,10,"Nav.Resources")),e.xp6(3),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(16,ii,e.lcZ(11,12,"Nav.IdentityResources"))),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(18,xo,e.lcZ(13,14,"Nav.ProtectedResources")))}}function xe(r,l){1&r&&e.GkF(0)}function H(r,l){1&r&&e.GkF(0)}function be(r,l){1&r&&e.GkF(0)}const Pe=function(r){return{title:r,classes:"lg:tw-hidden",activeClass:"tw-nav-active",route:"/home",display:!0}},pt=function(r,l){return{title:r,classes:"",activeClass:"tw-nav-active",route:"/users",display:l}},It=function(r,l){return{title:r,classes:"",activeClass:"tw-nav-active",route:"/roles",display:l}},St=function(r,l){return{title:r,classes:"",activeClass:"tw-nav-active",route:"/claim-types",display:l}},Jt=function(r,l){return{title:r,classes:"",activeClass:"tw-nav-active",route:"/clients",display:l}},un=function(r,l){return{title:r,classes:"",activeClass:"tw-nav-active",route:"/dynamic-auth",display:l}},pn=function(r,l){return{title:r,classes:"",activeClass:"tw-nav-active",route:"/auditing",display:l}},_i=function(r,l){return{title:r,classes:"",activeClass:"tw-nav-active",route:"/settings/accesspolicy",display:l}};function Pi(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"nav",49),e.YNc(1,Va,1,0,"div",50),e.TgZ(2,"ul",37),e.YNc(3,mo,1,0,"ng-container",11),e.ALo(4,"translate"),e.YNc(5,So,1,0,"ng-container",11),e.ALo(6,"translate"),e.YNc(7,to,1,0,"ng-container",11),e.ALo(8,"translate"),e.YNc(9,nl,1,0,"ng-container",11),e.ALo(10,"translate"),e.YNc(11,ko,1,0,"ng-container",11),e.ALo(12,"translate"),e.YNc(13,jo,14,20,"li",51),e.YNc(14,xe,1,0,"ng-container",11),e.ALo(15,"translate"),e.YNc(16,H,1,0,"ng-container",11),e.ALo(17,"translate"),e.YNc(18,be,1,0,"ng-container",11),e.ALo(19,"translate"),e.TgZ(20,"li",52)(21,"button",53),e.NdJ("click",function(){e.CHM(t);const p=e.oxw(2);return e.KtG(p.logoff())}),e._uU(22),e.ALo(23,"translate"),e.qZA()()()()}if(2&r){const t=e.oxw(2),i=e.MAs(9);e.xp6(1),e.Q6J("ngIf",!t.healthCheckService.uiReady),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(37,Pe,e.lcZ(4,19,"Nav.Home"))),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.WLB(39,pt,e.lcZ(6,21,"Nav.Users"),t.securityService.userManagerView||t.securityService.userManagerReadOnlyView)),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.WLB(42,It,e.lcZ(8,23,"Nav.Roles"),t.securityService.userManagerView||t.securityService.userManagerReadOnlyView)),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.WLB(45,St,e.lcZ(10,25,"Nav.ClaimTypes"),t.securityService.userManagerView||t.securityService.userManagerReadOnlyView)),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.WLB(48,Jt,e.lcZ(12,27,"Nav.Clients"),t.securityService.identityServerManagerView||t.securityService.identityServerManagerReadOnlyView)),e.xp6(2),e.Q6J("ngIf",t.securityService.identityServerManagerView||t.securityService.identityServerManagerReadOnlyView),e.xp6(1),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.WLB(51,un,e.lcZ(15,29,"Nav.DynamicAuth"),(t.securityService.identityServerManagerView||t.securityService.identityServerManagerReadOnlyView)&&t.dynamicAuthEnabled)),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.WLB(54,pn,e.lcZ(17,31,"Nav.Auditing"),t.securityService.auditerView)),e.xp6(2),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.WLB(57,_i,e.lcZ(19,33,"Nav.Settings"),t.securityService.allView)),e.xp6(4),e.hij(" ",e.lcZ(23,35,"Logout")," ")}}const br=function(r){return[r]};function ni(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"header",35),e.NdJ("resize",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.detectSize())},!1,e.Jf7),e.TgZ(1,"div",36)(2,"div",37)(3,"h2",38),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",39)(7,"a",40),e.ALo(8,"localize"),e._UZ(9,"img",41),e.TgZ(10,"span",42),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"button",43),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.menuToggle())}),e.TgZ(14,"span",42),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.YNc(17,eo,1,0,"span",44),e.YNc(18,Mr,1,0,"span",45),e.qZA()(),e.YNc(19,Pi,24,60,"nav",46),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,10,"Nav.Menu")),e.xp6(3),e.Q6J("routerLink",e.VKq(18,br,e.lcZ(8,12,"/home"))),e.xp6(4),e.Oqu(e.lcZ(12,14,"Nav.Home")),e.xp6(2),e.ekj("tw-bg-primary-700",t.openMenu),e.uIk("aria-expanded",1==t.openMenu),e.xp6(2),e.Oqu(e.lcZ(16,16,"Nav.ToggleNavigation")),e.xp6(2),e.Q6J("ngIf",!t.openMenu),e.xp6(1),e.Q6J("ngIf",t.openMenu),e.xp6(1),e.Q6J("ngIf",t.openMenu&&t.appComponentViewConfig.showNav)}}const Hr=function(r,l){return{"tw-text-sm tw-font-normal tw-px-8 tw-py-3 lg:tw-px-6 xl:tw-px-8":r,"tw-font-semibold tw-h-header tw-px-4 lg:tw-px-6 xl:tw-px-8":l}};function Qs(r,l){if(1&r&&(e.TgZ(0,"li")(1,"a",63),e.ALo(2,"localize"),e._uU(3),e.qZA()()),2&r){const t=e.oxw(),p=t.sub,C=t.activeClass,K=t.route,Ce=t.title;e.Tol(t.classes),e.xp6(1),e.Q6J("ngClass",e.WLB(8,Hr,p,!p))("routerLinkActive",C)("routerLink",e.VKq(11,br,e.lcZ(2,6,K))),e.xp6(2),e.hij(" ",Ce," ")}}function Ws(r,l){1&r&&e.YNc(0,Qs,4,13,"li",62),2&r&&e.Q6J("ngIf",l.display)}function ua(r,l){1&r&&(e.TgZ(0,"div",64)(1,"div",65)(2,"div")(3,"h1",66),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.ALo(8,"translate"),e.qZA()()()()),2&r&&(e.xp6(4),e.Oqu(e.lcZ(5,2,"Errors.Unauthorized")),e.xp6(3),e.Oqu(e.lcZ(8,4,"Errors.ContactAdmin")))}function Ha(r,l){1&r&&e._UZ(0,"router-outlet")}function Ja(r,l){1&r&&e.GkF(0)}function js(r,l){if(1&r&&(e.TgZ(0,"div",68)(1,"div",69),e._UZ(2,"span",70),e.TgZ(3,"span",71)(4,"b"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._uU(7),e.qZA()()()),2&r){const t=e.oxw(),p=t.text;e.Q6J("@fadeInOut",t.check),e.xp6(5),e.hij("",e.lcZ(6,3,"Common.Loading"),":"),e.xp6(2),e.hij(" ",p," ")}}function Lr(r,l){1&r&&e.YNc(0,js,8,5,"div",67),2&r&&e.Q6J("ngIf",l.check)}function no(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"footer",72)(1,"button",73),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.jumpToTop())}),e._UZ(2,"span",74),e.TgZ(3,"span",42),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",75)(7,"div",76)(8,"p",77)(9,"span",78),e._uU(10),e.qZA(),e._uU(11),e.TgZ(12,"a",79),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"ul",80)(16,"li",81)(17,"a",82),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"span",83),e._uU(21,"\u2022"),e.qZA()(),e.TgZ(22,"li",17)(23,"a",84),e._uU(24),e.ALo(25,"translate"),e.qZA()()()()()()}if(2&r){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,6,"Nav.ToTop")),e.xp6(6),e.hij("AdminUI ",t.versionNumber,""),e.xp6(1),e.hij(" \xa9 ",t.appCopyright," "),e.xp6(2),e.hij(" ",e.lcZ(14,8,"Common.CompanyName")," "),e.xp6(5),e.hij(" ",e.lcZ(19,10,"LandingPage.Documentation")," "),e.xp6(6),e.hij(" ",e.lcZ(25,12,"Nav.Support")," ")}}const vo=function(r){return{text:"IdentityServer",check:r}};let io=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt,Et,Wt,an,mn,Mn,vn){this.securityService=t,this.translate=i,this.localizeRouter=p,this.toastr=C,this.router=K,this.healthCheckService=Ce,this.authService=Ue,this.userService=lt,this.localizeParser=Et,this.modalService=Wt,this.browserSameSiteService=an,this.appComponentViewService=mn,this.licenseService=Mn,this.configService=vn,this.user={name:"test"},this.openMenu=!1,this.desktop=!1,this.versionNumber="",this.skipLinkPath="",this.licenseType="",this.organisation="",this.noSameSiteSupport=!1,this.nonProduction=!1,this.defaultUserExists=!1,this.licenseIsInGracePeriod=!1,this.defaultUserRemovalModalId="defaultUserRemovalModal",this.resolveModalActions=[Vt.n.Save],K.events.pipe((0,de.h)(li=>li instanceof yn.m2)).subscribe(()=>{this.router.url.endsWith("#main-content")||(this.skipLinkPath=`${this.router.url}#main-content`)}),this.healthCheckService.uiHealthCheckComplete.subscribe(()=>{this.versionNumber=ge}),gi.Zr.defaultLocale="utc",gi.Zr.defaultZone="utc";const Bn=this.localizeRouter.parser.currentLang;document.getElementsByTagName("html")[0].setAttribute("lang",Bn);const Gn=new Date;this.appCopyright="2017 - "+Gn.getFullYear()}ngOnInit(){if(this.detectSize(),this.configService.getConfig().subscribe({next:i=>{this.dynamicAuthEnabled=i.featureFlagOptions.dynamicAuthenticationFlag!=pi.u.Disabled}}),this.router.events.subscribe(i=>{this.desktop||(this.openMenu=!1)}),this.appViewComponentSubscription=this.appComponentViewService.viewConfig$.subscribe(i=>{this.appComponentViewConfig=i}),this.healthCheckService.checkHealthUi().pipe((0,Oe.q)(1)).subscribe({next:i=>{this.healthCheckService.uiReady=!0,this.healthCheckService.uiHealthCheckComplete.next(!0),"string"==typeof i&&!(0,ot.Ew)(i)&&this.toastr.warning(i,this.translate.instant("Common.Warning"),{timeOut:3e3,extendedTimeOut:0,enableHtml:!0}),(0,Xs.D)({authentication:this.authService.isAuthenticatedCheck(),permissions:this.securityService.userPermissions$}).subscribe(p=>{p.authentication.isAuthenticated&&p.authentication.username!=zt.n.DefaultAdministratorUsername&&p.permissions.includes(Pt.y[Pt.y.All])&&this.userService.getUsersLightweight(He.de.defaultEmbeddedUserName).subscribe(C=>{C.results.length>0&&(this.defaultUserExists=!0)})}),this.licenseService.getLicenseInfo().subscribe(p=>{if(this.licenseIsInGracePeriod=p.isInGracePeriod,this.licenseIsInGracePeriod){const C=(0,ot.X1)(p.gracePeriodExpiry,"ccc LLL dd yyyy, T");let K=this.translate.instant("Common.LicenseIsInGracePeriod");K=K.replace("{0}",C),this.licenseIsInGracePeriodMessage=K}})},error:i=>{this.healthCheckService.uiHealthCheckComplete.next(!0);const p=this.getHealthCheckError(i);this.toastr.error(this.translate.instant("LandingPage.UIError",{error:p?` (${p})`:""}),this.translate.instant("Notifications.Error"),{timeOut:0,extendedTimeOut:0,enableHtml:!0})}}),this.healthCheckService.checkHealthIdentityServer().pipe((0,Oe.q)(1)).subscribe(i=>{this.healthCheckService.idsReady=!0,this.healthCheckService.idsHealthCheckComplete.next(!0)},i=>{this.healthCheckService.idsHealthCheckComplete.next(!0);const p=this.getHealthCheckError(i);this.toastr.error(this.translate.instant("LandingPage.IdentityServerError",{link:He.de.checkHealthIdentityServerDocs,error:p?` (${p})`:""}),this.translate.instant("Notifications.Error"),{timeOut:0,extendedTimeOut:0,enableHtml:!0})}),!this.browserSameSiteService.validBrowser()&&!localStorage.getItem("closedSameSiteBanner")){const i={link:He.de.sameSiteDocs};this.noSameSiteSupport=!0,this.toastr.error(this.translate.instant("Common.SameSiteCookiesError",i),this.translate.instant("Notifications.Error"),{timeOut:0,extendedTimeOut:0,enableHtml:!0})}}closeSameSiteBrowserNotification(){this.noSameSiteSupport=!1,localStorage.setItem("closedSameSiteBanner","1")}defaultUserDeleteConfirmation(){this.modalService.showById(this.defaultUserRemovalModalId,this.defaultUserResolveButton)}cancelDefaultUserDelete(){this.modalService.hideById(this.defaultUserRemovalModalId)}removeDefaultUser(){this.userService.deleteDefaultUser().subscribe(()=>{this.defaultUserExists=!1,this.toastr.success(this.translate.instant("LandingPage.DefaultUserRemoved"),this.translate.instant("Notifications.Success"),{timeOut:0,extendedTimeOut:0,enableHtml:!0}),this.modalService.hideById(this.defaultUserRemovalModalId)},t=>{this.toastr.error(this.translate.instant("Notifications.CheckLogs"),this.translate.instant("Notifications.SomethingWrong"),{timeOut:0,extendedTimeOut:0,enableHtml:!0})})}ngOnDestroy(){this.userDataSubscription&&this.userDataSubscription.unsubscribe(),this.licenseInfoSubscription&&this.licenseInfoSubscription.unsubscribe(),this.appViewComponentSubscription&&this.appViewComponentSubscription.unsubscribe()}isActive(t,i=!1){return this.router.isActive(t,i)}isActiveResourceRoute(){return this.router.url.includes("/identityresources")||this.router.url.includes("/protectedresources")}detectSize(){const t=window.matchMedia("(min-width: 1024px)");t.matches&&!this.desktop?(this.desktop=!0,this.openMenu=!0):!t.matches&&this.desktop&&(this.desktop=!1,this.openMenu=!1)}logoff(){this.authService.logoff()}menuToggle(){this.openMenu=!this.openMenu}jumpToTop(){window.scrollTo(0,0)}getHealthCheckError(t){if(!t)return"";const i=t.error;if(i){if("string"==typeof i)return i;if(i.errors&&i.errors.length>0)return i.errors[0]}return t.message?t.message:t.statusText?t.statusText:`${this.translate.instant("Notifications.SomethingWrong")}. ${this.translate.instant("Notifications.CheckLogs")}`}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(ti.I),e.Y36(Ut.sK),e.Y36(Un.An),e.Y36(si._W),e.Y36(yn.F0),e.Y36(Ci.G),e.Y36(hr.e),e.Y36(Cr.K),e.Y36(Un.DJ),e.Y36(sr.Z),e.Y36(Wi),e.Y36(fo.t),e.Y36(ca.E),e.Y36(Yr.E))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-root"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Jo,5),e.Gf(ba,5),e.Gf(Bs,5)),2&t){let p;e.iGM(p=e.CRH())&&(i.resourcesMenu=p.first),e.iGM(p=e.CRH())&&(i.sameSiteBrowserNotification=p.first),e.iGM(p=e.CRH())&&(i.defaultUserResolveButton=p.first)}},decls:20,vars:20,consts:[["id","skipLink",1,"sr-only","sr-only-focusable","tw-block","tw-bg-grey-200","tw-px-4","tw-py-3","tw-font-semibold","tw-left-0","tw-top-0","tw-z-50","focus:tw-m-1","focus:tw-text-blue-500","focus:tw-fixed",3,"href"],["class","tw-bg-red-500 tw-text-white tw-text-xs tw-px-4",4,"ngIf"],["class","tw-bg-red-500 tw-text-white tw-text-xs tw-px-4 tw-py-2",4,"ngIf"],["id","licenseExpiredNotification","class","tw-bg-red-500 tw-text-white tw-text-xs tw-px-4 tw-py-2",4,"ngIf"],["id","metaMenu","class","tw-bg-primary-500 tw-border-b tw-border-primary-400 tw-text-white tw-text-xs tw-px-4",4,"ngIf"],["id","mainNavBar","class","tw-bg-primary-500 tw-text-primary-100 tw-relative tw-z-30","role","banner",3,"resize",4,"ngIf"],["commonNavItem",""],["id","main-content","role","main","tabindex","-1",1,"tw-bg-grey-100","tw-px-4","tw-pt-5","tw-pb-5","focus:tw-shadow-none","xs:tw-pb-20"],[3,"actions","title","modalId","saveText","onSave","onCancel"],["class","tw-container tw-pb-10 tw-mx-auto",4,"ngIf"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["commonLoader",""],["id","footer","class","tw-bg-grey-200 tw-border-t tw-border-grey-300 tw-text-grey-600 tw-text-xs tw-h-12 tw-fixed tw-bottom-0 tw-inset-x-0 tw-z-30",4,"ngIf"],[1,"tw-bg-red-500","tw-text-white","tw-text-xs","tw-px-4"],["sameSiteBrowserNotification",""],[1,"tw-container","tw-mx-auto","tw-text-left"],[1,"tw-flex","tw-items-center"],[1,"tw-w-full","tw-left-0"],[1,"tw-flex","tw-items-center","tw-text-body","tw-text-md","tw-py-2","tw-text-white"],[1,"tw-block","tw-w-full"],[1,"tw-block","tw-underline","hover:tw-no-underline","tw-ml-2","tw-shrink-0",3,"click"],[1,"tw-bg-red-500","tw-text-white","tw-text-xs","tw-px-4","tw-py-2"],[1,"tw-text-black","tw-bg-white","tw-btn","tw-block","tw-ml-2","tw-shrink-0",3,"click"],["defaultUserResolveButton",""],["id","licenseExpiredNotification",1,"tw-bg-red-500","tw-text-white","tw-text-xs","tw-px-4","tw-py-2"],["id","metaMenu",1,"tw-bg-primary-500","tw-border-b","tw-border-primary-400","tw-text-white","tw-text-xs","tw-px-4"],[1,"tw-flex","tw-items-center","tw-h-8"],[3,"ngClass",4,"ngIf"],[1,"tw-hidden","tw-items-center","tw-ml-auto","sm:tw-flex"],["aria-hidden","true",1,"fad","fa-user-lock","tw-mr-2",2,"--fa-secondary-color","#4DAC4D","--fa-secondary-opacity","1.0"],[1,"tw-font-semibold"],["aria-hidden","true",1,"tw-mx-3","tw-opacity-50","tw-text-base"],["tabindex","0",1,"tw-self-stretch","tw-flex","tw-items-center","tw-ml-auto","tw-text-white","tw-font-normal","tw-cursor-pointer","hover:tw-underline","sm:tw-ml-0","trans",3,"click"],[3,"ngClass"],["id","mainNavBar","role","banner",1,"tw-bg-primary-500","tw-text-primary-100","tw-relative","tw-z-30",3,"resize"],[1,"tw-container","tw-text-left","tw-mx-auto"],[1,"lg:tw-flex"],["id","navMenuTitle",1,"sr-only"],[1,"tw-flex","tw-justify-between","tw-h-header","tw-ml-4","xl:tw-mr-4","max:tw-ml-0"],[1,"tw-flex","tw-items-center","tw-justify-center","tw-shrink-0",3,"routerLink"],["src","/assets/img/logo-persimmon.png","alt","","aria-hidden","true",1,"tw-w-8"],[1,"sr-only"],["aria-controls","mainMenu",1,"tw-shrink-0","tw-text-xl","tw-w-header","lg:tw-hidden",3,"click"],["class","fas fa-bars fa-fw","aria-hidden","true",4,"ngIf"],["class","fas fa-times fa-fw","aria-hidden","true",4,"ngIf"],["class","tw-bg-primary-700 tw-relative lg:tw-flex lg:tw-bg-transparent","role","navigation","aria-labelledby","navMenuTitle",4,"ngIf"],["aria-hidden","true",1,"fas","fa-bars","fa-fw"],["aria-hidden","true",1,"fas","fa-times","fa-fw"],["role","navigation","aria-labelledby","navMenuTitle",1,"tw-bg-primary-700","tw-relative","lg:tw-flex","lg:tw-bg-transparent"],["class","tw-block tw-bg-primary-700 tw-opacity-75 lg:tw-bg-primary-500 tw-absolute tw-inset-0 tw-z-20",4,"ngIf"],["class","tw-relative",4,"ngIf"],[1,"lg:tw-hidden"],[1,"tw-flex","tw-items-center","tw-text-primary-200","tw-font-semibold","tw-h-header","tw-px-4","tw-w-full","tw-truncate","hover:tw-bg-primary-600","hover:tw-text-white","focus:tw-bg-primary-600","focus:tw-text-white","lg:tw-px-6","xl:tw-px-8",3,"click"],[1,"tw-block","tw-bg-primary-700","tw-opacity-75","lg:tw-bg-primary-500","tw-absolute","tw-inset-0","tw-z-20"],[1,"tw-relative"],["resourcesMenu",""],["id","menuResourcesToggle","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"tw-flex","tw-items-center","tw-text-primary-200","tw-font-semibold","tw-h-header","tw-w-full","tw-px-4","tw-relative","tw-truncate","hover:tw-text-white","focus:tw-text-white","lg:tw-px-6","xl:tw-px-8","dropdown-toggle","trans"],[1,"tw-block","tw-truncate"],["aria-hidden","true",1,"fas","fa-caret-down","tw-text-xs","tw-ml-2","tw-opacity-50"],[1,"tw-bg-primary-800","tw-relative","lg:tw-bg-primary-500","lg:tw-absolute","dropdown-menu"],["role","menu",1,"lg:tw-pt-2","lg:tw-pb-3"],[3,"class",4,"ngIf"],[1,"tw-flex","tw-items-center","tw-text-primary-200","tw-relative","tw-truncate","hover:tw-text-white","focus:tw-text-white",3,"ngClass","routerLinkActive","routerLink"],[1,"tw-container","tw-pb-10","tw-mx-auto"],["role","alert",1,"tw-alert-danger"],[1,"tw-text-sm","tw-font-semibold"],["class","tw-fixed tw-w-full tw-bottom-0 tw-left-0 tw-z-40",4,"ngIf"],[1,"tw-fixed","tw-w-full","tw-bottom-0","tw-left-0","tw-z-40"],[1,"tw-flex","tw-items-center","tw-bg-orange-500","tw-shadow-toast","tw-text-body","tw-text-sm","tw-px-4","tw-py-3"],[1,"fad","fa-spinner-third","fa-spin","tw-mr-2"],[1,"tw-block"],["id","footer",1,"tw-bg-grey-200","tw-border-t","tw-border-grey-300","tw-text-grey-600","tw-text-xs","tw-h-12","tw-fixed","tw-bottom-0","tw-inset-x-0","tw-z-30"],["id","jumpToTop",1,"tw-hidden","tw-items-center","tw-justify-center","tw-bg-grey-400","tw-m-2","tw-w-8","tw-h-8","tw-text-grey-800","tw-rounded","tw-cursor-pointer","tw-fixed","tw-right-0","tw-bottom-0","trans-bg","hover:tw-bg-grey-500","max:tw-flex",3,"click"],["aria-hidden","true",1,"fas","fa-chevron-up"],[1,"tw-flex","tw-items-center","tw-h-12","tw-px-4"],[1,"tw-flex","tw-items-center","tw-justify-center","tw-container","tw-w-full","tw-mx-auto","md:tw-justify-between"],[1,"tw-text-center","md:tw-text-left"],[1,"tw-mr-2","md:tw-mr-3"],["id","RSKBackLink","href","https://www.rocksolidknowledge.com/","target","_blank",1,"tw-text-grey-600","tw-font-normal","hover:tw-text-grey-700","trans"],[1,"tw-hidden","tw-items-center","md:tw-flex"],[1,"tw-flex","tw-items-center","tw-mr-2"],["href","documentation/index.html","target","_blank",1,"tw-text-grey-600","tw-font-normal","hover:tw-text-grey-700","trans"],["aria-hidden","true",1,"tw-ml-2","tw-opacity-50","tw-text-sm"],["href","mailto:support@rocksolidknowledge.zendesk.com","target","_blank",1,"tw-text-grey-600","tw-font-normal","hover:tw-text-grey-700","trans"]],template:function(t,i){if(1&t&&(e.TgZ(0,"a",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.YNc(3,gs,14,9,"nav",1),e.YNc(4,qo,14,9,"nav",2),e.YNc(5,or,8,4,"nav",3),e.YNc(6,wa,14,8,"nav",4),e.YNc(7,ni,20,20,"header",5),e.YNc(8,Ws,1,1,"ng-template",null,6,e.W1O),e.TgZ(10,"main",7)(11,"app-custom-modal",8),e.NdJ("onSave",function(){return i.removeDefaultUser()})("onCancel",function(){return i.cancelDefaultUserDelete()}),e.TgZ(12,"p"),e._uU(13," To secure your AdminUI, the 'info@rocksolidknowledge' Administrator needs to be removed from your database "),e.qZA()(),e.YNc(14,ua,9,6,"div",9),e.YNc(15,Ha,1,0,"router-outlet",10),e.qZA(),e.YNc(16,Ja,1,0,"ng-container",11),e.YNc(17,Lr,1,1,"ng-template",null,12,e.W1O),e.YNc(19,no,26,14,"footer",13)),2&t){const p=e.MAs(18);e.Q6J("href",i.skipLinkPath,e.LSH),e.xp6(1),e.hij(" ",e.lcZ(2,16,"Nav.SkipToContent"),"\n"),e.xp6(2),e.Q6J("ngIf",i.noSameSiteSupport),e.xp6(1),e.Q6J("ngIf",i.defaultUserExists),e.xp6(1),e.Q6J("ngIf",i.licenseIsInGracePeriod),e.xp6(1),e.Q6J("ngIf",i.appComponentViewConfig.showBanner),e.xp6(1),e.Q6J("ngIf",i.appComponentViewConfig.showNav),e.xp6(4),e.Q6J("actions",i.resolveModalActions)("title","Remove Default Administrator")("modalId",i.defaultUserRemovalModalId)("saveText","Remove User"),e.xp6(3),e.Q6J("ngIf",i.securityService.noPermissions),e.xp6(1),e.Q6J("ngIf",!i.securityService.noPermissions),e.xp6(1),e.Q6J("ngTemplateOutlet",p)("ngTemplateOutletContext",e.VKq(18,vo,!i.healthCheckService.idsReady)),e.xp6(3),e.Q6J("ngIf",i.appComponentViewConfig.showFooter)}},dependencies:[yn.lC,yn.yS,yn.Od,z.mk,z.O5,z.tP,ms.R,Ut.X$,Un.lO],encapsulation:2,data:{animation:[(0,Oo.zS)(),(0,Oo.Ic)()]}}),r})();var Ks=m(2320),yo=m(5241),Ms=m(9241),le=m(388);class gt{constructor(){this.rss=new Z,this.rss.channel=new Ae,this.rss.channel.item=new Array}}class Z{}class Ae{}class Nt{}var Cn=m(317),En=m(5925);function er(r,l){1&r&&(e.TgZ(0,"div",6),e._UZ(1,"app-simple-loader"),e.qZA())}function wr(r,l){if(1&r&&(e.TgZ(0,"li",8)(1,"a",9)(2,"h3",10),e._uU(3),e.qZA(),e.TgZ(4,"span",11),e._uU(5),e.qZA(),e.TgZ(6,"p",12),e._uU(7),e.qZA()()()),2&r){const t=l.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("href",i.domSanitizer.bypassSecurityTrustUrl(t.link),e.LSH),e.xp6(2),e.Oqu(t.title),e.xp6(2),e.Oqu(t.pubDate),e.xp6(2),e.Oqu(t.description)}}function Ro(r,l){if(1&r&&(e.TgZ(0,"ul"),e.YNc(1,wr,8,4,"li",7),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.dto?null:t.dto.rss.channel.item)}}const Po=function(r,l){return{"tw-bg-white":r,"tw-bg-grey-100":l}};let il=(()=>{class r{constructor(t,i,p){this.http=t,this.domSanitizer=i,this.translate=p,this.rssURL="https://www.identityserver.com/rss",this.versionNumber="",this.altTheme=!1,this.errorEntry=new Nt}ngOnInit(){this.isLoading=!0,this.http.get(this.rssURL,{headers:new S.WM({Accept:"application/xml"}),responseType:"text"}).subscribe(t=>{this.dto=(new Cn).xml2js(t),Object.setPrototypeOf(this.dto,gt.prototype),this.dto.rss.channel.item.forEach(i=>{i.pubDate=this.formatDate(i.pubDate)}),this.isLoading=!1},t=>{this.errorEntry.title=this.translate.instant("Errors.RssUnavailable"),this.dto=new gt,this.dto.rss.channel.item.push(this.errorEntry),this.isLoading=!1})}formatDate(t){return t?gi.ou.fromHTTP(t).toFormat("DD"):""}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(S.eN),e.Y36(n.H7),e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-rss-feed"]],inputs:{altTheme:"altTheme"},decls:9,vars:9,consts:[["id","rssFeed"],[1,"tw-flex","tw-items-center","tw-text-lg","tw-font-semibold","tw-mb-4"],["aria-hidden","true",1,"fas","fa-rss","tw-text-sm","tw-text-orange-500","tw-mr-2"],[1,"tw-border","tw-border-grey-200","tw-shadow-inner","tw-h-72","tw-p-4","tw-overflow-y-auto","tw-relative","scrollbars",3,"ngClass"],["class","tw-flex tw-items-center tw-justify-center tw-absolute tw-inset-0",4,"ngIf"],[4,"ngIf"],[1,"tw-flex","tw-items-center","tw-justify-center","tw-absolute","tw-inset-0"],["class","tw-border-b tw-border-grey-200 tw-mb-5 tw-pb-5 last:tw-mb-0 last:tw-pb-0 last:tw-border-0",4,"ngFor","ngForOf"],[1,"tw-border-b","tw-border-grey-200","tw-mb-5","tw-pb-5","last:tw-mb-0","last:tw-pb-0","last:tw-border-0"],["target","_blank",1,"tw-block",3,"href"],[1,"tw-text-base"],[1,"tw-block","tw-text-xs","tw-text-grey-600","tw-font-normal","tw-mt-1"],[1,"tw-text-sm","tw-text-grey-800","tw-font-normal","tw-mt-2"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._UZ(2,"span",2),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",3),e.YNc(7,er,2,0,"div",4),e.YNc(8,Ro,2,1,"ul",5),e.qZA()()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,4,"LandingPage.LatestNews")),e.xp6(2),e.Q6J("ngClass",e.WLB(6,Po,!i.altTheme,i.altTheme)),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isLoading))},dependencies:[z.mk,z.sg,z.O5,En.w,Ut.X$],encapsulation:2}),r})();function jd(r,l){if(1&r&&(e.TgZ(0,"li",16)(1,"span",17),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",19),e._uU(5),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"Index.LicensedTo")),e.xp6(3),e.hij(" ",t.securityService.organisation," ")}}const _s=function(r,l){return{"tw-pill":r,"tw-pill-info":l}};function Aa(r,l){if(1&r&&(e.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"ul",14),e.YNc(5,jd,6,4,"li",15),e.TgZ(6,"li",16)(7,"span",17),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"span",18),e._uU(11),e.qZA()()()()()()()),2&r){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.securityService.organisation),e.xp6(3),e.Oqu(e.lcZ(9,4,"Index.LicenseType")),e.xp6(2),e.Q6J("ngClass",e.WLB(6,_s,t.isNonProd(),!t.isNonProd())),e.xp6(1),e.hij(" ",t.securityService.licenseType," ")}}function Yo(r,l){1&r&&e.GkF(0)}function Kd(r,l){1&r&&e.GkF(0)}function Ru(r,l){1&r&&e.GkF(0)}function ro(r,l){if(1&r&&(e.TgZ(0,"li",20)(1,"a",21),e._UZ(2,"span",22),e.TgZ(3,"span",23),e._uU(4),e.qZA()()()),2&r){const t=l.title,i=l.link,p=l.icon;e.xp6(1),e.Q6J("href",i,e.LSH),e.xp6(1),e.Gre("",p," fa-fw tw-shrink-0 tw-opacity-75 tw-mr-3 sm:tw-block sm:tw-mr-0 sm:tw-text-2xl md:tw-text-3xl"),e.xp6(2),e.Oqu(t)}}const Xo=function(r){return{title:r,link:"documentation/index.html",icon:"fad fa-file fa-swap-opacity"}},Pl=function(r,l){return{title:r,link:l,icon:"fad fa-file-code fa-swap-opacity"}},_l=function(r){return{title:r,link:"mailto:support@identityserver.com?subject=AdminUI",icon:"fad fa-envelope fa-swap-opacity"}};let Le=(()=>{class r{constructor(t,i,p,C){this.titleService=t,this.translate=i,this.securityService=p,this.healthCheckService=C,this.apiDocsLink="",this.titleService.setTitle(`Home - ${He.de.SITE_TITLE}`),this.apiDocsLink="/swagger"}ngOnInit(){}ngAfterViewInit(){document.dispatchEvent(new Event("appready"))}isDemo(){return"Demo"===this.securityService.licenseType}isNonProd(){return"Production"!==this.securityService.licenseType}isLegacy(){return"Legacy"===this.securityService.organisation}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.Dx),e.Y36(Ut.sK),e.Y36(ti.I),e.Y36(Ci.G))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-index"]],decls:18,vars:23,consts:[[1,"sr-only"],["class","tw-bg-grey-200 tw-border-b tw-border-grey-300 tw--mt-5 tw--mx-4 tw-mb-6 tw-px-4",4,"ngIf"],[1,"tw-container","tw-text-left","tw-mx-auto","tw-mb-4"],[1,"tw-max-w-2xl","tw-mx-auto"],[1,"tw--ml-2","tw--mt-2","md:tw--ml-4","md:tw--mt-4"],[1,"tw-flex","tw-flex-wrap"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tw-bg-white","tw-mt-6","tw-p-6","tw-max-w-2xl","tw-mx-auto","tw-shadow","tw-rounded"],["altTheme","true"],["commonDocsButton",""],[1,"tw-bg-grey-200","tw-border-b","tw-border-grey-300","tw--mt-5","tw--mx-4","tw-mb-6","tw-px-4"],[1,"tw-py-4"],[1,"tw-container","tw-text-left","tw-mx-auto"],[1,"tw--mt-4","tw--ml-4"],[1,"tw-flex","tw-flex-wrap","tw-items-center","tw-justify-between","tw-text-xs","tw-text-grey-700","lg:tw-justify-end"],["class","tw-pt-4 tw-pl-4",4,"ngIf"],[1,"tw-pt-4","tw-pl-4"],[1,"tw-mr-2"],[3,"ngClass"],[1,"tw-pill"],[1,"tw-w-full","tw-pt-2","tw-pl-2","sm:tw-w-1/3","md:tw-pt-4","md:tw-pl-4"],["target","_blank",1,"tw-btn","tw-justify-start","tw-py-4","tw-w-full","sm:tw-flex-col",3,"href"],["aria-hidden","true"],[1,"tw-truncate","sm:tw-block","sm:tw-mt-3","sm:tw-text-sm","md:tw-text-base"]],template:function(t,i){if(1&t&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.YNc(3,Aa,12,9,"div",1),e.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"ul",5),e.YNc(8,Yo,1,0,"ng-container",6),e.ALo(9,"translate"),e.YNc(10,Kd,1,0,"ng-container",6),e.ALo(11,"translate"),e.YNc(12,Ru,1,0,"ng-container",6),e.ALo(13,"translate"),e.qZA()()(),e.TgZ(14,"div",7),e._UZ(15,"app-rss-feed",8),e.qZA()(),e.YNc(16,ro,5,5,"ng-template",null,9,e.W1O)),2&t){const p=e.MAs(17);e.xp6(1),e.Oqu(e.lcZ(2,8,"Common.AppName")),e.xp6(2),e.Q6J("ngIf",!i.isLegacy()),e.xp6(5),e.Q6J("ngTemplateOutlet",p)("ngTemplateOutletContext",e.VKq(16,Xo,e.lcZ(9,10,"LandingPage.Documentation"))),e.xp6(2),e.Q6J("ngTemplateOutlet",p)("ngTemplateOutletContext",e.WLB(18,Pl,e.lcZ(11,12,"LandingPage.APIDocs"),i.apiDocsLink)),e.xp6(2),e.Q6J("ngTemplateOutlet",p)("ngTemplateOutletContext",e.VKq(21,_l,e.lcZ(13,14,"Nav.Support")))}},dependencies:[z.mk,z.O5,z.tP,il,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var o=m(7579),u=m(4004),_=m(8372),T=m(1884),D=m(5683),F=m(8675),re=m(5577),ce=m(9883),Ee=m(4889),dt=m(2294),wt=m(7696),kt=m(8163);let sn=(()=>{class r{constructor(){this.placeholder=null,this.onSearch=new e.vpe}search(t){this.onSearch.emit(t.target.value)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-search"]],inputs:{placeholder:"placeholder"},outputs:{onSearch:"onSearch"},decls:8,vars:4,consts:[["id","searchContainer",1,"tw-mb-2"],[1,"tw-flex","tw-bg-white","tw-border","tw-border-grey-300","tw-opacity-75","tw-cursor-text","tw-rounded","focus-within:tw-opacity-100","focus-within:tw-border-blue-400","trans"],["for","searchTerm",1,"tw-flex","tw-items-center","tw-text-grey-500","tw-m-0","tw-ml-3"],["aria-hidden","true",1,"far","fa-search","tw-text-sm"],[1,"sr-only"],["id","searchTerm","type","text",1,"tw-bg-transparent","tw-border-0","tw-text-base","tw-leading-tight","tw-px-2","tw-py-2","tw-w-full","focus:tw-outline-none","trans",3,"placeholder","keyup"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._UZ(3,"span",3),e.TgZ(4,"span",4),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"input",5),e.NdJ("keyup",function(C){return i.search(C)}),e.qZA()()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,2,"Common.Search")),e.xp6(2),e.Q6J("placeholder",i.placeholder))},dependencies:[Ut.X$],encapsulation:2}),r})();class Sn{constructor(){this.selected=!1}}var Dn=m(7608);const qi=["addRoleModal"],Ur=function(){return{animated:!1,backdrop:"static"}};let Ns=(()=>{class r{constructor(t,i,p,C,K,Ce){this.rolesService=t,this.errorService=i,this.translate=p,this.router=C,this.fb=K,this.toastr=Ce,this.added=new e.vpe}keydown(t){"Enter"===t.key&&this.addRoleForm.valid&&this.addRole()}ngOnInit(){this.addRoleForm=this.fb.group({name:["",h.kI.required],description:["",h.kI.maxLength(1e3)]})}addAnotherRole(){this.addAnother=!0,this.addRole()}addRole(){let t=new Sn;t=this.addRoleForm.value,t.name=t.name.trim(),this.rolesService.addRole(t).subscribe(i=>{this.addAnother||this.hide(),this.addAnother=!1,this.addRoleForm.reset(),this.toastr.success(this.translate.instant("Roles.Role")+" "+t.name+" "+this.translate.instant("Common.Created"),this.translate.instant("Roles.RoleCreated")),this.added.emit(!0)},i=>{this.errorService.handleError(i)})}hide(){this.addRoleModal.hide()}show(){this.addRoleModal.show(),this.addRoleForm.reset()}ngOnDestroy(){this.hide()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(ce.f),e.Y36(Ee.T),e.Y36(Ut.sK),e.Y36(yn.F0),e.Y36(h.QS),e.Y36(si._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-role"]],viewQuery:function(t,i){if(1&t&&e.Gf(qi,7),2&t){let p;e.iGM(p=e.CRH())&&(i.addRoleModal=p.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown",function(C){return i.keydown(C)},!1,e.evT)},outputs:{added:"added"},decls:33,vars:26,consts:[["bsModal","","id","addRoleModal","tabindex","-1","role","dialog","aria-hidden","true",1,"modal",3,"config"],["addRoleModal","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","scrollbars"],[3,"formGroup"],[3,"id","label","help"],["type","text","id","addRoleName","formControlName","name",1,"tw-form-control"],[3,"id","label","isLast"],["rows","2","id","addRoleDescription","formControlName","description",1,"tw-form-control"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["type","submit","id","addRoleSubmit",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],[1,"tw-hidden","xs:tw-inline"],["type","button","id","addRoleReSubmit",1,"tw-btn",3,"disabled","click"],[1,"tw-btn-link","tw--mr-4",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.hide()}),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",9)(14,"form",10)(15,"app-form-row",11),e._UZ(16,"input",12),e.qZA(),e.TgZ(17,"app-form-row",13),e._UZ(18,"textarea",14),e.qZA()()(),e._UZ(19,"div",15),e.TgZ(20,"div",16)(21,"div",17)(22,"div",18)(23,"button",19),e.NdJ("click",function(){return i.addRole(),i.hide()}),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"span",20)(27,"button",21),e.NdJ("click",function(){return i.addAnotherRole()}),e._uU(28),e.ALo(29,"translate"),e.qZA()()(),e.TgZ(30,"button",22),e.NdJ("click",function(){return i.hide()}),e._uU(31),e.ALo(32,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("config",e.DdM(25,Ur)),e.xp6(6),e.Oqu(e.lcZ(7,15,"Roles.NewRole")),e.xp6(5),e.Oqu(e.lcZ(12,17,"Common.Close")),e.xp6(3),e.Q6J("formGroup",i.addRoleForm),e.xp6(1),e.Q6J("id","addRoleName")("label","Common.Name")("help","Roles.TrimWhitespaceHelp"),e.xp6(2),e.Q6J("id","addRoleDescription")("label","Common.Description")("isLast",!0),e.xp6(6),e.Q6J("disabled",!i.addRoleForm.valid),e.xp6(1),e.Oqu(e.lcZ(25,19,"Common.Save")),e.xp6(3),e.Q6J("disabled",!i.addRoleForm.valid),e.xp6(1),e.Oqu(e.lcZ(29,21,"Common.SaveAndAdd")),e.xp6(3),e.Oqu(e.lcZ(32,23,"Common.Cancel")))},dependencies:[h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,le.oB,Dn.L,Ut.X$],encapsulation:2}),r})();function vs(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-action-bar"),e.ynx(1,9),e.TgZ(2,"button",10),e.NdJ("click",function(){e.CHM(t),e.oxw();const p=e.MAs(3);return e.KtG(p.show())}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.BQk(),e.qZA()}2&r&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"Roles.AddRole")," "))}function Fs(r,l){1&r&&e._UZ(0,"app-simple-loader")}function Nr(r,l){1&r&&(e.TgZ(0,"div",11)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Roles.NoRolesFound")))}function Os(r,l){1&r&&e._UZ(0,"span",23)}function rl(r,l){1&r&&e._UZ(0,"span",24)}function $d(r,l){1&r&&(e.TgZ(0,"span",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Policy")," "))}function qa(r,l){1&r&&(e.TgZ(0,"span",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Reserved")," "))}const Ll=function(r,l){return{"fad fa-pencil":r,"fas fa-eye":l}};function Pu(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr",25)(1,"td",26),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditRole(C))}),e.TgZ(2,"b",27),e._uU(3),e.qZA()(),e.TgZ(4,"td",28),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditRole(C))}),e._uU(5),e.qZA(),e.TgZ(6,"td",29),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditRole(C))}),e.YNc(7,$d,3,3,"span",30),e.qZA(),e.TgZ(8,"td",31),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditRole(C))}),e.YNc(9,qa,3,3,"span",32),e.qZA(),e.TgZ(10,"td",33),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditRole(C))}),e.TgZ(11,"button",34),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditRole(C))}),e._UZ(12,"span",35),e.TgZ(13,"span",19),e._uU(14),e.ALo(15,"translate"),e.qZA()()()()}if(2&r){const t=l.$implicit,i=e.oxw(2);e.xp6(3),e.Oqu(t.name),e.xp6(2),e.hij(" ",t.description," "),e.xp6(2),e.Q6J("ngIf",i.isPolicyRole(t)),e.xp6(2),e.Q6J("ngIf",t.reserved),e.xp6(3),e.Q6J("ngClass",e.WLB(8,Ll,!i.isUserManagerReadOnly,i.isUserManagerReadOnly)),e.xp6(2),e.Oqu(e.lcZ(15,6,"Common.Edit"))}}function Lo(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"table",12)(1,"thead")(2,"tr")(3,"th",13),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.sort())}),e.TgZ(4,"span",14),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,Os,1,0,"span",15),e.YNc(8,rl,1,0,"span",16),e.qZA(),e.TgZ(9,"th",17),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",18)(13,"span",19),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"th",20)(17,"span",19),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"th",21)(21,"span",19),e._uU(22),e.ALo(23,"translate"),e.qZA()()()(),e.TgZ(24,"tbody"),e.YNc(25,Pu,16,11,"tr",22),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,8,"Common.Name")),e.xp6(2),e.Q6J("ngIf",t.sortIcon),e.xp6(1),e.Q6J("ngIf",!t.sortIcon),e.xp6(2),e.hij(" ",e.lcZ(11,10,"Common.Description")," "),e.xp6(4),e.Oqu(e.lcZ(15,12,"Common.Policy")),e.xp6(4),e.Oqu(e.lcZ(19,14,"Common.Reserved")),e.xp6(4),e.Oqu(e.lcZ(23,16,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",t.roles)}}function Or(r,l){if(1&r&&e._UZ(0,"app-pager",38),2&r){const t=e.oxw();e.Q6J("totalResults",null==t.roles?null:t.roles.length)}}let Sa=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue){this.rolesService=t,this.securityService=i,this.translate=p,this.router=C,this.titleService=K,this.localize=Ce,this.errorService=Ue,this.roleListLength=0,this.sortCriteria="-name",this.term="",this.searchTermStream=new o.x,this.sortStream=new o.x}ngOnInit(){const t=this.translate.instant("Nav.Roles")+" - "+He.de.SITE_TITLE;this.titleService.setTitle(t),this.isLoading=!0;const i=this.sortStream.pipe((0,u.U)(K=>({search:this.term,sort:K})));this.searchTermStream.pipe((0,_.b)(300),(0,T.x)(),(0,u.U)(K=>(this.term=K,{search:K,sort:this.sortCriteria}))).pipe((0,D.T)(i),(0,F.O)({search:this.term,sort:this.sortCriteria}),(0,re.z)(K=>this.rolesService.getRoles(K.search,K.sort))).subscribe(K=>{this.roles=K,this.isLoading=!1},K=>{this.errorService.handleError(K),this.isLoading=!1})}search(t){this.searchTermStream.next(t)}update(){this.sortStream.next(this.sortCriteria)}sort(){this.sortCriteria=this.sortCriteria.startsWith("-")?"name":"-name",this.sortStream.next(this.sortCriteria),this.sortIcon=!this.sortIcon}viewOrEditRole(t){this.isUserManagerReadOnly?this.viewRole(t):this.editRole(t)}editRole(t){const i=[this.localize.translateRoute("/roles"),t.id];this.router.navigate(i)}viewRole(t){const i=[this.localize.translateRoute("/roles/view"),t.id];this.router.navigate(i)}allowedToEditRole(t){return!this.securityService.allView&&this.isPolicyRole(t)}isPolicyRole(t){const i=this.securityService.policyClaims;for(let p=0;p<i.length;p++)if("role"===i[p].type&&i[p].value===t.name)return!0;return!1}get isUserManagerReadOnly(){return(0,ot.ub)(this.securityService.userPermissions)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(ce.f),e.Y36(ti.I),e.Y36(Ut.sK),e.Y36(yn.F0),e.Y36(n.Dx),e.Y36(Un.An),e.Y36(Ee.T))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:12,vars:11,consts:[[3,"title"],[3,"added"],["addRoleModal",""],["id","rolesList",1,"tw-container","mx-auto"],[3,"placeholder","onSearch"],[4,"ngIf"],["class","tw-alert","role","alert",4,"ngIf"],["id","rolesTable","class","datatable selectable hover",4,"ngIf"],["hidePager","true",3,"totalResults",4,"ngIf"],["right",""],[1,"tw-btn-success",3,"click"],["role","alert",1,"tw-alert"],["id","rolesTable",1,"datatable","selectable","hover"],["id","sortName",1,"tw-max-w-0","tw-cursor-pointer","lg:tw-w-1/3",3,"click"],[1,"tw-mr-2"],["class","fas fa-caret-down","aria-hidden","true",4,"ngIf"],["class","fas fa-caret-up","aria-hidden","true",4,"ngIf"],[1,"tw-hidden","lg:tw-table-cell"],[1,"tw-w-1","tw-hidden","sm:tw-table-cell"],[1,"sr-only"],[1,"tw-w-1","tw-hidden","md:tw-table-cell"],[1,"tw-w-1"],["class","group",4,"ngFor","ngForOf"],["aria-hidden","true",1,"fas","fa-caret-down"],["aria-hidden","true",1,"fas","fa-caret-up"],[1,"group"],[1,"tw-max-w-0","tw-truncate",3,"click"],[1,"tw-text-blue-500"],[1,"tw-hidden","tw-max-w-0","tw-truncate","lg:tw-table-cell",3,"click"],[1,"tw-hidden","sm:tw-table-cell",3,"click"],["class","tw-pill-warning",4,"ngIf"],[1,"tw-hidden","md:tw-table-cell",3,"click"],["class","tw-pill",4,"ngIf"],[3,"click"],[1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500",3,"click"],["id","viewOrEditIcon","aria-hidden","true",3,"ngClass"],[1,"tw-pill-warning"],[1,"tw-pill"],["hidePager","true",3,"totalResults"]],template:function(t,i){1&t&&(e._UZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.TgZ(2,"app-add-role",1,2),e.NdJ("added",function(){return i.update()}),e.qZA(),e.TgZ(4,"div",3)(5,"app-search",4),e.NdJ("onSearch",function(C){return i.search(C)}),e.ALo(6,"translate"),e.qZA(),e.YNc(7,vs,5,3,"app-action-bar",5),e.YNc(8,Fs,1,0,"app-simple-loader",5),e.YNc(9,Nr,4,3,"div",6),e.YNc(10,Lo,26,18,"table",7),e.YNc(11,Or,1,1,"app-pager",8),e.qZA()),2&t&&(e.Q6J("title",e.lcZ(1,7,"Nav.Roles")),e.xp6(5),e.Q6J("placeholder",e.lcZ(6,9,"Roles.SearchPlaceholder")),e.xp6(2),e.Q6J("ngIf",!i.isLoading&&!i.isUserManagerReadOnly),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",(!i.roles||i.roles.length<=0)&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.roles&&i.roles.length>0&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.roles&&i.roles.length>0&&!i.isLoading))},dependencies:[z.mk,z.sg,z.O5,dt.G,wt.P,kt.K,sn,En.w,Ns,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();function $r(r,l){1&r&&(e.TgZ(0,"p",6),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Errors.UnableToCompilePolicy")))}function vl(r,l){1&r&&(e.TgZ(0,"p",7),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Errors.UnauthenticatedDescription")))}let Lu=(()=>{class r{constructor(t){this.isEnforcerCompilationError=!1,this.getNavigationState(t)}getNavigationState(t){const i=t.getCurrentNavigation();if(null!=i&&null!=i.extras.state){const p=i.extras.state;p.enforcer&&(this.isEnforcerCompilationError=p.enforcer)}}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:10,vars:5,consts:[[1,"tw-p-4"],[1,"tw-container","tw-mx-auto"],["role","alert",1,"tw-alert-danger"],[1,"tw-text-sm","tw-font-semibold"],["id","ContactAdmin",4,"ngIf","ngIfElse"],["normalError",""],["id","ContactAdmin"],["id","UnauthDescription"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,$r,3,3,"p",4),e.YNc(8,vl,3,3,"ng-template",null,5,e.W1O),e.qZA()()()()),2&t){const p=e.MAs(9);e.xp6(5),e.Oqu(e.lcZ(6,3,"Errors.UnauthenticatedTitle")),e.xp6(2),e.Q6J("ngIf",i.isEnforcerCompilationError)("ngIfElse",p)}},dependencies:[z.O5,Ut.X$],encapsulation:2}),r})(),Ul=(()=>{class r{constructor(t){this.translate=t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:10,vars:6,consts:[[1,"tw-p-4"],[1,"tw-container","tw-mx-auto"],["role","alert",1,"tw-alert-danger"],[1,"tw-text-sm","tw-font-semibold"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.ALo(9,"translate"),e.qZA()()()()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,2,"Errors.ForbiddenTitle")),e.xp6(3),e.Oqu(e.lcZ(9,4,"Errors.ForbiddenDescription")))},dependencies:[Ut.X$],encapsulation:2}),r})();const Co=function(){return["active"]};function Uu(r,l){1&r&&(e.TgZ(0,"li",14)(1,"button",24),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(1),e.Q6J("routerLinkActive",e.DdM(4,Co)),e.xp6(1),e.Oqu(e.lcZ(3,2,"Nav.SessionManagement")))}function sl(r,l){1&r&&(e.TgZ(0,"div",25)(1,"p"),e._uU(2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.AsE("",e.lcZ(3,2,"Users.Delete.DeletedUser")," ",e.lcZ(4,4,"Users.Delete.AuditingPurposes"),""))}const Gc=function(r,l){return{title:r,link:l}},Bl=function(r){return[r]};let xa=(()=>{class r{constructor(t,i,p,C){this.r=t,this.route=i,this.errorService=p,this.configService=C}ngOnInit(){this.userDataSubscription=this.route.data.subscribe({next:t=>{this.user=t.user},error:t=>{this.errorService.handleError(t)}}),this.configSubscription=this.configService.getConfig().subscribe({next:t=>{this.showSessionManagement=t.featureFlagOptions.sessionManagementEnabled},error:t=>{this.errorService.handleError(t)}})}mobRoute(t){this.r.navigate([t],{relativeTo:this.route})}ngOnDestroy(){this.userDataSubscription.unsubscribe()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.F0),e.Y36(yn.gz),e.Y36(Ee.T),e.Y36(Yr.E))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:64,vars:75,consts:[[3,"title","totpEnabled","crumbs","hasTabs"],["tabs",""],[1,"tw-p-4","md:tw-hidden"],["for","nav-sub-menu",1,"sr-only"],[1,"tw-form-select"],["id","nav-sub-menu",1,"tw-form-control",3,"change"],["value","details"],["value","roles"],["value","additionaldetails"],["value","applications"],["value","userlogins"],["value","useraudits"],["value","sessions"],["role","tablist",1,"tabs","tw-hidden","md:tw-flex"],[1,"tabs__item"],["type","button","routerLink","details","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","roles","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","additionaldetails","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","applications","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","userlogins","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","useraudits","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["class","tabs__item",4,"ngIf"],["id","editUser"],["id","userDeleted","class","tw-alert-danger tw-container tw-mx-auto tw-mb-6",4,"ngIf"],["type","button","routerLink","sessions","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["id","userDeleted",1,"tw-alert-danger","tw-container","tw-mx-auto","tw-mb-6"]],template:function(t,i){1&t&&(e.TgZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.ALo(2,"localize"),e.ynx(3,1),e.TgZ(4,"div",2)(5,"label",3),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",4)(9,"select",5),e.NdJ("change",function(C){return i.mobRoute(C.target.value)}),e.TgZ(10,"option",6),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"option",6),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"option",7),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"option",8),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"option",9),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"option",10),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"option",11),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"option",12),e._uU(32),e.ALo(33,"translate"),e.qZA()()()(),e.TgZ(34,"ul",13),e.ALo(35,"translate"),e.TgZ(36,"li",14)(37,"button",15),e._uU(38),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"li",14)(41,"button",16),e._uU(42),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"li",14)(45,"button",17),e._uU(46),e.ALo(47,"translate"),e.qZA()(),e.TgZ(48,"li",14)(49,"button",18),e._uU(50),e.ALo(51,"translate"),e.qZA()(),e.TgZ(52,"li",14)(53,"button",19),e._uU(54),e.ALo(55,"translate"),e.qZA()(),e.TgZ(56,"li",14)(57,"button",20),e._uU(58),e.ALo(59,"translate"),e.qZA()(),e.YNc(60,Uu,4,5,"li",21),e.qZA(),e.BQk(),e.qZA(),e.TgZ(61,"div",22),e.YNc(62,sl,5,6,"div",23),e._UZ(63,"router-outlet"),e.qZA()),2&t&&(e.Q6J("title",i.user.firstName+" "+i.user.lastName)("totpEnabled",i.user.totpEnabled)("crumbs",e.VKq(67,Bl,e.WLB(64,Gc,e.lcZ(1,28,"Nav.Users"),e.lcZ(2,30,"/users"))))("hasTabs",!0),e.xp6(6),e.Oqu(e.lcZ(7,32,"Nav.SubMenu")),e.xp6(5),e.hij("",e.lcZ(12,34,"Nav.SubMenu"),"..."),e.xp6(3),e.Oqu(e.lcZ(15,36,"Nav.Details")),e.xp6(3),e.Oqu(e.lcZ(18,38,"Nav.Roles")),e.xp6(3),e.Oqu(e.lcZ(21,40,"Nav.Additional Details")),e.xp6(3),e.Oqu(e.lcZ(24,42,"Nav.Applications")),e.xp6(3),e.Oqu(e.lcZ(27,44,"Nav.External Logins")),e.xp6(3),e.Oqu(e.lcZ(30,46,"Nav.Audits")),e.xp6(3),e.Oqu(e.lcZ(33,48,"Nav.SessionManagement")),e.xp6(2),e.uIk("aria-label",e.lcZ(35,50,"Nav.SubMenu")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(69,Co)),e.xp6(1),e.Oqu(e.lcZ(39,52,"Nav.Details")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(70,Co)),e.xp6(1),e.Oqu(e.lcZ(43,54,"Nav.Roles")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(71,Co)),e.xp6(1),e.Oqu(e.lcZ(47,56,"Nav.Additional Details")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(72,Co)),e.xp6(1),e.Oqu(e.lcZ(51,58,"Nav.Applications")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(73,Co)),e.xp6(1),e.Oqu(e.lcZ(55,60,"Nav.External Logins")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(74,Co)),e.xp6(1),e.Oqu(e.lcZ(59,62,"Nav.Audits")),e.xp6(2),e.Q6J("ngIf",i.showSessionManagement),e.xp6(2),e.Q6J("ngIf",i.user.isDeleted))},dependencies:[z.O5,h.YN,h.Kr,dt.G,yn.lC,yn.rH,yn.Od,Ut.X$,Un.lO],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var yl=m(6478),Ea=m(7073);function V1(r,l){1&r&&(e.TgZ(0,"span",8),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Policy")," "))}function Ff(r,l){1&r&&(e.TgZ(0,"span",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Reserved")," "))}function zc(r,l){if(1&r&&(e.ynx(0,5),e.YNc(1,V1,3,3,"span",6),e.YNc(2,Ff,3,3,"span",7),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isPolicyRole()),e.xp6(1),e.Q6J("ngIf",t.role.reserved)}}const Bu=function(r,l){return{title:r,link:l}},Zf=function(r){return[r]};let H1=(()=>{class r{constructor(t,i,p,C){this.activatedRoute=t,this.errorService=i,this.router=p,this.securityService=C}ngOnInit(){this.roleDataSubscription=this.activatedRoute.data.subscribe(t=>{this.role=t.role},t=>{this.errorService.handleError(t)})}ngOnDestroy(){this.roleDataSubscription.unsubscribe()}isPolicyRole(){const t=this.securityService.policyClaims;for(let i=0;i<t.length;i++)if("role"===t[i].type&&t[i].value===this.role.name)return!0;return!1}mobRoute(t){this.router.navigate([t],{relativeTo:this.activatedRoute})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.gz),e.Y36(Ee.T),e.Y36(yn.F0),e.Y36(ti.I))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:10,vars:17,consts:[[3,"title","crumbs","hasTabs"],["badge","",4,"ngIf"],["tabs",""],[3,"tabTitle","tabValue"],["id","editRole"],["badge",""],["class","tw-pill-warning tw-mr-2",4,"ngIf"],["class","tw-pill tw-mr-2",4,"ngIf"],[1,"tw-pill-warning","tw-mr-2"],[1,"tw-pill","tw-mr-2"]],template:function(t,i){1&t&&(e.TgZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.ALo(2,"localize"),e.YNc(3,zc,3,2,"ng-container",1),e.ynx(4,2),e.TgZ(5,"app-custom-tabs"),e._UZ(6,"app-custom-tab",3)(7,"app-custom-tab",3),e.qZA(),e.BQk(),e.qZA(),e.TgZ(8,"div",4),e._UZ(9,"router-outlet"),e.qZA()),2&t&&(e.Q6J("title",i.role.name)("crumbs",e.VKq(15,Zf,e.WLB(12,Bu,e.lcZ(1,8,"Nav.Roles"),e.lcZ(2,10,"/roles"))))("hasTabs",!0),e.xp6(3),e.Q6J("ngIf",i.isPolicyRole()||i.role.reserved),e.xp6(3),e.Q6J("tabTitle","Nav.Details")("tabValue","details"),e.xp6(1),e.Q6J("tabTitle","Nav.Users")("tabValue","users"))},dependencies:[z.O5,yn.lC,dt.G,yl.v,Ea.x,Ut.X$,Un.lO],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var Da=m(3635),Qa=m(1005),ol=m(9046),ds=m(799);function Vf(r){const l=r.value;if(null==l)return{validEmail:!1};if(l.indexOf(" ")>-1)return{validEmail:!1};let t=!1;for(let i=0;i<l.length;i++)if("@"===r.value[i]){if(t||0===i||i===l.length-1)return{validEmail:!1};t=!0}return t?null:{validEmail:!1}}var da=(()=>{return(r=da||(da={}))[r.None=0]="None",r[r.Add=1]="Add",r[r.AddAnother=2]="AddAnother",r[r.AddAndConfigure=3]="AddAndConfigure",da;var r})(),so=m(146),Fl=m(4225);let Hf=(()=>{class r{validate(t){return this.regex?(0,ot.ry)(new RegExp(this.regex,"i"))(t):null}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=e.lG2({type:r,selectors:[["","appClaimRegex",""]],inputs:{regex:["appClaimRegex","regex"]},features:[e._Bn([{provide:h.Cf,useExisting:r,multi:!0}])]}),r})();var Fu=m(9751),Gd=m(3900),Wa=m(9646),Zu=m(5963),Jf=m(1191);function qf(r,l){if(1&r&&(e.TgZ(0,"option",11),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function bT(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"select",8,9),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.valueChanged.emit(p))})("keyup",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.keyupEvent.emit())}),e.YNc(2,qf,2,2,"option",10),e.qZA()}if(2&r){const t=e.MAs(1),i=e.oxw();e.Q6J("id",i.forId)("ngModel",i.value)("disabled",i.disabled&&!t.dirty),e.xp6(2),e.Q6J("ngForOf",i.allowedValues)}}function Qf(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"input",12,9),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.valueChanged.emit(p))})("focus",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.onFocus(p))}),e.ALo(2,"translate"),e.qZA()}if(2&r){const t=e.MAs(1),i=e.oxw(),p=e.MAs(5);e.s9C("placeholder",e.lcZ(2,9,"ClaimTypes.TypeaheadHelp")),e.Q6J("id",i.forId)("container",i.hostingModal)("ngModel",i.value)("typeahead",i.dataSource)("typeaheadWaitMs",200)("typeaheadAsync",!0)("typeaheadItemTemplate",p)("disabled",i.disabled&&!t.dirty)}}function wT(r,l){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"slice"),e.qZA()),2&r){const t=l.item;e.xp6(1),e.Oqu(t.length>20?e.Dn7(2,1,t,0,20)+"...":t)}}function zd(r,l){1&r&&(e.TgZ(0,"div",13),e._UZ(1,"span",14),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&r&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"Common.LoadingPleaseWait")))}function J1(r,l){1&r&&(e.TgZ(0,"div",15),e._UZ(1,"span",16),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&r&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"ClaimTypes.AllowedValuesFiltering.NothingFound")))}function Wf(r,l){if(1&r&&(e.TgZ(0,"div",17),e._UZ(1,"span",16),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&r){const t=e.oxw();e.xp6(3),e.AsE("",e.lcZ(4,2,"ClaimTypes.AllowedValuesFiltering.TooManyFound")," (",t.totalValues,")")}}let oc=(()=>{class r{constructor(t){this.claimTypesService=t,this.valueChanged=new e.vpe,this.disabled=!1,this.keyupEvent=new e.vpe,this.typeIdSub=new o.x,this.threshold=50,this.typeahead=!1,this.loading=!1,this.nothingFound=!1,this.tooManyResults=!1,this.typeIdSub.subscribe(i=>{this.claimTypesService.getAllowedValues(this._typeId,null,this.threshold).subscribe(p=>{this.totalValues=p.totalAllowedValues,this.allowedValues=p.allowedValues,this.typeahead=!this.allowedValues,this.allowedValues||(this.dataSource=this.initDataSrc())})})}set hostingModal(t){this._hostingModal=t}get hostingModal(){return null!=this._hostingModal?`#${this._hostingModal}`:null}set typeId(t){this._typeId=t,this.typeIdSub.next(t)}get typeId(){return this._typeId}initDataSrc(){return new Fu.y(t=>{this.loading=!0,this.nothingFound=!1,this.tooManyResults=!1,t.next(this.value)}).pipe((0,Gd.w)(t=>t?this.claimTypesService.getAllowedValues(this.typeId,t,this.threshold).pipe((0,u.U)(i=>(this.totalValues=i.totalAllowedValues,this.allowedValues=i.allowedValues,this.loading=!1,this.nothingFound=i.totalAllowedValues<=0,this.tooManyResults=i.totalAllowedValues>=this.threshold,i.allowedValues||[]))):(this.loading=!1,this.nothingFound=!1,this.tooManyResults=!1,(0,Wa.of)([]))))}onFocus(t){t.stopPropagation(),(0,Zu.H)(1).subscribe(()=>{const i=new Event("input");t.target?.dispatchEvent(i)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(so.M))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-enum-claim-type-input"]],inputs:{hostingModal:"hostingModal",forId:["id","forId"],typeId:"typeId",inModal:"inModal",value:"value",disabled:"disabled"},outputs:{valueChanged:"valueChanged",keyupEvent:"keyupEvent"},decls:9,vars:5,consts:[[1,"tw-form-select"],["class","tw-form-control","name","enum","required","",3,"id","ngModel","disabled","ngModelChange","keyup",4,"ngIf"],[1,"tw-form-typeahead"],["class","tw-form-control","type","text","name","enum","autocomplete","off","required","",3,"id","container","ngModel","typeahead","typeaheadWaitMs","typeaheadAsync","typeaheadItemTemplate","placeholder","disabled","ngModelChange","focus",4,"ngIf"],["customItemTemplate",""],["id","typeahead-loading-msg","class","tw-form-label tw-text-sm tw-mt-2",4,"ngIf"],["id","typeahead-nothing-found-msg","class","tw-form-label tw-text-sm tw-mt-2",4,"ngIf"],["id","typeahead-too-many-msg","class","tw-form-label tw-text-sm tw-mt-2",4,"ngIf"],["name","enum","required","",1,"tw-form-control",3,"id","ngModel","disabled","ngModelChange","keyup"],["claimvalue","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","name","enum","autocomplete","off","required","",1,"tw-form-control",3,"id","container","ngModel","typeahead","typeaheadWaitMs","typeaheadAsync","typeaheadItemTemplate","placeholder","disabled","ngModelChange","focus"],["id","typeahead-loading-msg",1,"tw-form-label","tw-text-sm","tw-mt-2"],[1,"fad","fa-spinner-third","fa-spin","tw-text-secondary-500","tw-mr-2"],["id","typeahead-nothing-found-msg",1,"tw-form-label","tw-text-sm","tw-mt-2"],[1,"fa","fa-exclamation-triangle","tw-text-secondary-500","tw-mr-2"],["id","typeahead-too-many-msg",1,"tw-form-label","tw-text-sm","tw-mt-2"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,bT,3,4,"select",1),e.qZA(),e.TgZ(2,"div",2),e.YNc(3,Qf,3,11,"input",3),e.qZA(),e.YNc(4,wT,3,5,"ng-template",null,4,e.W1O),e.YNc(6,zd,5,3,"div",5),e.YNc(7,J1,5,3,"div",6),e.YNc(8,Wf,5,4,"div",7)),2&t&&(e.xp6(1),e.Q6J("ngIf",!i.typeahead),e.xp6(2),e.Q6J("ngIf",i.typeahead),e.xp6(3),e.Q6J("ngIf",i.typeahead&&i.loading),e.xp6(1),e.Q6J("ngIf",i.typeahead&&i.nothingFound),e.xp6(1),e.Q6J("ngIf",i.typeahead&&i.tooManyResults))},dependencies:[h.YN,h.Kr,h.Fj,h.EJ,h.JJ,h.Q7,h.On,Jf.Bp,z.sg,z.O5,z.OU,Ut.X$],encapsulation:2}),r})();const Yd=["claimsForm"];function ac(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"input",10,11),e.NdJ("keyup",function(){e.CHM(t);const p=e.oxw().$implicit,C=e.oxw();return e.KtG(C.checkForPolicyClaimForm(p.type,p))})("ngModelChange",function(p){e.CHM(t);const C=e.oxw().$implicit;return e.KtG(C.value=p)}),e.qZA()}if(2&r){const t=e.MAs(1),i=e.oxw(),p=i.index,C=i.$implicit,K=e.oxw();e.MGl("id","claim-",p,""),e.Q6J("name",C.type)("ngModel",C.value)("appClaimRegex",C.regex)("disabled",K.notAllowedToEditClaim(C)&&!t.dirty)}}function q1(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"input",12,11),e.NdJ("keyup",function(){e.CHM(t);const p=e.oxw().$implicit,C=e.oxw();return e.KtG(C.checkForPolicyClaimForm(p.type,p))})("ngModelChange",function(p){e.CHM(t);const C=e.oxw().$implicit;return e.KtG(C.value=p)}),e.qZA()}if(2&r){const t=e.MAs(1),i=e.oxw(),p=i.index,C=i.$implicit,K=e.oxw();e.MGl("id","claim-",p,""),e.Q6J("name",C.type)("ngModel",C.value)("disabled",K.notAllowedToEditClaim(C)&&!t.dirty)}}function Q1(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-form-toggle",13)(1,"input",14),e.NdJ("keyup",function(){e.CHM(t);const p=e.oxw().$implicit,C=e.oxw();return e.KtG(C.checkForPolicyClaimForm(p.type,p))})("ngModelChange",function(p){e.CHM(t);const C=e.oxw().$implicit;return e.KtG(C.value=p?"true":"false")}),e.qZA()()}if(2&r){const t=e.oxw(),i=t.index,p=t.$implicit,C=e.oxw();e.Q6J("id","claim-"+i)("isTraffic",!0)("isAlt",!1),e.xp6(1),e.Q6J("id","claim-"+i)("name",p.type)("disabled",C.notAllowedToEditClaim(p)&&!C.claimvalue.dirty)("ngModel","true"==p.value)}}function TT(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-date-time",17,11),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2).$implicit;return e.KtG(C.value=p)})("keyup",function(){e.CHM(t);const p=e.oxw(2).$implicit,C=e.oxw();return e.KtG(C.checkForPolicyClaimForm(p.type,p))})("change",function(){e.CHM(t);const p=e.oxw(3);return e.KtG(p.makeFormDirty())}),e.qZA(),e.BQk()}if(2&r){const t=e.MAs(2),i=e.oxw(2),p=i.index,C=i.$implicit,K=e.oxw();e.xp6(1),e.MGl("id","claim-",p,""),e.Q6J("name",C.type)("ngModel",C.value)("disabled",K.notAllowedToEditClaim(C)&&!t.dirty)}}function Vu(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-date-time",18,11),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2).$implicit;return e.KtG(C.value=p)})("keyup",function(){e.CHM(t);const p=e.oxw(2).$implicit,C=e.oxw();return e.KtG(C.checkForPolicyClaimForm(p.type,p))})("change",function(){e.CHM(t);const p=e.oxw(3);return e.KtG(p.makeFormDirty())}),e.qZA(),e.BQk()}if(2&r){const t=e.MAs(2),i=e.oxw(2),p=i.index,C=i.$implicit,K=e.oxw();e.xp6(1),e.MGl("id","claim-",p,""),e.Q6J("name",C.type)("displayType",K.dateTimeDisplayType.Date)("ngModel",C.value)("disabled",K.notAllowedToEditClaim(C)&&!t.dirty)}}function Xd(r,l){if(1&r&&(e.TgZ(0,"div",15),e.YNc(1,TT,3,4,"ng-container",16),e.YNc(2,Vu,3,5,"ng-container",16),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","birthdate"!=t.type),e.xp6(1),e.Q6J("ngIf","birthdate"==t.type)}}function jf(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",19)(1,"app-enum-claim-type-input",20),e.NdJ("valueChanged",function(p){e.CHM(t);const C=e.oxw().$implicit,K=e.oxw();return C.value=p,e.KtG(K.makeFormDirty())})("keyupEvent",function(){e.CHM(t);const p=e.oxw().$implicit,C=e.oxw();return e.KtG(C.checkForPolicyClaimForm(p.type,p))}),e.qZA()()}if(2&r){const t=e.oxw(),i=t.index,p=t.$implicit,C=e.oxw();e.xp6(1),e.Q6J("id","claim-"+i)("typeId",C.getClaimType(p).id)("value",p.value)("disabled",C.notAllowedToEditClaim(p))}}function Kf(r,l){if(1&r&&(e.TgZ(0,"p",21),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.failureMessage)}}function $f(r,l){if(1&r&&(e.TgZ(0,"app-form-row",3),e.YNc(1,ac,2,5,"input",4),e.YNc(2,q1,2,4,"input",5),e.YNc(3,Q1,2,7,"app-form-toggle",6),e.YNc(4,Xd,3,2,"div",7),e.YNc(5,jf,2,4,"div",8),e.YNc(6,Kf,2,1,"p",9),e.qZA()),2&r){const t=l.$implicit,i=l.index,p=e.oxw();let C;e.Q6J("id","claim-"+i)("label",null!==(C=t.displayName)&&void 0!==C?C:t.type)("help",p.getHelpTextString(t)),e.xp6(1),e.Q6J("ngIf","String"==t.format),e.xp6(1),e.Q6J("ngIf","Int"==t.format),e.xp6(1),e.Q6J("ngIf","Boolean"==t.format),e.xp6(1),e.Q6J("ngIf","DateTime"==t.format),e.xp6(1),e.Q6J("ngIf","Enum"==t.format),e.xp6(1),e.Q6J("ngIf",p.isClaimInValid(t.type))}}let Cl=(()=>{class r{constructor(){this.claims=null,this.notAllowedToEditClaim=()=>!1,this.isPolicyClaim=()=>!1,this.requiredClaims=[],this.dateTimeDisplayType=Fl.V}ngOnChanges(){for(const t of this.claimTypes??[])if(t.required){const p={typeId:t.id,format:t.valueType,value:"Boolean"===t.valueType?"false":null,type:t.name,displayName:t.displayName,editing:!1,required:t.required};t.rule&&(p.regex=t.rule,p.failureMessage=t.ruleValidationFailureDescription),this.requiredClaims.push(p)}if(null!==this.claims)for(const t of this.claims){const i=this.requiredClaims.find(p=>p.type===t.type);i&&(i.value=t.value)}}getHelpTextString(t){return this.isPolicyClaim(t)?"DateTime"==t.format?"Common.PolicyWithUTCNotice":"Common.Policy":"DateTime"==t.format?"Common.Dates.UTCWarning":""}checkForPolicyClaimForm(t,i){this.notAllowedToEditClaim(i)&&this.claimsForm.form.controls[t].setErrors({incorrect:!0})}isClaimInValid(t){return this.claimsForm.form.get(t)?.invalid??!1}makeFormDirty(){this.claimsForm.form.markAsDirty()}isFormValid(){return this.claimsForm.form.valid}isClaimValid(t){return this.claimsForm.form.get(t)?.invalid??!1}resetForm(){this.claimsForm.reset()}getClaimType(t){return this.claimTypes.find(i=>i.name===t.type)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-required-claims-form"]],viewQuery:function(t,i){if(1&t&&e.Gf(Yd,7),2&t){let p;e.iGM(p=e.CRH())&&(i.claimsForm=p.first)}},inputs:{claimTypes:"claimTypes",claims:"claims",notAllowedToEditClaim:"notAllowedToEditClaim",isPolicyClaim:"isPolicyClaim"},features:[e.TTD],decls:3,vars:1,consts:[["id","requiredClaims"],["claimsForm","ngForm"],[3,"id","label","help",4,"ngFor","ngForOf"],[3,"id","label","help"],["class","tw-form-control","type","text","required","",3,"name","ngModel","appClaimRegex","id","disabled","keyup","ngModelChange",4,"ngIf"],["class","tw-form-control","type","number","required","",3,"name","ngModel","id","disabled","keyup","ngModelChange",4,"ngIf"],[3,"id","isTraffic","isAlt",4,"ngIf"],["class","tw-w-full sm:tw-max-w-2xl",4,"ngIf"],["class","",4,"ngIf"],["id","fail-msg","class","tw-form-text-danger",4,"ngIf"],["type","text","required","",1,"tw-form-control",3,"name","ngModel","appClaimRegex","id","disabled","keyup","ngModelChange"],["claimvalue","ngModel"],["type","number","required","",1,"tw-form-control",3,"name","ngModel","id","disabled","keyup","ngModelChange"],[3,"id","isTraffic","isAlt"],["type","checkbox",1,"tw-form-switch__input",3,"id","name","disabled","ngModel","keyup","ngModelChange"],[1,"tw-w-full","sm:tw-max-w-2xl"],[4,"ngIf"],[3,"id","name","ngModel","disabled","ngModelChange","keyup","change"],[3,"id","name","displayType","ngModel","disabled","ngModelChange","keyup","change"],[1,""],[3,"id","typeId","value","disabled","valueChanged","keyupEvent"],["id","fail-msg",1,"tw-form-text-danger"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0,1),e.YNc(2,$f,7,9,"app-form-row",2),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngForOf",i.requiredClaims))},dependencies:[h._Y,h.Fj,h.wV,h.Wl,h.JJ,h.JL,h.Q7,h.On,h.F,z.sg,z.O5,Fl.j,Dn.L,ds.O,Hf,oc],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();const W1=["claimsComponent"],j1=["addUserModal"];function K1(r,l){1&r&&(e.TgZ(0,"h2",37),e._UZ(1,"span",38),e.TgZ(2,"span",24),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span")(6,"a",39),e._uU(7),e.ALo(8,"translate"),e.qZA()()()),2&r&&(e.xp6(3),e.Oqu(e.lcZ(4,2,"Users.Password.DemoTitle")),e.xp6(4),e.hij(" ",e.lcZ(8,4,"Users.Password.DemoLink")," "))}function $1(r,l){if(1&r&&(e.TgZ(0,"div")(1,"div",33),e.YNc(2,K1,9,6,"h2",34),e.TgZ(3,"app-form-row",15),e._UZ(4,"input",35),e.TgZ(5,"ul",36)(6,"li"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"li"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"li"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"li"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"li"),e._uU(19),e.ALo(20,"translate"),e.qZA()()()()()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.isDemo),e.xp6(1),e.Q6J("id","Password")("label","Users.Password.Title")("isLast",!0),e.xp6(4),e.Oqu(e.lcZ(8,9,"Users.Password.Requirements.1")),e.xp6(3),e.Oqu(e.lcZ(11,11,"Users.Password.Requirements.2")),e.xp6(3),e.Oqu(e.lcZ(14,13,"Users.Password.Requirements.3")),e.xp6(3),e.Oqu(e.lcZ(17,15,"Users.Password.Requirements.4")),e.xp6(3),e.Oqu(e.lcZ(20,17,"Users.Password.Requirements.5"))}}function G1(r,l){1&r&&e._UZ(0,"span",40)}function al(r,l){1&r&&e._UZ(0,"span",40)}function lc(r,l){1&r&&e._UZ(0,"span",40)}const z1=function(){return{animated:!1,backdrop:"static"}};let Y1=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt,Et,Wt,an){this.userService=t,this.claimTypesService=i,this.errorService=p,this.translate=C,this.router=K,this.fb=Ce,this.toastr=Ue,this.localize=lt,this.securityService=Et,this.healthCheckService=Wt,this.configService=an,this.addAnother=!1,this.canCreatePassword=!1,this.isDemo=!1,this.onSubmitted=new e.vpe,this.inFlight=!1,this.addButtonClick=da,this.addClicked=da.None}keydown(t){"Enter"===t.key&&"addUserSubmit"!==t.srcElement.id&&this.claimsComponent.isFormValid()&&this.addUserForm.valid&&this.addUser()}ngOnInit(){this.createForms(),this.configService.getConfig().pipe((0,Oe.q)(1)).subscribe(t=>{null!==t.addUserPassword&&""!==t.addUserPassword&&(this.canCreatePassword=!0===t.addUserPassword||"true"===t.addUserPassword||t.isDemo),this.isDemo=t.isDemo||"Demo"===this.securityService.licenseType,this.isDemo&&(this.canCreatePassword=!0)}),this.claimTypesService.getClaimTypes(null,null,!0).subscribe(t=>{this.claimTypes=t},t=>{this.errorService.handleError(t)})}addAnotherUser(){this.addAnother=!0,this.addClicked=da.AddAnother,this.addUser()}addUser(t){let i;this.addClicked===da.None&&(this.addClicked=t?da.AddAndConfigure:da.Add),i=JSON.parse(JSON.stringify(this.addUserForm.value)),Object.assign(i,{claims:[]});for(const p of this.claimsComponent.requiredClaims){if(null===p.value)continue;let C=p.value;"DateTime"===p.format&&(C=p.value),"Int"===p.format&&(C=C.toString()),i.claims.push({claimTypeId:p.typeId,value:C,type:p.type})}!1===this.canCreatePassword&&(i.password=null),this.inFlight=!0,this.userService.addUser(i).subscribe(p=>{this.inFlight=!1,this.addClicked=da.None,this.claimsComponent.resetForm(),this.addUserForm.reset();const C=this.translate.instant("Notifications.AccountCreated"),K=this.translate.instant("Users.Singular")+" "+i.username+" "+this.translate.instant("Common.Created").toLowerCase();this.toastr.success(C,K),t&&p.headers.get("location")?this.addUserAndConfigure(p.headers.get("location")):(this.addAnother||this.hide(),this.addAnother=!1,this.onSubmitted.emit(!0))},p=>{this.inFlight=!1,this.addClicked=da.None,this.addAnother=!1,this.errorService.handleError(p)})}addUserAndConfigure(t){const i=t.lastIndexOf("/"),p=t.substring(i+1),C=[this.localize.translateRoute("/users"),p];this.router.navigate(C)}createForms(){this.addUserForm=this.fb.group({username:["",[h.kI.required,(0,ot.Fd)()]],email:["",Vf],firstName:["",h.kI.required],lastName:["",h.kI.required],password:["",h.kI.pattern("^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$")]})}hide(){this.addUserModal.hide(),this.addUserForm.reset()}show(){this.addUserModal.show()}ngOnDestroy(){this.hide()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Cr.K),e.Y36(so.M),e.Y36(Ee.T),e.Y36(Ut.sK),e.Y36(yn.F0),e.Y36(h.QS),e.Y36(si._W),e.Y36(Un.An),e.Y36(ti.I),e.Y36(Ci.G),e.Y36(Yr.E))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-user"]],viewQuery:function(t,i){if(1&t&&(e.Gf(W1,7),e.Gf(j1,7)),2&t){let p;e.iGM(p=e.CRH())&&(i.claimsComponent=p.first),e.iGM(p=e.CRH())&&(i.addUserModal=p.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown",function(C){return i.keydown(C)},!1,e.evT)},outputs:{onSubmitted:"onSubmitted"},decls:49,vars:39,consts:[["bsModal","","id","addUserModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["addUserModal","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","scrollbars"],["autocomplete","off",1,"form",3,"formGroup"],[3,"id","label"],["id","FirstName","type","text","name","FirstName","formControlName","firstName","required","",1,"tw-form-control"],["id","LastName","type","text","name","LastName","formControlName","lastName","required","",1,"tw-form-control"],["id","Username","type","text","name","username","formControlName","username","required","",1,"tw-form-control"],[3,"id","label","isLast"],["id","Email","type","email","name","email","formControlName","email","required","",1,"tw-form-control"],["id","requiredClaimsComponent",3,"claimTypes"],["claimsComponent",""],[3,"formGroup"],[4,"ngIf"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items"],[1,"tw-mr-auto"],[1,"xs:tw-mr-3"],["type","submit","id","addUserSubmit",1,"tw-btn-success",3,"disabled","click"],["class","fad fa-spinner-third fa-spin tw-text-secondary-500 tw-mr-2 tw-ml-2",4,"ngIf"],[1,"tw-hidden","xs:tw-inline","md:tw-mr-3"],["id","submitAndConfigure",1,"tw-btn-success",3,"disabled","click"],[1,"tw-hidden","md:tw-inline"],["type","submit","id","addUserReSubmit",1,"tw-btn",3,"disabled","click"],[1,"tw-btn-link","tw--mr-4",3,"click"],[1,"tw-bg-red-100","tw-border","tw-border-red-500","tw-text-red-500","tw-mb-4","tw-p-4","tw-overflow-hidden","tw-rounded"],["class","tw-flex items-center tw-bg-red-500 tw-text-white tw-text-sm tw--mx-4 tw--mt-4 tw-mb-3 tw-py-3 tw-px-4",4,"ngIf"],["id","Password","type","password","name","Password","formControlName","password","aria-labelledby","PasswordHelp","required","",1,"tw-form-control","tw-border-red-300"],["id","PasswordHelp",1,"tw-form-text-danger"],[1,"tw-flex","items-center","tw-bg-red-500","tw-text-white","tw-text-sm","tw--mx-4","tw--mt-4","tw-mb-3","tw-py-3","tw-px-4"],["aria-hidden","true",1,"fas","fa-exclamation-triangle","tw-mr-2"],["href","documentation/Users/Set_User_Password.html","target","_blank",1,"tw-text-white","tw-underline","hover:tw-no-underline"],[1,"fad","fa-spinner-third","fa-spin","tw-text-secondary-500","tw-mr-2","tw-ml-2"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.hide()}),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",9)(14,"form",10)(15,"app-form-row",11),e._UZ(16,"input",12),e.qZA(),e.TgZ(17,"app-form-row",11),e._UZ(18,"input",13),e.qZA(),e.TgZ(19,"app-form-row",11),e._UZ(20,"input",14),e.qZA(),e.TgZ(21,"app-form-row",15),e._UZ(22,"input",16),e.qZA()(),e._UZ(23,"app-required-claims-form",17,18),e.TgZ(25,"form",19),e.YNc(26,$1,21,19,"div",20),e.qZA()(),e._UZ(27,"div",21),e.TgZ(28,"div",22)(29,"div",23)(30,"div",24)(31,"span",25)(32,"button",26),e.NdJ("click",function(){return i.addUser()}),e._uU(33),e.ALo(34,"translate"),e.YNc(35,G1,1,0,"span",27),e.qZA()(),e.TgZ(36,"span",28)(37,"button",29),e.NdJ("click",function(){return i.addUser(!0)}),e._uU(38),e.ALo(39,"translate"),e.YNc(40,al,1,0,"span",27),e.qZA()(),e.TgZ(41,"span",30)(42,"button",31),e.NdJ("click",function(){return i.addAnotherUser()}),e._uU(43),e.ALo(44,"translate"),e.YNc(45,lc,1,0,"span",27),e.qZA()()(),e.TgZ(46,"button",32),e.NdJ("click",function(){return i.hide()}),e._uU(47),e.ALo(48,"translate"),e.qZA()()()()()()),2&t){const p=e.MAs(24);e.Q6J("config",e.DdM(38,z1)),e.xp6(6),e.Oqu(e.lcZ(7,26,"Users.NewUser")),e.xp6(5),e.Oqu(e.lcZ(12,28,"Common.Close")),e.xp6(3),e.Q6J("formGroup",i.addUserForm),e.xp6(1),e.Q6J("id","FirstName")("label","Users.FirstName"),e.xp6(2),e.Q6J("id","LastName")("label","Users.LastName"),e.xp6(2),e.Q6J("id","Username")("label","Users.Username"),e.xp6(2),e.Q6J("id","Email")("label","Users.Email")("isLast",!i.canCreatePassword),e.xp6(2),e.Q6J("claimTypes",i.claimTypes),e.xp6(2),e.Q6J("formGroup",i.addUserForm),e.xp6(1),e.Q6J("ngIf",i.canCreatePassword),e.xp6(6),e.Q6J("disabled",!i.addUserForm.valid||!p.isFormValid()||i.inFlight),e.xp6(1),e.hij(" ",e.lcZ(34,30,"Common.Save")," "),e.xp6(2),e.Q6J("ngIf",i.inFlight&&i.addClicked===i.addButtonClick.Add),e.xp6(2),e.Q6J("disabled",i.addAnother||!i.addUserForm.valid||!p.isFormValid()||i.inFlight),e.xp6(1),e.hij(" ",e.lcZ(39,32,"Common.SaveAndConfigure")," "),e.xp6(2),e.Q6J("ngIf",i.inFlight&&i.addClicked===i.addButtonClick.AddAndConfigure),e.xp6(2),e.Q6J("disabled",!i.addUserForm.valid||!p.isFormValid()||i.inFlight),e.xp6(1),e.hij(" ",e.lcZ(44,34,"Common.SaveAndAdd")," "),e.xp6(2),e.Q6J("ngIf",i.inFlight&&i.addClicked===i.addButtonClick.AddAnother),e.xp6(2),e.Oqu(e.lcZ(48,36,"Common.Cancel"))}},dependencies:[z.O5,h._Y,h.Fj,h.JJ,h.JL,h.Q7,h.sg,h.u,le.oB,Dn.L,Cl,Ut.X$],encapsulation:2}),r})();const X1=["addUserModal"];function e0(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-add-user",28,29),e.NdJ("onSubmitted",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.onSubmitted(p))}),e.qZA()}}function t0(r,l){1&r&&(e.TgZ(0,"span"),e._UZ(1,"span",30),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Auditing.ShowFilters")," "))}function n0(r,l){1&r&&(e.TgZ(0,"span"),e._UZ(1,"span",31),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Auditing.HideFilters")," "))}function Gf(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",35)(1,"label",36),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"select",37),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2);return e.KtG(C.pageSize=p)})("change",function(){e.CHM(t);const p=e.oxw(2);return e.KtG(p.setPageLength(+p.pageSize))}),e.TgZ(5,"option",38),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"option",39),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"option",40),e._uU(12),e.ALo(13,"translate"),e.qZA()()()}if(2&r){const t=e.oxw(2);e.xp6(2),e.AsE("",t.pageSize," ",e.lcZ(3,6,"Nav.PerPage"),""),e.xp6(2),e.Q6J("ngModel",t.pageSize),e.xp6(2),e.hij("25 ",e.lcZ(7,8,"Nav.PerPage"),""),e.xp6(3),e.hij("50 ",e.lcZ(10,10,"Nav.PerPage"),""),e.xp6(3),e.hij("100 ",e.lcZ(13,12,"Nav.PerPage"),"")}}function r0(r,l){if(1&r){const t=e.EpF();e.ynx(0,41),e.TgZ(1,"button",42),e.NdJ("click",function(){e.CHM(t);const p=e.oxw(2);return e.KtG(p.addModal.show())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()}2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Users.AddUser")," "))}function s0(r,l){if(1&r&&(e.TgZ(0,"app-action-bar"),e.ynx(1,32),e.YNc(2,Gf,14,14,"div",33),e.BQk(),e.YNc(3,r0,4,3,"ng-container",34),e.qZA()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",(null==t.pagedResult?null:t.pagedResult.results.length)>0),e.xp6(1),e.Q6J("ngIf",!t.isUserManagerReadOnly)}}function o0(r,l){1&r&&e._UZ(0,"app-simple-loader")}function a0(r,l){1&r&&(e.TgZ(0,"div",43)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Users.NoUsersFound")))}function Hu(r,l){1&r&&(e.TgZ(0,"span",63)(1,"span",6),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Users.Filter.Deleted")))}function ll(r,l){1&r&&(e.TgZ(0,"span",64)(1,"span",6),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Users.Filter.Blocked")))}function Yc(r,l){1&r&&(e.TgZ(0,"span",65),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Users.Filter.Deleted")," "))}function zf(r,l){1&r&&(e.TgZ(0,"span",66),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Users.Filter.Blocked")," "))}const Yf=function(r,l){return{"fad fa-pencil":r,"fas fa-eye":l}};function Xf(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr",51)(1,"td",52),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditUser(C))}),e.YNc(2,Hu,4,3,"span",53),e.YNc(3,ll,4,3,"span",54),e.TgZ(4,"b",55),e._uU(5),e.qZA()(),e.TgZ(6,"td",56),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditUser(C))}),e._uU(7),e.qZA(),e.TgZ(8,"td",57),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditUser(C))}),e._uU(9),e.qZA(),e.TgZ(10,"td",58),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditUser(C))}),e.YNc(11,Yc,3,3,"span",59),e.YNc(12,zf,3,3,"span",60),e.qZA(),e.TgZ(13,"td",58),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditUser(C))}),e.TgZ(14,"button",61),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditUser(C))}),e._UZ(15,"span",62),e.TgZ(16,"span",6),e._uU(17),e.ALo(18,"translate"),e.qZA()()()()}if(2&r){const t=l.$implicit,i=e.oxw(2);e.ekj("inactive",t.isBlocked||t.isDeleted),e.xp6(2),e.Q6J("ngIf",t.isDeleted),e.xp6(1),e.Q6J("ngIf",t.isBlocked&&!t.isDeleted),e.xp6(2),e.hij(" ",t.username," "),e.xp6(2),e.AsE(" ",t.firstName," ",t.lastName," "),e.xp6(2),e.hij(" ",t.email," "),e.xp6(2),e.Q6J("ngIf",t.isDeleted),e.xp6(1),e.Q6J("ngIf",t.isBlocked&&!t.isDeleted),e.xp6(3),e.Q6J("ngClass",e.WLB(14,Yf,!i.isUserManagerReadOnly,i.isUserManagerReadOnly)),e.xp6(2),e.Oqu(e.lcZ(18,12,"Common.Edit"))}}function AT(r,l){if(1&r&&(e.TgZ(0,"table",44)(1,"thead")(2,"tr")(3,"th",45),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",46),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",47),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",48)(13,"span",6),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"th",48)(17,"span",6),e._uU(18),e.ALo(19,"translate"),e.qZA()()()(),e.TgZ(20,"tbody",49),e.YNc(21,Xf,19,17,"tr",50),e.qZA()()),2&r){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,6,"Users.Username")," "),e.xp6(3),e.hij(" ",e.lcZ(8,8,"Users.FullName")," "),e.xp6(3),e.hij(" ",e.lcZ(11,10,"Users.Email")," "),e.xp6(4),e.Oqu(e.lcZ(15,12,"Common.Status")),e.xp6(4),e.Oqu(e.lcZ(19,14,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",t.pagedResult.results)}}function ST(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-pager",67),e.NdJ("onGoToPage",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.goToPage(p))}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("totalResults",null==t.pagedResult?null:t.pagedResult.totalCount)("currentPage",t.page)("lastPage",null==t.pagedResult?null:t.pagedResult.pageCount)}}let xT=(()=>{class r extends ol.bk{constructor(t,i,p,C,K,Ce,Ue,lt){super(Ue,K,!0),this.router=t,this.userService=i,this.errorService=p,this.titleService=C,this.localize=Ce,this.securityService=lt,this.activeFilters=["active"],this.activeAdvancedFilters=[],this.pageSize=25,this.page=1,this.term="",this.showAdvancedFilters=!1,this.showingActive=!0,this.showingBlocked=!1,this.showingDeleted=!1,this.filterStream=new o.x,this.advancedFilterStream=new o.x,this.pageStream=new o.x,this.pageSizeStream=new o.x,this.mapSearchTerm=this.mapSearchTerm.bind(this)}ngOnInit(){this.titleService.setTitle(this.translate.instant("Nav.Users")+` - ${He.de.SITE_TITLE}`),this.isLoading=!0;const t=this.pageStream.pipe((0,u.U)(Ce=>(this.page=Ce,{searchTerm:this.term,page:Ce,pageSize:this.pageSize,filters:this.activeFilters}))),i=this.pageSizeStream.pipe((0,u.U)(Ce=>(this.pageSize=Ce,{searchTerm:this.term,page:this.page,pageSize:Ce,filters:this.activeFilters}))),p=this.filterStream.pipe((0,u.U)(Ce=>({searchTerm:this.term,page:this.page,pageSize:this.pageSize,filters:Ce}))),C=this.advancedFilterStream.pipe((0,u.U)(Ce=>({searchTerm:this.term,page:this.page,pageSize:this.pageSize,filters:this.activeFilters,advancedFilters:Ce})));t.pipe((0,Da.b)(i),(0,Da.b)(this.searchSource),(0,Da.b)(p),(0,Da.b)(C),(0,Da.b)(this.enterKeySource),(0,F.O)({searchTerm:this.term,page:this.page,pageSize:this.pageSize,filters:this.activeFilters,advancedFilters:this.activeAdvancedFilters}),(0,re.z)(Ce=>(this.isLoading=!0,this.userService.getUsersLightweight(Ce.searchTerm,Ce.page,Ce.pageSize,Ce.filters,Ce.advancedFilters).pipe((0,Qa.g)(200))))).subscribe(Ce=>{this.pagedResult=Ce,this.isLoading=!1},Ce=>{500===Ce.status?this.handleInternalServerError():this.errorService.handleError(Ce),this.isLoading=!1})}mapSearchTerm(t){return this.term=t,{searchTerm:t,page:1,pageSize:this.pageSize,filters:this.activeFilters,advancedFilters:this.activeAdvancedFilters}}editUser(t){const i=this.localize.translateRoute("/users");this.router.navigate([i,t.subject])}viewUser(t){const i=this.localize.translateRoute("/users/view");this.router.navigate([i,t.subject])}viewOrEditUser(t){this.isUserManagerReadOnly?this.viewUser(t):this.editUser(t)}goToPage(t){this.pageStream.next(t)}setPageLength(t){this.page=1,this.pageSizeStream.next(t)}filter(t){if(this.activeFilters.includes(t)){const i=this.activeFilters.indexOf(t);this.activeFilters.splice(i,1)}else this.activeFilters.push(t);this.page=1,this.filterStream.next(this.activeFilters)}advancedFilter(t){if(this.activeAdvancedFilters.includes(t)){const i=this.activeAdvancedFilters.indexOf(t);this.activeAdvancedFilters.splice(i,1)}else this.activeAdvancedFilters.push(t);this.page=1,this.advancedFilterStream.next(this.activeAdvancedFilters)}isShowing(t){return this.activeFilters.includes(t)}onSubmitted(t){t&&(this.filterStream.next(this.activeFilters),this.advancedFilterStream.next(this.activeAdvancedFilters))}get isUserManagerReadOnly(){return(0,ot.ub)(this.securityService.userPermissions)}handleInternalServerError(){this.toastr.error(this.translate.instant("Users.Filter.StoredProcedureErrorMessage"),this.translate.instant("Notifications.Error"))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.F0),e.Y36(Cr.K),e.Y36(Ee.T),e.Y36(n.Dx),e.Y36(Ut.sK),e.Y36(Un.An),e.Y36(si._W),e.Y36(ti.I))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(X1,5),2&t){let p;e.iGM(p=e.CRH())&&(i.addModal=p.first)}},features:[e.qOj],decls:45,vars:36,consts:[["id","addUserComponent",3,"onSubmitted",4,"ngIf"],["id","userList",1,"tw-container","tw-mx-auto"],["id","searchContainer",1,"tw-mb-2"],[1,"tw-flex","tw-bg-white","tw-border","tw-border-grey-300","tw-opacity-75","tw-cursor-text","tw-rounded","focus-within:tw-opacity-100","focus-within:tw-border-blue-400","trans"],["for","searchUserName",1,"tw-flex","tw-items-center","tw-text-grey-500","tw-m-0","tw-ml-3"],["aria-hidden","true",1,"far","fa-search","tw-text-sm"],[1,"sr-only"],["id","searchUserName","type","search",1,"tw-bg-transparent","tw-border-0","tw-text-base","tw-leading-tight","tw-px-2","tw-py-2","tw-w-full","focus:tw-outline-none","trans",3,"ngModel","placeholder","ngModelChange","keyup"],["searchUserName",""],["id","showFilterButton","type","button","aria-expanded","showAdvancedFilters",1,"tw-btn-link","tw-btn-small","tw-px-0","mt-2",3,"click"],[4,"ngIf"],["id","toggleFilters","aria-labelledby","showFilterButton",1,"tw-mt-3","tw-mb-6",3,"hidden"],[1,"tw-flex-grid","md:tw-flex-nowrap","mb-3"],[1,"tw-flex-grid-col","md:tw-w-2/3","lg:tw-w-3/5","mt-2","ml-2"],[1,"tw-form-group","tw-mb-0"],[3,"id","label","help","isLast"],[3,"id"],["id","includeClaims","name","includeClaims","type","checkbox",1,"tw-form-switch__input",3,"click"],[1,"tw-flex-grid-col","md:tw-ml-auto","md:tw-w-auto","mb-3","mr-2"],[1,"tw-form-label"],[1,"tw-flex","tw-items-center"],[1,"mr-2"],["id","activeFilter",3,"ngClass","click"],["id","blockedFilter",3,"ngClass","click"],["id","deletedFilter",3,"ngClass","click"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable selectable hover",4,"ngIf"],[3,"totalResults","currentPage","lastPage","onGoToPage",4,"ngIf"],["id","addUserComponent",3,"onSubmitted"],["addUserModal",""],["aria-hidden","true",1,"fas","fa-angle-down","tw-mr-1"],["aria-hidden","true",1,"fas","fa-angle-up","tw-mr-1"],["left",""],["class","tw-hidden tw-form-select tw-w-auto sm:tw-block",4,"ngIf"],["right","",4,"ngIf"],[1,"tw-hidden","tw-form-select","tw-w-auto","sm:tw-block"],["for","pageSizeToggle",1,"sr-only"],["id","pageSizeToggle",1,"tw-form-control","tw-form-control-small",3,"ngModel","ngModelChange","change"],["value","25"],["value","50"],["value","100"],["right",""],[1,"tw-btn-success",3,"click"],["role","alert",1,"tw-alert"],[1,"datatable","selectable","hover"],["id","sortUsername",1,"md:tw-w-1/3","lg:tw-w-1/3"],[1,"tw-hidden","md:tw-table-cell"],[1,"tw-hidden","lg:tw-table-cell"],[1,"tw-w-1"],["id","usersTable"],["class","group",3,"inactive",4,"ngFor","ngForOf"],[1,"group"],[1,"tw-truncate","tw-max-w-0",3,"click"],["class","fas fa-trash tw-text-red-500 tw-mr-1",4,"ngIf"],["class","fas fa-exclamation-triangle tw-text-orange-500 tw-mr-1",4,"ngIf"],[1,"tw-text-blue-500"],[1,"tw-hidden","tw-truncate","tw-max-w-0","md:tw-table-cell",3,"click"],[1,"tw-hidden","tw-truncate","tw-max-w-0","lg:tw-table-cell",3,"click"],[3,"click"],["class","tw-pill-danger",4,"ngIf"],["class","tw-pill-warning",4,"ngIf"],["id","userTableButton","type","button",1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500",3,"click"],["id","viewOrEditIcon","aria-hidden","true",3,"ngClass"],[1,"fas","fa-trash","tw-text-red-500","tw-mr-1"],[1,"fas","fa-exclamation-triangle","tw-text-orange-500","tw-mr-1"],[1,"tw-pill-danger"],[1,"tw-pill-warning"],[3,"totalResults","currentPage","lastPage","onGoToPage"]],template:function(t,i){1&t&&(e.YNc(0,e0,2,0,"app-add-user",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._UZ(5,"span",5),e.TgZ(6,"span",6),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"input",7,8),e.NdJ("ngModelChange",function(C){return i.searchTerm=C})("keyup",function(C){return i.search(C)}),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"button",9),e.NdJ("click",function(){return i.showAdvancedFilters=!i.showAdvancedFilters}),e.YNc(13,t0,4,3,"span",10),e.YNc(14,n0,4,3,"span",10),e.qZA(),e.TgZ(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"app-form-row",15)(20,"app-form-toggle",16)(21,"input",17),e.NdJ("click",function(){return i.advancedFilter("claims")}),e.qZA()()()()(),e.TgZ(22,"div",18)(23,"p",19),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"ul",20)(27,"li",21)(28,"button",22),e.NdJ("click",function(){return i.filter("active")}),e._uU(29),e.ALo(30,"translate"),e.qZA()(),e.TgZ(31,"li",21)(32,"button",23),e.NdJ("click",function(){return i.filter("blocked")}),e._uU(33),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"li")(36,"button",24),e.NdJ("click",function(){return i.filter("deleted")}),e._uU(37),e.ALo(38,"translate"),e.qZA()()()()(),e._UZ(39,"hr"),e.qZA()(),e.YNc(40,s0,4,2,"app-action-bar",10),e.YNc(41,o0,1,0,"app-simple-loader",10),e.YNc(42,a0,4,3,"div",25),e.YNc(43,AT,22,16,"table",26),e.YNc(44,ST,1,3,"app-pager",27),e.qZA()),2&t&&(e.Q6J("ngIf",!i.isUserManagerReadOnly),e.xp6(7),e.Oqu(e.lcZ(8,24,"Common.Search")),e.xp6(2),e.s9C("placeholder",e.lcZ(11,26,"Users.SearchPlaceholder")),e.Q6J("ngModel",i.searchTerm),e.xp6(4),e.Q6J("ngIf",!i.showAdvancedFilters),e.xp6(1),e.Q6J("ngIf",i.showAdvancedFilters),e.xp6(1),e.Q6J("hidden",!i.showAdvancedFilters),e.xp6(4),e.Q6J("id","includeClaims")("label","Users.Filter.IncludeClaims")("help","Users.Filter.IncludeClaimsHelp")("isLast",!0),e.xp6(1),e.Q6J("id","includeClaims"),e.xp6(4),e.Oqu(e.lcZ(25,28,"Auditing.Showing")),e.xp6(4),e.Q6J("ngClass",i.isShowing("active")?"tw-btn":"tw-btn-link"),e.xp6(1),e.hij(" ",e.lcZ(30,30,"Users.Filter.Active")," "),e.xp6(3),e.Q6J("ngClass",i.isShowing("blocked")?"tw-btn":"tw-btn-link"),e.xp6(1),e.hij(" ",e.lcZ(34,32,"Users.Filter.Blocked")," "),e.xp6(3),e.Q6J("ngClass",i.isShowing("deleted")?"tw-btn":"tw-btn-link"),e.xp6(1),e.hij(" ",e.lcZ(38,34,"Users.Filter.Deleted")," "),e.xp6(3),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.pagedResult?null:i.pagedResult.results.length)<1&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.pagedResult?null:i.pagedResult.results.length)>0&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.pagedResult?null:i.pagedResult.results.length)>0&&!i.isLoading))},dependencies:[z.mk,z.sg,z.O5,h.YN,h.Kr,h.Fj,h.EJ,h.JJ,h.On,wt.P,kt.K,En.w,Dn.L,ds.O,Y1,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})(),ep=(()=>{class r{constructor(t){this.translate=t}ngAfterViewInit(){document.dispatchEvent(new Event("appready"))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:10,vars:6,consts:[[1,"tw-p-4"],[1,"tw-container","tw-mx-auto"],["role","alert",1,"tw-alert-danger"],[1,"tw-text-sm","tw-font-semibold"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.ALo(9,"translate"),e.qZA()()()()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,2,"Errors.NotFoundTitle")),e.xp6(3),e.Oqu(e.lcZ(9,4,"Errors.NotFoundDescription")))},dependencies:[Ut.X$],encapsulation:2}),r})();var Uo=m(8024);class ET{}var oo=m(160);function l0(r,l){1&r&&e._UZ(0,"span",6)}function c0(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"li",2)(1,"button",3),e.NdJ("click",function(){const C=e.CHM(t).index,K=e.oxw();return e.KtG(K.deleteValue(C))}),e.YNc(2,l0,1,0,"span",4),e.TgZ(3,"span",5),e._uU(4),e.qZA()()()}if(2&r){const t=l.$implicit,i=e.oxw();e.xp6(1),e.uIk("aria-label",i.enumValues),e.xp6(1),e.Q6J("ngIf",!i.readonly),e.xp6(2),e.Oqu(t)}}let u0=(()=>{class r{constructor(){this.readonly=!1,this.onDelete=new e.vpe}get id(){return this._id}set id(t){this._id=t||(0,ot.qs)()}ngOnInit(){}deleteValue(t){this.readonly||this.onDelete.emit(t)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-pill-list"]],inputs:{id:"id",values:"values",readonly:"readonly"},outputs:{onDelete:"onDelete"},decls:2,vars:2,consts:[[3,"id"],["class","tw-pill",4,"ngFor","ngForOf"],[1,"tw-pill"],[1,"tw-btn-small","tw-rounded","tw-pl-1",3,"click"],["class","fas fa-times tw-mr-1","aria-hidden","true",4,"ngIf"],[1,"tw-pl-1"],["aria-hidden","true",1,"fas","fa-times","tw-mr-1"]],template:function(t,i){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,c0,5,3,"li",1),e.qZA()),2&t&&(e.s9C("id",i.id+"-enumValues-select"),e.xp6(1),e.Q6J("ngForOf",i.values))},dependencies:[z.sg,z.O5]}),r})();function d0(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"input",6),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.newEnumValue=p)}),e.qZA(),e.TgZ(3,"button",7),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.onAdd())}),e._UZ(4,"span",8),e.TgZ(5,"span",9),e._uU(6),e.ALo(7,"translate"),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(2),e.s9C("id",t.id+"-newValue-input"),e.Q6J("ngModel",t.newEnumValue),e.xp6(1),e.s9C("id",t.id+"-newValue-button"),e.Q6J("disabled",t.addDisabled),e.xp6(3),e.Oqu(e.lcZ(7,5,"Common.Add"))}}function em(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-pill-list",10),e.NdJ("onDelete",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.onDelete(p))}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("readonly",t.reserved)("id",t.id)("values",t.value)}}function Ju(r,l){if(1&r&&(e.TgZ(0,"span",11),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"number"),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.AsE("",e.lcZ(2,2,"ClaimTypes.TooManyAllowedValues")," (",e.lcZ(3,4,t.value.length),")")}}let tp=(()=>{class r{constructor(){this.id=(0,ot.qs)(),this.value=[],this.required=!1,this.disabled=!1,this.reserved=!1,this.newEnumValue="",this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this.value=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}validate(t){return!this.required||this.value?.length?null:{required:{valid:!1}}}get addDisabled(){return this.isNullOrEmpty(this.newEnumValue)||this.value.includes(this.newEnumValue)}onAdd(){!this.newEnumValue||(this.value.push(this.newEnumValue),this.onChange(this.value),this.newEnumValue="")}onDelete(t){this.value.splice(t,1),this.onChange(this.value)}isNullOrEmpty(t){return!t||null!==t.match(/^ *$/)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-enum-claim-type"]],inputs:{id:"id",value:"value",required:"required",disabled:"disabled",reserved:"reserved"},features:[e._Bn([{provide:h.JU,useExisting:(0,e.Gpc)(()=>r),multi:!0},{provide:h.Cf,useExisting:(0,e.Gpc)(()=>r),multi:!0}])],decls:4,vars:3,consts:[["class","tw-form-row",4,"ngIf"],[1,"tw-pill-list"],[3,"readonly","id","values","onDelete",4,"ngIf"],["id","too-many-values",4,"ngIf"],[1,"tw-form-row"],[1,"tw-flex","tw-w-full","lg:tw-max-w-2xl"],["type","text",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0",3,"id","ngModel","ngModelChange"],[1,"tw-btn","tw-rounded-l-none",3,"id","disabled","click"],["aria-hidden","true",1,"far","fa-plus"],[1,"sr-only"],[3,"readonly","id","values","onDelete"],["id","too-many-values"]],template:function(t,i){1&t&&(e.YNc(0,d0,8,7,"div",0),e.TgZ(1,"div",1),e.YNc(2,em,1,3,"app-pill-list",2),e.YNc(3,Ju,4,6,"span",3),e.qZA()),2&t&&(e.Q6J("ngIf",!i.reserved),e.xp6(2),e.Q6J("ngIf",i.value.length<=50||!i.reserved),e.xp6(1),e.Q6J("ngIf",i.value.length>50&&i.reserved))},dependencies:[z.O5,h.Fj,h.JJ,h.On,u0,z.JJ,Ut.X$],encapsulation:2}),r})();const np=["addClaimTypeModal"];function p0(r,l){if(1&r&&(e.TgZ(0,"app-form-row",37),e._UZ(1,"app-edit-enum-claim-type",38),e.qZA()),2&r){const t=e.oxw();e.Q6J("label","Claims.AllowedValues"),e.xp6(1),e.Q6J("required","Enum"===t.addClaimTypeForm.get("valueType").value)}}function Zs(r,l){1&r&&(e.TgZ(0,"app-form-row",14),e._UZ(1,"input",39),e.qZA()),2&r&&e.Q6J("id","rules")("label","Claims.RegexRule")}function tm(r,l){1&r&&(e.TgZ(0,"app-form-row",14),e._UZ(1,"input",40),e.qZA()),2&r&&e.Q6J("id","ruleValidationFailureDescription")("label","Claims.RuleValidationFailureDescription")}const h0=function(){return{animated:!1,backdrop:"static"}};let ip=(()=>{class r{constructor(t,i,p,C,K,Ce){this.cdr=t,this.claimTypeService=i,this.errorService=p,this.translate=C,this.fb=K,this.toastr=Ce,this.onSubmitted=new e.vpe,this.descFocus=!1}keydown(t){"Enter"===t.key&&this.addClaimTypeForm.valid&&!this.descFocus&&this.addClaimType()}ngOnInit(){this.buildForm()}buildForm(){this.addClaimTypeForm=this.fb.group({valueType:["String",h.kI.required],name:["",h.kI.required],displayName:[""],description:["",h.kI.maxLength(1e3)],rule:[""],ruleValidationFailureDescription:[""],required:[!1,h.kI.required],userEditable:[!1,h.kI.required],allowedValues:[[]]})}addAnotherClaimType(){this.addAnother=!0,this.addClaimType()}addClaimType(){let t=new ET;t=this.addClaimTypeForm.value,"String"!==this.addClaimTypeForm.get("valueType").value&&(t.rule=void 0,t.ruleValidationFailureDescription=void 0),this.claimTypeService.addClaimType(t).subscribe({next:i=>{this.buildForm(),this.toastr.success(this.translate.instant("Claims.Title")+" "+t.name+" "+this.translate.instant("Common.Created"),this.translate.instant("Common.Added")),this.onSubmitted.emit(!0),this.addAnother||this.hide(),this.addAnother=!1},error:i=>{(this.errorService.handleError(i)&oo.s.Toast)!==oo.s.Toast&&this.toastr.error(this.translate.instant("Notifications.SomethingWrong"),this.translate.instant("Notifications.Error"))}})}hide(){this.addClaimTypeModal.hide()}show(){this.addClaimTypeModal.show()}ngOnDestroy(){this.hide()}onValueTypeChanged(){const t=this.addClaimTypeForm.get("allowedValues");"Enum"!==this.addClaimTypeForm.get("valueType").value?(t?.disable(),this.cdr.detectChanges()):(t?.setValue([]),t?.enable(),this.cdr.detectChanges())}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.sBO),e.Y36(so.M),e.Y36(Ee.T),e.Y36(Ut.sK),e.Y36(h.QS),e.Y36(si._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-claimtype"]],viewQuery:function(t,i){if(1&t&&e.Gf(np,7),2&t){let p;e.iGM(p=e.CRH())&&(i.addClaimTypeModal=p.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown",function(C){return i.keydown(C)},!1,e.evT)},outputs:{onSubmitted:"onSubmitted"},decls:62,vars:57,consts:[["bsModal","","id","addClaimTypeModal","tabindex","-1","role","dialog","aria-hidden","true",1,"modal",3,"config"],["addClaimTypeModal","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","scrollbars"],[3,"formGroup"],[3,"id","label","help"],["id","name","type","text","formControlName","name","name","name",1,"tw-form-control"],["id","displayName","type","text","formControlName","displayName","name","displayName",1,"tw-form-control"],[3,"id","label"],[1,"tw-form-select"],["formControlName","valueType","id","type",1,"tw-form-control",3,"change"],["value","String"],["value","Int"],["value","DateTime"],["value","Boolean"],["value","Enum"],[3,"label",4,"ngIf"],["id","description","formControlName","description","name","description",1,"tw-form-control",3,"focus","blur"],[3,"id","label",4,"ngIf"],[3,"id"],["id","required","type","checkbox","name","required","formControlName","required","value","true",1,"tw-form-switch__input"],[3,"id","label","help","isLast"],["id","userEditable","type","checkbox","name","userEditable","formControlName","userEditable","value","true",1,"tw-form-switch__input"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","addButton",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],[1,"tw-hidden","xs:tw-inline"],["id","addAnotherButton",1,"tw-btn",3,"disabled","click"],[1,"tw-btn-link","tw--mr-4",3,"click"],[3,"label"],["id","allowedValues","formControlName","allowedValues",3,"required"],["id","rules","formControlName","rule","type","text","name","rule",1,"tw-form-control"],["id","ruleValidationFailureDescription","formControlName","ruleValidationFailureDescription","type","text","name","ruleValidationFailureDescription",1,"tw-form-control"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.hide()}),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",9)(14,"form",10)(15,"app-form-row",11),e._UZ(16,"input",12),e.qZA(),e.TgZ(17,"app-form-row",11),e._UZ(18,"input",13),e.qZA(),e.TgZ(19,"app-form-row",14)(20,"div",15)(21,"select",16),e.NdJ("change",function(){return i.onValueTypeChanged()}),e.TgZ(22,"option",17),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"option",18),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"option",19),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"option",20),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"option",21),e._uU(35),e.ALo(36,"translate"),e.qZA()()()(),e.YNc(37,p0,2,2,"app-form-row",22),e.TgZ(38,"app-form-row",14)(39,"textarea",23),e.NdJ("focus",function(){return i.descFocus=!i.descFocus})("blur",function(){return i.descFocus=!i.descFocus}),e.qZA()(),e.YNc(40,Zs,2,2,"app-form-row",24),e.YNc(41,tm,2,2,"app-form-row",24),e.TgZ(42,"app-form-row",11)(43,"app-form-toggle",25),e._UZ(44,"input",26),e.qZA()(),e.TgZ(45,"app-form-row",27)(46,"app-form-toggle",25),e._UZ(47,"input",28),e.qZA()()()(),e._UZ(48,"div",29),e.TgZ(49,"div",30)(50,"div",31)(51,"div",32)(52,"button",33),e.NdJ("click",function(){return i.addClaimType()}),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.TgZ(55,"span",34)(56,"button",35),e.NdJ("click",function(){return i.addAnotherClaimType()}),e._uU(57),e.ALo(58,"translate"),e.qZA()()(),e.TgZ(59,"button",36),e.NdJ("click",function(){return i.hide()}),e._uU(60),e.ALo(61,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("config",e.DdM(56,h0)),e.xp6(6),e.Oqu(e.lcZ(7,36,"Claims.New")),e.xp6(5),e.Oqu(e.lcZ(12,38,"Common.Close")),e.xp6(3),e.Q6J("formGroup",i.addClaimTypeForm),e.xp6(1),e.Q6J("id","name")("label","Common.Name")("help","ClaimTypes.NameHelp"),e.xp6(2),e.Q6J("id","displayName")("label","Common.DisplayName")("help","ClaimTypes.DisplayNameHelp"),e.xp6(2),e.Q6J("id","type")("label","Common.Type"),e.xp6(4),e.Oqu(e.lcZ(24,40,"Common.Types.String")),e.xp6(3),e.Oqu(e.lcZ(27,42,"Common.Types.Int")),e.xp6(3),e.Oqu(e.lcZ(30,44,"Common.Types.DateTime")),e.xp6(3),e.Oqu(e.lcZ(33,46,"Common.Types.Boolean")),e.xp6(3),e.Oqu(e.lcZ(36,48,"Common.Types.Enum")),e.xp6(2),e.Q6J("ngIf","Enum"===i.addClaimTypeForm.get("valueType").value),e.xp6(1),e.Q6J("id","description")("label","Common.Description"),e.xp6(2),e.Q6J("ngIf","String"===i.addClaimTypeForm.get("valueType").value),e.xp6(1),e.Q6J("ngIf","String"===i.addClaimTypeForm.get("valueType").value),e.xp6(1),e.Q6J("id","required")("label","Claims.Required")("help","Claims.FutureUsers"),e.xp6(1),e.Q6J("id","required"),e.xp6(2),e.Q6J("id","userEditable")("label","Common.UserEditable")("help","Claims.UserEditable")("isLast",!0),e.xp6(1),e.Q6J("id","userEditable"),e.xp6(6),e.Q6J("disabled",!i.addClaimTypeForm.valid),e.xp6(1),e.Oqu(e.lcZ(54,50,"Common.Save")),e.xp6(3),e.Q6J("disabled",!i.addClaimTypeForm.valid),e.xp6(1),e.Oqu(e.lcZ(58,52,"Common.SaveAndAdd")),e.xp6(3),e.Oqu(e.lcZ(61,54,"Common.Cancel")))},dependencies:[z.O5,h._Y,h.YN,h.Kr,h.Fj,h.Wl,h.EJ,h.JJ,h.JL,h.Q7,h.sg,h.u,le.oB,Dn.L,ds.O,tp,Ut.X$],encapsulation:2}),r})();function nm(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-action-bar"),e.ynx(1,9),e.TgZ(2,"button",10),e.NdJ("click",function(){e.CHM(t),e.oxw();const p=e.MAs(3);return e.KtG(p.show())}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.BQk(),e.qZA()}2&r&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"Claims.Add")," "))}function f0(r,l){1&r&&e._UZ(0,"app-simple-loader")}function m0(r,l){1&r&&(e.TgZ(0,"div",11)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Claims.NoClaimsFound")))}function g0(r,l){1&r&&e._UZ(0,"span",25)}function _0(r,l){1&r&&e._UZ(0,"span",26)}function v0(r,l){1&r&&e._UZ(0,"span",27)}function DT(r,l){1&r&&e._UZ(0,"span",25)}function IT(r,l){1&r&&e._UZ(0,"span",26)}function Xc(r,l){1&r&&e._UZ(0,"span",27)}function rp(r,l){1&r&&e._UZ(0,"span",25)}function im(r,l){1&r&&e._UZ(0,"span",26)}function rm(r,l){1&r&&e._UZ(0,"span",27)}function sm(r,l){1&r&&e._UZ(0,"span",25)}function y0(r,l){1&r&&e._UZ(0,"span",26)}function om(r,l){1&r&&e._UZ(0,"span",27)}function am(r,l){1&r&&(e.TgZ(0,"span",40)(1,"span",23),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Common.Yes")))}function sp(r,l){1&r&&(e.TgZ(0,"span",41)(1,"span",23),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Common.No")))}function MT(r,l){1&r&&(e.TgZ(0,"span",40)(1,"span",23),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Common.Yes")))}function C0(r,l){1&r&&(e.TgZ(0,"span",41)(1,"span",23),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Common.No")))}function op(r,l){1&r&&(e.TgZ(0,"span",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Reserved")," "))}const lm=function(r,l){return{"fad fa-pencil":r,"fas fa-eye":l}};function cm(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr",28)(1,"td",29),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditClaimType(C))}),e.TgZ(2,"b",30),e._uU(3),e.qZA()(),e.TgZ(4,"td",31),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditClaimType(C))}),e.TgZ(5,"b",30),e._uU(6),e.qZA()(),e.TgZ(7,"td",31),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditClaimType(C))}),e.TgZ(8,"code"),e._uU(9),e.qZA()(),e.TgZ(10,"td",32),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditClaimType(C))}),e._uU(11),e.qZA(),e.TgZ(12,"td",33),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditClaimType(C))}),e.YNc(13,am,4,3,"span",34),e.YNc(14,sp,4,3,"span",35),e.qZA(),e.TgZ(15,"td",33),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditClaimType(C))}),e.YNc(16,MT,4,3,"span",34),e.YNc(17,C0,4,3,"span",35),e.qZA(),e.TgZ(18,"td",36),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditClaimType(C))}),e.YNc(19,op,3,3,"span",37),e.qZA(),e.TgZ(20,"td",36),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditClaimType(C))}),e.TgZ(21,"button",38),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditClaimType(C))}),e._UZ(22,"span",39),e.TgZ(23,"span",23),e._uU(24),e.ALo(25,"translate"),e.qZA()()()()}if(2&r){const t=l.$implicit,i=e.oxw(2);e.xp6(3),e.hij(" ",t.name," "),e.xp6(3),e.hij(" ",t.displayName," "),e.xp6(3),e.Oqu(t.valueType),e.xp6(2),e.hij(" ",t.description," "),e.xp6(2),e.Q6J("ngIf",t.required),e.xp6(1),e.Q6J("ngIf",!t.required),e.xp6(2),e.Q6J("ngIf",t.userEditable),e.xp6(1),e.Q6J("ngIf",!t.userEditable),e.xp6(2),e.Q6J("ngIf",t.reserved),e.xp6(3),e.Q6J("ngClass",e.WLB(13,lm,i.isAllPermission&&!i.isAllPermissionReadOnly,!i.isAllPermission)),e.xp6(2),e.Oqu(e.lcZ(25,11,"Common.Edit"))}}function Zl(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"table",12)(1,"thead")(2,"tr")(3,"th",13),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.sort("name"))}),e.TgZ(4,"span",14),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,g0,1,0,"span",15),e.YNc(8,_0,1,0,"span",16),e.YNc(9,v0,1,0,"span",17),e.qZA(),e.TgZ(10,"th",18),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th",19),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.sort("valueType"))}),e.TgZ(14,"span",14),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.YNc(17,DT,1,0,"span",15),e.YNc(18,IT,1,0,"span",16),e.YNc(19,Xc,1,0,"span",17),e.qZA(),e.TgZ(20,"th",20),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"th",21),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.sort("required"))}),e.TgZ(24,"span",14),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.YNc(27,rp,1,0,"span",15),e.YNc(28,im,1,0,"span",16),e.YNc(29,rm,1,0,"span",17),e.qZA(),e.TgZ(30,"th",21),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.sort("userEditable"))}),e.TgZ(31,"span",14),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.YNc(34,sm,1,0,"span",15),e.YNc(35,y0,1,0,"span",16),e.YNc(36,om,1,0,"span",17),e.qZA(),e.TgZ(37,"th",22)(38,"span",23),e._uU(39),e.ALo(40,"translate"),e.qZA()(),e.TgZ(41,"th",22)(42,"span",23),e._uU(43),e.ALo(44,"translate"),e.qZA()()()(),e.TgZ(45,"tbody"),e.YNc(46,cm,26,16,"tr",24),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,21,"Common.Name")),e.xp6(2),e.Q6J("ngIf",!t.sortContains("name")),e.xp6(1),e.Q6J("ngIf","name"===t.sortCriteria),e.xp6(1),e.Q6J("ngIf","-name"===t.sortCriteria),e.xp6(2),e.hij(" ",e.lcZ(12,23,"Common.DisplayName")," "),e.xp6(4),e.Oqu(e.lcZ(16,25,"Common.Type")),e.xp6(2),e.Q6J("ngIf",!t.sortContains("valueType")),e.xp6(1),e.Q6J("ngIf","valueType"===t.sortCriteria),e.xp6(1),e.Q6J("ngIf","-valueType"===t.sortCriteria),e.xp6(2),e.hij(" ",e.lcZ(22,27,"Common.Description")," "),e.xp6(4),e.Oqu(e.lcZ(26,29,"Common.Required")),e.xp6(2),e.Q6J("ngIf",!t.sortContains("required")),e.xp6(1),e.Q6J("ngIf","required"===t.sortCriteria),e.xp6(1),e.Q6J("ngIf","-required"===t.sortCriteria),e.xp6(3),e.Oqu(e.lcZ(33,31,"Common.UserEditable")),e.xp6(2),e.Q6J("ngIf",!t.sortContains("userEditable")),e.xp6(1),e.Q6J("ngIf","userEditable"===t.sortCriteria),e.xp6(1),e.Q6J("ngIf","-userEditable"===t.sortCriteria),e.xp6(3),e.Oqu(e.lcZ(40,33,"Common.Reserved")),e.xp6(4),e.Oqu(e.lcZ(44,35,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",t.claimTypes)}}function b0(r,l){if(1&r&&e._UZ(0,"app-pager",43),2&r){const t=e.oxw();e.Q6J("totalResults",null==t.claimTypes?null:t.claimTypes.length)}}let ap=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue){this.router=t,this.claimTypeService=i,this.errorService=p,this.translate=C,this.titleService=K,this.localize=Ce,this.securityService=Ue,this.sortCriteria="name",this.term="",this.isLoading=!0,this.sortStream=new o.x,this.searchStream=new o.x}ngOnInit(){this.titleService.setTitle(this.translate.instant("Nav.ClaimTypes")+" - "+He.de.SITE_TITLE);const t=this.searchStream.pipe((0,_.b)(300),(0,T.x)(),(0,u.U)(C=>(this.term=C,{search:C,sort:this.sortCriteria})));this.sortStream.pipe((0,u.U)(C=>(this.sortCriteria=C,{search:this.term,sort:C}))).pipe((0,D.T)(t),(0,F.O)({search:this.term,sort:this.sortCriteria}),(0,re.z)(C=>this.claimTypeService.getClaimTypes(C.search,C.sort,!0))).subscribe(C=>{this.claimTypes=C,this.isLoading=!1},C=>{this.errorService.handleError(C),this.isLoading=!1})}search(t){this.searchStream.next(t)}sort(t){this.sortCriteria=this.sortCriteria.startsWith("-")?t:"-"+t,this.sortStream.next(this.sortCriteria)}sortContains(t){return!!this.sortCriteria.includes(t)}onSubmitted(t){t&&this.sortStream.next(this.sortCriteria)}viewOrEditClaimType(t){this.isAllPermission?this.editClaimType(t):this.viewClaimType(t)}viewClaimType(t){const i=this.localize.translateRoute("/claim-types/view");this.router.navigate([i,t.id])}editClaimType(t){const i=this.localize.translateRoute("/claim-types");this.router.navigate([i,t.id])}get isAllPermission(){return(0,ot.Zr)(this.securityService.userPermissions)}get isAllPermissionReadOnly(){return(0,ot.Hr)(this.securityService.userPermissions)}get isIdentityServerManager(){return(0,ot.hC)(this.securityService.userPermissions)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.F0),e.Y36(so.M),e.Y36(Ee.T),e.Y36(Ut.sK),e.Y36(n.Dx),e.Y36(Un.An),e.Y36(ti.I))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:12,vars:11,consts:[[3,"title"],[3,"onSubmitted"],["addClaimTypeModal",""],["id","claimTypeList",1,"tw-container","tw-mx-auto"],[3,"placeholder","onSearch"],[4,"ngIf"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable selectable hover","id","claimTypesTable",4,"ngIf"],["hidePager","true",3,"totalResults",4,"ngIf"],["right",""],[1,"tw-btn-success",3,"click"],["role","alert",1,"tw-alert"],["id","claimTypesTable",1,"datatable","selectable","hover"],["id","sortName",1,"tw-max-w-0","tw-cursor-pointer","md:tw-w-1/3","lg:tw-w-1/4",3,"click"],[1,"tw-mr-2"],["class","fad fa-sort",4,"ngIf"],["class","fas fa-caret-down",4,"ngIf"],["class","fas fa-caret-up",4,"ngIf"],[1,"tw-hidden","tw-cursor-pointer","md:tw-table-cell"],[1,"tw-hidden","tw-cursor-pointer","md:tw-table-cell",3,"click"],[1,"tw-hidden","tw-w-1/4","lg:tw-table-cell"],[1,"tw-hidden","tw-cursor-pointer","tw-text-center","xl:tw-table-cell",3,"click"],[1,"tw-w-1"],[1,"sr-only"],["class","group",4,"ngFor","ngForOf"],[1,"fad","fa-sort"],[1,"fas","fa-caret-down"],[1,"fas","fa-caret-up"],[1,"group"],[1,"tw-max-w-0","tw-truncate",3,"click"],[1,"tw-text-blue-500"],[1,"tw-hidden","tw-truncate","md:tw-table-cell",3,"click"],[1,"tw-hidden","tw-max-w-0","tw-truncate","lg:tw-table-cell",3,"click"],[1,"tw-hidden","tw-text-center","xl:tw-table-cell",3,"click"],["class","fas fa-check tw-text-green-500",4,"ngIf"],["class","fas fa-times tw-opacity-25",4,"ngIf"],[3,"click"],["class","tw-pill",4,"ngIf"],["type","button",1,"tw-btn-link","tw-btn-small","editClaimType","group-hover:tw-text-blue-500",3,"click"],["id","viewOrEditIcon","aria-hidden","true",3,"ngClass"],[1,"fas","fa-check","tw-text-green-500"],[1,"fas","fa-times","tw-opacity-25"],[1,"tw-pill"],["hidePager","true",3,"totalResults"]],template:function(t,i){1&t&&(e._UZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.TgZ(2,"app-add-claimtype",1,2),e.NdJ("onSubmitted",function(C){return i.onSubmitted(C)}),e.qZA(),e.TgZ(4,"div",3)(5,"app-search",4),e.NdJ("onSearch",function(C){return i.search(C)}),e.ALo(6,"translate"),e.qZA(),e.YNc(7,nm,5,3,"app-action-bar",5),e.YNc(8,f0,1,0,"app-simple-loader",5),e.YNc(9,m0,4,3,"div",6),e.YNc(10,Zl,47,37,"table",7),e.YNc(11,b0,1,1,"app-pager",8),e.qZA()),2&t&&(e.Q6J("title",e.lcZ(1,7,"Nav.ClaimTypes")),e.xp6(5),e.Q6J("placeholder",e.lcZ(6,9,"ClaimTypes.SearchPlaceholder")),e.xp6(2),e.Q6J("ngIf",!i.isLoading&&i.isIdentityServerManager),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.claimTypes?null:i.claimTypes.length)<1&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.claimTypes?null:i.claimTypes.length)>0&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.claimTypes?null:i.claimTypes.length)>0&&!i.isLoading))},dependencies:[z.mk,z.sg,z.O5,dt.G,wt.P,kt.K,sn,En.w,ip,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var cl=m(9655),ja=m(3570),Ia=m(9658),pa=m(1216),ha=m(2830),Vl=m(6252);function lp(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"select",22),e.NdJ("change",function(){e.CHM(t);const p=e.oxw(2);return e.KtG(p.onValueTypeChanged())}),e.TgZ(1,"option",23),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"option",24),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"option",25),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"option",26),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"option",27),e._uU(14),e.ALo(15,"translate"),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("selected","String"==t.claimType.valueType),e.xp6(1),e.Oqu(e.lcZ(3,9,"Common.Types.String")),e.xp6(2),e.Q6J("selected","Int"==t.claimType.valueType),e.xp6(1),e.Oqu(e.lcZ(6,11,"Common.Types.Int")),e.xp6(2),e.Q6J("selected","DateTime"==t.claimType.valueType),e.xp6(1),e.Oqu(e.lcZ(9,13,"Common.Types.DateTime")),e.xp6(2),e.Q6J("selected","Boolean"==t.claimType.valueType),e.xp6(1),e.Oqu(e.lcZ(12,15,"Common.Types.Boolean")),e.xp6(3),e.Oqu(e.lcZ(15,17,"Common.Types.Enum"))}}const qu=function(r){return[r]};function w0(r,l){if(1&r&&(e._UZ(0,"app-readonly",9),e.ALo(1,"readOnlyValue")),2&r){const t=e.oxw(2);e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(4,qu,e.lcZ(1,2,t.claimType.valueType)))}}function um(r,l){if(1&r&&(e.TgZ(0,"app-form-row",28),e._UZ(1,"app-edit-enum-claim-type",29),e.qZA()),2&r){const t=e.oxw(2);e.Q6J("label","Claims.AllowedValues"),e.xp6(1),e.Q6J("reserved",t.claimType.reserved)("required","Enum"===t.claimTypeForm.get("valueType").value)}}function cc(r,l){1&r&&e._UZ(0,"textarea",30)}function T0(r,l){if(1&r&&(e._UZ(0,"app-readonly",9),e.ALo(1,"readOnlyValue")),2&r){const t=e.oxw(2);e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(4,qu,e.lcZ(1,2,t.claimType.description)))}}function A0(r,l){1&r&&(e.TgZ(0,"app-form-row",11),e._UZ(1,"input",31),e.qZA()),2&r&&e.Q6J("id","rule")("label","Claims.RegexRule")}function S0(r,l){1&r&&(e.TgZ(0,"app-form-row",11),e._UZ(1,"input",32),e.qZA()),2&r&&e.Q6J("id","ruleValidation")("label","Claims.RuleValidationFailureDescription")}function x0(r,l){if(1&r&&(e.TgZ(0,"div",6)(1,"form",7)(2,"app-form-row",8),e._UZ(3,"app-readonly",9),e.ALo(4,"readOnlyValue"),e.qZA(),e.TgZ(5,"app-form-row",8),e._UZ(6,"input",10),e.qZA(),e.TgZ(7,"app-form-row",11)(8,"div",12),e.YNc(9,lp,16,19,"select",13),e.YNc(10,w0,2,6,"app-readonly",14),e.qZA()(),e.YNc(11,um,2,3,"app-form-row",15),e.TgZ(12,"app-form-row",11),e.YNc(13,cc,1,0,"textarea",16),e.YNc(14,T0,2,6,"app-readonly",14),e.qZA(),e.YNc(15,A0,2,2,"app-form-row",17),e.YNc(16,S0,2,2,"app-form-row",17),e.TgZ(17,"app-form-row",8)(18,"app-form-toggle",18),e._UZ(19,"input",19),e.qZA()(),e.TgZ(20,"app-form-row",20)(21,"app-form-toggle",18),e._UZ(22,"input",21),e.qZA()()()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.claimTypeForm),e.xp6(1),e.Q6J("id","name")("label","Common.Name")("help","ClaimTypes.NameHelp"),e.xp6(1),e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(31,qu,e.lcZ(4,29,t.claimType.name))),e.xp6(2),e.Q6J("id","displayName")("label","Common.DisplayName")("help","ClaimTypes.DisplayNameHelp"),e.xp6(2),e.Q6J("id","type")("label","Common.Type"),e.xp6(2),e.Q6J("ngIf",!t.claimType.reserved),e.xp6(1),e.Q6J("ngIf",t.claimType.reserved),e.xp6(1),e.Q6J("ngIf","Enum"===t.claimTypeForm.get("valueType").value),e.xp6(1),e.Q6J("id","description")("label","Common.Description"),e.xp6(1),e.Q6J("ngIf",!t.claimType.reserved),e.xp6(1),e.Q6J("ngIf",t.claimType.reserved),e.xp6(1),e.Q6J("ngIf","String"===t.claimTypeForm.get("valueType").value),e.xp6(1),e.Q6J("ngIf","String"===t.claimTypeForm.get("valueType").value),e.xp6(1),e.Q6J("id","required")("label","Claims.Required")("help","Claims.FutureUsers"),e.xp6(1),e.Q6J("id","required"),e.xp6(2),e.Q6J("id","userEditable")("label","Common.UserEditable")("help","Claims.UserEditable")("isLast",!0),e.xp6(1),e.Q6J("id","userEditable")}}const cp=function(){return{backdrop:"static",animated:!1}};function E0(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",34)(2,"div",35)(3,"div",36)(4,"h5",37),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",38),e._UZ(8,"span",39),e.TgZ(9,"span",40),e._uU(10),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",41)(13,"p",42),e._uU(14),e.ALo(15,"translate"),e.TgZ(16,"strong"),e._uU(17),e.qZA(),e._uU(18,"?"),e.qZA(),e._UZ(19,"p",43),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"div",44),e.TgZ(22,"div",45)(23,"div",46)(24,"div",47)(25,"button",48),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.delete())}),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"button",49),e._uU(29),e.ALo(30,"translate"),e.qZA()()()()()()}if(2&r){const t=e.oxw();e.Q6J("config",e.DdM(20,cp)),e.xp6(5),e.Oqu(e.lcZ(6,8,"Common.Delete.Confirm")),e.xp6(5),e.Oqu(e.lcZ(11,10,"Common.Close")),e.xp6(4),e.hij("",e.lcZ(15,12,"Common.Delete.AreYouSureSimple")," "),e.xp6(3),e.Oqu(t.claimType.name),e.xp6(2),e.Q6J("innerHTML",e.lcZ(20,14,"Common.Delete.Warning"),e.oJD),e.xp6(7),e.Oqu(e.lcZ(27,16,"Common.Delete.Title")),e.xp6(3),e.Oqu(e.lcZ(30,18,"Common.Delete.No"))}}const dm=function(r,l){return{title:r,link:l}};let D0=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt,Et,Wt,an){this.router=t,this.translate=i,this.toastr=p,this.fb=C,this.claimTypeService=K,this.titleService=Ce,this.dialogService=Ue,this.localize=lt,this.errorService=Et,this.securityService=Wt,this.cdr=an,this.claimType=null}get ReadOnlyFieldType(){return cl.O}ngOnInit(){this.claimTypeSubscription=this.claimTypeService.getCachedClaimType().subscribe({next:t=>{this.claimType=t,this.titleService.setTitle(this.translate.instant("Claims.Title")+" "+this.claimType.name+` - ${He.de.SITE_TITLE}`),this.buildForm(),this.initialData=JSON.stringify(t)},error:t=>{this.errorService.handleError(t)}})}ngOnDestroy(){this.claimTypeSubscription.unsubscribe()}canDeactivate(){return!this.claimTypeForm.dirty||(this.dialogService.confirm(),this.dialogService.eventStream)}buildForm(){this.claimTypeForm=this.fb.group({id:[this.claimType.id],name:[this.claimType.name,h.kI.required],displayName:[this.claimType.displayName],description:[{value:this.claimType.description,disabled:this.claimType.reserved},[h.kI.maxLength(1e3)]],required:[{value:this.claimType.required,disabled:"sub"===this.claimType.name||"role"===this.claimType.name},h.kI.required],valueType:[{value:this.claimType.valueType,disabled:this.claimType.reserved},h.kI.required],rule:[{value:this.claimType.rule,disabled:this.claimType.reserved}],ruleValidationFailureDescription:[{value:this.claimType.ruleValidationFailureDescription,disabled:this.claimType.reserved}],userEditable:[this.claimType.userEditable,h.kI.required],allowedValues:[this.claimType.allowedValues||[]]})}submit(){const t=this.claimTypeForm.getRawValue();"String"!==this.claimTypeForm.get("valueType").value&&(t.rule=void 0,t.ruleValidationFailureDescription=void 0),this.claimTypeService.updateClaimType(t).subscribe({next:i=>{this.toastr.success(this.translate.instant("Notifications.Saving Success Message"),this.translate.instant("Common.Saved")),this.initialData=JSON.stringify(t),this.claimTypeForm.markAsPristine(),this.claimTypeForm.markAsUntouched()},error:i=>{(this.errorService.handleError(i)&oo.s.Toast)!==oo.s.Toast&&this.toastr.error(this.translate.instant("Notifications.SomethingWrong"),this.translate.instant("Notifications.Error"))}})}delete(){this.claimTypeService.deleteClaimType(this.claimType).subscribe({next:t=>{this.toastr.success(this.claimType.name+" "+this.translate.instant("Common.Delete.Deleted"),this.translate.instant("Common.Removed"));const i=this.localize.translateRoute("/claim-types");this.router.navigate([i])},error:t=>{(this.errorService.handleError(t)&oo.s.Toast)!==oo.s.Toast&&this.toastr.error(this.translate.instant("Notifications.SomethingWrong"),this.translate.instant("Notifications.Error"))}})}onValueTypeChanged(){const t=this.claimTypeForm.get("allowedValues");"Enum"!==this.claimTypeForm.get("valueType").value?(t?.disable(),this.cdr.detectChanges()):(t?.setValue(this.claimType.allowedValues||[]),t?.enable(),this.cdr.detectChanges())}get isIdentityServerManager(){return(0,ot.hC)(this.securityService.userPermissions)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.F0),e.Y36(Ut.sK),e.Y36(si._W),e.Y36(h.QS),e.Y36(so.M),e.Y36(n.Dx),e.Y36(ja.x),e.Y36(Un.An),e.Y36(Ee.T),e.Y36(ti.I),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:14,vars:21,consts:[[3,"title","crumbs"],["id","editClaimType","class","tw-container tw-mx-auto",4,"ngIf"],["id","submitBtn",1,"tw-btn-success","tw-mr-3","tw-mb-3",3,"disabled","click"],["right",""],["id","deleteBtn","type","button","data-toggle","modal","data-target","#deleteClaimTypeModal",1,"tw-btn-danger","tw-mb-3",3,"disabled"],["bsModal","","id","deleteClaimTypeModal","class","modal","role","dialog","aria-hidden","true","tabindex","-1",3,"config",4,"ngIf"],["id","editClaimType",1,"tw-container","tw-mx-auto"],[3,"formGroup"],[3,"id","label","help"],[3,"fieldType","values"],["type","text","formControlName","displayName","name","displayName","id","displayName",1,"tw-form-control"],[3,"id","label"],[1,"tw-form-select"],["formControlName","valueType","class","tw-form-control","id","type",3,"change",4,"ngIf"],[3,"fieldType","values",4,"ngIf"],[3,"label",4,"ngIf"],["class","tw-form-control","formControlName","description","name","description","id","description",4,"ngIf"],[3,"id","label",4,"ngIf"],[3,"id"],["id","required","type","checkbox","name","required","formControlName","required","value","true",1,"tw-form-switch__input"],[3,"id","label","help","isLast"],["id","userEditable","type","checkbox","name","userEditable","formControlName","userEditable","value","true",1,"tw-form-switch__input"],["formControlName","valueType","id","type",1,"tw-form-control",3,"change"],["value","String",3,"selected"],["value","Int",3,"selected"],["value","DateTime",3,"selected"],["value","Boolean",3,"selected"],["value","Enum"],[3,"label"],["id","allowedValues","formControlName","allowedValues",3,"reserved","required"],["formControlName","description","name","description","id","description",1,"tw-form-control"],["type","text","formControlName","rule","name","rule","id","rule",1,"tw-form-control"],["type","text","formControlName","ruleValidationFailureDescription","name","rule","id","ruleValidation",1,"tw-form-control"],["bsModal","","id","deleteClaimTypeModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-center","scrollbars"],[1,"tw-mb-4"],[1,"tw-pill-danger",3,"innerHTML"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["data-dismiss","modal",1,"tw-btn-danger",3,"click"],["data-dismiss","modal",1,"tw-btn-link","tw--mr-4"]],template:function(t,i){1&t&&(e._UZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.ALo(2,"localize"),e.YNc(3,x0,23,33,"div",1),e.TgZ(4,"app-button-bar")(5,"button",2),e.NdJ("click",function(){return i.submit()}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.ynx(8,3),e.TgZ(9,"button",4),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.BQk(),e.qZA(),e._UZ(12,"app-can-deactivate"),e.YNc(13,E0,31,21,"div",5)),2&t&&(e.Q6J("title",i.claimType.name)("crumbs",e.VKq(19,qu,e.WLB(16,dm,e.lcZ(1,8,"Nav.ClaimTypes"),e.lcZ(2,10,"/claim-types")))),e.xp6(3),e.Q6J("ngIf",i.claimType),e.xp6(2),e.Q6J("disabled",!(i.claimTypeForm.dirty&&i.claimTypeForm.valid)),e.xp6(1),e.hij(" ",e.lcZ(7,12,"Common.Save")," "),e.xp6(3),e.Q6J("disabled",i.claimType.reserved||!i.isIdentityServerManager),e.xp6(1),e.hij(" ",e.lcZ(11,14,"Common.Delete.Title")," "),e.xp6(3),e.Q6J("ngIf",i.claimType))},dependencies:[z.O5,h._Y,h.YN,h.Kr,h.Fj,h.Wl,h.EJ,h.JJ,h.JL,h.Q7,h.sg,h.u,le.oB,Ia.J,dt.G,pa.N,Dn.L,ds.O,ha.f,tp,Ut.X$,Un.lO,Vl.b],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();class uc{}class I0 extends uc{constructor(){super()}}var Qu=m(2718),tr=m(590),up=m(7111);const dc=["claimsComponent"];function eu(r,l){1&r&&(e.TgZ(0,"app-form-row",36),e._UZ(1,"app-date-time",47),e.qZA()),2&r&&(e.Q6J("id","LockoutEnd")("label","Users.LockoutEnd"),e.xp6(1),e.Q6J("displayType","datetime"))}const M0=function(r){return[r]};function NT(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"form",35)(1,"app-form-row",36)(2,"app-form-toggle",37),e._UZ(3,"input",38),e.qZA()(),e.TgZ(4,"app-form-row",36),e._UZ(5,"app-readonly",39),e.ALo(6,"readOnlyValue"),e.qZA(),e.TgZ(7,"app-form-row",40)(8,"input",41),e.NdJ("keyup",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.checkForPolicyUserForm("firstName","given_name",null==p.userForm.controls.firstName?null:p.userForm.controls.firstName.value))}),e.qZA()(),e.TgZ(9,"app-form-row",40)(10,"input",42),e.NdJ("keyup",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.checkForPolicyUserForm("lastName","family_name",null==p.userForm.controls.lastName?null:p.userForm.controls.lastName.value))}),e.qZA()(),e.TgZ(11,"app-form-row",40)(12,"input",43),e.NdJ("keyup",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.checkForPolicyUserForm("username","name",null==p.userForm.controls.username?null:p.userForm.controls.username.value))}),e.qZA()(),e.TgZ(13,"app-form-row",40)(14,"input",44),e.NdJ("keyup",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.checkForPolicyUserForm("email","email",null==p.userForm.controls.email?null:p.userForm.controls.email.value))}),e.qZA()(),e.TgZ(15,"app-form-row",36)(16,"app-form-toggle",37)(17,"input",45),e.NdJ("change",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.clearLockoutEnd())}),e.qZA()()(),e.YNc(18,eu,2,3,"app-form-row",46),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("formGroup",t.userForm),e.xp6(1),e.Q6J("id","Blocked")("label","UserDetails.Active"),e.xp6(1),e.Q6J("id","Blocked")("isTraffic",!0)("isAlt",!0),e.xp6(2),e.Q6J("id","userId")("label","Common.ID"),e.xp6(1),e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(30,M0,e.lcZ(6,28,t.user.subject))),e.xp6(2),e.Q6J("id","FirstName")("label","Users.FirstName")("help",t.ifUserInfoPolicyClaim("given_name",null==t.userForm.controls.firstName?null:t.userForm.controls.firstName.value)?"Common.Policy":""),e.xp6(2),e.Q6J("id","LastName")("label","Users.LastName")("help",t.ifUserInfoPolicyClaim("family_name",null==t.userForm.controls.lastName?null:t.userForm.controls.lastName.value)?"Common.Policy":""),e.xp6(2),e.Q6J("id","Username")("label","Users.Username")("help",t.ifUserInfoPolicyClaim("name",null==t.userForm.controls.username?null:t.userForm.controls.username.value)?"Common.Policy":""),e.xp6(2),e.Q6J("id","Email")("label","Users.Email")("help",t.ifUserInfoPolicyClaim("email",null==t.userForm.controls.email?null:t.userForm.controls.email.value)?"Common.Policy":""),e.xp6(2),e.Q6J("id","LockoutEnabled")("label","Users.LockoutEnabled"),e.xp6(1),e.Q6J("id","LockoutEnabled")("isTraffic",!0)("isAlt",!1),e.xp6(2),e.Q6J("ngIf",null==t.userForm.controls.lockoutEnabled?null:t.userForm.controls.lockoutEnabled.value)}}function pm(r,l){if(1&r&&(e.TgZ(0,"form",35)(1,"app-form-row",48)(2,"app-form-toggle",37),e._UZ(3,"input",49),e.qZA()()()),2&r){const t=e.oxw();e.Q6J("formGroup",t.userForm),e.xp6(1),e.Q6J("id","EnabledTwoFactor")("label","UserDetails.EnabledTwoFactor")("help","UserDetails.EnabledTwoFactorHelp")("isLast",!0),e.xp6(1),e.Q6J("id","EnabledTwoFactor")("isTraffic",!0)("isAlt",!1)}}function N0(r,l){1&r&&(e.TgZ(0,"button",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"UserDetails.ChangePassword")," "))}function O0(r,l){1&r&&(e.TgZ(0,"button",51),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"UserDetails.ResetMfa")," "))}function k0(r,l){1&r&&(e.TgZ(0,"button",52),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Delete.Title")," "))}function hm(r,l){1&r&&(e.TgZ(0,"button",53),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Delete.UndoDelete")," "))}function R0(r,l){1&r&&e._UZ(0,"span",57)}function dp(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",54)(1,"div",13)(2,"h5",14),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",15),e._UZ(6,"span",16),e.TgZ(7,"span",17),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",18)(11,"p"),e._uU(12),e.ALo(13,"translate"),e.TgZ(14,"strong"),e._uU(15),e.qZA(),e._uU(16,"?"),e.qZA()(),e.TgZ(17,"div",22)(18,"div",23)(19,"div",24)(20,"button",55),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.resetPassword())}),e._uU(21),e.ALo(22,"translate"),e.YNc(23,R0,1,0,"span",56),e.qZA()(),e.TgZ(24,"button",26),e._uU(25),e.ALo(26,"translate"),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,8,"Common.ResetPassword.Confirm")),e.xp6(5),e.Oqu(e.lcZ(9,10,"Common.Close")),e.xp6(4),e.hij("",e.lcZ(13,12,"Common.ResetPassword.AreYouSureSimple")," "),e.xp6(3),e.Oqu(null==t.user?null:t.user.username),e.xp6(5),e.Q6J("disabled",t.inFlight),e.xp6(1),e.hij(" ",e.lcZ(22,14,"Common.ResetPassword.Title")," "),e.xp6(2),e.Q6J("ngIf",t.inFlight),e.xp6(2),e.Oqu(e.lcZ(26,16,"Common.Cancel"))}}function P0(r,l){1&r&&(e.TgZ(0,"div",58)(1,"div",13)(2,"h5",14),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",15),e._UZ(6,"span",16),e.TgZ(7,"span",17),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",18)(11,"p"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",22)(15,"div",23)(16,"div",24)(17,"a",59),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"button",26),e._uU(21),e.ALo(22,"translate"),e.qZA()()()()),2&r&&(e.xp6(3),e.Oqu(e.lcZ(4,5,"Common.ResetPassword.HowToSetupTitle")),e.xp6(5),e.Oqu(e.lcZ(9,7,"Common.Close")),e.xp6(4),e.Oqu(e.lcZ(13,9,"Common.ResetPassword.HowToSetup")),e.xp6(6),e.Oqu(e.lcZ(19,11,"LandingPage.Documentation")),e.xp6(3),e.Oqu(e.lcZ(22,13,"Common.Cancel")))}function L0(r,l){1&r&&e._UZ(0,"span",57)}function pp(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",60)(1,"div",13)(2,"h5",14),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",15),e._UZ(6,"span",16),e.TgZ(7,"span",17),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",18)(11,"p"),e._uU(12),e.ALo(13,"translate"),e.TgZ(14,"strong"),e._uU(15),e.qZA(),e._uU(16,"?"),e.qZA()(),e.TgZ(17,"div",22)(18,"div",23)(19,"div",24)(20,"button",55),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.resetMfa())}),e._uU(21),e.ALo(22,"translate"),e.YNc(23,L0,1,0,"span",56),e.qZA()(),e.TgZ(24,"button",26),e._uU(25),e.ALo(26,"translate"),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,8,"Common.ResetMfa.Confirm")),e.xp6(5),e.Oqu(e.lcZ(9,10,"Common.Close")),e.xp6(4),e.hij("",e.lcZ(13,12,"Common.ResetMfa.AreYouSureSimple")," "),e.xp6(3),e.Oqu(null==t.user?null:t.user.username),e.xp6(5),e.Q6J("disabled",t.inFlight),e.xp6(1),e.hij(" ",e.lcZ(22,14,"Common.ResetMfa.Title")," "),e.xp6(2),e.Q6J("ngIf",t.inFlight),e.xp6(2),e.Oqu(e.lcZ(26,16,"Common.Cancel"))}}function OT(r,l){1&r&&(e.TgZ(0,"div",61)(1,"div",13)(2,"h5",14),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",15),e._UZ(6,"span",16),e.TgZ(7,"span",17),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"div",18)(11,"p"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",22)(15,"div",23)(16,"div",24)(17,"a",59),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"button",26),e._uU(21),e.ALo(22,"translate"),e.qZA()()()()),2&r&&(e.xp6(3),e.Oqu(e.lcZ(4,5,"Common.ResetMfa.HowToSetupTitle")),e.xp6(5),e.Oqu(e.lcZ(9,7,"Common.Close")),e.xp6(4),e.Oqu(e.lcZ(13,9,"Common.ResetMfa.HowToSetup")),e.xp6(6),e.Oqu(e.lcZ(19,11,"LandingPage.Documentation")),e.xp6(3),e.Oqu(e.lcZ(22,13,"Common.Cancel")))}const hp=function(){return{backdrop:"static",animated:!1}};let fp=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt,Et,Wt,an,mn){this.fb=t,this.userService=i,this.errorService=p,this.router=C,this.translate=K,this.claimsService=Ce,this.dialogService=Ue,this.titleService=lt,this.toastr=Et,this.localize=Wt,this.configService=an,this.apClaimsService=mn,this.isDeleting=!1,this.requiredCount=0,this.dateTimeDisplayType=Fl.V,this.inFlight=!1}get ReadOnlyFieldType(){return cl.O}ngOnInit(){this.combinedObservable=this.claimsService.getClaimTypes(null,null).pipe((0,Qu.V)(this.userService.getCachedUser()),(0,u.U)(([t,i])=>({claimTypes:t,user:i})),(0,tr.P)()).subscribe({next:t=>{this.user=t.user,this.claimTypes=t.claimTypes,this.createForms();const i=this.translate.instant("Users.Singular")+" "+this.user.username+" "+this.translate.instant("Nav.Details")+" - "+He.de.SITE_TITLE;this.titleService.setTitle(i)},error:t=>{this.errorService.handleError(t)}}),this.configService.getConfig(!0).pipe((0,Oe.q)(1)).subscribe(t=>{this.passwordWebhookSetup=t.resetPasswordConfigured,this.resetMfaWebhookSetup=t.resetMfaConfigured})}ngOnDestroy(){this.combinedObservable.unsubscribe()}createForms(){this.userForm=this.fb.group({subject:[this.user.subject,h.kI.required],username:[{value:this.user.username,disabled:this.notAllowedToEditUserInfo("name",this.user.username)},[h.kI.required,(0,ot.Fd)()]],email:[{value:this.user.email,disabled:this.notAllowedToEditUserInfo("name",this.user.email)},[h.kI.required,Vf]],firstName:[{value:this.user.firstName,disabled:this.notAllowedToEditUserInfo("given_name",this.user.firstName)},h.kI.required],lastName:[{value:this.user.lastName,disabled:this.notAllowedToEditUserInfo("family_name",this.user.lastName)},h.kI.required],isBlocked:[this.user.isBlocked,h.kI.required],lockoutEnd:[this.user.lockoutEnd],lockoutEnabled:[this.user.lockoutEnabled],isDeleted:[this.user.isDeleted],twoFactorEnabled:[this.user.twoFactorEnabled]})}canDeactivate(){return!!this.isDeleting||!this.claimsComponent.claimsForm.dirty&&!this.userForm.dirty||(this.dialogService.confirm(),this.dialogService.eventStream)}deleteUser(){this.userService.deleteUser(this.user).subscribe(t=>{this.isDeleting=!0;const i=this.localize.translateRoute("/users");this.router.navigate([i]);const p=this.translate.instant("Users.Delete.Confirmation").replace("{0}",this.user.username);this.toastr.success(p,this.translate.instant("Notifications.Saving Success Title"))},t=>{const i={toastBody:this.translate.instant("Notifications.Delete Error Title"),toastTitle:this.translate.instant("Notifications.Delete User Message")};(this.errorService.handleError(t,i)&oo.s.Toast)!==oo.s.Toast&&this.toastr.error(i.toastBody,i.toastTitle)})}unDeleteUser(){const t=JSON.parse(JSON.stringify(this.user));t.isDeleted=!1,this.userService.updateUser(t).subscribe(i=>{this.user=t,this.userService.userSubject.next(t);const p=this.translate.instant("Notifications.Saving Success Title"),C=this.translate.instant("Notifications.Saving Success Message");this.toastr.success(C,p)},i=>{this.errorService.handleError(i)})}submit(){const t=this.userForm.value,i=this.user.claims.slice();for(const C of i){const K=this.claimsComponent.requiredClaims.find(Ce=>C.type===Ce.type);K&&(C.value=K.value)}this.claimsComponent.requiredClaims.forEach(C=>{void 0===i.find(Ce=>Ce.type===C.type)&&i.push(C)});const p=Object.assign(t,{claims:i},{roles:this.user.roles});this.userService.updateUser(p).subscribe({next:C=>{this.userForm.controls.username.dirty&&(this.user.username=this.userForm.controls.username.value);const K=this.translate.instant("Notifications.Saving Success Title"),Ce=this.translate.instant("Notifications.Saving Success Message");this.toastr.success(Ce,K),this.userService.userSubject.next(p),this.userForm.markAsPristine(),this.userForm.markAsUntouched(),this.claimsComponent.claimsForm.form.markAsUntouched(),this.claimsComponent.claimsForm.form.markAsPristine()},error:C=>{this.errorService.handleError(C)}})}resetPassword(){this.inFlight=!0,this.userService.resetPassword(this.user.subject).subscribe(t=>{this.inFlight=!1;const i=this.translate.instant("Notifications.Saving Success Title"),p=this.translate.instant("Notifications.Reset Success Message");this.toastr.success(p,i)},t=>{this.inFlight=!1,this.errorService.handleError(t)})}resetMfa(){this.inFlight=!0,this.userService.resetMfa(this.user.subject).subscribe(t=>{this.inFlight=!1;const i=this.translate.instant("Notifications.Saving Success Title"),p=this.translate.instant("Notifications.Reset Success Message");this.toastr.success(p,i)},t=>{this.inFlight=!1,this.errorService.handleError(t)})}ifUserInfoPolicyClaim(t,i){const p=new uc;return p.type=t,p.value=i,this.apClaimsService.isPolicyClaim(p)}notAllowedToEditUserInfo(t,i){const p=new uc;return p.type=t,p.value=i,this.apClaimsService.notAllowedToEditClaim(p)}notAllowedToEditClaim(t){return this.apClaimsService.notAllowedToEditClaim(t)}getHelpTextString(t){return this.apClaimsService.isPolicyClaim(t)?"DateTime"==t.format?"Common.PolicyWithUTCNotice":"Common.Policy":"DateTime"==t.format?"Common.Dates.UTCWarning":""}checkForPolicyUserForm(t,i,p){const C=new uc;C.type=i,C.value=p,this.apClaimsService.notAllowedToEditClaim(C)&&this.userForm.controls[t].setErrors({incorrect:!0})}getClaimType(t){return this.claimTypes.find(i=>i.name===t.type)}getAllowedValues(t){const i=this.claimTypes.find(p=>p.name===t.type);return i&&i.allowedValues||[]}clearLockoutEnd(){this.userForm.get("lockoutEnd").reset()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(Cr.K),e.Y36(Ee.T),e.Y36(yn.F0),e.Y36(Ut.sK),e.Y36(so.M),e.Y36(ja.x),e.Y36(n.Dx),e.Y36(si._W),e.Y36(Un.An),e.Y36(Yr.E),e.Y36(up.n))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-details"]],viewQuery:function(t,i){if(1&t&&e.Gf(dc,7),2&t){let p;e.iGM(p=e.CRH())&&(i.claimsComponent=p.first)}},decls:83,vars:59,consts:[["id","editUserDetails",1,"tw-container","tw-mx-auto"],[3,"formGroup",4,"ngIf"],["id","requiredClaimsComponent",3,"claimTypes","claims"],["claimsComponent",""],["id","submitBtn",1,"tw-btn-success","tw-mr-3","tw-mb-3",3,"disabled","click"],["class","tw-btn tw-mr-3 tw-mb-3","data-toggle","modal","data-target","#resetPasswordModal","id","resetPasswordButton","type","button",4,"ngIf"],["class","tw-btn tw-mr-3 tw-mb-3","data-toggle","modal","data-target","#resetMfaModal","id","resetMfaButton","type","button",4,"ngIf"],["right",""],["class","tw-btn-danger tw-mb-3","type","button","data-toggle","modal","data-target","#deleteUserModal",4,"ngIf"],["id","undoDelete","class","tw-btn-danger tw-mb-3","type","button","data-toggle","modal","data-target","#unDeleteUserModal",4,"ngIf"],["id","deleteUserModal","bsModal","","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-center","scrollbars"],[1,"tw-mb-4"],[1,"tw-pill-warning"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["data-dismiss","modal",1,"tw-btn-danger",3,"click"],["data-dismiss","modal",1,"tw-btn-link","tw--mr-4"],["id","unDeleteUserModal","bsModal","","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["bsModal","","id","resetPasswordModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog","modal-dialog--narrow"],["id","passwordResetModal","class","modal-content",4,"ngIf"],["id","passwordResetHowToSetupModal","class","modal-content",4,"ngIf"],["bsModal","","id","resetMfaModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["id","mfaResetModal","class","modal-content",4,"ngIf"],["id","mfaResetHowToSetupModal","class","modal-content",4,"ngIf"],[3,"formGroup"],[3,"id","label"],[3,"id","isTraffic","isAlt"],["id","Blocked","formControlName","isBlocked","type","checkbox",1,"tw-form-switch__input"],[3,"fieldType","values"],[3,"id","label","help"],["type","text","name","FirstName","id","FirstName","formControlName","firstName","required","",1,"tw-form-control",3,"keyup"],["type","text","name","LastName","id","LastName","formControlName","lastName","required","",1,"tw-form-control",3,"keyup"],["type","text","name","Username","id","Username","formControlName","username","required","",1,"tw-form-control",3,"keyup"],["type","email","name","Email","id","Email","formControlName","email","required","",1,"tw-form-control",3,"keyup"],["id","LockoutEnabled","formControlName","lockoutEnabled","type","checkbox",1,"tw-form-switch__input",3,"change"],[3,"id","label",4,"ngIf"],["id","LockoutEnd","name","lockoutEnd","formControlName","lockoutEnd","aria-describedby","toErrorLabel",3,"displayType"],[3,"id","label","help","isLast"],["id","EnabledTwoFactor","formControlName","twoFactorEnabled","type","checkbox",1,"tw-form-switch__input"],["data-toggle","modal","data-target","#resetPasswordModal","id","resetPasswordButton","type","button",1,"tw-btn","tw-mr-3","tw-mb-3"],["data-toggle","modal","data-target","#resetMfaModal","id","resetMfaButton","type","button",1,"tw-btn","tw-mr-3","tw-mb-3"],["type","button","data-toggle","modal","data-target","#deleteUserModal",1,"tw-btn-danger","tw-mb-3"],["id","undoDelete","type","button","data-toggle","modal","data-target","#unDeleteUserModal",1,"tw-btn-danger","tw-mb-3"],["id","passwordResetModal",1,"modal-content"],["data-dismiss","modal",1,"tw-btn-success",3,"disabled","click"],["class","fad fa-spinner-third fa-spin tw-text-secondary-500 tw-mr-2 tw-ml-2",4,"ngIf"],[1,"fad","fa-spinner-third","fa-spin","tw-text-secondary-500","tw-mr-2","tw-ml-2"],["id","passwordResetHowToSetupModal",1,"modal-content"],["href","documentation/Webhooks/webhooks.html","target","_blank",1,"tw-btn"],["id","mfaResetModal",1,"modal-content"],["id","mfaResetHowToSetupModal",1,"modal-content"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,NT,19,32,"form",1),e._UZ(2,"app-required-claims-form",2,3),e.YNc(4,pm,4,8,"form",1),e.qZA(),e.TgZ(5,"app-button-bar")(6,"button",4),e.NdJ("click",function(){return i.submit()}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,N0,3,3,"button",5),e.YNc(10,O0,3,3,"button",6),e.ynx(11,7),e.YNc(12,k0,3,3,"button",8),e.YNc(13,hm,3,3,"button",9),e.BQk(),e.qZA(),e.TgZ(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"h5",14),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"button",15),e._UZ(22,"span",16),e.TgZ(23,"span",17),e._uU(24),e.ALo(25,"translate"),e.qZA()()(),e.TgZ(26,"div",18)(27,"p",19),e._uU(28),e.ALo(29,"translate"),e.TgZ(30,"strong"),e._uU(31),e.qZA(),e._uU(32,"?"),e.qZA(),e.TgZ(33,"p",20),e._uU(34),e.ALo(35,"translate"),e.qZA()(),e._UZ(36,"div",21),e.TgZ(37,"div",22)(38,"div",23)(39,"div",24)(40,"button",25),e.NdJ("click",function(){return i.deleteUser()}),e._uU(41),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"button",26),e._uU(44),e.ALo(45,"translate"),e.qZA()()()()()(),e.TgZ(46,"div",27)(47,"div",11)(48,"div",12)(49,"div",13)(50,"h5",14),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.TgZ(53,"button",15),e._UZ(54,"span",16),e.TgZ(55,"span",17),e._uU(56),e.ALo(57,"translate"),e.qZA()()(),e.TgZ(58,"div",18)(59,"p"),e._uU(60),e.ALo(61,"translate"),e.TgZ(62,"strong"),e._uU(63),e.qZA(),e._uU(64,"?"),e.qZA()(),e.TgZ(65,"div",22)(66,"div",23)(67,"div",24)(68,"button",25),e.NdJ("click",function(){return i.unDeleteUser()}),e._uU(69),e.ALo(70,"translate"),e.qZA()(),e.TgZ(71,"button",26),e._uU(72),e.ALo(73,"translate"),e.qZA()()()()()(),e.TgZ(74,"div",28)(75,"div",29),e.YNc(76,dp,27,18,"div",30),e.YNc(77,P0,23,15,"div",31),e.qZA()(),e.TgZ(78,"div",32)(79,"div",29),e.YNc(80,pp,27,18,"div",33),e.YNc(81,OT,23,15,"div",34),e.qZA()(),e._UZ(82,"app-can-deactivate")),2&t){const p=e.MAs(3);e.xp6(1),e.Q6J("ngIf",i.user),e.xp6(1),e.Q6J("claimTypes",i.claimTypes)("claims",null==i.user?null:i.user.claims),e.xp6(2),e.Q6J("ngIf",i.user),e.xp6(2),e.Q6J("disabled",(null==i.userForm?null:i.userForm.invalid)||!p.isFormValid()||(null==i.userForm?null:i.userForm.pristine)&&(null==p.claimsForm?null:p.claimsForm.form.pristine)),e.xp6(1),e.hij(" ",e.lcZ(8,31,"Common.Save")," "),e.xp6(2),e.Q6J("ngIf",!(null!=i.user&&i.user.isDeleted)),e.xp6(1),e.Q6J("ngIf",!(null!=i.user&&i.user.isDeleted)),e.xp6(2),e.Q6J("ngIf",!(null!=i.user&&i.user.isDeleted)),e.xp6(1),e.Q6J("ngIf",null==i.user?null:i.user.isDeleted),e.xp6(1),e.Q6J("config",e.DdM(55,hp)),e.xp6(5),e.Oqu(e.lcZ(20,33,"Common.Delete.Confirm")),e.xp6(5),e.Oqu(e.lcZ(25,35,"Common.Close")),e.xp6(4),e.hij("",e.lcZ(29,37,"Common.Delete.AreYouSureSimple")," "),e.xp6(3),e.Oqu(null==i.user?null:i.user.username),e.xp6(3),e.Oqu(e.lcZ(35,39,"Users.Delete.AuditingPurposes")),e.xp6(7),e.Oqu(e.lcZ(42,41,"Common.Delete.Title")),e.xp6(3),e.Oqu(e.lcZ(45,43,"Common.Delete.No")),e.xp6(2),e.Q6J("config",e.DdM(56,hp)),e.xp6(5),e.Oqu(e.lcZ(52,45,"Common.Delete.UndoDelete")),e.xp6(5),e.Oqu(e.lcZ(57,47,"Common.Close")),e.xp6(4),e.hij("",e.lcZ(61,49,"Common.Delete.ConfirmUndoDelete")," "),e.xp6(3),e.Oqu(null==i.user?null:i.user.username),e.xp6(6),e.Oqu(e.lcZ(70,51,"Common.Delete.TitleUndo")),e.xp6(3),e.Oqu(e.lcZ(73,53,"Common.Cancel")),e.xp6(2),e.Q6J("config",e.DdM(57,hp)),e.xp6(2),e.Q6J("ngIf",i.passwordWebhookSetup),e.xp6(1),e.Q6J("ngIf",!i.passwordWebhookSetup),e.xp6(1),e.Q6J("config",e.DdM(58,hp)),e.xp6(2),e.Q6J("ngIf",i.resetMfaWebhookSetup),e.xp6(1),e.Q6J("ngIf",!i.resetMfaWebhookSetup)}},dependencies:[z.O5,h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.Q7,h.sg,h.u,le.oB,Ia.J,pa.N,Dn.L,ds.O,Cl,Fl.j,ha.f,Vl.b,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var mp=m(8783),gp=m(927),_p=m(8190),fm=m(9841);let kT=(()=>{class r{transform(t,i){let p=t;return i&&(p=t.filter(C=>C.name.toUpperCase().includes(i))),p}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275pipe=e.Yjl({name:"search",type:r,pure:!0}),r})();function U0(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",19)(1,"label",20),e._UZ(2,"span",21),e.TgZ(3,"span",13),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"input",22),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.availableSearchValue=p)}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,2,"Common.Search")),e.xp6(2),e.Q6J("ngModel",t.availableSearchValue)}}function mm(r,l){1&r&&e._UZ(0,"span",30)}function vp(r,l){if(1&r&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.description," ")}}const yp=function(r){return{"tw-text-grey-600":r}};function gm(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"li",23)(1,"label",24)(2,"input",25),e.NdJ("change",function(){const C=e.CHM(t).$implicit,K=e.oxw();return e.KtG(K.selectAvailable(C))}),e.qZA(),e.TgZ(3,"span",26)(4,"span",27),e.YNc(5,mm,1,0,"span",28),e._uU(6),e.qZA(),e.YNc(7,vp,2,1,"span",29),e.qZA()()()}if(2&r){const t=l.$implicit,i=e.oxw();let p;e.xp6(1),e.Q6J("htmlFor",i.prefix+t.name),e.xp6(1),e.s9C("id",i.prefix+t.name),e.s9C("name",t.name),e.Q6J("checked",t.selected)("disabled",i.isRestricted(t)||i.isReadOnly),e.xp6(2),e.Q6J("ngClass",e.VKq(10,yp,i.isReadOnly)),e.xp6(1),e.Q6J("ngIf",i.isRestricted(t)),e.xp6(1),e.AsE(" ",null!==(p=t.displayName)&&void 0!==p?p:t.name," ",t.shared?"*":""," "),e.xp6(1),e.Q6J("ngIf",(null==t.description?null:t.description.length)>0)}}function _m(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",32)(1,"label",33),e._UZ(2,"span",21),e.TgZ(3,"span",13),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"input",34),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.assignedSearchValue=p)}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,2,"Common.Search")),e.xp6(2),e.Q6J("ngModel",t.assignedSearchValue)}}function Cp(r,l){1&r&&e._UZ(0,"span",30)}function B0(r,l){if(1&r&&(e.TgZ(0,"span",31),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.description," ")}}function bp(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"li",35)(1,"label",24)(2,"input",25),e.NdJ("change",function(){const C=e.CHM(t).$implicit,K=e.oxw();return e.KtG(K.selectAssigned(C))}),e.qZA(),e.TgZ(3,"span",26)(4,"span",27),e.YNc(5,Cp,1,0,"span",28),e._uU(6),e.qZA(),e.YNc(7,B0,2,1,"span",29),e.qZA()()()}if(2&r){const t=l.$implicit,i=e.oxw();let p;e.xp6(1),e.Q6J("htmlFor",i.prefix+t.name),e.xp6(1),e.s9C("id",i.prefix+t.name),e.s9C("name",t.name),e.Q6J("checked",t.selected)("disabled",i.isRestricted(t)||i.isReadOnly),e.xp6(2),e.Q6J("ngClass",e.VKq(10,yp,i.isReadOnly)),e.xp6(1),e.Q6J("ngIf",i.isRestricted(t)),e.xp6(1),e.AsE(" ",null!==(p=t.displayName)&&void 0!==p?p:t.name," ",t.shared?"*":""," "),e.xp6(1),e.Q6J("ngIf",(null==t.description?null:t.description.length)>0)}}let Bo=(()=>{class r{constructor(){this.availableCount=0,this.assignedCount=0,this.unAssignedStream=new o.x,this.assignedStream=new o.x}set availableInput(t){this.available=this.sortArray(t)}set assignedInput(t){this.assigned=this.sortArray(t)}set isReadOnly(t){this._isReadOnly=t||!1}get isReadOnly(){return this._isReadOnly}ngOnInit(){this.prefix=Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}sortArray(t){if(t&&t.length>0)for(const i of t)i.selected=!1;return t.sort((i,p)=>i.name<p.name?-1:1)}selectAvailable(t){t.selected?this.availableCount-=1:this.availableCount+=1,t.selected=!t.selected}selectAssigned(t){t.selected?this.assignedCount-=1:this.assignedCount+=1,t.selected=!t.selected}assignItems(){let t=this.available.filter(i=>i.selected);this.assignedStream.next(t),this.available.forEach(i=>{i.selected=!1}),this.assigned.forEach(i=>{i.selected=!1}),t=[]}unAssignItems(){let t=this.assigned.filter(i=>i.selected);this.unAssignedStream.next(t),this.available.forEach(i=>{i.selected=!1}),this.assigned.forEach(i=>{i.selected=!1}),t=[]}isRestricted(t){if(this.restrictedInput)for(let i=0;i<this.restrictedInput.length;i++)if(this.restrictedInput[i].value===t.name)return!0}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-common-picker"]],inputs:{availableInput:"availableInput",assignedInput:"assignedInput",restrictedInput:"restrictedInput",assignedSearch:"assignedSearch",availableSearch:"availableSearch",isReadOnly:"isReadOnly"},decls:37,vars:28,consts:[["id","commonPicker",1,"tw-mx-auto","md:tw-flex","md:tw-justify-between"],[1,"tw-bg-white","tw-border","tw-border-grey-300","md:tw-w-2/5"],[1,"tw-flex","tw-flex-col","tw-items-center","tw-justify-start","tw-bg-primary-100","tw-border-b","tw-border-grey-300","tw-py-3","tw-px-4","md:tw-h-24","md:tw-py-1","md:tw-justify-center"],[1,"tw-font-semibold","tw-text-base","tw-truncate"],["class","tw-mt-3 tw-w-full tw-relative","id","availableSearch",4,"ngIf"],[1,"tw-py-2","tw-h-64","tw-overflow-hidden","tw-overflow-y-scroll","scrollbars","md:tw-h-72"],["id","unassignedItems","class","tw-py-3 tw-px-4",4,"ngFor","ngForOf"],[1,"md:tw-self-center","md:tw-shrink-0","md:tw-w-1/5"],["id","assignButtons",1,"tw-flex","tw-items-center","tw-justify-center","tw-p-2","md:tw-flex-wrap","lg:tw-px-3","xl:tw-px-4"],[1,"tw-p-2","tw-w-24","tw-text-center","md:tw-w-full"],["id","assignBtn",1,"tw-btn","tw-w-full","tw-max-w-32",3,"disabled","click"],["aria-hidden","true",1,"far","fa-chevron-down","md:tw-hidden"],["aria-hidden","true",1,"far","fa-chevron-right","tw-hidden","md:tw-inline"],[1,"sr-only"],["id","unAssignBtn",1,"tw-btn","tw-w-full","tw-max-w-32",3,"disabled","click"],["aria-hidden","true",1,"far","fa-chevron-up","md:tw-hidden"],["aria-hidden","true",1,"far","fa-chevron-left","tw-hidden","md:tw-inline"],["class","tw-mt-3 tw-w-full tw-relative","id","assignedSearch",4,"ngIf"],["id","assignedItems","class","tw-py-3 tw-px-4",4,"ngFor","ngForOf"],["id","availableSearch",1,"tw-mt-3","tw-w-full","tw-relative"],["for","searchAvailable",1,"tw-flex","tw-items-center","tw-justify-center","tw-text-grey-700","tw-mb-0","tw-w-10","tw-absolute","tw-inset-y-0"],["aria-hidden","true",1,"far","fa-search","tw-text-sm","tw-cursor-pointer"],["id","searchAvailable","name","availableSearchValue","type","search",1,"tw-form-control","tw-w-full","tw-pl-10",3,"ngModel","ngModelChange"],["id","unassignedItems",1,"tw-py-3","tw-px-4"],[1,"tw-flex","tw-items-start","tw-m-0","tw-text-sm","tw-leading-none","tw-normal-case","tw-cursor-pointer","tw-truncate",3,"htmlFor"],["type","checkbox",1,"tw-block","tw-mr-2",3,"id","name","checked","disabled","change"],[1,"tw-block","tw-w-full","tw-truncate"],[3,"ngClass"],["class","fas fa-lock tw-text-red-500 tw-text-xs tw-mr-1",4,"ngIf"],["class","tw-block tw-mt-2 tw-font-normal tw-text-xs tw-leading-none tw-text-grey-600 tw-truncate",4,"ngIf"],[1,"fas","fa-lock","tw-text-red-500","tw-text-xs","tw-mr-1"],[1,"tw-block","tw-mt-2","tw-font-normal","tw-text-xs","tw-leading-none","tw-text-grey-600","tw-truncate"],["id","assignedSearch",1,"tw-mt-3","tw-w-full","tw-relative"],["for","searchAssigned",1,"tw-flex","tw-items-center","tw-justify-center","tw-text-grey-700","tw-mb-0","tw-w-10","tw-absolute","tw-inset-y-0"],["id","searchAssigned","name","assignedSearchValue","type","search",1,"tw-form-control","tw-w-full","tw-pl-10",3,"ngModel","ngModelChange"],["id","assignedItems",1,"tw-py-3","tw-px-4"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,U0,7,4,"div",4),e.qZA(),e.TgZ(7,"ul",5),e.YNc(8,gm,8,12,"li",6),e.ALo(9,"search"),e.ALo(10,"uppercase"),e.qZA()(),e.TgZ(11,"div",7)(12,"ul",8)(13,"li",9)(14,"button",10),e.NdJ("click",function(){return i.assignItems()}),e._UZ(15,"span",11)(16,"span",12),e.TgZ(17,"span",13),e._uU(18),e.ALo(19,"translate"),e.qZA()()(),e.TgZ(20,"li",9)(21,"button",14),e.NdJ("click",function(){return i.unAssignItems()}),e._UZ(22,"span",15)(23,"span",16),e.TgZ(24,"span",13),e._uU(25),e.ALo(26,"translate"),e.qZA()()()()(),e.TgZ(27,"div",1)(28,"div",2)(29,"h2",3),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.YNc(32,_m,7,4,"div",17),e.qZA(),e.TgZ(33,"ul",5),e.YNc(34,bp,8,12,"li",18),e.ALo(35,"search"),e.ALo(36,"uppercase"),e.qZA()()()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,10,"UserDetails.Available")),e.xp6(2),e.Q6J("ngIf",i.availableSearch||!i.isReadOnly),e.xp6(2),e.Q6J("ngForOf",e.xi3(9,12,i.available,e.lcZ(10,15,i.availableSearchValue))),e.xp6(6),e.Q6J("disabled",i.availableCount<1||i.isReadOnly),e.xp6(4),e.Oqu(e.lcZ(19,17,"Common.Unassign")),e.xp6(3),e.Q6J("disabled",i.assignedCount<1||i.isReadOnly),e.xp6(4),e.Oqu(e.lcZ(26,19,"Common.Assign")),e.xp6(5),e.Oqu(e.lcZ(31,21,"UserDetails.Assigned")),e.xp6(2),e.Q6J("ngIf",i.assignedSearch||!i.isReadOnly),e.xp6(2),e.Q6J("ngForOf",e.xi3(35,23,i.assigned,e.lcZ(36,26,i.assignedSearchValue))))},dependencies:[z.mk,z.sg,z.O5,h.Fj,h.JJ,h.On,z.gd,kT,Ut.X$],encapsulation:2}),r})();const F0=["RolePicker"];let Z0=(()=>{class r{constructor(t,i,p,C,K,Ce){this.rolesService=t,this.userService=i,this.titleService=p,this.translate=C,this.toastr=K,this.securityService=Ce,this.availableRoles=[],this.assignedRoles=[],this.restrictedPolicies=[],this.roleSearchValue=""}ngOnInit(){this.combinedObservable=(0,fm.a)([this.rolesService.getRoles(),this.userService.getCachedUser()]).pipe((0,tr.P)()).subscribe(t=>{this.availableRoles=t[0],this.assignedRoles=t[1].roles,this.user=t[1],this.matchRoles();const i=this.translate.instant("Users.Singular")+" "+this.user.username+" "+this.translate.instant("Nav.Roles")+" - "+He.de.SITE_TITLE;this.titleService.setTitle(i)})}ngAfterViewInit(){this.rolePicker.assignedStream.subscribe(t=>{this.addRoles(t)}),this.rolePicker.unAssignedStream.subscribe(t=>{this.deleteRoles(t)})}ngOnDestroy(){this.combinedObservable.unsubscribe()}isPolicyRole(t){const i=this.securityService.policyClaims;for(let p=0;p<i.length;p++)if("role"===i[p].type&&i[p].value===t)return!0;return!1}matchRoles(){for(const t of this.assignedRoles)for(const i of this.availableRoles)i.name===t.name&&this.availableRoles.splice(this.availableRoles.indexOf(i),1)}addRoles(t){const i=t.map(p=>p.name);this.userService.addUserRoles(this.user.subject,i).subscribe(p=>{this.availableRoles=(0,ot.mn)(this.availableRoles.slice(),t);const C=this.assignedRoles.slice();this.assignedRoles=C.concat(t),this.rolePicker.availableCount=0,this.user.roles=this.assignedRoles.slice(),this.userService.userSubject.next(this.user),this.toastr.success(this.translate.instant("Roles.Success"),this.translate.instant("Notifications.Success"))},p=>{401===p.status&&this.toastr.warning(this.translate.instant("Roles.AssignUnauthorized"),this.translate.instant("Notifications.Unauthorized"))})}deleteRoles(t){const i=t.map(p=>p.name);this.userService.deleteUserRoles(this.user.subject,i).subscribe(p=>{this.assignedRoles=(0,ot.mn)(this.assignedRoles.slice(),t);const C=this.availableRoles.slice();this.availableRoles=C.concat(t),this.rolePicker.assignedCount=0,this.user.roles=this.assignedRoles.slice(),this.userService.userSubject.next(this.user),this.toastr.success(this.translate.instant("Roles.Success"),this.translate.instant("Notifications.Success"))},p=>{401===p.status&&this.toastr.warning(this.translate.instant("Roles.UnassignUnauthorized"),this.translate.instant("Notifications.Unauthorized"))})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(ce.f),e.Y36(Cr.K),e.Y36(n.Dx),e.Y36(Ut.sK),e.Y36(si._W),e.Y36(ti.I))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-roles"]],viewQuery:function(t,i){if(1&t&&e.Gf(F0,7),2&t){let p;e.iGM(p=e.CRH())&&(i.rolePicker=p.first)}},decls:3,vars:5,consts:[["id","editUserRoles",1,"tw-container","tw-mx-auto"],[3,"assignedInput","availableInput","restrictedInput","assignedSearch","availableSearch"],["RolePicker",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-common-picker",1,2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("assignedInput",i.assignedRoles)("availableInput",i.availableRoles)("restrictedInput",i.restrictedPolicies)("assignedSearch",!1)("availableSearch",!0))},dependencies:[Bo],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var wp=m(3110);const vm=["editClaimsForm"],V0=["addClaimModal"],H0=["deleteClaimModal"];function J0(r,l){if(1&r&&(e.TgZ(0,"option",38)(1,"span"),e._uU(2),e.qZA()()),2&r){const t=e.oxw(),p=t.$implicit;let C;e.Q6J("value",t.index),e.xp6(2),e.hij(" ",null!==(C=p.displayName)&&void 0!==C?C:p.name," ")}}function q0(r,l){if(1&r&&(e.ynx(0),e.YNc(1,J0,3,2,"option",37),e.BQk()),2&r){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",!t.required&&"role"!=t.name&&"sub"!=t.name)}}function Tp(r,l){if(1&r&&e._UZ(0,"input",45),2&r){const t=e.oxw(2);e.Q6J("appClaimRegex",t.selectedClaim.rule)}}function Q0(r,l){1&r&&e._UZ(0,"input",46)}function W0(r,l){1&r&&(e.TgZ(0,"app-form-toggle",47),e._UZ(1,"input",48),e.qZA()),2&r&&e.Q6J("id","claimsFormInput")("isTraffic",!0)("isAlt",!1)}function j0(r,l){1&r&&(e.ynx(0),e._UZ(1,"app-date-time",51),e.BQk())}function ym(r,l){1&r&&(e.ynx(0),e._UZ(1,"app-date-time",52),e.BQk()),2&r&&(e.xp6(1),e.Q6J("displayType","date"))}function K0(r,l){if(1&r&&(e.TgZ(0,"div",49),e.YNc(1,j0,2,0,"ng-container",50),e.YNc(2,ym,2,1,"ng-container",50),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","birthdate"!=t.selectedClaim.name),e.xp6(1),e.Q6J("ngIf","birthdate"==t.selectedClaim.name)}}function $0(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",53)(1,"app-enum-claim-type-input",54),e.NdJ("valueChanged",function(p){e.CHM(t);const C=e.oxw(2);return e.KtG(C.claimsForm.controls.value.setValue(p))}),e.qZA()()}if(2&r){const t=e.oxw(2);e.Q6J("id","value-for-"+t.selectedClaim.id),e.xp6(1),e.Q6J("id","claimsFormInput")("typeId",t.selectedClaim.id)("hostingModal","addClaimModal")("value",t.claimsForm.value.value)}}function Fo(r,l){if(1&r&&(e.TgZ(0,"p",55),e._uU(1),e.qZA()),2&r){const t=e.oxw(2);let i;e.xp6(1),e.hij(" ",null!==(i=t.selectedClaim.ruleValidationFailureDescription)&&void 0!==i?i:""," ")}}function Ap(r,l){if(1&r&&(e.TgZ(0,"app-form-row",14),e.YNc(1,Tp,1,1,"input",39),e.YNc(2,Q0,1,0,"input",40),e.YNc(3,W0,2,3,"app-form-toggle",41),e.YNc(4,K0,3,2,"div",42),e.YNc(5,$0,2,5,"div",43),e.YNc(6,Fo,2,1,"p",44),e.qZA()),2&r){const t=e.oxw();e.Q6J("id","claimsFormInput")("label","Common.Value")("isLast",!0),e.xp6(1),e.Q6J("ngIf","String"==t.selectedClaim.valueType),e.xp6(1),e.Q6J("ngIf","Int"==t.selectedClaim.valueType),e.xp6(1),e.Q6J("ngIf","Boolean"==t.selectedClaim.valueType),e.xp6(1),e.Q6J("ngIf","DateTime"==t.selectedClaim.valueType),e.xp6(1),e.Q6J("ngIf","Enum"==t.selectedClaim.valueType),e.xp6(1),e.Q6J("ngIf",t.claimsForm.invalid||!t.selectedClaim)}}function Cm(r,l){1&r&&(e.TgZ(0,"div",56)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"UserDetails.NoClaimsMessage")," "))}function Sp(r,l){if(1&r&&(e.TgZ(0,"b"),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.displayName)}}function Eo(r,l){if(1&r&&(e.TgZ(0,"b"),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.type)}}function tu(r,l){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.value," ")}}function bm(r,l){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"standardDate"),e.qZA()),2&r){const t=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.value),"")}}function G0(r,l){if(1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"standardDateTime"),e.qZA()),2&r){const t=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.value),"")}}function z0(r,l){if(1&r&&(e.TgZ(0,"span"),e.YNc(1,bm,3,3,"span",50),e.YNc(2,G0,3,3,"span",50),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf","birthdate"==t.type),e.xp6(1),e.Q6J("ngIf","birthdate"!=t.type)}}function wm(r,l){1&r&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Common.True")))}function Y0(r,l){1&r&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Common.False")))}function Tm(r,l){if(1&r&&(e.TgZ(0,"span"),e.YNc(1,wm,3,3,"div",50),e.YNc(2,Y0,3,3,"div",50),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf","true"==t.value),e.xp6(1),e.Q6J("ngIf","false"==t.value)}}function X0(r,l){1&r&&(e.TgZ(0,"span",66),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Policy")," "))}function Am(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",67),e.NdJ("click",function(){e.CHM(t);const p=e.oxw(2).$implicit,C=e.oxw(2);return e.KtG(C.editClaim(p))}),e._UZ(2,"span",68),e.TgZ(3,"span",12),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"button",69),e.NdJ("click",function(){e.CHM(t);const p=e.oxw(2).$implicit,C=e.oxw(2);return e.KtG(C.delete(p))}),e._UZ(7,"span",11),e.TgZ(8,"span",12),e._uU(9),e.ALo(10,"translate"),e.qZA()()()}2&r&&(e.xp6(4),e.Oqu(e.lcZ(5,2,"Common.Edit")),e.xp6(5),e.Oqu(e.lcZ(10,4,"Common.Delete.Title")))}function ey(r,l){if(1&r&&(e.ynx(0),e.TgZ(1,"td")(2,"div",63),e.YNc(3,tu,2,1,"span",50),e.YNc(4,z0,3,2,"span",50),e.YNc(5,Tm,3,2,"span",50),e.qZA()(),e.TgZ(6,"td"),e.YNc(7,X0,3,3,"span",64),e.qZA(),e.TgZ(8,"td"),e.YNc(9,Am,11,6,"div",65),e.qZA(),e.BQk()),2&r){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(3),e.Q6J("ngIf","DateTime"!=t.format&&"Boolean"!=t.format),e.xp6(1),e.Q6J("ngIf","DateTime"==t.format),e.xp6(1),e.Q6J("ngIf","Boolean"==t.format),e.xp6(2),e.Q6J("ngIf",i.isPolicyClaim(t)),e.xp6(2),e.Q6J("ngIf",!i.notAllowedToEditClaim(t))}}function ty(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"input",77),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2).$implicit;return e.KtG(C.value=p)}),e.qZA()}if(2&r){const t=e.oxw(2).$implicit;e.Q6J("ngModel",t.value)("appClaimRegex",t.regex)}}function Sm(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"input",78),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2).$implicit;return e.KtG(C.value=p)}),e.qZA()}if(2&r){const t=e.oxw(2).$implicit;e.Q6J("ngModel",t.value)}}function xm(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-date-time",80),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(3).$implicit;return e.KtG(C.value=p)}),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngModel",t.value)}}function ny(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-date-time",81),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(3).$implicit;return e.KtG(C.value=p)}),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngModel",t.value)("displayType","date")}}function pc(r,l){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,xm,2,1,"ng-container",50),e.YNc(2,ny,2,2,"ng-container",50),e.TgZ(3,"span",79),e._uU(4),e.ALo(5,"translate"),e.qZA()()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf","birthdate"!=t.type),e.xp6(1),e.Q6J("ngIf","birthdate"==t.type),e.xp6(2),e.hij(" ",e.lcZ(5,3,"Common.Dates.UTCWarning")," ")}}function ul(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-form-toggle",47)(1,"input",82),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2).$implicit;return e.KtG(C.value=p?"true":"false")}),e.qZA()()}if(2&r){const t=e.oxw(2).$implicit;e.Q6J("id","claim-"+t.type)("isTraffic",!0)("isAlt",!1),e.xp6(1),e.Q6J("id","claim-"+t.type)("ngModel","true"==t.value)}}function iy(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"span")(1,"app-enum-claim-type-input",83),e.NdJ("valueChanged",function(p){e.CHM(t);const C=e.oxw(2).$implicit;return e.KtG(C.value=p)}),e.qZA()()}if(2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("id","claimsFormInput")("typeId",t.typeId)("value",t.value)}}function ry(r,l){if(1&r&&(e.TgZ(0,"span",55),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit;let i;e.xp6(1),e.hij(" ",null!==(i=null==t?null:t.failureMessage)&&void 0!==i?i:""," ")}}function RT(r,l){1&r&&(e.TgZ(0,"span",66),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Policy")," "))}function PT(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"td")(2,"form",null,70),e.YNc(4,ty,1,2,"input",71),e.YNc(5,Sm,1,1,"input",72),e.YNc(6,pc,6,5,"div",50),e.YNc(7,ul,2,5,"app-form-toggle",41),e.YNc(8,iy,2,3,"span",50),e.YNc(9,ry,2,1,"span",44),e.qZA()(),e.TgZ(10,"td"),e.YNc(11,RT,3,3,"span",64),e.qZA(),e.TgZ(12,"td")(13,"div",73)(14,"button",74),e.NdJ("click",function(){e.CHM(t);const p=e.oxw().$implicit,C=e.oxw(2);return e.KtG(C.updateClaim(p))}),e._UZ(15,"span",75),e.TgZ(16,"span",12),e._uU(17),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"button",76),e.NdJ("click",function(){e.CHM(t);const p=e.oxw().$implicit,C=e.oxw(2);return e.KtG(C.cancelEdit(p))}),e._UZ(20,"span",11),e.TgZ(21,"span",12),e._uU(22),e.ALo(23,"translate"),e.qZA()()()(),e.BQk()}if(2&r){const t=e.MAs(3),i=e.oxw(),p=i.$implicit,C=i.index,K=e.oxw(2);let Ce,Ue;e.xp6(4),e.Q6J("ngIf","String"==p.format),e.xp6(1),e.Q6J("ngIf","Int"==p.format),e.xp6(1),e.Q6J("ngIf","DateTime"==p.format),e.xp6(1),e.Q6J("ngIf","Boolean"==p.format),e.xp6(1),e.Q6J("ngIf","Enum"==p.format),e.xp6(1),e.Q6J("ngIf",null!==(Ce=null==(Ce=t.form.get("claimValue"))?null:Ce.invalid)&&void 0!==Ce&&Ce),e.xp6(2),e.Q6J("ngIf",K.isPolicyClaim(p)),e.xp6(3),e.Q6J("disabled",K.notAllowedToEditClaim(p)||K.checkDisabled("Claim"+C)||null!==(Ue=null==(Ue=t.form.get("claimValue"))?null:Ue.invalid)&&void 0!==Ue&&Ue),e.xp6(3),e.Oqu(e.lcZ(18,10,"Common.Save")),e.xp6(5),e.Oqu(e.lcZ(23,12,"Common.Cancel"))}}const Em=function(r){return{"disabled inactive":r}};function LT(r,l){if(1&r&&(e.TgZ(0,"tr",62)(1,"td"),e.YNc(2,Sp,2,1,"b",50),e.YNc(3,Eo,2,1,"b",50),e.qZA(),e.YNc(4,ey,10,5,"ng-container",50),e.YNc(5,PT,24,14,"ng-container",50),e.qZA()),2&r){const t=l.$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(5,Em,i.notAllowedToEditClaim(t))),e.xp6(2),e.Q6J("ngIf",t.displayName),e.xp6(1),e.Q6J("ngIf",!t.displayName),e.xp6(1),e.Q6J("ngIf",!t.editing),e.xp6(1),e.Q6J("ngIf",t.editing)}}function Ka(r,l){if(1&r&&(e.TgZ(0,"table",57)(1,"thead")(2,"tr")(3,"th",58),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",59)(10,"span",12),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"th",59)(14,"span",12),e._uU(15),e.ALo(16,"translate"),e.qZA()()()(),e.TgZ(17,"tbody",60),e.YNc(18,LT,6,7,"tr",61),e.qZA()()),2&r){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,5,"Common.Name")," "),e.xp6(3),e.hij(" ",e.lcZ(8,7,"Common.Value")," "),e.xp6(4),e.hij("",e.lcZ(12,9,"Common.Policy")," "),e.xp6(4),e.Oqu(e.lcZ(16,11,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",t.optionalClaims)}}function xp(r,l){if(1&r&&e._UZ(0,"app-pager",84),2&r){const t=e.oxw();e.Q6J("totalResults",null==t.optionalClaims?null:t.optionalClaims.length)}}const Wu=function(){return{animated:!1,backdrop:"static"}};let sy=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt,Et,Wt){this.fb=t,this.userService=i,this.claimTypesService=p,this.translate=C,this.errorService=K,this.titleService=Ce,this.toastr=Ue,this.dialogService=lt,this.apClaimsService=Et,this.cdref=Wt,this.editing=!1,this.optionalClaims=[],this.requiredClaims=[],this.parser=new DOMParser}ngOnInit(){this.combinedObservable=this.claimTypesService.getClaimTypes(null,null,!0).pipe((0,Qu.V)(this.userService.getCachedUser()),(0,u.U)(([t,i])=>({claimTypes:t,user:i})),(0,tr.P)()).subscribe(t=>{this.claimTypes=t.claimTypes,this.user=t.user,this.claims=t.user.claims,this.sortClaims();const i=this.translate.instant("Users.Singular")+" "+this.user.username+" "+this.translate.instant("Nav.Additional Details")+" - "+He.de.SITE_TITLE;this.titleService.setTitle(i)}),this.claimsForm=this.fb.group({type:[""],value:[""]},h.kI.required)}deleteClaim(t){this.userService.deleteUserClaim(this.user.subject,t).subscribe(i=>{this.closeDeleteModal();const p=this.optionalClaims.indexOf(t);this.optionalClaims.splice(p,1);const C=this.translate.instant("Notifications.Saving Success Title"),K=this.translate.instant("Notifications.Saving Success Message");this.toastr.success(C,K),this.user.claims=this.optionalClaims.concat(this.requiredClaims),this.userService.userSubject.next(this.user)},i=>{401===i.status?this.toastr.warning(this.translate.instant("UserDetails.UnauthorizedWarningDelete"),this.translate.instant("Notifications.Unauthorized")):this.errorService.handleError(i)})}delete(t){this.toDelete=t,this.deleteClaimModal.show()}closeDeleteModal(){this.toDelete=null,this.deleteClaimModal.hide()}closeAddModal(){this.addClaimModal.hide()}canDeactivate(){return!this.editing||!this.editClaimsForm.dirty||(this.dialogService.confirm(),this.dialogService.eventStream)}cancelEdit(t){t.value=t.oldValue,t.editing=!1,this.editing=!1}changeFormat(t){var i=this.claimTypes[t];this.claimsForm.controls.value.setValue(null),"Boolean"===i?.valueType&&this.claimsForm.controls.value.setValue(!1),this.selectedClaim=i,this.cdref.detectChanges()}editClaim(t){t.oldValue=t.value,t.editing=!0,this.editing=!0}addClaim(){"sub"!==this.selectedClaim.name&&(("Int"===this.selectedClaim.valueType||"Boolean"===this.selectedClaim.valueType)&&(this.claimsForm.value.value=this.claimsForm.value.value.toString()),this.currentClaim=this.claimsForm.value,this.currentClaim.type=this.selectedClaim.name,this.currentClaim.typeId=this.selectedClaim.id,this.currentClaim.format=this.selectedClaim.valueType,this.currentClaim.displayName=this.selectedClaim.displayName,this.currentClaim.regex=this.selectedClaim.rule,this.currentClaim.failureMessage=this.selectedClaim.ruleValidationFailureDescription,this.submitClaim(this.currentClaim),this.closeAddModal())}checkDisabled(t){return!(!this.editClaimsForm||!this.editClaimsForm.controls[t])&&this.editClaimsForm.controls[t].invalid}updateClaim(t){"DateTime"===t.format&&(t.value=t.value),"Int"===t.format&&(t.value=t.value.toString()),this.userService.updateUserClaim(this.user.subject,{oldClaimType:t.type,oldClaimValue:t.oldValue,newClaimType:t.type,newClaimValue:t.value}).subscribe(p=>{t.editing=!1;const C=this.translate.instant("Notifications.Saving Success Title"),K=this.translate.instant("Notifications.Saving Success Message");this.toastr.success(C,K),this.user.claims=this.optionalClaims.concat(this.requiredClaims),this.userService.userSubject.next(this.user),this.editing=!1},p=>{if(401===p.status)this.toastr.warning(this.translate.instant("UserDetails.UnauthorizedWarningEdit"),this.translate.instant("Notifications.Unauthorized"));else{const C={toastBody:this.translate.instant("Notifications.Saving Error Title"),toastTitle:this.translate.instant("Notifications.Saving Error Message")};(this.errorService.handleError(p,C)&oo.s.Toast)!==oo.s.Toast&&this.toastr.error(C.toastBody,C.toastTitle)}})}submitClaim(t){this.userService.addUserClaim(this.user.subject,t).subscribe(i=>{this.currentClaim.editing=!1,this.selectedClaim=void 0,this.optionalClaims.push(this.currentClaim),this.claimsForm.setValue({type:"",value:""});const p=this.translate.instant("Notifications.Saving Success Title"),C=this.translate.instant("Notifications.Saving Success Message");this.toastr.success(p,C),this.user.claims=this.optionalClaims.concat(this.requiredClaims),this.userService.userSubject.next(this.user)},i=>{if(401===i.status)this.toastr.warning(this.translate.instant("UserDetails.UnauthorizedWarning"),this.translate.instant("Notifications.Unauthorized"));else{const p={toastBody:this.translate.instant("Notifications.Saving Error Title"),toastTitle:this.translate.instant("Notifications.Saving Error Message")};(this.errorService.handleError(i,p)&oo.s.Toast)!==oo.s.Toast&&this.toastr.error(p.toastBody,p.toastTitle)}})}sortClaims(){for(const t of this.claims)for(const i of this.claimTypes)if(i.name===t.type){const p={format:i.valueType,type:t.type,typeId:i.id,displayName:i.displayName,value:t.value,editing:!1,required:i.required};i.rule&&(p.regex=i.rule,p.failureMessage=i.ruleValidationFailureDescription),i.required?this.requiredClaims.push(p):this.optionalClaims.push(p)}}notAllowedToEditClaim(t){return this.apClaimsService.notAllowedToEditClaim(t)}isPolicyClaim(t){return this.apClaimsService.isPolicyClaim(t)}getAllowedValues(t){const i=this.claimTypes.find(p=>p.name===t.type);return i&&i.allowedValues||[]}isClaimInValid(){var t=this.claimsForm.get("value");return!!t&&t.invalid}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(Cr.K),e.Y36(so.M),e.Y36(Ut.sK),e.Y36(Ee.T),e.Y36(n.Dx),e.Y36(si._W),e.Y36(ja.x),e.Y36(up.n),e.Y36(e.sBO))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-additional-details"]],viewQuery:function(t,i){if(1&t&&(e.Gf(vm,5),e.Gf(V0,7),e.Gf(H0,7)),2&t){let p;e.iGM(p=e.CRH())&&(i.editClaimsForm=p.first),e.iGM(p=e.CRH())&&(i.addClaimModal=p.first),e.iGM(p=e.CRH())&&(i.deleteClaimModal=p.first)}},decls:76,vars:51,consts:[["id","editUserClaims",1,"tw-container","tw-mx-auto"],[1,"cms"],["right",""],[1,"tw-btn-success",3,"click"],["bsModal","","id","addClaimModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["addClaimModal","bs-modal"],[1,"modal-dialog"],[1,"modal-content",3,"formGroup"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","scrollbars"],[3,"id","label","isLast"],[1,"tw-form-select"],["formControlName","type","id","claimsFormDropdown",1,"tw-form-control",3,"change"],["disabled","","selected",""],[4,"ngFor","ngForOf"],[3,"id","label","isLast",4,"ngIf"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["type","submit",1,"tw-btn-success",3,"disabled","click"],[1,"tw-btn-link","tw--mr-4",3,"click"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable hover",4,"ngIf"],["hidePager","true",3,"totalResults",4,"ngIf"],["bsModal","","id","deleteClaimModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["deleteClaimModal","bs-modal"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-body","tw-text-center","scrollbars"],[1,"tw-mb-4"],[1,"tw-pill-danger",3,"innerHTML"],[1,"tw-btn-danger",3,"click"],[3,"value",4,"ngIf"],[3,"value"],["class","tw-form-control","formControlName","value","type","text","name","string","id","claimsFormInput","required","",3,"appClaimRegex",4,"ngIf"],["class","tw-form-control","formControlName","value","type","number","name","number","id","claimsFormInput","required","",4,"ngIf"],[3,"id","isTraffic","isAlt",4,"ngIf"],["class","tw-w-full sm:tw-max-w-2xl",4,"ngIf"],["class","",3,"id",4,"ngIf"],["class","tw-form-text-danger",4,"ngIf"],["formControlName","value","type","text","name","string","id","claimsFormInput","required","",1,"tw-form-control",3,"appClaimRegex"],["formControlName","value","type","number","name","number","id","claimsFormInput","required","",1,"tw-form-control"],[3,"id","isTraffic","isAlt"],["id","claimsFormInput","formControlName","value","type","checkbox","binary","true",1,"tw-form-switch__input"],[1,"tw-w-full","sm:tw-max-w-2xl"],[4,"ngIf"],["id","claimsFormInput","formControlName","value","required","true"],["id","claimsFormInput","formControlName","value","required","true",3,"displayType"],[1,"",3,"id"],[3,"id","typeId","hostingModal","value","valueChanged"],[1,"tw-form-text-danger"],["role","alert",1,"tw-alert"],[1,"datatable","hover"],[1,"tw-w-1/4"],[1,"tw-w-1"],["id","claimsTable"],["class","claim",3,"ngClass",4,"ngFor","ngForOf"],[1,"claim",3,"ngClass"],[1,"tw-truncate"],["class","tw-pill",4,"ngIf"],["class","tw-flex tw-items-center",4,"ngIf"],[1,"tw-pill"],["value","Edit",1,"tw-btn-link","tw-btn-small","tw-mr-1",3,"click"],["aria-hidden","true",1,"fad","fa-pencil"],["value","Delete",1,"tw-btn-link","tw-btn-small","tw-text-red-500",3,"click"],["editClaimsForm","ngForm"],["class","tw-form-control","type","text","name","claimValue","required","",3,"ngModel","appClaimRegex","ngModelChange",4,"ngIf"],["class","tw-form-control","type","number","name","claimValue","required","",3,"ngModel","ngModelChange",4,"ngIf"],[1,"tw-flex","tw-h-full"],["value","Save",1,"tw-btn-success","tw-mr-2",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-check"],["value","CancelEdit",1,"tw-btn",3,"click"],["type","text","name","claimValue","required","",1,"tw-form-control",3,"ngModel","appClaimRegex","ngModelChange"],["type","number","name","claimValue","required","",1,"tw-form-control",3,"ngModel","ngModelChange"],[1,"tw-form-text"],["id","claimsFormInput","name","claimValue","required","true",3,"ngModel","ngModelChange"],["id","claimsFormInput","name","claimValue","required","true",3,"ngModel","displayType","ngModelChange"],["type","checkbox","name","claimValue",1,"tw-form-switch__input",3,"id","ngModel","ngModelChange"],["name","claimValue",3,"id","typeId","value","valueChanged"],["hidePager","true",3,"totalResults"]],template:function(t,i){if(1&t){const p=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"p"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"app-action-bar"),e.ynx(6,2),e.TgZ(7,"button",3),e.NdJ("click",function(){e.CHM(p);const K=e.MAs(11);return e.KtG(K.show())}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(10,"div",4,5)(12,"div",6)(13,"form",7)(14,"div",8)(15,"h5",9),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"button",10),e.NdJ("click",function(){return i.closeAddModal()}),e._UZ(19,"span",11),e.TgZ(20,"span",12),e._uU(21),e.ALo(22,"translate"),e.qZA()()(),e.TgZ(23,"div",13)(24,"app-form-row",14)(25,"div",15)(26,"select",16),e.NdJ("change",function(K){return i.changeFormat(K.target.value)}),e._UZ(27,"option",17),e.YNc(28,q0,2,1,"ng-container",18),e.qZA()()(),e.YNc(29,Ap,7,9,"app-form-row",19),e.qZA(),e._UZ(30,"div",20),e.TgZ(31,"div",21)(32,"div",22)(33,"div",23)(34,"button",24),e.NdJ("click",function(){return i.addClaim()}),e._uU(35),e.ALo(36,"translate"),e.qZA()(),e.TgZ(37,"button",25),e.NdJ("click",function(){return i.closeAddModal()}),e._uU(38),e.ALo(39,"translate"),e.qZA()()()()()(),e.YNc(40,Cm,4,3,"div",26),e.YNc(41,Ka,19,13,"table",27),e.YNc(42,xp,1,1,"app-pager",28),e.qZA(),e.TgZ(43,"div",29,30)(45,"div",31)(46,"div",32)(47,"div",8)(48,"h5",9),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"button",10),e.NdJ("click",function(){return i.closeDeleteModal()}),e._UZ(52,"span",11),e.TgZ(53,"span",12),e._uU(54),e.ALo(55,"translate"),e.qZA()()(),e.TgZ(56,"div",33)(57,"p",34),e._uU(58),e.ALo(59,"translate"),e.TgZ(60,"strong"),e._uU(61),e.qZA(),e._uU(62,"?"),e.qZA(),e._UZ(63,"p",35),e.ALo(64,"translate"),e.qZA(),e._UZ(65,"div",20),e.TgZ(66,"div",21)(67,"div",22)(68,"div",23)(69,"button",36),e.NdJ("click",function(){return i.deleteClaim(i.toDelete)}),e._uU(70),e.ALo(71,"translate"),e.qZA()(),e.TgZ(72,"button",25),e.NdJ("click",function(){return i.closeDeleteModal()}),e._uU(73),e.ALo(74,"translate"),e.qZA()()()()()(),e._UZ(75,"app-can-deactivate")}2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,25,"Users.Details.AdditionalDetailsBody")),e.xp6(5),e.hij(" ",e.lcZ(9,27,"Users.Details.AddClaim")," "),e.xp6(2),e.Q6J("config",e.DdM(49,Wu)),e.xp6(3),e.Q6J("formGroup",i.claimsForm),e.xp6(3),e.Oqu(e.lcZ(17,29,"Users.Details.AddClaim")),e.xp6(5),e.Oqu(e.lcZ(22,31,"Common.Close")),e.xp6(3),e.Q6J("id","claimsFormDropdown")("label","Common.Type")("isLast",!i.selectedClaim),e.xp6(4),e.Q6J("ngForOf",i.claimTypes),e.xp6(1),e.Q6J("ngIf",i.selectedClaim),e.xp6(5),e.Q6J("disabled",!i.claimsForm.valid||!i.selectedClaim),e.xp6(1),e.Oqu(e.lcZ(36,33,"Common.Add")),e.xp6(3),e.Oqu(e.lcZ(39,35,"Common.Cancel")),e.xp6(2),e.Q6J("ngIf",i.optionalClaims&&i.optionalClaims.length<=0),e.xp6(1),e.Q6J("ngIf",(null==i.optionalClaims?null:i.optionalClaims.length)>0),e.xp6(1),e.Q6J("ngIf",(null==i.optionalClaims?null:i.optionalClaims.length)>0),e.xp6(1),e.Q6J("config",e.DdM(50,Wu)),e.xp6(6),e.Oqu(e.lcZ(50,37,"Common.Delete.Confirm")),e.xp6(5),e.Oqu(e.lcZ(55,39,"Common.Close")),e.xp6(4),e.hij("",e.lcZ(59,41,"Common.Delete.AreYouSure")," "),e.xp6(3),e.Oqu(null==i.toDelete?null:i.toDelete.type),e.xp6(2),e.Q6J("innerHTML",e.lcZ(64,43,"Common.Delete.Warning"),e.oJD),e.xp6(7),e.Oqu(e.lcZ(71,45,"Common.Delete.Title")),e.xp6(3),e.Oqu(e.lcZ(74,47,"Common.Delete.No")))},dependencies:[z.mk,z.sg,z.O5,h._Y,h.YN,h.Kr,h.Fj,h.wV,h.Wl,h.EJ,h.JJ,h.JL,h.Q7,h.On,h.F,h.sg,h.u,le.oB,Ia.J,wt.P,kt.K,Dn.L,ds.O,Hf,oc,Fl.j,wp.C9,wp.g9,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();function Dm(r,l){1&r&&e._UZ(0,"app-simple-loader")}function oy(r,l){1&r&&(e.TgZ(0,"div",27)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Users.Applications.None")))}function nu(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr",33)(1,"td",34),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.modalInfo(C))}),e.TgZ(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"td",35),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.modalInfo(C))}),e._uU(5),e.qZA(),e.TgZ(6,"td")(7,"button",36),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.modalInfo(C))}),e._UZ(8,"span",37),e.TgZ(9,"span",15),e._uU(10),e.ALo(11,"translate"),e.qZA()()()()}if(2&r){const t=l.$implicit;e.xp6(3),e.Oqu(t.clientName),e.xp6(2),e.hij(" ",t.clientDescription," "),e.xp6(5),e.Oqu(e.lcZ(11,3,"Common.Info"))}}function ay(r,l){if(1&r&&(e.TgZ(0,"table",28)(1,"thead")(2,"tr")(3,"th"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",29),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",30)(10,"span",15),e._uU(11),e.ALo(12,"translate"),e.qZA()()()(),e.TgZ(13,"tbody",31),e.YNc(14,nu,12,5,"tr",32),e.qZA()()),2&r){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,4,"UserDetails.Name")),e.xp6(3),e.Oqu(e.lcZ(8,6,"Common.Description")),e.xp6(4),e.Oqu(e.lcZ(12,8,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",t.userApps)}}function ly(r,l){if(1&r&&e._UZ(0,"app-pager",38),2&r){const t=e.oxw();e.Q6J("totalResults",null==t.userApps?null:t.userApps.length)}}function Ep(r,l){if(1&r&&e._UZ(0,"input",51),2&r){const t=e.oxw(2);e.Q6J("value",t.selectedApp.expires)}}function Dp(r,l){1&r&&(e._UZ(0,"input",51),e.ALo(1,"translate")),2&r&&e.Q6J("value",e.lcZ(1,1,"Common.Never"))}function Im(r,l){1&r&&(e.TgZ(0,"div",52)(1,"div",53),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Users.Applications.DataEncrypted")))}function UT(r,l){if(1&r&&(e.TgZ(0,"li",57)(1,"span",58),e._uU(2),e.qZA()()),2&r){const t=l.$implicit;e.xp6(2),e.Oqu(t)}}function hc(r,l){if(1&r&&(e.TgZ(0,"dl")(1,"dt",54),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"dd")(5,"ul",55),e.YNc(6,UT,3,1,"li",56),e.qZA()()()),2&r){const t=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"Users.Applications.Accessible")),e.xp6(4),e.Q6J("ngForOf",t.selectedApp.scopes)}}const Ip=function(){return{backdrop:"static",animated:!1,keyboard:!0}};function Mm(r,l){if(1&r&&(e.TgZ(0,"div",39)(1,"div",40)(2,"div",10)(3,"div",11)(4,"h5",12),e._uU(5),e.qZA(),e.TgZ(6,"button",13),e._UZ(7,"span",14),e.TgZ(8,"span",15),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",41)(12,"app-form-row",42),e._UZ(13,"input",43),e.qZA(),e.TgZ(14,"app-form-row",42),e._UZ(15,"input",44),e.qZA(),e.TgZ(16,"app-form-row",42)(17,"textarea",45),e._uU(18),e.qZA()(),e.TgZ(19,"app-form-row",42),e._UZ(20,"input",46),e.qZA(),e.TgZ(21,"app-form-row",42),e._UZ(22,"input",47),e.qZA(),e.TgZ(23,"app-form-row",42),e.YNc(24,Ep,1,1,"input",48),e.YNc(25,Dp,2,3,"input",48),e.qZA(),e.YNc(26,Im,4,3,"div",49),e.YNc(27,hc,7,4,"dl",2),e.qZA(),e.TgZ(28,"div",20)(29,"div",21)(30,"div",22)(31,"button",50),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"button",24),e._uU(35),e.ALo(36,"translate"),e.qZA()()()()()()),2&r){const t=e.oxw();e.Q6J("config",e.DdM(32,Ip)),e.xp6(5),e.Oqu(t.selectedApp.clientName),e.xp6(4),e.Oqu(e.lcZ(10,26,"Common.Close")),e.xp6(3),e.Q6J("id","selectedAppName")("label","Common.Name"),e.xp6(1),e.Q6J("value",t.selectedApp.clientName),e.xp6(1),e.Q6J("id","selectedAppName")("label","Common.LogoURL"),e.xp6(1),e.Q6J("value",t.selectedApp.clientLogoUrl),e.xp6(1),e.Q6J("id","selectedAppDescription")("label","Common.Description"),e.xp6(2),e.Oqu(t.selectedApp.clientDescription),e.xp6(1),e.Q6J("id","selectedAppURL")("label","Common.URL"),e.xp6(1),e.Q6J("value",t.selectedApp.clientUrl),e.xp6(1),e.Q6J("id","selectedAppCreated")("label","Common.Created"),e.xp6(1),e.Q6J("value",t.selectedApp.created),e.xp6(1),e.Q6J("id","selectedAppExpires")("label","Common.Expires"),e.xp6(1),e.Q6J("ngIf",t.selectedApp.expires),e.xp6(1),e.Q6J("ngIf",!t.selectedApp.expires),e.xp6(1),e.Q6J("ngIf",t.selectedApp.scopes.length<1),e.xp6(1),e.Q6J("ngIf",(null==t.selectedApp?null:t.selectedApp.scopes.length)>0),e.xp6(5),e.Oqu(e.lcZ(33,28,"Users.Applications.Revoke")),e.xp6(3),e.Oqu(e.lcZ(36,30,"Common.Cancel"))}}const Nm=function(){return{backdrop:"static",animated:!1}};function Mp(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",59)(1,"div",9)(2,"div",10)(3,"div",11)(4,"h5",12),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",13),e._UZ(8,"span",14),e.TgZ(9,"span",15),e._uU(10),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",16)(13,"p",17),e._uU(14),e.ALo(15,"translate"),e.TgZ(16,"strong"),e._uU(17),e.qZA(),e._uU(18),e.ALo(19,"translate"),e.TgZ(20,"strong"),e._uU(21),e.qZA(),e._uU(22,"."),e.qZA(),e.TgZ(23,"p"),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",20)(27,"div",21)(28,"div",22)(29,"button",23),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.revokeSingle(p.selectedApp.clientId))}),e._uU(30),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"button",60),e._uU(33),e.ALo(34,"translate"),e.qZA()()()()()()}if(2&r){const t=e.oxw();e.Q6J("config",e.DdM(24,Nm)),e.xp6(5),e.hij(" ",e.lcZ(6,10,"Users.Applications.RevokeApp")," "),e.xp6(5),e.Oqu(e.lcZ(11,12,"Common.Close")),e.xp6(4),e.hij("",e.lcZ(15,14,"Users.Applications.RevokeUserConfirm")," "),e.xp6(3),e.Oqu(t.selectedApp.clientName),e.xp6(1),e.hij(" ",e.lcZ(19,16,"Users.Applications.ForUser")," "),e.xp6(3),e.Oqu(t.user.username),e.xp6(3),e.Oqu(e.lcZ(25,18,"Common.AreYouSureContinue")),e.xp6(6),e.hij(" ",e.lcZ(31,20,"Users.Applications.RevokeYes")," "),e.xp6(3),e.Oqu(e.lcZ(34,22,"Common.Cancel"))}}let cy=(()=>{class r{constructor(t,i,p,C){this.titleService=t,this.userService=i,this.translate=p,this.toastr=C,this.isLoading=!0,this.isUnavailable=!1}ngOnInit(){this.userService.getCachedUser().pipe((0,Oe.q)(1)).subscribe(t=>{this.user=t,this.userService.getUserApps(this.user.subject).subscribe(i=>{this.userApps=i,this.isLoading=!1,this.isUnavailable=!1;const p=this.translate.instant("Users.Singular")+" "+this.user.username+" "+this.translate.instant("Nav.Applications")+" - "+He.de.SITE_TITLE;this.titleService.setTitle(p)},i=>{this.isLoading=!1})})}modalInfo(t){this.selectedApp=t}revokeAll(){this.userService.revokeAllUserApps(this.user.subject).subscribe(t=>{this.toastr.success(this.translate.instant("Notifications.AllAppsRevoked"),this.translate.instant("Notifications.Success")),this.userApps=[]},t=>{this.toastr.error(t,this.translate.instant("Notifications.Failure"))})}revokeSingle(t){this.userService.revokeSingleUserApp(this.user.subject,t).subscribe(i=>{this.toastr.success(this.translate.instant("Notifications.AppRevoked"),this.translate.instant("Notifications.Success"));const p=this.userApps.findIndex(C=>C.clientId===t);this.userApps.splice(p,1)},i=>{this.toastr.error(i,this.translate.instant("Notifications.Failure"))})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.Dx),e.Y36(Cr.K),e.Y36(Ut.sK),e.Y36(si._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-applications"]],decls:45,vars:32,consts:[["id","editUserApplications",1,"tw-container","tw-mx-auto"],[1,"cms"],[4,"ngIf"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable selectable hover",4,"ngIf"],["hidePager","true",3,"totalResults",4,"ngIf"],["right",""],["data-toggle","modal","data-target","#revokeAllModal",1,"tw-btn-danger","tw-mb-3"],["id","revokeAllModal","bsModal","","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-center","scrollbars"],[1,"tw-mb-4"],[1,"tw-pill-danger"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["data-dismiss","modal",1,"tw-btn-danger",3,"click"],["data-dismiss","modal",1,"tw-btn-link","tw--mr-4"],["bsModal","","id","appInfoModal","class","modal","role","dialog","aria-hidden","true","tabindex","-1",3,"config",4,"ngIf"],["bsModal","","id","revokeAppModal","class","modal","role","dialog","aria-hidden","true","tabindex","-1",3,"config",4,"ngIf"],["role","alert",1,"tw-alert"],[1,"datatable","selectable","hover"],[1,"tw-hidden","md:tw-table-cell"],[1,"tw-w-1"],["id","userAppList"],["class","group",4,"ngFor","ngForOf"],[1,"group"],["data-toggle","modal","data-target","#appInfoModal",1,"tw-max-w-0","tw-truncate",3,"click"],["data-toggle","modal","data-target","#appInfoModal",1,"tw-hidden","tw-max-w-0","tw-truncate","md:tw-table-cell",3,"click"],["data-toggle","modal","data-target","#appInfoModal",1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500",3,"click"],["aria-hidden","true",1,"fad","fa-pencil"],["hidePager","true",3,"totalResults"],["bsModal","","id","appInfoModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog"],[1,"modal-body","scrollbars"],[3,"id","label"],["id","selectedAppName","readonly","",1,"tw-form-control",3,"value"],["id","selectedAppLogoUrl","readonly","",1,"tw-form-control",3,"value"],["id","selectedAppDescription","readonly","",1,"tw-form-control"],["id","selectedAppURL","readonly","",1,"tw-form-control",3,"value"],["id","selectedAppCreated","readonly","",1,"tw-form-control",3,"value"],["id","selectedAppExpires","class","tw-form-control","readonly","",3,"value",4,"ngIf"],["class","tw-alert-warning","role","alert",4,"ngIf"],["data-dismiss","modal","data-toggle","modal","data-target","#revokeAppModal",1,"tw-btn-danger"],["id","selectedAppExpires","readonly","",1,"tw-form-control",3,"value"],["role","alert",1,"tw-alert-warning"],["id","DataEncryptedWarning"],[1,"tw-font-semibold","tw-text-sm","tw-mb-2"],[1,"tw-flex","tw-flex-wrap","tw-item-start","tw--mt-2","tw--ml-2"],["class","tw-pt-2 tw-pl-2",4,"ngFor","ngForOf"],[1,"tw-pt-2","tw-pl-2"],[1,"tw-pill"],["bsModal","","id","revokeAppModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["data-dismiss","modal","data-toggle","modal","data-target","#appInfoModal",1,"tw-btn-link","tw--mr-4"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,Dm,1,0,"app-simple-loader",2),e.YNc(6,oy,4,3,"div",3),e.YNc(7,ay,15,10,"table",4),e.YNc(8,ly,1,1,"app-pager",5),e.qZA(),e.TgZ(9,"app-button-bar"),e.ynx(10,6),e.TgZ(11,"button",7),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(14,"div",8)(15,"div",9)(16,"div",10)(17,"div",11)(18,"h5",12),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"button",13),e._UZ(22,"span",14),e.TgZ(23,"span",15),e._uU(24),e.ALo(25,"translate"),e.qZA()()(),e.TgZ(26,"div",16)(27,"p",17),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"p",18),e._uU(31),e.ALo(32,"translate"),e.qZA()(),e._UZ(33,"div",19),e.TgZ(34,"div",20)(35,"div",21)(36,"div",22)(37,"button",23),e.NdJ("click",function(){return i.revokeAll()}),e._uU(38),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"button",24),e._uU(41),e.ALo(42,"translate"),e.qZA()()()()()(),e.YNc(43,Mm,37,33,"div",25),e.YNc(44,Mp,35,25,"div",26)),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,15,"Users.Applications.Access")),e.xp6(2),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",0==(null==i.userApps?null:i.userApps.length)&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.userApps?null:i.userApps.length)>0),e.xp6(1),e.Q6J("ngIf",(null==i.userApps?null:i.userApps.length)>0&&!i.isLoading),e.xp6(4),e.hij(" ",e.lcZ(13,17,"Users.Applications.RevokeAll")," "),e.xp6(2),e.Q6J("config",e.DdM(31,Nm)),e.xp6(5),e.Oqu(e.lcZ(20,19,"Users.Applications.RevokeAll")),e.xp6(5),e.Oqu(e.lcZ(25,21,"Common.Close")),e.xp6(4),e.Oqu(e.lcZ(29,23,"Users.Applications.RevokeConfirm")),e.xp6(3),e.Oqu(e.lcZ(32,25,"Common.Delete.Warning")),e.xp6(7),e.Oqu(e.lcZ(39,27,"Users.Applications.RevokeAll")),e.xp6(3),e.Oqu(e.lcZ(42,29,"Users.Applications.DontRevokeAll")),e.xp6(2),e.Q6J("ngIf",i.selectedApp),e.xp6(1),e.Q6J("ngIf",i.selectedApp))},dependencies:[z.sg,z.O5,le.oB,wt.P,En.w,pa.N,Dn.L,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();class uy{constructor(l){this.id=l.id,this.clientId=l.clientId,this.clientName=l.clientName,this.description=l.description,this.enabled=l.enabled,this.selected=!1,this.nonEditable=l.nonEditable}}var Hl=m(5712),fc=m(9012),dy=m(9002),hi=m(826),Np=m(7892),fa=m(9326),Li=m(1330),fr=m(9848);class ju{constructor(l){this.clientType=l}}let Jl=(()=>{class r{}return r.Default="clientId",r.Saml="entityId",r.WsFed="realm",r})();class bl{constructor(l){this.clientType=l}}let ea=(()=>{class r{constructor(t){this.fb=t}hosted(){}ngOnInit(){this.callbackUrlForm=this.fb.group({callbackUrl:["",h.kI.required]})}getStepSummary(){const t=new Map;return t.set("callbackUrl",[this.callbackUrlForm.get("callbackUrl").value]),(this.data.clientType===fr.B.BrowserBased||this.data.clientType===fr.B.LegacyClientSide)&&(this.corsUrl=""===this.callbackUrlForm.get("callbackUrl").value?"":(0,ot.RW)(this.callbackUrlForm.get("callbackUrl").value),t.set("corsurl",[this.corsUrl])),t}getStepDTO(){const t=this.getStepSummary(),i={};return t.forEach((p,C)=>{"corsurl"===C&&(C="allowedCorsOrigins"),"callbackUrl"===C&&(C="redirectUris"),i[C]=p}),i}canNext(){return this.callbackUrlForm.valid}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-callback-url"]],inputs:{data:"data"},decls:6,vars:8,consts:[[1,"cms","tw-mb-6"],[3,"innerHTML"],[3,"formGroup"],[3,"id","label","help","isLast"],["type","url","name","CallbackUrl","id","CallbackUrl","formControlName","callbackUrl",1,"tw-form-control"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"p",1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"form",2)(4,"app-form-row",3),e._UZ(5,"input",4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,6,"Clients.CallbackURL"),e.oJD),e.xp6(2),e.Q6J("formGroup",i.callbackUrlForm),e.xp6(1),e.Q6J("id","CallbackUrl")("label","Common.CallbackURL")("help","Clients.RedirectURLDescription")("isLast",!0))},dependencies:[h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Dn.L,Ut.X$],encapsulation:2}),r})();class ma{constructor(l,t=Jl.Default){this.clientType=l,this.clientIdKey=t}}var Op=m(8853);function py(r,l){1&r&&(e.TgZ(0,"div")(1,"app-form-row",2),e._UZ(2,"input",13),e.qZA(),e.TgZ(3,"app-form-row",2),e._UZ(4,"input",14),e.qZA()()),2&r&&(e.xp6(1),e.Q6J("id","Domain")("label","Common.DisplayURL")("help","Clients.DisplayURLHelp"),e.xp6(2),e.Q6J("id","LogoUrl")("label","Common.LogoURL")("help","Clients.LogoURLHelp"))}function FT(r,l){1&r&&(e.TgZ(0,"app-form-row",10)(1,"app-form-toggle",15),e._UZ(2,"input",16),e.qZA()()),2&r&&(e.Q6J("id","requireConsent")("label","Clients.RequireConsent.Title")("help","Clients.RequireConsent.Help")("isLast",!0),e.xp6(1),e.Q6J("id","requireConsent"))}let Ko=(()=>{class r{constructor(t){this.fb=t,this.desFocus=!1,this.hasExtraFields=!1}hosted(){}ngOnInit(){this.descriptionForm=this.fb.group({clientType:[this.data.clientType],clientId:["",[h.kI.required,h.kI.maxLength(100)]],clientName:["",[h.kI.required,h.kI.maxLength(50)]],description:["",h.kI.maxLength(1e3)]}),this.hasExtraFields=this.data.clientType===fr.B.Native||this.data.clientType===fr.B.NativePKCE||this.data.clientType===fr.B.BrowserBased||this.data.clientType===fr.B.LegacyClientSide||this.data.clientType===fr.B.ServerSide||this.data.clientType===fr.B.ServerSidePKCE,this.clientIdKey=this.data.clientIdKey,this.hasExtraFields&&(this.descriptionForm.addControl("clientUri",new h.p4("",h.kI.pattern("^https?://.*$"))),this.descriptionForm.addControl("logoUri",new h.p4("",h.kI.pattern("^https?://.*$"))),this.descriptionForm.addControl("requireConsent",new h.p4(!0)))}setRandomID(){this.descriptionForm.patchValue({clientId:(0,ot.qs)()})}canNext(){return this.descriptionForm.valid}getStepSummary(){const t=new Map;for(const i in this.descriptionForm.value)this.descriptionForm.value.hasOwnProperty(i)&&t.set("clientId"===i?this.clientIdKey:i,[this.descriptionForm.value[i]]);return t.delete("clientType"),t}getStepDTO(){const t=this.descriptionForm.value;return this.hasExtraFields&&(""===this.descriptionForm.controls.clientUri.value&&(t.clientUri=null),""===this.descriptionForm.controls.logoUri.value&&(t.logoUri=null)),t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],inputs:{data:"data"},decls:20,vars:21,consts:[[1,"cms","tw-mb-6"],[3,"formGroup"],[3,"id","label","help"],[1,"tw-flex","tw-w-full","lg:tw-max-w-2xl"],["type","text","name","ClientId","id","ClientId","formControlName","clientId",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0"],["id","genRandomIdBtn",1,"tw-btn","tw-rounded-l-none",3,"click"],["aria-hidden","true",1,"far","fa-random"],[1,"sr-only"],["id","DisplayName","type","text","name","DisplayName","formControlName","clientName",1,"tw-form-control"],[4,"ngIf"],[3,"id","label","help","isLast"],["id","Description","name","Description","formControlName","description",1,"tw-form-control",3,"blur","focus"],[3,"id","label","help","isLast",4,"ngIf"],["id","Domain","type","text","name","Domain","formControlName","clientUri",1,"tw-form-control"],["type","text","name","LogoUrl","id","LogoUrl","formControlName","logoUri",1,"tw-form-control"],[3,"id"],["id","requireConsent","type","checkbox","formControlName","requireConsent","name","requireConsent",1,"tw-form-switch__input"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"p"),e._uU(2),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",1)(5,"app-form-row",2),e.ALo(6,"keyToString"),e.TgZ(7,"div",3),e._UZ(8,"input",4),e.TgZ(9,"button",5),e.NdJ("click",function(){return i.setRandomID()}),e._UZ(10,"span",6),e.TgZ(11,"span",7),e._uU(12),e.ALo(13,"translate"),e.qZA()()()(),e.TgZ(14,"app-form-row",2),e._UZ(15,"input",8),e.qZA(),e.YNc(16,py,5,6,"div",9),e.TgZ(17,"app-form-row",10)(18,"textarea",11),e.NdJ("blur",function(){return i.desFocus=!i.desFocus})("focus",function(){return i.desFocus=!i.desFocus}),e.qZA()(),e.YNc(19,FT,3,5,"app-form-row",12),e.qZA()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,15,"Clients.EnterBasicDetails")),e.xp6(2),e.Q6J("formGroup",i.descriptionForm),e.xp6(1),e.Q6J("id","ClientId")("label",e.lcZ(6,17,i.clientIdKey))("help","Clients.IDHelp"),e.xp6(7),e.Oqu(e.lcZ(13,19,"Common.GenerateRandom")),e.xp6(2),e.Q6J("id","DisplayName")("label","Common.DisplayName")("help","Clients.DisplayNameHelp"),e.xp6(2),e.Q6J("ngIf",i.hasExtraFields),e.xp6(1),e.Q6J("id","Description")("label","Common.Description")("help","Clients.DescriptionHelp")("isLast",!i.hasExtraFields),e.xp6(2),e.Q6J("ngIf",i.hasExtraFields))},dependencies:[z.O5,h.Fj,h.Wl,h.JJ,h.JL,h.sg,h.u,Dn.L,ds.O,Ut.X$,Op.r],encapsulation:2}),r})();var kp=m(1660);const Om=["secretPicker"];let ql=(()=>{class r{constructor(){this.secrets=[],this.filePickerClosed=!0}getStepSummary(){const t=new Map;return t.set("secrets",this.secrets.map(i=>i.type)),t}getStepDTO(){return{clientSecrets:this.secretPicker.clientSecrets}}canNext(){return this.filePickerClosed}hosted(){this.secretPicker.resetState()}ngOnInit(){this.secretPicker.secretsAddStream.subscribe(t=>{this.secretPicker.clientSecrets.push(t)}),this.secretPicker.secretsRemoveStream.subscribe(t=>{this.secretPicker.clientSecrets.splice(this.secretPicker.clientSecrets.indexOf(t),1)})}filePickerStateChanged(t){this.filePickerClosed=!t}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-secret-picker"]],viewQuery:function(t,i){if(1&t&&e.Gf(Om,7),2&t){let p;e.iGM(p=e.CRH())&&(i.secretPicker=p.first)}},decls:5,vars:6,consts:[[1,"tw-mb-4"],[3,"clientSecrets","nonModelCertPicker","showCreatedColumn","filepickerDisplayed"],["secretPicker",""]],template:function(t,i){1&t&&(e.TgZ(0,"p",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"app-secret-picker",1,2),e.NdJ("filepickerDisplayed",function(C){return i.filePickerStateChanged(C)}),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,4,"Clients.NativeApp.Secrets")),e.xp6(2),e.Q6J("clientSecrets",i.secrets)("nonModelCertPicker",!0)("showCreatedColumn",!1))},dependencies:[kp.P,Ut.X$],encapsulation:2,data:{animation:[(0,Oo.Ic)()]}}),r})();function km(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.SloEndpoints")))}function Rp(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.AcsEndpoints")))}function Rm(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.ArsEndpoints")))}function Ku(r,l){1&r&&(e.TgZ(0,"option",13),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.Post")))}function $u(r,l){1&r&&(e.TgZ(0,"option",14),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.Redirect")))}function Pm(r,l){1&r&&(e.TgZ(0,"option",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.Artifact")))}function Pp(r,l){1&r&&(e.TgZ(0,"option",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.Soap")))}let Gu=(()=>{class r{constructor(t){this.fb=t}hosted(){}ngOnInit(){const t=[h.kI.pattern("^https?://.*$")],i=[];"ACSEndpoint"===this.data.endpointType&&(t.push(h.kI.required),i.push(h.kI.required)),this.endpointForm=this.fb.group({location:["",t],index:[0,[h.kI.min(0),h.kI.max(99)]],binding:["ARSEndpoint"===this.data.endpointType?"urn:oasis:names:tc:SAML:2.0:bindings:SOAP":"urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST",i]}),this.registerBindingValidation()}ngOnDestroy(){void 0!==this.valueChangesSub&&this.valueChangesSub.unsubscribe()}registerBindingValidation(){const t=this.endpointForm.get("location"),i=this.endpointForm.get("binding");this.valueChangesSub=t.valueChanges.subscribe(p=>{i.setValidators(p.length>0?h.kI.required:null),i.updateValueAndValidity()})}getStepSummary(){if(""!==this.endpointForm.get("location").value)return new Map([[this.data.endpointType,[`${this.endpointForm.get("location").value} - ${this.endpointForm.get("index").value} - ${this.endpointForm.get("binding").value}`]]])}getStepDTO(){if(""!==this.endpointForm.get("location").value){let t,i;switch(this.data.endpointType){case"SLOEndpoint":t="SLOBindingType",i="SLOEndpointIndex";break;case"ACSEndpoint":t="ACSBindingType",i="ACSEndpointIndex";break;default:t="ARSBindingType",i="ARSEndpointIndex"}const p=null==this.endpointForm.get("index").value?0:this.endpointForm.get("index").value;return{[this.data.endpointType]:this.endpointForm.get("location").value,[t]:this.endpointForm.get("binding").value,[i]:p}}}canNext(){return this.endpointForm.valid}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-endpoints"]],decls:16,vars:18,consts:[[1,"cms","tw-mb-6"],[4,"ngIf"],[3,"formGroup"],[3,"id","label","help"],["id","EndpointUrl","type","url","name","EndpointUrl","formControlName","location",1,"tw-form-control"],[1,"tw-form-select"],["id","EndpointBinding","formControlName","binding",1,"tw-form-control"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST",4,"ngIf"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect",4,"ngIf"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact",4,"ngIf"],["value","urn:oasis:names:tc:SAML:2.0:bindings:SOAP",4,"ngIf"],[3,"id","label","help","isLast"],["id","EndpointIndex","type","number","name","EndpointIndex","min","0","formControlName","index",1,"tw-form-control","tw-max-w-48"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact"],["value","urn:oasis:names:tc:SAML:2.0:bindings:SOAP"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,km,3,3,"p",1),e.YNc(2,Rp,3,3,"p",1),e.YNc(3,Rm,3,3,"p",1),e.qZA(),e.TgZ(4,"form",2)(5,"app-form-row",3),e._UZ(6,"input",4),e.qZA(),e.TgZ(7,"app-form-row",3)(8,"div",5)(9,"select",6),e.YNc(10,Ku,3,3,"option",7),e.YNc(11,$u,3,3,"option",8),e.YNc(12,Pm,3,3,"option",9),e.YNc(13,Pp,3,3,"option",10),e.qZA()()(),e.TgZ(14,"app-form-row",11),e._UZ(15,"input",12),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf","SLOEndpoint"==i.data.endpointType),e.xp6(1),e.Q6J("ngIf","ACSEndpoint"==i.data.endpointType),e.xp6(1),e.Q6J("ngIf","ARSEndpoint"==i.data.endpointType),e.xp6(1),e.Q6J("formGroup",i.endpointForm),e.xp6(1),e.Q6J("id","EndpointUrl")("label","Clients.Endpoint")("help","SLOEndpoint"==i.data.endpointType?"Clients.SloEndpointHelp":"ACSEndpoint"==i.data.endpointType?"Clients.AcsEndpointHelp":"Clients.ArsEndpointHelp"),e.xp6(2),e.Q6J("id","EndpointBinding")("label","Clients.BindingType")("help","Clients.BindingTypeHelp"),e.xp6(3),e.Q6J("ngIf","ARSEndpoint"!=i.data.endpointType),e.xp6(1),e.Q6J("ngIf","ARSEndpoint"!=i.data.endpointType),e.xp6(1),e.Q6J("ngIf","ARSEndpoint"!=i.data.endpointType),e.xp6(1),e.Q6J("ngIf","ARSEndpoint"==i.data.endpointType),e.xp6(1),e.Q6J("id","EndpointIndex")("label","Clients.Saml.Index")("help","Clients.IndexHelp")("isLast",!0))},dependencies:[z.O5,h._Y,h.YN,h.Kr,h.Fj,h.wV,h.EJ,h.JJ,h.JL,h.qQ,h.sg,h.u,Dn.L,Ut.X$],encapsulation:2}),r})(),wl=(()=>{class r{constructor(t){this.fb=t}hosted(){}ngOnInit(){this.logoutUrlForm=this.fb.group({logoutUrl:["",h.kI.pattern("^https?://.*$")]})}getStepSummary(){const t="logoutUrl",i=new Map,p=this.logoutUrlForm.value[t];return(0,ot.Ew)(p)||i.set(t,[p]),i}getStepDTO(){const t=this.logoutUrlForm.value.logoutUrl;return(0,ot.Ew)(t)?{postLogoutRedirectUris:[]}:{postLogoutRedirectUris:[t]}}canNext(){return this.logoutUrlForm.valid}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-logout-url"]],inputs:{data:"data"},decls:6,vars:8,consts:[[1,"cms","tw-mb-6"],[3,"innerHTML"],[3,"formGroup"],[3,"id","label","help","isLast"],["type","url","name","LogoutUrl","id","LogoutUrl","formControlName","logoutUrl",1,"tw-form-control"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"p",1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"form",2)(4,"app-form-row",3),e._UZ(5,"input",4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,6,"Clients.PostLogoutURL"),e.oJD),e.xp6(2),e.Q6J("formGroup",i.logoutUrlForm),e.xp6(1),e.Q6J("id","LogoutUrl")("label","Common.LogoutURL")("help","Clients.LogoutURLDescription")("isLast",!0))},dependencies:[h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Dn.L,Ut.X$],encapsulation:2}),r})(),hy=(()=>{class r{constructor(t){this.fb=t}hosted(){}ngOnInit(){this.cibaConfigForm=this.fb.group({cibaLifetime:["",h.kI.required],pollingInterval:["",h.kI.required]})}getStepSummary(){const t=new Map;return t.set("cibaLifetime",[this.cibaConfigForm.get("cibaLifetime").value]),t.set("pollingInterval",[this.cibaConfigForm.get("pollingInterval").value]),this.data.clientType===fr.B.CIBAMachine&&(this.cibaLifetime=""===this.cibaConfigForm.get("cibaLifetime").value?"":this.cibaConfigForm.get("cibaLifetime").value,this.pollingInterval=""===this.cibaConfigForm.get("pollingInterval").value?"":this.cibaConfigForm.get("pollingInterval").value,t.set("cibaLifetime",[this.cibaLifetime.toString()]),t.set("pollingInterval",[this.pollingInterval.toString()])),t}getStepDTO(){const t=this.getStepSummary(),i={};return t.forEach((p,C)=>{"cibaLifetime"===C&&(C="cibaLifetime"),"pollingInterval"===C&&(C="pollingInterval"),i[C]=p[0]}),i}canNext(){return this.cibaConfigForm.valid}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-ciba-configuration"]],inputs:{data:"data"},decls:8,vars:11,consts:[[1,"cms","tw-mb-6"],[3,"innerHTML"],[3,"formGroup"],[3,"id","label","help"],["type","number","name","CIBALifetime","id","CIBALifetime","formControlName","cibaLifetime",1,"tw-form-control"],[3,"id","label","help","isLast"],["type","number","name","PollingInterval","id","PollingInterval","formControlName","pollingInterval",1,"tw-form-control"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"p",1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"form",2)(4,"app-form-row",3),e._UZ(5,"input",4),e.qZA(),e.TgZ(6,"app-form-row",5),e._UZ(7,"input",6),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,9,"Clients.CIBAConfiguration"),e.oJD),e.xp6(2),e.Q6J("formGroup",i.cibaConfigForm),e.xp6(1),e.Q6J("id","CIBALifetime")("label","Common.CIBALifetime")("help","Clients.CIBALifetimeDescription"),e.xp6(2),e.Q6J("id","PollingInterval")("label","Common.PollingInterval")("help","Clients.CIBAPollingIntervalDescription")("isLast",!0))},dependencies:[h._Y,h.Fj,h.wV,h.JJ,h.JL,h.sg,h.u,Dn.L,Ut.X$],encapsulation:2}),r})();const Um=["commonPicker"];let Bm=(()=>{class r{constructor(t,i){this.wizardResourceService=i,this.resourceType=t}hosted(){}ngOnInit(){}getStepSummary(){const i=("protectedResources"===this.resourceType?this.wizardResourceService.assignedProtectedResources:this.wizardResourceService.assignedIdentityResources).map(p=>p.name);return new Map([[this.resourceType,i]])}getStepDTO(){return{allowedScopes:[...this.wizardResourceService.assignedIdentityResources.concat(this.wizardResourceService.assignedProtectedResources).map(p=>p.name)]}}canNext(){return this.wizardResourceService.assignedIdentityResources.length>0||this.wizardResourceService.assignedProtectedResources.length>0}}return r.\u0275fac=function(t){e.$Z()},r.\u0275dir=e.lG2({type:r,viewQuery:function(t,i){if(1&t&&e.Gf(Um,7),2&t){let p;e.iGM(p=e.CRH())&&(i.commonPicker=p.first)}}}),r})();var Ma=m(8506),Lp=m(7305);function Up(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.ProtectedResourcesAccess")))}function Fm(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.IdentityResourcesAccess")))}let dl=(()=>{class r extends Bm{constructor(t,i){super("identityResources",i),this.identityResourceService=t,this.wizardResourceService=i,this.resources=[],this.assignedResources=[]}ngOnInit(){this.identityResourceService.getIdentityResources().subscribe(t=>{const i=t.find(p=>"openid"===p.name);i&&(t.splice(t.indexOf(i),1),this.assignedResources=[i],this.wizardResourceService.assignedIdentityResources=this.assignedResources),this.resources=t})}ngAfterViewInit(){this.commonPicker.assignedStream.subscribe(t=>{this.resources=(0,ot.mn)(this.resources.slice(),t);const i=this.assignedResources.slice();this.assignedResources=i.concat(t),this.wizardResourceService.assignedIdentityResources=this.assignedResources,this.commonPicker.availableCount=0}),this.commonPicker.unAssignedStream.subscribe(t=>{const i=this.resources;this.assignedResources=(0,ot.mn)(this.assignedResources.slice(),t),this.resources=i.concat(t),this.wizardResourceService.assignedIdentityResources=this.assignedResources,this.commonPicker.assignedCount=0})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Ma.Q),e.Y36(Lp.j))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],features:[e.qOj],decls:5,vars:4,consts:[[1,"cms","tw-mb-6"],[4,"ngIf"],[3,"assignedInput","availableInput"],["commonPicker",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Up,3,3,"p",1),e.YNc(2,Fm,3,3,"p",1),e.qZA(),e._UZ(3,"app-common-picker",2,3)),2&t&&(e.xp6(1),e.Q6J("ngIf","protectedResources"==i.resourceType),e.xp6(1),e.Q6J("ngIf","identityResources"==i.resourceType),e.xp6(1),e.Q6J("assignedInput",i.assignedResources)("availableInput",i.resources))},dependencies:[z.O5,Bo,Ut.X$],encapsulation:2}),r})();var Zo=m(7733);function fy(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.ProtectedResourcesAccess")))}function Zm(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.IdentityResourcesAccess")))}let pl=(()=>{class r extends Bm{constructor(t,i){super("protectedResources",i),this.protectedResourceService=t,this.wizardResourceService=i,this.resources=[],this.assignedResources=[]}ngOnInit(){this.protectedResourceService.getProtectedResources().subscribe(t=>{const i=[];t.forEach(p=>{p.scopes.forEach(C=>{i.find(K=>K.name==C.name)||i.push(C)})}),this.resources=i})}ngAfterViewInit(){this.commonPicker.assignedStream.subscribe(t=>{this.resources=(0,ot.mn)(this.resources.slice(),t);const i=this.assignedResources.slice();this.assignedResources=i.concat(t),this.wizardResourceService.assignedProtectedResources=this.assignedResources,this.commonPicker.availableCount=0}),this.commonPicker.unAssignedStream.subscribe(t=>{const i=this.resources;this.assignedResources=(0,ot.mn)(this.assignedResources.slice(),t),this.resources=i.concat(t),this.wizardResourceService.assignedProtectedResources=this.assignedResources,this.commonPicker.assignedCount=0})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Zo.m),e.Y36(Lp.j))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],features:[e.qOj],decls:5,vars:4,consts:[[1,"cms","tw-mb-6"],[4,"ngIf"],[3,"assignedInput","availableInput"],["commonPicker",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,fy,3,3,"p",1),e.YNc(2,Zm,3,3,"p",1),e.qZA(),e._UZ(3,"app-common-picker",2,3)),2&t&&(e.xp6(1),e.Q6J("ngIf","protectedResources"==i.resourceType),e.xp6(1),e.Q6J("ngIf","identityResources"==i.resourceType),e.xp6(1),e.Q6J("assignedInput",i.assignedResources)("availableInput",i.resources))},dependencies:[z.O5,Bo,Ut.X$],encapsulation:2}),r})();class Vm extends Np.A{constructor(){super(),this.nameComponentMap.set(Li.Q.SinglePageApplication,[new hi.H(Ko,new ma(fr.B.BrowserBased)),new hi.H(ea,new bl(fr.B.BrowserBased)),new hi.H(wl,new ju(fr.B.BrowserBased)),new hi.H(dl,{}),new hi.H(pl,{})]),this.nameComponentMap.set(Li.Q.LegacySinglePageApplication,[new hi.H(Ko,new ma(fr.B.LegacyClientSide)),new hi.H(ea,new bl(fr.B.LegacyClientSide)),new hi.H(wl,new ju(fr.B.LegacyClientSide)),new hi.H(dl,{}),new hi.H(pl,{})]),this.nameComponentMap.set(Li.Q.SamlApplication,[new hi.H(Ko,new ma(fr.B.Saml,Jl.Saml)),new hi.H(Gu,{endpointType:"ACSEndpoint"}),new hi.H(Gu,{endpointType:"SLOEndpoint"}),new hi.H(Gu,{endpointType:"ARSEndpoint"}),new hi.H(dl)]),this.nameComponentMap.set(Li.Q.WsFedApplication,[new hi.H(Ko,new ma(fr.B.WsFed,Jl.WsFed)),new hi.H(ea,new bl(fr.B.WsFed)),new hi.H(dl)]),this.nameComponentMap.set(Li.Q.DeviceApplication,[new hi.H(Ko,new ma(fr.B.Device)),new hi.H(pl,{}),new hi.H(dl,{})]),this.nameComponentMap.set(Li.Q.RobotApplication,[new hi.H(Ko,new ma(fr.B.Machine)),new hi.H(pl,{}),new hi.H(ql,{})]),this.nameComponentMap.set(Li.Q.CIBARobotApplication,[new hi.H(Ko,new ma(fr.B.CIBAMachine)),new hi.H(dl,{}),new hi.H(pl,{}),new hi.H(ql,{}),new hi.H(hy,{})]),this.nameComponentMap.set(Li.Q.NativeApplication,[new hi.H(Ko,new ma(fr.B.Native)),new hi.H(ea,new bl(fr.B.Native)),new hi.H(ql,{}),new hi.H(dl,{}),new hi.H(pl,{})]),this.nameComponentMap.set(Li.Q.PKCENativeApplication,[new hi.H(Ko,new ma(fr.B.NativePKCE)),new hi.H(ea,new bl(fr.B.NativePKCE)),new hi.H(ql,{}),new hi.H(dl,{}),new hi.H(pl,{})]),this.nameComponentMap.set(Li.Q.WebApplication,[new hi.H(Ko,new ma(fr.B.ServerSide)),new hi.H(ea,new bl(fr.B.ServerSide)),new hi.H(wl,new ju(fr.B.ServerSide)),new hi.H(ql,{}),new hi.H(dl,{}),new hi.H(pl,{})]),this.nameComponentMap.set(Li.Q.PKCEWebApplication,[new hi.H(Ko,new ma(fr.B.ServerSidePKCE)),new hi.H(ea,new bl(fr.B.ServerSidePKCE)),new hi.H(wl,new ju(fr.B.ServerSidePKCE)),new hi.H(ql,{}),new hi.H(dl,{}),new hi.H(pl,{})]),this.nameTitleMap.set(Li.Q.SinglePageApplication,new fa.K("Clients.SPA.Setup","Clients.SPA.Title")),this.nameTitleMap.set(Li.Q.LegacySinglePageApplication,new fa.K("Clients.LegacySPA.Setup","Clients.LegacySPA.Title")),this.nameTitleMap.set(Li.Q.DeviceApplication,new fa.K("Clients.DeviceFlow.Setup","Clients.DeviceFlow.Title")),this.nameTitleMap.set(Li.Q.RobotApplication,new fa.K("Clients.MachineToMachine.Setup","Clients.MachineToMachine.Title")),this.nameTitleMap.set(Li.Q.CIBARobotApplication,new fa.K("Clients.CIBAMachineToMachine.Setup","Clients.CIBAMachineToMachine.Title")),this.nameTitleMap.set(Li.Q.NativeApplication,new fa.K("Clients.NativeApp.Setup","Clients.NativeApp.Title")),this.nameTitleMap.set(Li.Q.PKCENativeApplication,new fa.K("Clients.NativeApp.Setup","Clients.NativeApp.Title")),this.nameTitleMap.set(Li.Q.WebApplication,new fa.K("Clients.WebApp.Setup","Clients.WebApp.Title")),this.nameTitleMap.set(Li.Q.PKCEWebApplication,new fa.K("Clients.WebApp.Setup","Clients.PKCEWebApp.Title")),this.nameTitleMap.set(Li.Q.SamlApplication,new fa.K("Clients.Saml.Setup","Clients.Saml.Title")),this.nameTitleMap.set(Li.Q.WsFedApplication,new fa.K("Clients.WsFed.Setup","Clients.WsFed.Title"))}getWizard(l){return this.nameComponentMap.get(l)}getWizardTitle(l){return this.nameTitleMap.get(l)}}var Na=m(9141),my=m(1503),Hm=m(5221);function gy(r,l){}function _y(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.nextTab())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("disabled",!t.canNext()),e.xp6(1),e.Oqu(e.lcZ(2,2,"Common.Next"))}}function vy(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.submit())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Common.Save")))}function yy(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.previousTab())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Common.Back")))}function Jm(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.cancelWizard())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Common.Back")))}let Cy=(()=>{class r extends Na.G{constructor(t,i,p,C){super(),this.clientsService=t,this.errorService=i,this.toastr=p,this.translate=C,this.wizardProvider=new Vm,this.components=new Map}nextTab(){++this.index,this.index===this.wizardSteps.length?this.buildSummary():(void 0===this.components.get(this.index)&&this.createComponentAtCurrentIndex(),this.displayComponentAtCurrentIndex())}previousTab(){this.index>0&&(--this.index,this.displayComponentAtCurrentIndex())}buildSummary(){const t=[];this.wizardSteps.forEach((i,p)=>{const K=this.components.get(p).instance.getStepSummary();null!=K&&t.push({stepName:`ClientStep${p}`,stepData:K})}),this.displaySummaryComponent(t)}displaySummaryComponent(t){this.wizardHost.viewContainerRef.detach(),void 0===this.summaryComponentRef?(this.wizardHost.viewContainerRef.detach(),this.summaryComponentRef=this.wizardHost.viewContainerRef.createComponent(my.q)):this.wizardHost.viewContainerRef.insert(this.summaryComponentRef.hostView),this.summaryComponentRef.instance.summary=t,this.summaryComponentRef.instance.summaryTitle=this.wizardTitles.summaryTitle,this.summaryComponentRef.instance.emitNavigate.pipe((0,tr.P)()).subscribe(i=>{this.index=t.findIndex(p=>p.stepName===i),this.displayComponentAtCurrentIndex()}),this.updateProgress()}getWizardDto(){let t={};return this.wizardSteps.forEach((i,p)=>{const K=this.components.get(p).instance.getStepDTO();t=Object.assign({},t,K)}),t}submit(){const t=this.getWizardDto();this.clientsService.addClient(t).subscribe({complete:()=>{this.finishWizard(),this.clearComponents(),this.toastr.success(this.translate.instant("Common.Created")+": "+t.clientName,this.translate.instant("Notifications.SuccessfullyCreated"))},error:i=>{this.errorService.handleError(i)}})}ngOnDestroy(){this.summaryComponentRef&&this.summaryComponentRef.destroy()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(fc.a),e.Y36(Ee.T),e.Y36(si._W),e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-wizard-host"]],features:[e._Bn([fc.a]),e.qOj],decls:24,vars:17,consts:[[1,"modal-header"],[1,"modal-title",3,"id"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-progress"],["role","progressbar",1,"modal-progress-bar"],[1,"modal-body","scrollbars"],["appStepHost",""],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["class","tw-btn-success tw-mr-3","id","nextBtn",3,"disabled","click",4,"ngIf"],["class","tw-btn-success tw-mr-3","id","submitBtn",3,"click",4,"ngIf"],["class","tw-btn","id","backBtn",3,"click",4,"ngIf"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],["id","nextBtn",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],["id","submitBtn",1,"tw-btn-success","tw-mr-3",3,"click"],["id","backBtn",1,"tw-btn",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return i.hideWizard()}),e._UZ(5,"span",3),e.TgZ(6,"span",4),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",5),e._UZ(10,"div",6),e.qZA(),e.TgZ(11,"div",7),e.YNc(12,gy,0,0,"ng-template",8),e.qZA(),e._UZ(13,"div",9),e.TgZ(14,"div",10)(15,"div",11)(16,"div",12),e.YNc(17,_y,3,4,"button",13),e.YNc(18,vy,3,3,"button",14),e.YNc(19,yy,3,3,"button",15),e.YNc(20,Jm,3,3,"button",15),e.qZA(),e.TgZ(21,"button",16),e.NdJ("click",function(){return i.cancelWizard()}),e._uU(22),e.ALo(23,"translate"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("id",i.titleId),e.xp6(1),e.Oqu(e.lcZ(3,11,i.wizardTitles.setupTitle)),e.xp6(5),e.Oqu(e.lcZ(8,13,"Common.Close")),e.xp6(3),e.Udp("width",i.progressPercent+"%"),e.uIk("aria-valuenow",i.progressPercent),e.xp6(7),e.Q6J("ngIf",i.index<(null==i.wizardSteps?null:i.wizardSteps.length)),e.xp6(1),e.Q6J("ngIf",i.index==(null==i.wizardSteps?null:i.wizardSteps.length)),e.xp6(1),e.Q6J("ngIf",i.index>0),e.xp6(1),e.Q6J("ngIf",i.index<=0),e.xp6(2),e.Oqu(e.lcZ(23,15,"Common.Cancel")))},dependencies:[z.O5,Hm.S,Ut.X$],encapsulation:2}),r})();function by(r,l){1&r&&e.GkF(0)}function wy(r,l){1&r&&e.GkF(0)}function Mi(r,l){1&r&&e.GkF(0)}function qm(r,l){1&r&&e.GkF(0)}function Qm(r,l){1&r&&e.GkF(0)}function Wm(r,l){1&r&&e.GkF(0)}function Ty(r,l){1&r&&e.GkF(0)}function Ay(r,l){1&r&&e.GkF(0)}function jm(r,l){if(1&r&&(e.TgZ(0,"option",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"Clients.WizardTypes."+t))}}function Sy(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"form",27)(1,"app-form-row",28)(2,"div",29)(3,"select",30,31),e.NdJ("change",function(){e.CHM(t);const p=e.MAs(4),C=e.oxw(2);return e.KtG(C.setActive(p.value))}),e.YNc(5,jm,3,4,"option",32),e.qZA()()()()}if(2&r){const t=e.oxw(2);e.Q6J("formGroup",t.webAppSelectForm),e.xp6(1),e.Q6J("id","webAppFlow")("label","Clients.WizardTypes.WebAppSelection")("isLast",!0),e.xp6(4),e.Q6J("ngForOf",t.webAppTypes)}}function Km(r,l){if(1&r&&(e.TgZ(0,"option",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"Clients.WizardTypes."+t))}}function xy(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"form",34)(1,"app-form-row",28)(2,"div",29)(3,"select",35,36),e.NdJ("change",function(){e.CHM(t);const p=e.MAs(4),C=e.oxw(2);return e.KtG(C.setActive(p.value))}),e.YNc(5,Km,3,4,"option",32),e.qZA()()()()}if(2&r){const t=e.oxw(2);e.Q6J("formGroup",t.robotAppSelectForm),e.xp6(1),e.Q6J("id","robotAppFlow")("label","Clients.WizardTypes.WebAppSelection")("isLast",!0),e.xp6(4),e.Q6J("ngForOf",t.robotAppTypes)}}function Ey(r,l){if(1&r&&(e.TgZ(0,"option",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"Clients.WizardTypes."+t))}}function ZT(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"form",37)(1,"app-form-row",28)(2,"div",29)(3,"select",38,39),e.NdJ("change",function(){e.CHM(t);const p=e.MAs(4),C=e.oxw(2);return e.KtG(C.setActive(p.value))}),e.YNc(5,Ey,3,4,"option",32),e.qZA()()()()}if(2&r){const t=e.oxw(2);e.Q6J("formGroup",t.nativeAppSelectForm),e.xp6(1),e.Q6J("id","nativeAppFlow")("label","Clients.WizardTypes.WebAppSelection")("isLast",!0),e.xp6(4),e.Q6J("ngForOf",t.nativeAppTypes)}}function $m(r,l){1&r&&(e.TgZ(0,"span",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.Selected")))}const Gm=function(r){return{"tw-bg-green-200":r}},Ql=function(r,l){return{"tw-bg-green-500":r,"tw-bg-grey-200":l}},Dy=function(r,l){return{"tw-text-white":r,"tw-text-grey-400 group-hover:tw-text-grey-700":l}},Bp=function(r,l){return{"tw-text-green-800":r,"tw-text-navy-500":l}},Fp=function(r,l){return{"tw-text-green-600":r,"tw-text-grey-600":l}},Iy=function(r){return{"tw-text-green-300":r}};function VT(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"li",40)(1,"input",41),e.NdJ("click",function(){const C=e.CHM(t).type,K=e.oxw(2);return e.KtG(K.setActive(C))}),e.qZA(),e.TgZ(2,"label",42),e.NdJ("click",function(){const C=e.CHM(t).type,K=e.oxw(2);return e.KtG(K.setActive(C))}),e.TgZ(3,"div",43),e._UZ(4,"span",44),e.YNc(5,$m,3,3,"span",45),e.qZA(),e.TgZ(6,"div",46)(7,"span",47),e._uU(8),e.qZA(),e.TgZ(9,"span",48),e._uU(10),e.qZA()(),e.TgZ(11,"div",49),e._UZ(12,"span",50),e.qZA()()()}if(2&r){const t=l.id,i=l.btnId,p=l.title,C=l.summary,K=l.icon,Ce=l.selected,Ue=l.type,lt=e.oxw(2);e.s9C("id",t),e.xp6(1),e.s9C("id",i),e.s9C("value",Ue),e.Q6J("ngModel",lt.activeType),e.xp6(1),e.s9C("for",i),e.Q6J("ngClass",e.VKq(17,Gm,Ce)),e.xp6(1),e.Q6J("ngClass",e.WLB(19,Ql,Ce,!Ce)),e.xp6(1),e.Q6J("ngClass",e.WLB(22,Dy,Ce,!Ce)),e.xp6(1),e.Q6J("ngIf",Ce),e.xp6(2),e.Q6J("ngClass",e.WLB(25,Bp,Ce,!Ce)),e.xp6(1),e.hij(" ",p," "),e.xp6(1),e.Q6J("ngClass",e.WLB(28,Fp,Ce,!Ce)),e.xp6(1),e.hij(" ",C," "),e.xp6(2),e.Gre("",K," tw-text-black tw-text-grey-300 tw-text-3xl trans"),e.Q6J("ngClass",e.VKq(31,Iy,Ce))}}function HT(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.Home.Title")))}function JT(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.SPA.Title")))}function My(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.WebApp.Title")))}function zm(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.NativeApp.Title")))}function qT(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.MachineToMachine.Title")))}function Ny(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.CIBAMachineToMachine.Title")))}function mc(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.DeviceFlow.Title")))}function Oy(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.Saml.Title")))}function Ym(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.WsFed.Title")))}function zu(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Clients.LegacySPA.Title")))}function ky(r,l){1&r&&(e._UZ(0,"p",51),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"Clients.Home.Description"),e.oJD)}function Xm(r,l){1&r&&(e._UZ(0,"p",51),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"Clients.SPA.Description"),e.oJD)}function Ry(r,l){1&r&&(e._UZ(0,"p",51),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"Clients.WebApp.Description"),e.oJD)}function Py(r,l){1&r&&(e._UZ(0,"p",51),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"Clients.NativeApp.Description"),e.oJD)}function Ly(r,l){1&r&&(e._UZ(0,"p",51),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"Clients.MachineToMachine.Description"),e.oJD)}function Uy(r,l){1&r&&(e._UZ(0,"p",51),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"Clients.CIBAMachineToMachine.Description"),e.oJD)}function By(r,l){1&r&&(e._UZ(0,"p",51),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"Clients.DeviceFlow.Description"),e.oJD)}function eg(r,l){1&r&&(e._UZ(0,"p",51),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"Clients.Saml.Description"),e.oJD)}function Fy(r,l){1&r&&(e._UZ(0,"p",51),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"Clients.WsFed.Description"),e.oJD)}function tg(r,l){1&r&&(e._UZ(0,"p",51),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"Clients.LegacySPA.Description"),e.oJD)}const ng=function(r,l,t,i){return{id:"spaBtn",btnId:"spaTestBtn",title:r,summary:l,icon:"fab fa-chrome",selected:t,type:i}},Zp=function(r,l,t,i){return{id:"webAppBtn",btnId:"webAppTestBtn",title:r,summary:l,icon:"fas fa-globe",selected:t,type:i}},QT=function(r,l,t,i){return{id:"nativeBtn",btnId:"nativeTestBtn",title:r,summary:l,icon:"fas fa-mobile-alt",selected:t,type:i}},Vp=function(r,l,t,i){return{id:"robotBtn",btnId:"robotTestBtn",title:r,summary:l,icon:"fas fa-microchip",selected:t,type:i}},Zy=function(r,l,t,i){return{id:"deviceBtn",btnId:"deviceTestBtn",title:r,summary:l,icon:"fas fa-wifi",selected:t,type:i}},WT=function(r,l,t,i){return{id:"samlBtn",btnId:"samlTestBtn",title:r,summary:l,icon:"fas fa-code",selected:t,type:i}},gc=function(r,l,t,i){return{id:"wsfedBtn",btnId:"wsfedTestBtn",title:r,summary:l,icon:"far fa-id-card",selected:t,type:i}},ig=function(r,l,t,i){return{id:"legacySpaBtn",btnId:"legacySpaTestBtn",title:r,summary:l,icon:"fab fa-chrome",selected:t,type:i}};function rg(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"h5",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.hide())}),e.ALo(6,"translate"),e._UZ(7,"span",4),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"div",6,7),e.qZA(),e.TgZ(11,"div",8)(12,"p",9),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",10)(16,"ul",11),e.YNc(17,by,1,0,"ng-container",12),e.ALo(18,"translate"),e.ALo(19,"translate"),e.YNc(20,wy,1,0,"ng-container",12),e.ALo(21,"translate"),e.ALo(22,"translate"),e.YNc(23,Mi,1,0,"ng-container",12),e.ALo(24,"translate"),e.ALo(25,"translate"),e.YNc(26,qm,1,0,"ng-container",12),e.ALo(27,"translate"),e.ALo(28,"translate"),e.YNc(29,Qm,1,0,"ng-container",12),e.ALo(30,"translate"),e.ALo(31,"translate"),e.YNc(32,Wm,1,0,"ng-container",12),e.ALo(33,"translate"),e.ALo(34,"translate"),e.YNc(35,Ty,1,0,"ng-container",12),e.ALo(36,"translate"),e.ALo(37,"translate"),e.YNc(38,Ay,1,0,"ng-container",12),e.ALo(39,"translate"),e.ALo(40,"translate"),e.qZA()(),e.YNc(41,Sy,6,5,"form",13),e.YNc(42,xy,6,5,"form",14),e.YNc(43,ZT,6,5,"form",15),e.YNc(44,VT,13,33,"ng-template",null,16,e.W1O),e.TgZ(46,"div",17)(47,"h2",18),e._UZ(48,"span",19),e.YNc(49,HT,3,3,"span",0),e.YNc(50,JT,3,3,"span",0),e.YNc(51,My,3,3,"span",0),e.YNc(52,zm,3,3,"span",0),e.YNc(53,qT,3,3,"span",0),e.YNc(54,Ny,3,3,"span",0),e.YNc(55,mc,3,3,"span",0),e.YNc(56,Oy,3,3,"span",0),e.YNc(57,Ym,3,3,"span",0),e.YNc(58,zu,3,3,"span",0),e.qZA(),e.YNc(59,ky,2,3,"p",20),e.YNc(60,Xm,2,3,"p",20),e.YNc(61,Ry,2,3,"p",20),e.YNc(62,Py,2,3,"p",20),e.YNc(63,Ly,2,3,"p",20),e.YNc(64,Uy,2,3,"p",20),e.YNc(65,By,2,3,"p",20),e.YNc(66,eg,2,3,"p",20),e.YNc(67,Fy,2,3,"p",20),e.YNc(68,tg,2,3,"p",20),e.qZA()(),e._UZ(69,"div",21),e.TgZ(70,"div",22)(71,"div",23)(72,"div",24)(73,"button",25),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.choosePage())}),e._uU(74),e.ALo(75,"translate"),e.qZA()(),e.TgZ(76,"button",26),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.hide())}),e._uU(77),e.ALo(78,"translate"),e.qZA()()()()}if(2&r){const t=e.MAs(45),i=e.oxw();e.xp6(2),e.Q6J("id",i.titleId),e.xp6(1),e.Oqu(e.lcZ(4,46,"Clients.Setup")),e.xp6(2),e.uIk("aria-label",e.lcZ(6,48,"Common.Close")),e.xp6(8),e.Oqu(e.lcZ(14,50,"Clients.SelectType")),e.xp6(4),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.l5B(88,ng,e.lcZ(18,52,"Clients.SPA.Title"),e.lcZ(19,54,"Clients.SPA.Summary"),i.activeType===i.wizardTypes.SinglePageApplication,i.wizardTypes.SinglePageApplication)),e.xp6(3),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.l5B(93,Zp,e.lcZ(21,56,"Clients.WebApp.Title"),e.lcZ(22,58,"Clients.WebApp.Summary"),i.activeType===i.wizardTypes.WebApplication||i.activeType===i.wizardTypes.PKCEWebApplication,i.wizardTypes.PKCEWebApplication)),e.xp6(3),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.l5B(98,QT,e.lcZ(24,60,"Clients.NativeApp.Title"),e.lcZ(25,62,"Clients.PKCENativeApp.Summary"),i.activeType===i.wizardTypes.PKCENativeApplication||i.activeType==i.wizardTypes.NativeApplication,i.wizardTypes.PKCENativeApplication)),e.xp6(3),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.l5B(103,Vp,e.lcZ(27,64,"Clients.MachineToMachine.Title"),e.lcZ(28,66,"Clients.MachineToMachine.Summary"),i.activeType===i.wizardTypes.RobotApplication,i.wizardTypes.RobotApplication)),e.xp6(3),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.l5B(108,Zy,e.lcZ(30,68,"Clients.DeviceFlow.Title"),e.lcZ(31,70,"Clients.DeviceFlow.Summary"),i.activeType===i.wizardTypes.DeviceApplication,i.wizardTypes.DeviceApplication)),e.xp6(3),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.l5B(113,WT,e.lcZ(33,72,"Clients.Saml.Title"),e.lcZ(34,74,"Clients.Saml.Summary"),i.activeType===i.wizardTypes.SamlApplication,i.wizardTypes.SamlApplication)),e.xp6(3),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.l5B(118,gc,e.lcZ(36,76,"Clients.WsFed.Title"),e.lcZ(37,78,"Clients.WsFed.Summary"),i.activeType===i.wizardTypes.WsFedApplication,i.wizardTypes.WsFedApplication)),e.xp6(3),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.l5B(123,ig,e.lcZ(39,80,"Clients.LegacySPA.Title"),e.lcZ(40,82,"Clients.LegacySPA.Summary"),i.activeType===i.wizardTypes.LegacySinglePageApplication,i.wizardTypes.LegacySinglePageApplication)),e.xp6(3),e.Q6J("ngIf",i.activeType===i.wizardTypes.WebApplication||i.activeType===i.wizardTypes.PKCEWebApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.RobotApplication||i.activeType===i.wizardTypes.CIBARobotApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.NativeApplication||i.activeType===i.wizardTypes.PKCENativeApplication),e.xp6(6),e.Q6J("ngIf",i.activeType===i.wizardTypes.Home),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.SinglePageApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.WebApplication||i.activeType===i.wizardTypes.PKCEWebApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.NativeApplication||i.activeType===i.wizardTypes.PKCENativeApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.RobotApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.CIBARobotApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.DeviceApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.SamlApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.WsFedApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.LegacySinglePageApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.Home),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.SinglePageApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.WebApplication||i.activeType===i.wizardTypes.PKCEWebApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.NativeApplication||i.activeType===i.wizardTypes.PKCENativeApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.RobotApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.CIBARobotApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.DeviceApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.SamlApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.WsFedApplication),e.xp6(1),e.Q6J("ngIf",i.activeType===i.wizardTypes.LegacySinglePageApplication),e.xp6(5),e.Q6J("disabled",i.activeType===i.wizardTypes.Home),e.xp6(1),e.Oqu(e.lcZ(75,84,"Common.Start")),e.xp6(3),e.Oqu(e.lcZ(78,86,"Common.Cancel"))}}function Yu(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"app-client-wizard-host",52),e.NdJ("wizardCancel",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.onCancel())})("finish",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.onFinish())})("hide",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.hide())}),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("wizardName",t.pageType)}}let Oa=(()=>{class r{constructor(t,i){this.fb=t,this.modalService=i,this.finish=new e.vpe,this.titleId=Hl.G.TileId,this.pageType=Li.Q.Home,this.activeType=Li.Q.SinglePageApplication,this.showWizard=!1,this.wizardProvider=new Vm,this.wizardTypes=Li.Q,this.webAppTypes=[Li.Q.PKCEWebApplication,Li.Q.WebApplication],this.robotAppTypes=[Li.Q.RobotApplication,Li.Q.CIBARobotApplication],this.nativeAppTypes=[Li.Q.PKCENativeApplication,Li.Q.NativeApplication]}ngOnInit(){this.setWebAppSelection(this.webAppTypes[0]),this.setRobotAppSelection(this.robotAppTypes[0]),this.setNativeAppSelection(this.nativeAppTypes[0])}setWebAppSelection(t){(t===Li.Q.WebApplication||t===Li.Q.PKCEWebApplication)&&(this.webAppSelectForm=this.fb.group({webAppSelection:t}))}setRobotAppSelection(t){(t===Li.Q.RobotApplication||t===Li.Q.CIBARobotApplication)&&(this.robotAppSelectForm=this.fb.group({robotAppSelection:t}))}setNativeAppSelection(t){(t===Li.Q.NativeApplication||t===Li.Q.PKCENativeApplication)&&(this.nativeAppSelectForm=this.fb.group({nativeAppSelection:t}))}setActive(t){this.activeType=t,this.setWebAppSelection(t),this.setRobotAppSelection(t),this.setNativeAppSelection(t)}choosePage(){this.pageType=this.activeType,this.showWizard=!0}onCancel(){this.pageType=Li.Q.Home,this.activeType=Li.Q.SinglePageApplication,this.showWizard=!1}onFinish(){this.finish.emit(),this.hide()}hide(){this.modalService.hide(Hl.G.Id),this.modalService.onHidden.pipe((0,tr.P)()).subscribe(()=>{this.onCancel()})}ngOnDestroy(){this.hide()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(le.tT))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-wizard"]],outputs:{finish:"finish"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"modal-header"],[1,"modal-title",3,"id"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"modal-progress"],["role","progressbar","aria-valuenow","2",1,"modal-progress-bar",2,"width","2%"],["progressBar",""],[1,"modal-body","scrollbars"],[1,"sr-only"],[1,"tw--mt-2","tw--ml-2","md:tw--mt-4","md:tw--ml-4"],[1,"tw-flex","tw-flex-wrap"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["id","webAppSelectionForm","class","tw-mt-5",3,"formGroup",4,"ngIf"],["id","robotSelectionForm","class","tw-mt-5",3,"formGroup",4,"ngIf"],["id","nativeSelectionFrom","class","tw-mt-5",3,"formGroup",4,"ngIf"],["commonTypeButton",""],[1,"tw-border-t","tw-border-grey-300","tw-text-grey-700","tw-text-sm","tw-mt-6","tw-pt-5"],[1,"tw-text-sm","tw-font-semibold","tw-text-primary-500","tw-mb-2"],["aria-hidden","true",1,"fas","fa-info-circle","tw-w-5"],[3,"innerHTML",4,"ngIf"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","nextModal",1,"tw-btn-success",3,"disabled","click"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],["id","webAppSelectionForm",1,"tw-mt-5",3,"formGroup"],[3,"id","label","isLast"],[1,"tw-form-select"],["id","webAppFlow","formControlName","webAppSelection",1,"tw-form-control",3,"change"],["webAppSelection",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","robotSelectionForm",1,"tw-mt-5",3,"formGroup"],["id","robotAppFlow","formControlName","robotAppSelection",1,"tw-form-control",3,"change"],["robotAppSelection",""],["id","nativeSelectionFrom",1,"tw-mt-5",3,"formGroup"],["id","nativeAppFlow","formControlName","nativeAppSelection",1,"tw-form-control",3,"change"],["nativeAppSelection",""],[1,"tw-pt-2","tw-pl-2","tw-w-full","sm:tw-w-1/2","md:tw-pt-4","md:tw-pl-4",3,"id"],["type","radio",1,"sr-only",3,"id","value","ngModel","click"],["type","button",1,"tw-block","tw-bg-white","tw-pl-16","tw-py-3","tw-w-full","tw-overflow-hidden","tw-rounded","tw-relative","group","trans","hover:tw-shadow-md","md:tw-pr-16",3,"for","ngClass","click"],[1,"tw-flex","tw-items-center","tw-justify-center","tw-w-16","tw-h-full","tw-absolute","tw-top-0","tw-left-0","trans",3,"ngClass"],[1,"fas","fa-check","tw-text-xl","trans",3,"ngClass"],["class","sr-only",4,"ngIf"],[1,"tw-px-4","tw-text-left"],[1,"tw-block","tw-font-semibold","trans",3,"ngClass"],[1,"tw-block","tw-text-xs","trans",3,"ngClass"],[1,"tw-hidden","tw-items-center","tw-justify-center","tw-w-16","tw-h-full","tw-absolute","tw-top-0","tw-right-0","trans","md:tw-flex"],[3,"ngClass"],[3,"innerHTML"],[3,"wizardName","wizardCancel","finish","hide"]],template:function(t,i){1&t&&(e.YNc(0,rg,79,128,"div",0),e.YNc(1,Yu,2,1,"div",0)),2&t&&(e.Q6J("ngIf",i.pageType===i.wizardTypes.Home),e.xp6(1),e.Q6J("ngIf",i.showWizard))},dependencies:[z.mk,z.sg,z.O5,z.tP,h._Y,h.YN,h.Kr,h.Fj,h.EJ,h._,h.JJ,h.JL,h.On,h.sg,h.u,Dn.L,Cy,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var Xu=m(3111),sg=m(7363),iu=m(6679),hl=m(7393);class Hp extends Xu.yr{constructor(l,t=!0){super(),this._selected=!1,this.conflictedByDependencies=!1,this.secretsAction=sg.C.DoNotSet,this.certificateAction=iu.R6.DoNotSet,this.identifier=l.identifier,this.resourceType=l.resourceType,this.resourceState=l.resourceState,this.displayType=l.displayType,this.displayName=l.displayName,this.conflicts=l.conflicts,this.dependantClients=l.dependantClients,this.hadSecrets=l.hadSecrets,this.hadCertificates=l.hadCertificates,this.existingHasSecrets=l.existingHasSecrets,this.existingHasCertificates=l.existingHasCertificates,this.selected=t,this.certificates=new hl.w}set selected(l){this.isSelectable&&(this._selected=l)}get selected(){return this._selected}get isSelectable(){return this.resourceState!==Xu.vZ.Duplicate&&this.resourceType===Xu.JR.Client}}var og=m(6297),Jp=m(7481),jT=m(7331),ag=m(5744),KT=m(9659);function ed(r,l){if(1&r&&(e.TgZ(0,"div",7),e._UZ(1,"div",8),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Udp("width",t.progressComplete+"%"),e.uIk("aria-valuenow",t.progressComplete)}}function td(r,l){}let nd=(()=>{class r{constructor(t){this.viewContainerRef=t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.s_b))},r.\u0275dir=e.lG2({type:r,selectors:[["","appImportStepHost",""]]}),r})(),qp=(()=>{class r{constructor(t){this.importWizardController=t,this.finish=new e.vpe,this.warning=new e.vpe,this.components=new Map,this.progressComplete=5,this.progressStepString="",this.disableButtons=!1,this.hideProgressBar=!1}ngOnInit(){this.moveSubscription=this.importWizardController.move.subscribe(t=>{t?this.finish.emit():this.importWizardController.areStepsRemaning()&&(this.displayNext(),this.progressStepString=this.getStepsProgressForCurrentStep())}),this.importWizardController.setupInitialStep(),this.displayNext()}displayNext(){this.wizardHost.viewContainerRef.detach();const t=this.importWizardController.getCurrentStep();let i;if(t.component===iu.V7){const p=this.components.get(t);this.wizardHost.viewContainerRef.detach(),i=p??this.wizardHost.viewContainerRef.createComponent(t.component)}else i=this.wizardHost.viewContainerRef.createComponent(t.component);this.wizardHost.viewContainerRef.detach(),this.wizardHost.viewContainerRef.insert(i.hostView),i.instance.data=t.data,i.instance.importWizardController=this.importWizardController,this.title=t.stepTitle,this.components.set(t,i),this.updateProgressBar(),this.hideProgressBar=i.instance.isWarningModal||i.instance.hideProgressBar,this.warning.emit(i.instance.isWarningModal)}closeButton(){const t=this.importWizardController.getCurrentStep();t.component!==jT.l?this.importWizardController.cancel():this.components.get(t).instance.goNext()}getStepsProgressForCurrentStep(){const t=this.importWizardController.getCurrentStep();if(t.component===sg.$||t.component===iu.V7){const i=this.importWizardController.stepsCompleted.filter(C=>C.component===t.component).length,p=i+this.importWizardController.stepsAhead.filter(C=>C.component===t.component).length;return 1===p?"":"("+(i+1)+"/"+p+")"}return""}disableCloseButton(){return this.importWizardController.disableCloseButton}updateProgressBar(){this.importWizardController.stepsCompleted.length>0?1===this.importWizardController.stepsAhead.length?this.progressComplete=100:this.importWizardController.getCurrentStep().component!==ag.Gz&&(this.progressComplete=(this.importWizardController.stepsCompleted.length+1)/(this.importWizardController.stepsAhead.length+this.importWizardController.stepsCompleted.length)*100):this.progressComplete=5}ngOnDestroy(){this.importWizardController.clear(),this.components.forEach(t=>{t.destroy()}),this.components.clear(),this.moveSubscription?.unsubscribe()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(KT.o))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-import-wizard-host"]],viewQuery:function(t,i){if(1&t&&e.Gf(nd,7),2&t){let p;e.iGM(p=e.CRH())&&(i.wizardHost=p.first)}},outputs:{finish:"finish",warning:"warning"},decls:12,vars:9,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],["class","modal-progress",4,"ngIf"],["appImportStepHost",""],[1,"modal-progress"],["role","progressbar",1,"modal-progress-bar"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return i.closeButton()}),e._UZ(5,"span",3),e.TgZ(6,"span",4),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.YNc(9,ed,2,3,"div",5),e.TgZ(10,"div"),e.YNc(11,td,0,0,"ng-template",6),e.qZA()),2&t&&(e.xp6(2),e.AsE("",e.lcZ(3,5,i.title)," ",i.progressStepString,""),e.xp6(2),e.Q6J("disabled",i.disableCloseButton()),e.xp6(3),e.Oqu(e.lcZ(8,7,"Common.Close")),e.xp6(2),e.Q6J("ngIf",!i.hideProgressBar))},dependencies:[z.O5,nd,Ut.X$],encapsulation:2}),r})();function Qp(r,l){1&r&&(e._UZ(0,"app-simple-loader",16),e.ALo(1,"translate")),2&r&&e.Q6J("text",e.lcZ(1,1,"Clients.Import.Wizard.Setup.CheckImportPleaseWait"))}function $T(r,l){if(1&r&&(e.TgZ(0,"div",23)(1,"div"),e._uU(2),e.qZA()()),2&r){const t=e.oxw(3);e.xp6(2),e.Oqu(t.errorCode)}}function Vy(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",17)(2,"p"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,$T,3,1,"div",18),e.TgZ(6,"app-form-row",19)(7,"div",20)(8,"input",21,22),e.NdJ("change",function(p){e.CHM(t);const C=e.oxw(2);return e.KtG(C.handleFileInput(p.target.files))}),e.qZA()()()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,6,"Clients.Import.Wizard.Setup.Summary")),e.xp6(2),e.Q6J("ngIf",""!=t.errorCode),e.xp6(1),e.Q6J("id","fileInput")("label","Clients.Import.Wizard.Setup.ChooseFile")("help","Clients.Import.Wizard.Setup.ChooseFileHelp")("isLast",!0)}}function Hy(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"h5",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.hide())}),e.ALo(6,"translate"),e._UZ(7,"span",4),e.qZA()(),e.TgZ(8,"div",5),e._UZ(9,"div",6,7),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,Qp,2,3,"app-simple-loader",9),e.YNc(13,Vy,11,8,"div",0),e.qZA(),e._UZ(14,"div",10),e.TgZ(15,"div",11)(16,"div",12)(17,"div",13)(18,"button",14),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.startImport())}),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"button",15),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.hide())}),e._uU(22),e.ALo(23,"translate"),e.qZA()()()()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("id",t.titleId),e.xp6(1),e.Oqu(e.lcZ(4,10,"Clients.Import.Wizard.Setup.Title")),e.xp6(2),e.Q6J("disabled",t.disableButtons),e.uIk("aria-label",e.lcZ(6,12,"Common.Close")),e.xp6(7),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading),e.xp6(5),e.Q6J("disabled",t.disableButtons||null==t.fileToUpload),e.xp6(1),e.hij(" ",e.lcZ(20,14,"Common.Start")," "),e.xp6(2),e.Q6J("disabled",t.disableButtons),e.xp6(1),e.hij(" ",e.lcZ(23,16,"Common.Cancel")," ")}}function Jy(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"app-import-wizard-host",24),e.NdJ("warning",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.onWarning(p))})("finish",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.onFinish())}),e.qZA()()}}let qy=(()=>{class r{constructor(t,i,p,C){this.translate=t,this.clientImportService=i,this.importWizardService=p,this.modalService=C,this.finish=new e.vpe,this.titleId=Hl.G.TileId,this.wizardTypes=Li.Q,this.isLoading=!1,this.fileToUpload=null,this.isWarningModal=!1,this.storage=sessionStorage,this.importWizardService.resetImport.subscribe(K=>{this.reset(),null!=K&&(this.errorCode=K)})}ngOnInit(){this.reset()}onCancel(){this.hide()}onFinish(){this.finish.emit(),this.hide()}onWarning(t){this.isWarningModal=t}hide(){this.reset(),this.modalService.hide(Hl.G.Id)}handleFileInput(t){this.fileToUpload=t.item(0)}reset(){this.isLoading=!1,this.disableButtons=!1,this.showWizard=!1,this.fileToUpload=null,this.errorCode="",this.isWarningModal=!1}startImport(){null!=this.fileToUpload&&this.validateImport()}validateImport(){if(this.isLoading=!0,this.disableButtons=!0,"application/json"!==this.fileToUpload.type)return this.reset(),void(this.errorCode=this.translate.instant("Clients.Import.Wizard.Setup.Errors.InvalidFile"));this.fileToUpload.text().then(t=>{this.clientImportService.validateImportFile(t).subscribe(i=>{try{JSON.parse(t)}catch{return this.reset(),void(this.errorCode=this.translate.instant("Clients.Import.Wizard.Setup.Errors.InvalidData"))}this.storeFileInStorage(t);const p=i.importResources.map(C=>new Hp(C));this.importWizardService.cache.next(p),this.isLoading=!1,this.showWizard=!0},i=>{if(400===i.status){this.reset();const p=i.error;this.errorCode=this.translate.instant(`Errors.${p.errorCode}`),"ValidateImportError.WrongVersion"===p.errorCode&&(this.errorCode=this.errorCode.replace("{0}",p.replacementArgs[0]),this.errorCode=this.errorCode.replace("{1}",p.replacementArgs[1]))}else this.reset(),this.errorCode=this.translate.instant("Clients.Import.Wizard.Setup.Errors.Default")})})}storeFileInStorage(t){this.storage.setItem("importFile",t)}ngOnDestroy(){this.reset(),this.hide()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Ut.sK),e.Y36(og.wf),e.Y36(Jp.U),e.Y36(le.tT))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-import-wizard"]],outputs:{finish:"finish"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"modal-header"],[1,"modal-title",3,"id"],["type","button",1,"modal-close",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-times"],[1,"modal-progress"],["role","progressbar",1,"modal-progress-bar",2,"width","2%"],["progressBar",""],[1,"modal-body"],[3,"text",4,"ngIf"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","importNext",1,"tw-btn-success",3,"disabled","click"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"disabled","click"],[3,"text"],[1,"cms","tw-mb-6"],["class","tw-alert-danger tw-mb-6",4,"ngIf"],[3,"id","label","help","isLast"],[1,"tw-form-control"],["id","fileInput","type","file","name","file","accept",".json",1,"tw-form-file","tw-max-w-full",3,"change"],["fileInput","","selectedFile",""],[1,"tw-alert-danger","tw-mb-6"],[3,"warning","finish"]],template:function(t,i){1&t&&(e.YNc(0,Hy,24,18,"div",0),e.YNc(1,Jy,2,0,"div",0)),2&t&&(e.Q6J("ngIf",!i.showWizard),e.xp6(1),e.Q6J("ngIf",i.showWizard))},dependencies:[z.O5,En.w,Dn.L,qp,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();function lg(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-client-wizard",11,1),e.NdJ("finish",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.reload())}),e.qZA()}}function GT(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-import-wizard",12,2),e.NdJ("finish",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.reload())}),e.qZA()}}function Qy(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",19)(1,"label",20),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"select",21),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2);return e.KtG(C.pageSize=p)})("change",function(){e.CHM(t);const p=e.oxw(2);return e.KtG(p.setPageLength(+p.pageSize))}),e.TgZ(5,"option",22),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"option",23),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"option",24),e._uU(12),e.ALo(13,"translate"),e.qZA()()()}if(2&r){const t=e.oxw(2);e.xp6(2),e.AsE("",t.pageSize," ",e.lcZ(3,6,"Nav.PerPage"),""),e.xp6(2),e.Q6J("ngModel",t.pageSize),e.xp6(2),e.hij("25 ",e.lcZ(7,8,"Nav.PerPage"),""),e.xp6(3),e.hij("50 ",e.lcZ(10,10,"Nav.PerPage"),""),e.xp6(3),e.hij("100 ",e.lcZ(13,12,"Nav.PerPage"),"")}}function zT(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const p=e.oxw(2),C=e.MAs(5);return e.KtG(p.showWizard(C))}),e.ALo(1,"translate"),e.ALo(2,"translate"),e.TgZ(3,"span"),e._UZ(4,"span",26),e.qZA()()}2&r&&(e.Q6J("tooltip",e.lcZ(1,2,"Clients.Import.Import")),e.uIk("aria-label",e.lcZ(2,4,"Clients.Import.ImportClients")))}function cg(r,l){if(1&r&&(e.TgZ(0,"span",30),e._uU(1),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.Oqu(t.clientSelectedCount)}}function ug(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const p=e.oxw(2);return e.KtG(p.exportClients())}),e.TgZ(1,"span"),e._UZ(2,"span",28),e.YNc(3,cg,2,1,"span",29),e.qZA()()}if(2&r){const t=e.oxw(2);e.Q6J("tooltip",t.currentExportTooltip),e.uIk("aria-label",t.currentExportText),e.xp6(3),e.Q6J("ngIf",t.shouldDisplayCount)}}function Wy(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-action-bar"),e.ynx(1,13),e.YNc(2,Qy,14,14,"div",14),e.BQk(),e.ynx(3,15),e.TgZ(4,"button",16),e.NdJ("click",function(){e.CHM(t);const p=e.oxw(),C=e.MAs(3);return e.KtG(p.showWizard(C))}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,zT,5,6,"button",17),e.YNc(8,ug,4,3,"button",18),e.BQk(),e.qZA()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",(null==t.pagedResult?null:t.pagedResult.results.length)>0),e.xp6(3),e.hij(" ",e.lcZ(6,4,"Clients.Add")," "),e.xp6(2),e.Q6J("ngIf",t.canImportExport),e.xp6(1),e.Q6J("ngIf",t.canImportExport)}}function Wp(r,l){1&r&&e._UZ(0,"app-simple-loader")}function YT(r,l){1&r&&(e.TgZ(0,"div",34)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Clients.None")))}function XT(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"th",41)(1,"label",42)(2,"input",43),e.NdJ("change",function(){e.CHM(t);const p=e.oxw(3);return e.KtG(p.toggleAllClients())})("ngModelChange",function(p){e.CHM(t);const C=e.oxw(3);return e.KtG(C.allClientsSelected=p)}),e.qZA()()()}if(2&r){const t=e.oxw(3);e.xp6(2),e.Q6J("ngModel",t.allClientsSelected)}}function eA(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"label",56)(1,"input",57),e.NdJ("change",function(){e.CHM(t);const p=e.oxw(5);return e.KtG(p.areAllClientsSelected())})("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2).$implicit;return e.KtG(C.selected=p)}),e.qZA()()}if(2&r){const t=e.oxw(2).$implicit;e.s9C("for",t.id),e.xp6(1),e.s9C("id",t.id),e.Q6J("ngModel",t.selected)}}function tA(r,l){if(1&r&&(e.TgZ(0,"td",54),e.YNc(1,eA,2,3,"label",55),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!t.nonEditable)}}function nA(r,l){1&r&&(e.TgZ(0,"span",58)(1,"span",8),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Common.Disabled")))}function iA(r,l){1&r&&(e.TgZ(0,"span",59),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Disabled")," "))}function rA(r,l){1&r&&(e.TgZ(0,"span",60),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Reserved")," "))}const sA=function(r,l){return{"fad fa-pencil":r,"fas fa-eye":l}};function oA(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr",44),e.YNc(1,tA,2,1,"td",45),e.TgZ(2,"td",46),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(3);return e.KtG(K.viewOrEditClient(C))}),e.YNc(3,nA,4,3,"span",47),e.TgZ(4,"b"),e._uU(5),e.qZA()(),e.TgZ(6,"td",48),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(3);return e.KtG(K.viewOrEditClient(C))}),e._uU(7),e.qZA(),e.TgZ(8,"td",49),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(3);return e.KtG(K.viewOrEditClient(C))}),e.YNc(9,iA,3,3,"span",50),e.YNc(10,rA,3,3,"span",51),e.qZA(),e.TgZ(11,"td",49),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(3);return e.KtG(K.viewOrEditClient(C))}),e.TgZ(12,"button",52),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(3);return e.KtG(K.viewOrEditClient(C))}),e._UZ(13,"span",53),e.TgZ(14,"span",8),e._uU(15),e.ALo(16,"translate"),e.qZA()()()()}if(2&r){const t=l.$implicit,i=e.oxw(3);e.ekj("inactive",!t.enabled||(null==t?null:t.nonEditable)),e.s9C("id",t.clientName),e.xp6(1),e.Q6J("ngIf",!i.isIdentityServerManagerReadOnly),e.xp6(2),e.Q6J("ngIf",!t.enabled),e.xp6(1),e.ekj("tw-text-blue-500",!(null!=t&&t.nonEditable)),e.xp6(1),e.hij(" ",null==t?null:t.clientName," "),e.xp6(2),e.hij(" ",null==t?null:t.description," "),e.xp6(2),e.Q6J("ngIf",!t.enabled),e.xp6(1),e.Q6J("ngIf",null==t?null:t.nonEditable),e.xp6(3),e.Q6J("ngClass",e.WLB(15,sA,!i.isIdentityServerManagerReadOnly&&!t.nonEditable,i.isIdentityServerManagerReadOnly||t.nonEditable)),e.xp6(2),e.Oqu(e.lcZ(16,13,"Common.Edit"))}}function aA(r,l){if(1&r&&(e.TgZ(0,"table",35)(1,"thead")(2,"tr"),e.YNc(3,XT,3,1,"th",36),e.TgZ(4,"th",37),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th",38),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th",39)(11,"span",8),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"th",39)(15,"span",8),e._uU(16),e.ALo(17,"translate"),e.qZA()()()(),e.TgZ(18,"tbody"),e.YNc(19,oA,17,18,"tr",40),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",!t.isIdentityServerManagerReadOnly),e.xp6(2),e.Oqu(e.lcZ(6,6,"Common.Name")),e.xp6(3),e.Oqu(e.lcZ(9,8,"Common.Description")),e.xp6(4),e.Oqu(e.lcZ(13,10,"Common.Reserved")),e.xp6(4),e.Oqu(e.lcZ(17,12,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",t.allClients)}}function Tl(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-pager",61),e.NdJ("onGoToPage",function(p){e.CHM(t);const C=e.oxw(2);return e.KtG(C.goToPage(p))}),e.qZA()}if(2&r){const t=e.oxw(2);e.Q6J("totalResults",null==t.pagedResult?null:t.pagedResult.totalCount)("currentPage",t.page)("lastPage",null==t.pagedResult?null:t.pagedResult.pageCount)}}function jp(r,l){if(1&r&&(e.ynx(0),e.YNc(1,YT,4,3,"div",31),e.YNc(2,aA,20,14,"table",32),e.YNc(3,Tl,1,3,"app-pager",33),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.allClients?null:t.allClients.length)<1),e.xp6(1),e.Q6J("ngIf",(null==t.allClients?null:t.allClients.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.pagedResult?null:t.pagedResult.results.length)>0&&!t.isLoading)}}let jy=(()=>{class r extends ol.bk{constructor(t,i,p,C,K,Ce,Ue,lt,Et,Wt){super(lt,K,!0),this.router=t,this.errorService=i,this.titleService=p,this.clientsService=C,this.translate=K,this.localize=Ce,this.exportService=Ue,this.securityService=Et,this.modalService=Wt,this.pageSize=25,this.page=1,this.term="",this.isLoading=!0,this.allClients=[],this.allClientsSelected=!1,this.clientSelectedCount=0,this.currentExportText=this.translate.instant("Clients.Export.ExportAllClients"),this.currentExportTooltip=this.translate.instant("Clients.Export.ExportAll"),this.shouldDisplayCount=!1,this.canImportExport=!1,this.pageStream=new o.x,this.pageSizeStream=new o.x,this.mapSearchTerm=this.mapSearchTerm.bind(this)}reload(){this.pageStream.next(this.page),this.pageSizeStream.next(this.pageSize)}mapSearchTerm(t){return this.term=t,{searchTerm:t,page:1,pageSize:this.pageSize}}ngOnInit(){const t=this.translate.instant("Nav.Clients")+" - "+He.de.SITE_TITLE;this.isLoading=!0,this.titleService.setTitle(t),this.canImportExport=this.securityService.allView;const i=this.pageStream.pipe((0,u.U)(K=>(this.page=K,{searchTerm:this.term,page:K,pageSize:this.pageSize}))),p=this.pageSizeStream.pipe((0,u.U)(K=>(this.pageSize=K,{searchTerm:this.term,page:this.page,pageSize:K})));i.pipe((0,Da.b)(p),(0,Da.b)(this.searchSource),(0,Da.b)(this.enterKeySource),(0,F.O)({searchTerm:this.term,page:this.page,pageSize:this.pageSize}),(0,re.z)(K=>(this.isLoading=!0,this.clientsService.getClients(K.searchTerm,K.page,K.pageSize).pipe((0,Qa.g)(200))))).subscribe(K=>{this.pagedResult=K,this.allClients=this.pagedResult.results.map(Ce=>new uy(Ce)).sort((Ce,Ue)=>Number(Ue.nonEditable)-Number(Ce.nonEditable)),this.isLoading=!1},K=>{500===K.status?this.handleInternalServerError():this.errorService.handleError(K),this.isLoading=!1})}showWizard(t){this.modalService.show(t,{id:Hl.G.Id,ariaLabelledBy:Hl.G.TileId,ariaDescribedby:Hl.G.DescriptionId,backdrop:"static"})}goToPage(t){this.pageStream.next(t)}setPageLength(t){this.page=1,this.pageSizeStream.next(t)}viewOrEditClient(t){this.isIdentityServerManagerReadOnly||t.nonEditable?this.viewClient(t):this.editClient(t)}viewClient(t){const i=this.localize.translateRoute("/clients/view");this.router.navigate([i,t.id])}editClient(t){const i=this.localize.translateRoute("/clients");this.router.navigate([i,t.id])}exportClients(){if(0===this.clientSelectedCount)this.exportService.exportAllClients();else{const t=this.allClients.filter(i=>i.selected).map(i=>i.clientId);this.exportService.exportSelectedClients(t)}}areAllClientsSelected(){this.allClientsSelected=this.allClients.every(t=>t.selected||t.nonEditable),this.clientSelectedCount=this.allClients.filter(t=>t.selected&&!t.nonEditable).length,0===this.clientSelectedCount?(this.currentExportText=this.translate.instant("Clients.Export.ExportAllClients"),this.currentExportTooltip=this.translate.instant("Clients.Export.ExportAll"),this.shouldDisplayCount=!1):(this.shouldDisplayCount=this.allClients.filter(t=>!t.nonEditable).length!==this.clientSelectedCount,this.currentExportText=`${this.translate.instant("Clients.Export.ExportSelectedClients")} (${this.clientSelectedCount})`,this.currentExportTooltip=this.translate.instant("Clients.Export.ExportSelected"))}toggleAllClients(){let t=!0;this.allClients.forEach(i=>{!i.nonEditable&&!i.selected&&(t=!1)}),this.allClients.forEach(i=>{i.nonEditable||(i.selected=!t)}),this.shouldDisplayCount=!1,this.clientSelectedCount=t?0:this.allClients.filter(i=>!i.nonEditable).length,this.currentExportText=this.translate.instant("Clients.Export.ExportAllClients"),this.currentExportTooltip=this.translate.instant("Clients.Export.ExportAll"),this.allClientsSelected=!t}get isIdentityServerManagerReadOnly(){return(0,ot.gR)(this.securityService.userPermissions)}handleInternalServerError(){this.toastr.error(this.translate.instant("Clients.Filter.StoredProcedureErrorMessage"),this.translate.instant("Notifications.Error"))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.F0),e.Y36(Ee.T),e.Y36(n.Dx),e.Y36(fc.a),e.Y36(Ut.sK),e.Y36(Un.An),e.Y36(dy.T),e.Y36(si._W),e.Y36(ti.I),e.Y36(le.tT))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],features:[e.qOj],decls:19,vars:13,consts:[[3,"title"],["addClientModal",""],["importWizardModal",""],["id","clientsList",1,"tw-container","tw-mx-auto"],["id","searchContainer",1,"tw-mb-2"],[1,"tw-flex","tw-bg-white","tw-border","tw-border-grey-300","tw-opacity-75","tw-cursor-text","tw-rounded","focus-within:tw-opacity-100","focus-within:tw-border-blue-400","trans"],["for","searchUserName",1,"tw-flex","tw-items-center","tw-text-grey-500","tw-m-0","tw-ml-3"],["aria-hidden","true",1,"far","fa-search","tw-text-sm"],[1,"sr-only"],["id","searchTerm","type","search",1,"tw-bg-transparent","tw-border-0","tw-text-base","tw-leading-tight","tw-px-2","tw-py-2","tw-w-full","focus:tw-outline-none","trans",3,"ngModel","placeholder","ngModelChange","keyup"],[4,"ngIf"],["id","addClientComponent",3,"finish"],["id","importWizardModal",3,"finish"],["left",""],["class","tw-hidden tw-form-select tw-w-auto sm:tw-block",4,"ngIf"],["right",""],["id","addClientBtn",1,"tw-btn-success",3,"click"],["id","importButton","class","tw-btn-white tw-ml-3","container","body",3,"tooltip","click",4,"ngIf"],["id","exportButton","class","tw-btn-white tw-ml-3","container","body",3,"tooltip","click",4,"ngIf"],[1,"tw-hidden","tw-form-select","tw-w-auto","sm:tw-block"],["for","pageSizeToggle",1,"sr-only"],["id","pageSizeToggle",1,"tw-form-control","tw-form-control-small",3,"ngModel","ngModelChange","change"],["value","25"],["value","50"],["value","100"],["id","importButton","container","body",1,"tw-btn-white","tw-ml-3",3,"tooltip","click"],["aria-hidden","true",1,"fad","fa-arrow-from-bottom"],["id","exportButton","container","body",1,"tw-btn-white","tw-ml-3",3,"tooltip","click"],["aria-hidden","true",1,"fad","fa-arrow-to-bottom"],["class","ml-2",4,"ngIf"],[1,"ml-2"],["id","clientsNone","class","tw-alert","role","alert",4,"ngIf"],["id","clientsTable","class","datatable selectable hover",4,"ngIf"],[3,"totalResults","currentPage","lastPage","onGoToPage",4,"ngIf"],["id","clientsNone","role","alert",1,"tw-alert"],["id","clientsTable",1,"datatable","selectable","hover"],["class","toggle tw-w-1",4,"ngIf"],[1,"lg:tw-w-1/3"],[1,"tw-hidden","lg:tw-table-cell"],[1,"tw-w-1"],["class","group",3,"id","inactive",4,"ngFor","ngForOf"],[1,"toggle","tw-w-1"],["for","toggleAllClients",1,"toggle-label"],["id","toggleAllClients","type","checkbox",1,"tw-block","tw-cursor-pointer",3,"ngModel","change","ngModelChange"],[1,"group",3,"id"],["class","toggle",4,"ngIf"],[1,"tw-max-w-0","tw-truncate",3,"click"],["class","fas fa-exclamation-triangle tw-text-orange-500 tw-mr-1","container","body",4,"ngIf"],[1,"tw-hidden","tw-max-w-0","tw-truncate","lg:tw-table-cell",3,"click"],[3,"click"],["class","tw-pill-warning",4,"ngIf"],["class","tw-pill",4,"ngIf"],["type","button",1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500",3,"click"],["id","viewOrEditIcon","aria-hidden","true",3,"ngClass"],[1,"toggle"],["class","toggle-label",3,"for",4,"ngIf"],[1,"toggle-label",3,"for"],["type","checkbox",1,"tw-block","tw-cursor-pointer",3,"id","ngModel","change","ngModelChange"],["container","body",1,"fas","fa-exclamation-triangle","tw-text-orange-500","tw-mr-1"],[1,"tw-pill-warning"],[1,"tw-pill"],[3,"totalResults","currentPage","lastPage","onGoToPage"]],template:function(t,i){1&t&&(e._UZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.YNc(2,lg,2,0,"ng-template",null,1,e.W1O),e.YNc(4,GT,2,0,"ng-template",null,2,e.W1O),e.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"label",6),e._UZ(10,"span",7),e.TgZ(11,"span",8),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"input",9),e.NdJ("ngModelChange",function(C){return i.searchTerm=C})("keyup",function(C){return i.search(C)}),e.ALo(15,"translate"),e.qZA()()(),e.YNc(16,Wy,9,6,"app-action-bar",10),e.YNc(17,Wp,1,0,"app-simple-loader",10),e.YNc(18,jp,4,3,"ng-container",10),e.qZA()),2&t&&(e.Q6J("title",e.lcZ(1,7,"Nav.Clients")),e.xp6(12),e.Oqu(e.lcZ(13,9,"Common.Search")),e.xp6(2),e.s9C("placeholder",e.lcZ(15,11,"Clients.SearchPlaceholder")),e.Q6J("ngModel",i.searchTerm),e.xp6(2),e.Q6J("ngIf",!i.isLoading&&!i.isIdentityServerManagerReadOnly),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isLoading))},dependencies:[z.mk,z.sg,z.O5,h.YN,h.Kr,h.Fj,h.Wl,h.EJ,h.JJ,h.On,Ks.i9,dt.G,wt.P,kt.K,En.w,Oa,qy,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var Wl=m(262),Do=m(9470),go=m(6349),ka=(()=>{return(r=ka||(ka={})).Client="Client",r.WsFed="WsFed",r.Saml="Saml",ka;var r})(),Vs=m(4608),Ra=m(5150),Al=m(9536),id=m(1339),Ky=m(3499);const dg=["cloneClientModal"],$y=["addClaimTypeModal"];function Gy(r,l){if(1&r&&(e.TgZ(0,"div",25)(1,"div"),e._uU(2),e.qZA()()),2&r){const t=e.oxw();e.xp6(2),e.Oqu(t.errorCode)}}function rd(r,l){if(1&r&&(e.TgZ(0,"app-form-row",16)(1,"app-form-toggle",26),e._UZ(2,"input",27),e.qZA()()),2&r){const t=e.oxw();e.Q6J("id","cloneSecrets")("label","Clients.Clone.CloneSecrets")("help","Clients.Clone.CloneSecretsDescription")("isLast",t.clientType!==t.clientTypes.Saml),e.xp6(1),e.Q6J("id","cloneSecrets")}}function _c(r,l){1&r&&(e.TgZ(0,"app-form-row",16)(1,"app-form-toggle",26),e._UZ(2,"input",28),e.qZA()()),2&r&&(e.Q6J("id","cloneCerts")("label","Clients.Clone.CloneCerts")("help","Clients.Clone.CloneCertsDescription")("isLast",!0),e.xp6(1),e.Q6J("id","cloneSecrets"))}const Kp=function(){return{backdrop:"static",keyboard:"false"}};let vc=(()=>{class r{constructor(t,i,p,C,K){this.clientsService=t,this.fb=i,this.localize=p,this.router=C,this.translate=K,this.clientTypeKey=Jl.Default,this.clientTypes=fr.B,this.errorCode=""}ngOnInit(){this.newClientForm=this.fb.group({clientId:["",h.kI.required],clientName:["",h.kI.required],cloneSecrets:[!1],cloneCerts:[!1]}),this.clientType===this.clientTypes.Saml?this.clientTypeKey=Jl.Saml:this.clientType===this.clientTypes.WsFed&&(this.clientTypeKey=Jl.WsFed)}cloneClient(){const t=this.newClientForm.getRawValue();this.clientsService.cloneClient(this.client.id,t).subscribe(i=>{const p=i.headers.get("location");if(p){this.clearForm();const C=p.lastIndexOf("/"),K=p.substring(C+1),Ce=[this.localize.translateRoute("/clients"),K];this.router.navigate(Ce)}},i=>{this.errorCode=this.translate.instant(400===i.status?`Errors.CloneClientError.${i.error.errorCode}`:"Errors.CloneClientError.Default")})}show(){this.cloneClientModal.show(),this.setupForm()}setupForm(){const t=this.translate.instant("Clients.Clone.CopyOf").replace("{0}",this.client.clientName);this.newClientForm.patchValue({clientId:(0,ot.qs)(),clientName:t,cloneSecrets:!1,cloneCerts:!1})}clearForm(){this.cloneClientModal.hide(),this.errorCode="",this.newClientForm.reset()}setRandomID(){this.newClientForm.patchValue({clientId:(0,ot.qs)()})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(fc.a),e.Y36(h.QS),e.Y36(Un.An),e.Y36(yn.F0),e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-clone-client"]],viewQuery:function(t,i){if(1&t&&(e.Gf(dg,7),e.Gf($y,7)),2&t){let p;e.iGM(p=e.CRH())&&(i.cloneClientModal=p.first),e.iGM(p=e.CRH())&&(i.addClaimTypeModal=p.first)}},inputs:{client:"client",clientType:"clientType"},decls:38,vars:31,consts:[["bsModal","","id","cloneClientModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["cloneClientModal","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","scrollbars",3,"formGroup"],["class","tw-alert-danger tw-mb-6",4,"ngIf"],[3,"id","label","help"],[1,"tw-flex","tw-w-full","lg:tw-max-w-2xl"],["type","text","name","ClientId","id","cloneClientId","formControlName","clientId",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0"],[1,"tw-btn","tw-rounded-l-none",3,"click"],["aria-hidden","true",1,"far","fa-random"],[3,"id","label","help","isLast"],["id","cloneClientName","type","text","name","DisplayName","formControlName","clientName",1,"tw-form-control"],[3,"id","label","help","isLast",4,"ngIf"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","confirmCloneBtn",1,"tw-btn-success",3,"disabled","click"],["id","closeCloneModal",1,"tw-btn-link","tw--mr-4",3,"click"],[1,"tw-alert-danger","tw-mb-6"],[3,"id"],["id","cloneSecrets","type","checkbox","name","cloneSecrets","formControlName","cloneSecrets",1,"tw-form-switch__input"],["id","cloneCerts","type","checkbox","name","cloneCerts","formControlName","cloneCerts",1,"tw-form-switch__input"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.clearForm()}),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",9),e.YNc(14,Gy,3,1,"div",10),e.TgZ(15,"app-form-row",11),e.ALo(16,"keyToString"),e.TgZ(17,"div",12),e._UZ(18,"input",13),e.TgZ(19,"button",14),e.NdJ("click",function(){return i.setRandomID()}),e._UZ(20,"span",15),e.TgZ(21,"span",8),e._uU(22),e.ALo(23,"translate"),e.qZA()()()(),e.TgZ(24,"app-form-row",16),e._UZ(25,"input",17),e.qZA(),e.YNc(26,rd,3,5,"app-form-row",18),e.YNc(27,_c,3,5,"app-form-row",18),e.qZA(),e._UZ(28,"div",19),e.TgZ(29,"div",20)(30,"div",21)(31,"div",22)(32,"button",23),e.NdJ("click",function(){return i.cloneClient()}),e._uU(33),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"button",24),e.NdJ("click",function(){return i.clearForm()}),e._uU(36),e.ALo(37,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("config",e.DdM(30,Kp)),e.xp6(6),e.Oqu(e.lcZ(7,18,"Clients.Clone.Title")),e.xp6(5),e.Oqu(e.lcZ(12,20,"Common.Close")),e.xp6(2),e.Q6J("formGroup",i.newClientForm),e.xp6(1),e.Q6J("ngIf",""!=i.errorCode),e.xp6(1),e.Q6J("id","cloneClientId")("label",e.lcZ(16,22,i.clientTypeKey))("help","Clients.IDHelp"),e.xp6(7),e.Oqu(e.lcZ(23,24,"Common.GenerateRandom")),e.xp6(2),e.Q6J("id","cloneClientName")("label","Common.DisplayName")("help","Clients.DisplayNameHelp")("isLast",0===i.client.clientSecrets.length&&i.clientType!==i.clientTypes.Saml),e.xp6(2),e.Q6J("ngIf",0!==i.client.clientSecrets.length),e.xp6(1),e.Q6J("ngIf",i.clientType===i.clientTypes.Saml),e.xp6(5),e.Q6J("disabled",!i.newClientForm.valid),e.xp6(1),e.hij(" ",e.lcZ(34,26,"Common.Save")," "),e.xp6(3),e.Oqu(e.lcZ(37,28,"Common.Cancel")))},dependencies:[z.O5,h.Fj,h.Wl,h.JJ,h.JL,h.sg,h.u,le.oB,Dn.L,ds.O,Op.r,Ut.X$],encapsulation:2}),r})();function $p(r,l){1&r&&e._UZ(0,"app-custom-tab",2),2&r&&e.Q6J("tabTitle","Nav.Saml")("tabValue","saml")}function sd(r,l){1&r&&e._UZ(0,"app-custom-tab",2),2&r&&e.Q6J("tabTitle","Clients.RelyingParty.Heading")("tabValue","wsfed")}function pg(r,l){1&r&&e._UZ(0,"app-custom-tab",2),2&r&&e.Q6J("tabTitle","Clients.URLS.Title")("tabValue","applicationurls")}function hg(r,l){1&r&&e._UZ(0,"app-custom-tab",2),2&r&&e.Q6J("tabTitle","Common.Secrets")("tabValue","secrets")}function Gp(r,l){1&r&&e._UZ(0,"app-custom-tab",2),2&r&&e.Q6J("tabTitle","Common.CIBA")("tabValue","ciba")}const zp=function(r,l){return{title:r,link:l}},fg=function(r){return[r]},Yp=function(){return{backdrop:"static",keyboard:"false"}};let zy=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt,Et,Wt,an,mn,Mn,vn,Bn){this.clientsService=t,this.clientCachingService=i,this.relyingPartyCachingService=p,this.serviceProviderCachingService=C,this.samlClientService=K,this.wsFedClientService=Ce,this.clientViewService=Ue,this.titleService=lt,this.translate=Et,this.errorService=Wt,this.router=an,this.route=mn,this.toastr=Mn,this.localize=vn,this.dialogService=Bn}ngOnInit(){this.clientSubscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=t;const i=this.translate.instant("Clients.Title")+" "+this.client.clientName+" - "+He.de.SITE_TITLE;this.titleService.setTitle(i),this.checkSubmitEnabled()}),this.relyingPartyCachingService.unsavedCache$.subscribe(t=>{this.checkSubmitEnabled()}),this.serviceProviderCachingService.unsavedCache$.subscribe(t=>{this.checkSubmitEnabled()})}checkSubmitEnabled(){const t=[...Array.from(this.clientCachingService.componentDirtyValidMap.values()),...Array.from(this.relyingPartyCachingService.componentDirtyValidMap.values()),...Array.from(this.serviceProviderCachingService.componentDirtyValidMap.values())];this.submitDisabled=0===t.length||t.some(i=>!i.isValid)}ngOnDestroy(){this.clientSubscription.unsubscribe()}deleteClient(t){this.clientsService.deleteClient(t).subscribe(i=>{const p=this.localize.translateRoute("/clients");this.router.navigate([p]),this.toastr.success(this.client.clientName+" "+this.translate.instant("Common.Delete.Deleted"),this.translate.instant("Clients.Deleted"))},i=>{const p={toastBody:this.translate.instant("Notifications.Delete Error Title"),toastTitle:this.translate.instant("Notifications.Delete User Message")};(this.errorService.handleError(i,p)&oo.s.Toast)!==oo.s.Toast&&this.toastr.error(p.toastBody,p.toastTitle)})}saveClient(){const t=this.buildStreamArray();(0,Xs.D)(t).subscribe(i=>{i.some(C=>C instanceof S.UA)?this.handleError(i):this.handleSave(i),this.checkSubmitEnabled()},i=>{this.errorService.handleError(i)})}buildStreamArray(){const t=[];return this.clientCachingService.componentDirtyValidMap.size>0&&t.push(this.clientsService.updateClient(this.client).pipe((0,u.U)(()=>ka.Client),(0,Wl.K)(i=>(0,Wa.of)(i)))),this.client.clientType===fr.B.WsFed&&this.relyingPartyCachingService.componentDirtyValidMap.size>0?this.relyingPartyCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(i=>{const p=JSON.parse(JSON.stringify(i));p.claimMappings=(0,ot.GA)(i.claimMappings),t.push(this.wsFedClientService.updateRelyingParty(this.client.id,p).pipe((0,u.U)(()=>ka.WsFed),(0,Wl.K)(C=>(0,Wa.of)(C))))}):this.client.clientType===fr.B.Saml&&this.serviceProviderCachingService.componentDirtyValidMap.size>0&&this.serviceProviderCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(i=>{const p=JSON.parse(JSON.stringify(i));p.claimMappings=(0,ot.GA)(i.claimMappings),t.push(this.samlClientService.updateServiceProvider(this.client.id,p).pipe((0,u.U)(()=>ka.Saml),(0,Wl.K)(C=>(0,Wa.of)(C))))}),t}handleSave(t){t.forEach(i=>{switch(i){case ka.WsFed:this.relyingPartyCachingService.onSave();break;case ka.Saml:this.serviceProviderCachingService.onClientSave();break;case ka.Client:this.clientCachingService.onClientSave()}}),this.toastr.success(this.translate.instant("Clients.UpdatedClient"),this.translate.instant("Notifications.Saving Success Title"))}handleError(t){const i=t.filter(p=>p instanceof S.UA);i.length===t.length?this.errorService.handleError(i[0]):400===i[0].status?(this.toastr.warning(this.translate.instant("Only some parts updated"),this.translate.instant("Partial Update Warning")),this.handleSave(go.e5(t,i))):this.errorService.handleError(i[0])}canDeactivate(){return!(this.clientCachingService.componentDirtyValidMap.size>0||this.relyingPartyCachingService.componentDirtyValidMap.size>0||this.serviceProviderCachingService.componentDirtyValidMap.size>0)||(this.dialogService.confirm(),this.dialogService.eventStream.subscribe(t=>{t&&(this.clientCachingService.componentDirtyValidMap.size>0&&this.clientCachingService.componentDirtyValidMap.clear(),this.relyingPartyCachingService.componentDirtyValidMap.size>0&&this.relyingPartyCachingService.componentDirtyValidMap.clear(),this.serviceProviderCachingService.componentDirtyValidMap.size>0&&this.serviceProviderCachingService.componentDirtyValidMap.clear())}),this.dialogService.eventStream)}isCloneDisabled(){return this.clientCachingService.componentDirtyValidMap.size>0||this.relyingPartyCachingService.componentDirtyValidMap.size>0||this.serviceProviderCachingService.componentDirtyValidMap.size>0}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(fc.a),e.Y36(Vs.Z),e.Y36(Ra.N),e.Y36(Al.S),e.Y36(id.G),e.Y36(Ky.K),e.Y36(Do.a),e.Y36(n.Dx),e.Y36(Ut.sK),e.Y36(Ee.T),e.Y36(yn.F0),e.Y36(yn.gz),e.Y36(si._W),e.Y36(Un.An),e.Y36(ja.x))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-client"]],features:[e._Bn([Do.a])],decls:63,vars:60,consts:[[3,"title","crumbs","hasButton","hasTabs"],["tabs",""],[3,"tabTitle","tabValue"],[3,"tabTitle","tabValue",4,"ngIf"],["id","editClient",1,"tw-container","tw-mx-auto"],["id","submitBtn",1,"tw-btn-success","tw-mr-3","tw-mb-3",3,"disabled","click"],["id","cloneBtn","type","button","data-toggle","modal",1,"tw-hidden","tw-btn","tw-mr-3","tw-mb-3","xs:tw-inline-flex",3,"disabled","click"],["right",""],["type","button","data-toggle","modal","data-target","#deleteClientModal",1,"tw-btn-danger","tw-mb-3"],[3,"client","clientType"],["cloneClientModal",""],["bsModal","","id","deleteClientModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-center","scrollbars"],[1,"tw-mb-4"],[1,"tw-pill-danger",3,"innerHTML"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["data-dismiss","modal",1,"tw-btn-danger",3,"click"],["data-dismiss","modal",1,"tw-btn-link","tw--mr-4"]],template:function(t,i){if(1&t){const p=e.EpF();e.TgZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.ALo(2,"localize"),e.ynx(3,1),e.TgZ(4,"app-custom-tabs"),e._UZ(5,"app-custom-tab",2),e.YNc(6,$p,1,2,"app-custom-tab",3),e.YNc(7,sd,1,2,"app-custom-tab",3),e.YNc(8,pg,1,2,"app-custom-tab",3),e.YNc(9,hg,1,2,"app-custom-tab",3),e._UZ(10,"app-custom-tab",2),e.YNc(11,Gp,1,2,"app-custom-tab",3),e._UZ(12,"app-custom-tab",2)(13,"app-custom-tab",2),e.qZA(),e.BQk(),e.qZA(),e.TgZ(14,"div",4),e._UZ(15,"router-outlet"),e.qZA(),e.TgZ(16,"app-button-bar")(17,"button",5),e.NdJ("click",function(){return i.saveClient()}),e.TgZ(18,"span"),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"button",6),e.NdJ("click",function(){e.CHM(p);const K=e.MAs(30);return e.KtG(K.show())}),e.TgZ(22,"span"),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.ynx(25,7),e.TgZ(26,"button",8),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.BQk(),e.qZA(),e._UZ(29,"app-clone-client",9,10),e.TgZ(31,"div",11)(32,"div",12)(33,"div",13)(34,"div",14)(35,"h5",15),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"button",16),e._UZ(39,"span",17),e.TgZ(40,"span",18),e._uU(41),e.ALo(42,"translate"),e.qZA()()(),e.TgZ(43,"div",19)(44,"p",20),e._uU(45),e.ALo(46,"translate"),e.TgZ(47,"strong"),e._uU(48),e.qZA(),e._uU(49,"?"),e.qZA(),e._UZ(50,"p",21),e.ALo(51,"translate"),e.qZA(),e._UZ(52,"div",22),e.TgZ(53,"div",23)(54,"div",24)(55,"div",25)(56,"button",26),e.NdJ("click",function(){return i.deleteClient(i.client.id)}),e._uU(57),e.ALo(58,"translate"),e.qZA()(),e.TgZ(59,"button",27),e._uU(60),e.ALo(61,"translate"),e.qZA()()()()()(),e._UZ(62,"app-can-deactivate")}2&t&&(e.Q6J("title",i.client.clientName)("crumbs",e.VKq(57,fg,e.WLB(54,zp,e.lcZ(1,32,"Nav.Clients"),e.lcZ(2,34,"/clients"))))("hasButton",!0)("hasTabs",!0),e.xp6(5),e.Q6J("tabTitle","Nav.Details")("tabValue","details"),e.xp6(1),e.Q6J("ngIf",i.clientViewService.saml.display),e.xp6(1),e.Q6J("ngIf",i.clientViewService.wsFed.display),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.display),e.xp6(1),e.Q6J("ngIf",i.clientViewService.secrets.display),e.xp6(1),e.Q6J("tabTitle","Nav.Resources")("tabValue","resources"),e.xp6(1),e.Q6J("ngIf",i.clientViewService.ciba.display),e.xp6(1),e.Q6J("tabTitle","Common.Advanced")("tabValue","advanced"),e.xp6(1),e.Q6J("tabTitle","Nav.Audits")("tabValue","clientaudits"),e.xp6(4),e.Q6J("disabled",i.submitDisabled),e.xp6(2),e.Oqu(e.lcZ(20,36,"Common.SaveAll")),e.xp6(2),e.Q6J("disabled",i.isCloneDisabled()),e.xp6(2),e.Oqu(e.lcZ(24,38,"Clients.Clone.Label")),e.xp6(4),e.Oqu(e.lcZ(28,40,"Common.Delete.Title")),e.xp6(2),e.Q6J("client",i.client)("clientType",i.client.clientType),e.xp6(2),e.Q6J("config",e.DdM(59,Yp)),e.xp6(5),e.Oqu(e.lcZ(37,42,"Common.Delete.Confirm")),e.xp6(5),e.Oqu(e.lcZ(42,44,"Common.Close")),e.xp6(4),e.hij("",e.lcZ(46,46,"Common.Delete.AreYouSureSimple")," "),e.xp6(3),e.Oqu(i.client.clientName),e.xp6(2),e.Q6J("innerHTML",e.lcZ(51,48,"Common.Delete.Warning"),e.oJD),e.xp6(7),e.hij(" ",e.lcZ(58,50,"Common.Delete.Title")," "),e.xp6(3),e.Oqu(e.lcZ(61,52,"Common.Delete.No")))},dependencies:[z.O5,yn.lC,yl.v,Ea.x,le.oB,Ia.J,dt.G,pa.N,vc,Ut.X$,Un.lO],encapsulation:2}),r})();var mg=m(9327);const gg=["IdentityResourcePicker"],Yy=["tabs"],_g=["addIdentityResourceModal"];function vg(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Resources.EnterBasicDetails")))}function Xy(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Resources.AssignClaims")))}function ta(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.nextTab())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("disabled",t.identityResourceForm.invalid),e.xp6(1),e.Oqu(e.lcZ(2,2,"Common.Next"))}}function yg(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.submit())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("disabled",0==t.assignedClaims.length),e.xp6(1),e.Oqu(e.lcZ(2,2,"Common.Save"))}}const eC=function(){return{animated:!1,backdrop:"static"}};let lA=(()=>{class r{constructor(t,i,p,C,K,Ce){this.claimTypesService=t,this.errorService=i,this.identityResourceService=p,this.translate=C,this.fb=K,this.toastr=Ce,this.allAvailableClaims=[],this.availableClaims=[],this.assignedClaims=[],this.tabIndex=0,this.progressPercent=0,this.descFocus=!1,this.onSubmit=new e.vpe}keydown(t){"Enter"===t.key&&this.identityResourceForm.valid&&this.tabComponent.tabs[0].active&&!this.descFocus&&this.nextTab()}ngOnInit(){this.updateProgress(),this.claimTypesService.getClaimTypes(null,null,!0).subscribe({next:t=>{this.availableClaims=t,this.allAvailableClaims=t},error:t=>{this.errorService.handleError(t)}}),this.identityResourceForm=this.fb.group({name:["",h.kI.required],displayName:["",h.kI.required],description:["",h.kI.maxLength(1e3)]})}ngAfterViewInit(){this.resourcesPicker.assignedStream.subscribe(t=>{this.availableClaims=(0,ot.mn)(this.availableClaims.slice(),t);const i=this.assignedClaims.slice();this.assignedClaims=i.concat(t),this.resourcesPicker.availableCount=0}),this.resourcesPicker.unAssignedStream.subscribe(t=>{const i=this.availableClaims;this.assignedClaims=(0,ot.mn)(this.assignedClaims.slice(),t),this.availableClaims=i.concat(t),this.resourcesPicker.assignedCount=0})}previousTab(){this.tabComponent.tabs[--this.tabIndex].active=!0,this.updateProgress()}nextTab(){this.tabComponent.tabs[++this.tabIndex].active=!0,this.updateProgress()}updateProgress(){this.progressPercent=(this.tabIndex+1)/this.tabComponent.tabs.length*100}cancel(){this.resetWizard(),this.hide()}submit(){const t=(0,go.UI)(this.assignedClaims,function(p){return p.name}),i=Object.assign(this.identityResourceForm.value,{allowedClaims:t});this.identityResourceService.addResource(i).subscribe(p=>{this.toastr.success(this.translate.instant("Resources.ResourceAddedSuccess"),this.translate.instant("Notifications.Saving Success Title")),this.resetWizard(),this.hide(),this.onSubmit.emit()},p=>{let C;p.error.errors.length>0&&(C=p.error.errors[0]),this.toastr.error(C,this.translate.instant("Common.Error"))})}resetWizard(){this.identityResourceForm.reset(),this.tabComponent.tabs[0].active=!0,this.tabIndex=0,this.assignedClaims=[],this.availableClaims=this.allAvailableClaims}hide(){this.addIdentityResourceModal.hide()}show(){this.addIdentityResourceModal.show()}ngOnDestroy(){this.hide()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(so.M),e.Y36(Ee.T),e.Y36(Ma.Q),e.Y36(Ut.sK),e.Y36(h.QS),e.Y36(si._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-identityresource"]],viewQuery:function(t,i){if(1&t&&(e.Gf(gg,7),e.Gf(Yy,7),e.Gf(_g,7)),2&t){let p;e.iGM(p=e.CRH())&&(i.resourcesPicker=p.first),e.iGM(p=e.CRH())&&(i.tabComponent=p.first),e.iGM(p=e.CRH())&&(i.addIdentityResourceModal=p.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown",function(C){return i.keydown(C)},!1,e.evT)},outputs:{onSubmit:"onSubmit"},decls:47,vars:36,consts:[["bsModal","","id","addIdentityModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["addIdentityResourceModal","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-progress"],["role","progressbar",1,"modal-progress-bar"],["progressBar",""],[1,"modal-body","scrollbars"],[1,"cms"],[4,"ngIf"],[1,"hide-tabs"],["tabs",""],[3,"formGroup"],[3,"id","label","help"],["name","idInput","id","idInput","formControlName","name","maxlength","200",1,"tw-form-control"],["name","displayNameInput","id","displayNameInput","type","text","formControlName","displayName","maxlength","200",1,"tw-form-control"],[3,"id","label","help","isLast"],["name","descriptionInput","id","descriptionInput","type","text","formControlName","description","maxlength","1000",1,"tw-form-control",3,"focus","blur"],[3,"assignedInput","availableInput","availableSearch"],["IdentityResourcePicker",""],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["class","tw-btn-success tw-mr-3","id","nextBtn",3,"disabled","click",4,"ngIf"],["class","tw-btn-success tw-mr-3","id","submitBtn",3,"disabled","click",4,"ngIf"],["id","backBtn",1,"tw-btn",3,"disabled","click"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],["id","nextBtn",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],["id","submitBtn",1,"tw-btn-success","tw-mr-3",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.hide()}),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10,11)(16,"span",8),e._uU(17),e.qZA()()(),e.TgZ(18,"div",12)(19,"div",13),e.YNc(20,vg,3,3,"p",14),e.YNc(21,Xy,3,3,"p",14),e.qZA(),e.TgZ(22,"tabset",15,16)(24,"tab")(25,"form",17)(26,"app-form-row",18),e._UZ(27,"input",19),e.qZA(),e.TgZ(28,"app-form-row",18),e._UZ(29,"input",20),e.qZA(),e.TgZ(30,"app-form-row",21)(31,"textarea",22),e.NdJ("focus",function(){return i.descFocus=!i.descFocus})("blur",function(){return i.descFocus=!i.descFocus}),e.qZA()()()(),e.TgZ(32,"tab"),e._UZ(33,"app-common-picker",23,24),e.qZA()()(),e._UZ(35,"div",25),e.TgZ(36,"div",26)(37,"div",27)(38,"div",28),e.YNc(39,ta,3,4,"button",29),e.YNc(40,yg,3,4,"button",30),e.TgZ(41,"button",31),e.NdJ("click",function(){return i.previousTab()}),e._uU(42),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"button",32),e.NdJ("click",function(){return i.cancel()}),e._uU(45),e.ALo(46,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("config",e.DdM(35,eC)),e.xp6(6),e.Oqu(e.lcZ(7,27,"IdentityResources.Create")),e.xp6(5),e.Oqu(e.lcZ(12,29,"Common.Close")),e.xp6(3),e.Udp("width",i.progressPercent+"%"),e.xp6(3),e.Oqu(i.progressPercent+"%"),e.xp6(3),e.Q6J("ngIf",i.tabComponent.tabs[0].active),e.xp6(1),e.Q6J("ngIf",i.tabComponent.tabs[1].active),e.xp6(4),e.Q6J("formGroup",i.identityResourceForm),e.xp6(1),e.Q6J("id","idInput")("label","Common.ID")("help","IdentityResources.IDHelp"),e.xp6(2),e.Q6J("id","displayNameInput")("label","Common.DisplayName")("help","IdentityResources.DisplayNameHelp"),e.xp6(2),e.Q6J("id","descriptionInput")("label","Common.Description")("help","Resources.DescriptionHelp")("isLast",!0),e.xp6(3),e.Q6J("assignedInput",i.assignedClaims)("availableInput",i.availableClaims)("availableSearch",!0),e.xp6(6),e.Q6J("ngIf",i.tabIndex<i.tabComponent.tabs.length-1),e.xp6(1),e.Q6J("ngIf",i.tabIndex==i.tabComponent.tabs.length-1),e.xp6(1),e.Q6J("disabled",0==i.tabIndex),e.xp6(1),e.Oqu(e.lcZ(43,31,"Common.Back")),e.xp6(3),e.Oqu(e.lcZ(46,33,"Common.Cancel")))},dependencies:[z.O5,h._Y,h.Fj,h.JJ,h.JL,h.nD,h.sg,h.u,Ms.wW,Ms.AH,Bo,le.oB,Dn.L,Ut.X$],encapsulation:2}),r})();function tC(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-action-bar"),e.ynx(1,9),e.TgZ(2,"button",10),e.NdJ("click",function(){e.CHM(t),e.oxw();const p=e.MAs(3);return e.KtG(p.show())}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.BQk(),e.qZA()}2&r&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"Resources.AddResource")," "))}function Xp(r,l){1&r&&e._UZ(0,"app-simple-loader")}function Cg(r,l){1&r&&(e.TgZ(0,"div",11)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"IdentityResources.NoIdentityResources")))}function nC(r,l){1&r&&(e.TgZ(0,"span",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Reserved")," "))}const iC=function(r,l){return{"fad fa-pencil":r,"fas fa-eye":l}};function rC(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr",20)(1,"td",21),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditResource(C))}),e.TgZ(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"td",22),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditResource(C))}),e._uU(5),e.qZA(),e.TgZ(6,"td",23),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditResource(C))}),e._uU(7),e.qZA(),e.TgZ(8,"td",24),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditResource(C))}),e.YNc(9,nC,3,3,"span",25),e.qZA(),e.TgZ(10,"td",24),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditResource(C))}),e.TgZ(11,"button",26),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditResource(C))}),e._UZ(12,"span",27),e.TgZ(13,"span",17),e._uU(14),e.ALo(15,"translate"),e.qZA()()()()}if(2&r){const t=l.$implicit,i=e.oxw(2);e.ekj("inactive",!t.enabled||(null==t?null:t.nonEditable)),e.xp6(2),e.ekj("tw-text-blue-500",!t.nonEditable),e.xp6(1),e.Oqu(t.displayName),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.description," "),e.xp6(2),e.Q6J("ngIf",t.nonEditable),e.xp6(3),e.Q6J("ngClass",e.WLB(12,iC,!i.isIdentityServerManagerReadOnly&&!t.nonEditable,i.isIdentityServerManagerReadOnly||t.nonEditable)),e.xp6(2),e.Oqu(e.lcZ(15,10,"Common.Edit"))}}function bg(r,l){if(1&r&&(e.TgZ(0,"table",12)(1,"thead")(2,"tr")(3,"th",13),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",14),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",15),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",16)(13,"span",17),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"th",16)(17,"span",17),e._uU(18),e.ALo(19,"translate"),e.qZA()()()(),e.TgZ(20,"tbody",18),e.YNc(21,rC,16,15,"tr",19),e.qZA()()),2&r){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,6,"Common.Name")),e.xp6(3),e.Oqu(e.lcZ(8,8,"Common.ID")),e.xp6(3),e.Oqu(e.lcZ(11,10,"Common.Description")),e.xp6(4),e.Oqu(e.lcZ(15,12,"Common.Reserved")),e.xp6(4),e.Oqu(e.lcZ(19,14,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",t.resources)}}function sC(r,l){if(1&r&&e._UZ(0,"app-pager",29),2&r){const t=e.oxw();e.Q6J("totalResults",null==t.resources?null:t.resources.length)}}let wg=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue){this.identityResourceService=t,this.translate=i,this.router=p,this.errorService=C,this.localize=K,this.titleService=Ce,this.securityService=Ue,this.term="",this.resources=[],this.isLoading=!0,this.searchTermStream=new o.x}ngOnInit(){this.titleService.setTitle(this.translate.instant("Nav.IdentityResources")+` - ${He.de.SITE_TITLE}`),this.searchTermStream.pipe((0,_.b)(300),(0,T.x)(),(0,u.U)(p=>(this.term=p,{search:p}))).pipe((0,F.O)({search:this.term}),(0,re.z)(p=>this.identityResourceService.getIdentityResources(p.search))).subscribe(p=>{this.sortResources(p),this.isLoading=!1},p=>{this.errorService.handleError(p),this.isLoading=!1})}sortResources(t){t.sort((i,p)=>Number(p.nonEditable)-Number(i.nonEditable)),this.resources=t}search(t){this.searchTermStream.next(t)}viewOrEditResource(t){this.isIdentityServerManagerReadOnly||t.nonEditable?this.viewResource(t):this.editResource(t)}viewResource(t){const i=this.localize.translateRoute("/identityresources/view");this.router.navigate([i,t.id])}editResource(t){const i=this.localize.translateRoute("/identityresources");this.router.navigate([i,t.id])}refreshList(){this.ngOnInit()}get isIdentityServerManagerReadOnly(){return(0,ot.gR)(this.securityService.userPermissions)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Ma.Q),e.Y36(Ut.sK),e.Y36(yn.F0),e.Y36(Ee.T),e.Y36(Un.An),e.Y36(n.Dx),e.Y36(ti.I))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:12,vars:11,consts:[[3,"title"],[3,"onSubmit"],["addIdentityResourcesModal",""],["id","identityResourceList",1,"tw-container","tw-mx-auto"],[3,"placeholder","onSearch"],[4,"ngIf"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable selectable hover",4,"ngIf"],["hidePager","true",3,"totalResults",4,"ngIf"],["right",""],[1,"tw-btn-success",3,"click"],["role","alert",1,"tw-alert"],[1,"datatable","selectable","hover"],[1,"md:tw-1/4"],[1,"tw-hidden","tw-w-1/4","md:tw-table-cell"],[1,"tw-hidden","lg:tw-table-cell"],[1,"tw-w-1"],[1,"sr-only"],["id","resourceTable"],["class","group",3,"inactive",4,"ngFor","ngForOf"],[1,"group"],[1,"tw-max-w-0","tw-truncate",3,"click"],[1,"tw-hidden","tw-max-w-0","tw-truncate","md:tw-table-cell",3,"click"],[1,"tw-hidden","tw-max-w-0","tw-truncate","lg:tw-table-cell",3,"click"],[3,"click"],["class","tw-pill",4,"ngIf"],["type","button",1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500",3,"click"],["id","viewOrEditIcon","aria-hidden","true",3,"ngClass"],[1,"tw-pill"],["hidePager","true",3,"totalResults"]],template:function(t,i){1&t&&(e._UZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.TgZ(2,"app-add-identityresource",1,2),e.NdJ("onSubmit",function(){return i.refreshList()}),e.qZA(),e.TgZ(4,"div",3)(5,"app-search",4),e.NdJ("onSearch",function(C){return i.search(C)}),e.ALo(6,"translate"),e.qZA(),e.YNc(7,tC,5,3,"app-action-bar",5),e.YNc(8,Xp,1,0,"app-simple-loader",5),e.YNc(9,Cg,4,3,"div",6),e.YNc(10,bg,22,16,"table",7),e.YNc(11,sC,1,1,"app-pager",8),e.qZA()),2&t&&(e.Q6J("title",e.lcZ(1,7,"Nav.IdentityResources")),e.xp6(5),e.Q6J("placeholder",e.lcZ(6,9,"Resources.SearchPlaceholder")),e.xp6(2),e.Q6J("ngIf",!i.isLoading&&!i.isIdentityServerManagerReadOnly),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",(!i.resources||i.resources.length<=0)&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.resources&&i.resources.length>0&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.resources&&i.resources.length>0&&!i.isLoading))},dependencies:[z.mk,z.sg,z.O5,dt.G,wt.P,kt.K,sn,En.w,lA,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var Sl=m(426);const oC=function(r,l){return{title:r,link:l}},Tg=function(r){return[r]},od=function(){return["active"]},aC=function(){return{backdrop:"static",animated:!1}};let $a=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt,Et,Wt){this.fb=t,this.route=i,this.router=p,this.titleService=C,this.identityResourceService=K,this.toastr=Ce,this.translate=Ue,this.localize=lt,this.claimTypesService=Et,this.scopesClaimService=Wt}ngOnInit(){this.identityResourceSubscription=this.identityResourceService.getCachedIdentityResource().subscribe(t=>{this.identityResource=t,this.titleService.setTitle(this.translate.instant("IdentityResources.Singular")+" "+this.identityResource.displayName+" "+this.translate.instant("Nav.Details")+` - ${He.de.SITE_TITLE}`)}),this.claimTypesService.getClaimTypes(null,null,!0).subscribe({next:t=>{this.scopesClaimService.setClaimTypes(t)}})}ngOnDestroy(){this.identityResourceSubscription.unsubscribe()}mobRoute(t){this.router.navigate([t],{relativeTo:this.route})}delete(){return this.identityResourceService.deleteIdentityResource(this.identityResource.id).toPromise().then(()=>{this.toastr.success(this.translate.instant("Resources.RemovedResource"),this.translate.instant("Notifications.Success"));const t=this.localize.translateRoute("/identityresources");this.router.navigate([t])},()=>{this.toastr.error(this.translate.instant("Resources.RemovedResource"),this.translate.instant("Notifications.Failed"))})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(yn.gz),e.Y36(yn.F0),e.Y36(n.Dx),e.Y36(Ma.Q),e.Y36(si._W),e.Y36(Ut.sK),e.Y36(Un.An),e.Y36(so.M),e.Y36(Sl.q))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:68,vars:64,consts:[[3,"title","crumbs","hasTabs"],["tabs",""],[1,"tw-p-4","md:tw-hidden"],["for","nav-sub-menu",1,"sr-only"],[1,"tw-form-select"],["id","nav-sub-menu",1,"tw-form-control",3,"change"],["value","details"],["value","claims"],["value","properties"],["role","tablist",1,"tabs","tw-hidden","md:tw-flex"],[1,"tabs__item"],["routerLink","details","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["id","idrClaimsTabButton","routerLink","claims","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["id","idrPropertiesTabButton","routerLink","properties","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["id","editIdentityResource",1,"tw-container","mx-auto"],["bsModal","","id","deleteIdentityResource","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-center","scrollbars"],[1,"tw-mb-4"],[1,"tw-pill-danger",3,"innerHTML"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["data-dismiss","modal",1,"tw-btn-danger",3,"click"],["data-dismiss","modal",1,"tw-btn-link","tw--mr-4"]],template:function(t,i){1&t&&(e.TgZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.ALo(2,"localize"),e.ynx(3,1),e.TgZ(4,"div",2)(5,"label",3),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",4)(9,"select",5),e.NdJ("change",function(C){return i.mobRoute(C.target.value)}),e.TgZ(10,"option",6),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"option",6),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"option",7),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"option",8),e._uU(20),e.qZA()()()(),e.TgZ(21,"ul",9),e.ALo(22,"translate"),e.TgZ(23,"li",10)(24,"button",11),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"li",10)(28,"button",12),e._uU(29),e.ALo(30,"translate"),e.qZA()(),e.TgZ(31,"li",10)(32,"button",13),e._uU(33),e.ALo(34,"translate"),e.qZA()()(),e.BQk(),e.qZA(),e.TgZ(35,"div",14),e._UZ(36,"router-outlet"),e.qZA(),e.TgZ(37,"div",15)(38,"div",16)(39,"div",17)(40,"div",18)(41,"h5",19),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"button",20),e._UZ(45,"span",21),e.TgZ(46,"span",22),e._uU(47),e.ALo(48,"translate"),e.qZA()()(),e.TgZ(49,"div",23)(50,"p",24),e._uU(51),e.ALo(52,"translate"),e.TgZ(53,"strong"),e._uU(54),e.qZA(),e._uU(55,"?"),e.qZA(),e._UZ(56,"p",25),e.ALo(57,"translate"),e.qZA(),e._UZ(58,"div",26),e.TgZ(59,"div",27)(60,"div",28)(61,"div",29)(62,"button",30),e.NdJ("click",function(){return i.delete()}),e._uU(63),e.ALo(64,"translate"),e.qZA()(),e.TgZ(65,"button",31),e._uU(66),e.ALo(67,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("title",null==i.identityResource?null:i.identityResource.name)("crumbs",e.VKq(58,Tg,e.WLB(55,oC,e.lcZ(1,23,"IdentityResources.Title"),e.lcZ(2,25,"/identityresources"))))("hasTabs",!0),e.xp6(6),e.Oqu(e.lcZ(7,27,"Nav.SubMenu")),e.xp6(5),e.hij("",e.lcZ(12,29,"Nav.SubMenu"),"..."),e.xp6(3),e.Oqu(e.lcZ(15,31,"Nav.Details")),e.xp6(3),e.Oqu(e.lcZ(18,33,"Nav.Claims")),e.xp6(3),e.Oqu("Nav.Properties | translate"),e.xp6(1),e.uIk("aria-label",e.lcZ(22,35,"Nav.SubMenu")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(60,od)),e.xp6(1),e.Oqu(e.lcZ(26,37,"Nav.Details")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(61,od)),e.xp6(1),e.Oqu(e.lcZ(30,39,"Nav.Claims")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(62,od)),e.xp6(1),e.Oqu(e.lcZ(34,41,"Nav.Properties")),e.xp6(4),e.Q6J("config",e.DdM(63,aC)),e.xp6(5),e.Oqu(e.lcZ(43,43,"Common.Delete.Confirm")),e.xp6(5),e.Oqu(e.lcZ(48,45,"Common.Close")),e.xp6(4),e.hij("",e.lcZ(52,47,"Common.Delete.AreYouSureSimple")," "),e.xp6(3),e.Oqu(null==i.identityResource?null:i.identityResource.displayName),e.xp6(2),e.Q6J("innerHTML",e.lcZ(57,49,"Common.Delete.Warning"),e.oJD),e.xp6(7),e.Oqu(e.lcZ(64,51,"Common.Delete.Title")),e.xp6(3),e.Oqu(e.lcZ(67,53,"Common.Delete.No")))},dependencies:[yn.lC,yn.rH,yn.Od,h.YN,h.Kr,le.oB,dt.G,Ut.X$,Un.lO],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var yc=m(515),eh=m(4879);let th=(()=>{class r{constructor(t,i){this.identityResourceService=t,this.errorService=i}resolve(t,i){const p=t.paramMap.get("Id");return this.identityResourceService.getResource(p).pipe((0,u.U)(C=>(C&&this.identityResourceService.getCachedIdentityResource().next(C),C)),(0,Wl.K)((C,K)=>(404===C.status?this.errorService.resourceNotFound(eh._.identityResource):this.errorService.handleError(C),(0,yc.c)())))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(Ma.Q),e.LFG(Ee.T))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();const cA=["ClaimPicker"],Ag=["tabs"],lC=["addProtectedModal"];function cC(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Resources.EnterBasicDetails")))}function uC(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ProtectedResources.AssignClaims")))}function nh(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.nextTab())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("disabled",t.protectedResourceForm.invalid),e.xp6(1),e.Oqu(e.lcZ(2,2,"Common.Next"))}}function dC(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.submit())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Common.Save")))}const pC=function(){return{animated:!1,backdrop:"static"}};let ad=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue){this.claimTypesService=t,this.errorService=i,this.protectedResourceService=p,this.translate=C,this.fb=K,this.toastr=Ce,this.titleService=Ue,this.allAvailableClaims=[],this.availableClaims=[],this.assignedClaims=[],this.resourceSecrets=[],this.tabIndex=0,this.progressPercent=0,this.descFocus=!1,this.onSubmit=new e.vpe}keydown(t){"Enter"===t.key&&this.protectedResourceForm.valid&&this.tabComponent.tabs[0].active&&!this.descFocus&&this.nextTab()}ngOnInit(){this.updateProgress(),this.claimTypesService.getClaimTypes(null,null,!0).subscribe({next:t=>{this.availableClaims=t,this.allAvailableClaims=t},error:t=>{this.errorService.handleError(t)}}),this.protectedResourceForm=this.fb.group({name:["",[h.kI.required,h.kI.pattern(/^\S*$/)]],displayName:["",h.kI.required],description:["",h.kI.maxLength(1e3)]})}ngAfterViewInit(){this.handleClaims()}handleClaims(){this.claimPicker.assignedStream.subscribe(t=>{this.availableClaims=(0,ot.mn)(this.availableClaims.slice(),t);const i=this.assignedClaims.slice();this.assignedClaims=i.concat(t),this.claimPicker.availableCount=0}),this.claimPicker.unAssignedStream.subscribe(t=>{const i=this.availableClaims;this.assignedClaims=(0,ot.mn)(this.assignedClaims.slice(),t),this.availableClaims=i.concat(t),this.claimPicker.assignedCount=0})}previousTab(){this.tabComponent.tabs[--this.tabIndex].active=!0,this.updateProgress()}nextTab(){this.tabComponent.tabs[++this.tabIndex].active=!0,this.updateProgress()}updateProgress(){this.progressPercent=(this.tabIndex+1)/this.tabComponent.tabs.length*100}cancel(){this.resetWizard(),this.hide()}submit(){const t=(0,go.UI)(this.assignedClaims,function(p){return p.name}),i=Object.assign(this.protectedResourceForm.value,{allowedClaims:t},{resourceSecrets:this.resourceSecrets});this.protectedResourceService.addResource(i).subscribe(p=>{this.toastr.success(this.translate.instant("Resources.ResourceAddedSuccess"),this.translate.instant("Notifications.Saving Success Title")),this.onSubmit.emit(),this.resetWizard(),this.hide()},p=>{this.errorService.handleError(p)})}resetWizard(){this.protectedResourceForm.reset(),this.tabComponent.tabs[0].active=!0,this.tabIndex=0,this.assignedClaims=[],this.resourceSecrets=[],this.availableClaims=this.allAvailableClaims}hide(){this.addProtectedModal.hide()}show(){this.addProtectedModal.show()}ngOnDestroy(){this.hide()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(so.M),e.Y36(Ee.T),e.Y36(Zo.m),e.Y36(Ut.sK),e.Y36(h.QS),e.Y36(si._W),e.Y36(n.Dx))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-protectedresource"]],viewQuery:function(t,i){if(1&t&&(e.Gf(cA,7),e.Gf(Ag,7),e.Gf(lC,7)),2&t){let p;e.iGM(p=e.CRH())&&(i.claimPicker=p.first),e.iGM(p=e.CRH())&&(i.tabComponent=p.first),e.iGM(p=e.CRH())&&(i.addProtectedModal=p.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown",function(C){return i.keydown(C)},!1,e.evT)},outputs:{onSubmit:"onSubmit"},decls:45,vars:34,consts:[["bsModal","","id","addProtectedModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["addProtectedModal","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-progress"],["role","progressbar",1,"modal-progress-bar"],["progressBar",""],[1,"modal-body","scrollbars"],[1,"cms"],[4,"ngIf"],[1,"hide-tabs"],["tabs",""],[3,"formGroup"],[3,"id","label","help"],["name","idInput","id","idInput","formControlName","name","maxlength","200",1,"tw-form-control"],["name","displayNameInput","id","displayNameInput","type","text","formControlName","displayName","maxlength","200",1,"tw-form-control"],["name","descriptionInput","id","descriptionInput","type","text","formControlName","description","maxlength","1000",1,"tw-form-control",3,"focus","blur"],[3,"assignedInput","availableInput","availableSearch"],["ClaimPicker",""],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["class","tw-btn-success tw-mr-3","id","nextBtn",3,"disabled","click",4,"ngIf"],["class","tw-btn-success tw-mr-3","id","submitBtn",3,"click",4,"ngIf"],["id","backBtn",1,"tw-btn",3,"disabled","click"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],["id","nextBtn",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],["id","submitBtn",1,"tw-btn-success","tw-mr-3",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.hide()}),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",9),e._UZ(14,"div",10,11),e.qZA(),e.TgZ(16,"div",12)(17,"div",13),e.YNc(18,cC,3,3,"p",14),e.YNc(19,uC,3,3,"p",14),e.qZA(),e.TgZ(20,"tabset",15,16)(22,"tab")(23,"form",17)(24,"app-form-row",18),e._UZ(25,"input",19),e.qZA(),e.TgZ(26,"app-form-row",18),e._UZ(27,"input",20),e.qZA(),e.TgZ(28,"app-form-row",18)(29,"textarea",21),e.NdJ("focus",function(){return i.descFocus=!i.descFocus})("blur",function(){return i.descFocus=!i.descFocus}),e.qZA()()()(),e.TgZ(30,"tab"),e._UZ(31,"app-common-picker",22,23),e.qZA()()(),e._UZ(33,"div",24),e.TgZ(34,"div",25)(35,"div",26)(36,"div",27),e.YNc(37,nh,3,4,"button",28),e.YNc(38,dC,3,3,"button",29),e.TgZ(39,"button",30),e.NdJ("click",function(){return i.previousTab()}),e._uU(40),e.ALo(41,"translate"),e.qZA()(),e.TgZ(42,"button",31),e.NdJ("click",function(){return i.cancel()}),e._uU(43),e.ALo(44,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("config",e.DdM(33,pC)),e.xp6(6),e.Oqu(e.lcZ(7,25,"ProtectedResources.Create")),e.xp6(5),e.Oqu(e.lcZ(12,27,"Common.Close")),e.xp6(3),e.Udp("width",i.progressPercent+"%"),e.xp6(4),e.Q6J("ngIf",i.tabComponent.tabs[0].active),e.xp6(1),e.Q6J("ngIf",i.tabComponent.tabs[1].active),e.xp6(4),e.Q6J("formGroup",i.protectedResourceForm),e.xp6(1),e.Q6J("id","idInput")("label","Common.ID")("help","IdentityResources.IDHelp"),e.xp6(2),e.Q6J("id","displayNameInput")("label","Common.DisplayName")("help","IdentityResources.DisplayNameHelp"),e.xp6(2),e.Q6J("id","descriptionInput")("label","Common.Description")("help","Resources.DescriptionHelp"),e.xp6(3),e.Q6J("assignedInput",i.assignedClaims)("availableInput",i.availableClaims)("availableSearch",!0),e.xp6(6),e.Q6J("ngIf",i.tabIndex<i.tabComponent.tabs.length-1),e.xp6(1),e.Q6J("ngIf",i.tabIndex==i.tabComponent.tabs.length-1),e.xp6(1),e.Q6J("disabled",0==i.tabIndex),e.xp6(1),e.Oqu(e.lcZ(41,29,"Common.Back")),e.xp6(3),e.Oqu(e.lcZ(44,31,"Common.Cancel")))},dependencies:[z.O5,h._Y,h.Fj,h.JJ,h.JL,h.nD,h.sg,h.u,Ms.wW,Ms.AH,Bo,le.oB,Dn.L,Ut.X$],encapsulation:2}),r})();function ih(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",13)(1,"label",14),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"select",15),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2);return e.KtG(C.pageSize=p)})("change",function(){e.CHM(t);const p=e.oxw(2);return e.KtG(p.setPageLength(+p.pageSize))}),e.TgZ(5,"option",16),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"option",17),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"option",18),e._uU(12),e.ALo(13,"translate"),e.qZA()()()}if(2&r){const t=e.oxw(2);e.xp6(2),e.AsE("",t.pageSize," ",e.lcZ(3,6,"Nav.PerPage"),""),e.xp6(2),e.Q6J("ngModel",t.pageSize),e.xp6(2),e.hij("25 ",e.lcZ(7,8,"Nav.PerPage"),""),e.xp6(3),e.hij("50 ",e.lcZ(10,10,"Nav.PerPage"),""),e.xp6(3),e.hij("100 ",e.lcZ(13,12,"Nav.PerPage"),"")}}function ld(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-action-bar"),e.ynx(1,9),e.YNc(2,ih,14,14,"div",10),e.BQk(),e.ynx(3,11),e.TgZ(4,"button",12),e.NdJ("click",function(){e.CHM(t),e.oxw();const p=e.MAs(3);return e.KtG(p.show())}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk(),e.qZA()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",(null==t.pagedResult?null:t.pagedResult.results.length)>0),e.xp6(3),e.hij(" ",e.lcZ(6,2,"Resources.AddResource")," ")}}function uA(r,l){1&r&&e._UZ(0,"app-simple-loader")}function rh(r,l){1&r&&(e.TgZ(0,"div",19)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"ProtectedResources.NoneFound")))}function dA(r,l){1&r&&(e.TgZ(0,"span",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Reserved")," "))}const Sg=function(r,l){return{"fad fa-pencil":r,"fas fa-eye":l}};function xg(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr",28)(1,"td",29),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditResource(C))}),e.TgZ(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"td",30),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditResource(C))}),e._uU(5),e.qZA(),e.TgZ(6,"td",31),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditResource(C))}),e._uU(7),e.qZA(),e.TgZ(8,"td",32),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditResource(C))}),e.YNc(9,dA,3,3,"span",33),e.qZA(),e.TgZ(10,"td",32),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditResource(C))}),e.TgZ(11,"button",34),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.viewOrEditResource(C))}),e._UZ(12,"span",35),e.TgZ(13,"span",25),e._uU(14),e.ALo(15,"translate"),e.qZA()()()()}if(2&r){const t=l.$implicit,i=e.oxw(2);e.ekj("inactive",!t.enabled||(null==t?null:t.nonEditable)),e.xp6(2),e.ekj("tw-text-blue-500",!t.nonEditable),e.xp6(1),e.Oqu(t.displayName),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.description," "),e.xp6(2),e.Q6J("ngIf",t.nonEditable),e.xp6(3),e.Q6J("ngClass",e.WLB(12,Sg,!i.isIdentityServerManagerReadOnly&&!t.nonEditable,i.isIdentityServerManagerReadOnly||t.nonEditable)),e.xp6(2),e.Oqu(e.lcZ(15,10,"Common.Edit"))}}function Eg(r,l){if(1&r&&(e.TgZ(0,"table",20)(1,"thead")(2,"tr")(3,"th",21),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",22),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",23),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",24)(13,"span",25),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"th",24)(17,"span",25),e._uU(18),e.ALo(19,"translate"),e.qZA()()()(),e.TgZ(20,"tbody",26),e.YNc(21,xg,16,15,"tr",27),e.qZA()()),2&r){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,6,"Common.Name")),e.xp6(3),e.Oqu(e.lcZ(8,8,"Common.ID")),e.xp6(3),e.Oqu(e.lcZ(11,10,"Common.Description")),e.xp6(4),e.Oqu(e.lcZ(15,12,"Common.Reserved")),e.xp6(4),e.Oqu(e.lcZ(19,14,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",t.pagedResult.results)}}function Dg(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-pager",37),e.NdJ("onGoToPage",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.goToPage(p))}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("totalResults",null==t.pagedResult?null:t.pagedResult.totalCount)("currentPage",t.page)("lastPage",null==t.pagedResult?null:t.pagedResult.pageCount)}}let sh=(()=>{class r extends ol.bk{constructor(t,i,p,C,K,Ce,Ue,lt){super(Ue,Ce,!0),this.protectedResourcesService=t,this.router=i,this.errorService=p,this.localize=C,this.titleService=K,this.translate=Ce,this.securityService=lt,this.pageSize=25,this.page=1,this.term="",this.isLoading=!0,this.pageStream=new o.x,this.pageSizeStream=new o.x,this.mapSearchTerm=this.mapSearchTerm.bind(this)}reload(){this.pageStream.next(this.page),this.pageSizeStream.next(this.pageSize)}mapSearchTerm(t){return this.term=t,this.page=1,{searchTerm:t,page:this.page,pageSize:this.pageSize}}ngOnInit(){this.titleService.setTitle(this.translate.instant("Nav.ProtectedResources")+` - ${He.de.SITE_TITLE}`);const t=this.pageStream.pipe((0,u.U)(C=>(this.page=C,{searchTerm:this.term,page:C,pageSize:this.pageSize}))),i=this.pageSizeStream.pipe((0,u.U)(C=>(this.pageSize=C,{searchTerm:this.term,page:this.page,pageSize:C})));t.pipe((0,Da.b)(i),(0,Da.b)(this.searchSource),(0,Da.b)(this.enterKeySource),(0,F.O)({searchTerm:this.term,page:this.page,pageSize:this.pageSize}),(0,re.z)(C=>(this.isLoading=!0,this.protectedResourcesService.getResourcesPaginated(C.searchTerm,C.page,C.pageSize).pipe((0,Qa.g)(200))))).subscribe(C=>{this.pagedResult=C,this.isLoading=!1},C=>{this.errorService.handleError(C),this.isLoading=!1})}searchResource(t){this.searchTermStream.next(t)}goToPage(t){this.pageStream.next(t)}setPageLength(t){this.page=1,this.pageSizeStream.next(t)}viewOrEditResource(t){this.isIdentityServerManagerReadOnly||t.nonEditable?this.viewResource(t):this.editResource(t)}viewResource(t){const i=this.localize.translateRoute("/protectedresources/view");this.router.navigate([i,t.id])}editResource(t){const i=this.localize.translateRoute("/protectedresources");this.router.navigate([i,t.id])}get isIdentityServerManagerReadOnly(){return(0,ot.gR)(this.securityService.userPermissions)}refreshList(){this.ngOnInit()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Zo.m),e.Y36(yn.F0),e.Y36(Ee.T),e.Y36(Un.An),e.Y36(n.Dx),e.Y36(Ut.sK),e.Y36(si._W),e.Y36(ti.I))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],features:[e.qOj],decls:12,vars:11,consts:[[3,"title"],[3,"onSubmit"],["listProtectedResourcesModal",""],["id","protectedResourcesList",1,"tw-container","tw-mx-auto"],[3,"placeholder","onSearch"],[4,"ngIf"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable selectable hover",4,"ngIf"],[3,"totalResults","currentPage","lastPage","onGoToPage",4,"ngIf"],["left",""],["class","tw-hidden tw-form-select tw-w-auto sm:tw-block",4,"ngIf"],["right",""],[1,"tw-btn-success",3,"click"],[1,"tw-hidden","tw-form-select","tw-w-auto","sm:tw-block"],["for","pageSizeToggle",1,"sr-only"],["id","pageSizeToggle",1,"tw-form-control","tw-form-control-small",3,"ngModel","ngModelChange","change"],["value","25"],["value","50"],["value","100"],["role","alert",1,"tw-alert"],[1,"datatable","selectable","hover"],[1,"md:tw-1/4"],[1,"tw-hidden","tw-w-1/4","md:tw-table-cell"],[1,"tw-hidden","lg:tw-table-cell"],[1,"tw-w-1"],[1,"sr-only"],["id","resourceTable"],["class","group",3,"inactive",4,"ngFor","ngForOf"],[1,"group"],[1,"tw-max-w-0","tw-truncate",3,"click"],[1,"tw-hidden","tw-max-w-0","tw-truncate","md:tw-table-cell",3,"click"],[1,"tw-hidden","tw-max-w-0","tw-truncate","lg:tw-table-cell",3,"click"],[3,"click"],["class","tw-pill",4,"ngIf"],["type","button",1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500",3,"click"],["id","viewOrEditIcon","aria-hidden","true",3,"ngClass"],[1,"tw-pill"],[3,"totalResults","currentPage","lastPage","onGoToPage"]],template:function(t,i){1&t&&(e._UZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.TgZ(2,"app-add-protectedresource",1,2),e.NdJ("onSubmit",function(){return i.refreshList()}),e.qZA(),e.TgZ(4,"div",3)(5,"app-search",4),e.NdJ("onSearch",function(C){return i.searchResource(C)}),e.ALo(6,"translate"),e.qZA(),e.YNc(7,ld,7,4,"app-action-bar",5),e.YNc(8,uA,1,0,"app-simple-loader",5),e.YNc(9,rh,4,3,"div",6),e.YNc(10,Eg,22,16,"table",7),e.YNc(11,Dg,1,3,"app-pager",8),e.qZA()),2&t&&(e.Q6J("title",e.lcZ(1,7,"ProtectedResources.TitlePlural")),e.xp6(5),e.Q6J("placeholder",e.lcZ(6,9,"Resources.SearchPlaceholder")),e.xp6(2),e.Q6J("ngIf",!i.isLoading&&!i.isIdentityServerManagerReadOnly),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",(!i.pagedResult||i.pagedResult.results.length<=0)&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.pagedResult&&i.pagedResult.results.length>0&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.pagedResult?null:i.pagedResult.results.length)>0&&!i.isLoading))},dependencies:[z.mk,z.sg,z.O5,h.YN,h.Kr,h.EJ,h.JJ,h.On,dt.G,wt.P,kt.K,sn,En.w,ad,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})(),Pa=(()=>{class r{constructor(t,i){this.protectedResourceService=t,this.errorService=i}resolve(t,i){const p=t.paramMap.get("Id");return this.protectedResourceService.getResource(p).pipe((0,u.U)(C=>(C&&this.protectedResourceService.getCachedProtectedResource().next(C),C)),(0,Wl.K)((C,K)=>(404===C.status?this.errorService.resourceNotFound(eh._.protectedResource):this.errorService.handleError(C),(0,yc.c)())))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(Zo.m),e.LFG(Ee.T))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();function cd(r,l){1&r&&(e.TgZ(0,"div",36),e._UZ(1,"router-outlet"),e.qZA())}const ud=function(r,l){return{title:r,link:l}},ru=function(r){return[r]},su=function(){return["active"]},oh=function(){return{backdrop:"static",animated:!1}};function ah(){return Object.assign(new yo.gd,{closeOthers:!0})}let hC=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt,Et,Wt){this.fb=t,this.route=i,this.router=p,this.titleService=C,this.protectedResourceService=K,this.claimTypesService=Ce,this.toastr=Ue,this.translate=lt,this.localize=Et,this.scopesClaimService=Wt}ngOnInit(){this.protectedResourceSubscription=this.protectedResourceService.getCachedProtectedResource().subscribe(t=>{this.protectedResource=t;const i=this.translate.instant("ProtectedResources.Title")+" "+this.protectedResource.displayName+" "+this.translate.instant("Nav.Details")+" - "+He.de.SITE_TITLE;this.titleService.setTitle(i)}),this.claimTypesService.getClaimTypes(null,null,!0).subscribe({next:t=>{this.scopesClaimService.setClaimTypes(t)}})}ngOnDestroy(){this.protectedResourceSubscription.unsubscribe()}mobRoute(t){this.router.navigate([t],{relativeTo:this.route})}delete(){return this.protectedResourceService.deleteProtectedResource(this.protectedResource.id).toPromise().then(t=>{const i=this.localize.translateRoute("/protectedresources");this.router.navigate([i]),this.toastr.success(this.translate.instant("Resources.RemovedResource"),this.translate.instant("Notifications.Success"))},t=>{this.toastr.error("Removed Resource","Failed!")})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(yn.gz),e.Y36(yn.F0),e.Y36(n.Dx),e.Y36(Zo.m),e.Y36(so.M),e.Y36(si._W),e.Y36(Ut.sK),e.Y36(Un.An),e.Y36(Sl.q))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-protectedresource"]],features:[e._Bn([{provide:yo.gd,useFactory:ah}])],decls:82,vars:83,consts:[[3,"title","crumbs","hasTabs"],["tabs",""],[1,"tw-p-4","md:tw-hidden"],["for","nav-sub-menu",1,"sr-only"],[1,"tw-form-select"],["id","nav-sub-menu",1,"tw-form-control",3,"change"],["value","details"],["value","scopes"],["value","claims"],["value","secrets"],["value","properties"],["role","tablist",1,"tabs","tw-hidden","md:tw-flex"],[1,"tabs__item"],["routerLink","details","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["routerLink","scopes","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["routerLink","claims","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["routerLink","secrets","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["routerLink","properties","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["id","editProtectedResource","class","tw-container tw-mx-auto",4,"ngIf"],["bsModal","","id","deleteProtectedResource","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-center","scrollbars"],[1,"tw-mb-4"],[1,"tw-pill-danger",3,"innerHTML"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["data-dismiss","modal",1,"tw-btn-danger",3,"click"],["data-dismiss","modal",1,"tw-btn-link","tw--mr-4"],["id","editProtectedResource",1,"tw-container","tw-mx-auto"]],template:function(t,i){1&t&&(e.TgZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.ALo(2,"localize"),e.ynx(3,1),e.TgZ(4,"div",2)(5,"label",3),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",4)(9,"select",5),e.NdJ("change",function(C){return i.mobRoute(C.target.value)}),e.TgZ(10,"option",6),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"option",6),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"option",7),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"option",8),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"option",9),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"option",10),e._uU(26),e.ALo(27,"translate"),e.qZA()()()(),e.TgZ(28,"ul",11),e.ALo(29,"translate"),e.TgZ(30,"li",12)(31,"button",13),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"li",12)(35,"button",14),e._uU(36),e.ALo(37,"translate"),e.qZA()(),e.TgZ(38,"li",12)(39,"button",15),e._uU(40),e.ALo(41,"translate"),e.qZA()(),e.TgZ(42,"li",12)(43,"button",16),e._uU(44),e.ALo(45,"translate"),e.qZA()(),e.TgZ(46,"li",12)(47,"button",17),e._uU(48),e.ALo(49,"translate"),e.qZA()()(),e.BQk(),e.qZA(),e.YNc(50,cd,2,0,"div",18),e.TgZ(51,"div",19)(52,"div",20)(53,"div",21)(54,"div",22)(55,"h5",23),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"button",24),e._UZ(59,"span",25),e.TgZ(60,"span",26),e._uU(61),e.ALo(62,"translate"),e.qZA()()(),e.TgZ(63,"div",27)(64,"p",28),e._uU(65),e.ALo(66,"translate"),e.TgZ(67,"strong"),e._uU(68),e.qZA(),e._uU(69,"?"),e.qZA(),e._UZ(70,"p",29),e.ALo(71,"translate"),e.qZA(),e._UZ(72,"div",30),e.TgZ(73,"div",31)(74,"div",32)(75,"div",33)(76,"button",34),e.NdJ("click",function(){return i.delete()}),e._uU(77),e.ALo(78,"translate"),e.qZA()(),e.TgZ(79,"button",35),e._uU(80),e.ALo(81,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("title",null==i.protectedResource?null:i.protectedResource.name)("crumbs",e.VKq(75,ru,e.WLB(72,ud,e.lcZ(1,30,"ProtectedResources.Title"),e.lcZ(2,32,"/protectedresources"))))("hasTabs",!0),e.xp6(6),e.Oqu(e.lcZ(7,34,"Nav.SubMenu")),e.xp6(5),e.hij("",e.lcZ(12,36,"Nav.SubMenu"),"..."),e.xp6(3),e.Oqu(e.lcZ(15,38,"Nav.Details")),e.xp6(3),e.Oqu(e.lcZ(18,40,"Nav.Scopes")),e.xp6(3),e.Oqu(e.lcZ(21,42,"Nav.Claims")),e.xp6(3),e.Oqu(e.lcZ(24,44,"Nav.Secrets")),e.xp6(3),e.Oqu(e.lcZ(27,46,"Nav.Properties")),e.xp6(2),e.uIk("aria-label",e.lcZ(29,48,"Nav.SubMenu")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(77,su)),e.xp6(1),e.Oqu(e.lcZ(33,50,"Nav.Details")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(78,su)),e.xp6(1),e.Oqu(e.lcZ(37,52,"Nav.Scopes")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(79,su)),e.xp6(1),e.Oqu(e.lcZ(41,54,"Nav.Claims")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(80,su)),e.xp6(1),e.Oqu(e.lcZ(45,56,"Nav.Secrets")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(81,su)),e.xp6(1),e.Oqu(e.lcZ(49,58,"Nav.Properties")),e.xp6(2),e.Q6J("ngIf",i.protectedResource),e.xp6(1),e.Q6J("config",e.DdM(82,oh)),e.xp6(5),e.Oqu(e.lcZ(57,60,"Common.Delete.Confirm")),e.xp6(5),e.Oqu(e.lcZ(62,62,"Common.Close")),e.xp6(4),e.hij("",e.lcZ(66,64,"Common.Delete.AreYouSureSimple")," "),e.xp6(3),e.Oqu(i.protectedResource.displayName),e.xp6(2),e.Q6J("innerHTML",e.lcZ(71,66,"Common.Delete.Warning"),e.oJD),e.xp6(7),e.Oqu(e.lcZ(78,68,"Common.Delete.Title")),e.xp6(3),e.Oqu(e.lcZ(81,70,"Common.Delete.No")))},dependencies:[z.O5,yn.lC,yn.rH,yn.Od,h.YN,h.Kr,le.oB,dt.G,Ut.X$,Un.lO],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})(),fC=(()=>{class r{constructor(t,i,p){this.authService=t,this.securityService=i,this.appComponentViewService=p}ngOnInit(){this.authService.isAuthenticatedCheck().subscribe(t=>{this.authService.user=t.username,this.authService.isAuthenticated=t.isAuthenticated,t.isAuthenticated?this.appComponentViewService.successAuth():this.appComponentViewService.failAuth(),this.securityService.onAuthorizationResultComplete(t)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(hr.e),e.Y36(ti.I),e.Y36(fo.t))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-auth"]],decls:0,vars:0,template:function(t,i){},encapsulation:2}),r})();var jl=m(8895),ao=m(572),Ig=m(5613),xl=m(8285),Kl=m(2808);const Mg=["addButton"];function mC(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-form-row",11)(1,"app-form-toggle",12)(2,"input",13),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.newUrl.isRedirectUri=p)}),e.qZA()()()}if(2&r){const t=e.oxw();e.Q6J("id","addRedirectUri")("label","Common.Callback")("help","Clients.URLS.SendTokens")("isLast",!t.clientViewService.applicationUrls.postLogoutRedirectUris&&!t.clientViewService.applicationUrls.allowedCorsOrigins),e.xp6(1),e.Q6J("id","addRedirectUri"),e.xp6(1),e.Q6J("checked",t.newUrl.isRedirectUri)("ngModel",t.newUrl.isRedirectUri)("disabled",0==t.client.redirectUris.length)}}function gC(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-form-row",11)(1,"app-form-toggle",12)(2,"input",14),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.newUrl.isPostLogoutRedirectUri=p)}),e.qZA()()()}if(2&r){const t=e.oxw();e.Q6J("id","addPostLogoutRedirectUri")("label","Common.Signout")("help","Clients.URLS.RedirectAfterLogout")("isLast",!t.clientViewService.applicationUrls.allowedCorsOrigins),e.xp6(1),e.Q6J("id","addPostLogoutRedirectUri"),e.xp6(1),e.Q6J("checked",t.newUrl.isPostLogoutRedirectUri)("ngModel",t.newUrl.isPostLogoutRedirectUri)}}function Ng(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-form-row",11)(1,"app-form-toggle",12)(2,"input",15),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.newUrl.isAllowedCorsOrigin=p)}),e.qZA()()()}if(2&r){const t=e.oxw();e.Q6J("id","corsOrigin")("label","Common.CORS")("help","Clients.URLS.CORSDomain")("isLast",!0),e.xp6(1),e.Q6J("id","corsOrigin"),e.xp6(1),e.Q6J("checked",t.newUrl.isAllowedCorsOrigin)("ngModel",t.newUrl.isAllowedCorsOrigin)("disabled",t.client.allowedGrantTypes.includes(t.grantTypes.Device))}}function lh(r,l){1&r&&e._UZ(0,"app-data-table-column",16),2&r&&e.Q6J("title","Common.Callback")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","isRedirectUri")("isBoolean",!0)}function _C(r,l){1&r&&e._UZ(0,"app-data-table-column",16),2&r&&e.Q6J("title","Common.Signout")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","isPostLogoutRedirectUri")("isBoolean",!0)}function ch(r,l){1&r&&e._UZ(0,"app-data-table-column",16),2&r&&e.Q6J("title","Common.CORS")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","isAllowedCorsOrigin")("isBoolean",!0)}function vC(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-form-row",11)(1,"app-form-toggle",12)(2,"input",18),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2);return e.KtG(C.editingUrl.isRedirectUri=p)}),e.qZA()()()}if(2&r){const t=e.oxw(2);e.Q6J("id","editRedirectUri")("label","Common.Callback")("help","Clients.URLS.SendTokens")("isLast",!t.clientViewService.applicationUrls.postLogoutRedirectUris&&!t.clientViewService.applicationUrls.allowedCorsOrigins),e.xp6(1),e.Q6J("id","editRedirectUri"),e.xp6(1),e.Q6J("checked",t.editingUrl.isRedirectUri||0==t.client.redirectUris.length)("ngModel",t.editingUrl.isRedirectUri)("disabled",0==t.client.redirectUris.length)}}function yC(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-form-row",11)(1,"app-form-toggle",12)(2,"input",19),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2);return e.KtG(C.editingUrl.isPostLogoutRedirectUri=p)}),e.qZA()()()}if(2&r){const t=e.oxw(2);e.Q6J("id","editPostLogoutRedirectUri")("label","Common.Signout")("help","Clients.URLS.RedirectAfterLogout")("isLast",!t.clientViewService.applicationUrls.allowedCorsOrigins),e.xp6(1),e.Q6J("id","editPostLogoutRedirectUri"),e.xp6(1),e.Q6J("checked",t.editingUrl.isPostLogoutRedirectUri)("ngModel",t.editingUrl.isPostLogoutRedirectUri)}}function CC(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-form-row",11)(1,"app-form-toggle",12)(2,"input",20),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2);return e.KtG(C.editingUrl.isAllowedCorsOrigin=p)}),e.qZA()()()}if(2&r){const t=e.oxw(2);e.Q6J("id","editCorsOrigin")("label","Common.CORS")("help","Clients.URLS.CORSDomain")("isLast",!0),e.xp6(1),e.Q6J("id","editCorsOrigin"),e.xp6(1),e.Q6J("checked",t.editingUrl.isAllowedCorsOrigin)("ngModel",t.editingUrl.isAllowedCorsOrigin)("disabled",t.client.allowedGrantTypes.includes(t.grantTypes.Device))}}function bC(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-form-row",4)(2,"input",17),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.editingUrl.url=p)}),e.qZA()(),e.YNc(3,vC,3,8,"app-form-row",6),e.YNc(4,yC,3,7,"app-form-row",6),e.YNc(5,CC,3,8,"app-form-row",6),e.BQk()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("id","editUrl")("label","Common.URL"),e.xp6(1),e.Q6J("ngModel",t.editingUrl.url),e.xp6(1),e.Q6J("ngIf",t.clientViewService.applicationUrls.redirectUris),e.xp6(1),e.Q6J("ngIf",t.clientViewService.applicationUrls.postLogoutRedirectUris),e.xp6(1),e.Q6J("ngIf",t.clientViewService.applicationUrls.allowedCorsOrigins)}}let wC=(()=>{class r{constructor(t,i,p,C,K,Ce){this.translate=t,this.toastr=i,this.clientCachingService=p,this.clientViewService=C,this.modalService=K,this.dataTableService=Ce,this.grantTypes=jl.q,this.pathCheck=ot.AZ,this.addModalActions=[Vt.n.Save],this.addModalId="addAppURLModal",this.editModalActions=[Vt.n.Save],this.editModalId="editAppURLModal",this.urlDataTableActions=[ao.Xz.Select,ao.Xz.Delete]}mapUrlToApplicationUrl(t){const i=this.client.allowedCorsOrigins.includes(t),p=this.client.redirectUris.includes(t),C=this.client.postLogoutRedirectUris.includes(t);return new Ig.m(t,i,p,C)}ngOnInit(){this.clientCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.initNewUrlDefaults();const i=this.client.allowedCorsOrigins.concat(this.client.redirectUris,this.client.postLogoutRedirectUris);this.allArr=go.jj(i).map(p=>this.mapUrlToApplicationUrl(p)).sort((p,C)=>p.url.localeCompare(C.url))}),this.subscription=this.dataTableService.deleteRowEvent.subscribe(t=>{this.deleteUrl(t)})}initNewUrlDefaults(){this.newUrl=new Ig.m("",!1,!1,!1),this.client.allowedGrantTypes.includes(jl.q.Device)?this.newUrl.isAllowedCorsOrigin=!0:this.newUrl.isRedirectUri=!0}ngOnDestroy(){this.subscription?.unsubscribe()}openAddModal(){this.modalService.showById(this.addModalId,this.addButtonRef)}cancelAdd(){this.initNewUrlDefaults(),this.modalService.hideById(this.addModalId)}cancelEdit(){this.editingUrl=null,this.modalService.hideById(this.editModalId)}deleteUrl(t){const i=this.allArr[t];if(!this.client.allowedGrantTypes.includes(this.grantTypes.Device)&&1===this.client.redirectUris.length&&i.isRedirectUri)return void this.toastr.error(this.translate.instant("Clients.URLS.NoURLS"),this.translate.instant("Notifications.Sorry"));const p=JSON.parse(JSON.stringify(this.client));if(i.isRedirectUri){const C=p.redirectUris.indexOf(i.url);p.redirectUris.splice(C,1)}if(i.isPostLogoutRedirectUri){const C=p.postLogoutRedirectUris.indexOf(i.url);p.postLogoutRedirectUris.splice(C,1)}if(i.isAllowedCorsOrigin){const C=p.allowedCorsOrigins.indexOf(i.url);p.allowedCorsOrigins.splice(C,1)}this.updateClient(p)}isAddButtonDisabled(){return this.allArr.findIndex(t=>this.newUrl.url===t.url)>-1||this.disableButtonLogic(this.newUrl)}disableButtonLogic(t){return!(!(0,ot.Ew)(t.url)&&""!==t.url.trim()&&(t.isAllowedCorsOrigin||t.isPostLogoutRedirectUri||t.isRedirectUri)&&(!(0,ot.AZ)(t.url)||!t.isAllowedCorsOrigin||(this.toastr.warning(this.translate.instant("Clients.CORSUrl"),this.translate.instant("Notifications.Warning")),0)))}isEditButtonDisabled(){return!!this.editingUrl&&this.disableButtonLogic(this.editingUrl)}editUrl(t){const i=t.data,p=this.allArr.findIndex(C=>C.url===i.url);this.editingUrl=new Ig.$(i.url,i.isAllowedCorsOrigin,i.isRedirectUri,i.isPostLogoutRedirectUri,p),this.modalService.showById(this.editModalId,this.editButtonRef)}saveEdit(){const t=this.editingUrl.url===this.editingUrl.oldUrl?this.editingUrl.url:this.editingUrl.oldUrl,i=this.client.redirectUris.indexOf(t),p=this.client.postLogoutRedirectUris.indexOf(t),C=this.client.allowedCorsOrigins.indexOf(t);i>-1&&this.client.redirectUris.splice(i,1),p>-1&&this.client.postLogoutRedirectUris.splice(p,1),C>-1&&this.client.allowedCorsOrigins.splice(C,1),this.allArr.splice(this.editingUrl.index,1),this.addUrl(this.editingUrl)}addUrl(t){const i=(0,ot.lm)(t.url);if(i){let C;switch(i){case"https://":case"http://":C=new RegExp("https?://(?:www.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|www.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9].[^s]{2,}|https?://(?:www.|(?!www))[a-zA-Z0-9].[^s]{2,}|www.[a-zA-Z0-9].[^s]{2,}"),C.exec(t.url)||this.toastr.warning(this.translate.instant("Clients.UrlNotValid"),this.translate.instant("Notifications.Warning"));break;case"urn:":C=new RegExp("^urn:[a-z0-9][a-z0-9-]{0,31}:[a-z0-9()+,-.:=@;$_!*'%/?#]+$"),C.exec(t.url)||this.toastr.warning(this.translate.instant("Clients.UrlNotValid"),this.translate.instant("Notifications.Warning"))}}const p=JSON.parse(JSON.stringify(this.client));p.allowedGrantTypes.includes(jl.q.Device)?p.allowedCorsOrigins.push(t.url):(t.isRedirectUri&&p.redirectUris.push(t.url),t.isPostLogoutRedirectUri&&p.postLogoutRedirectUris.push(t.url),t.isAllowedCorsOrigin&&p.allowedCorsOrigins.push(t.url)),this.updateClient(p),this.initNewUrlDefaults()}updateClient(t){this.clientCachingService.componentDirtyValidMap.set("ApplicationUrlsComponent",{isValid:!0}),this.client=t;const i=this.client.allowedCorsOrigins.concat(this.client.redirectUris,this.client.postLogoutRedirectUris);this.allArr=go.jj(i).map(p=>this.mapUrlToApplicationUrl(p)).sort((p,C)=>p.url.localeCompare(C.url)),this.clientCachingService.unsavedCache.next(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Ut.sK),e.Y36(si._W),e.Y36(Vs.Z),e.Y36(Do.a),e.Y36(sr.Z),e.Y36(xl.n))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-application-urls"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Mg,5),e.Gf(Mg,5)),2&t){let p;e.iGM(p=e.CRH())&&(i.addButtonRef=p.first),e.iGM(p=e.CRH())&&(i.editButtonRef=p.first)}},decls:19,vars:31,consts:[["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"title","actions","modalId","addDisabled","saveText","onCancel","onSave"],[3,"id","label"],["id","addUrl","type","url","name","addUrl",1,"tw-form-control",3,"ngModel","ngModelChange"],[3,"id","label","help","isLast",4,"ngIf"],["id","appUrls",3,"rows","actions","norowslabel","onSelect"],[3,"title","headClasses","cellClasses","prop"],[3,"title","headClasses","cellClasses","prop","isBoolean",4,"ngIf"],[4,"ngIf"],[3,"id","label","help","isLast"],[3,"id"],["id","addRedirectUri","type","checkbox","name","addRedirectUri",1,"tw-form-switch__input",3,"checked","ngModel","disabled","ngModelChange"],["id","addPostLogoutRedirectUri","type","checkbox","name","addPostLogoutRedirectUri",1,"tw-form-switch__input",3,"checked","ngModel","ngModelChange"],["id","corsOrigin","type","checkbox","name","corsOrigin",1,"tw-form-switch__input",3,"checked","ngModel","disabled","ngModelChange"],[3,"title","headClasses","cellClasses","prop","isBoolean"],["id","editUrl","type","url","name","editUrl",1,"tw-form-control",3,"ngModel","ngModelChange"],["id","editRedirectUri","type","checkbox","name","editRedirectUri",1,"tw-form-switch__input",3,"checked","ngModel","disabled","ngModelChange"],["id","editPostLogoutRedirectUri","type","checkbox","name","editPostLogoutRedirectUri",1,"tw-form-switch__input",3,"checked","ngModel","ngModelChange"],["id","editCorsOrigin","type","checkbox","name","editCorsOrigin",1,"tw-form-switch__input",3,"checked","ngModel","disabled","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"app-action-bar"),e.ynx(1,0),e.TgZ(2,"button",1,2),e.NdJ("click",function(){return i.openAddModal()}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(6,"app-custom-modal",3),e.NdJ("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addUrl(i.newUrl)}),e.TgZ(7,"app-form-row",4)(8,"input",5),e.NdJ("ngModelChange",function(C){return i.newUrl.url=C}),e.qZA()(),e.YNc(9,mC,3,8,"app-form-row",6),e.YNc(10,gC,3,7,"app-form-row",6),e.YNc(11,Ng,3,8,"app-form-row",6),e.qZA(),e.TgZ(12,"app-data-table",7),e.NdJ("onSelect",function(C){return i.editUrl(C)}),e._UZ(13,"app-data-table-column",8),e.YNc(14,lh,1,5,"app-data-table-column",9),e.YNc(15,_C,1,5,"app-data-table-column",9),e.YNc(16,ch,1,5,"app-data-table-column",9),e.qZA(),e.TgZ(17,"app-custom-modal",3),e.NdJ("onCancel",function(){return i.cancelEdit()})("onSave",function(){return i.saveEdit()}),e.YNc(18,bC,6,6,"ng-container",10),e.qZA()),2&t&&(e.xp6(2),e.Q6J("id","addUrlButton"),e.xp6(2),e.hij(" ",e.lcZ(5,29,"Clients.URLS.AddURL")," "),e.xp6(2),e.Q6J("title","Clients.URLS.AddURL")("actions",i.addModalActions)("modalId",i.addModalId)("addDisabled",i.isAddButtonDisabled())("saveText","Common.Add"),e.xp6(1),e.Q6J("id","addUrl")("label","Common.URL"),e.xp6(1),e.Q6J("ngModel",i.newUrl.url),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.redirectUris),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.postLogoutRedirectUris),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.allowedCorsOrigins),e.xp6(1),e.Q6J("rows",i.allArr)("actions",i.urlDataTableActions)("norowslabel","Clients.URLS.None"),e.xp6(1),e.Q6J("title","Common.URL")("headClasses","tw-w-1/2")("cellClasses","tw-max-w-0 tw-truncate")("prop","url"),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.redirectUris),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.postLogoutRedirectUris),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.allowedCorsOrigins),e.xp6(1),e.Q6J("title","Clients.URLS.EditApplicationURL")("actions",i.editModalActions)("modalId",i.editModalId)("addDisabled",i.isEditButtonDisabled())("saveText","Common.Save"),e.xp6(1),e.Q6J("ngIf",i.editingUrl))},dependencies:[z.O5,h.Fj,h.Wl,h.JJ,h.On,kt.K,ao.Qj,Kl.E,Dn.L,ds.O,ms.R,Ut.X$],encapsulation:2,changeDetection:0}),r})();const TC=["addButton"];let dd=(()=>{class r{constructor(t,i,p){this.clientCachingService=t,this.modalService=i,this.dataTableService=p,this.addType="",this.addValue="",this.editingClaim=new I0,this.editModalActions=[Vt.n.Save],this.editModalId="editClaimId",this.claimDataTableActions=[ao.Xz.Delete,ao.Xz.Select],this.addModalActions=[Vt.n.Save],this.addModalId="addClaimModalId"}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.claims=this.client.claims,this.alwaysSendClaims=t.alwaysSendClientClaims,this.prefixClaims=t.clientClaimsPrefix}),this.subscription.add(this.dataTableService.deleteRowEvent.subscribe(t=>{this.deleteClaim(t)}))}ngOnDestroy(){this.subscription.unsubscribe()}openAddModal(){this.modalService.showById(this.addModalId,this.addButtonRef)}openEditModal(t){this.editingClaim=JSON.parse(JSON.stringify(t.data)),this.editingClaim.oldClaimIndex=this.claims.indexOf(t.data),this.modalService.showById(this.editModalId,t.element)}resetAndCloseEditModal(){this.editingClaim=new I0,this.modalService.hideById(this.editModalId)}cancelAdd(){this.addType="",this.addValue="",this.modalService.hideById(this.addModalId)}editClaim(){const t=this.claims.slice(),i=t[this.editingClaim.oldClaimIndex];i.value=this.editingClaim.value,i.type=this.editingClaim.type,this.submitClaims(t),this.resetAndCloseEditModal()}addClaim(){const t=new uc;t.type=this.addType.trim(),t.value=this.addValue.trim();const i=this.claims.slice();i.push(t),this.addType="",this.addValue="",this.submitClaims(i)}deleteClaim(t){const i=this.claims.slice();i.splice(t,1),this.submitClaims(i)}sendBooleans(){const t=JSON.parse(JSON.stringify(this.client));t.alwaysSendClientClaims=this.alwaysSendClaims,t.prefixClientClaims=this.prefixClaims,this.submitClient(t)}submitClaims(t){const i=JSON.parse(JSON.stringify(this.client));i.claims=t,this.client.claims=t,this.submitClient(i)}submitClient(t){this.clientCachingService.componentDirtyValidMap.set("ClientClaimsComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}updatePrefix(){const t=JSON.parse(JSON.stringify(this.client));t.clientClaimsPrefix=this.prefixClaims?this.prefixClaims:null,this.submitClient(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Vs.Z),e.Y36(sr.Z),e.Y36(xl.n))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-claims"]],viewQuery:function(t,i){if(1&t&&e.Gf(TC,5),2&t){let p;e.iGM(p=e.CRH())&&(i.addButtonRef=p.first)}},decls:27,vars:46,consts:[["id","editClientClaims"],["claimsForm","ngForm"],[3,"id","label","help"],[3,"id"],["id","alwaysSendClaims","name","alwaysSendClaims","type","checkbox",1,"tw-form-switch__input",3,"ngModel","change","ngModelChange"],["id","prefixClaims","name","prefixClaims","type","text",1,"tw-form-control",3,"ngModel","ngModelChange","keyup"],["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"title","modalId","actions","addDisabled","onCancel","onSave"],[3,"label","id"],["id","addType","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"],[3,"label","id","isLast"],["id","addValue","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"],[3,"rows","norowslabel","actions","onSelect"],[3,"prop","title","headClasses","cellClasses"],["id","editType","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"],["id","editValue","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",null,1)(3,"app-form-row",2)(4,"app-form-toggle",3)(5,"input",4),e.NdJ("change",function(){return i.sendBooleans()})("ngModelChange",function(C){return i.alwaysSendClaims=C}),e.qZA()()(),e.TgZ(6,"app-form-row",2)(7,"input",5),e.NdJ("ngModelChange",function(C){return i.prefixClaims=C})("keyup",function(){return i.updatePrefix()}),e.qZA()()(),e.TgZ(8,"app-action-bar"),e.ynx(9,6),e.TgZ(10,"button",7,8),e.NdJ("click",function(){return i.openAddModal()}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(14,"app-custom-modal",9),e.NdJ("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addClaim()}),e.TgZ(15,"app-form-row",10)(16,"input",11),e.NdJ("ngModelChange",function(C){return i.addType=C}),e.qZA()(),e.TgZ(17,"app-form-row",12)(18,"input",13),e.NdJ("ngModelChange",function(C){return i.addValue=C}),e.qZA()()(),e.TgZ(19,"app-data-table",14),e.NdJ("onSelect",function(C){return i.openEditModal(C)}),e._UZ(20,"app-data-table-column",15)(21,"app-data-table-column",15),e.qZA(),e.TgZ(22,"app-custom-modal",9),e.NdJ("onCancel",function(){return i.resetAndCloseEditModal()})("onSave",function(){return i.editClaim()}),e.TgZ(23,"app-form-row",10)(24,"input",16),e.NdJ("ngModelChange",function(C){return i.editingClaim.type=C}),e.qZA()(),e.TgZ(25,"app-form-row",12)(26,"input",17),e.NdJ("ngModelChange",function(C){return i.editingClaim.value=C}),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("id","alwaysSendClaims")("label","Clients.SendClaims")("help","Clients.SendClaimsHelp"),e.xp6(1),e.Q6J("id","alwaysSendClaims"),e.xp6(1),e.Q6J("ngModel",i.alwaysSendClaims),e.xp6(1),e.Q6J("id","prefixClaims")("label","Clients.PrefixClaims")("help","Clients.PrefixClaimsHelp"),e.xp6(1),e.Q6J("ngModel",i.prefixClaims),e.xp6(3),e.Q6J("id","addClaim"),e.xp6(2),e.hij(" ",e.lcZ(13,44,"Clients.AddClaim")," "),e.xp6(2),e.Q6J("title","Clients.AddClaim")("modalId",i.addModalId)("actions",i.addModalActions)("addDisabled",i.addType.length<1||i.addValue.length<1),e.xp6(1),e.Q6J("label","Common.Type")("id","addType"),e.xp6(1),e.Q6J("ngModel",i.addType),e.xp6(1),e.Q6J("label","Common.Value")("id","addValue")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.addValue),e.xp6(1),e.Q6J("rows",i.claims)("norowslabel","Clients.NoClaims")("actions",i.claimDataTableActions),e.xp6(1),e.Q6J("prop","type")("title","Common.Type")("headClasses","md:tw-w-1/3")("cellClasses","tw-max-w-0 tw-truncate"),e.xp6(1),e.Q6J("prop","value")("title","Common.Value")("headClasses","tw-hidden sm:tw-table-cell")("cellClasses","tw-hidden tw-max-w-0 tw-truncate sm:tw-table-cell"),e.xp6(1),e.Q6J("title","Clients.EditClaim")("modalId",i.editModalId)("actions",i.editModalActions)("addDisabled",(null==i.editingClaim.type?null:i.editingClaim.type.length)<1||(null==i.editingClaim.value?null:i.editingClaim.value.length)<1),e.xp6(1),e.Q6J("label","Common.Type")("id","editType"),e.xp6(1),e.Q6J("ngModel",i.editingClaim.type),e.xp6(1),e.Q6J("label","Common.Value")("id","editValue")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.editingClaim.value))},dependencies:[h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.On,h.F,kt.K,ao.Qj,Kl.E,Dn.L,ds.O,ms.R,Ut.X$],encapsulation:2}),r})();const $l=["addButton"];let pA=(()=>{class r{constructor(t,i,p,C,K){this.clientCachingService=t,this.translate=i,this.toastr=p,this.modalService=C,this.dataTableService=K,this.defaultGrantTypes=["implicit","authorization_code","hybrid","resource_owner","client_credentials","urn:ietf:params:oauth:grant-type:device_code","urn:openid:params:grant-type:ciba"],this.grantTypesList=[],this.grantsMap=this.createAllowedGrantsMap(),this.disabledSave=!0,this.grantTypeDataTableActions=[ao.Xz.Delete],this.addModalActions=[Vt.n.Save],this.addModalId="addGrantTypeId"}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.grantTypesList=this.client.allowedGrantTypes.slice(),this.mapAllowedGrants()}),this.subscription.add(this.dataTableService.deleteRowEvent.subscribe(t=>{this.removeGrantType(t)}))}openAddModal(){this.reset(),this.modalService.showById(this.addModalId,this.addButtonRef)}cancelAdd(){this.modalService.hideById(this.addModalId)}reset(){this.newGrantType="",this.customGrantType=""}mapAllowedGrants(){const t=this.checkAllowed(["implicit","authorization_code","hybrid","urn:ietf:params:oauth:grant-type:device_code"]),i=this.checkAllowed(["implicit","authorization_code","hybrid","urn:ietf:params:oauth:grant-type:device_code"]),p=this.checkAllowed(["implicit","authorization_code","hybrid","urn:ietf:params:oauth:grant-type:device_code"]),C=this.checkAllowed(["client_credentials"]),K=this.checkAllowed(["password","urn:ietf:params:oauth:grant-type:device_code"]),Ce=this.checkAllowed(["password","implicit","authorization_code","hybrid","urn:ietf:params:oauth:grant-type:device_code"]),Ue=this.checkAllowed(["urn:openid:params:grant-type:ciba","implicit","authorization_code","hybrid","client_credentials","password","urn:ietf:params:oauth:grant-type:device_code"]);this.grantsMap.set("implicit",t),this.grantsMap.set("authorization_code",i),this.grantsMap.set("hybrid",p),this.grantsMap.set("client_credentials",C),this.grantsMap.set("password",K),this.grantsMap.set("urn:ietf:params:oauth:grant-type:device_code",Ce),this.grantsMap.set("urn:openid:params:grant-type:ciba",Ue)}createAllowedGrantsMap(){let t=new Map;return t=new Map,t.set("implicit",!1),t.set("authorization_code",!1),t.set("hybrid",!1),t.set("client_credentials",!1),t.set("password",!1),t.set("urn:ietf:params:oauth:grant-type:device_code",!1),t.set("urn:openid:params:grant-type:ciba",!1),t.set("custom",!1),t}ngOnDestroy(){this.subscription.unsubscribe()}checkAllowed(t){return(0,go.G)(this.client.allowedGrantTypes,i=>(0,go.r3)(t,i))}changeSelected(t){this.selected=t.value,this.evalidateDisabled()}addGrantType(){let t=this.selected;"custom"===t&&(t=this.customGrantType),this.grantTypesList.includes(t)?this.toastr.warning(this.translate.instant("Clients.GrantTypes.DuplicateGrantType"),this.translate.instant("Common.Warning")):(this.grantTypesList.push(t),this.updateClientCache())}removeGrantType(t){const i=this.grantTypesList[t];this.grantTypesList=this.grantTypesList.filter(p=>p!==i),this.updateClientCache()}updateClientCache(){const t=JSON.parse(JSON.stringify(this.client));t.allowedGrantTypes=this.grantTypesList,this.clientCachingService.componentDirtyValidMap.set("ClientGrantTypesComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}evalidateDisabled(){this.disabledSave=!this.selected||"custom"===this.selected&&!(this.customGrantType&&this.customGrantType.length>1)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Vs.Z),e.Y36(Ut.sK),e.Y36(si._W),e.Y36(sr.Z),e.Y36(xl.n))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-granttypes"]],viewQuery:function(t,i){if(1&t&&e.Gf($l,5),2&t){let p;e.iGM(p=e.CRH())&&(i.addButtonRef=p.first)}},decls:40,vars:53,consts:[["id","editClientGrantTypes"],["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"title","modalId","actions","addDisabled","onCancel","onSave"],[3,"label","id"],[1,"tw-form-select","tw-max-w-full"],["id","GrantSelect",1,"tw-form-control","tw-max-w-full",3,"ngModel","change","ngModelChange"],["value","implicit",3,"disabled"],["value","authorization_code",3,"disabled"],["value","hybrid",3,"disabled"],["value","client_credentials",3,"disabled"],["value","password",3,"disabled"],["value","urn:ietf:params:oauth:grant-type:device_code",3,"disabled"],["value","urn:openid:params:grant-type:ciba",3,"disabled"],["value","custom",3,"disabled"],[3,"label","id","isLast"],["id","GrantCustomValue","type","text","required","",1,"tw-form-control","tw-max-w-full",3,"ngModel","disabled","ngModelChange","keydown"],[3,"rows","norowslabel","actions"],[3,"prop","title","cellClasses"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"app-action-bar"),e.ynx(2,1),e.TgZ(3,"button",2,3),e.NdJ("click",function(){return i.openAddModal()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(7,"app-custom-modal",4),e.NdJ("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addGrantType()}),e.TgZ(8,"app-form-row",5)(9,"div",6)(10,"select",7),e.NdJ("change",function(C){return i.changeSelected(C.target)})("ngModelChange",function(C){return i.newGrantType=C}),e._UZ(11,"option"),e.TgZ(12,"option",8),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"option",9),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"option",10),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"option",11),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"option",12),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"option",13),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"option",14),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"option",15),e._uU(34),e.ALo(35,"translate"),e.qZA()()()(),e.TgZ(36,"app-form-row",16)(37,"input",17),e.NdJ("ngModelChange",function(C){return i.customGrantType=C})("keydown",function(){return i.evalidateDisabled()}),e.qZA()()(),e.TgZ(38,"app-data-table",18),e._UZ(39,"app-data-table-column",19),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("id","addClaim"),e.xp6(2),e.hij(" ",e.lcZ(6,35,"Clients.GrantTypes.AddGrantType")," "),e.xp6(2),e.Q6J("title","Clients.GrantTypes.AddGrantType")("modalId",i.addModalId)("actions",i.addModalActions)("addDisabled",i.disabledSave),e.xp6(1),e.Q6J("label","Common.Name")("id","GrantSelect"),e.xp6(2),e.Q6J("ngModel",i.newGrantType),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("implicit")),e.xp6(1),e.Oqu(e.lcZ(14,37,"Clients.GrantTypes.Implicit")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("authorization_code")),e.xp6(1),e.Oqu(e.lcZ(17,39,"Clients.GrantTypes.AuthCode")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("hybrid")),e.xp6(1),e.Oqu(e.lcZ(20,41,"Clients.GrantTypes.Hybrid")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("client_credentials")),e.xp6(1),e.Oqu(e.lcZ(23,43,"Clients.GrantTypes.ClientCredentials")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("password")),e.xp6(1),e.Oqu(e.lcZ(26,45,"Clients.GrantTypes.Password")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("urn:ietf:params:oauth:grant-type:device_code")),e.xp6(1),e.Oqu(e.lcZ(29,47,"Clients.GrantTypes.DeviceFlow")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("urn:openid:params:grant-type:ciba")),e.xp6(1),e.Oqu(e.lcZ(32,49,"Clients.GrantTypes.CIBA")),e.xp6(2),e.Q6J("disabled",i.grantsMap.get("custom")),e.xp6(1),e.Oqu(e.lcZ(35,51,"Clients.GrantTypes.Custom")),e.xp6(2),e.Q6J("label","Common.Custom")("id","GrantCustomValue")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.customGrantType)("disabled","custom"!=i.newGrantType),e.xp6(1),e.Q6J("rows",i.grantTypesList)("norowslabel","Clients.GrantTypes.None")("actions",i.grantTypeDataTableActions),e.xp6(1),e.Q6J("title","Common.Name")("cellClasses","tw-max-w-0 tw-truncate"))},dependencies:[h.YN,h.Kr,h.Fj,h.EJ,h.JJ,h.Q7,h.On,kt.K,ao.Qj,Kl.E,Dn.L,ms.R,Ut.X$],encapsulation:2}),r})();var Xr=m(5664),Og=m(6045),Cc=m(9465);function uh(r,l){if(1&r&&(e.TgZ(0,"option",11),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function AC(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"li",12)(1,"button",13),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw();return e.KtG(K.removeAlgorithm(C))}),e._UZ(2,"span",14),e.TgZ(3,"span"),e._uU(4),e.qZA()()()}if(2&r){const t=l.$implicit;e.xp6(1),e.uIk("aria-label",t),e.xp6(3),e.Oqu(t)}}const Ga=function(){return{standalone:!0}};let bc=(()=>{class r{constructor(){this.allowedAlgorithms=["ES256","ES384","ES512","PS256","PS384","PS512","RS256","RS384","RS512"]}ngAfterContentInit(){this.allowedAlgorithms=go.zu(this.allowedAlgorithms,...this.form.get(this.algorithmControlName).value),this.selectedAlgorithm=this.allowedAlgorithms[0]}addAlgorithm(){const t=this.form.get(this.algorithmControlName);t.setValue([...t.value,this.selectedAlgorithm]);const i=this.allowedAlgorithms.indexOf(this.selectedAlgorithm);this.allowedAlgorithms.splice(i,1),this.selectedAlgorithm=this.allowedAlgorithms[0],this.form.markAsDirty()}removeAlgorithm(t){const i=this.form.get(this.algorithmControlName),p=i.value.indexOf(t);i.value.splice(p,1),this.allowedAlgorithms.push(t),this.allowedAlgorithms.sort(),this.selectedAlgorithm=this.allowedAlgorithms[0],this.form.markAsDirty()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-signing-algorithm-picker"]],inputs:{form:"form",algorithmControlName:"algorithmControlName"},decls:15,vars:9,consts:[[1,"tw-flex-grid","tw-mb-6","md:tw-flex-nowrap"],[1,"tw-flex-grid-col"],[1,"tw-w-full","lg:tw-max-w-2xl"],[1,"tw-flex"],[1,"tw-form-select"],["id","client-token-signing-algorithm",1,"tw-form-control","tw-mr-1","tw-rounded-r-none","tw-border-r-0",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","signing-algorithm-add-button",1,"tw-btn","tw-rounded-l-none",3,"disabled","click"],["aria-hidden","true",1,"far","fa-plus"],[1,"sr-only"],["class","tw-pill","id","signing-algorithm-added-algorithms",4,"ngFor","ngForOf"],[3,"value"],["id","signing-algorithm-added-algorithms",1,"tw-pill"],[3,"click"],["aria-hidden","true",1,"fas","fa-times","tw-mr-1"]],template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"select",5),e.NdJ("ngModelChange",function(C){return i.selectedAlgorithm=C}),e.YNc(7,uh,2,2,"option",6),e.qZA()(),e.TgZ(8,"button",7),e.NdJ("click",function(){return i.addAlgorithm()}),e._UZ(9,"span",8),e.TgZ(10,"span",9),e._uU(11),e.ALo(12,"translate"),e.qZA()()()()()(),e.TgZ(13,"ul"),e.YNc(14,AC,5,2,"li",10),e.qZA()()),2&t&&(e.xp6(6),e.Q6J("ngModel",i.selectedAlgorithm)("ngModelOptions",e.DdM(8,Ga)),e.xp6(1),e.Q6J("ngForOf",i.allowedAlgorithms),e.xp6(1),e.Q6J("disabled",0==i.allowedAlgorithms.length),e.xp6(3),e.Oqu(e.lcZ(12,6,"Common.Add")),e.xp6(3),e.Q6J("ngForOf",i.form.get(i.algorithmControlName).value))},dependencies:[z.sg,h.YN,h.Kr,h.EJ,h.JJ,h.On,Ut.X$]}),r})();function Io(r,l){if(1&r&&(e.TgZ(0,"app-form-row",5),e._UZ(1,"app-lifetime-picker",6),e.qZA()),2&r){const t=e.oxw();e.Q6J("id","identityTokenLifetime")("label","Clients.Tokens.ClientTokenLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",t.checkLastRow("identityTokenLifetime")),e.xp6(1),e.Q6J("buttons",t.identityTokenLifetimeButtons)}}function Gl(r,l){if(1&r&&(e.TgZ(0,"app-form-row",5),e._UZ(1,"app-lifetime-picker",7),e.qZA()),2&r){const t=e.oxw();e.Q6J("id","accessTokenLifetime")("label","Clients.Tokens.AccessTokenLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",t.checkLastRow("accessTokenLifetime")),e.xp6(1),e.Q6J("buttons",t.accessTokenLifetimeButtons)}}function pd(r,l){if(1&r&&(e.TgZ(0,"app-form-row",8)(1,"ul",9),e.ALo(2,"translate"),e.TgZ(3,"li",10)(4,"label",11),e._UZ(5,"input",12),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"li",10)(10,"label",13),e._UZ(11,"input",14),e.TgZ(12,"span"),e._uU(13),e.ALo(14,"translate"),e.qZA()()()()()),2&r){const t=e.oxw();e.Q6J("label","Clients.Tokens.AccessTokenType")("isLast",t.checkLastRow("accessTokenType")),e.xp6(1),e.uIk("aria-label",e.lcZ(2,7,"Clients.Tokens.AccessTokenType")),e.xp6(4),e.Q6J("value","Jwt"),e.xp6(2),e.Oqu(e.lcZ(8,9,"Clients.Tokens.Jwt")),e.xp6(4),e.Q6J("value","Reference"),e.xp6(2),e.Oqu(e.lcZ(14,11,"Clients.Tokens.Reference"))}}function ga(r,l){if(1&r&&(e.TgZ(0,"app-form-row",5)(1,"app-form-toggle",15),e._UZ(2,"input",16),e.qZA()()),2&r){const t=e.oxw();e.Q6J("id","includeJwtId")("label","Clients.Tokens.IncludeJwtId")("help","Clients.Tokens.IncludeJwtIdHelp")("isLast",t.checkLastRow("includeJwtId")),e.xp6(1),e.Q6J("id","includeJwtId")}}function dh(r,l){if(1&r&&(e.TgZ(0,"app-form-row",5)(1,"app-form-toggle",15),e._UZ(2,"input",17),e.qZA()()),2&r){const t=e.oxw();e.Q6J("id","allowAccessTokensViaBrowser")("label","Clients.Tokens.AccessTokensViaBrowser")("help","Clients.Tokens.AccessTokensViaBrowserSummary")("isLast",t.checkLastRow("allowAccessTokensViaBrowser")),e.xp6(1),e.Q6J("id","allowAccessTokensViaBrowser")}}function wc(r,l){if(1&r&&(e.TgZ(0,"app-form-row",5)(1,"app-form-toggle",15),e._UZ(2,"input",18),e.qZA()()),2&r){const t=e.oxw();e.Q6J("id","alwaysIncludeUserClaimsInIdToken")("label","Clients.Tokens.IncludeUserClaimsInIdToken")("help","Clients.Tokens.IncludeUserClaimsInIdTokenHelp")("isLast",t.checkLastRow("alwaysIncludeUserClaimsInIdToken")),e.xp6(1),e.Q6J("id","alwaysIncludeUserClaimsInIdToken")}}function Tc(r,l){if(1&r&&(e.TgZ(0,"app-form-row",5),e._UZ(1,"app-lifetime-picker",19),e.qZA()),2&r){const t=e.oxw();e.Q6J("id","authorizationCodeLifetime")("label","Clients.Tokens.AuthCodeLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",t.checkLastRow("authorizationCodeLifetime")),e.xp6(1),e.Q6J("buttons",t.authorizationCodeLifetimeButtons)}}let Ac=(()=>{class r{constructor(t,i,p){this.fb=t,this.clientCachingService=i,this.clientViewService=p}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.allowIncludeJwt=this.client.accessTokenType===Og.T.Jwt,void 0===this.tokensForm&&this.createForm()}),this.setButtonModels()}ngOnDestroy(){this.subscription.unsubscribe()}setTokenTime(t,i){this.tokensForm.controls[i].setValue(60*t),this.tokensForm.markAsTouched(),this.tokensForm.markAsDirty()}createForm(){this.tokensForm=this.fb.group({identityTokenLifetime:[this.client.identityTokenLifetime,h.kI.min(0)],accessTokenLifetime:[this.client.accessTokenLifetime,h.kI.min(0)],authorizationCodeLifetime:[this.client.authorizationCodeLifetime,h.kI.min(0)],accessTokenType:[this.client.accessTokenType],allowAccessTokensViaBrowser:[this.client.allowAccessTokensViaBrowser],alwaysIncludeUserClaimsInIdToken:[this.client.alwaysIncludeUserClaimsInIdToken],includeJwtId:[{value:this.client.includeJwtId,disabled:!this.allowIncludeJwt}],allowedIdentityTokenSigningAlgorithms:[this.client.allowedIdentityTokenSigningAlgorithms]}),this.tokensForm.markAsPristine()}ngAfterViewInit(){this.subscribeToChangeDetection()}subscribeToChangeDetection(){this.tokensForm.valueChanges.subscribe(t=>{this.allowIncludeJwt=t.accessTokenType===Og.T.Jwt;const i=this.tokensForm.get("includeJwtId");this.allowIncludeJwt&&i.disabled?this.tokensForm.get("includeJwtId").enable():!this.allowIncludeJwt&&!i.disabled&&this.tokensForm.get("includeJwtId").disable();const p=JSON.parse(JSON.stringify(this.client));p.identityTokenLifetime=this.tokensForm.controls.identityTokenLifetime.value,p.accessTokenLifetime=this.tokensForm.controls.accessTokenLifetime.value,p.authorizationCodeLifetime=this.tokensForm.controls.authorizationCodeLifetime.value,p.accessTokenType=this.tokensForm.controls.accessTokenType.value,p.allowAccessTokensViaBrowser=this.tokensForm.controls.allowAccessTokensViaBrowser.value,p.includeJwtId=this.tokensForm.controls.includeJwtId.value,p.alwaysIncludeUserClaimsInIdToken=this.tokensForm.controls.alwaysIncludeUserClaimsInIdToken.value,p.allowedIdentityTokenSigningAlgorithms=this.tokensForm.controls.allowedIdentityTokenSigningAlgorithms.value,this.clientCachingService.componentDirtyValidMap.set("ClientTokensComponent",{isValid:this.tokensForm.valid}),this.clientCachingService.unsavedCache.next(p)})}setButtonModels(){this.identityTokenLifetimeButtons=[{duration:5,unit:Xr.f.Minutes},{duration:10,unit:Xr.f.Minutes}],this.accessTokenLifetimeButtons=[{duration:15,unit:Xr.f.Minutes},{duration:30,unit:Xr.f.Minutes},{duration:1,unit:Xr.f.Hour},{duration:5,unit:Xr.f.Hours}],this.authorizationCodeLifetimeButtons=[{duration:5,unit:Xr.f.Minutes},{duration:10,unit:Xr.f.Minutes}]}checkLastRow(t){const i=this.clientViewService.tokens;let p="";return i.authorizationCodeLifetime?p="authorizationCodeLifetime":i.alwaysIncludeUserClaimsInIdToken?p="alwaysIncludeUserClaimsInIdToken":i.allowAccessTokensViaBrowser?p="allowAccessTokensViaBrowser":i.includeJwtId?p="includeJwtId":i.accessTokenType?p="accessTokenType":i.accessTokenLifetime?p="accessTokenLifetime":i.identityTokenLifetime&&(p="identityTokenLifetime"),t===p}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(Vs.Z),e.Y36(Do.a))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-tokens"]],decls:10,vars:12,consts:[["id","editClientTokens",3,"formGroup"],[3,"id","label"],[3,"form","algorithmControlName"],[3,"id","label","help","isLast",4,"ngIf"],[3,"label","isLast",4,"ngIf"],[3,"id","label","help","isLast"],["id","identityTokenLifetime","formControlName","identityTokenLifetime",3,"buttons"],["id","accessTokenLifetime","formControlName","accessTokenLifetime",3,"buttons"],[3,"label","isLast"],["id","accessTokenTypeGroup","role","group",1,"tw-form-checks"],[1,"tw-form-checks__item"],["for","accessTokenTypeJwt",1,"tw-form-checks__label"],["id","accessTokenTypeJwt","type","radio","name","accessTokenType","formControlName","accessTokenType",1,"tw-form-checks__input",3,"value"],["for","accessTokenTypeReference",1,"tw-form-checks__label"],["id","accessTokenTypeReference","type","radio","name","accessTokenType","formControlName","accessTokenType",1,"tw-form-checks__input",3,"value"],[3,"id"],["id","includeJwtId","type","checkbox","formControlName","includeJwtId",1,"tw-form-switch__input"],["id","allowAccessTokensViaBrowser","type","checkbox","formControlName","allowAccessTokensViaBrowser",1,"tw-form-switch__input"],["id","alwaysIncludeUserClaimsInIdToken","type","checkbox","formControlName","alwaysIncludeUserClaimsInIdToken",1,"tw-form-switch__input"],["id","authorizationCodeLifetime","formControlName","authorizationCodeLifetime",3,"buttons"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1),e._UZ(2,"app-signing-algorithm-picker",2),e.qZA(),e.YNc(3,Io,2,5,"app-form-row",3),e.YNc(4,Gl,2,5,"app-form-row",3),e.YNc(5,pd,15,13,"app-form-row",4),e.YNc(6,ga,3,5,"app-form-row",3),e.YNc(7,dh,3,5,"app-form-row",3),e.YNc(8,wc,3,5,"app-form-row",3),e.YNc(9,Tc,2,5,"app-form-row",3),e.qZA()),2&t&&(e.Q6J("formGroup",i.tokensForm),e.xp6(1),e.Q6J("id","allowedIdentityTokenSigningAlgorithms")("label","Clients.Tokens.AllowedIdentityTokenSigningAlgorithms"),e.xp6(1),e.Q6J("form",i.tokensForm)("algorithmControlName","allowedIdentityTokenSigningAlgorithms"),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.identityTokenLifetime),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.accessTokenLifetime),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.accessTokenType),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.includeJwtId),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.allowAccessTokensViaBrowser),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.alwaysIncludeUserClaimsInIdToken),e.xp6(1),e.Q6J("ngIf",i.clientViewService.tokens.authorizationCodeLifetime))},dependencies:[z.O5,h._Y,h.Fj,h.Wl,h._,h.JJ,h.JL,h.sg,h.u,Cc.U,Dn.L,ds.O,bc,Ut.X$],encapsulation:2}),r})();const Sc=function(r){return[r]};let xc=(()=>{class r{constructor(t,i,p,C,K,Ce){this.fb=t,this.clientViewService=i,this.clientCachingService=p,this.router=C,this.relyingPartyCachingService=K,this.serviceProviderCachingService=Ce}get ReadOnlyFieldType(){return cl.O}ngOnInit(){this.takeClient(),this.routerSubscription=this.router.events.subscribe(t=>{t instanceof yn.m2&&this.takeClient()})}takeClient(){this.clientCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.client=t,this.createForm()})}ngAfterViewInit(){this.clientFormSubscription=this.clientForm.valueChanges.subscribe(t=>{this.clientCachingService.componentDirtyValidMap.set("ClientDetailsComponent",{isValid:this.clientForm.valid});const i=JSON.parse(JSON.stringify(this.client));i.clientId=this.clientForm.controls.clientId.value,i.description=this.clientForm.controls.description.value,i.clientName=this.clientForm.controls.clientName.value,i.enabled=this.clientForm.controls.enabled.value,this.clientCachingService.unsavedCache.next(i)})}ngOnDestroy(){this.clientFormSubscription.unsubscribe(),this.routerSubscription.unsubscribe()}createForm(){this.clientForm=this.fb.group({clientId:[this.client.clientId],clientName:[this.client.clientName,h.kI.required],enabled:[this.client.enabled],description:[this.client.description]}),this.clientForm.markAsPristine()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(Do.a),e.Y36(Vs.Z),e.Y36(yn.F0),e.Y36(Ra.N),e.Y36(Al.S))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-details"]],decls:11,vars:21,consts:[["id","editClientDetails",3,"formGroup"],[3,"id","label"],[3,"id","isTraffic"],["id","clientEnabled","type","checkbox","formControlName","enabled",1,"tw-form-switch__input"],[3,"id","label","help"],[1,"tw-h-full",3,"fieldType","values"],["type","text","name","DisplayName","id","clientName","formControlName","clientName",1,"tw-form-control"],[3,"id","label","help","isLast"],["id","clientDescription","formControlName","description",1,"tw-form-control"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"app-form-row",1)(2,"app-form-toggle",2),e._UZ(3,"input",3),e.qZA()(),e.TgZ(4,"app-form-row",4),e._UZ(5,"app-readonly",5),e.ALo(6,"readOnlyValue"),e.qZA(),e.TgZ(7,"app-form-row",4),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"app-form-row",7),e._UZ(10,"textarea",8),e.qZA()()),2&t&&(e.Q6J("formGroup",i.clientForm),e.xp6(1),e.Q6J("id","clientEnabled")("label","Common.Enabled"),e.xp6(1),e.Q6J("id","clientEnabled")("isTraffic",!0),e.xp6(2),e.Q6J("id","clientId")("label","Clients.ID")("help","Clients.IDHelp"),e.xp6(1),e.Q6J("fieldType",i.ReadOnlyFieldType.Single)("values",e.VKq(19,Sc,e.lcZ(6,17,i.client.clientId))),e.xp6(2),e.Q6J("id","clientName")("label","Common.DisplayName")("help","Clients.DisplayNameHelp"),e.xp6(2),e.Q6J("id","clientDescription")("label","Common.Description")("help","Clients.DescriptionHelp")("isLast",!0))},dependencies:[h.Fj,h.Wl,h.JJ,h.JL,h.sg,h.u,Dn.L,ds.O,ha.f,Vl.b],encapsulation:2}),r})();const Ec=["secretPicker"];let Dc=(()=>{class r{constructor(t,i,p,C){this.clientService=t,this.clientCachingService=i,this.toastr=p,this.translate=C}ngOnInit(){this.requireSecretsubscription=this.clientCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.requireSecret=t.requireClientSecret}),this.manageSecretStreams()}ngOnDestroy(){this.requireSecretsubscription.unsubscribe(),this.secretAddSubscription.unsubscribe(),this.secretDeleteSubscription.unsubscribe()}submit(){const t=JSON.parse(JSON.stringify(this.client));t.requireClientSecret=this.requireSecret,this.clientCachingService.componentDirtyValidMap.set("ClientSecretsComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}manageSecretStreams(){this.secretAddSubscription=this.secretPicker.secretsAddStream.subscribe(t=>{this.clientService.addClientSecret(this.client.id,t).subscribe(i=>{this.refreshSecrets()},i=>{this.toastr.error(this.translate.instant("Clients.UnableToAddSecret"),this.translate.instant("Notifications.Error"))})}),this.secretDeleteSubscription=this.secretPicker.secretsRemoveStream.subscribe(t=>{this.clientService.removeClientSecret(this.client.id,t).subscribe(i=>{const p=JSON.parse(JSON.stringify(this.client)),C=p.clientSecrets.findIndex(K=>K.id===t.id);p.clientSecrets.splice(C,1),this.client=p,this.clientCachingService.unsavedCache.next(p),this.toastr.success(this.translate.instant("Clients.RemovedSecret"),this.translate.instant("Notifications.Saving Success Title"))},i=>{this.toastr.error(this.translate.instant("Clients.UnableToRemoveSecret"),this.translate.instant("Notifications.Error"))})})}refreshSecrets(){this.clientService.getClient(this.client.id).subscribe(t=>{this.client.clientSecrets=t.clientSecrets,this.clientCachingService.unsavedCache.next(this.client),this.toastr.success(this.translate.instant("Clients.AddedSecret"),this.translate.instant("Notifications.Saving Success Title"))})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(fc.a),e.Y36(Vs.Z),e.Y36(si._W),e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-secrets"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ec,7),2&t){let p;e.iGM(p=e.CRH())&&(i.secretPicker=p.first)}},decls:5,vars:7,consts:[[3,"id","label","help"],[3,"id"],["id","requireSecret","type","checkbox","name","requireSecret",1,"tw-form-switch__input",3,"ngModel","ngModelChange","change"],[3,"clientSecrets","nonModelCertPicker"],["secretPicker",""]],template:function(t,i){1&t&&(e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",1)(2,"input",2),e.NdJ("ngModelChange",function(C){return i.requireSecret=C})("change",function(){return i.submit()}),e.qZA()()(),e._UZ(3,"app-secret-picker",3,4)),2&t&&(e.Q6J("id","requireSecret")("label","Clients.RequireSecret.Title")("help","Clients.RequireSecret.Help"),e.xp6(1),e.Q6J("id","requireSecret"),e.xp6(1),e.Q6J("ngModel",i.requireSecret),e.xp6(1),e.Q6J("clientSecrets",i.client.clientSecrets)("nonModelCertPicker",!1))},dependencies:[h.Wl,h.JJ,h.On,kp.P,Dn.L,ds.O],encapsulation:2}),r})();function Ic(r,l){1&r&&e._UZ(0,"app-custom-tab",3),2&r&&e.Q6J("tabTitle","Nav.IdentityResources")("tabValue","identity")}function Mc(r,l){1&r&&e._UZ(0,"app-custom-tab",3),2&r&&e.Q6J("tabTitle","Nav.ProtectedResources")("tabValue","protected")}let kg=(()=>{class r{constructor(t){this.clientViewService=t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Do.a))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-resources"]],decls:5,vars:3,consts:[[3,"pillMode"],[3,"tabTitle","tabValue",4,"ngIf"],["id","editClientResources"],[3,"tabTitle","tabValue"]],template:function(t,i){1&t&&(e.TgZ(0,"app-custom-tabs",0),e.YNc(1,Ic,1,2,"app-custom-tab",1),e.YNc(2,Mc,1,2,"app-custom-tab",1),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"router-outlet"),e.qZA()),2&t&&(e.Q6J("pillMode",!0),e.xp6(1),e.Q6J("ngIf",i.clientViewService.resources.allowedScopesIdentity),e.xp6(1),e.Q6J("ngIf",i.clientViewService.resources.allowedScopesAPI))},dependencies:[z.O5,yn.lC,yl.v,Ea.x],encapsulation:2}),r})();var Rg=m(7199);class Pg{}var zl=m(8564);let hd=(()=>{class r{constructor(t,i){this.http=t,this.headersService=i,this.actionUrl="policy",this.headers=i.setHeaders()}getAccessPolicy(){return this.http.get(this.actionUrl,{headers:this.headers})}updateAccessPolicy(t){return this.http.put(this.actionUrl,t,{headers:this.headers})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(S.eN),e.LFG(zl.s))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();class Lg{constructor(l,t,i){this.isDateTime=!1,this.type=l,this.value=t,this.permission=i}}const Ug=["addPolicyModal"];function Bg(r,l){if(1&r&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function Fg(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"input",31),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.value=p)}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("ngModel",t.value)}}function SC(r,l){if(1&r&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.xp6(1),e.hij(" ",null==t?null:t.name," ")}}function xC(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",11)(1,"select",32),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.value=p)}),e.YNc(2,SC,2,1,"option",13),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.value),e.xp6(1),e.Q6J("ngForOf",t.avaliableRoles)}}function Zg(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"input",31),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.value=p)}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("ngModel",t.value)}}function EC(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"input",33),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.value=p)}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("ngModel",t.value)}}function Vg(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",11)(1,"select",32),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.value=p)}),e.TgZ(2,"option",34),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"option",35),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngModel",t.value),e.xp6(2),e.Oqu(e.lcZ(4,3,"Common.True")),e.xp6(3),e.Oqu(e.lcZ(7,5,"Common.False"))}}function ph(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",36)(1,"app-enum-claim-type-input",37),e.NdJ("valueChanged",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.value=p)}),e.qZA()()}if(2&r){const t=e.oxw();e.Q6J("id","value-for-"+t.selectedClaimType.id),e.xp6(1),e.Q6J("id","claimsFormInput")("typeId",t.selectedClaimType.id)("hostingModal","addPolicyModal")("value",t.value)}}function hh(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-date-time",40),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2);return e.KtG(C.value=p)}),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.value)}}function DC(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-date-time",41),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2);return e.KtG(C.value=p)}),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngModel",t.value)("displayType","date")}}function fd(r,l){if(1&r&&(e.TgZ(0,"div",38),e.YNc(1,hh,2,1,"ng-container",39),e.YNc(2,DC,2,2,"ng-container",39),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf","birthdate"!=t.claimType),e.xp6(1),e.Q6J("ngIf","birthdate"==t.claimType)}}function md(r,l){if(1&r&&(e.TgZ(0,"option",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r){const t=l.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,"Permission."+t)," ")}}const fh=function(){return{animated:!1,backdrop:"static"}};let IC=(()=>{class r{constructor(t){this.toastr=t,this.added=new e.vpe,this.addAnother=!1}keydown(t){"Enter"===t.key&&this.isValid()&&this.addPolicy()}getClaimType(){this.selectedClaimType=this.avaliableClaimTypes.find(t=>t.name===this.claimType)}isValid(){return null!=this.claimType&&null!=this.value&&null!=this.permission}addAnotherPolicy(){this.addAnother=!0,this.addPolicy()}addPolicy(){const t=new Lg(this.claimType,this.value,this.permission);this.added.next(t),this.addAnother?(this.reset(),this.addAnother=!1):this.hide()}reset(){this.selectedClaimType=void 0,this.claimType=void 0,this.value=void 0,this.permission=void 0}hide(){this.addPolicyModal.hide()}show(){this.reset(),this.addPolicyModal.show()}ngOnDestroy(){this.hide()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(si._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-accesspolicy"]],viewQuery:function(t,i){if(1&t&&e.Gf(Ug,7),2&t){let p;e.iGM(p=e.CRH())&&(i.addPolicyModal=p.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown",function(C){return i.keydown(C)},!1,e.evT)},inputs:{avaliableClaimTypes:"avaliableClaimTypes",avaliableRoles:"avaliableRoles",avaliablePermissions:"avaliablePermissions",accessPolicy:"accessPolicy"},outputs:{added:"added"},decls:46,vars:38,consts:[["bsModal","","id","addPolicyModal","tabindex","-1","role","dialog","aria-hidden","true",1,"modal",3,"config"],["addPolicyModal","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","scrollbars"],[3,"id","label"],[1,"tw-form-select"],["id","addClaimType","required","",1,"tw-form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"id","label","help"],["id","formClaimValue","class","tw-form-control","type","text","required","",3,"ngModel","ngModelChange",4,"ngIf"],["class","tw-form-select",4,"ngIf"],["id","formClaimValue","class","tw-form-control","type","number","required","",3,"ngModel","ngModelChange",4,"ngIf"],["class","",3,"id",4,"ngIf"],["class","tw-w-full sm:tw-max-w-2xl",4,"ngIf"],[3,"id","label","isLast"],["id","addClaimPermission","required","",1,"tw-form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["type","submit","id","addPolicySubmit",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],[1,"tw-hidden","xs:tw-inline"],["type","button","id","addPolicyReSubmit",1,"tw-btn",3,"disabled","click"],[1,"tw-btn-link","tw--mr-4",3,"click"],["id","formClaimValue","type","text","required","",1,"tw-form-control",3,"ngModel","ngModelChange"],["id","formClaimValue","required","",1,"tw-form-control",3,"ngModel","ngModelChange"],["id","formClaimValue","type","number","required","",1,"tw-form-control",3,"ngModel","ngModelChange"],["value","true"],["value","false"],[1,"",3,"id"],[3,"id","typeId","hostingModal","value","valueChanged"],[1,"tw-w-full","sm:tw-max-w-2xl"],[4,"ngIf"],["id","formClaimValue","required","true",3,"ngModel","ngModelChange"],["id","formClaimValue","required","true",3,"ngModel","displayType","ngModelChange"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.hide()}),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",9)(14,"app-form-row",10)(15,"div",11)(16,"select",12),e.NdJ("ngModelChange",function(C){return i.claimType=C})("ngModelChange",function(){return i.getClaimType()}),e._UZ(17,"option"),e.YNc(18,Bg,2,1,"option",13),e.qZA()()(),e.TgZ(19,"app-form-row",14),e.YNc(20,Fg,1,1,"input",15),e.YNc(21,xC,3,2,"div",16),e.YNc(22,Zg,1,1,"input",15),e.YNc(23,EC,1,1,"input",17),e.YNc(24,Vg,8,7,"div",16),e.YNc(25,ph,2,5,"div",18),e.YNc(26,fd,3,2,"div",19),e.qZA(),e.TgZ(27,"app-form-row",20)(28,"div",11)(29,"select",21),e.NdJ("ngModelChange",function(C){return i.permission=C}),e._UZ(30,"option"),e.YNc(31,md,3,4,"option",22),e.qZA()()()(),e._UZ(32,"div",23),e.TgZ(33,"div",24)(34,"div",25)(35,"div",26)(36,"button",27),e.NdJ("click",function(){return i.addPolicy(),i.hide()}),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"span",28)(40,"button",29),e.NdJ("click",function(){return i.addAnotherPolicy()}),e._uU(41),e.ALo(42,"translate"),e.qZA()()(),e.TgZ(43,"button",30),e.NdJ("click",function(){return i.hide()}),e._uU(44),e.ALo(45,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("config",e.DdM(37,fh)),e.xp6(6),e.Oqu(e.lcZ(7,27,"Settings.AccessPolicy.NewPolicy")),e.xp6(5),e.Oqu(e.lcZ(12,29,"Common.Close")),e.xp6(3),e.Q6J("id","addClaimType")("label","Settings.AccessPolicy.ClaimType"),e.xp6(2),e.Q6J("ngModel",i.claimType),e.xp6(2),e.Q6J("ngForOf",i.avaliableClaimTypes),e.xp6(1),e.Q6J("id","formClaimValue")("label","Settings.AccessPolicy.ClaimValue")("help","DateTime"==(null==i.selectedClaimType?null:i.selectedClaimType.valueType)?"Common.Dates.UTCWarning":""),e.xp6(1),e.Q6J("ngIf",null==i.claimType||""==i.claimType),e.xp6(1),e.Q6J("ngIf","role"==i.claimType),e.xp6(1),e.Q6J("ngIf","String"==(null==i.selectedClaimType?null:i.selectedClaimType.valueType)&&"role"!=i.claimType),e.xp6(1),e.Q6J("ngIf","Int"==(null==i.selectedClaimType?null:i.selectedClaimType.valueType)&&"role"!=i.claimType),e.xp6(1),e.Q6J("ngIf","Boolean"==(null==i.selectedClaimType?null:i.selectedClaimType.valueType)&&"role"!=i.claimType),e.xp6(1),e.Q6J("ngIf","Enum"==(null==i.selectedClaimType?null:i.selectedClaimType.valueType)),e.xp6(1),e.Q6J("ngIf","DateTime"==(null==i.selectedClaimType?null:i.selectedClaimType.valueType)&&"role"!=i.claimType),e.xp6(1),e.Q6J("id","addClaimPermission")("label","Settings.AccessPolicy.Permission")("isLast",!0),e.xp6(2),e.Q6J("ngModel",i.permission),e.xp6(2),e.Q6J("ngForOf",i.avaliablePermissions),e.xp6(5),e.Q6J("disabled",!i.isValid()),e.xp6(1),e.Oqu(e.lcZ(38,31,"Common.Add")),e.xp6(3),e.Q6J("disabled",!i.isValid()),e.xp6(1),e.Oqu(e.lcZ(42,33,"Common.AddAndAdd")),e.xp6(3),e.Oqu(e.lcZ(45,35,"Common.Cancel")))},dependencies:[z.sg,z.O5,h.YN,h.Kr,h.Fj,h.wV,h.EJ,h.JJ,h.Q7,h.On,le.oB,Dn.L,oc,Fl.j,Ut.X$],encapsulation:2}),r})();const gd=["deleteAccessPolicyModal"];function _d(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-action-bar"),e.ynx(1,24),e.TgZ(2,"button",25),e.NdJ("click",function(){e.CHM(t),e.oxw();const p=e.MAs(1);return e.KtG(p.show())}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.BQk(),e.qZA()}2&r&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"Settings.AccessPolicy.Add")," "))}function mh(r,l){1&r&&e._UZ(0,"app-simple-loader")}function Hg(r,l){if(1&r&&(e.TgZ(0,"td",39),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.value," ")}}function gh(r,l){if(1&r&&(e.TgZ(0,"td",39),e._uU(1),e.ALo(2,"standardDate"),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.value)," ")}}function Jg(r,l){1&r&&(e.TgZ(0,"span",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Reserved")," "))}function qg(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const p=e.oxw().$implicit,C=e.oxw(2);return e.KtG(C.openDeletePolicyConfirmation(p.type,p.value,p.permission))}),e._UZ(1,"span",14),e.TgZ(2,"span",15),e._uU(3),e.ALo(4,"translate"),e.qZA()()}2&r&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"Common.Remove.Title")," "))}const _h=function(r){return{"inactive disabled":r}};function Qg(r,l){if(1&r&&(e.TgZ(0,"tr",32)(1,"td",33)(2,"b"),e._uU(3),e.qZA()(),e.YNc(4,Hg,2,1,"td",34),e.YNc(5,gh,3,3,"ng-template",null,35,e.W1O),e.TgZ(7,"td",36),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"td"),e.YNc(11,Jg,3,3,"span",37),e.qZA(),e.TgZ(12,"td"),e.YNc(13,qg,5,3,"button",38),e.qZA()()),2&r){const t=l.$implicit,i=e.MAs(6);e.Q6J("ngClass",e.VKq(9,_h,"role"===t.type&&"AdminUI Administrator"===t.value&&"All"===t.permission)),e.xp6(3),e.Oqu(t.type),e.xp6(1),e.Q6J("ngIf",!t.isDateTime)("ngIfElse",i),e.xp6(4),e.hij(" ",e.lcZ(9,7,"Permission."+t.permission)," "),e.xp6(3),e.Q6J("ngIf","role"===t.type&&"AdminUI Administrator"===t.value&&"All"===t.permission),e.xp6(2),e.Q6J("ngIf",!("role"==t.type&&"AdminUI Administrator"==t.value&&"All"==t.permission))}}function MC(r,l){if(1&r&&(e.TgZ(0,"table",26)(1,"thead")(2,"tr")(3,"th",27),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",28),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",29),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",30)(13,"span",15),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"th",30)(17,"span",15),e._uU(18),e.ALo(19,"translate"),e.qZA()()()(),e.TgZ(20,"tbody"),e.YNc(21,Qg,14,11,"tr",31),e.qZA(),e._UZ(22,"tbody"),e.qZA()),2&r){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,6,"Settings.AccessPolicy.ClaimType")),e.xp6(3),e.Oqu(e.lcZ(8,8,"Settings.AccessPolicy.ClaimValue")),e.xp6(3),e.Oqu(e.lcZ(11,10,"Settings.AccessPolicy.Permission")),e.xp6(4),e.Oqu(e.lcZ(15,12,"Common.Reserved")),e.xp6(4),e.Oqu(e.lcZ(19,14,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",null==t.accessPolicy?null:t.accessPolicy.policyClaims)}}function Wg(r,l){if(1&r&&e._UZ(0,"app-pager",42),2&r){const t=e.oxw();e.Q6J("totalResults",null==t.accessPolicy||null==t.accessPolicy.policyClaims?null:t.accessPolicy.policyClaims.length)}}const jg=function(){return{animated:!1,backdrop:"static"}};let Kg=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue){this.accessPolicyService=t,this.translate=i,this.toastr=p,this.errorService=C,this.healthCheckService=K,this.dialogService=Ce,this.activatedRoute=Ue,this.isLoading=!0,this.hasChanged=!1,this.saveDisabled=!1}ngOnInit(){this.activatedRoute.data.subscribe(t=>{this.accessPolicyResolverData=t.accessPolicyObject,this.avaliablePermissions=this.accessPolicyResolverData.permissions;const i=this.accessPolicyResolverData.accessPolicy.policyClaims.find(p=>"role"===p.type&&"AdminUI Administrator"===p.value&&"All"===p.permission);this.accessPolicy=new Pg,this.accessPolicy.version=this.accessPolicyResolverData.accessPolicy.version,this.accessPolicy.policyClaims=this.accessPolicyResolverData.accessPolicy.policyClaims.sort((p,C)=>p===i?-1:C===i?1:0),this.accessPolicy.policyClaims.forEach(p=>{gi.ou.fromISO(p.value).isValid&&(p.isDateTime=!0)}),this.avaliableClaimTypes=this.accessPolicyResolverData.claimTypes.sort((p,C)=>p.name.toUpperCase()<C.name.toUpperCase()?-1:p.name.toUpperCase()>C.name.toUpperCase()?1:0),this.avaliableRoles=this.accessPolicyResolverData.roles,this.isLoading=!1})}canDeactivate(){return!this.hasChanged||(this.dialogService.confirm(),this.dialogService.eventStream)}getClaimType(){this.selectedClaimType=this.avaliableClaimTypes.find(t=>t.name===this.claimType)}warnToSave(){this.toastr.info(this.translate.instant("Notifications.DontForgetToSave"),this.translate.instant("Notifications.Notice"))}addPolicy(t){this.hasChanged=!0,this.accessPolicy.policyClaims.push(t),this.warnToSave()}openDeletePolicyConfirmation(t,i,p){this.indexToDelete=this.accessPolicy.policyClaims.findIndex(C=>C.type===t&&C.value===i&&C.permission===p),this.deleteAccessPolicyModal.show()}closeDeleteModal(){this.indexToDelete=null,this.deleteAccessPolicyModal.hide()}removePolicy(t){this.accessPolicy.policyClaims.splice(t,1),this.hasChanged=!0,this.deleteAccessPolicyModal.hide(),this.warnToSave()}updatePolicy(){this.saveDisabled=!0,this.accessPolicyService.updateAccessPolicy(this.accessPolicy).subscribe(t=>{this.accessPolicy=t;const i=this.accessPolicy.policyClaims.find(p=>"role"===p.type&&"AdminUI Administrator"===p.value&&"All"===p.permission);this.accessPolicy.policyClaims.sort((p,C)=>p===i?-1:C===i?1:0),this.toastr.success(this.translate.instant("Settings.AccessPolicy.AccessPolicyUpdated"),this.translate.instant("Notifications.Success"))},t=>{"409"===t.code?this.toastr.error(this.translate.instant("Settings.AccessPolicy.AccessPolicyConflict"),this.translate.instant("Notifications.Error")):this.errorService.handleError(t)},()=>{this.saveDisabled=!1}),this.hasChanged=!1}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(hd),e.Y36(Ut.sK),e.Y36(si._W),e.Y36(Ee.T),e.Y36(Ci.G),e.Y36(ja.x),e.Y36(yn.gz))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-update-accesspolicy"]],viewQuery:function(t,i){if(1&t&&e.Gf(gd,7),2&t){let p;e.iGM(p=e.CRH())&&(i.deleteAccessPolicyModal=p.first)}},inputs:{claimType:"claimType",permission:"permission",value:"value"},decls:39,vars:29,consts:[[3,"avaliableClaimTypes","avaliableRoles","avaliablePermissions","accessPolicy","added"],["addPolicyModal",""],[1,"tw-container","tw-mx-auto"],[4,"ngIf"],["class","datatable hover",4,"ngIf"],["hidePager","true",3,"totalResults",4,"ngIf"],["id","save",1,"tw-btn-success","tw-mr-3","tw-mb-3",3,"disabled","click"],["bsModal","","id","deleteAccessPolicyModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["deleteAccessPolicyModal","bs-modal"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-center","scrollbars"],[1,"tw-mb-4"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items"],[1,"tw-mr-auto"],[1,"tw-btn-danger",3,"click"],[1,"tw-btn-link","tw--mr-4",3,"click"],["right",""],[1,"tw-btn-success",3,"click"],[1,"datatable","hover"],[1,"md:tw-w-1/4"],[1,"tw-hidden","md:tw-table-cell"],[1,"tw-hidden","lg:tw-table-cell"],[1,"tw-w-1"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"tw-w-0","tw-truncate"],["class","tw-hidden tw-max-w-0 tw-truncate md:tw-table-cell",4,"ngIf","ngIfElse"],["dateTimePolicy",""],[1,"tw-hidden","tw-max-w-0","tw-truncate","lg:tw-table-cell"],["class","tw-pill",4,"ngIf"],["id","remove","class","tw-btn-link tw-btn-small tw-text-red-500",3,"click",4,"ngIf"],[1,"tw-hidden","tw-max-w-0","tw-truncate","md:tw-table-cell"],[1,"tw-pill"],["id","remove",1,"tw-btn-link","tw-btn-small","tw-text-red-500",3,"click"],["hidePager","true",3,"totalResults"]],template:function(t,i){1&t&&(e.TgZ(0,"app-add-accesspolicy",0,1),e.NdJ("added",function(C){return i.addPolicy(C)}),e.qZA(),e.TgZ(2,"div",2),e.YNc(3,_d,5,3,"app-action-bar",3),e.YNc(4,mh,1,0,"app-simple-loader",3),e.YNc(5,MC,23,16,"table",4),e.YNc(6,Wg,1,1,"app-pager",5),e.qZA(),e.TgZ(7,"app-button-bar")(8,"button",6),e.NdJ("click",function(){return i.updatePolicy()}),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",7,8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"h5",12),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"button",13),e.NdJ("click",function(){return i.closeDeleteModal()}),e._UZ(20,"span",14),e.TgZ(21,"span",15),e._uU(22),e.ALo(23,"translate"),e.qZA()()(),e.TgZ(24,"div",16)(25,"p",17),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e._UZ(28,"div",18),e.TgZ(29,"div",19)(30,"div",20)(31,"div",21)(32,"button",22),e.NdJ("click",function(){return i.removePolicy(i.indexToDelete)}),e._uU(33),e.ALo(34,"translate"),e.qZA()(),e.TgZ(35,"button",23),e.NdJ("click",function(){return i.closeDeleteModal()}),e._uU(36),e.ALo(37,"translate"),e.qZA()()()()()(),e._UZ(38,"app-can-deactivate")),2&t&&(e.Q6J("avaliableClaimTypes",i.avaliableClaimTypes)("avaliableRoles",i.avaliableRoles)("avaliablePermissions",i.avaliablePermissions)("accessPolicy",i.accessPolicy),e.xp6(3),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.accessPolicy||null==i.accessPolicy.policyClaims?null:i.accessPolicy.policyClaims.length)>0&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.accessPolicy||null==i.accessPolicy.policyClaims?null:i.accessPolicy.policyClaims.length)>0&&!i.isLoading),e.xp6(2),e.Q6J("disabled",i.saveDisabled),e.xp6(1),e.hij(" ",e.lcZ(10,16,"Common.Save")," "),e.xp6(2),e.Q6J("config",e.DdM(28,jg)),e.xp6(6),e.Oqu(e.lcZ(18,18,"Common.Delete.Confirm")),e.xp6(5),e.Oqu(e.lcZ(23,20,"Common.Close")),e.xp6(4),e.Oqu(e.lcZ(27,22,"Common.Delete.AreYouSureSimple3")),e.xp6(7),e.Oqu(e.lcZ(34,24,"Common.Delete.Title")),e.xp6(3),e.Oqu(e.lcZ(37,26,"Common.Delete.No")))},dependencies:[z.mk,z.sg,z.O5,le.oB,Ia.J,wt.P,En.w,kt.K,pa.N,IC,Ut.X$,wp.g9],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var $g=m(2076),NC=m(1058);function Gg(r,l){1&r&&e._UZ(0,"span",28)}let zg=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue){this.authService=t,this.securityService=i,this.titleService=p,this.healthCheckService=C,this.localizeRouter=K,this.router=Ce,this.loginTrackingService=Ue,this.loginAllowed=!1,this.startLogin=!1,this.versionNumber="",this.titleService.setTitle(`${He.de.SITE_TITLE}`),this.versionNumber=ge;const lt=new Date;this.appCopyright=2017!==lt.getFullYear()?"2017 - "+lt.getFullYear():"2017"}ngOnInit(){this.startLogin=!1;const t=this.healthCheckService.idsHealthCheckComplete.pipe((0,tr.P)()),i=this.healthCheckService.uiHealthCheckComplete.pipe((0,tr.P)());(0,Xs.D)([t,i]).subscribe(()=>{this.healthCheckService.idsReady&&this.healthCheckService.uiReady&&(this.loginAllowed=!0)}),this.apiDocsLink="/swagger"}canLogin(){this.healthCheckService.idsReady&&this.healthCheckService.uiReady&&(this.loginAllowed=!0)}ngAfterViewInit(){document.dispatchEvent(new Event("appready"))}start(){const t=this.localizeRouter.translateRoute("/home");return this.startLogin=!0,(0,$g.D)(this.router.navigate([t]))}login(){this.loginTrackingService.startLogin(),this.authService.login()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(hr.e),e.Y36(ti.I),e.Y36(n.Dx),e.Y36(Ci.G),e.Y36(Un.An),e.Y36(yn.F0),e.Y36(NC.U))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-landing-page"]],decls:49,vars:26,consts:[[1,"tw-fixed","tw-inset-0","tw-z-10"],[1,"tw-bg-primary-500","tw-absolute","tw-inset-0",2,"background-image","url(assets/img/pattern.png)"],[1,"tw--mt-5","tw-mx-auto","tw--mb-10","tw-relative","tw-z-20"],[1,"tw-flex","tw-items-center","tw-h-16","tw-mb-4"],["src","assets/img/logo-persimmon.png","alt","AdminUI",1,"tw-h-8"],[1,"tw-text-sm","tw-font-semibold","tw-text-white-75","tw-ml-auto"],[1,"tw-px-6"],[1,"tw-bg-white","tw-p-6","tw--mx-6","tw-shadow","tw-rounded","md:tw-mx-auto","md:tw-max-w-2xl"],[1,"tw-text-xl","tw-font-semibold","md:tw-text-2xl"],[1,"tw-font-semibold","tw-mt-3"],[1,"tw-text-sm","tw-mt-2"],["href","mailto:sales@identityserver.com?subject=AdminUI",1,"tw-text-blue-500","tw-font-semibold","hover:tw-text-body","trans"],[1,"tw-mt-4"],["id","loginBtn",1,"tw-btn","tw-btn-success",3,"disabled","click"],["class","fad fa-spinner-third fa-spin tw-text-green-400 tw-text-xs tw-ml-3","aria-hidden","true",4,"ngIf"],[1,"tw-flex","tw-flex-wrap","tw-items-center","tw-border-t","tw-border-grey-200","tw-text-sm","tw--mx-6","tw--mb-2","tw-mt-6","tw-pt-4","tw-px-6"],[1,"tw-flex","tw-items-center","tw-mr-3"],["target","_blank",1,"tw-inline-block","tw-text-blue-500","hover:tw-text-body","trans",3,"href"],["aria-hidden","true",1,"tw-ml-3","tw-opacity-50"],["href","documentation/index.html","target","_blank",1,"tw-inline-block","tw-text-blue-500","hover:tw-text-body","trans"],[1,"tw-flex","tw-items-center"],["href","mailto:support@identityserver.com?subject=AdminUI",1,"tw-inline-block","tw-text-blue-500","hover:tw-text-body","trans"],[1,"tw-bg-white","tw-mt-6","tw-p-6","tw--mx-6","tw-shadow","tw-rounded","md:tw-mx-auto","md:tw-max-w-2xl","md:tw-mt-8","lg:tw-mt-10"],["altTheme","true"],["id","copyright",1,"tw-text-center","tw-mt-6","md:tw-mt-8","lg:tw-mt-10"],["id","RSKBackLink","href","https://www.rocksolidknowledge.com","target","_blank","rel","noopener",1,"tw-inline-block","tw-text-white-50","hover:tw-text-white"],["src","assets/img/rsk-logo.png","alt","Rock Solid Knowledge","aria-hidden","true",1,"tw-block","tw-w-40","tw-mx-auto"],[1,"tw-block","tw-text-xs","tw-mt-2"],["aria-hidden","true",1,"fad","fa-spinner-third","fa-spin","tw-text-green-400","tw-text-xs","tw-ml-3"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.qZA(),e.TgZ(2,"div",2)(3,"header",3),e._UZ(4,"img",4),e.TgZ(5,"span",5),e._uU(6),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"h2",8),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"p",9),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"p",10),e._uU(16),e.ALo(17,"translate"),e.TgZ(18,"a",11),e._uU(19," sales@identityserver.com "),e.qZA()(),e.TgZ(20,"div",12)(21,"button",13),e.NdJ("click",function(){return i.login()}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.YNc(24,Gg,1,0,"span",14),e.qZA(),e.TgZ(25,"ul",15)(26,"li",16)(27,"a",17),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"span",18),e._uU(31,"\u2022"),e.qZA()(),e.TgZ(32,"li",16)(33,"a",19),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"span",18),e._uU(37,"\u2022"),e.qZA()(),e.TgZ(38,"li",20)(39,"a",21),e._uU(40),e.ALo(41,"translate"),e.qZA()()()(),e.TgZ(42,"div",22),e._UZ(43,"app-rss-feed",23),e.qZA(),e.TgZ(44,"footer",24)(45,"a",25),e._UZ(46,"img",26),e.TgZ(47,"span",27),e._uU(48),e.qZA()()()()()),2&t&&(e.xp6(6),e.hij("v",i.versionNumber,""),e.xp6(4),e.hij("",e.lcZ(11,12,"LandingPage.Welcome")," AdminUI"),e.xp6(3),e.Oqu(e.lcZ(14,14,"LandingPage.IntroParagraph1")),e.xp6(3),e.hij(" ",e.lcZ(17,16,"LandingPage.IntroParagraph2")," "),e.xp6(5),e.Q6J("disabled",!i.loginAllowed||i.startLogin),e.xp6(1),e.hij(" ",e.lcZ(23,18,"Nav.Login")," "),e.xp6(2),e.Q6J("ngIf",i.startLogin),e.xp6(3),e.s9C("href",i.apiDocsLink,e.LSH),e.xp6(1),e.hij(" ",e.lcZ(29,20,"LandingPage.APIDocs")," "),e.xp6(6),e.hij(" ",e.lcZ(35,22,"LandingPage.Documentation")," "),e.xp6(6),e.hij(" ",e.lcZ(41,24,"Nav.Support")," "),e.xp6(8),e.hij("\xa9 ",i.appCopyright,""))},dependencies:[z.O5,il,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();function vh(r,l){1&r&&e._UZ(0,"app-simple-loader")}function vd(r,l){1&r&&(e.TgZ(0,"div",6)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"UserLogins.NoLogins")))}function yh(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",14)(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"td",15),e._uU(5),e.qZA(),e.TgZ(6,"td",15),e._uU(7),e.qZA(),e.TgZ(8,"td")(9,"button",16),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.modalInfo(C))}),e._UZ(10,"span",17),e.TgZ(11,"span",11),e._uU(12),e.ALo(13,"translate"),e.qZA()()()()}if(2&r){const t=l.$implicit;e.xp6(3),e.Oqu(t.providerDisplayName),e.xp6(2),e.Oqu(t.loginProvider),e.xp6(2),e.Oqu(t.providerKey),e.xp6(5),e.Oqu(e.lcZ(13,4,"Common.Revoke"))}}function Yg(r,l){if(1&r&&(e.TgZ(0,"table",7)(1,"thead")(2,"tr")(3,"th",8),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",9),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",9),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",10)(13,"span",11),e._uU(14),e.ALo(15,"translate"),e.qZA()()()(),e.TgZ(16,"tbody",12),e.YNc(17,yh,14,6,"tr",13),e.qZA()()),2&r){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,5,"UserLogins.ProviderDisplayName")),e.xp6(3),e.Oqu(e.lcZ(8,7,"UserLogins.LoginProvider")),e.xp6(3),e.Oqu(e.lcZ(11,9,"UserLogins.ProviderKey")),e.xp6(4),e.Oqu(e.lcZ(15,11,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",t.userLogins)}}function Xg(r,l){if(1&r&&e._UZ(0,"app-pager",18),2&r){const t=e.oxw();e.Q6J("totalResults",null==t.userLogins?null:t.userLogins.length)}}const e_=function(){return{backdrop:"static",animated:!1}};function t_(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22)(4,"h5",23),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",24),e._UZ(8,"span",25),e.TgZ(9,"span",11),e._uU(10),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",26)(13,"p"),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e._UZ(16,"div",27),e.TgZ(17,"div",28)(18,"div",29)(19,"div",30)(20,"button",31),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.deleteLogin(p.selectedLogin))}),e._uU(21),e.ALo(22,"translate"),e.qZA()(),e.TgZ(23,"button",32),e._uU(24),e.ALo(25,"translate"),e.qZA()()()()()()}2&r&&(e.Q6J("config",e.DdM(16,e_)),e.xp6(5),e.hij(" ",e.lcZ(6,6,"UserLogins.RevokeExternalLogin")," "),e.xp6(5),e.Oqu(e.lcZ(11,8,"Common.Close")),e.xp6(4),e.Oqu(e.lcZ(15,10,"UserLogins.RevokeLoginConfirmationText")),e.xp6(7),e.Oqu(e.lcZ(22,12,"Common.Revoke")),e.xp6(3),e.Oqu(e.lcZ(25,14,"Common.Cancel")))}let n_=(()=>{class r{constructor(t,i,p){this.userService=t,this.translate=i,this.toastr=p,this.userLogins=[],this.isLoading=!0}ngOnInit(){this.userService.getCachedUser().pipe((0,Oe.q)(1)).subscribe(t=>{this.user=t,this.userService.getUserLogins(this.user.subject).subscribe(i=>{this.userLogins=i,this.isLoading=!1})})}modalInfo(t){this.selectedLogin=t}deleteLogin(t){this.userService.revokeUserLogin(this.user.subject,t).subscribe(()=>{this.toastr.success("Login Revoked",this.translate.instant("Notifications.Success")),this.userLogins.splice(this.userLogins.indexOf(t),1)},i=>{this.toastr.error(i,this.translate.instant("Notifications.Failure"))})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Cr.K),e.Y36(Ut.sK),e.Y36(si._W))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-logins"]],decls:6,vars:5,consts:[[1,"tw-container","tw-mx-auto"],[4,"ngIf"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable hover",4,"ngIf"],["hidePager","true",3,"totalResults",4,"ngIf"],["bsModal","","id","revokeLoginModal","class","modal","role","dialog","aria-hidden","true","tabindex","-1",3,"config",4,"ngIf"],["role","alert",1,"tw-alert"],[1,"datatable","hover"],[1,"md:tw-w-1/4"],[1,"tw-hidden","md:tw-table-cell"],[1,"tw-w-1"],[1,"sr-only"],["id","userLoginsList"],[4,"ngFor","ngForOf"],[1,"tw-max-w-0","tw-truncate"],[1,"tw-hidden","tw-max-w-0","tw-truncate","md:tw-table-cell"],["value","Delete","data-dismiss","modal","data-toggle","modal","data-target","#revokeLoginModal",1,"tw-btn-link","tw-btn-small","tw-text-red-500",3,"click"],["aria-hidden","true",1,"fas","fa-plug"],["hidePager","true",3,"totalResults"],["bsModal","","id","revokeLoginModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"modal-body","tw-text-center","scrollbars"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["data-dismiss","modal",1,"tw-btn-danger",3,"click"],["data-dismiss","modal","data-toggle","modal","data-target","#appInfoModal",1,"tw-btn-link","tw--mr-4"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,vh,1,0,"app-simple-loader",1),e.YNc(2,vd,4,3,"div",2),e.YNc(3,Yg,18,13,"table",3),e.YNc(4,Xg,1,1,"app-pager",4),e.qZA(),e.YNc(5,t_,26,17,"div",5)),2&t&&(e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",0==(null==i.userLogins?null:i.userLogins.length)&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.userLogins?null:i.userLogins.length)>0),e.xp6(1),e.Q6J("ngIf",(null==i.userLogins?null:i.userLogins.length)>0),e.xp6(1),e.Q6J("ngIf",i.selectedLogin))},dependencies:[z.sg,z.O5,le.oB,wt.P,En.w,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var rs=m(8677);function i_(r,l){1&r&&(e.TgZ(0,"option",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Nav.AccessPolicy")))}function hA(r,l){1&r&&(e.TgZ(0,"option",16),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Nav.Keys")))}const Ch=function(){return["active"]};function OC(r,l){1&r&&(e.TgZ(0,"li",17)(1,"button",18),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(1),e.Q6J("routerLinkActive",e.DdM(4,Ch)),e.xp6(1),e.Oqu(e.lcZ(3,2,"Nav.AccessPolicy")))}function r_(r,l){1&r&&(e.TgZ(0,"li",19)(1,"button",20),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(1),e.Q6J("routerLinkActive",e.DdM(4,Ch)),e.xp6(1),e.Oqu(e.lcZ(3,2,"Nav.Keys")))}let kC=(()=>{class r{constructor(t,i,p){this.titleService=t,this.translate=i,this.configService=p,this.targetIdentityServer4=!1,this.hideAccessPolicy=!1}ngOnInit(){this.configService.getConfig().pipe((0,tr.P)()).subscribe(t=>{this.targetIdentityServer4=t.targetIdentityServer4,this.hideAccessPolicy=t.featureFlagOptions.enforcerAuthorizationEnabled}),this.titleService.setTitle(this.translate.instant("Settings.Title")+` - ${He.de.SITE_TITLE}`)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.Dx),e.Y36(Ut.sK),e.Y36(Yr.E))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-settings"]],decls:26,vars:25,consts:[[3,"title","hasTabs"],["tabs",""],[1,"tw-p-4","md:tw-hidden"],["for","nav-sub-menu",1,"sr-only"],[1,"tw-form-select"],["id","nav-sub-menu","disabled","",1,"tw-form-control"],["value","details"],["value","Access Policy",4,"ngIf"],["value","Keys",4,"ngIf"],["value","Webhooks"],["role","tablist",1,"tabs","tw-hidden","md:tw-flex"],["class","tabs__item","id","acessPolicyTab",4,"ngIf"],[1,"tabs__item"],["routerLink","webhooks","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["class","tabs__item","id","keysTab",4,"ngIf"],["value","Access Policy"],["value","Keys"],["id","acessPolicyTab",1,"tabs__item"],["routerLink","accesspolicy","role","tab","aria-selected","false",1,"tabs__link","active",3,"routerLinkActive"],["id","keysTab",1,"tabs__item"],["routerLink","keys","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"]],template:function(t,i){1&t&&(e.TgZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.ynx(2,1),e.TgZ(3,"div",2)(4,"label",3),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",4)(8,"select",5)(9,"option",6),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.YNc(12,i_,3,3,"option",7),e.YNc(13,hA,3,3,"option",8),e.TgZ(14,"option",9),e._uU(15),e.ALo(16,"translate"),e.qZA()()()(),e.TgZ(17,"ul",10),e.ALo(18,"translate"),e.YNc(19,OC,4,5,"li",11),e.TgZ(20,"li",12)(21,"button",13),e._uU(22),e.ALo(23,"translate"),e.qZA()(),e.YNc(24,r_,4,5,"li",14),e.qZA(),e.BQk(),e.qZA(),e._UZ(25,"router-outlet")),2&t&&(e.Q6J("title",e.lcZ(1,12,"Nav.Settings"))("hasTabs",!0),e.xp6(5),e.Oqu(e.lcZ(6,14,"Nav.SubMenu")),e.xp6(5),e.hij("",e.lcZ(11,16,"Nav.SubMenu"),"..."),e.xp6(2),e.Q6J("ngIf",!i.hideAccessPolicy),e.xp6(1),e.Q6J("ngIf",!i.targetIdentityServer4),e.xp6(2),e.Oqu(e.lcZ(16,18,"Nav.Webhooks")),e.xp6(2),e.uIk("aria-label",e.lcZ(18,20,"Nav.SubMenu")),e.xp6(2),e.Q6J("ngIf",!i.hideAccessPolicy),e.xp6(2),e.Q6J("routerLinkActive",e.DdM(24,Ch)),e.xp6(1),e.Oqu(e.lcZ(23,22,"Nav.Webhooks")),e.xp6(2),e.Q6J("ngIf",!i.targetIdentityServer4))},dependencies:[z.O5,h.YN,h.Kr,yn.lC,yn.rH,yn.Od,dt.G,Ut.X$],encapsulation:2}),r})(),lo=(()=>{class r{constructor(t,i){this.route=t,this.translate=i}ngOnInit(){const t=this.route.snapshot.paramMap.get("resource");this.resourceTypeString=t in eh._?t:"Resource"}ngAfterViewInit(){document.dispatchEvent(new Event("appready"))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.gz),e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:10,vars:6,consts:[[1,"tw-p-4"],[1,"tw-container","tw-mx-auto"],["role","alert",1,"tw-alert-danger"],[1,"tw-text-sm","tw-font-semibold"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.ALo(9,"translate"),e.qZA()()()()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,2,"Errors.ResourceNotFoundDescription")),e.xp6(3),e.Oqu(e.lcZ(9,4,"Errors.ResourceNotFoundDescription")))},dependencies:[Ut.X$],encapsulation:2}),r})();var s_=m(4707),o_=m(3212);let RC=(()=>{class r extends o_._{constructor(t,i){super(),this.http=t,this.headersService=i,this.userSubject=new s_.t(1),this.actionUrl="auditedEvents",this.headers=this.headersService.setHeaders()}getAudits(t,i,p,C,K,Ce,Ue){const lt=this.buildParams(t,p,i,C,K,Ce,Ue);return this.http.get(this.actionUrl,{headers:this.headers,params:lt})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(S.eN),e.LFG(zl.s))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();var a_=m(7356);let PC=(()=>{class r{constructor(t,i){t.setTitle(i.instant("Nav.Auditing")+` - ${He.de.SITE_TITLE}`)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.Dx),e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-all-audits"]],features:[e._Bn([{provide:o_._,useClass:RC}])],decls:4,vars:3,consts:[[3,"title"],[1,"tw-container","tw-mx-auto"]],template:function(t,i){1&t&&(e._UZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.TgZ(2,"div",1),e._UZ(3,"app-audits-list"),e.qZA()),2&t&&e.Q6J("title",e.lcZ(1,1,"Nav.Auditing"))},dependencies:[a_.$,dt.G,Ut.X$],encapsulation:2}),r})();var l_=m(5554),c_=m(1909),El=m(1018);let LC=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-relyingparty"]],features:[e._Bn([{provide:El.h,useExisting:Ra.N}])],decls:5,vars:5,consts:[[3,"pillMode"],[3,"tabTitle","tabValue"],["id","editClientRelyingParty"]],template:function(t,i){1&t&&(e.TgZ(0,"app-custom-tabs",0),e._UZ(1,"app-custom-tab",1)(2,"app-custom-tab",1),e.qZA(),e.TgZ(3,"div",2),e._UZ(4,"router-outlet"),e.qZA()),2&t&&(e.Q6J("pillMode",!0),e.xp6(1),e.Q6J("tabTitle","Clients.RelyingParty.General")("tabValue","general"),e.xp6(1),e.Q6J("tabTitle","Clients.ClaimMappings.Heading")("tabValue","claimmappings"))},dependencies:[yn.lC,yl.v,Ea.x],encapsulation:2}),r})();var UC=m(4995);const u_=["enterEndpointBox"],BC=["endpointIndex"],d_=["editEndpointModal"],fA=["addButton"];function bh(r,l){if(1&r&&(e.TgZ(0,"option",29),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t.location),e.xp6(1),e.Oqu(null==t?null:t.location)}}function wh(r,l){1&r&&(e.TgZ(0,"p",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Clients.Saml.DefaultEndpointNotice")," "))}function za(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"form",2)(1,"app-form-row",23)(2,"div",24)(3,"select",25,26),e.NdJ("change",function(){e.CHM(t);const p=e.MAs(4),C=e.oxw(2);return e.KtG(C.onDefaultChange(p.value))}),e.YNc(5,bh,2,2,"option",27),e.qZA()(),e.YNc(6,wh,3,3,"p",28),e.qZA()()}if(2&r){const t=e.oxw(2);e.Q6J("formGroup",t.defaultSelectForm),e.xp6(1),e.Q6J("id",t.endpointType+"defaultEndpoint")("label","Clients.Saml.DefaultEndpoint")("help","Clients.Saml.DefaultEndpointHelp"),e.xp6(2),e.Q6J("id",t.endpointType+"defaultEndpoint"),e.xp6(2),e.Q6J("ngForOf",t.endpoints),e.xp6(1),e.Q6J("ngIf",(null==t.endpoints?null:t.endpoints.length)<1)}}function FC(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",14)(2,"div")(3,"h2",15),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA()()(),e.YNc(7,za,7,7,"form",16),e.TgZ(8,"app-action-bar"),e.ynx(9,17),e.TgZ(10,"button",18,19),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.openAddModal())}),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(14,"app-data-table",20),e.NdJ("onSelect",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.editEndpoint(p))}),e._UZ(15,"app-data-table-column",21)(16,"app-data-table-column",22)(17,"app-data-table-column",22),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(4),e.Oqu(t.endpointHelpTextTitle),e.xp6(2),e.Oqu(t.endpointHelpTextBody),e.xp6(1),e.Q6J("ngIf",t.endpoints),e.xp6(3),e.Q6J("id",t.endpointType+"addEndpointButton"),e.xp6(2),e.hij(" ",e.lcZ(13,19,"Clients.Saml.AddEndpoint")," "),e.xp6(2),e.Q6J("rows",t.endpoints)("norowslabel","Clients.Saml.NoEndpoints")("actions",t.endpointActions),e.xp6(1),e.Q6J("title","Clients.Saml.LocationUrl")("prop","location")("cellClasses","tw-max-w-0 tw-truncate tw-font-semibold"),e.xp6(1),e.Q6J("title","Clients.Saml.BindingType")("prop","binding")("headClasses","tw-w-1/2 md:tw-w-1/3")("cellClasses","tw-max-w-0 tw-truncate"),e.xp6(1),e.Q6J("title","Clients.Saml.Index")("prop","index")("headClasses","tw-text-center sm:tw-w-24")("cellClasses","tw-text-center")}}function p_(r,l){1&r&&(e.TgZ(0,"small",31),e._UZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Clients.Saml.LocationBindingUnique")," "))}function Ya(r,l){1&r&&(e.TgZ(0,"option",33),e._uU(1,"POST"),e.qZA())}function La(r,l){1&r&&(e.TgZ(0,"option",34),e._uU(1,"Redirect"),e.qZA())}function Ua(r,l){1&r&&(e.TgZ(0,"option",35),e._uU(1,"HTTP Artifact"),e.qZA())}function h_(r,l){1&r&&(e.TgZ(0,"option",36),e._uU(1,"SOAP"),e.qZA())}function f_(r,l){1&r&&(e.TgZ(0,"small",31),e._UZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Clients.Saml.LocationBindingUnique")," "))}function ZC(r,l){1&r&&(e.TgZ(0,"small",31),e._UZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Clients.Saml.IndexNotUnique")," "))}function VC(r,l){1&r&&(e.TgZ(0,"small",31),e._UZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Clients.Saml.LocationBindingUnique")," "))}function HC(r,l){1&r&&(e.TgZ(0,"option",33),e._uU(1,"POST"),e.qZA())}function JC(r,l){1&r&&(e.TgZ(0,"option",34),e._uU(1,"Redirect"),e.qZA())}function Th(r,l){1&r&&(e.TgZ(0,"option",35),e._uU(1,"HTTP Artifact"),e.qZA())}function ou(r,l){1&r&&(e.TgZ(0,"option",36),e._uU(1,"SOAP"),e.qZA())}function qC(r,l){1&r&&(e.TgZ(0,"small",31),e._UZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Clients.Saml.LocationBindingUnique")," "))}function m_(r,l){1&r&&(e.TgZ(0,"small",31),e._UZ(1,"span",32),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Clients.Saml.IndexNotUnique")," "))}function QC(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-form-row",3)(2,"input",37),e.NdJ("keyup",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.validateEdit(p.editingEndpoint))})("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.editingEndpoint.location=p)}),e.qZA(),e.YNc(3,VC,4,3,"small",5),e.qZA(),e.TgZ(4,"app-form-row",3)(5,"div",24)(6,"select",38),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.editingEndpoint.binding=p)})("keyup",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.validateEdit(p.editingEndpoint))})("change",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.validateEdit(p.editingEndpoint))}),e.YNc(7,HC,2,0,"option",8),e.YNc(8,JC,2,0,"option",9),e.YNc(9,Th,2,0,"option",10),e.YNc(10,ou,2,0,"option",11),e.qZA()(),e.YNc(11,qC,4,3,"small",5),e.qZA(),e.TgZ(12,"app-form-row",3)(13,"input",39),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.editingEndpoint.index=p)})("keyup",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.validateEdit(p.editingEndpoint))})("change",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.validateEdit(p.editingEndpoint))}),e.qZA(),e.YNc(14,m_,4,3,"small",5),e.qZA(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("id","editLocation")("label","Clients.Endpoint")("isLast",!1),e.xp6(1),e.s9C("value",t.editingEndpoint.location),e.Q6J("ngModel",t.editingEndpoint.location),e.xp6(1),e.Q6J("ngIf",t.addEndpointForm.hasError("unique")),e.xp6(1),e.Q6J("id","editBinding")("label","Clients.Saml.BindingType")("isLast",!1),e.xp6(2),e.s9C("value",t.editingEndpoint.binding),e.Q6J("ngModel",t.editingEndpoint.binding),e.xp6(1),e.Q6J("ngIf","ars"!=t.endpointType),e.xp6(1),e.Q6J("ngIf","ars"!=t.endpointType),e.xp6(1),e.Q6J("ngIf","ars"!=t.endpointType),e.xp6(1),e.Q6J("ngIf","ars"==t.endpointType),e.xp6(1),e.Q6J("ngIf",t.addEndpointForm.hasError("unique")),e.xp6(1),e.Q6J("id","editIndex")("label","Clients.Saml.Index")("isLast",!0),e.xp6(1),e.Q6J("ngModel",t.editingEndpoint.index),e.xp6(1),e.Q6J("ngIf",t.index.hasError("unique"))}}let yd=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue){this.activatedRoute=t,this.providerService=i,this.fb=p,this.cachingService=C,this.modalService=K,this.translate=Ce,this.dataTableService=Ue,this.endpointType="",this.endpoints=[],this.endpointActions=[ao.Xz.Delete,ao.Xz.Select],this.editEndpointsActions=[Vt.n.Save],this.editEndpointsModalId="editModal",this.addModalActions=[Vt.n.Save],this.addModalId="addModal"}get url(){return this.addEndpointForm.get("url")}get binding(){return this.addEndpointForm.get("binding")}get index(){return this.addEndpointForm.get("index")}ngOnInit(){this.endpointType=this.activatedRoute.snapshot.data.endpointType,this.defaultSelectForm=this.fb.group({defaultEndpoint:[""]}),this.cachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{switch(this.serviceProvider=t,this.endpointType){case"acs":this.endpoints=this.serviceProvider.assertionConsumerServices.slice(),this.endpointHelpTextTitle=this.translate.instant("Clients.Saml.ACSEndpointHelpTitle"),this.endpointHelpTextBody=this.translate.instant("Clients.Saml.ACSEndpointsHelpBody");break;case"slo":this.endpoints=this.serviceProvider.singleLogoutServices.slice(),this.endpointHelpTextTitle=this.translate.instant("Clients.Saml.SLOEndpointsHelpTitle"),this.endpointHelpTextBody=this.translate.instant("Clients.Saml.SLOEndpointsHelpBody");break;case"ars":this.endpoints=this.serviceProvider.artifactResolutionServices.slice(),this.endpointHelpTextTitle=this.translate.instant("Clients.Saml.ARSEndpointsHelpTitle"),this.endpointHelpTextBody=this.translate.instant("Clients.Saml.ARSEndpointsHelpBody")}this.addEndpointForm=this.fb.group({url:["",[h.kI.required,h.kI.pattern("^https?://.*$")]],binding:["",[h.kI.required]],index:["",[h.kI.min(0),h.kI.max(99),__(this.endpoints),h.kI.required]]},{validators:Cd(this.endpoints)}),this.rebuildForm()}),this.dtsSubscription=this.dataTableService.deleteRowEvent.subscribe(t=>{this.removeEndpoint(t)})}ngOnDestroy(){this.dtsSubscription.unsubscribe()}rebuildForm(){if(this.addEndpointForm.reset(),this.endpoints.length>0){const t=this.endpoints.find(i=>i.isDefault);this.defaultSelectForm.setValue({defaultEndpoint:t.location})}else this.defaultSelectForm.setValue({defaultEndpoint:""})}editEndpoint(t){const i=t.data;this.endpoints.forEach(p=>{p.obinding=p.binding,p.oindex=p.index,p.olocation=p.location,p.index===i.index&&(p.editing=!0,this.editingEndpoint=i,this.modalService.showById(this.editEndpointsModalId,t.element?t.element:null))}),this.cachingService.componentDirtyValidMap.set("ServiceProviderComponent",{isValid:!1})}openAddModal(){this.addEndpointForm.reset(),this.modalService.showById(this.addModalId,this.addButtonRef)}cancelAdd(){this.modalService.hideById(this.addModalId)}cancelEdit(){this.endpoints.forEach(t=>{!0===t.editing&&(t.editing=!1,this.modalService.hideById(this.editEndpointsModalId)),t.binding=t.obinding,t.index=t.oindex,t.location=t.olocation}),this.cachingService.componentDirtyValidMap.set("ServiceProviderComponent",{isValid:!0})}validateEdit(t){const i=this.endpoints.filter(p=>p!==t);t.valid=!(t.index<0||t.index>99||!Ah(i,t.index)||!g_(i,t.location,t.binding))}saveEndpoint(t){t.editing=!1,this.updateEndpoints()}sortEndpointsByIndex(){this.endpoints.sort((t,i)=>t.index-i.index)}addEndpoint(){const t=this.addEndpointForm.get("url").value,i=this.addEndpointForm.get("binding").value,p=this.addEndpointForm.get("index").value;this.endpoints.push({binding:i,index:p,isDefault:!1,location:t,editing:!1,valid:!0}),1===this.endpoints.length&&(this.endpoints[0].isDefault=!0),this.updateEndpoints(),this.addEndpointForm.reset(),this.rebuildForm()}removeEndpoint(t){const i=this.endpoints[t];this.endpoints=this.endpoints.filter(p=>p!==i),this.updateEndpoints(),this.rebuildForm()}updateEndpoints(){switch(this.endpointType){case"acs":this.serviceProvider.assertionConsumerServices=this.endpoints.slice();break;case"slo":this.serviceProvider.singleLogoutServices=this.endpoints.slice();break;case"ars":this.serviceProvider.artifactResolutionServices=this.endpoints.slice()}this.editEndpointModal&&this.editEndpointModal.hide(),this.serviceProvider.dirty=!0,this.cachingService.componentDirtyValidMap.set("ServiceProviderComponent",{isValid:!0}),this.cachingService.unsavedCache.next(this.serviceProvider),this.sortEndpointsByIndex()}onDefaultChange(t){this.endpoints.forEach(i=>{i.isDefault=i.location===t}),this.updateEndpoints()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.gz),e.Y36(id.G),e.Y36(h.QS),e.Y36(Al.S),e.Y36(sr.Z),e.Y36(Ut.sK),e.Y36(xl.n))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-serviceprovider"]],viewQuery:function(t,i){if(1&t&&(e.Gf(u_,5),e.Gf(BC,5),e.Gf(d_,7),e.Gf(fA,5)),2&t){let p;e.iGM(p=e.CRH())&&(i.endpointInput=p.first),e.iGM(p=e.CRH())&&(i.indexInput=p.first),e.iGM(p=e.CRH())&&(i.editEndpointModal=p.first),e.iGM(p=e.CRH())&&(i.addButtonRef=p.first)}},decls:19,vars:30,consts:[[4,"ngIf"],[3,"actions","title","modalId","addDisabled","onCancel","onSave"],[3,"formGroup"],[3,"id","label","isLast"],["type","url","required","","formControlName","url",1,"tw-form-control","tw-max-w-full",3,"id"],["class","text-danger",4,"ngIf"],[1,"tw-form-select","tw-max-w-full"],["required","","formControlName","binding",1,"tw-form-control","tw-max-w-full",3,"id"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST",4,"ngIf"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect",4,"ngIf"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact",4,"ngIf"],["value","urn:oasis:names:tc:SAML:2.0:bindings:SOAP",4,"ngIf"],["type","number","min","0","formControlName","index",1,"tw-form-control","tw-max-w-full",3,"id"],[3,"actions","title","modalId","addDisabled","onSave","onCancel"],["role","alert",1,"tw-alert","tw-mb-8"],[1,"tw-font-semibold"],[3,"formGroup",4,"ngIf"],["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"rows","norowslabel","actions","onSelect"],[3,"title","prop","cellClasses"],[3,"title","prop","headClasses","cellClasses"],[3,"id","label","help"],[1,"tw-form-select"],["formControlName","defaultEndpoint",1,"tw-form-control",3,"id","change"],["defaultEndpoint",""],[3,"value",4,"ngFor","ngForOf"],["class","tw-form-text",4,"ngIf"],[3,"value"],[1,"tw-form-text"],[1,"text-danger"],["aria-hidden","true",1,"fas","fa-exclamation-triangle","tw-mr-1"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Artifact"],["value","urn:oasis:names:tc:SAML:2.0:bindings:SOAP"],["type","url","id","editLocation",1,"tw-form-control",3,"value","ngModel","keyup","ngModelChange"],["id","editBinding",1,"tw-form-control",3,"value","ngModel","ngModelChange","keyup","change"],["type","number","min","0","id","editIndex",1,"tw-form-control",3,"ngModel","ngModelChange","keyup","change"]],template:function(t,i){1&t&&(e.YNc(0,FC,18,21,"div",0),e.TgZ(1,"app-custom-modal",1),e.NdJ("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addEndpoint()}),e.TgZ(2,"form",2)(3,"app-form-row",3),e._UZ(4,"input",4),e.YNc(5,p_,4,3,"small",5),e.qZA(),e.TgZ(6,"app-form-row",3)(7,"div",6)(8,"select",7),e.YNc(9,Ya,2,0,"option",8),e.YNc(10,La,2,0,"option",9),e.YNc(11,Ua,2,0,"option",10),e.YNc(12,h_,2,0,"option",11),e.qZA()(),e.YNc(13,f_,4,3,"small",5),e.qZA(),e.TgZ(14,"app-form-row",3),e._UZ(15,"input",12),e.YNc(16,ZC,4,3,"small",5),e.qZA()()(),e.TgZ(17,"app-custom-modal",13),e.NdJ("onSave",function(){return i.saveEndpoint(i.editingEndpoint)})("onCancel",function(){return i.cancelEdit()}),e.YNc(18,QC,15,21,"ng-container",0),e.qZA()),2&t&&(e.Q6J("ngIf",i.serviceProvider),e.xp6(1),e.Q6J("actions",i.addModalActions)("title","Clients.Saml.AddEndpoint")("modalId",i.addModalId)("addDisabled",!i.addEndpointForm.valid),e.xp6(1),e.Q6J("formGroup",i.addEndpointForm),e.xp6(1),e.Q6J("id",i.endpointType+"url")("label","Clients.Endpoint")("isLast",!1),e.xp6(1),e.Q6J("id",i.endpointType+"url"),e.xp6(1),e.Q6J("ngIf",i.addEndpointForm.hasError("unique")),e.xp6(1),e.Q6J("id",i.endpointType+"binding")("label","Clients.Saml.BindingType")("isLast",!1),e.xp6(2),e.Q6J("id",i.endpointType+"binding"),e.xp6(1),e.Q6J("ngIf","ars"!=i.endpointType),e.xp6(1),e.Q6J("ngIf","ars"!=i.endpointType),e.xp6(1),e.Q6J("ngIf","ars"!=i.endpointType),e.xp6(1),e.Q6J("ngIf","ars"==i.endpointType),e.xp6(1),e.Q6J("ngIf",i.addEndpointForm.hasError("unique")),e.xp6(1),e.Q6J("id",i.endpointType+"index")("label","Clients.Saml.Index")("isLast",!0),e.xp6(1),e.Q6J("id",i.endpointType+"index"),e.xp6(1),e.Q6J("ngIf",i.index.hasError("unique")),e.xp6(1),e.Q6J("actions",i.editEndpointsActions)("title","Clients.Saml.EditEndpoint")("modalId",i.editEndpointsModalId)("addDisabled",!(null!=i.editingEndpoint&&i.editingEndpoint.valid)),e.xp6(1),e.Q6J("ngIf",i.editingEndpoint))},dependencies:[z.sg,z.O5,h._Y,h.YN,h.Kr,h.Fj,h.wV,h.EJ,h.JJ,h.JL,h.Q7,h.qQ,h.On,h.sg,h.u,kt.K,ao.Qj,Kl.E,Dn.L,ms.R,Ut.X$],encapsulation:2}),r})();function Cd(r){return l=>{const t=l.get("url").value,i=l.get("binding").value;return g_(r,t,i)?null:{unique:!0}}}function g_(r,l,t){return 0===r.length||null===l||null===t||!r.some(i=>l.trim().toLowerCase()===i.location.trim().toLowerCase()&&t===i.binding)}function __(r){return l=>Ah(r,l.value)?null:{unique:!0}}function Ah(r,l){return 0===r.length||!r.some(t=>t.index===l)}var Sh=m(1428);let bd=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-saml"]],features:[e._Bn([{provide:El.h,useExisting:Al.S}])],decls:10,vars:15,consts:[[3,"pillMode"],[3,"tabTitle","tabValue"],["id","editClientSaml"]],template:function(t,i){1&t&&(e.TgZ(0,"app-custom-tabs",0),e._UZ(1,"app-custom-tab",1)(2,"app-custom-tab",1)(3,"app-custom-tab",1)(4,"app-custom-tab",1)(5,"app-custom-tab",1)(6,"app-custom-tab",1)(7,"app-custom-tab",1),e.qZA(),e.TgZ(8,"div",2),e._UZ(9,"router-outlet"),e.qZA()),2&t&&(e.Q6J("pillMode",!0),e.xp6(1),e.Q6J("tabTitle","Clients.Saml.ACSEndpoints")("tabValue","acsendpoints"),e.xp6(1),e.Q6J("tabTitle","Clients.Saml.SLOEndpoints")("tabValue","sloendpoints"),e.xp6(1),e.Q6J("tabTitle","Clients.Saml.ARSEndpoints")("tabValue","arsendpoints"),e.xp6(1),e.Q6J("tabTitle","Clients.ClaimMappings.Heading")("tabValue","claimmappings"),e.xp6(1),e.Q6J("tabTitle","Clients.Saml.Request")("tabValue","request"),e.xp6(1),e.Q6J("tabTitle","Clients.Saml.Response")("tabValue","response"),e.xp6(1),e.Q6J("tabTitle","Common.Advanced")("tabValue","advanced"))},dependencies:[yn.lC,yl.v,Ea.x],encapsulation:2}),r})();const xh=function(r){return[r]};let v_=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt,Et){this.fb=t,this.route=i,this.router=p,this.titleService=C,this.identityResourceService=K,this.toastr=Ce,this.dialogService=Ue,this.translate=lt,this.localize=Et}get ReadOnlyFieldType(){return cl.O}ngOnInit(){this.identityResourceSubscription=this.identityResourceService.getCachedIdentityResource().subscribe(t=>{this.identityResource=t,this.buildForm(),this.titleService.setTitle(this.translate.instant("IdentityResources.Singular")+" "+this.identityResource.displayName+" "+this.translate.instant("Nav.Details")+` - ${He.de.SITE_TITLE}`)})}ngOnDestroy(){this.identityResourceSubscription.unsubscribe()}buildForm(){this.identityResourceForm=this.fb.group({id:[this.identityResource.id],name:[this.identityResource.name,h.kI.required],displayName:[this.identityResource.displayName,h.kI.required],description:[this.identityResource.description,[h.kI.required,h.kI.maxLength(1e3)]],showInDiscoveryDocument:[this.identityResource.showInDiscoveryDocument],emphasize:[this.identityResource.emphasize],required:[this.identityResource.required],enabled:[this.identityResource.enabled]})}canDeactivate(){return!!this.identityResourceForm.pristine||(this.dialogService.confirm(),this.dialogService.eventStream)}submit(){const t=Object.assign(this.identityResourceForm.value,{allowedClaims:this.identityResource.allowedClaims});return this.identityResourceService.updateResource(t).toPromise().then(i=>{this.identityResourceForm.markAsPristine(),this.identityResource=t,this.identityResourceService.getCachedIdentityResource().next(t),this.toastr.success(this.translate.instant("IdentityResources.UpdatedResource"),this.translate.instant("Notifications.Success"))})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(yn.gz),e.Y36(yn.F0),e.Y36(n.Dx),e.Y36(Ma.Q),e.Y36(si._W),e.Y36(ja.x),e.Y36(Ut.sK),e.Y36(Un.An))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-identityresource-details"]],decls:29,vars:40,consts:[[3,"formGroup"],[3,"id","label"],[3,"id","isTraffic"],["id","Status","formControlName","enabled","type","checkbox",1,"tw-form-switch__input"],[3,"id","label","help"],[3,"fieldType","values"],["id","displayNameInput","name","displayNameInput","type","text","formControlName","displayName","required","",1,"tw-form-control"],["name","descriptionInput","id","descriptionInput","type","text","formControlName","description",1,"tw-form-control"],[3,"id"],["id","Required","formControlName","required","type","checkbox",1,"tw-form-switch__input"],["id","showInDiscoveryDocument","formControlName","showInDiscoveryDocument","type","checkbox",1,"tw-form-switch__input"],[3,"id","label","help","isLast"],["id","emphasize","formControlName","emphasize","type","checkbox",1,"tw-form-switch__input"],[1,"tw-btn-success","tw-mr-3","tw-mb-3",3,"disabled","click"],["right",""],["type","button","data-toggle","modal","data-target","#deleteIdentityResource",1,"tw-btn-danger","tw-mb-3"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1)(2,"app-form-toggle",2),e._UZ(3,"input",3),e.qZA()(),e.TgZ(4,"app-form-row",4),e._UZ(5,"app-readonly",5),e.ALo(6,"readOnlyValue"),e.qZA(),e.TgZ(7,"app-form-row",4),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"app-form-row",4),e._UZ(10,"textarea",7),e.qZA(),e.TgZ(11,"app-form-row",4)(12,"app-form-toggle",8),e._UZ(13,"input",9),e.qZA()(),e.TgZ(14,"app-form-row",4)(15,"app-form-toggle",8),e._UZ(16,"input",10),e.qZA()(),e.TgZ(17,"app-form-row",11)(18,"app-form-toggle",8),e._UZ(19,"input",12),e.qZA()()(),e.TgZ(20,"app-button-bar")(21,"button",13),e.NdJ("click",function(){return i.submit()}),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.ynx(24,14),e.TgZ(25,"button",15),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.BQk(),e.qZA(),e._UZ(28,"app-can-deactivate")),2&t&&(e.Q6J("formGroup",i.identityResourceForm),e.xp6(1),e.Q6J("id","Status")("label","Common.Enabled"),e.xp6(1),e.Q6J("id","Status")("isTraffic",!0),e.xp6(2),e.Q6J("id","ResourceID")("label","Resources.ResourceID")("help","IdentityResources.IDHelp"),e.xp6(1),e.Q6J("fieldType",i.ReadOnlyFieldType.Single)("values",e.VKq(38,xh,e.lcZ(6,32,i.identityResource.id))),e.xp6(2),e.Q6J("id","displayNameInput")("label","Common.DisplayName")("help","IdentityResources.DisplayNameHelp"),e.xp6(2),e.Q6J("id","descriptionInput")("label","Common.Description")("help","Resources.DescriptionHelp"),e.xp6(2),e.Q6J("id","Required")("label","Common.Required")("help","IdentityResources.ConsentResource"),e.xp6(1),e.Q6J("id","Required"),e.xp6(2),e.Q6J("id","showInDiscoveryDocument")("label","IdentityResources.ShowInDiscoveryDocument")("help","IdentityResources.DiscoveryDocumentDescription"),e.xp6(1),e.Q6J("id","showInDiscoveryDocument"),e.xp6(2),e.Q6J("id","emphasize")("label","Common.Emphasize")("help","IdentityResources.ConsentScreen")("isLast",!0),e.xp6(1),e.Q6J("id","emphasize"),e.xp6(3),e.Q6J("disabled",i.identityResourceForm.pristine),e.xp6(1),e.hij(" ",e.lcZ(23,34,"Common.Save")," "),e.xp6(4),e.hij(" ",e.lcZ(27,36,"Common.Delete.Title")," "))},dependencies:[h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.Q7,h.sg,h.u,Ia.J,pa.N,Dn.L,ds.O,ha.f,Ut.X$,Vl.b],encapsulation:2}),r})();class Eh{}const y_=["ClaimsPicker"];let C_=(()=>{class r{constructor(t,i,p,C,K){this.titleService=t,this.identityResourceService=i,this.scopeClaimService=p,this.toastr=C,this.translate=K,this.originalClaims=[],this.availableClaims=[],this.assignedClaims=[],this.toSendClaims=[]}ngOnInit(){this.identityResourceSubscription=this.identityResourceService.getCachedIdentityResource().pipe((0,Qu.V)(this.scopeClaimService.cachedClaimTypes$),(0,u.U)(([t,i])=>({resource:t,claimTypes:i})),(0,tr.P)()).subscribe({next:t=>{this.identityResource=t.resource,this.titleService.setTitle(this.translate.instant("IdentityResources.Singular")+" "+this.identityResource.displayName+" "+this.translate.instant("Nav.Details")+` - ${He.de.SITE_TITLE}`),this.originalClaims=t.claimTypes.slice(),this.identityResource.allowedClaims.length>0?this.populateAvailableAndAssignedClaims(t.claimTypes):this.availableClaims=this.convertOriginalClaimTypesToPickerClaimTypes(t.claimTypes)}})}convertOriginalClaimTypesToPickerClaimTypes(t){let i=[];return t.map(p=>{const C=new Eh;C.name=p.displayName?p.displayName:p.name,i.push(C)}),i}convertPickerClaimsToClaim(t){let i=[];return t.map(p=>{i.push(this.originalClaims.find(C=>C.displayName===p.name||C.name===p.name))}),i}ngOnDestroy(){this.identityResourceSubscription?.unsubscribe()}ngAfterViewInit(){this.claimsPicker.assignedStream.subscribe(t=>{this.toSendClaims=this.assignedClaims.concat(t),this.submit().then(i=>{this.assignedClaims=this.toSendClaims,this.availableClaims=(0,ot.mn)(this.availableClaims.slice(),t),this.claimsPicker.availableCount=0})}),this.claimsPicker.unAssignedStream.subscribe(t=>{this.toSendClaims=(0,ot.mn)(this.assignedClaims,t),this.submit().then(i=>{this.assignedClaims=this.toSendClaims.slice(),this.availableClaims=this.availableClaims.concat(t),this.claimsPicker.assignedCount=0})})}submit(){const t=(0,go.UI)(this.convertPickerClaimsToClaim(this.toSendClaims),function(p){return p.name}),i=Object.assign(this.identityResource,{allowedClaims:t});return this.identityResourceService.updateResource(i).toPromise().then(p=>{this.identityResource=i,this.identityResourceService.getCachedIdentityResource().next(i),this.toastr.success(this.translate.instant("IdentityResources.UpdatedResource"),this.translate.instant("Notifications.Success"))})}populateAvailableAndAssignedClaims(t){let i=[],p=t.filter(C=>(i.push(C),this.identityResource.allowedClaims.some(K=>K===C.name)));i=(0,ot.mn)(i,p),this.availableClaims=this.convertOriginalClaimTypesToPickerClaimTypes(i),this.assignedClaims=this.convertOriginalClaimTypesToPickerClaimTypes(p)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.Dx),e.Y36(Ma.Q),e.Y36(Sl.q),e.Y36(si._W),e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-identity-resource-claims"]],viewQuery:function(t,i){if(1&t&&e.Gf(y_,7),2&t){let p;e.iGM(p=e.CRH())&&(i.claimsPicker=p.first)}},decls:6,vars:5,consts:[[1,"cms"],[3,"assignedInput","availableInput"],["ClaimsPicker",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"p"),e._uU(2),e.ALo(3,"translate"),e.qZA()(),e._UZ(4,"app-common-picker",1,2)),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,3,"IdentityResources.UserClaimTypes")),e.xp6(2),e.Q6J("assignedInput",i.assignedClaims)("availableInput",i.availableClaims))},dependencies:[Bo,Ut.X$],encapsulation:2}),r})();function b_(r,l){1&r&&(e.TgZ(0,"app-form-row",4)(1,"app-form-toggle",14),e._UZ(2,"input",15),e.qZA()()),2&r&&(e.Q6J("id","requireResourceIndicatorInput")("label","Resources.RequireResourceIndicator")("help","Resources.RequireResourceIndicatorHelp"),e.xp6(1),e.Q6J("id","requireResourceIndicatorInput"))}const w_=function(r){return[r]};let T_=(()=>{class r{constructor(t,i,p,C,K,Ce){this.protectedResourceService=t,this.fb=i,this.toastr=p,this.translate=C,this.dialogService=K,this.configService=Ce,this.targetIdentityServer4=!1}get ReadOnlyFieldType(){return cl.O}ngOnInit(){this.protectedResourceSubscription=this.protectedResourceService.getCachedProtectedResource().subscribe(t=>{this.protectedResource=t,this.configService.getConfig().pipe((0,tr.P)()).subscribe(i=>{this.targetIdentityServer4=i.targetIdentityServer4,this.buildForm()})})}ngOnDestroy(){this.protectedResourceSubscription?.unsubscribe()}buildForm(){const t={id:[this.protectedResource.id],name:[this.protectedResource.name,h.kI.required],displayName:[this.protectedResource.displayName,h.kI.required],description:[this.protectedResource.description,[h.kI.maxLength(1e3)]],enabled:[this.protectedResource.enabled],allowedAccessTokenSigningAlgorithms:[this.protectedResource.allowedAccessTokenSigningAlgorithms]};this.targetIdentityServer4||(t.requireResourceIndicator=[this.protectedResource.requireResourceIndicator]),this.protectedResourceForm=this.fb.group(t)}canDeactivate(){return!!this.protectedResourceForm.pristine||(this.dialogService.confirm(),this.dialogService.eventStream)}submit(){const t={...this.protectedResourceForm.value,allowedClaims:this.protectedResource.allowedClaims,secrets:this.protectedResource.secrets,scopes:this.protectedResource.scopes,properties:this.protectedResource.properties};this.protectedResourceService.updateResource(t).subscribe({next:i=>{this.protectedResourceForm.markAsPristine(),this.protectedResource=t,this.protectedResourceService.getCachedProtectedResource().next(t),this.toastr.success(this.translate.instant("Resources.UpdatedSuccess"),this.translate.instant("Notifications.Success"))},error:i=>{this.toastr.error(this.translate.instant("Resources.Failed"),this.translate.instant("Notifications.Failed"))}})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Zo.m),e.Y36(h.QS),e.Y36(si._W),e.Y36(Ut.sK),e.Y36(ja.x),e.Y36(Yr.E))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-protectedresource-details"]],decls:23,vars:33,consts:[[3,"formGroup"],[3,"id","label"],[3,"id","isTraffic"],["id","Status","formControlName","enabled","type","checkbox",1,"tw-form-switch__input"],[3,"id","label","help"],[3,"fieldType","values"],["name","displayNameInput","id","displayNameInput","type","text","formControlName","displayName",1,"tw-form-control"],["name","descriptionInput","id","descriptionInput","type","text","formControlName","description",1,"tw-form-control"],[3,"id","label","help",4,"ngIf"],[3,"id","label","isLast"],[3,"form","algorithmControlName"],[1,"tw-btn-success","tw-mr-3","tw-mb-3",3,"disabled","click"],["right",""],["type","button","data-toggle","modal","data-target","#deleteProtectedResource",1,"tw-btn-danger","tw-mb-3"],[3,"id"],["id","requireResourceIndicatorInput","type","checkbox","name","requireResourceIndicator","formControlName","requireResourceIndicator",1,"tw-form-switch__input"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1)(2,"app-form-toggle",2),e._UZ(3,"input",3),e.qZA()(),e.TgZ(4,"app-form-row",4),e._UZ(5,"app-readonly",5),e.ALo(6,"readOnlyValue"),e.qZA(),e.TgZ(7,"app-form-row",4),e._UZ(8,"input",6),e.qZA(),e.TgZ(9,"app-form-row",4),e._UZ(10,"textarea",7),e.qZA(),e.YNc(11,b_,3,4,"app-form-row",8),e.TgZ(12,"app-form-row",9),e._UZ(13,"app-signing-algorithm-picker",10),e.qZA()(),e.TgZ(14,"app-button-bar")(15,"button",11),e.NdJ("click",function(){return i.submit()}),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.ynx(18,12),e.TgZ(19,"button",13),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.BQk(),e.qZA(),e._UZ(22,"app-can-deactivate")),2&t&&(e.Q6J("formGroup",i.protectedResourceForm),e.xp6(1),e.Q6J("id","Status")("label","Common.Enabled"),e.xp6(1),e.Q6J("id","Status")("isTraffic",!0),e.xp6(2),e.Q6J("id","ResourceID")("label","Resources.ResourceID")("help","Resources.UniqueIdentifier"),e.xp6(1),e.Q6J("fieldType",i.ReadOnlyFieldType.Single)("values",e.VKq(31,w_,e.lcZ(6,25,i.protectedResource.id))),e.xp6(2),e.Q6J("id","displayNameInput")("label","Common.DisplayName")("help","Resources.ResourceName"),e.xp6(2),e.Q6J("id","descriptionInput")("label","Common.Description")("help","Resources.ResourceDescription"),e.xp6(2),e.Q6J("ngIf",!i.targetIdentityServer4),e.xp6(1),e.Q6J("id","allowedAccessTokenSigningAlgorithms")("label","Resources.AllowedAccessTokenSigningAlgorithms")("isLast",!0),e.xp6(1),e.Q6J("form",i.protectedResourceForm)("algorithmControlName","allowedAccessTokenSigningAlgorithms"),e.xp6(2),e.Q6J("disabled",!(i.protectedResourceForm.dirty&&i.protectedResourceForm.valid)),e.xp6(1),e.hij(" ",e.lcZ(17,27,"Common.Save")," "),e.xp6(4),e.hij(" ",e.lcZ(21,29,"Common.Delete.Title")," "))},dependencies:[z.O5,h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.sg,h.u,Ia.J,pa.N,Dn.L,ds.O,bc,ha.f,Ut.X$,Vl.b],encapsulation:2}),r})();var Dh=m(727),wd=m(9272),Td=m(6001);const jC=["ClaimPicker"],KC=["tabs"];let $C=(()=>{class r{constructor(t,i,p,C,K){this.fb=t,this.claimsService=i,this.translate=p,this.dialogService=C,this.scopesClaimService=K,this._scope=new wd.s,this.isEdit=!0,this.submit=new e.vpe,this.delete=new e.vpe,this.availableClaims=[],this.assignedClaims=[],this.properties=[]}set scope(t){this._scope=t||new wd.s}get scope(){return this._scope}ngOnInit(){this.buildForm(),this.scopesClaimService.cachedClaimTypes$.subscribe(t=>{const i=t.slice();this.scope.userClaims.length>0?this.sortClaims(i):this.availableClaims=i}),this.properties=this.scope.properties}buildForm(){this.scopeForm=this.fb.group({id:[this.scope.id],name:[this.scope.name,h.kI.required],displayName:[this.scope.displayName,h.kI.required],description:[this.scope.description,[h.kI.required,h.kI.maxLength(1e3)]],showInDiscoveryDocument:[this.scope.showInDiscoveryDocument],emphasize:[this.scope.emphasize],required:[this.scope.required],enabled:[this.scope.enabled]})}ngAfterViewInit(){this.claimsPicker.assignedStream.subscribe(t=>{this.assignClaims(t)}),this.claimsPicker.unAssignedStream.subscribe(t=>{this.unassignClaims(t)})}unassignClaims(t){const i=t.map(Ce=>Ce.name),p=this.assignedClaims.map(Ce=>Ce.name),C=(0,go.e5)(p,i),K=Object.assign(this.scopeForm.value,{userClaims:C});this.submit.emit(K)}assignClaims(t){const i=[...this.assignedClaims,...t].map(C=>C.name),p={...this.scopeForm.value,userClaims:i};this.submit.emit(p)}submitForm(){const t=this.assignedClaims.map(p=>p.name),i=Object.assign(this.scopeForm.value,{userClaims:t},{properties:this.properties});this.submit.emit(i)}deleteScope(){this.delete.emit(this.scope)}sortClaims(t){const i=[];this.scope.userClaims.forEach(p=>{t.forEach((C,K)=>{C.name===p&&(t.splice(K,1),i.push(C))})}),this.availableClaims=t,this.assignedClaims=i}onPropertiesChanged(t){this.properties=t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(so.M),e.Y36(Ut.sK),e.Y36(ja.x),e.Y36(Sl.q))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-api-scope"]],viewQuery:function(t,i){if(1&t&&(e.Gf(jC,7),e.Gf(KC,7)),2&t){let p;e.iGM(p=e.CRH())&&(i.claimsPicker=p.first),e.iGM(p=e.CRH())&&(i.tabsComponent=p.first)}},inputs:{scope:"scope",isEdit:"isEdit"},outputs:{submit:"submit",delete:"delete"},decls:37,vars:49,consts:[["tabs",""],[3,"heading"],[1,"tw-pt-5",3,"formGroup"],[3,"id","label","help"],["type","text","readonly","",1,"tw-form-control",3,"id","value"],["name","displayNameInput","type","text","formControlName","displayName","required","",1,"tw-form-control",3,"id"],["name","descriptionInput","type","text","formControlName","description","required","",1,"tw-form-control",3,"id"],[3,"id"],["type","checkbox","formControlName","required",1,"tw-form-switch__input",3,"id"],["type","checkbox","formControlName","showInDiscoveryDocument",1,"tw-form-switch__input",3,"id"],[3,"id","label","help","isLast"],["type","checkbox","formControlName","emphasize",1,"tw-form-switch__input",3,"id"],[1,"tw-flex","tw-items-center","tw-border-t","tw-border-grey-300","tw-mt-20","tw-pt-5"],[1,"tw-btn-success",3,"click"],["data-toggle","modal","id","deleteBtn",1,"tw-btn-danger","tw-ml-auto",3,"click"],[1,"cms","tw-pt-5"],[3,"assignedInput","availableInput","availableSearch"],["ClaimPicker",""],["id","propertiesEditor",3,"modalId","properties","propertiesChanged"]],template:function(t,i){1&t&&(e.TgZ(0,"tabset",null,0)(2,"tab",1),e.ALo(3,"translate"),e.TgZ(4,"div")(5,"form",2)(6,"app-form-row",3),e._UZ(7,"input",4),e.qZA(),e.TgZ(8,"app-form-row",3),e._UZ(9,"input",5),e.qZA(),e.TgZ(10,"app-form-row",3),e._UZ(11,"textarea",6),e.qZA(),e.TgZ(12,"app-form-row",3)(13,"app-form-toggle",7),e._UZ(14,"input",8),e.qZA()(),e.TgZ(15,"app-form-row",3)(16,"app-form-toggle",7),e._UZ(17,"input",9),e.qZA()(),e.TgZ(18,"app-form-row",10)(19,"app-form-toggle",7),e._UZ(20,"input",11),e.qZA()()(),e.TgZ(21,"div",12)(22,"button",13),e.NdJ("click",function(){return i.submitForm()}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"button",14),e.NdJ("click",function(){return i.deleteScope()}),e._uU(26),e.ALo(27,"translate"),e.qZA()()()(),e.TgZ(28,"tab",1)(29,"div",15)(30,"p"),e._uU(31),e.ALo(32,"translate"),e.qZA()(),e._UZ(33,"app-common-picker",16,17),e.qZA(),e.TgZ(35,"tab",1)(36,"app-properties-editor",18),e.NdJ("propertiesChanged",function(C){return i.onPropertiesChanged(C)}),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("heading",e.lcZ(3,41,"Nav.Details")),e.xp6(3),e.Q6J("formGroup",i.scopeForm),e.xp6(1),e.Q6J("id","scope"+i.scope.id+"Id")("label","Resources.Scope.ScopeID")("help","IdentityResources.IDHelp"),e.xp6(1),e.MGl("id","scope",i.scope.id,"Id"),e.Q6J("value",i.scope.name),e.xp6(1),e.Q6J("id","scope"+i.scope.id+"Name")("label","Resources.Scope.DisplayName")("help","Resources.Scope.DisplayName"),e.xp6(1),e.MGl("id","scope",i.scope.id,"Name"),e.xp6(1),e.Q6J("id","scope"+i.scope.id+"Description")("label","Common.Description")("help","Resources.Scope.Description"),e.xp6(1),e.MGl("id","scope",i.scope.id,"Description"),e.xp6(1),e.Q6J("id","scope"+i.scope.id+"Required")("label","Common.Required")("help","Resources.Scope.Consent"),e.xp6(1),e.Q6J("id","scope"+i.scope.id+"Required"),e.xp6(1),e.MGl("id","scope",i.scope.id,"Required"),e.xp6(1),e.Q6J("id","scope"+i.scope.id+"Discovery")("label","IdentityResources.ShowInDiscoveryDocument")("help","Resources.Scope.DiscoveryDocumentDescription"),e.xp6(1),e.Q6J("id","scope"+i.scope.id+"Discovery"),e.xp6(1),e.MGl("id","scope",i.scope.id,"Discovery"),e.xp6(1),e.Q6J("id","scope"+i.scope.id+"Emphasise")("label","Common.Emphasize")("help","Resources.Scope.EmphasiseScope")("isLast",!0),e.xp6(1),e.Q6J("id","scope"+i.scope.id+"Emphasise"),e.xp6(1),e.MGl("id","scope",i.scope.id,"Emphasise"),e.xp6(3),e.Oqu(e.lcZ(24,43,"Common.Save")),e.xp6(3),e.Oqu(e.lcZ(27,45,"Common.Remove.Title")),e.xp6(2),e.Q6J("heading","Claims"),e.xp6(3),e.Oqu(e.lcZ(32,47,"Resources.Scope.UserClaimTypes")),e.xp6(2),e.Q6J("assignedInput",i.assignedClaims)("availableInput",i.availableClaims)("availableSearch",!0),e.xp6(2),e.Q6J("heading","Properties"),e.xp6(1),e.Q6J("modalId",i.scope.id)("properties",i.scope.properties))},dependencies:[Bo,h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.Q7,h.sg,h.u,Ms.wW,Ms.AH,Dn.L,ds.O,Td.s,Ut.X$],encapsulation:2,changeDetection:0}),r})();const GC=["ClaimPicker"],zC=["tabs"];function YC(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Resources.EnterBasicDetails")))}function XC(r,l){1&r&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Resources.AssignClaims")))}function eb(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.nextTab())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("disabled",t.scopeForm.invalid),e.xp6(1),e.Oqu(e.lcZ(2,2,"Common.Next"))}}function tb(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.addScope())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Common.Save")))}let nb=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue){this.fb=t,this.claimsService=i,this.protectedResourceService=p,this.toastr=C,this.translate=K,this.scopesClaimService=Ce,this.errorService=Ue,this.submitConfirmed=new e.vpe,this.cancelOut=new e.vpe,this.scope=new wd.s,this.allAvaliableClaims=[],this.availableClaims=[],this.assignedClaims=[],this.tabIndex=0,this.progressPercent=0,this.descFocus=!1}keydown(t){"Enter"===t.key&&this.scopeForm.valid&&this.tabComponent.tabs[0].active&&!this.descFocus&&this.nextTab()}ngOnInit(){this.updateProgress(),this.scopeForm=this.fb.group({name:[this.scope.name,[h.kI.required,h.kI.pattern(/^\S*$/)]],displayName:[this.scope.displayName,h.kI.required],description:[this.scope.description,[h.kI.required,h.kI.maxLength(1e3)]],showInDiscoveryDocument:[!0],emphasize:[!1],required:[!1]}),this.claimsSubscription=this.scopesClaimService.cachedClaimTypes$.subscribe(t=>{const i=t.slice();this.scope.userClaims.length>0?this.sortClaims(i):(this.availableClaims=i,this.allAvaliableClaims=i)})}ngOnDestroy(){this.claimsSubscription?.unsubscribe()}ngAfterViewInit(){this.claimsPicker.assignedStream.subscribe(t=>{this.availableClaims=(0,ot.mn)(this.availableClaims.slice(),t);const i=this.assignedClaims.slice();this.assignedClaims=i.concat(t),this.claimsPicker.availableCount=0}),this.claimsPicker.unAssignedStream.subscribe(t=>{const i=this.availableClaims;this.assignedClaims=(0,ot.mn)(this.assignedClaims.slice(),t),this.availableClaims=i.concat(t),this.claimsPicker.assignedCount=0})}sortClaims(t){const i=[];this.scope.userClaims.forEach(p=>{t.forEach((C,K)=>{C.name===p&&(t.splice(K,1),i.push(C))})}),this.availableClaims=t,this.assignedClaims=i}previousTab(){this.tabComponent.tabs[--this.tabIndex].active=!0,this.updateProgress()}nextTab(){this.tabComponent.tabs[++this.tabIndex].active=!0,this.updateProgress()}updateProgress(){this.progressPercent=(this.tabIndex+1)/this.tabComponent.tabs.length*100}cancel(){this.resetWizard(),this.cancelOut.emit(!0)}addScope(){const t=(0,go.UI)(this.assignedClaims,p=>p.name),i=Object.assign(this.scopeForm.value,{userClaims:t});this.protectedResourceService.addResourceScope(this.resource.id,i).subscribe(p=>{this.submitConfirmed.emit(),this.resetWizard(),this.toastr.success(this.translate.instant("Resources.Scope.ScopeAdded"),this.translate.instant("Notifications.Success"))},p=>{this.errorService.handleError(p)})}resetWizard(){this.scopeForm.reset(),this.tabComponent.tabs[0].active=!0,this.tabIndex=0,this.assignedClaims=[],this.availableClaims=this.allAvaliableClaims,this.scopeForm.controls.showInDiscoveryDocument.setValue(!0),this.scopeForm.controls.emphasize.setValue(!1),this.scopeForm.controls.required.setValue(!1)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(so.M),e.Y36(Zo.m),e.Y36(si._W),e.Y36(Ut.sK),e.Y36(Sl.q),e.Y36(Ee.T))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-add-protectedresource-scope"]],viewQuery:function(t,i){if(1&t&&(e.Gf(GC,7),e.Gf(zC,7)),2&t){let p;e.iGM(p=e.CRH())&&(i.claimsPicker=p.first),e.iGM(p=e.CRH())&&(i.tabComponent=p.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown",function(C){return i.keydown(C)},!1,e.evT)},inputs:{resource:"resource"},outputs:{submitConfirmed:"submitConfirmed",cancelOut:"cancelOut"},decls:43,vars:34,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-progress"],["role","progressbar",1,"modal-progress-bar"],["progressBar",""],[1,"modal-body","scrollbars"],[1,"cms"],[4,"ngIf"],[1,"hide-tabs"],["tabs",""],[3,"formGroup"],[3,"id","label","help"],["name","idInput","id","idInput","formControlName","name","maxlength","200",1,"tw-form-control"],["name","displayNameInput","id","displayNameInput","type","text","formControlName","displayName","maxlength","200",1,"tw-form-control"],[3,"id","label","help","isLast"],["name","descriptionInput","id","descriptionInput","type","text","formControlName","description","maxlength","1000",1,"tw-form-control",3,"focus","blur"],[3,"assignedInput","availableInput","availableSearch"],["ClaimPicker",""],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["class","tw-btn-success tw-mr-3","id","nextBtn",3,"disabled","click",4,"ngIf"],["data-dismiss","modal","class","tw-btn-success tw-mr-3","id","submitBtn",3,"click",4,"ngIf"],["id","backBtn",1,"tw-btn",3,"disabled","click"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],["id","nextBtn",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],["data-dismiss","modal","id","submitBtn",1,"tw-btn-success","tw-mr-3",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h5",3),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return i.cancel()}),e._UZ(7,"span",5),e.TgZ(8,"span",6),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",7),e._UZ(12,"div",8,9),e.qZA(),e.TgZ(14,"div",10)(15,"div",11),e.YNc(16,YC,3,3,"p",12),e.YNc(17,XC,3,3,"p",12),e.qZA(),e.TgZ(18,"tabset",13,14)(20,"tab")(21,"form",15)(22,"app-form-row",16),e._UZ(23,"input",17),e.qZA(),e.TgZ(24,"app-form-row",16),e._UZ(25,"input",18),e.qZA(),e.TgZ(26,"app-form-row",19)(27,"textarea",20),e.NdJ("focus",function(){return i.descFocus=!i.descFocus})("blur",function(){return i.descFocus=!i.descFocus}),e.qZA()()()(),e.TgZ(28,"tab"),e._UZ(29,"app-common-picker",21,22),e.qZA()()(),e._UZ(31,"div",23),e.TgZ(32,"div",24)(33,"div",25)(34,"div",26),e.YNc(35,eb,3,4,"button",27),e.YNc(36,tb,3,3,"button",28),e.TgZ(37,"button",29),e.NdJ("click",function(){return i.previousTab()}),e._uU(38),e.ALo(39,"translate"),e.qZA()(),e.TgZ(40,"button",30),e.NdJ("click",function(){return i.cancel()}),e._uU(41),e.ALo(42,"translate"),e.qZA()()()()()),2&t&&(e.xp6(4),e.AsE("",e.lcZ(5,26,"Resources.Scope.NewScope")," ",i.resource.name,""),e.xp6(5),e.Oqu(e.lcZ(10,28,"Common.Close")),e.xp6(3),e.Udp("width",i.progressPercent+"%"),e.xp6(4),e.Q6J("ngIf",i.tabComponent.tabs[0].active),e.xp6(1),e.Q6J("ngIf",i.tabComponent.tabs[1].active),e.xp6(4),e.Q6J("formGroup",i.scopeForm),e.xp6(1),e.Q6J("id","idInput")("label","Common.ID")("help","IdentityResources.IDHelp"),e.xp6(2),e.Q6J("id","displayNameInput")("label","Common.DisplayName")("help","Resources.Scope.DisplayName"),e.xp6(2),e.Q6J("id","descriptionInput")("label","Common.Description")("help","Resources.Scope.Description")("isLast",!0),e.xp6(3),e.Q6J("assignedInput",i.assignedClaims)("availableInput",i.availableClaims)("availableSearch",!0),e.xp6(6),e.Q6J("ngIf",i.tabIndex<i.tabComponent.tabs.length-1),e.xp6(1),e.Q6J("ngIf",i.tabIndex==i.tabComponent.tabs.length-1),e.xp6(1),e.Q6J("disabled",0==i.tabIndex),e.xp6(1),e.Oqu(e.lcZ(39,30,"Common.Back")),e.xp6(3),e.Oqu(e.lcZ(42,32,"Common.Cancel")))},dependencies:[z.O5,h._Y,h.Fj,h.JJ,h.JL,h.nD,h.sg,h.u,Ms.wW,Ms.AH,Bo,Dn.L,Ut.X$],encapsulation:2}),r})();const ib=["createScope"],rb=["addScope"],sb=["deleteScopeModal"],ob=["scopePicker"];function ab(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.addSharedScopeShow())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&r&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ProtectedResources.AddSharedScope")))}function A_(r,l){if(1&r&&e._UZ(0,"app-common-picker",35,36),2&r){const t=e.oxw();e.Q6J("assignedInput",t.pickerScopes.assignedScopes)("availableInput",t.pickerScopes.availableScopes)("availableSearch",!0)}}function S_(r,l){1&r&&(e.TgZ(0,"div",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.DisplayName")," "))}function x_(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"accordion-group",null,38)(2,"button",39)(3,"b",40),e._uU(4),e.qZA(),e.TgZ(5,"div",41),e._UZ(6,"span",42),e.qZA()(),e.TgZ(7,"div")(8,"app-api-scope",43),e.NdJ("delete",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.deleteScopeConfirm(p))})("submit",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.submitScopeClaims(p))}),e.qZA()()()}if(2&r){const t=l.$implicit;e.xp6(4),e.Oqu(t.displayName),e.xp6(4),e.Q6J("scope",t)}}function E_(r,l){if(1&r&&e._UZ(0,"app-pager",44),2&r){const t=e.oxw();e.Q6J("totalResults",null==t.protectedResource.scopes?null:t.protectedResource.scopes.length)}}function D_(r,l){1&r&&(e._UZ(0,"p",45),e.ALo(1,"translate")),2&r&&e.Q6J("innerHTML",e.lcZ(1,1,"Common.Delete.FinalScopeOnResourceWarning"),e.oJD)}const Ad=function(){return{animated:!1,backdrop:"static"}};class I_{constructor(l,t){this.availableScopes=[],this.assignedScopes=[],this.availableScopes=l,this.assignedScopes=t}}let M_=(()=>{class r{constructor(t,i,p,C,K){this.protectedResourceService=t,this.fb=i,this.toastr=p,this.translate=C,this.configService=K,this.pageSubscriptions=new Dh.w0}set content(t){this.pickerScopes&&(this.sharedScopePicker=t,this.pageSubscriptions.add(this.sharedScopePicker.assignedStream.subscribe(i=>{this.pickerScopes.assignedScopes.push(...i),i.forEach(p=>{let C=this.pickerScopes.availableScopes.findIndex(K=>K.name==p.name);this.pickerScopes.availableScopes.splice(C,1)})})),this.pageSubscriptions.add(this.sharedScopePicker.unAssignedStream.subscribe(i=>{this.pickerScopes.availableScopes.push(...i),i.forEach(p=>{let C=this.pickerScopes.assignedScopes.findIndex(K=>K.name==p.name);this.pickerScopes.assignedScopes.splice(C,1)})})))}ngOnInit(){this.configService.getConfig().pipe((0,tr.P)()).subscribe(t=>{this.sharedScopesEnabled=t.featureFlagOptions.enableSharedScopes}),this.pageSubscriptions.add(this.protectedResourceService.getCachedProtectedResource().subscribe(t=>{this.protectedResource=t,this.refreshScopes(t)}))}ngOnDestroy(){this.pageSubscriptions?.unsubscribe()}refreshResource(){this.createScopeModal.isShown&&this.createScopeModal.hide(),this.existingScopeModal.isShown&&this.existingScopeModal.hide(),this.protectedResourceService.getResource(this.protectedResource.id).subscribe(t=>{this.protectedResource=t,this.protectedResourceService.getCachedProtectedResource().next(t),this.refreshScopes(t)})}refreshScopes(t){this.protectedResourceService.getAllScopes().subscribe(i=>{const p=t.scopes;this.pickerScopes=new I_(i.filter(C=>-1===p.findIndex(K=>K.name==C.name)),[])})}submitScopeClaims(t){this.protectedResourceService.updateResourceScope(this.protectedResource.id,t,t.name).subscribe(i=>{this.refreshResource(),this.toastr.success(this.translate.instant("Resources.Scope.Updated"),this.translate.instant("Notifications.Saving Success Title"))},i=>{this.toastr.error(this.translate.instant("Resources.Scope.Failed"),this.translate.instant("Common.Error"))})}deleteScopeConfirm(t){this.scopeToDelete=t,this.deleteScopeConfirmModal.show()}deleteScope(t){return this.protectedResourceService.deleteScope(this.protectedResource.id,t).toPromise().then(i=>{this.refreshResource(),this.deleteScopeConfirmModal.hide(),this.toastr.success(this.translate.instant("Resources.RemovedResourceScope"),this.translate.instant("Notifications.Success"))},i=>{this.toastr.error(this.translate.instant("Resources.RemovedResourceScope"),this.translate.instant("Notifications.Failed"))})}commitScopeChanges(){return this.protectedResource.scopes.push(...this.pickerScopes.assignedScopes),this.protectedResourceService.updateResource(this.protectedResource).subscribe({next:()=>{this.refreshResource(),this.existingScopeModal.hide(),this.toastr.success(this.translate.instant("ProtectedResources.UpdatedResource"),this.translate.instant("Notifications.Success"))},error:()=>{this.toastr.error(this.translate.instant("Resources.Failed"),this.translate.instant("Notifications.Failed"))}})}createScopeShow(){this.createScopeModal.show()}addSharedScopeShow(){this.existingScopeModal.show()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Zo.m),e.Y36(h.QS),e.Y36(si._W),e.Y36(Ut.sK),e.Y36(Yr.E))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-protectedresource-scopes"]],viewQuery:function(t,i){if(1&t&&(e.Gf(ib,7),e.Gf(rb,7),e.Gf(sb,7),e.Gf(ob,5)),2&t){let p;e.iGM(p=e.CRH())&&(i.createScopeModal=p.first),e.iGM(p=e.CRH())&&(i.existingScopeModal=p.first),e.iGM(p=e.CRH())&&(i.deleteScopeConfirmModal=p.first),e.iGM(p=e.CRH())&&(i.content=p.first)}},features:[e._Bn([{provide:yo.gd,useFactory:ah}])],decls:75,vars:51,consts:[["right",""],[1,"tw-btn-success",3,"click"],["id","assignSharedScopesBtn","class","tw-btn ml-2",3,"click",4,"ngIf"],["bsModal","","id","createScope","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["createScope","bs-modal"],[3,"resource","cancelOut","submitConfirmed"],["bsModal","","id","addScope","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["addScope","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","scrollbars"],[3,"assignedInput","availableInput","availableSearch",4,"ngIf"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex"],[1,"tw-mr-auto"],[1,"tw-btn-link","tw--mr-4",3,"click"],["id","protectedScopes"],["class","tw-font-semibold tw-text-grey-800 tw-text-xs tw-leading-normal tw-p-3 tw-pt-0","aria-hidden","true",4,"ngIf"],[4,"ngFor","ngForOf"],["hidePager","true",3,"totalResults",4,"ngIf"],["id","deleteScope","bsModal","","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["deleteScopeModal","bs-modal"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-body","tw-text-center","scrollbars"],[1,"tw-mb-4"],["class","tw-pill-danger",3,"innerHTML",4,"ngIf"],[1,"tw-flex","tw-item-center"],[1,"tw-btn-danger",3,"click"],["id","assignSharedScopesBtn",1,"tw-btn","ml-2",3,"click"],[3,"assignedInput","availableInput","availableSearch"],["scopePicker",""],["aria-hidden","true",1,"tw-font-semibold","tw-text-grey-800","tw-text-xs","tw-leading-normal","tw-p-3","tw-pt-0"],["group",""],["accordion-heading","",1,"tw-flex","tw-items-center","tw-bg-white","tw-text-xs","tw-leading-normal","tw-p-3","tw-w-full","group","hover:tw-bg-blue-100","trans"],[1,"tw-text-blue-500","tw-truncate"],["aria-hidden","true",1,"tw-flex-shink-0","tw-btn-link","tw-btn-small","tw-ml-auto","group-hover:tw-text-blue-500"],[1,"fad","fa-pencil"],[3,"scope","delete","submit"],["hidePager","true",3,"totalResults"],[1,"tw-pill-danger",3,"innerHTML"]],template:function(t,i){if(1&t){const p=e.EpF();e.TgZ(0,"app-action-bar"),e.ynx(1,0),e.TgZ(2,"button",1),e.NdJ("click",function(){return i.createScopeShow()}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,ab,3,3,"button",2),e.BQk(),e.qZA(),e.TgZ(6,"div",3,4)(8,"app-add-protectedresource-scope",5),e.NdJ("cancelOut",function(){return i.createScopeModal.hide()})("submitConfirmed",function(){return i.refreshResource()}),e.qZA()(),e.TgZ(9,"div",6,7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"h5",11),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"button",12),e.NdJ("click",function(){e.CHM(p);const K=e.MAs(10);return e.KtG(K.hide())}),e._UZ(18,"span",13),e.TgZ(19,"span",14),e._uU(20),e.ALo(21,"translate"),e.qZA()()(),e.TgZ(22,"div",15),e.YNc(23,A_,2,3,"app-common-picker",16),e.qZA(),e._UZ(24,"div",17),e.TgZ(25,"div",18)(26,"div",19)(27,"div",20)(28,"button",1),e.NdJ("click",function(){return i.commitScopeChanges()}),e._uU(29),e.ALo(30,"translate"),e.qZA()(),e.TgZ(31,"button",21),e.NdJ("click",function(){e.CHM(p);const K=e.MAs(10);return e.KtG(K.hide())}),e._uU(32),e.ALo(33,"translate"),e.qZA()()()()()(),e.TgZ(34,"div",22),e.YNc(35,S_,3,3,"div",23),e.TgZ(36,"accordion"),e.YNc(37,x_,9,2,"accordion-group",24),e.qZA(),e.YNc(38,E_,1,1,"app-pager",25),e.qZA(),e.TgZ(39,"div",26,27)(41,"div",28)(42,"div",9)(43,"div",10)(44,"h5",11),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"button",12),e.NdJ("click",function(){e.CHM(p);const K=e.MAs(40);return e.KtG(K.hide())}),e._UZ(48,"span",13),e.TgZ(49,"span",14),e._uU(50),e.ALo(51,"translate"),e.qZA()()(),e.TgZ(52,"div",29)(53,"p",30),e._uU(54),e.ALo(55,"translate"),e.TgZ(56,"strong"),e._uU(57),e.qZA(),e._uU(58),e.ALo(59,"translate"),e.TgZ(60,"strong"),e._uU(61),e.qZA(),e._uU(62),e.ALo(63,"translate"),e.qZA(),e.YNc(64,D_,2,3,"p",31),e.qZA(),e._UZ(65,"div",17),e.TgZ(66,"div",18)(67,"div",32)(68,"div",20)(69,"button",33),e.NdJ("click",function(){return i.deleteScope(i.scopeToDelete.name)}),e._uU(70),e.ALo(71,"translate"),e.qZA()(),e.TgZ(72,"button",21),e.NdJ("click",function(){e.CHM(p);const K=e.MAs(40);return e.KtG(K.hide())}),e._uU(73),e.ALo(74,"translate"),e.qZA()()()()()()}2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,24,"ProtectedResources.AddScope")),e.xp6(2),e.Q6J("ngIf",i.sharedScopesEnabled),e.xp6(1),e.Q6J("config",e.DdM(48,Ad)),e.xp6(2),e.Q6J("resource",i.protectedResource),e.xp6(1),e.Q6J("config",e.DdM(49,Ad)),e.xp6(6),e.hij(" ",e.lcZ(16,26,"ProtectedResources.AddSharedScope")," "),e.xp6(5),e.Oqu(e.lcZ(21,28,"Common.Close")),e.xp6(3),e.Q6J("ngIf",i.pickerScopes),e.xp6(6),e.Oqu(e.lcZ(30,30,"Common.Save")),e.xp6(3),e.Oqu(e.lcZ(33,32,"Common.Cancel")),e.xp6(3),e.Q6J("ngIf",i.protectedResource.scopes.length>0),e.xp6(2),e.Q6J("ngForOf",i.protectedResource.scopes),e.xp6(1),e.Q6J("ngIf",(null==i.protectedResource.scopes?null:i.protectedResource.scopes.length)>0),e.xp6(1),e.Q6J("config",e.DdM(50,Ad)),e.xp6(6),e.hij(" ",e.lcZ(46,34,"Common.Delete.Confirm")," "),e.xp6(5),e.Oqu(e.lcZ(51,36,"Common.Close")),e.xp6(4),e.hij("",e.lcZ(55,38,"Common.Delete.AreYouSureSimple2")," "),e.xp6(3),e.Oqu(null==i.scopeToDelete?null:i.scopeToDelete.displayName),e.xp6(1),e.hij(" ",e.lcZ(59,40,"Resources.Scope.ScopeFor")," "),e.xp6(3),e.Oqu(i.protectedResource.displayName),e.xp6(1),e.hij(" ",e.lcZ(63,42,"ProtectedResources.ProtectedResource"),""),e.xp6(2),e.Q6J("ngIf",null==i.scopeToDelete?null:i.scopeToDelete.isFinalInstanceOnResource),e.xp6(6),e.Oqu(e.lcZ(71,44,"Common.Delete.Title")),e.xp6(3),e.Oqu(e.lcZ(74,46,"Common.Delete.No")))},dependencies:[z.sg,z.O5,Bo,yo.Zf,yo.U_,le.oB,$C,wt.P,kt.K,nb,Ut.X$],encapsulation:2}),r})();const N_=["ClaimsPicker"];let Ih=(()=>{class r{constructor(t,i,p,C){this.protectedResourceService=t,this.scopeClaimService=i,this.toastr=p,this.translate=C,this.originalClaims=[],this.availableClaims=[],this.assignedClaims=[],this.toSendClaims=[]}ngOnInit(){this.protectedResourceSubscription=this.protectedResourceService.getCachedProtectedResource().pipe((0,Qu.V)(this.scopeClaimService.cachedClaimTypes$),(0,u.U)(([t,i])=>({resource:t,claimTypes:i})),(0,tr.P)()).subscribe({next:t=>{this.protectedResource=t.resource,this.originalClaims=t.claimTypes.slice();const i=t.claimTypes.slice();this.protectedResource.allowedClaims.length>0?this.populateAvailableAndAssignedClaims(i):this.availableClaims=this.convertOriginalClaimTypesToPickerClaimTypes(i)}})}convertOriginalClaimTypesToPickerClaimTypes(t){let i=[];return t.map(p=>{let C=new Eh;C.name=p.displayName?p.displayName:p.name,i.push(C)}),i}convertPickerClaimsToClaim(t){let i=[];return t.map(p=>{i.push(this.originalClaims.find(C=>C.displayName===p.name||C.name===p.name))}),i}ngOnDestroy(){this.protectedResourceSubscription.unsubscribe()}ngAfterViewInit(){this.claimsPicker.assignedStream.subscribe(t=>{this.toSendClaims=this.assignedClaims.concat(t),this.submit().then(i=>{this.assignedClaims=this.toSendClaims,this.availableClaims=(0,ot.mn)(this.availableClaims.slice(),t),this.claimsPicker.availableCount=0})}),this.claimsPicker.unAssignedStream.subscribe(t=>{this.toSendClaims=(0,ot.mn)(this.assignedClaims,t),this.submit().then(i=>{this.assignedClaims=this.toSendClaims.slice(),this.availableClaims=this.availableClaims.concat(t),this.claimsPicker.assignedCount=0})})}submit(){const t=(0,go.UI)(this.convertPickerClaimsToClaim(this.toSendClaims),function(p){return p.name}),i=Object.assign(this.protectedResource,{allowedClaims:t});return this.protectedResourceService.updateResource(i).toPromise().then(p=>{this.protectedResource=i,this.protectedResourceService.getCachedProtectedResource().next(i),this.toastr.success(this.translate.instant("ProtectedResources.UpdatedResource"),this.translate.instant("Notifications.Success"))})}populateAvailableAndAssignedClaims(t){let i=[],p=t.filter(C=>(i.push(C),this.protectedResource.allowedClaims.some(K=>K===C.name)));i=(0,ot.mn)(i,p),this.availableClaims=this.convertOriginalClaimTypesToPickerClaimTypes(i),this.assignedClaims=this.convertOriginalClaimTypesToPickerClaimTypes(p)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Zo.m),e.Y36(Sl.q),e.Y36(si._W),e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-protectedresource-claims"]],viewQuery:function(t,i){if(1&t&&e.Gf(N_,7),2&t){let p;e.iGM(p=e.CRH())&&(i.claimsPicker=p.first)}},decls:6,vars:6,consts:[[1,"cms"],[3,"assignedInput","availableInput","availableSearch"],["ClaimsPicker",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"p"),e._uU(2),e.ALo(3,"translate"),e.qZA()(),e._UZ(4,"app-common-picker",1,2)),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,4,"ProtectedResources.UserClaimTypes")),e.xp6(2),e.Q6J("assignedInput",i.assignedClaims)("availableInput",i.availableClaims)("availableSearch",!0))},dependencies:[Bo,Ut.X$],encapsulation:2}),r})();const Mh=["SecretPicker"];let Yl=(()=>{class r{constructor(t){this.protectedResourceService=t,this.resourceSecrets=[]}ngOnInit(){this.protectedResourceSubscription=this.protectedResourceService.getCachedProtectedResource().subscribe(t=>{this.protectedResource=t,this.resourceSecrets=this.protectedResource.secrets})}ngOnDestroy(){this.protectedResourceSubscription.unsubscribe()}ngAfterViewInit(){this.secretPicker.secretsAddStream.subscribe(t=>{t.id?this.editSecret(t):this.submitSecret(t)}),this.secretPicker.secretsRemoveStream.subscribe(t=>{this.removeSecret(t)})}submitSecret(t){this.protectedResourceService.addResourceSecret(this.protectedResource.id,t).subscribe(i=>{this.refreshResource()})}editSecret(t){this.protectedResourceService.updateResourceSecret(this.protectedResource.id,t).subscribe(i=>{this.refreshResource()})}removeSecret(t){this.protectedResourceService.removeResourceSecret(this.protectedResource.id,t.id).subscribe(i=>{this.refreshResource()})}refreshResource(){this.protectedResourceService.getResource(this.protectedResource.id).subscribe(t=>{this.protectedResource=t,this.resourceSecrets=this.protectedResource.secrets,this.protectedResourceService.getCachedProtectedResource().next(t)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Zo.m))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-protectedresource-secrets"]],viewQuery:function(t,i){if(1&t&&e.Gf(Mh,7),2&t){let p;e.iGM(p=e.CRH())&&(i.secretPicker=p.first)}},decls:2,vars:2,consts:[[3,"clientSecrets","nonModelCertPicker"],["SecretPicker",""]],template:function(t,i){1&t&&e._UZ(0,"app-secret-picker",0,1),2&t&&e.Q6J("clientSecrets",i.protectedResource.secrets)("nonModelCertPicker",!1)},dependencies:[kp.P],encapsulation:2}),r})();function lb(r,l){1&r&&e._UZ(0,"input",27)}const O_=function(r){return[r]};function Nc(r,l){if(1&r&&(e._UZ(0,"app-readonly",28),e.ALo(1,"readOnlyValue")),2&r){const t=e.oxw();e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(4,O_,e.lcZ(1,2,t.role.name)))}}function mA(r,l){1&r&&e._UZ(0,"textarea",29)}function Nh(r,l){if(1&r&&(e._UZ(0,"app-readonly",28),e.ALo(1,"readOnlyValue")),2&r){const t=e.oxw();e.Q6J("fieldType",t.ReadOnlyFieldType.Single)("values",e.VKq(4,O_,e.lcZ(1,2,t.role.description)))}}const gA=function(){return{animated:!1,backdrop:"static"}};let k_=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt,Et,Wt,an){this.rolesService=t,this.route=i,this.securityService=p,this.router=C,this.fb=K,this.titleService=Ce,this.toastr=Ue,this.dialogService=lt,this.translate=Et,this.localize=Wt,this.errorService=an}get ReadOnlyFieldType(){return cl.O}ngOnInit(){this.getCachedRoleSubscription=this.rolesService.getCachedRole().subscribe(t=>{this.role=t,this.buildForms(),this.initialData=JSON.stringify(t);const i=this.translate.instant("Roles.Role")+" "+this.role.name+" - "+He.de.SITE_TITLE;this.titleService.setTitle(i)})}ngOnDestroy(){this.getCachedRoleSubscription.unsubscribe()}updateRole(){this.role=Object.assign({id:this.role.id},this.editRoleForm.value),this.role.name=this.role.name.trim(),this.rolesService.updateRole(this.role).subscribe(()=>{this.rolesService.setCachedRole(this.role);const t=this.translate.instant("Notifications.Saving Success Title"),i=this.translate.instant("Notifications.Saving Success Message");this.toastr.success(i,t)},t=>{if(401===t.status)this.toastr.warning(this.translate.instant("Roles.UpdateUnauthorized"),this.translate.instant("Notifications.Unauthorized"));else{const i={toastBody:this.translate.instant("Notifications.Saving Error Title"),toastTitle:this.translate.instant("Notifications.Saving Error Message")};(this.errorService.handleError(t,i)&oo.s.Toast)!==oo.s.Toast&&this.toastr.error(i.toastBody,i.toastTitle)}})}deleteRole(){this.rolesService.deleteRole(this.role).subscribe(t=>{const i=this.localize.translateRoute("/roles");this.router.navigate([i]),this.toastr.error(this.translate.instant("Roles.RoleRemoved"),this.translate.instant("Common.Delete.Deleted"))},t=>{if(401===t.status)this.toastr.warning(this.translate.instant("Roles.DeleteUnauthorized"),this.translate.instant("Notifications.Unauthorized"));else{const i={toastBody:this.translate.instant("Notifications.Saving Error Title"),toastTitle:this.translate.instant("Notifications.Saving Error Message")};(this.errorService.handleError(t,i)&oo.s.Toast)!==oo.s.Toast&&this.toastr.error(i.toastBody,i.toastTitle)}})}buildForms(){this.editRoleForm=this.fb.group({name:[{value:this.role.name,disabled:this.isControlDisabled()}],description:[{value:this.role.description,disabled:this.isControlDisabled()}]})}isControlDisabled(){return this.allowedToEditRole()||this.role.reserved}canDeactivate(){return!!this.editRoleForm.pristine||(this.dialogService.confirm(),this.dialogService.eventStream)}allowedToEditRole(){return!this.securityService.allView&&this.isPolicyRole()}isPolicyRole(){const t=this.securityService.policyClaims;for(let i=0;i<t.length;i++)if("role"===t[i].type&&t[i].value===this.role.name)return!0;return!1}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(ce.f),e.Y36(yn.gz),e.Y36(ti.I),e.Y36(yn.F0),e.Y36(h.QS),e.Y36(n.Dx),e.Y36(si._W),e.Y36(ja.x),e.Y36(Ut.sK),e.Y36(Un.An),e.Y36(Ee.T))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-role-details"]],decls:48,vars:40,consts:[["id","editRoleDetails",1,"tw-container","tw-mx-auto"],[3,"formGroup"],[3,"id","label","help"],["type","text","class","tw-form-control","id","addRoleName","formControlName","name",4,"ngIf"],["class","tw-h-full",3,"fieldType","values",4,"ngIf"],[3,"id","label","isLast"],["class","tw-form-control","rows","2","id","addRoleDescription","formControlName","description",4,"ngIf"],["id","updateRoleBtn",1,"tw-btn-success","tw-mr-3","tw-mb-3",3,"disabled","click"],["right",""],["id","showModal","data-toggle","modal","data-target","#deleteRoleModal","type","button",1,"tw-btn-danger","tw-mb-3",3,"disabled"],["bsModal","","id","deleteRoleModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","tw-text-center","scrollbars"],[1,"tw-mb-4"],[1,"tw-pill-danger",3,"innerHTML"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","deleteRoleBtn","data-dismiss","modal",1,"tw-btn-danger",3,"click"],["id","closeModalBtn","data-dismiss","modal",1,"tw-btn-link","tw--mr-4"],["type","text","id","addRoleName","formControlName","name",1,"tw-form-control"],[1,"tw-h-full",3,"fieldType","values"],["rows","2","id","addRoleDescription","formControlName","description",1,"tw-form-control"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"app-form-row",2),e.YNc(3,lb,1,0,"input",3),e.YNc(4,Nc,2,6,"app-readonly",4),e.qZA(),e.TgZ(5,"app-form-row",5),e.YNc(6,mA,1,0,"textarea",6),e.YNc(7,Nh,2,6,"app-readonly",4),e.qZA()()(),e.TgZ(8,"app-button-bar")(9,"button",7),e.NdJ("click",function(){return i.updateRole()}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.ynx(12,8),e.TgZ(13,"button",9),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(16,"div",10)(17,"div",11)(18,"div",12)(19,"div",13)(20,"h5",14),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"button",15),e._UZ(24,"span",16),e.TgZ(25,"span",17),e._uU(26),e.ALo(27,"translate"),e.qZA()()(),e.TgZ(28,"div",18)(29,"p",19),e._uU(30),e.ALo(31,"translate"),e.TgZ(32,"strong"),e._uU(33),e.qZA(),e._uU(34,"?"),e.qZA(),e._UZ(35,"p",20),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"div",21),e.TgZ(38,"div",22)(39,"div",23)(40,"div",24)(41,"button",25),e.NdJ("click",function(){return i.deleteRole()}),e._uU(42),e.ALo(43,"translate"),e.qZA()(),e.TgZ(44,"button",26),e._uU(45),e.ALo(46,"translate"),e.qZA()()()()()(),e._UZ(47,"app-can-deactivate")),2&t&&(e.xp6(1),e.Q6J("formGroup",i.editRoleForm),e.xp6(1),e.Q6J("id","addRoleName")("label","Common.Name")("help","Roles.TrimWhitespaceHelp"),e.xp6(1),e.Q6J("ngIf",!i.isControlDisabled()),e.xp6(1),e.Q6J("ngIf",i.isControlDisabled()),e.xp6(1),e.Q6J("id","addRoleDescription")("label","Common.Description")("isLast",!0),e.xp6(1),e.Q6J("ngIf",!i.isControlDisabled()),e.xp6(1),e.Q6J("ngIf",i.isControlDisabled()),e.xp6(2),e.Q6J("disabled",!i.editRoleForm.dirty&&i.editRoleForm.valid||i.allowedToEditRole()||i.role.reserved),e.xp6(1),e.hij(" ",e.lcZ(11,23,"Common.Save")," "),e.xp6(3),e.Q6J("disabled",i.isControlDisabled()),e.xp6(1),e.hij(" ",e.lcZ(15,25,"Common.Delete.Title")," "),e.xp6(2),e.Q6J("config",e.DdM(39,gA)),e.xp6(5),e.Oqu(e.lcZ(22,27,"Common.Delete.Confirm")),e.xp6(5),e.Oqu(e.lcZ(27,29,"Common.Close")),e.xp6(4),e.hij("",e.lcZ(31,31,"Common.Delete.AreYouSureSimple")," "),e.xp6(3),e.Oqu(i.role.name),e.xp6(2),e.Q6J("innerHTML",e.lcZ(36,33,"Common.Delete.Warning"),e.oJD),e.xp6(7),e.Oqu(e.lcZ(43,35,"Common.Delete.Title")),e.xp6(3),e.Oqu(e.lcZ(46,37,"Common.Delete.No")))},dependencies:[z.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,le.oB,Ia.J,pa.N,Dn.L,ha.f,Vl.b,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var Oc=(()=>{return(r=Oc||(Oc={})).Remove="Remove",r.Add="Add",Oc;var r})();const _A=["roleManagerUsers"];function fi(r,l){1&r&&(e._UZ(0,"app-simple-loader",19),e.ALo(1,"translate")),2&r&&e.Q6J("text",e.lcZ(1,1,"Roles.SavingPleaseWait"))}function cb(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"li",38)(1,"label",39)(2,"input",40),e.NdJ("change",function(){const C=e.CHM(t).$implicit,K=e.oxw(3);return e.KtG(K.toggleIfInRole(C))}),e.qZA(),e.TgZ(3,"div",41)(4,"span",42),e._uU(5),e.qZA(),e.TgZ(6,"span",43),e._uU(7),e.qZA()()()()}if(2&r){const t=l.$implicit,i=e.oxw(3);e.xp6(2),e.Q6J("checked",i.checkChecked(t)),e.xp6(3),e.Oqu(t.userName),e.xp6(2),e.Oqu(t.email)}}function ub(r,l){if(1&r&&(e.TgZ(0,"div",35)(1,"ul",36),e.YNc(2,cb,8,3,"li",37),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.users)}}function db(r,l){1&r&&(e.TgZ(0,"p",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Roles.NotSelected")," "))}function kc(r,l){1&r&&(e.TgZ(0,"p",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Roles.NoResults")," "))}function pb(r,l){1&r&&e._UZ(0,"app-simple-loader")}function Sd(r,l){1&r&&e.GkF(0)}function xd(r,l){1&r&&e.GkF(0)}const ks=function(r,l,t,i){return{id:"usersAddingSummary",title:r,data:l,label:t,empty:i}},vA=function(r,l,t,i){return{id:"usersRemovingSummary",title:r,data:l,label:t,empty:i}};function R_(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"div",20),e._UZ(2,"p",21),e.qZA(),e.TgZ(3,"div",22)(4,"h2",23),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",24)(8,"label",25)(9,"span",8),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"input",26),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.searchTerm=p)})("keyup",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.search(p))}),e.qZA()()(),e.TgZ(13,"div",27)(14,"div",28),e.YNc(15,ub,3,1,"div",29),e.YNc(16,db,3,3,"p",30),e.YNc(17,kc,3,3,"p",30),e.YNc(18,pb,1,0,"app-simple-loader",11),e.qZA(),e.TgZ(19,"div",31)(20,"div",32),e.YNc(21,Sd,1,0,"ng-container",33),e.ALo(22,"translate"),e.ALo(23,"translate"),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"div",34),e.YNc(26,xd,1,0,"ng-container",33),e.ALo(27,"translate"),e.ALo(28,"translate"),e.ALo(29,"translate"),e.qZA()()()()}if(2&r){const t=e.oxw(),i=e.MAs(17);e.xp6(2),e.Q6J("innerHtml",t.summaryText,e.oJD),e.xp6(3),e.Oqu(e.lcZ(6,12,"Roles.SearchAllUsers")),e.xp6(5),e.Oqu(e.lcZ(11,14,"Roles.SearchUsers")),e.xp6(2),e.Q6J("ngModel",t.searchTerm),e.xp6(3),e.Q6J("ngIf",!t.isLoading&&t.hasSearched&&t.users.length>0),e.xp6(1),e.Q6J("ngIf",!t.isLoading&&!t.hasSearched&&t.users.length<1),e.xp6(1),e.Q6J("ngIf",!t.isLoading&&t.hasSearched&&t.users.length<1),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(3),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.l5B(28,ks,e.lcZ(22,16,"Roles.Adding"),t.usersAdding,e.lcZ(23,18,"Roles.CancelAdding"),e.lcZ(24,20,"Roles.NoUsersAdding"))),e.xp6(5),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.l5B(33,vA,e.lcZ(27,22,"Roles.Removing"),t.usersRemoving,e.lcZ(28,24,"Roles.CancelRemoving"),e.lcZ(29,26,"Roles.NoUsersRemoving")))}}function P_(r,l){if(1&r&&(e.TgZ(0,"p",44),e._uU(1),e.qZA()),2&r){const t=e.oxw().empty;e.xp6(1),e.Oqu(t)}}function hb(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"li",52)(1,"button",53),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(3);return e.KtG(K.toggleIfInRole(C))}),e.TgZ(2,"div",54),e._UZ(3,"span",55),e.TgZ(4,"span",56),e._uU(5),e.qZA()()()()}if(2&r){const t=l.$implicit,i=e.oxw(2).label;e.xp6(1),e.uIk("aria-label",i+" "+t.userName),e.xp6(4),e.Oqu(t.userName)}}function L_(r,l){if(1&r&&(e.TgZ(0,"div",49)(1,"ul",50),e.YNc(2,hb,6,2,"li",51),e.qZA()()),2&r){const t=e.oxw(),i=t.id,p=t.data;e.xp6(1),e.s9C("id",i),e.xp6(1),e.Q6J("ngForOf",p)}}function U_(r,l){if(1&r&&(e.TgZ(0,"h2",45),e._uU(1),e.TgZ(2,"span",46),e._uU(3),e.qZA()(),e.TgZ(4,"div",47),e.YNc(5,P_,2,1,"p",30),e.YNc(6,L_,3,2,"div",48),e.qZA()),2&r){const t=l.title,i=l.data;e.xp6(1),e.hij(" ",t," "),e.xp6(2),e.hij("(",i.length,")"),e.xp6(2),e.Q6J("ngIf",i.length<1),e.xp6(1),e.Q6J("ngIf",i.length>0)}}const B_=function(){return{animated:!1,backdrop:"static"}};let F_=(()=>{class r extends ol.bk{constructor(t,i,p,C,K){super(C,K,!1),this.userService=t,this.rolesService=i,this.translateService=p,this.onSubmitted=new e.vpe,this.isLoading=!1,this.isSaving=!1,this.hasSearched=!1,this.users=new Array,this.usersAdding=[],this.usersRemoving=[],this.usersInRole=[]}ngOnInit(){this.summaryText=this.translateService.instant("Roles.AddRemoveUsersFromRole").replace("{0}",this.role.name),this.roleManagerUsers.onShow.subscribe(()=>{this.reset()}),this.searchSource.pipe((0,D.T)(this.enterKeySource)).subscribe(()=>{this.isLoading=!0,this.userService.getLightweightUsersAndIfInRole(this.role.id,"active",this.searchTerm,1,50).subscribe(K=>{this.users=K.results;const Ce=[...this.users.filter(Ue=>Ue.isInRole),...this.usersInRole];this.usersInRole=go.Tw(Ce,!1,Ue=>Ue.subject),this.isLoading=!1,this.hasSearched=!0},K=>{this.isLoading=!1})})}mapSearchTerm(t){return{searchTerm:t}}reset(){this.isLoading=!1,this.isSaving=!1,this.hasSearched=!1,this.users=[],this.usersAdding=[],this.usersRemoving=[],this.searchTerm="",this.searchTermStream.next("")}hide(){this.roleManagerUsers.hide()}show(){this.roleManagerUsers.show()}toggleIfInRole(t){if(t.isInRole){const i=go.cx(this.usersRemoving,p=>p.subject===t.subject);i>-1?(this.usersRemoving.splice(i,1),this.usersInRole.push(t)):(this.usersRemoving.push(t),this.usersInRole.splice(this.usersInRole.indexOf(t),1))}else{const i=go.cx(this.usersAdding,p=>p.subject===t.subject);i>-1?(this.usersAdding.splice(i,1),this.usersInRole.splice(this.usersInRole.indexOf(t),1)):(this.usersAdding.push(t),this.usersInRole.push(t))}}checkChecked(t){let i;return t.isInRole?(i=go.sE(this.usersRemoving,p=>p.subject===t.subject),void 0===i):(i=go.sE(this.usersAdding,p=>p.subject===t.subject),void 0!==i)}addOrRemoveUsers(){const t=[];this.isSaving=!0,t.push(...this.usersAdding.map(i=>({username:i.userName,subject:i.subject,addOrRemove:Oc.Add}))),t.push(...this.usersRemoving.map(i=>({username:i.userName,subject:i.subject,addOrRemove:Oc.Remove}))),this.rolesService.addAndRemoveUsers(this.role.id,t).subscribe(()=>{this.hide(),this.onSubmitted.emit(),this.toastr.success(this.translate.instant("Roles.Success"),this.translate.instant("Notifications.Success"))},i=>{this.isSaving=!1,401===i.status?this.toastr.warning(this.translate.instant("Roles.UpdateUnauthorized"),this.translate.instant("Notifications.Unauthorized")):this.toastr.warning(this.translate.instant("Roles.UpdateBadRequest"),this.translate.instant("Notifications.Failed"))})}ngOnDestroy(){this.hide()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Cr.K),e.Y36(ce.f),e.Y36(Ut.sK),e.Y36(si._W),e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-role-manageusers"]],viewQuery:function(t,i){if(1&t&&e.Gf(_A,7),2&t){let p;e.iGM(p=e.CRH())&&(i.roleManagerUsers=p.first)}},inputs:{role:"role"},outputs:{onSubmitted:"onSubmitted"},features:[e.qOj],decls:28,vars:19,consts:[["bsModal","","id","roleManagerUsers","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["roleManagerUsers","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"disabled","click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","scrollbars"],[3,"text",4,"ngIf"],[4,"ngIf"],["commonSummaryGroup",""],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["id","manageUserSubmit","type","submit",1,"tw-btn-success",3,"disabled","click"],[1,"tw-btn-link","tw--mr-4",3,"disabled","click"],[3,"text"],[1,"cms"],[3,"innerHtml"],[1,"tw-mb-4","md:tw-w-1/2","tw-pr-3"],[1,"tw-text-sm","tw-font-semibold","tw-mb-3"],[1,"tw-relative"],["for","roleUserSearch",1,"far","fa-search","tw-flex","tw-items-center","tw-justify-center","tw-text-grey-700","tw-m-0","tw-text-xs","tw-absolute","tw-inset-y-0","tw-w-10"],["id","roleUserSearch","type","search","minlength","2","maxlength","25","required","","autocomplete","off",1,"tw-form-control","tw-pl-8",3,"ngModel","ngModelChange","keyup"],[1,"md:tw-flex","md:tw-min-h-64","md:tw-max-h-popups-short"],[1,"tw-mb-6","md:tw-mb-0","md:tw-pr-3","md:tw-w-1/2"],["class","tw-max-h-48 tw-overflow-x-none tw-overflow-y-auto scrollbars md:tw-max-h-full md:tw-h-full",4,"ngIf"],["class","tw-italic tw-text-xs tw-text-grey-700",4,"ngIf"],[1,"md:tw-pl-3","md:tw-w-1/2"],[1,"tw-pb-3","md:tw-flex","md:tw-flex-col","md:tw-max-h-1/2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tw-pt-3","md:tw-flex","md:tw-flex-col","md:tw-max-h-1/2"],[1,"tw-max-h-48","tw-overflow-x-none","tw-overflow-y-auto","scrollbars","md:tw-max-h-full","md:tw-h-full"],["id","usersInRoleTable"],["class","tw-border-t-2 tw-border-grey-100 first:tw-border-t-0",4,"ngFor","ngForOf"],[1,"tw-border-t-2","tw-border-grey-100","first:tw-border-t-0"],[1,"tw-flex","tw-items-start","tw-bg-white","tw-normal-case","tw-text-sm","tw-m-0","tw-px-4","tw-py-3","tw-cursor-pointer"],["type","checkbox",1,"tw-shrink-0","tw-block","tw-mt-1","tw-mr-2",3,"checked","change"],[1,"tw-w-full","tw-truncate"],[1,"tw-block","tw-truncate"],[1,"tw-block","tw-text-xs","tw-text-grey-600","tw-mt-1","tw-truncate"],[1,"tw-italic","tw-text-xs","tw-text-grey-700"],[1,"tw-text-sm","tw-font-semibold","tw-mb-2"],[1,"tw-text-xs","tw-text-grey-700"],[1,"tw-overflow-x-none","tw-overflow-y-auto","scrollbars"],["class","tw--mt-2 tw--ml-2",4,"ngIf"],[1,"tw--mt-2","tw--ml-2"],[1,"tw-flex","tw-flex-wrap","tw-items-center",3,"id"],["class","tw-pl-2 tw-pt-2",4,"ngFor","ngForOf"],[1,"tw-pl-2","tw-pt-2"],[1,"tw-pill","hover:tw-bg-red-500","group","hover:tw-text-white",3,"click"],[1,"tw-flex","tw-items-center","tw-text-left","tw-truncate"],["aria-hidden","true",1,"fas","fa-times","tw-text-red-500","tw-mr-2","tw-shrink-0","group-hover:tw-text-white"],["aria-hidden","true",1,"tw-block","tw-truncate"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.hide()}),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",9),e.YNc(14,fi,2,3,"app-simple-loader",10),e.YNc(15,R_,30,38,"div",11),e.YNc(16,U_,7,4,"ng-template",null,12,e.W1O),e.qZA(),e._UZ(18,"div",13),e.TgZ(19,"div",14)(20,"div",15)(21,"div",16)(22,"button",17),e.NdJ("click",function(){return i.addOrRemoveUsers()}),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"button",18),e.NdJ("click",function(){return i.hide()}),e._uU(26),e.ALo(27,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("config",e.DdM(18,B_)),e.xp6(6),e.Oqu(e.lcZ(7,10,"Roles.RoleUserManagement")),e.xp6(2),e.Q6J("disabled",i.isSaving),e.xp6(3),e.Oqu(e.lcZ(12,12,"Common.Close")),e.xp6(3),e.Q6J("ngIf",i.isSaving),e.xp6(1),e.Q6J("ngIf",!i.isSaving),e.xp6(7),e.Q6J("disabled",i.isSaving||i.usersAdding.length<1&&i.usersRemoving.length<1),e.xp6(1),e.hij(" ",e.lcZ(24,14,"Common.Save")," "),e.xp6(2),e.Q6J("disabled",i.isSaving),e.xp6(1),e.Oqu(e.lcZ(27,16,"Common.Close")))},dependencies:[z.sg,z.O5,z.tP,h.Fj,h.JJ,h.Q7,h.wO,h.nD,h.On,le.oB,En.w,Ut.X$],encapsulation:2}),r})();function fb(r,l){if(1&r){const t=e.EpF();e.ynx(0,17),e.TgZ(1,"div",18)(2,"label",19),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"select",20),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2);return e.KtG(C.pageSize=p)})("change",function(){e.CHM(t);const p=e.oxw(2);return e.KtG(p.setPageLength(+p.pageSize))}),e.TgZ(6,"option",21),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"option",22),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"option",23),e._uU(13),e.ALo(14,"translate"),e.qZA()()(),e.BQk()}if(2&r){const t=e.oxw(2);e.xp6(3),e.AsE("",t.pageSize," ",e.lcZ(4,6,"Nav.PerPage"),""),e.xp6(2),e.Q6J("ngModel",t.pageSize),e.xp6(2),e.hij("25 ",e.lcZ(8,8,"Nav.PerPage"),""),e.xp6(3),e.hij("50 ",e.lcZ(11,10,"Nav.PerPage"),""),e.xp6(3),e.hij("100 ",e.lcZ(14,12,"Nav.PerPage"),"")}}function mb(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Roles.ManageUsers")," "))}function gb(r,l){1&r&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Roles.AddUsers")," "))}function au(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-action-bar"),e.YNc(1,fb,15,14,"ng-container",14),e.ynx(2,15),e.TgZ(3,"button",16),e.NdJ("click",function(){e.CHM(t),e.oxw();const p=e.MAs(11);return e.KtG(p.show())}),e.YNc(4,mb,3,3,"span",7),e.YNc(5,gb,3,3,"span",7),e.qZA(),e.BQk(),e.qZA()}if(2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.pagedResult?null:t.pagedResult.results.length)>0),e.xp6(3),e.Q6J("ngIf",t.users&&t.users.length>0),e.xp6(1),e.Q6J("ngIf",t.users&&t.users.length<1)}}function _b(r,l){1&r&&e._UZ(0,"app-simple-loader")}function vb(r,l){1&r&&(e.TgZ(0,"div",24)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Users.NoUsersFound")))}function yb(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",31),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.goToUser(C))}),e.TgZ(2,"b",32),e._uU(3),e.qZA()(),e.TgZ(4,"td",33),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.goToUser(C))}),e._uU(5),e.qZA(),e.TgZ(6,"td",33),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.goToUser(C))}),e._uU(7),e.qZA(),e.TgZ(8,"td",34),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.removeUser(C))}),e.TgZ(9,"button",35),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.removeUser(C))}),e._UZ(10,"span",36),e.TgZ(11,"span",5),e._uU(12),e.ALo(13,"translate"),e.qZA()()()()}if(2&r){const t=l.$implicit;e.xp6(3),e.Oqu(t.username),e.xp6(2),e.hij(" ",t.firstName," "),e.xp6(2),e.hij(" ",t.lastName," "),e.xp6(5),e.Oqu(e.lcZ(13,4,"Common.Remove.Title"))}}function Ed(r,l){if(1&r&&(e.TgZ(0,"table",25)(1,"thead")(2,"tr")(3,"th",26),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",27),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",27),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",28)(13,"span",5),e._uU(14),e.ALo(15,"translate"),e.qZA()()()(),e.TgZ(16,"tbody",29),e.YNc(17,yb,14,6,"tr",30),e.qZA()()),2&r){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,5,"Users.Username")),e.xp6(3),e.Oqu(e.lcZ(8,7,"Users.FirstName")),e.xp6(3),e.Oqu(e.lcZ(11,9,"Users.LastName")),e.xp6(4),e.Oqu(e.lcZ(15,11,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",t.users)}}function Z_(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-pager",37),e.NdJ("onGoToPage",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.goToPage(p))}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("totalResults",null==t.pagedResult?null:t.pagedResult.totalCount)("currentPage",t.page)("lastPage",null==t.pagedResult?null:t.pagedResult.pageCount)}}const V_=function(){return{animated:!1,backdrop:"static"}};function H_(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",38)(1,"div",39)(2,"div",40)(3,"div",41)(4,"h5",42),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",43),e._UZ(8,"span",36),e.TgZ(9,"span",5),e._uU(10),e.ALo(11,"translate"),e.qZA()()(),e.TgZ(12,"div",44),e._UZ(13,"p",45),e.qZA(),e._UZ(14,"div",46),e.TgZ(15,"div",47)(16,"div",48)(17,"div",49)(18,"button",50),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.delete())}),e._uU(19),e.ALo(20,"translate"),e.qZA()(),e.TgZ(21,"button",51),e._uU(22),e.ALo(23,"translate"),e.qZA()()()()()()}if(2&r){const t=e.oxw();e.Q6J("config",e.DdM(14,V_)),e.xp6(5),e.Oqu(e.lcZ(6,6,"Common.Remove.Confirm")),e.xp6(5),e.Oqu(e.lcZ(11,8,"Common.Close")),e.xp6(3),e.Q6J("innerHtml",t.removeSummary,e.oJD),e.xp6(6),e.Oqu(e.lcZ(20,10,"Common.Remove.Title")),e.xp6(3),e.Oqu(e.lcZ(23,12,"Common.Remove.No"))}}let Cb=(()=>{class r extends ol.bk{constructor(t,i,p,C,K,Ce,Ue){super(K,i,!0),this.rolesService=t,this.localize=p,this.router=C,this.errorService=Ce,this.userService=Ue,this.pageStream=new o.x,this.pageSizeStream=new o.x,this.userToRemove=null,this.removeSummaryTranslation="",this.removeSummary="",this.page=1,this.pageSize=25,this.removeSummaryTranslation=i.instant("Roles.AreYouSureRemove")}ngOnInit(){this.isLoading=!0,this.rolesService.getCachedRole().pipe((0,tr.P)()).subscribe(t=>{this.role=t,this.removeSummaryTranslation=this.removeSummaryTranslation.replace("{1}",this.role.name);const i=this.pageStream.pipe((0,u.U)(K=>(this.page=K,{searchTerm:this.searchTerm,page:K,pageSize:this.pageSize}))),p=this.pageSizeStream.pipe((0,u.U)(K=>(this.pageSize=K,{searchTerm:this.searchTerm,page:this.page,pageSize:K})));i.pipe((0,D.T)(p),(0,D.T)(this.searchSource),(0,D.T)(this.enterKeySource),(0,F.O)({searchTerm:this.searchTerm,page:this.page,pageSize:this.pageSize}),(0,re.z)(K=>(this.isLoading=!0,this.rolesService.getUsersInRole(t.id,K.page,K.pageSize,K.searchTerm).pipe((0,Qa.g)(200))))).subscribe(K=>{this.pagedResult=K,this.users=K.results,this.isLoading=!1},K=>{this.errorService.handleError(K),this.isLoading=!1})})}mapSearchTerm(t){return this.searchTerm=t,{searchTerm:this.searchTerm,page:1,pageSize:this.pageSize}}onSubmit(t){this.pageStream.next(1)}goToPage(t){this.pageStream.next(t)}setPageLength(t){this.page=1,this.pageSizeStream.next(t)}goToUser(t){const i=[this.localize.translateRoute("/users"),t.subject,"roles"];this.router.navigate(i)}removeUser(t){this.removeSummary=this.removeSummaryTranslation.replace("{0}",t.username),this.userToRemove=t}delete(){this.isLoading=!0,this.userService.deleteUserRoles(this.userToRemove.subject,[this.role.name]).subscribe(t=>{let i=this.users&&1===this.users.length&&this.page>1?this.page-1:this.page;i<1&&(i=1),this.goToPage(i),this.toastr.success(this.translate.instant("Roles.Success"),this.translate.instant("Notifications.Success")),this.userToRemove=null},t=>{this.isLoading=!1,401===t.status&&this.toastr.warning(this.translate.instant("Roles.UnassignUnauthorized"),this.translate.instant("Notifications.Unauthorized")),this.userToRemove=null})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(ce.f),e.Y36(Ut.sK),e.Y36(Un.An),e.Y36(yn.F0),e.Y36(si._W),e.Y36(Ee.T),e.Y36(Cr.K))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-role-users"]],features:[e.qOj],decls:17,vars:11,consts:[[1,"tw-container","tw-mx-auto"],["id","searchContainer",1,"tw-mb-2"],[1,"tw-flex","tw-bg-white","tw-border","tw-border-grey-300","tw-opacity-75","tw-cursor-text","tw-rounded","focus-within:tw-opacity-100","focus-within:tw-border-blue-400","trans"],["for","searchTerm",1,"tw-flex","tw-items-center","tw-text-grey-500","tw-m-0","tw-ml-3"],["aria-hidden","true",1,"far","fa-search","tw-text-sm"],[1,"sr-only"],["id","searchRole","type","search","minlength","2","maxlength","25","required","","autocomplete","off",1,"tw-bg-transparent","tw-border-0","tw-text-base","tw-leading-tight","tw-px-2","tw-py-2","tw-w-full","focus:tw-outline-none","trans",3,"ngModel","ngModelChange","keyup"],[4,"ngIf"],["id","manageUsersModal",3,"role","onSubmitted"],["manageUsersModal",""],["class","tw-alert","role","alert",4,"ngIf"],["id","roleUsersTable","class","datatable selectable hover",4,"ngIf"],[3,"totalResults","currentPage","lastPage","onGoToPage",4,"ngIf"],["bsModal","","id","removeUserModal","class","modal","role","dialog","aria-hidden","true","tabindex","-1",3,"config",4,"ngIf"],["left","",4,"ngIf"],["right",""],["id","manageUsersButton",1,"tw-btn-success",3,"click"],["left",""],[1,"tw-form-select","tw-w-auto"],["for","pageSizeToggle",1,"sr-only"],["id","pageSizeToggle",1,"tw-form-control","tw-form-control-small",3,"ngModel","ngModelChange","change"],["value","25"],["value","50"],["value","100"],["role","alert",1,"tw-alert"],["id","roleUsersTable",1,"datatable","selectable","hover"],[1,"sm:tw-w-1/3","md:tw-w-1/2"],[1,"tw-hidden","sm:tw-table-cell"],[1,"tw-w-1"],["id","usersInRoleTable"],[4,"ngFor","ngForOf"],[1,"tw-max-w-0","tw-truncate",3,"click"],[1,"tw-text-blue-500"],[1,"tw-hidden","tw-max-w-0","tw-truncate","sm:tw-table-cell",3,"click"],[3,"click"],["data-toggle","modal","data-target","#removeUserModal",1,"tw-btn-link","tw-btn-small","tw-text-red-500",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[3,"totalResults","currentPage","lastPage","onGoToPage"],["bsModal","","id","removeUserModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],[1,"modal-dialog","modal-dialog--danger"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal",1,"modal-close"],[1,"modal-body","tw-text-center","scrollbars"],[3,"innerHtml"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["data-dismiss","modal",1,"tw-btn-danger",3,"click"],["data-dismiss","modal",1,"tw-btn-link","tw--mr-4"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),e._UZ(4,"span",4),e.TgZ(5,"span",5),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"input",6),e.NdJ("ngModelChange",function(C){return i.searchTerm=C})("keyup",function(C){return i.search(C)}),e.qZA()()(),e.YNc(9,au,6,3,"app-action-bar",7),e.TgZ(10,"app-role-manageusers",8,9),e.NdJ("onSubmitted",function(C){return i.onSubmit(C)}),e.qZA(),e.YNc(12,_b,1,0,"app-simple-loader",7),e.YNc(13,vb,4,3,"div",10),e.YNc(14,Ed,18,13,"table",11),e.YNc(15,Z_,1,3,"app-pager",12),e.qZA(),e.YNc(16,H_,24,15,"div",13)),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,9,"Common.Search")),e.xp6(2),e.Q6J("ngModel",i.searchTerm),e.xp6(1),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("role",i.role),e.xp6(2),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",i.users&&0==i.users.length&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.users&&i.users.length>0&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.pagedResult?null:i.pagedResult.results.length)>0&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.userToRemove))},dependencies:[z.sg,z.O5,h.YN,h.Kr,h.Fj,h.EJ,h.JJ,h.Q7,h.wO,h.nD,h.On,le.oB,wt.P,kt.K,En.w,F_,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();class lu{}var Rc=m(6548);let J_=(()=>{class r{constructor(t,i,p,C,K){this.claimTypeService=t,this.permissionService=i,this.accessPolicyService=p,this.rolesService=C,this.errorService=K}resolve(){const t=this.permissionService.getAvaliablePermissions(),i=this.accessPolicyService.getAccessPolicy(),p=this.claimTypeService.getClaimTypes(),C=this.rolesService.getRoles();return(0,Xs.D)([t,i,p,C]).pipe((0,u.U)(([Ce,Ue,lt,Et])=>{const Wt=new lu;return Wt.permissions=Ce,Wt.claimTypes=lt,Wt.accessPolicy=Ue,Wt.roles=Et,Wt},Ce=>{this.errorService.handleError(Ce)}))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(so.M),e.LFG(Rc.$),e.LFG(hd),e.LFG(ce.f),e.LFG(Ee.T))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})(),bb=(()=>{class r{constructor(t){this.clientCachingService=t,this.properties=[]}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.properties=t.properties.sort()})}ngOnDestroy(){this.subscription.unsubscribe()}onPropertiesChanged(t){const i=JSON.parse(JSON.stringify(this.client));i.properties=t,this.clientCachingService.componentDirtyValidMap.set("ClientPropertiesComponent",{isValid:!0}),this.properties=t,this.clientCachingService.unsavedCache.next(i)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Vs.Z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-properties"]],decls:1,vars:2,consts:[[3,"modalId","properties","propertiesChanged"]],template:function(t,i){1&t&&(e.TgZ(0,"app-properties-editor",0),e.NdJ("propertiesChanged",function(C){return i.onPropertiesChanged(C)}),e.qZA()),2&t&&e.Q6J("modalId",i.client.id)("properties",i.client.properties)},dependencies:[Td.s],encapsulation:2}),r})();var wb=m(1946);const q_=["addEditAvailableAssertionsButton"],Q_=["addButton"],W_=["addAvailableAssertionsButton"];function Tb(r,l){if(1&r&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.xp6(1),e.Oqu(t)}}function j_(r,l){1&r&&(e.TgZ(0,"div",24)(1,"div",25),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"Clients.ClaimMappings.None")))}function Ab(r,l){if(1&r&&(e.TgZ(0,"b",40),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Oqu(i.getValueAlias(t.value))}}function Sb(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",30)(2,"b"),e._uU(3),e.qZA()(),e.TgZ(4,"td",31),e.YNc(5,Ab,2,1,"b",32),e.TgZ(6,"span",33),e._uU(7),e.qZA()(),e.TgZ(8,"td",29)(9,"div",34)(10,"button",35,36),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.MAs(11),Ce=e.oxw(2);return e.KtG(Ce.openEditModal(C,K))}),e._UZ(12,"span",37),e.TgZ(13,"span",15),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"button",38),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw(2);return e.KtG(K.removeMapping(C.key))}),e._UZ(17,"span",39),e.TgZ(18,"span",15),e._uU(19),e.ALo(20,"translate"),e.qZA()()()()()}if(2&r){const t=l.$implicit,i=e.oxw(2);e.xp6(3),e.Oqu(t.key),e.xp6(2),e.Q6J("ngIf",i.getValueAlias(t.value)),e.xp6(2),e.Oqu(t.value),e.xp6(7),e.Oqu(e.lcZ(15,5,"Common.Edit")),e.xp6(5),e.Oqu(e.lcZ(20,7,"Common.Remove.Title"))}}function yA(r,l){if(1&r&&(e.TgZ(0,"table",26)(1,"thead")(2,"tr")(3,"th",27),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",28),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",29)(10,"span",15),e._uU(11),e.ALo(12,"translate"),e.qZA()()()(),e.TgZ(13,"tbody"),e.YNc(14,Sb,21,9,"tr",8),e.ALo(15,"keyvalue"),e.qZA()()),2&r){const t=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,4,"Clients.ClaimMappings.ClaimType")),e.xp6(3),e.Oqu(e.lcZ(8,6,"Clients.ClaimMappings.AssertionTypeHeading")),e.xp6(4),e.Oqu(e.lcZ(12,8,"Common.Actions")),e.xp6(3),e.Q6J("ngForOf",e.lcZ(15,10,t.claimMappings))}}function CA(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",41),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw();return e.KtG(K.updateValue(C.value))}),e.TgZ(2,"label",42)(3,"input",43),e.NdJ("change",function(){const C=e.CHM(t).$implicit,K=e.oxw();return e.KtG(K.updateValue(C.value))}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"td",44),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw();return e.KtG(K.updateValue(C.value))}),e.TgZ(6,"b",40),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"span",45),e._uU(10),e.qZA()()()}if(2&r){const t=l.$implicit,i=e.oxw();e.xp6(3),e.Q6J("checked",t.value==i.addValue),e.uIk("aria-label",e.lcZ(4,4,"Common.Add")),e.xp6(4),e.Oqu(e.lcZ(8,6,"Clients.ClaimMappings.AssertionTypeValues."+t.key)),e.xp6(3),e.Oqu(t.value)}}function bA(r,l){if(1&r&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.xp6(1),e.Oqu(t)}}function wA(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"tr")(1,"td",41),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw();return e.KtG(K.updateEditValue(C.value))}),e.TgZ(2,"label",42)(3,"input",43),e.NdJ("change",function(){const C=e.CHM(t).$implicit,K=e.oxw();return e.KtG(K.updateEditValue(C.value))}),e.ALo(4,"translate"),e.qZA()()(),e.TgZ(5,"td",44),e.NdJ("click",function(){const C=e.CHM(t).$implicit,K=e.oxw();return e.KtG(K.updateEditValue(C.value))}),e.TgZ(6,"b",40),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"span",45),e._uU(10),e.qZA()()()}if(2&r){const t=l.$implicit,i=e.oxw();e.xp6(3),e.Q6J("checked",t.value==i.editingMapping.value),e.uIk("aria-label",e.lcZ(4,4,"Common.Add")),e.xp6(4),e.Oqu(e.lcZ(8,6,"Clients.ClaimMappings.AssertionTypeValues."+t.key)),e.xp6(3),e.Oqu(t.value)}}class Oh{}let cu=(()=>{class r{constructor(t,i,p,C,K,Ce){this.cache=t,this.claimTypesService=i,this.errorService=p,this.toast=C,this.translate=K,this.modalService=Ce,this.claimMappings=new Map,this.addType="",this.addValue="",this.editingMapping=new Oh,this.editModalActions=[Vt.n.Save],this.editModalId="editMappingModalId",this.editAssertionsModalActions=[Vt.n.Save],this.editAssertionsModalId="editAssertionsModalId",this.addModalActions=[Vt.n.Save],this.addModalId="addMappingModalId",this.addAssertionsModalActions=[Vt.n.Save],this.addAssertionsModalId="addAssertionsModalId"}ngOnInit(){this.cache.unsavedCache$.subscribe(t=>{this.relyingParty=t,this.claimMappings=new Map(t.claimMappings)}),this.claimTypesService.getClaimTypes().subscribe(t=>{this.avaliableClaimTypes=t.map(i=>i.name)},t=>{this.errorService.handleError(t)}),this.avaliableAssertionTypes=wb.P.claimTypes}openAddModal(){this.modalService.showById(this.addModalId,this.addButtonRef)}openEditModal(t,i){const p=JSON.parse(JSON.stringify(t));this.editingMapping.type=t.key,this.editingMapping.value=t.value,this.editingMapping.oldMapping=p,this.editButton=i,this.modalService.showById(this.editModalId,i)}editMapping(){this.editingMapping.type!==this.editingMapping.oldMapping.key?(this.claimMappings.delete(this.editingMapping.oldMapping.key),this.claimMappings.set(this.editingMapping.type,this.editingMapping.value)):this.claimMappings.set(this.editingMapping.type,this.editingMapping.value),this.updateMappings()}resetAndCloseEditModal(){this.editingMapping=new Oh,this.editButton=null,this.modalService.hideById(this.editModalId)}displayEditAvaliableAssertionTypesModal(){this.modalService.hideById(this.editModalId),this.modalService.showById(this.editAssertionsModalId,this.addEditAssertionsButtonRef)}closeEditAvaliableAssertionTypesModal(){this.modalService.hideById(this.editAssertionsModalId),this.modalService.showById(this.editModalId,this.editButton)}cancelAdd(){this.clear(),this.modalService.hideById(this.addModalId)}addMapping(){if(void 0!==this.claimMappings.get(this.addType)){const t=this.translate.instant("Clients.ClaimMappings.ExisitingMappingWarning")+` ${this.addType}`;this.toast.warning(t,this.translate.instant("Common.Warning"))}else this.claimMappings.set(this.addType,this.addValue),this.updateMappings();this.closeAvaliableAssertionTypesModal(),this.cancelAdd()}removeMapping(t){this.claimMappings.delete(t),this.updateMappings()}updateMappings(){const t=this.relyingParty;t.claimMappings=this.claimMappings,this.cache.componentDirtyValidMap.set("ClaimsMapping",{isValid:!0}),this.cache.unsavedCache.next(t),this.clear()}displayAvaliableAssertionTypesModal(){this.modalService.hideById(this.addModalId),this.modalService.showById(this.addAssertionsModalId,this.addAssertionsButtonRef)}updateValue(t){this.addValue=t}updateEditValue(t){this.editingMapping.value=t}closeAvaliableAssertionTypesModal(){this.modalService.hideById(this.addAssertionsModalId),this.modalService.showById(this.addModalId,this.addButtonRef)}clear(){this.addType="",this.addValue=""}getValueAlias(t){for(const i of this.avaliableAssertionTypes)if(i[1]===t)return this.translate.instant("Clients.ClaimMappings.AssertionTypeValues."+i[0])}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(El.h),e.Y36(so.M),e.Y36(Ee.T),e.Y36(si._W),e.Y36(Ut.sK),e.Y36(sr.Z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-claimmappings"]],viewQuery:function(t,i){if(1&t&&(e.Gf(q_,5),e.Gf(Q_,5),e.Gf(W_,5)),2&t){let p;e.iGM(p=e.CRH())&&(i.addEditAssertionsButtonRef=p.first),e.iGM(p=e.CRH())&&(i.addButtonRef=p.first),e.iGM(p=e.CRH())&&(i.addAssertionsButtonRef=p.first)}},decls:69,vars:70,consts:[["id","editClientClaims"],["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"actions","title","modalId","addDisabled","onCancel","onSave"],[3,"id","label"],[1,"tw-form-select"],["id","client-claimmapping-type",1,"tw-form-control",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"id","label","isLast"],[1,"tw-flex","tw-w-full","lg:tw-max-w-2xl"],["id","client-claimmapping-map","type","text","maxlength","250",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0",3,"ngModel","ngModelChange"],[1,"tw-btn","tw-rounded-l-none",3,"click"],["addAvailableAssertionsButton",""],["aria-hidden","true",1,"far","fa-plus"],[1,"sr-only"],["class","tw-alert","role","alert",4,"ngIf"],["class","datatable hover tw-mb-4",4,"ngIf"],[3,"actions","title","modalId","addDisabled","saveText","onCancel","onSave"],[1,"datatable","selectable","hover"],[1,"toggle","tw-w-1"],["id","edit-client-claimmapping-type",1,"tw-form-control",3,"ngModel","ngModelChange"],["id","edit-client-claimmapping-map","type","text","maxlength","250",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0",3,"ngModel","ngModelChange"],["addEditAvailableAssertionsButton",""],["role","alert",1,"tw-alert"],["id","noClaimMappingsLabel"],[1,"datatable","hover","tw-mb-4"],[1,"sm:tw-w-1/3"],[1,"tw-hidden","sm:tw-table-cell"],[1,"tw-w-1"],[1,"tw-max-w-0","tw-truncate"],[1,"tw-hidden","tw-max-w-0","tw-truncate","sm:tw-table-cell"],["class","tw-block tw-truncate",4,"ngIf"],[1,"tw-text-grey-800"],[1,"tw-flex","tw-items-center"],["id","selectButton",1,"tw-btn-link","tw-btn-small",3,"click"],["editButton",""],["aria-hidden","true",1,"fad","fa-pencil"],[1,"tw-btn-link","tw-btn-small","tw-text-red-500",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"tw-block","tw-truncate"],[1,"toggle","tw-w-1",3,"click"],[1,"toggle-label"],["type","radio",1,"tw-block","tw-cursor-pointer",3,"checked","change"],[1,"tw-max-w-0","tw-truncate",3,"click"],[1,"tw-text-xs","tw-text-grey-700"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"app-action-bar"),e.ynx(2,1),e.TgZ(3,"button",2,3),e.NdJ("click",function(){return i.openAddModal()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(7,"app-custom-modal",4),e.NdJ("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addMapping()}),e.TgZ(8,"app-form-row",5)(9,"div",6)(10,"select",7),e.NdJ("ngModelChange",function(C){return i.addType=C}),e._UZ(11,"option"),e.YNc(12,Tb,2,1,"option",8),e.qZA()()(),e.TgZ(13,"app-form-row",9)(14,"div",10)(15,"input",11),e.NdJ("ngModelChange",function(C){return i.addValue=C}),e.qZA(),e.TgZ(16,"button",12,13),e.NdJ("click",function(){return i.displayAvaliableAssertionTypesModal()}),e._UZ(18,"span",14),e.TgZ(19,"span",15),e._uU(20),e.ALo(21,"translate"),e.qZA()()()()(),e.YNc(22,j_,4,3,"div",16),e.YNc(23,yA,16,12,"table",17),e.qZA(),e.TgZ(24,"app-custom-modal",18),e.NdJ("onCancel",function(){return i.closeAvaliableAssertionTypesModal()})("onSave",function(){return i.closeAvaliableAssertionTypesModal()}),e.TgZ(25,"table",19)(26,"thead",15)(27,"tr")(28,"th",20)(29,"span",15),e._uU(30),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"th"),e._uU(33),e.ALo(34,"translate"),e.ALo(35,"translate"),e.qZA()()(),e.TgZ(36,"tbody"),e.YNc(37,CA,11,8,"tr",8),e.ALo(38,"keyvalue"),e.qZA()()(),e.TgZ(39,"app-custom-modal",4),e.NdJ("onCancel",function(){return i.resetAndCloseEditModal()})("onSave",function(){return i.editMapping()}),e.TgZ(40,"app-form-row",5)(41,"div",6)(42,"select",21),e.NdJ("ngModelChange",function(C){return i.editingMapping.type=C}),e._UZ(43,"option"),e.YNc(44,bA,2,1,"option",8),e.qZA()()(),e.TgZ(45,"app-form-row",9)(46,"div",10)(47,"input",22),e.NdJ("ngModelChange",function(C){return i.editingMapping.value=C}),e.qZA(),e.TgZ(48,"button",12,23),e.NdJ("click",function(){return i.displayEditAvaliableAssertionTypesModal()}),e._UZ(50,"span",14),e.TgZ(51,"span",15),e._uU(52),e.ALo(53,"translate"),e.qZA()()()()(),e.TgZ(54,"app-custom-modal",18),e.NdJ("onCancel",function(){return i.closeEditAvaliableAssertionTypesModal()})("onSave",function(){return i.closeEditAvaliableAssertionTypesModal()}),e.TgZ(55,"table",19)(56,"thead",15)(57,"tr")(58,"th",20)(59,"span",15),e._uU(60),e.ALo(61,"translate"),e.qZA()(),e.TgZ(62,"th"),e._uU(63),e.ALo(64,"translate"),e.ALo(65,"translate"),e.qZA()()(),e.TgZ(66,"tbody"),e.YNc(67,wA,11,8,"tr",8),e.ALo(68,"keyvalue"),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("id","addMappingButton"),e.xp6(2),e.hij(" ",e.lcZ(6,48,"Clients.Saml.AddClaimMapping")," "),e.xp6(2),e.Q6J("actions",i.addModalActions)("title","Clients.Saml.AddClaimMapping")("modalId",i.addModalId)("addDisabled",i.addType.length<1||i.addValue.length<1),e.xp6(1),e.Q6J("id","mappingType")("label","Clients.ClaimMappings.ClaimType"),e.xp6(2),e.Q6J("ngModel",i.addType),e.xp6(2),e.Q6J("ngForOf",i.avaliableClaimTypes),e.xp6(1),e.Q6J("id","client-claimmapping-map")("label","Clients.ClaimMappings.AssertionTypeHeading")("isLast",!0),e.xp6(2),e.Q6J("ngModel",i.addValue),e.xp6(5),e.Oqu(e.lcZ(21,50,"Clients.ClaimMappings.AssertionTypeSearch")),e.xp6(2),e.Q6J("ngIf",i.claimMappings.size<1),e.xp6(1),e.Q6J("ngIf",i.claimMappings.size>0),e.xp6(1),e.Q6J("actions",i.addAssertionsModalActions)("title","Clients.ClaimMappings.AssertionTypeHeading")("modalId",i.addAssertionsModalId)("addDisabled",""==i.addValue)("saveText","Common.Add"),e.xp6(6),e.Oqu(e.lcZ(31,52,"Common.Add")),e.xp6(3),e.AsE(" ",e.lcZ(34,54,"Clients.ClaimMappings.AssertionTypeAlias")," / ",e.lcZ(35,56,"Clients.ClaimMappings.AssertionTypeValue")," "),e.xp6(4),e.Q6J("ngForOf",e.lcZ(38,58,i.avaliableAssertionTypes)),e.xp6(2),e.Q6J("actions",i.editModalActions)("title","Clients.Saml.EditClaimMapping")("modalId",i.editModalId)("addDisabled",(null==i.editingMapping.type?null:i.editingMapping.type.length)<1||(null==i.editingMapping.value?null:i.editingMapping.value.length)<1),e.xp6(1),e.Q6J("id","editMappingType")("label","Clients.ClaimMappings.ClaimType"),e.xp6(2),e.Q6J("ngModel",i.editingMapping.type),e.xp6(2),e.Q6J("ngForOf",i.avaliableClaimTypes),e.xp6(1),e.Q6J("id","edit-client-claimmapping-map")("label","Clients.ClaimMappings.AssertionTypeHeading")("isLast",!0),e.xp6(2),e.Q6J("ngModel",i.editingMapping.value),e.xp6(5),e.Oqu(e.lcZ(53,60,"Clients.ClaimMappings.AssertionTypeSearch")),e.xp6(2),e.Q6J("actions",i.editAssertionsModalActions)("title","Clients.ClaimMappings.AssertionTypeHeading")("modalId",i.editAssertionsModalId)("addDisabled",""==i.editingMapping.value)("saveText","Common.Add"),e.xp6(6),e.Oqu(e.lcZ(61,62,"Common.Add")),e.xp6(3),e.AsE(" ",e.lcZ(64,64,"Clients.ClaimMappings.AssertionTypeAlias")," / ",e.lcZ(65,66,"Clients.ClaimMappings.AssertionTypeValue")," "),e.xp6(4),e.Q6J("ngForOf",e.lcZ(68,68,i.avaliableAssertionTypes)))},dependencies:[z.sg,z.O5,h.YN,h.Kr,h.Fj,h.EJ,h.JJ,h.nD,h.On,kt.K,Dn.L,ms.R,z.Nd,Ut.X$],encapsulation:2}),r})(),xb=(()=>{class r{constructor(t){this.serviceProviderCache=t}ngOnInit(){this.serviceProviderCache.unsavedCache$.subscribe(t=>{this.serviceProvider=t})}updateCache(){this.serviceProviderCache.componentDirtyValidMap.set("ClientSamlAdvancedComponent",{isValid:!0}),this.serviceProviderCache.unsavedCache.next(this.serviceProvider)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Al.S))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-saml-advanced"]],decls:14,vars:20,consts:[[3,"id","label","help"],[3,"id"],["id","allowIdpInitiatedSso","type","checkbox",1,"tw-form-switch__input",3,"ngModel","ngModelChange","click"],[1,"tw-form-select"],["id","artifactDeliveryBindingType",1,"tw-form-control",3,"ngModel","ngModelChange","change"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"],["value","urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"],[3,"id","label","help","isLast"],["type","text","id","nameIdentifierFormat",1,"tw-form-control",3,"ngModel","ngModelChange","change"]],template:function(t,i){1&t&&(e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",1)(2,"input",2),e.NdJ("ngModelChange",function(C){return i.serviceProvider.allowIdpInitiatedSso=C})("click",function(){return i.updateCache()}),e.qZA()()(),e.TgZ(3,"app-form-row",0)(4,"div",3)(5,"select",4),e.NdJ("ngModelChange",function(C){return i.serviceProvider.artifactDeliveryBindingType=C})("change",function(){return i.updateCache()}),e.TgZ(6,"option",5),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"option",6),e._uU(10),e.ALo(11,"translate"),e.qZA()()()(),e.TgZ(12,"app-form-row",7)(13,"input",8),e.NdJ("ngModelChange",function(C){return i.serviceProvider.nameIdentifierFormat=C})("change",function(){return i.updateCache()}),e.qZA()()),2&t&&(e.Q6J("id","allowIdpInitiatedSso")("label","Clients.Saml.AllowIdpInitiatedSso")("help","Clients.Saml.AllowIdpInitiatedSsoHelp"),e.xp6(1),e.Q6J("id","allowIdpInitiatedSso"),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.allowIdpInitiatedSso),e.xp6(1),e.Q6J("id","artifactDeliveryBindingType")("label","Clients.Saml.ArtifactDeliveryBindingType")("help","Clients.Saml.ArtifactDeliveryBindingTypeHelp"),e.xp6(2),e.Q6J("ngModel",i.serviceProvider.artifactDeliveryBindingType),e.xp6(2),e.Oqu(e.lcZ(8,16,"Clients.Post")),e.xp6(3),e.Oqu(e.lcZ(11,18,"Clients.Redirect")),e.xp6(2),e.Q6J("id","nameIdentifierFormat")("label","Clients.Saml.NameIdentifierFormat")("help","Clients.Saml.NameIdentifierFormatHelp")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.nameIdentifierFormat))},dependencies:[h.YN,h.Kr,h.Fj,h.Wl,h.EJ,h.JJ,h.On,Dn.L,ds.O,Ut.X$],encapsulation:2}),r})();var kh=m(3257),K_=m(3883),Pc=m(964);const Eb=["uploadCertModal"],Db=["fileInput"],Ib=function(){return{animated:!1,backdrop:"static"}};let $_=(()=>{class r{constructor(t,i,p,C,K){this.cache=t,this.certService=i,this.translate=p,this.toastr=C,this.errorService=K,this.metadata="",this.fileToUpload=null}ngOnInit(){this.cache.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.id=t.id})}handleFileInput(t){this.fileToUpload=t.item(0)}save(){if((0,ot.Ew)(this.metadata)){if(null==this.fileToUpload)throw new Error("This shouldn't have happened");this.uploadCert(this.certService.uploadFile(this.id,this.fileToUpload))}else this.uploadCert(this.certService.uploadViaMetaData(this.id,this.metadata))}uploadCert(t){t.subscribe(()=>{this.certService.updateCertCache(this.id),this.toastr.success(this.translate.instant("Clients.Saml.CertUploadSuccess"),this.translate.instant("Notifications.Success")),this.close()},i=>{switch(i.status){case 400:case 500:this.toastr.error(this.translate.instant("Clients.Saml.InvalidCert"),this.translate.instant("Notifications.Failure"));break;case 409:this.toastr.warning(this.translate.instant("Clients.Saml.DuplicateCertMessage"),this.translate.instant("Clients.Saml.DuplicateCert"));break;default:this.errorService.handleError(i)}})}open(){this.uploadCertModal.show()}close(){this.reset(),this.uploadCertModal.hide()}reset(){this.metadata="",this.fileToUpload=null,this.fileInput.nativeElement.value=null}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Vs.Z),e.Y36(kh.U),e.Y36(Ut.sK),e.Y36(si._W),e.Y36(Ee.T))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-cert-uploader"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Eb,7),e.Gf(Db,7)),2&t){let p;e.iGM(p=e.CRH())&&(i.uploadCertModal=p.first),e.iGM(p=e.CRH())&&(i.fileInput=p.first)}},inputs:{certType:"certType",certExists:"certExists"},decls:46,vars:39,consts:[["bsModal","","id","uploadCertModal","role","dialog","aria-hidden","true","tabindex","-1",1,"modal",3,"config"],["uploadCertModal","bs-modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-body","scrollbars"],[1,"cms","tw-mb-6"],[3,"id","label","help","isLast"],[1,"tw-form-control"],["id","fileInput","type","file","name","cert","accept",".cer",1,"tw-form-file","tw-max-w-full",3,"disabled","change"],["fileInput","","selectedFile",""],[1,"tw-flex","tw-items-center","tw-justify-center","tw-border-b","tw-border-grey-300","tw-my-8","tw-relative","tw-z-10"],[1,"tw-inline-block","tw-bg-grey-100","tw-text-xs","tw-leading-none","tw-uppercase","tw-text-grey-500","tw--my-2","tw-px-2"],["id","metaData",1,"tw-form-control",3,"disabled","ngModel","ngModelChange"],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["type","button","id","save",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],["type","button","id","reset",1,"tw-btn",3,"disabled","click"],["type","button","id","cancel",1,"tw-btn-link","tw--mr-4",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h4",5),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return i.close()}),e._UZ(9,"span",7),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"translate"),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"p"),e._uU(16),e.ALo(17,"translate"),e._UZ(18,"br"),e.TgZ(19,"small"),e._uU(20),e.ALo(21,"translate"),e.qZA()()(),e.TgZ(22,"app-form-row",11)(23,"div",12)(24,"input",13,14),e.NdJ("change",function(C){return i.handleFileInput(C.target.files)}),e.qZA()()(),e.TgZ(27,"div",15)(28,"span",16),e._uU(29),e.ALo(30,"translate"),e.qZA()(),e.TgZ(31,"app-form-row",11)(32,"textarea",17),e.NdJ("ngModelChange",function(C){return i.metadata=C}),e.qZA()()(),e._UZ(33,"div",18),e.TgZ(34,"div",19)(35,"div",20)(36,"div",21)(37,"button",22),e.NdJ("click",function(){return i.save()}),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"button",23),e.NdJ("click",function(){return i.reset()}),e._uU(41),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"button",24),e.NdJ("click",function(){return i.close()}),e._uU(44),e.ALo(45,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("config",e.DdM(38,Ib)),e.xp6(6),e.Oqu(e.lcZ(7,22,"Clients.Saml.AddCert")),e.xp6(5),e.Oqu(e.lcZ(12,24,"Common.Close")),e.xp6(5),e.Oqu(e.lcZ(17,26,"Clients.Saml.AddCertSummary")),e.xp6(4),e.Oqu(e.lcZ(21,28,"Clients.Saml.AddCertNote")),e.xp6(2),e.Q6J("id","fileInput")("label","Clients.Saml.UploadCert")("help","Clients.Saml.UploadCertHelp")("isLast",!0),e.xp6(2),e.Q6J("disabled",""!=i.metadata),e.xp6(5),e.Oqu(e.lcZ(30,30,"Common.Or")),e.xp6(2),e.Q6J("id","metaData")("label","Clients.Saml.ServiceProviderSigningCert")("help","Clients.Saml.ServiceProviderSigningCertHelp")("isLast",!0),e.xp6(1),e.Q6J("disabled",null!=i.fileToUpload)("ngModel",i.metadata),e.xp6(5),e.Q6J("disabled",""==i.metadata&&null==i.fileToUpload),e.xp6(1),e.Oqu(e.lcZ(39,32,"Common.Save")),e.xp6(2),e.Q6J("disabled",""==i.metadata&&null==i.fileToUpload),e.xp6(1),e.Oqu(e.lcZ(42,34,"Common.Reset")),e.xp6(3),e.Oqu(e.lcZ(45,36,"Common.Cancel")))},dependencies:[h.Fj,h.JJ,h.On,le.oB,Dn.L,Ut.X$],encapsulation:2}),r})();function Mb(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t),e.oxw();const p=e.MAs(14);return e.KtG(p.open())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Clients.Saml.AddCert")," "))}function G_(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t),e.oxw();const p=e.MAs(14);return e.KtG(p.open())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Clients.Saml.ReplaceCertificate")," "))}let Nb=(()=>{class r{constructor(t,i,p,C){this.serviceProviderCache=t,this.serviceProviderService=i,this.clientCachingService=p,this.errorService=C,this.canDeleteCert=!1}ngOnInit(){this.serviceProviderCache.unsavedCache$.subscribe(t=>{this.serviceProvider=t,this.encryptionCertificates=this.serviceProvider.encryptionCertificate?[t.encryptionCertificate]:[]}),this.clientCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.clientId=t.id}),this.serviceProviderCache.savedCache$.subscribe(t=>{this.canDeleteCert=t.encryptAssertions})}updateCache(){this.serviceProviderCache.componentDirtyValidMap.set("SamlResponseTabComponent",{isValid:!0}),this.serviceProviderCache.unsavedCache.next(this.serviceProvider)}removeCert(){this.serviceProviderService.deleteEncryptionCertificate(this.clientId).subscribe(()=>{this.serviceProvider.encryptionCertificate=null,this.encryptionCertificates=[],this.serviceProviderCache.unsavedCache.next(this.serviceProvider)},t=>{this.errorService.handleError(t)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Al.S),e.Y36(id.G),e.Y36(Vs.Z),e.Y36(Ee.T))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-saml-response-tab"]],features:[e._Bn([{provide:kh.U,useClass:K_.i}])],decls:15,vars:20,consts:[[3,"id","label","help"],[3,"id"],["id","signAssertions","name","signAssertions","type","checkbox",1,"tw-form-switch__input",3,"ngModel","ngModelChange","click"],["id","encryptAssertions","name","encryptAssertions","type","checkbox",1,"tw-form-switch__input",3,"ngModel","ngModelChange","click"],["id","signResponses","name","requireSignedArtifactResponses","type","checkbox",1,"tw-form-switch__input",3,"ngModel","ngModelChange","click"],[3,"certificates","showSingle","deleteCertDisabled","delete"],["addButton",""],["id","addCertButton","class","tw-btn-success","type","button",3,"click",4,"ngIf"],["id","replaceCertButton","class","tw-btn-success tw-mr-4","type","button",3,"click",4,"ngIf"],["id","certUploadTest"],["certUpload",""],["id","addCertButton","type","button",1,"tw-btn-success",3,"click"],["id","replaceCertButton","type","button",1,"tw-btn-success","tw-mr-4",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",1)(2,"input",2),e.NdJ("ngModelChange",function(C){return i.serviceProvider.signAssertions=C})("click",function(){return i.updateCache()}),e.qZA()()(),e.TgZ(3,"app-form-row",0)(4,"app-form-toggle",1)(5,"input",3),e.NdJ("ngModelChange",function(C){return i.serviceProvider.encryptAssertions=C})("click",function(){return i.updateCache()}),e.qZA()()(),e.TgZ(6,"app-form-row",0)(7,"app-form-toggle",1)(8,"input",4),e.NdJ("ngModelChange",function(C){return i.serviceProvider.requireSignedArtifactResponses=C})("click",function(){return i.updateCache()}),e.qZA()()(),e.TgZ(9,"app-saml-cert-list",5),e.NdJ("delete",function(){return i.removeCert()}),e.ynx(10,6),e.YNc(11,Mb,3,3,"button",7),e.YNc(12,G_,3,3,"button",8),e.BQk(),e.qZA(),e._UZ(13,"app-cert-uploader",9,10)),2&t&&(e.Q6J("id","signAssertions")("label","Clients.Saml.SignAssertions")("help","Clients.Saml.SignAssertionsHelp"),e.xp6(1),e.Q6J("id","signAssertions"),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.signAssertions),e.xp6(1),e.Q6J("id","encryptAssertions")("label","Clients.Saml.EncryptAssertions")("help","Clients.Saml.EncryptAssertionsHelp"),e.xp6(1),e.Q6J("id","encryptAssertions"),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.encryptAssertions),e.xp6(1),e.Q6J("id","signResponses")("label","Clients.Saml.RequireSignedArtifactResponses")("help","Clients.Saml.RequireSignedArtifactResponsesHelp"),e.xp6(1),e.Q6J("id","signResponses"),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.requireSignedArtifactResponses),e.xp6(1),e.Q6J("certificates",i.encryptionCertificates)("showSingle",!0)("deleteCertDisabled",i.canDeleteCert),e.xp6(2),e.Q6J("ngIf",i.encryptionCertificates.length<1),e.xp6(1),e.Q6J("ngIf",i.encryptionCertificates.length>0))},dependencies:[z.O5,h.Wl,h.JJ,h.On,Dn.L,ds.O,Pc.z,$_,Ut.X$],encapsulation:2}),r})();var Ob=m(5302);let uu=(()=>{class r{constructor(t,i,p,C,K){this.translateService=t,this.serviceProviderCache=i,this.serviceProviderService=p,this.clientCachingService=C,this.errorService=K}ngOnInit(){this.serviceProviderCache.unsavedCache$.subscribe(t=>{this.serviceProvider=t,this.signingCertificates=t.signingCertificates.slice()}),this.clientCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.clientId=t.id})}updateCache(){this.serviceProviderCache.componentDirtyValidMap.set("SamlRequestTabComponent",{isValid:!0}),this.serviceProviderCache.unsavedCache.next(this.serviceProvider)}removeCert(t){this.serviceProviderService.deleteSigningCertificate(this.clientId,t.thumbprint).subscribe(()=>{const i=this.signingCertificates.indexOf(t);this.signingCertificates.splice(i,1),this.serviceProvider.signingCertificates=this.signingCertificates,this.serviceProviderCache.unsavedCache.next(this.serviceProvider)},i=>{this.errorService.handleError(i)})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Ut.sK),e.Y36(Al.S),e.Y36(id.G),e.Y36(Vs.Z),e.Y36(Ee.T))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-saml-request"]],features:[e._Bn([{provide:kh.U,useExisting:Ob.L}])],decls:23,vars:22,consts:[[3,"id","label","help"],[3,"id"],["id","requireDestination","name","requireDestination","type","checkbox",1,"tw-form-switch__input",3,"ngModel","ngModelChange","click"],[1,"tw-form-select"],["id","requireRequestsSigned",1,"tw-form-control",3,"ngModel","ngModelChange","change"],[3,"ngValue"],["id","requireSignedArtifactResolveRequests","name","requireSignedArtifactResolveRequests","type","checkbox",1,"tw-form-switch__input",3,"ngModel","ngModelChange","click"],["right",""],["type","button",1,"tw-btn-success",3,"click"],[3,"certificates","deleteCertDisabled","delete"],["id","certUploadTest"],["certUpload",""]],template:function(t,i){if(1&t){const p=e.EpF();e.TgZ(0,"app-form-row",0)(1,"app-form-toggle",1)(2,"input",2),e.NdJ("ngModelChange",function(K){return i.serviceProvider.requireSamlMessageDestination=K})("click",function(){return i.updateCache()}),e.qZA()()(),e.TgZ(3,"app-form-row",0)(4,"div",3)(5,"select",4),e.NdJ("ngModelChange",function(K){return i.serviceProvider.requireAuthenticationRequestsSigned=K})("change",function(){return i.updateCache()}),e.TgZ(6,"option",5),e._uU(7,"Default/Global"),e.qZA(),e.TgZ(8,"option",5),e._uU(9,"True"),e.qZA(),e.TgZ(10,"option",5),e._uU(11,"False"),e.qZA()()()(),e.TgZ(12,"app-form-row",0)(13,"app-form-toggle",1)(14,"input",6),e.NdJ("ngModelChange",function(K){return i.serviceProvider.requireSignedArtifactResolveRequests=K})("click",function(){return i.updateCache()}),e.qZA()()(),e.TgZ(15,"app-action-bar"),e.ynx(16,7),e.TgZ(17,"button",8),e.NdJ("click",function(){e.CHM(p);const K=e.MAs(22);return e.KtG(K.open())}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(20,"app-saml-cert-list",9),e.NdJ("delete",function(K){return i.removeCert(K)}),e.qZA(),e._UZ(21,"app-cert-uploader",10,11)}2&t&&(e.Q6J("id","requireDestination")("label","Clients.Saml.RequireRequestDestination")("help","Clients.Saml.RequireRequestDestinationHelp"),e.xp6(1),e.Q6J("id","requireDestination"),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.requireSamlMessageDestination),e.xp6(1),e.Q6J("id","requireRequestsSigned")("label","Clients.Saml.RequireRequestsSigned")("help","Clients.Saml.RequireRequestsSignedHelp"),e.xp6(2),e.Q6J("ngModel",i.serviceProvider.requireAuthenticationRequestsSigned),e.xp6(1),e.Q6J("ngValue",null),e.xp6(2),e.Q6J("ngValue",!0),e.xp6(2),e.Q6J("ngValue",!1),e.xp6(2),e.Q6J("id","requireSignedArtifactResolveRequests")("label","Clients.Saml.RequireSignedArtifactResolveRequests")("help","Clients.Saml.RequireSignedArtifactResolveRequestsHelp"),e.xp6(1),e.Q6J("id","requireSignedArtifactResolveRequests"),e.xp6(1),e.Q6J("ngModel",i.serviceProvider.requireSignedArtifactResolveRequests),e.xp6(4),e.hij(" ",e.lcZ(19,20,"Clients.Saml.AddCert")," "),e.xp6(2),e.Q6J("certificates",i.signingCertificates)("deleteCertDisabled",!1))},dependencies:[h.YN,h.Kr,h.Wl,h.EJ,h.JJ,h.On,kt.K,Dn.L,ds.O,Pc.z,$_,Ut.X$],encapsulation:2}),r})(),kb=(()=>{class r{constructor(t,i){this.cache=t,this.saml11="urn:oasis:names:tc:SAML:1.0:assertion",this.saml20="urn:oasis:names:tc:SAML:2.0:assertion",this.sha256Digest=["SHA256","http://www.w3.org/2001/04/xmlenc#sha256"],this.sha384Digest=["SHA384","http://www.w3.org/2001/04/xmldsig-more#sha384"],this.sha512Digest=["SHA512","http://www.w3.org/2001/04/xmlenc#sha512"],this.rsaSha256Signature=["RSA-SHA256","http://www.w3.org/2001/04/xmldsig-more#rsa-sha256"],this.rsaSha384Signature=["RSA-SHA384","http://www.w3.org/2001/04/xmldsig-more#rsa-sha384"],this.rsaSha512Signature=["RSA-SHA512","http://www.w3.org/2001/04/xmldsig-more#rsa-sha512"],this.defaultDiscriminator="",this.tokenType="",this.signatureAlg="",this.digestAlg="",this.samlNameIdFormat=""}ngOnInit(){this.cache.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.relyingParty=t,this.tokenType=this.useValueOrDefault(t.tokenType),this.signatureAlg=this.useValueOrDefault(t.signatureAlgorithm),this.digestAlg=this.useValueOrDefault(t.digestAlgorithm),this.samlNameIdFormat=t.samlNameIdentifierFormat})}replaceDefault(t){return t===this.defaultDiscriminator?null:t}useValueOrDefault(t){return null!==t?t:this.defaultDiscriminator}updateRelyingPartyCache(){const t=this.relyingParty;t.tokenType=this.replaceDefault(this.tokenType),t.signatureAlgorithm=this.replaceDefault(this.signatureAlg),t.digestAlgorithm=this.replaceDefault(this.digestAlg),t.samlNameIdentifierFormat=this.samlNameIdFormat,this.cache.componentDirtyValidMap.set("RelyingPartyGeneral",{isValid:!0}),this.cache.unsavedCache.next(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Ra.N),e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-relyingparty-general"]],decls:33,vars:27,consts:[[3,"id","label"],[1,"tw-form-select"],["id","partyTokenType",1,"tw-form-control",3,"ngModel","ngModelChange","change"],["value",""],[3,"value"],["id","partySignatureAlgorithm",1,"tw-form-control",3,"ngModel","ngModelChange","change"],["id","partyDigestAlgorithm",1,"tw-form-control",3,"ngModel","ngModelChange","change"],[3,"id","label","isLast"],["id","partyNameFormat","type","text",1,"tw-form-control",3,"ngModel","ngModelChange","change"]],template:function(t,i){1&t&&(e.TgZ(0,"app-form-row",0)(1,"div",1)(2,"select",2),e.NdJ("ngModelChange",function(C){return i.tokenType=C})("change",function(){return i.updateRelyingPartyCache()}),e.TgZ(3,"option",3),e._uU(4,"default"),e.qZA(),e.TgZ(5,"option",4),e._uU(6,"SAML 1.1"),e.qZA(),e.TgZ(7,"option",4),e._uU(8,"SAML 2.0"),e.qZA()()()(),e.TgZ(9,"app-form-row",0)(10,"div",1)(11,"select",5),e.NdJ("ngModelChange",function(C){return i.signatureAlg=C})("change",function(){return i.updateRelyingPartyCache()}),e.TgZ(12,"option",3),e._uU(13,"default"),e.qZA(),e.TgZ(14,"option",4),e._uU(15),e.qZA(),e.TgZ(16,"option",4),e._uU(17),e.qZA(),e.TgZ(18,"option",4),e._uU(19),e.qZA()()()(),e.TgZ(20,"app-form-row",0)(21,"div",1)(22,"select",6),e.NdJ("ngModelChange",function(C){return i.digestAlg=C})("change",function(){return i.updateRelyingPartyCache()}),e.TgZ(23,"option",3),e._uU(24,"default"),e.qZA(),e.TgZ(25,"option",4),e._uU(26),e.qZA(),e.TgZ(27,"option",4),e._uU(28),e.qZA(),e.TgZ(29,"option",4),e._uU(30),e.qZA()()()(),e.TgZ(31,"app-form-row",7)(32,"input",8),e.NdJ("ngModelChange",function(C){return i.samlNameIdFormat=C})("change",function(){return i.updateRelyingPartyCache()}),e.qZA()()),2&t&&(e.Q6J("id","partyTokenType")("label","Clients.RelyingParty.TokenType"),e.xp6(2),e.Q6J("ngModel",i.tokenType),e.xp6(3),e.s9C("value",i.saml11),e.xp6(2),e.s9C("value",i.saml20),e.xp6(2),e.Q6J("id","partySignatureAlgorithm")("label","Clients.RelyingParty.SignatureAlgorithm"),e.xp6(2),e.Q6J("ngModel",i.signatureAlg),e.xp6(3),e.s9C("value",i.rsaSha256Signature[1]),e.xp6(1),e.Oqu(i.rsaSha256Signature[0]),e.xp6(1),e.s9C("value",i.rsaSha384Signature[1]),e.xp6(1),e.Oqu(i.rsaSha384Signature[0]),e.xp6(1),e.s9C("value",i.rsaSha512Signature[1]),e.xp6(1),e.Oqu(i.rsaSha512Signature[0]),e.xp6(1),e.Q6J("id","partyDigestAlgorithm")("label","Clients.RelyingParty.DigestAlgorithm"),e.xp6(2),e.Q6J("ngModel",i.digestAlg),e.xp6(3),e.s9C("value",i.sha256Digest[1]),e.xp6(1),e.Oqu(i.sha256Digest[0]),e.xp6(1),e.s9C("value",i.sha384Digest[1]),e.xp6(1),e.Oqu(i.sha384Digest[0]),e.xp6(1),e.s9C("value",i.sha512Digest[1]),e.xp6(1),e.Oqu(i.sha512Digest[0]),e.xp6(1),e.Q6J("id","partyNameFormat")("label","Clients.RelyingParty.SAMLNameIdFormat")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.samlNameIdFormat))},dependencies:[h.YN,h.Kr,h.Fj,h.EJ,h.JJ,h.On,Dn.L],encapsulation:2}),r})(),z_=(()=>{class r{constructor(t,i,p){this.fb=t,this.clientViewService=i,this.clientCachingService=p}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.requireConsent=this.client.requireConsent,this.createForm()}),this.consentLifetimeButtons=[{duration:1,unit:Xr.f.Week},{duration:1,unit:Xr.f.Month},{duration:1,unit:Xr.f.Year},{duration:null,unit:Xr.f.Unlimited}]}ngAfterViewInit(){this.consentFormSubscription=this.consentForm.valueChanges.subscribe(t=>{this.requireConsent=t.requireConsent;const i=this.consentForm.get("allowRememberConsent");this.clientCachingService.componentDirtyValidMap.set("ClientAdvancedConsentComponent",{isValid:this.consentForm.valid}),this.requireConsent&&i.disabled?(this.consentForm.get("allowRememberConsent").enable(),this.consentForm.get("consentLifetime").enable()):!this.requireConsent&&!i.disabled&&(this.consentForm.get("allowRememberConsent").disable(),this.consentForm.get("consentLifetime").disable());const p=JSON.parse(JSON.stringify(this.client));p.logoUri=this.consentForm.controls.logoUri.value,p.clientUri=this.consentForm.controls.clientUri.value,p.requireConsent=this.consentForm.controls.requireConsent.value,p.allowRememberConsent=this.consentForm.controls.allowRememberConsent.value,p.consentLifetime=this.consentForm.controls.consentLifetime.value,this.clientCachingService.unsavedCache.next(p)})}ngOnDestroy(){this.consentFormSubscription.unsubscribe(),this.subscription.unsubscribe()}createForm(){this.consentForm=this.fb.group({logoUri:[this.client.logoUri],clientUri:[this.client.clientUri],requireConsent:[this.client.requireConsent],allowRememberConsent:[{value:this.client.allowRememberConsent,disabled:!this.requireConsent}],consentLifetime:[{value:this.client.consentLifetime,disabled:!this.requireConsent},h.kI.min(0)]}),this.consentForm.markAsPristine(),this.consentForm.get("requireConsent").valueChanges.subscribe(t=>{const i=this.consentForm.get("consentLifetime");t?i.enable():i.disable()})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(Do.a),e.Y36(Vs.Z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-consent"]],decls:13,vars:21,consts:[["id","clientConsent",3,"formGroup"],[3,"id","label","help"],["id","Domain","type","text","name","Domain","formControlName","clientUri",1,"tw-form-control"],["type","text","name","LogoUrl","id","LogoUrl","formControlName","logoUri",1,"tw-form-control"],[3,"id"],["id","requireConsent","type","checkbox","name","requireConsent","formControlName","requireConsent",1,"tw-form-switch__input"],["id","allowRememberConsent","type","checkbox","name","allowRememberConsent","formControlName","allowRememberConsent",1,"tw-form-switch__input"],[3,"id","label","help","isLast"],["id","consentLifetime","formControlName","consentLifetime",3,"buttons","allowUnlimited"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1),e._UZ(2,"input",2),e.qZA(),e.TgZ(3,"app-form-row",1),e._UZ(4,"input",3),e.qZA(),e.TgZ(5,"app-form-row",1)(6,"app-form-toggle",4),e._UZ(7,"input",5),e.qZA()(),e.TgZ(8,"app-form-row",1)(9,"app-form-toggle",4),e._UZ(10,"input",6),e.qZA()(),e.TgZ(11,"app-form-row",7),e._UZ(12,"app-lifetime-picker",8),e.qZA()()),2&t&&(e.Q6J("formGroup",i.consentForm),e.xp6(1),e.Q6J("id","Domain")("label","Common.DisplayURL")("help","Clients.DisplayURLHelp"),e.xp6(2),e.Q6J("id","LogoUrl")("label","Common.LogoURL")("help","Clients.LogoURLHelp"),e.xp6(2),e.Q6J("id","requireConsent")("label","Clients.RequireConsent.Title")("help","Clients.RequireConsent.Help"),e.xp6(1),e.Q6J("id","requireConsent"),e.xp6(2),e.Q6J("id","allowRememberConsent")("label","Clients.AllowRememberConsent.Title")("help","Clients.AllowRememberConsent.Help"),e.xp6(1),e.Q6J("id","allowRememberConsent"),e.xp6(2),e.Q6J("id","consentLifetime")("label","Clients.Tokens.ConsentLifetime")("help","Clients.Tokens.LifetimeInSeconds")("isLast",!0),e.xp6(1),e.Q6J("buttons",i.consentLifetimeButtons)("allowUnlimited",!0))},dependencies:[h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.sg,h.u,Cc.U,Dn.L,ds.O],encapsulation:2}),r})();var Dd=m(3435);const Y_=["Picker"];function Rb(r,l){1&r&&(e.TgZ(0,"div",3),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Clients.ScopePickerSharedScopeWarning"),"\n"))}let Rh=(()=>{class r{constructor(t,i,p,C,K){this.clientCachingService=t,this.identityResourceService=i,this.protectedResourceService=p,this.activatedRoute=C,this.configService=K,this.availableResources=[],this.assignedResources=[],this.toSendResources=[]}ngOnInit(){this.configService.getConfig().pipe((0,tr.P)()).subscribe(t=>{this.sharedScopesEnabled=t.featureFlagOptions.enableSharedScopes}),this.resourceType=this.activatedRoute.snapshot.data.resourceType,this.manageResourcesStreams(),this.clientCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t))}),this.resourceType===Dd.P.Identity&&this.identityResourceService.getIdentityResources().subscribe(t=>{this.sortResources(t)}),this.resourceType===Dd.P.Protected&&this.protectedResourceService.getProtectedResources().subscribe(t=>{const i=[];t.slice().forEach(C=>{C.scopes.forEach(K=>{const Ce=i.findIndex(Ue=>Ue.name==K.name);-1!=Ce?(i[Ce].shared=!0,this.anySharedScopesInCollection=!0):i.push(K)})}),this.sortResources(i)})}manageResourcesStreams(){this.picker.assignedStream.subscribe(t=>{this.toSendResources=this.assignedResources.concat(t),this.assignClientScopes(t),this.assignedResources=this.toSendResources,this.availableResources=(0,ot.mn)(this.availableResources.slice(),t),this.picker.availableCount=0}),this.picker.unAssignedStream.subscribe(t=>{this.toSendResources=(0,ot.mn)(this.assignedResources,t),this.unAssignClientScopes(t),this.assignedResources=this.toSendResources.slice(),this.availableResources=this.availableResources.concat(t),this.picker.assignedCount=0})}sortResources(t){const i=[];this.client.allowedScopes.forEach(p=>{const C=t.findIndex(K=>K.name===p);C>=0&&(i.push(t[C]),t.splice(C,1))}),this.assignedResources=i,this.availableResources=t,this.toSendResources=i.slice()}assignClientScopes(t){const i=t.map(p=>p.name);this.client.allowedScopes=this.client.allowedScopes.concat(i),this.cacheClient(this.client)}unAssignClientScopes(t){t.forEach(i=>{const p=this.client.allowedScopes.indexOf(i.name);-1!==p&&this.client.allowedScopes.splice(p,1)}),this.cacheClient(this.client)}cacheClient(t){this.clientCachingService.componentDirtyValidMap.set("ClientResourcesComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Vs.Z),e.Y36(Ma.Q),e.Y36(Zo.m),e.Y36(yn.gz),e.Y36(Yr.E))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-manage-resources"]],viewQuery:function(t,i){if(1&t&&e.Gf(Y_,7),2&t){let p;e.iGM(p=e.CRH())&&(i.picker=p.first)}},decls:3,vars:5,consts:[[3,"availableInput","assignedInput","availableSearch","assignedSearch"],["Picker",""],["id","sharedScopeInformation","class","tw-alert-warning tw-mt-3","role","alert",4,"ngIf"],["id","sharedScopeInformation","role","alert",1,"tw-alert-warning","tw-mt-3"]],template:function(t,i){1&t&&(e._UZ(0,"app-common-picker",0,1),e.YNc(2,Rb,3,3,"div",2)),2&t&&(e.Q6J("availableInput",i.availableResources)("assignedInput",i.assignedResources)("availableSearch",!0)("assignedSearch",!1),e.xp6(2),e.Q6J("ngIf",i.anySharedScopesInCollection))},dependencies:[z.O5,Bo,Ut.X$],encapsulation:2}),r})();const Pb=["addButton"];let Ph=(()=>{class r{constructor(t,i,p,C,K){this.clientCachingService=t,this.translate=i,this.toastr=p,this.modalService=C,this.dataTableService=K,this._restrictions=[],this.addValue="",this.editValue="",this.addModalActions=[Vt.n.Save],this.addModalId="addProviderId",this.editModalActions=[Vt.n.Save],this.editModalId="editProviderId",this.dataTableActions=[ao.Xz.Delete,ao.Xz.Select]}set restrictions(t){this._restrictions=t||[]}get restrictions(){return this._restrictions}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.localLogin=t.enableLocalLogin,this.restrictions=t.identityProviderRestrictions.slice().sort()}),this.subscription.add(this.dataTableService.deleteRowEvent.subscribe(t=>{this.deleteRestrictions(t)}))}ngOnDestroy(){this.subscription.unsubscribe()}openAddModal(){this.modalService.showById(this.addModalId,this.addButtonRef)}cancelAdd(){this.addValue="",this.modalService.hideById(this.addModalId)}openEditModal(t){this.editValue=t.data,this.editIndex=this.restrictions.indexOf(t.data),this.modalService.showById(this.editModalId,t.element)}closeAndResetEditModal(){this.editValue="",this.editIndex=null,this.modalService.hideById(this.editModalId)}enableLocalLogin(){this.localLogin=!this.localLogin,this.submit()}deleteRestrictions(t){this.restrictions.splice(t,1),this.submit()}editRestriction(){this.restrictions[this.editIndex]=this.editValue,this.closeAndResetEditModal(),this.submit()}addRestriction(){const t=this.addValue.trim();this.restrictions.includes(t)?this.toastr.warning(this.translate.instant("Client.DuplicateProvider"),this.translate.instant("Notifications.Warning")):(this.restrictions.push(t),this.submit(),this.addValue="")}submit(){const t=JSON.parse(JSON.stringify(this.client));t.enableLocalLogin=this.localLogin,t.identityProviderRestrictions=this.restrictions,this.clientCachingService.componentDirtyValidMap.set("ClientRestrictionsComponent",{isValid:!0}),this.clientCachingService.unsavedCache.next(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Vs.Z),e.Y36(Ut.sK),e.Y36(si._W),e.Y36(sr.Z),e.Y36(xl.n))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-identity-providers"]],viewQuery:function(t,i){if(1&t&&e.Gf(Pb,5),2&t){let p;e.iGM(p=e.CRH())&&(i.addButtonRef=p.first)}},decls:19,vars:29,consts:[["id","editClientRestrictions"],[3,"id","label","help"],[3,"id"],["id","EnableLocalLogin","name","EnableLocalLogin","type","checkbox",1,"tw-form-switch__input",3,"checked","change"],["right",""],[1,"tw-btn-success",3,"id","click"],["addButton",""],[3,"title","modalId","actions","addDisabled","onCancel","onSave"],[3,"label","id","isLast"],["id","addValue","type","text","maxlength","200",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"],["id","restrictionsTable",3,"rows","norowslabel","actions","onSelect","onDelete"],[3,"prop","title"],["id","editValue","type","text",1,"tw-form-control","tw-max-w-full",3,"ngModel","ngModelChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form")(2,"app-form-row",1)(3,"app-form-toggle",2)(4,"input",3),e.NdJ("change",function(){return i.enableLocalLogin()}),e.qZA()()()(),e.TgZ(5,"app-action-bar"),e.ynx(6,4),e.TgZ(7,"button",5,6),e.NdJ("click",function(){return i.openAddModal()}),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.BQk(),e.qZA(),e.TgZ(11,"app-custom-modal",7),e.NdJ("onCancel",function(){return i.cancelAdd()})("onSave",function(){return i.addRestriction()}),e.TgZ(12,"app-form-row",8)(13,"input",9),e.NdJ("ngModelChange",function(C){return i.addValue=C}),e.qZA()()(),e.TgZ(14,"app-data-table",10),e.NdJ("onSelect",function(C){return i.openEditModal(C)})("onDelete",function(C){return i.deleteRestrictions(C)}),e._UZ(15,"app-data-table-column",11),e.qZA(),e.TgZ(16,"app-custom-modal",7),e.NdJ("onCancel",function(){return i.closeAndResetEditModal()})("onSave",function(){return i.editRestriction()}),e.TgZ(17,"app-form-row",8)(18,"input",12),e.NdJ("ngModelChange",function(C){return i.editValue=C}),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("id","EnableLocalLogin")("label","Clients.EnableLocalLogin")("help","Clients.EnableLocalLoginHelp"),e.xp6(1),e.Q6J("id","EnableLocalLogin"),e.xp6(1),e.Q6J("checked",i.localLogin),e.xp6(3),e.Q6J("id","addProvider"),e.xp6(2),e.hij(" ",e.lcZ(10,27,"Clients.IdentityProviders.AddProvider")," "),e.xp6(2),e.Q6J("title","Clients.IdentityProviders.AddProvider")("modalId",i.addModalId)("actions",i.addModalActions)("addDisabled",""==i.addValue),e.xp6(1),e.Q6J("label","Clients.ProviderName")("id","addValue")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.addValue),e.xp6(1),e.Q6J("rows",i.restrictions)("norowslabel","Clients.NoRestrictions")("actions",i.dataTableActions),e.xp6(1),e.Q6J("title","Clients.ProviderName"),e.xp6(1),e.Q6J("title","Clients.IdentityProviders.EditProvider")("modalId",i.editModalId)("actions",i.editModalActions)("addDisabled",""==i.editValue),e.xp6(1),e.Q6J("label","Clients.ProviderName")("id","editValue")("isLast",!0),e.xp6(1),e.Q6J("ngModel",i.editValue))},dependencies:[h._Y,h.Fj,h.JJ,h.JL,h.nD,h.On,h.F,kt.K,ao.Qj,Kl.E,Dn.L,ds.O,ms.R,Ut.X$],encapsulation:2}),r})();var Lb=m(6519),Lh=m(6193);let X_=(()=>{class r{constructor(t,i,p){this.fb=t,this.clientCachingService=i,this.clientViewService=p,this.tokenUsage=Lb.y}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.allowOfflineAccess=this.client.allowOfflineAccess,this.refreshExpiryType=this.client.refreshTokenExpiration,void 0===this.refreshTokensForm&&this.createForm()}),this.setButtonModels()}ngOnDestroy(){this.subscription.unsubscribe()}setTokenTime(t,i){this.refreshTokensForm.controls[i].setValue(60*t),this.refreshTokensForm.markAsTouched(),this.refreshTokensForm.markAsDirty()}createForm(){this.refreshTokensForm=this.fb.group({allowOfflineAccess:[this.client.allowOfflineAccess],updateAccessTokenClaimsOnRefresh:[this.client.updateAccessTokenClaimsOnRefresh],refreshTokenExpiration:[this.client.refreshTokenExpiration],absoluteRefreshTokenLifetime:[this.client.absoluteRefreshTokenLifetime,h.kI.min(0)],slidingRefreshTokenLifetime:[this.client.slidingRefreshTokenLifetime,h.kI.min(0)],refreshTokenUsage:[this.client.refreshTokenUsage]}),this.checkAllowOfflineAccess(),this.refreshTokensForm.markAsPristine()}ngAfterViewInit(){this.subscribeToFormChanges()}subscribeToFormChanges(){this.refreshTokensForm.valueChanges.subscribe(t=>{this.allowOfflineAccess!==t.allowOfflineAccess&&(this.allowOfflineAccess=t.allowOfflineAccess,this.checkAllowOfflineAccess()),this.refreshExpiryType!==t.refreshTokenExpiration&&(this.refreshExpiryType=t.refreshTokenExpiration,this.checkRefreshTokenExpiration());const i=JSON.parse(JSON.stringify(this.client));i.allowOfflineAccess=this.refreshTokensForm.controls.allowOfflineAccess.value,i.updateAccessTokenClaimsOnRefresh=this.refreshTokensForm.controls.updateAccessTokenClaimsOnRefresh.value,i.refreshTokenExpiration=this.refreshTokensForm.controls.refreshTokenExpiration.value,i.absoluteRefreshTokenLifetime=this.refreshTokensForm.controls.absoluteRefreshTokenLifetime.value,i.slidingRefreshTokenLifetime=this.refreshTokensForm.controls.slidingRefreshTokenLifetime.value,i.refreshTokenUsage=this.refreshTokensForm.controls.refreshTokenUsage.value,this.clientCachingService.componentDirtyValidMap.set("ClientRefreshTokensComponent",{isValid:this.refreshTokensForm.valid}),this.clientCachingService.unsavedCache.next(i)})}checkAllowOfflineAccess(){this.allowOfflineAccess?(this.refreshTokensForm.enable(),this.checkRefreshTokenExpiration()):(this.refreshTokensForm.disable(),this.refreshTokensForm.get("allowOfflineAccess").enable())}checkRefreshTokenExpiration(){if(!1===this.allowOfflineAccess)return;const t=this.refreshTokensForm.get("absoluteRefreshTokenLifetime"),i=this.refreshTokensForm.get("slidingRefreshTokenLifetime");this.refreshExpiryType===Lh.N.Absolute?(t.enable(),i.disable()):this.refreshExpiryType===Lh.N.Sliding&&(t.disable(),i.enable())}setButtonModels(){this.absoluteRefreshTokenLifetimeButtons=[{duration:1,unit:Xr.f.Day},{duration:15,unit:Xr.f.Days},{duration:30,unit:Xr.f.Days}],this.slidingRefreshTokenLifetimeButtons=[{duration:15,unit:Xr.f.Minutes},{duration:30,unit:Xr.f.Minutes},{duration:1,unit:Xr.f.Hour},{duration:5,unit:Xr.f.Hours}]}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(Vs.Z),e.Y36(Do.a))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-refresh-tokens"]],decls:41,vars:43,consts:[["id","editClientTokens",3,"formGroup"],[3,"id","label","help"],[3,"id"],["id","allowOfflineAccess","type","checkbox","formControlName","allowOfflineAccess",1,"tw-form-switch__input"],["id","updateAccessTokenClaimsOnRefresh","type","checkbox","formControlName","updateAccessTokenClaimsOnRefresh",1,"tw-form-switch__input"],[3,"label"],["role","group",1,"tw-form-checks"],[1,"tw-form-checks__item"],["for","refreshTokenExpirationAbsolute",1,"tw-form-checks__label"],["id","refreshTokenExpirationAbsolute","type","radio","name","refreshTokenExpiration","formControlName","refreshTokenExpiration",1,"tw-form-checks__input",3,"value"],["for","refreshTokenExpirationSliding",1,"tw-form-checks__label"],["id","refreshTokenExpirationSliding","type","radio","name","refreshTokenExpiration","formControlName","refreshTokenExpiration",1,"tw-form-checks__input",3,"value"],["id","absoluteRefreshTokenLifetime","formControlName","absoluteRefreshTokenLifetime",3,"buttons"],["id","slidingRefreshTokenLifetime","formControlName","slidingRefreshTokenLifetime",3,"buttons"],[3,"label","help","isLast"],["for","refreshTokenUsageOneTime",1,"tw-form-checks__label"],["id","refreshTokenUsageOneTime","type","radio","name","refreshTokenUsage","formControlName","refreshTokenUsage",1,"tw-form-checks__input",3,"value"],["for","refreshTokenUsageReuse",1,"tw-form-checks__label"],["id","refreshTokenUsageReuse","type","radio","name","refreshTokenUsage","formControlName","refreshTokenUsage",1,"tw-form-checks__input",3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1)(2,"app-form-toggle",2),e._UZ(3,"input",3),e.qZA()(),e.TgZ(4,"app-form-row",1)(5,"app-form-toggle",2),e._UZ(6,"input",4),e.qZA()(),e.TgZ(7,"app-form-row",5)(8,"ul",6),e.ALo(9,"translate"),e.TgZ(10,"li",7)(11,"label",8),e._UZ(12,"input",9),e.TgZ(13,"span"),e._uU(14),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"li",7)(17,"label",10),e._UZ(18,"input",11),e.TgZ(19,"span"),e._uU(20),e.ALo(21,"translate"),e.qZA()()()()(),e.TgZ(22,"app-form-row",1),e._UZ(23,"app-lifetime-picker",12),e.qZA(),e.TgZ(24,"app-form-row",1),e._UZ(25,"app-lifetime-picker",13),e.qZA(),e.TgZ(26,"app-form-row",14)(27,"ul",6),e.ALo(28,"translate"),e.TgZ(29,"li",7)(30,"label",15),e._UZ(31,"input",16),e.TgZ(32,"span"),e._uU(33),e.ALo(34,"translate"),e.qZA()()(),e.TgZ(35,"li",7)(36,"label",17),e._UZ(37,"input",18),e.TgZ(38,"span"),e._uU(39),e.ALo(40,"translate"),e.qZA()()()()()()),2&t&&(e.Q6J("formGroup",i.refreshTokensForm),e.xp6(1),e.Q6J("id","allowOfflineAccess")("label","Clients.Tokens.AllowOfflineAccess")("help","Clients.Tokens.AllowOfflineAccessHelp"),e.xp6(1),e.Q6J("id","allowOfflineAccess"),e.xp6(2),e.Q6J("id","updateAccessTokenClaimsOnRefresh")("label","Clients.Tokens.UpdateAccessTokens")("help","Clients.Tokens.UpdateAccessTokensSummary"),e.xp6(1),e.Q6J("id","updateAccessTokenClaimsOnRefresh"),e.xp6(2),e.Q6J("label","Clients.Tokens.Expiration"),e.xp6(1),e.uIk("aria-label",e.lcZ(9,31,"Clients.Tokens.Expiration")),e.xp6(4),e.Q6J("value","Absolute"),e.xp6(2),e.Oqu(e.lcZ(15,33,"Clients.Tokens.Absolute")),e.xp6(4),e.Q6J("value","Sliding"),e.xp6(2),e.Oqu(e.lcZ(21,35,"Clients.Tokens.Sliding")),e.xp6(2),e.Q6J("id","absoluteRefreshTokenLifetime")("label","Clients.Tokens.RefreshTokenLifetime")("help","Clients.Tokens.LifetimeInSeconds"),e.xp6(1),e.Q6J("buttons",i.absoluteRefreshTokenLifetimeButtons),e.xp6(1),e.Q6J("id","slidingRefreshTokenLifetime")("label","Clients.Tokens.SlidingRefreshTokenLifetime")("help","Clients.Tokens.LifetimeInSeconds"),e.xp6(1),e.Q6J("buttons",i.slidingRefreshTokenLifetimeButtons),e.xp6(1),e.Q6J("label","Clients.Tokens.Refresh")("help","Clients.Tokens.RefreshHelp")("isLast",!0),e.xp6(1),e.uIk("aria-label",e.lcZ(28,37,"Clients.Tokens.Refresh")),e.xp6(4),e.Q6J("value",i.tokenUsage.OneTimeOnly),e.xp6(2),e.Oqu(e.lcZ(34,39,"Clients.Tokens.OneTime")),e.xp6(4),e.Q6J("value",i.tokenUsage.ReUse),e.xp6(2),e.Oqu(e.lcZ(40,41,"Clients.Tokens.ReUse")))},dependencies:[h._Y,h.Fj,h.Wl,h._,h.JJ,h.JL,h.sg,h.u,Cc.U,Dn.L,ds.O,Ut.X$],encapsulation:2}),r})();function Ub(r,l){if(1&r&&(e.TgZ(0,"app-form-row",3),e._UZ(1,"input",7),e.qZA()),2&r){const t=e.oxw();e.Q6J("id","backChannelLogoutUri")("label","Clients.Tokens.BackChannelLogoutUri")("help","Clients.Tokens.BackChannelLogoutUriHelp")("isLast",!t.clientViewService.ssoTab.backChannelLogoutSessionRequired)}}function Bb(r,l){1&r&&(e.TgZ(0,"app-form-row",3)(1,"app-form-toggle",4),e._UZ(2,"input",8),e.qZA()()),2&r&&(e.Q6J("id","backChannelLogoutSessionRequired")("label","Clients.Tokens.BackChannelLogoutSessionRequired")("help","Clients.Tokens.BackChannelLogoutSessionRequiredHelp")("isLast",!0),e.xp6(1),e.Q6J("id","backChannelLogoutSessionRequired"))}let Fb=(()=>{class r{constructor(t,i,p){this.fb=t,this.clientViewService=i,this.clientCachingService=p}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.createForm()})}createForm(){this.singleSignOutForm=this.fb.group({frontChannelLogoutUri:[this.client.frontChannelLogoutUri],frontChannelLogoutSessionRequired:[this.client.frontChannelLogoutSessionRequired],backChannelLogoutUri:[this.client.backChannelLogoutUri],backChannelLogoutSessionRequired:[this.client.backChannelLogoutSessionRequired]}),this.singleSignOutForm.markAsPristine()}ngAfterViewInit(){this.singleSignOutFormSubscription=this.singleSignOutForm.valueChanges.subscribe(t=>{const i=JSON.parse(JSON.stringify(this.client));i.frontChannelLogoutUri=this.singleSignOutForm.controls.frontChannelLogoutUri.value,i.frontChannelLogoutSessionRequired=this.singleSignOutForm.controls.frontChannelLogoutSessionRequired.value,i.backChannelLogoutUri=this.singleSignOutForm.controls.backChannelLogoutUri.value,i.backChannelLogoutSessionRequired=this.singleSignOutForm.controls.backChannelLogoutSessionRequired.value,this.clientCachingService.componentDirtyValidMap.set("ClientSSOComponent",{isValid:this.singleSignOutForm.valid}),this.clientCachingService.unsavedCache.next(i)})}ngOnDestroy(){this.singleSignOutFormSubscription.unsubscribe(),this.subscription.unsubscribe()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(Do.a),e.Y36(Vs.Z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-single-sign-out"]],decls:8,vars:11,consts:[[3,"formGroup"],[3,"id","label","help"],["id","FrontChannelLogoutUri","type","text","formControlName","frontChannelLogoutUri",1,"tw-form-control"],[3,"id","label","help","isLast"],[3,"id"],["id","FrontChannelLogoutSessionRequired","type","checkbox","formControlName","frontChannelLogoutSessionRequired",1,"tw-form-switch__input"],[3,"id","label","help","isLast",4,"ngIf"],["id","backChannelLogoutUri","type","text","formControlName","backChannelLogoutUri",1,"tw-form-control"],["id","backChannelLogoutSessionRequired","type","checkbox","formControlName","backChannelLogoutSessionRequired",1,"tw-form-switch__input"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1),e._UZ(2,"input",2),e.qZA(),e.TgZ(3,"app-form-row",3)(4,"app-form-toggle",4),e._UZ(5,"input",5),e.qZA()(),e.YNc(6,Ub,2,4,"app-form-row",6),e.YNc(7,Bb,3,5,"app-form-row",6),e.qZA()),2&t&&(e.Q6J("formGroup",i.singleSignOutForm),e.xp6(1),e.Q6J("id","FrontChannelLogoutUri")("label","Clients.Tokens.FrontChannelLogoutUri")("help","Clients.Tokens.FrontChannelLogoutUriHelp"),e.xp6(2),e.Q6J("id","FrontChannelLogoutSessionRequired")("label","Clients.Tokens.FrontChannelLogoutSessionRequired")("help","Clients.Tokens.FrontChannelLogoutSessionRequiredHelp")("isLast",!i.clientViewService.ssoTab.backChannelLogoutUri&&!i.clientViewService.ssoTab.backChannelLogoutSessionRequired),e.xp6(1),e.Q6J("id","FrontChannelLogoutSessionRequired"),e.xp6(2),e.Q6J("ngIf",i.clientViewService.ssoTab.backChannelLogoutUri),e.xp6(1),e.Q6J("ngIf",i.clientViewService.ssoTab.backChannelLogoutSessionRequired))},dependencies:[z.O5,h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.sg,h.u,Dn.L,ds.O],encapsulation:2}),r})(),Uh=(()=>{class r{constructor(t,i,p){this.fb=t,this.clientViewService=i,this.clientCachingService=p}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.createForm()}),this.setButtonModels()}createForm(){this.deviceFlowForm=this.fb.group({userCode:[this.client.userCodeType],deviceCodeLifetime:[this.client.deviceCodeLifetime,h.kI.min(0)]}),this.deviceFlowForm.markAsPristine()}setTokenTime(t,i){this.deviceFlowForm.controls[i].setValue(60*t),this.deviceFlowForm.markAsTouched(),this.deviceFlowForm.markAsDirty()}ngAfterViewInit(){this.deviceFlowFormSubscription=this.deviceFlowForm.valueChanges.subscribe(t=>{const i=JSON.parse(JSON.stringify(this.client));i.deviceCodeLifetime=this.deviceFlowForm.controls.deviceCodeLifetime.value,i.userCode=""===this.deviceFlowForm.controls.userCode.value?null:this.deviceFlowForm.controls.userCode.value,i.userCodeType=(0,ot.Ew)(this.deviceFlowForm.controls.userCode.value)?null:this.deviceFlowForm.controls.userCode.value,this.clientCachingService.componentDirtyValidMap.set("ClientDeviceFlowComponent",{isValid:this.deviceFlowForm.valid}),this.clientCachingService.unsavedCache.next(i)})}ngOnDestroy(){this.deviceFlowFormSubscription.unsubscribe(),this.subscription.unsubscribe()}setButtonModels(){this.deviceCodeLifetimeButtons=[{duration:5,unit:Xr.f.Minutes},{duration:10,unit:Xr.f.Minutes}]}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(Do.a),e.Y36(Vs.Z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-device-flow"]],decls:5,vars:9,consts:[[3,"formGroup"],[3,"id","label","help"],["id","deviceCodeLifetime","formControlName","deviceCodeLifetime",3,"buttons"],[3,"id","label","help","isLast"],["id","UserCode","type","text","formControlName","userCode",1,"tw-form-control"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1),e._UZ(2,"app-lifetime-picker",2),e.qZA(),e.TgZ(3,"app-form-row",3),e._UZ(4,"input",4),e.qZA()()),2&t&&(e.Q6J("formGroup",i.deviceFlowForm),e.xp6(1),e.Q6J("id","deviceCodeLifetime")("label","Clients.Tokens.DeviceCodeLifetime")("help","Clients.Tokens.LifetimeInSeconds"),e.xp6(1),e.Q6J("buttons",i.deviceCodeLifetimeButtons),e.xp6(1),e.Q6J("id","UserCode")("label","Clients.Tokens.UserCode")("help","Clients.Tokens.UserCodeHelp")("isLast",!0))},dependencies:[h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Cc.U,Dn.L],encapsulation:2}),r})(),Zb=(()=>{class r{constructor(t,i,p){this.fb=t,this.clientViewService=i,this.clientCachingService=p}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.requirePkce=this.client.requirePkce,this.createForm()})}createForm(){this.pkceForm=this.fb.group({requirePkce:[this.client.requirePkce],allowPlainTextPkce:[{value:this.client.allowPlainTextPkce,disabled:!this.requirePkce}]}),this.pkceForm.markAsPristine()}ngAfterViewInit(){this.pkceFormSubscription=this.pkceForm.valueChanges.subscribe(t=>{this.requirePkce=t.requirePkce;const i=JSON.parse(JSON.stringify(this.client)),p=this.pkceForm.get("allowPlainTextPkce");this.requirePkce&&p.disabled?p.enable():!this.requirePkce&&!p.disabled&&p.disable(),i.requirePkce=this.pkceForm.controls.requirePkce.value,i.allowPlainTextPkce=this.pkceForm.controls.allowPlainTextPkce.value,this.clientCachingService.componentDirtyValidMap.set("ClientPKCEComponent",{isValid:this.pkceForm.valid}),this.clientCachingService.unsavedCache.next(i)})}ngOnDestroy(){this.pkceFormSubscription.unsubscribe(),this.subscription.unsubscribe()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(Do.a),e.Y36(Vs.Z))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-pkce"]],decls:7,vars:10,consts:[[3,"formGroup"],[3,"id","label","help"],[3,"id"],["id","requirePkce","type","checkbox","formControlName","requirePkce",1,"tw-form-switch__input"],[3,"id","label","help","isLast"],["id","allowPlainTextPkce","type","checkbox","formControlName","allowPlainTextPkce",1,"tw-form-switch__input"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1)(2,"app-form-toggle",2),e._UZ(3,"input",3),e.qZA()(),e.TgZ(4,"app-form-row",4)(5,"app-form-toggle",2),e._UZ(6,"input",5),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.pkceForm),e.xp6(1),e.Q6J("id","requirePkce")("label","Clients.Tokens.RequirePkce")("help","Clients.Tokens.RequirePkceHelp"),e.xp6(1),e.Q6J("id","requirePkce"),e.xp6(2),e.Q6J("id","allowPlainTextPkce")("label","Clients.Tokens.AllowPlainTextPkce")("help","Clients.Tokens.AllowPlainTextPkceHelp")("isLast",!0),e.xp6(1),e.Q6J("id","allowPlainTextPkce"))},dependencies:[h._Y,h.Wl,h.JJ,h.JL,h.sg,h.u,Dn.L,ds.O],encapsulation:2}),r})();function ev(r,l){if(1&r&&(e.TgZ(0,"app-form-row",4),e._UZ(1,"app-lifetime-picker",5),e.qZA()),2&r){const t=e.oxw();e.Q6J("id","userSSOLifetime")("label","Clients.Tokens.UserSSOLifetime")("help","Clients.Tokens.UserSSOLifetimeHelp"),e.xp6(1),e.Q6J("buttons",t.userSSOLifetimeButtons)}}let Vb=(()=>{class r{constructor(t,i,p){this.fb=t,this.clientCachingService=i,this.clientViewService=p}ngOnInit(){this.subscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),void 0===this.otherForm&&this.createForm()}),this.setButtonModels()}ngOnDestroy(){this.subscription.unsubscribe()}setTokenTime(t,i){this.otherForm.controls[i].setValue(60*t),this.otherForm.markAsTouched(),this.otherForm.markAsDirty()}createForm(){this.otherForm=this.fb.group({userSSOLifetime:[this.client.userSSOLifetime],pairWiseSubjectSalt:[this.client.pairWiseSubjectSalt]}),this.otherForm.markAsPristine()}ngAfterViewInit(){this.otherForm.valueChanges.subscribe(t=>{const i=JSON.parse(JSON.stringify(this.client));i.userSSOLifetime=this.otherForm.controls.userSSOLifetime.value,i.pairWiseSubjectSalt=this.otherForm.controls.pairWiseSubjectSalt.value,this.clientCachingService.componentDirtyValidMap.set("ClientOtherComponent",{isValid:this.otherForm.valid}),this.clientCachingService.unsavedCache.next(i)})}setButtonModels(){this.userSSOLifetimeButtons=[{duration:1,unit:Xr.f.Hour},{duration:12,unit:Xr.f.Hours},{duration:1,unit:Xr.f.Day}]}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(Vs.Z),e.Y36(Do.a))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-client-other"]],decls:4,vars:6,consts:[[3,"formGroup"],[3,"id","label","help",4,"ngIf"],[3,"id","label","help","isLast"],["id","PairWiseSubjectSalt","type","text","formControlName","pairWiseSubjectSalt",1,"tw-form-control"],[3,"id","label","help"],["id","userSSOLifetime","formControlName","userSSOLifetime",3,"buttons"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.YNc(1,ev,2,4,"app-form-row",1),e.TgZ(2,"app-form-row",2),e._UZ(3,"input",3),e.qZA()()),2&t&&(e.Q6J("formGroup",i.otherForm),e.xp6(1),e.Q6J("ngIf",i.clientViewService.other.userSSOLifetime),e.xp6(1),e.Q6J("id","PairWiseSubjectSalt")("label","Clients.Tokens.PairWiseSubjectSalt")("help","Clients.Tokens.PairWiseSubjectSaltHelp")("isLast",!0))},dependencies:[z.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Cc.U,Dn.L],encapsulation:2}),r})(),Hb=(()=>{class r{constructor(t,i,p,C){this.titleService=t,this.identityResourceService=i,this.toastr=p,this.translate=C,this.properties=[]}ngOnInit(){this.identityResourceSubscription=this.identityResourceService.getCachedIdentityResource().subscribe(t=>{this.identityResource=t,this.properties=this.identityResource.properties||[],this.titleService.setTitle(this.translate.instant("IdentityResources.Singular")+" "+this.identityResource.displayName+" "+this.translate.instant("Nav.Details")+` - ${He.de.SITE_TITLE}`)})}ngOnDestroy(){this.identityResourceSubscription?.unsubscribe()}onPropertiesChanged(t){this.properties=t;const i=Object.assign(this.identityResource,{properties:this.properties});this.identityResourceService.updateResource(i).pipe((0,Oe.q)(1)).subscribe(p=>{this.identityResource=i,this.identityResourceService.getCachedIdentityResource().next(i),this.toastr.success(this.translate.instant("IdentityResources.UpdatedResource"),this.translate.instant("Notifications.Success"))})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.Dx),e.Y36(Ma.Q),e.Y36(si._W),e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-identity-resource-properties"]],decls:1,vars:2,consts:[[3,"modalId","properties","propertiesChanged"]],template:function(t,i){1&t&&(e.TgZ(0,"app-properties-editor",0),e.NdJ("propertiesChanged",function(C){return i.onPropertiesChanged(C)}),e.qZA()),2&t&&e.Q6J("modalId",i.identityResource.id)("properties",i.properties)},dependencies:[Td.s],encapsulation:2}),r})(),Jb=(()=>{class r{constructor(t,i,p,C){this.titleService=t,this.protectedResourceService=i,this.toastr=p,this.translate=C,this.properties=[]}ngOnInit(){this.protectedResourceSubscription=this.protectedResourceService.getCachedProtectedResource().subscribe(t=>{this.protectedResource=t,this.properties=this.protectedResource.properties||[],this.titleService.setTitle(this.translate.instant("IdentityResources.Singular")+" "+this.protectedResource.displayName+" "+this.translate.instant("Nav.Details")+` - ${He.de.SITE_TITLE}`),this.modalId=this.protectedResource.id})}ngOnDestroy(){this.protectedResourceSubscription?.unsubscribe()}onPropertiesChanged(t){this.properties=t;const i=Object.assign(this.protectedResource,{properties:this.properties});this.protectedResourceService.updateResource(i).pipe((0,Oe.q)(1)).subscribe(p=>{this.protectedResource=i,this.protectedResourceService.getCachedProtectedResource().next(i),this.toastr.success(this.translate.instant("ProtectedResources.UpdatedResource"),this.translate.instant("Notifications.Success"))})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(n.Dx),e.Y36(Zo.m),e.Y36(si._W),e.Y36(Ut.sK))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-protected-resource-properties"]],decls:1,vars:2,consts:[[3,"modalId","properties","propertiesChanged"]],template:function(t,i){1&t&&(e.TgZ(0,"app-properties-editor",0),e.NdJ("propertiesChanged",function(C){return i.onPropertiesChanged(C)}),e.qZA()),2&t&&e.Q6J("modalId",i.modalId)("properties",i.properties)},dependencies:[Td.s],encapsulation:2}),r})();function qb(r,l){1&r&&(e.TgZ(0,"span",24),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Users.Filter.Blocked")," "))}function Qb(r,l){1&r&&(e.TgZ(0,"div",25)(1,"p"),e._uU(2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.AsE("",e.lcZ(3,2,"Users.Delete.DeletedUser")," ",e.lcZ(4,4,"Users.Delete.AuditingPurposes"),""))}const Wb=function(r,l){return{title:r,link:l}},jb=function(r){return[r]},Lc=function(){return["active"]};let tv=(()=>{class r{constructor(t,i,p){this.route=t,this.router=i,this.errorService=p}ngOnInit(){this.userDataSubscription=this.route.data.subscribe(t=>{this.user=t.user},t=>{this.errorService.handleError(t)})}mobRoute(t){this.router.navigate([t],{relativeTo:this.route})}ngOnDestroy(){this.userDataSubscription.unsubscribe()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.gz),e.Y36(yn.F0),e.Y36(Ee.T))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:62,vars:72,consts:[[3,"title","crumbs","hasTabs","isReadOnly"],["badge",""],["class","tw-pill-warning tw-mr-2",4,"ngIf"],["tabs",""],[1,"tw-p-4","md:tw-hidden"],["for","nav-sub-menu",1,"sr-only"],[1,"tw-form-select"],["id","nav-sub-menu",1,"tw-form-control",3,"change"],["value","details"],["value","roles"],["value","additionaldetails"],["value","applications"],["value","userlogins"],["value","useraudits"],["role","tablist",1,"tabs","tw-hidden","md:tw-flex"],[1,"tabs__item"],["type","button","routerLink","details","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","roles","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","additionaldetails","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","applications","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","userlogins","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","useraudits","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["id","viewUser"],["id","userDeleted","class","tw-alert-danger tw-container tw-mx-auto tw-mb-6",4,"ngIf"],[1,"tw-pill-warning","tw-mr-2"],["id","userDeleted",1,"tw-alert-danger","tw-container","tw-mx-auto","tw-mb-6"]],template:function(t,i){1&t&&(e.TgZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.ALo(2,"localize"),e.ynx(3,1),e.YNc(4,qb,3,3,"span",2),e.BQk(),e.ynx(5,3),e.TgZ(6,"div",4)(7,"label",5),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div",6)(11,"select",7),e.NdJ("change",function(C){return i.mobRoute(C.target.value)}),e.TgZ(12,"option",8),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"option",8),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"option",9),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"option",10),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"option",11),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"option",12),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"option",13),e._uU(31),e.ALo(32,"translate"),e.qZA()()()(),e.TgZ(33,"ul",14),e.ALo(34,"translate"),e.TgZ(35,"li",15)(36,"button",16),e._uU(37),e.ALo(38,"translate"),e.qZA()(),e.TgZ(39,"li",15)(40,"button",17),e._uU(41),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"li",15)(44,"button",18),e._uU(45),e.ALo(46,"translate"),e.qZA()(),e.TgZ(47,"li",15)(48,"button",19),e._uU(49),e.ALo(50,"translate"),e.qZA()(),e.TgZ(51,"li",15)(52,"button",20),e._uU(53),e.ALo(54,"translate"),e.qZA()(),e.TgZ(55,"li",15)(56,"button",21),e._uU(57),e.ALo(58,"translate"),e.qZA()()(),e.BQk(),e.qZA(),e.TgZ(59,"div",22),e.YNc(60,Qb,5,6,"div",23),e._UZ(61,"router-outlet"),e.qZA()),2&t&&(e.Q6J("title",i.user.firstName+" "+i.user.lastName)("crumbs",e.VKq(64,jb,e.WLB(61,Wb,e.lcZ(1,27,"Nav.Users"),e.lcZ(2,29,"/users"))))("hasTabs",!0)("isReadOnly",!0),e.xp6(4),e.Q6J("ngIf",i.user.isBlocked),e.xp6(4),e.Oqu(e.lcZ(9,31,"Nav.SubMenu")),e.xp6(5),e.hij("",e.lcZ(14,33,"Nav.SubMenu"),"..."),e.xp6(3),e.Oqu(e.lcZ(17,35,"Nav.Details")),e.xp6(3),e.Oqu(e.lcZ(20,37,"Nav.Roles")),e.xp6(3),e.Oqu(e.lcZ(23,39,"Nav.Additional Details")),e.xp6(3),e.Oqu(e.lcZ(26,41,"Nav.Applications")),e.xp6(3),e.Oqu(e.lcZ(29,43,"Nav.External Logins")),e.xp6(3),e.Oqu(e.lcZ(32,45,"Nav.Audits")),e.xp6(2),e.uIk("aria-label",e.lcZ(34,47,"Nav.SubMenu")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(66,Lc)),e.xp6(1),e.Oqu(e.lcZ(38,49,"Nav.Details")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(67,Lc)),e.xp6(1),e.Oqu(e.lcZ(42,51,"Nav.Roles")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(68,Lc)),e.xp6(1),e.Oqu(e.lcZ(46,53,"Nav.Additional Details")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(69,Lc)),e.xp6(1),e.Oqu(e.lcZ(50,55,"Nav.Applications")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(70,Lc)),e.xp6(1),e.Oqu(e.lcZ(54,57,"Nav.External Logins")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(71,Lc)),e.xp6(1),e.Oqu(e.lcZ(58,59,"Nav.Audits")),e.xp6(3),e.Q6J("ngIf",i.user.isDeleted))},dependencies:[z.O5,yn.lC,yn.rH,yn.Od,dt.G,Ut.X$,Un.lO],encapsulation:2}),r})();var Bh=m(1923);let Fh=(()=>{class r{constructor(t,i){this.http=t,this.headersService=i,this.actionUrl="signingkey",this.headers=i.setHeaders()}getKeys(){const t=new S.LE;return this.http.get(this.actionUrl,{headers:this.headers,params:t})}deleteKey(t){return this.http.delete(`${this.actionUrl}/${t}`,{headers:this.headers})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(S.eN),e.LFG(zl.s))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Kb=(()=>{class r{constructor(t,i,p,C,K){this.keyService=t,this.toastr=i,this.translate=p,this.modalService=C,this.dataTableService=K,this.keysDataTableActions=[ao.Xz.Delete],this.deleteModalType=Bh.w.Warning,this.deleteModalId="deleteKeyModal"}ngOnDestroy(){this.dtsSubscription.unsubscribe()}ngOnInit(){this.getSerializedKeys(),this.dtsSubscription=this.dataTableService.deleteRowEvent.subscribe(t=>{this.startDeleteKey(t)})}getSerializedKeys(){this.keyService.getKeys().subscribe(t=>{this.keys=t})}startDeleteKey(t){this.keyToDelete=this.keys[t],this.modalService.showById(this.deleteModalId,null)}deleteKey(){return this.keyService.deleteKey(this.keyToDelete.id).toPromise().then(t=>{this.toastr.success(this.translate.instant("Settings.Keys.RemovedKey"),this.translate.instant("Notifications.Success")),this.getSerializedKeys(),this.resetAndCloseDeleteModal()},t=>{this.toastr.error("Removed Key","Failed!")})}resetAndCloseDeleteModal(){this.keyToDelete=null,this.modalService.hideById(this.deleteModalId)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Fh),e.Y36(si._W),e.Y36(Ut.sK),e.Y36(sr.Z),e.Y36(xl.n))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-list-keys"]],decls:14,vars:35,consts:[["id","keysList",1,"tw-container","tw-mx-auto"],["id","keysTable",3,"rows","actions","norowslabel"],[3,"title","headClasses","cellClasses","prop"],[3,"title","headClasses","cellClasses","prop","date"],[3,"title","headClasses","cellClasses","prop","isBoolean"],[3,"title","modalId","actions","modalType","onCancel","onDelete"],[1,"tw-text-center"],[1,"tw-mb-4"],[1,"tw-pill-danger",3,"innerHTML"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"app-data-table",1),e._UZ(2,"app-data-table-column",2)(3,"app-data-table-column",2)(4,"app-data-table-column",2)(5,"app-data-table-column",3)(6,"app-data-table-column",4),e.qZA()(),e.TgZ(7,"app-custom-modal",5),e.NdJ("onCancel",function(){return i.resetAndCloseDeleteModal()})("onDelete",function(){return i.deleteKey()}),e.TgZ(8,"div",6)(9,"p",7),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"p",8),e.ALo(13,"translate"),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("rows",i.keys)("actions",i.keysDataTableActions)("norowslabel","Settings.Keys.NoKeys"),e.xp6(1),e.Q6J("title","Common.ID")("headClasses","tw-w-1/2")("cellClasses","tw-max-w-0 tw-truncate")("prop","id"),e.xp6(1),e.Q6J("title","Settings.Keys.Version")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","version"),e.xp6(1),e.Q6J("title","Settings.Keys.Algorithm")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","algorithm"),e.xp6(1),e.Q6J("title","Settings.Keys.Created")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","created")("date",!0),e.xp6(1),e.Q6J("title","Settings.Keys.IsX509Certificate")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop","isX509Certificate")("isBoolean",!0),e.xp6(1),e.Q6J("title","Settings.Keys.DeleteKey")("modalId",i.deleteModalId)("actions",i.keysDataTableActions)("modalType",i.deleteModalType),e.xp6(3),e.Oqu(e.lcZ(11,31,"Common.Delete.AreYouSureSimple")),e.xp6(2),e.Q6J("innerHTML",e.lcZ(13,33,"Common.Delete.Warning"),e.oJD))},dependencies:[ao.Qj,Kl.E,ms.R,Ut.X$],encapsulation:2}),r})();function Zh(r,l){1&r&&(e.TgZ(0,"span",8),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Policy")," "))}function nv(r,l){1&r&&(e.TgZ(0,"span",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Reserved")," "))}function $b(r,l){if(1&r&&(e.ynx(0,5),e.YNc(1,Zh,3,3,"span",6),e.YNc(2,nv,3,3,"span",7),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isPolicyRole()),e.xp6(1),e.Q6J("ngIf",t.role.reserved)}}const Gb=function(r,l){return{title:r,link:l}},Vh=function(r){return[r]};let Hh=(()=>{class r{constructor(t,i,p,C){this.activatedRoute=t,this.errorService=i,this.router=p,this.securityService=C}ngOnInit(){this.roleDataSubscription=this.activatedRoute.data.subscribe(t=>{this.role=t.role},t=>{this.errorService.handleError(t)})}ngOnDestroy(){this.roleDataSubscription.unsubscribe()}isPolicyRole(){const t=this.securityService.policyClaims;for(let i=0;i<t.length;i++)if("role"===t[i].type&&t[i].value===this.role.name)return!0;return!1}mobRoute(t){this.router.navigate([t],{relativeTo:this.activatedRoute})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.gz),e.Y36(Ee.T),e.Y36(yn.F0),e.Y36(ti.I))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:10,vars:18,consts:[[3,"title","crumbs","hasTabs","isReadOnly"],["badge","",4,"ngIf"],["tabs",""],[3,"tabTitle","tabValue"],["id","viewRole"],["badge",""],["class","tw-pill-warning tw-mr-2",4,"ngIf"],["class","tw-pill tw-mr-2",4,"ngIf"],[1,"tw-pill-warning","tw-mr-2"],[1,"tw-pill","tw-mr-2"]],template:function(t,i){1&t&&(e.TgZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.ALo(2,"localize"),e.YNc(3,$b,3,2,"ng-container",1),e.ynx(4,2),e.TgZ(5,"app-custom-tabs"),e._UZ(6,"app-custom-tab",3)(7,"app-custom-tab",3),e.qZA(),e.BQk(),e.qZA(),e.TgZ(8,"div",4),e._UZ(9,"router-outlet"),e.qZA()),2&t&&(e.Q6J("title",i.role.name)("crumbs",e.VKq(16,Vh,e.WLB(13,Gb,e.lcZ(1,9,"Nav.Roles"),e.lcZ(2,11,"/roles"))))("hasTabs",!0)("isReadOnly",!0),e.xp6(3),e.Q6J("ngIf",i.isPolicyRole()||i.role.reserved),e.xp6(3),e.Q6J("tabTitle","Nav.Details")("tabValue","details"),e.xp6(1),e.Q6J("tabTitle","Nav.Users")("tabValue","users"))},dependencies:[z.O5,yn.lC,dt.G,yl.v,Ea.x,Ut.X$,Un.lO],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();function iv(r,l){1&r&&(e.TgZ(0,"span",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Disabled")," "))}const Jh=function(r,l){return{title:r,link:l}},zb=function(r){return[r]},qh=function(){return["active"]};let Qh=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt){this.fb=t,this.route=i,this.router=p,this.titleService=C,this.identityResourceService=K,this.translate=Ce,this.claimTypesService=Ue,this.scopesClaimService=lt}ngOnInit(){this.identityResourceSubscription=this.identityResourceService.getCachedIdentityResource().subscribe(t=>{this.identityResource=t,this.titleService.setTitle(this.translate.instant("IdentityResources.Singular")+" "+this.identityResource.displayName+" "+this.translate.instant("Nav.Details")+` - ${He.de.SITE_TITLE}`)}),this.claimTypesService.getClaimTypes(null,null,!0).subscribe({next:t=>{this.scopesClaimService.setClaimTypes(t)}})}ngOnDestroy(){this.identityResourceSubscription.unsubscribe()}mobRoute(t){this.router.navigate([t],{relativeTo:this.route})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.QS),e.Y36(yn.gz),e.Y36(yn.F0),e.Y36(n.Dx),e.Y36(Ma.Q),e.Y36(Ut.sK),e.Y36(so.M),e.Y36(Sl.q))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ng-component"]],decls:39,vars:46,consts:[[3,"title","crumbs","hasTabs","isReadOnly","isReserved"],["tabs",""],[1,"tw-p-4","md:tw-hidden"],["for","nav-sub-menu",1,"sr-only"],[1,"tw-form-select"],["id","nav-sub-menu",1,"tw-form-control",3,"change"],["value","details"],["value","claims"],["value","properties"],["role","tablist",1,"tabs","tw-hidden","md:tw-flex"],[1,"tabs__item"],["routerLink","details","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["id","idrClaimsTabButton","routerLink","claims","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["id","idrPropertiesTabButton","routerLink","properties","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["badge",""],["class","tw-pill-warning tw-mr-2",4,"ngIf"],["id","viewIdentityResource",1,"tw-container","mx-auto"],[1,"tw-pill-warning","tw-mr-2"]],template:function(t,i){1&t&&(e.TgZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.ALo(2,"localize"),e.ynx(3,1),e.TgZ(4,"div",2)(5,"label",3),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",4)(9,"select",5),e.NdJ("change",function(C){return i.mobRoute(C.target.value)}),e.TgZ(10,"option",6),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"option",6),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"option",7),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"option",8),e._uU(20),e.qZA()()()(),e.TgZ(21,"ul",9),e.ALo(22,"translate"),e.TgZ(23,"li",10)(24,"button",11),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.TgZ(27,"li",10)(28,"button",12),e._uU(29),e.ALo(30,"translate"),e.qZA()(),e.TgZ(31,"li",10)(32,"button",13),e._uU(33),e.ALo(34,"translate"),e.qZA()()(),e.BQk(),e.ynx(35,14),e.YNc(36,iv,3,3,"span",15),e.BQk(),e.qZA(),e.TgZ(37,"div",16),e._UZ(38,"router-outlet"),e.qZA()),2&t&&(e.Q6J("title",null==i.identityResource?null:i.identityResource.name)("crumbs",e.VKq(41,zb,e.WLB(38,Jh,e.lcZ(1,18,"IdentityResources.Title"),e.lcZ(2,20,"/identityresources"))))("hasTabs",!0)("isReadOnly",!0)("isReserved",i.identityResource.nonEditable),e.xp6(6),e.Oqu(e.lcZ(7,22,"Nav.SubMenu")),e.xp6(5),e.hij("",e.lcZ(12,24,"Nav.SubMenu"),"..."),e.xp6(3),e.Oqu(e.lcZ(15,26,"Nav.Details")),e.xp6(3),e.Oqu(e.lcZ(18,28,"Nav.Claims")),e.xp6(3),e.Oqu("Nav.Properties | translate"),e.xp6(1),e.uIk("aria-label",e.lcZ(22,30,"Nav.SubMenu")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(43,qh)),e.xp6(1),e.Oqu(e.lcZ(26,32,"Nav.Details")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(44,qh)),e.xp6(1),e.Oqu(e.lcZ(30,34,"Nav.Claims")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(45,qh)),e.xp6(1),e.Oqu(e.lcZ(34,36,"Nav.Properties")),e.xp6(3),e.Q6J("ngIf",!i.identityResource.enabled))},dependencies:[z.O5,yn.lC,yn.rH,yn.Od,dt.G,Ut.X$,Un.lO],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})();var Yb=m(3351);function rv(r,l){1&r&&e._UZ(0,"app-custom-tab",2),2&r&&e.Q6J("tabTitle","Nav.Saml")("tabValue","saml")}function Uc(r,l){1&r&&e._UZ(0,"app-custom-tab",2),2&r&&e.Q6J("tabTitle","Clients.RelyingParty.Heading")("tabValue","wsfed")}function sv(r,l){1&r&&e._UZ(0,"app-custom-tab",2),2&r&&e.Q6J("tabTitle","Clients.URLS.Title")("tabValue","applicationurls")}function Xb(r,l){1&r&&e._UZ(0,"app-custom-tab",2),2&r&&e.Q6J("tabTitle","Common.Secrets")("tabValue","secrets")}function TA(r,l){1&r&&e._UZ(0,"app-custom-tab",2),2&r&&e.Q6J("tabTitle","Common.CIBA")("tabValue","ciba")}function ov(r,l){1&r&&(e.TgZ(0,"span",7),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Common.Disabled")," "))}const Wh=function(r,l){return{title:r,link:l}},ew=function(r){return[r]};let jh=(()=>{class r{constructor(t,i,p,C,K){this.clientCachingService=t,this.clientViewService=i,this.titleService=p,this.translate=C,this.errorService=K}ngOnInit(){this.clientSubscription=this.clientCachingService.unsavedCache$.subscribe(t=>{this.client=t;const i=this.translate.instant("Clients.Title")+" "+this.client.clientName+" - "+He.de.SITE_TITLE;this.titleService.setTitle(i)})}ngOnDestroy(){this.clientSubscription.unsubscribe()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Vs.Z),e.Y36(Do.a),e.Y36(n.Dx),e.Y36(Ut.sK),e.Y36(Ee.T))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-view-client"]],features:[e._Bn([Do.a])],decls:18,vars:29,consts:[[3,"title","crumbs","hasButton","hasTabs","isReadOnly","isReserved"],["tabs",""],[3,"tabTitle","tabValue"],[3,"tabTitle","tabValue",4,"ngIf"],["badge",""],["class","tw-pill-warning tw-mr-2",4,"ngIf"],["id","viewClient",1,"tw-container","tw-mx-auto"],[1,"tw-pill-warning","tw-mr-2"]],template:function(t,i){1&t&&(e.TgZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.ALo(2,"localize"),e.ynx(3,1),e.TgZ(4,"app-custom-tabs"),e._UZ(5,"app-custom-tab",2),e.YNc(6,rv,1,2,"app-custom-tab",3),e.YNc(7,Uc,1,2,"app-custom-tab",3),e.YNc(8,sv,1,2,"app-custom-tab",3),e.YNc(9,Xb,1,2,"app-custom-tab",3),e._UZ(10,"app-custom-tab",2),e.YNc(11,TA,1,2,"app-custom-tab",3),e._UZ(12,"app-custom-tab",2)(13,"app-custom-tab",2),e.qZA(),e.BQk(),e.ynx(14,4),e.YNc(15,ov,3,3,"span",5),e.BQk(),e.qZA(),e.TgZ(16,"div",6),e._UZ(17,"router-outlet"),e.qZA()),2&t&&(e.Q6J("title",i.client.clientName)("crumbs",e.VKq(27,ew,e.WLB(24,Wh,e.lcZ(1,20,"Nav.Clients"),e.lcZ(2,22,"/clients"))))("hasButton",!0)("hasTabs",!0)("isReadOnly",!0)("isReserved",i.client.nonEditable),e.xp6(5),e.Q6J("tabTitle","Nav.Details")("tabValue","details"),e.xp6(1),e.Q6J("ngIf",i.clientViewService.saml.display),e.xp6(1),e.Q6J("ngIf",i.clientViewService.wsFed.display),e.xp6(1),e.Q6J("ngIf",i.clientViewService.applicationUrls.display),e.xp6(1),e.Q6J("ngIf",i.clientViewService.secrets.display),e.xp6(1),e.Q6J("tabTitle","Nav.Resources")("tabValue","resources"),e.xp6(1),e.Q6J("ngIf",i.clientViewService.ciba.display),e.xp6(1),e.Q6J("tabTitle","Common.Advanced")("tabValue","advanced"),e.xp6(1),e.Q6J("tabTitle","Nav.Audits")("tabValue","clientaudits"),e.xp6(2),e.Q6J("ngIf",!i.client.enabled))},dependencies:[z.O5,yn.lC,dt.G,yl.v,Ea.x,Ut.X$,Un.lO],encapsulation:2}),r})();const av=["requiredClaimsForm"];function Kh(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",9)(2,"h2",10),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"p",11),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"p",12),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",13)(12,"span",14)(13,"button",15),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.signOutAndRedirectToLogin())}),e._uU(14),e.ALo(15,"translate"),e.qZA()()()()()}2&r&&(e.xp6(3),e.Oqu(e.lcZ(4,4,"Notifications.Success")),e.xp6(3),e.hij(" ",e.lcZ(7,6,"InitialAdminCreation.SuccessMessage")," "),e.xp6(3),e.hij(" ",e.lcZ(10,8,"InitialAdminCreation.LoginMessage")," "),e.xp6(5),e.hij(" ",e.lcZ(15,10,"Nav.Login")," "))}function lv(r,l){1&r&&(e.TgZ(0,"span",40),e._uU(1,"Passwords must match"),e.qZA())}function cv(r,l){1&r&&(e.TgZ(0,"ul",41)(1,"li"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"li"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"li"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"li"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"li"),e._uU(14),e.ALo(15,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,5,"Users.Password.Requirements.1")),e.xp6(3),e.Oqu(e.lcZ(6,7,"Users.Password.Requirements.2")),e.xp6(3),e.Oqu(e.lcZ(9,9,"Users.Password.Requirements.3")),e.xp6(3),e.Oqu(e.lcZ(12,11,"Users.Password.Requirements.4")),e.xp6(3),e.Oqu(e.lcZ(15,13,"Users.Password.Requirements.5")))}function uv(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"input",50),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw().$implicit;return e.KtG(C.value=p)}),e.qZA()}if(2&r){const t=e.oxw(),p=t.$implicit;e.MGl("id","claim-",t.index,""),e.Q6J("ngModel",p.value)}}function dv(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"input",51),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw().$implicit;return e.KtG(C.value=p)}),e.qZA()}if(2&r){const t=e.oxw(),p=t.$implicit;e.MGl("id","claim-",t.index,""),e.Q6J("ngModel",p.value)}}function tw(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",52)(1,"select",53),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw().$implicit;return e.KtG(C.value=p)}),e.TgZ(2,"option",54),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"option",55),e._uU(6),e.ALo(7,"translate"),e.qZA()()()}if(2&r){const t=e.oxw(),i=t.index,p=t.$implicit;e.xp6(1),e.MGl("id","claim-",i,""),e.Q6J("ngModel",p.value),e.xp6(2),e.Oqu(e.lcZ(4,4,"Common.True")),e.xp6(3),e.Oqu(e.lcZ(7,6,"Common.False"))}}function nw(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-date-time",58),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2).$implicit;return e.KtG(C.value=p)}),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(2),i=t.index,p=t.$implicit;e.xp6(1),e.MGl("id","claim-",i,""),e.Q6J("ngModel",p.value)}}function iw(r,l){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-date-time",59),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw(2).$implicit;return e.KtG(C.value=p)}),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(2),i=t.index,p=t.$implicit;e.xp6(1),e.MGl("id","claim-",i,""),e.Q6J("ngModel",p.value)("displayType","date")}}function rw(r,l){if(1&r&&(e.TgZ(0,"div",56),e.YNc(1,nw,2,2,"ng-container",57),e.YNc(2,iw,2,3,"ng-container",57),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf","birthdate"!=t.name),e.xp6(1),e.Q6J("ngIf","birthdate"==t.name)}}function pv(r,l){if(1&r&&(e.TgZ(0,"option",62),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function SA(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",52)(1,"select",60),e.NdJ("ngModelChange",function(p){e.CHM(t);const C=e.oxw().$implicit;return e.KtG(C.value=p)}),e.YNc(2,pv,2,2,"option",61),e.qZA()()}if(2&r){const t=e.oxw(),i=t.index,p=t.$implicit;e.xp6(1),e.MGl("id","claim-",i,""),e.Q6J("ngModel",p.value),e.xp6(1),e.Q6J("ngForOf",p.allowedValues)}}function hv(r,l){if(1&r&&(e.TgZ(0,"span",63),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.failureMessage," ")}}function sw(r,l){if(1&r&&(e.TgZ(0,"app-form-row",44),e.YNc(1,uv,1,2,"input",45),e.YNc(2,dv,1,2,"input",46),e.YNc(3,tw,8,8,"div",47),e.YNc(4,rw,3,2,"div",48),e.YNc(5,SA,3,3,"div",47),e.YNc(6,hv,2,1,"span",49),e.qZA()),2&r){const t=l.$implicit,i=l.index,p=e.oxw(3);e.Q6J("id","claim-"+i)("label",t.name)("help","DateTime"==t.format?"Common.Dates.UTCWarning":"")("isLast",i===p.displayClaims.length-1),e.xp6(1),e.Q6J("ngIf","String"==t.format),e.xp6(1),e.Q6J("ngIf","Int"==t.format),e.xp6(1),e.Q6J("ngIf","Boolean"==t.format),e.xp6(1),e.Q6J("ngIf","DateTime"==t.format),e.xp6(1),e.Q6J("ngIf","Enum"==t.format),e.xp6(1),e.Q6J("ngIf",null!=t.failureMessage)}}function ow(r,l){if(1&r&&(e.TgZ(0,"div",42),e.YNc(1,sw,7,10,"app-form-row",43),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.displayClaims)}}function xA(r,l){1&r&&e._UZ(0,"span",64)}function EA(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"h2",10),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div"),e._UZ(5,"hr",16)(6,"p",17)(7,"p",18),e.ALo(8,"translate"),e.TgZ(9,"p",17),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"hr",16),e.TgZ(13,"form",19)(14,"app-form-row",20),e._UZ(15,"input",21),e.qZA(),e.TgZ(16,"app-form-row",20),e._UZ(17,"input",22),e.qZA(),e.TgZ(18,"app-form-row",20),e._UZ(19,"input",23),e.qZA(),e.TgZ(20,"app-form-row",20),e._UZ(21,"input",24),e.qZA(),e.TgZ(22,"app-form-row",20),e._UZ(23,"input",25),e.qZA(),e.TgZ(24,"app-form-row",20),e._UZ(25,"input",26),e.YNc(26,lv,2,0,"span",27),e.YNc(27,cv,16,15,"ul",28),e.qZA()(),e.TgZ(28,"form",null,29),e.YNc(30,ow,2,1,"div",30),e.qZA(),e.TgZ(31,"div",13)(32,"span",14)(33,"button",31),e.NdJ("click",function(){e.CHM(t);const p=e.oxw();return e.KtG(p.addUser())}),e._uU(34),e.ALo(35,"translate"),e.YNc(36,xA,1,0,"span",32),e.qZA()()()(),e.TgZ(37,"ul",33)(38,"li",34)(39,"a",35),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"span",36),e._uU(43,"\u2022"),e.qZA()(),e.TgZ(44,"li",34)(45,"a",37),e._uU(46),e.ALo(47,"translate"),e.qZA(),e.TgZ(48,"span",36),e._uU(49,"\u2022"),e.qZA()(),e.TgZ(50,"li",38)(51,"a",39),e._uU(52),e.ALo(53,"translate"),e.qZA()()()()}if(2&r){const t=e.MAs(29),i=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,26,"LandingPage.AdminCreation")),e.xp6(5),e.Q6J("innerHTML",e.lcZ(8,28,"InitialAdminCreation.PermissionsInfoMessage"),e.oJD),e.xp6(3),e.hij(" ",e.lcZ(11,30,"InitialAdminCreation.PasswordHashMessage")," "),e.xp6(3),e.Q6J("formGroup",i.addUserForm),e.xp6(1),e.Q6J("id","FirstName")("label","Users.FirstName"),e.xp6(2),e.Q6J("id","LastName")("label","Users.LastName"),e.xp6(2),e.Q6J("id","Username")("label","Users.Username"),e.xp6(2),e.Q6J("id","Email")("label","Users.Email"),e.xp6(2),e.Q6J("id","Password")("label","Users.Password.Title"),e.xp6(2),e.Q6J("id","Password")("label","UserDetails.Confirm Password"),e.xp6(2),e.Q6J("ngIf",i.addUserForm.hasError("notSame")),e.xp6(1),e.Q6J("ngIf",i.addUserForm.get("password").hasError("pattern")),e.xp6(3),e.Q6J("ngIf",i.displayClaims.length>0),e.xp6(3),e.Q6J("disabled",!i.addUserForm.valid||!t.form.valid||i.inFlight),e.xp6(1),e.hij(" ",e.lcZ(35,32,"Common.Save")," "),e.xp6(2),e.Q6J("ngIf",i.inFlight),e.xp6(3),e.s9C("href",i.apiDocsLink,e.LSH),e.xp6(1),e.hij(" ",e.lcZ(41,34,"LandingPage.APIDocs")," "),e.xp6(6),e.hij(" ",e.lcZ(47,36,"LandingPage.Documentation")," "),e.xp6(6),e.hij(" ",e.lcZ(53,38,"Nav.Support")," ")}}let aw=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt){this.authService=t,this.titleService=i,this.toastr=p,this.fb=C,this.userService=K,this.errorService=Ce,this.claimTypesService=Ue,this.appComponentViewService=lt,this.versionNumber="",this.createdAdmin=!1,this.displayClaims=[],this.checkPasswords=Wt=>Wt.get("password").value===Wt.get("confirmPassword").value?null:{notSame:!0},this.titleService.setTitle(`${He.de.SITE_TITLE}`),this.versionNumber=ge;const Et=new Date;this.appCopyright=2017!==Et.getFullYear()?"2017 - "+Et.getFullYear():"2017"}ngOnInit(){this.appComponentViewService.startInitialAdminCreation(),this.createForms(),this.claimTypesService.getClaimTypes(null,null).subscribe(t=>{this.claimTypes=t;for(const p of this.claimTypes)p.required&&this.displayClaims.push({claimTypeId:p.id,format:p.valueType,name:p.name,value:null,failureMessage:p.ruleValidationFailureDescription,allowedValues:p.allowedValues})},t=>{this.errorService.handleError(t)})}addUser(){let t;t=JSON.parse(JSON.stringify(this.addUserForm.value)),Object.assign(t,{claims:[]});for(const i of this.displayClaims){if(null===i.value)continue;let p=i.value;"DateTime"===i.format&&(p=i.value),"Int"===i.format&&(p=p.toString()),t.claims.push({claimTypeId:i.claimTypeId,value:p,type:i.name})}this.inFlight=!0,this.userService.addInitialAdministrator(t).subscribe(()=>{this.inFlight=!1,this.createdAdmin=!0},i=>{this.inFlight=!1,this.errorService.handleError(i)})}signOutAndRedirectToLogin(){this.authService.logoff()}createForms(){this.addUserForm=this.fb.group({username:["",[h.kI.required,(0,ot.Fd)()]],email:["",Vf],firstName:["",h.kI.required],lastName:["",h.kI.required],password:["",h.kI.pattern("^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$")],confirmPassword:[""]},{validators:this.checkPasswords})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(hr.e),e.Y36(n.Dx),e.Y36(si._W),e.Y36(h.QS),e.Y36(Cr.K),e.Y36(Ee.T),e.Y36(so.M),e.Y36(fo.t))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-initial-admin-creation"]],viewQuery:function(t,i){if(1&t&&e.Gf(av,5),2&t){let p;e.iGM(p=e.CRH())&&(i.requiredClaimsForm=p.first)}},decls:10,vars:3,consts:[[1,"tw-fixed","tw-inset-0","tw-z-10"],[1,"tw-bg-primary-500","tw-absolute","tw-inset-0",2,"background-image","url(assets/img/pattern.png)"],[1,"tw--mt-5","tw-mx-auto","tw--mb-10","tw-relative","tw-z-20"],[1,"tw-flex","tw-items-center","tw-h-16","tw-mb-4"],["src","assets/img/logo-persimmon.png","alt","AdminUI",1,"tw-h-8"],[1,"tw-text-sm","tw-font-semibold","tw-text-white-75","tw-ml-auto"],[1,"tw-px-6"],["class","tw-px-6",4,"ngIf"],["class","tw-bg-white tw-p-6 tw--mx-6 tw-shadow tw-rounded md:tw-mx-auto md:tw-max-w-2xl",4,"ngIf"],[1,"tw-bg-white","tw-p-6","tw--mx-6","tw-shadow","tw-rounded","md:tw-mx-auto","md:tw-max-w-2xl"],[1,"tw-text-xl","tw-font-semibold","md:tw-text-2xl"],["role","alert",1,"tw-alert-success","tw-mb-4","tw-mt-4"],[1,"tw-text-sm","tw-mt-2"],[1,"tw-mt-4"],[1,"xs:tw-mr-3"],["id","loginBtn",1,"tw-btn","tw-btn-success",3,"click"],[1,"tw-mt-5","tw-mt-5"],[1,"tw-font-semibold","tw-mt-5"],[1,"tw-mt-5",3,"innerHTML"],["autocomplete","off",1,"form","tw-mt-5",3,"formGroup"],[3,"id","label"],["id","FirstName","type","text","name","FirstName","formControlName","firstName","required","",1,"tw-form-control"],["id","LastName","type","text","name","LastName","formControlName","lastName","required","",1,"tw-form-control"],["id","Username","type","text","name","username","formControlName","username","required","",1,"tw-form-control"],["id","Email","type","email","name","email","formControlName","email","required","",1,"tw-form-control"],["id","Password","type","password","name","Password","formControlName","password","aria-labelledby","PasswordHelp","required","",1,"tw-form-control"],["id","ConfirmPassword","type","password","name","ConfirmPassword","formControlName","confirmPassword","required","",1,"tw-form-control"],["class","tw-form-text-danger",4,"ngIf"],["id","PasswordHelp","class","tw-form-text-danger",4,"ngIf"],["requiredClaimsForm","ngForm"],["id","claimsForm",4,"ngIf"],["type","submit","id","addUserSubmit",1,"tw-btn-success",3,"disabled","click"],["class","fad fa-spinner-third fa-spin tw-text-secondary-500 tw-mr-2 tw-ml-2",4,"ngIf"],[1,"tw-flex","tw-flex-wrap","tw-items-center","tw-border-t","tw-border-grey-200","tw-text-sm","tw--mx-6","tw--mb-2","tw-mt-6","tw-pt-4","tw-px-6"],[1,"tw-flex","tw-items-center","tw-mr-3"],["target","_blank",1,"tw-inline-block","tw-text-blue-500","hover:tw-text-body","trans",3,"href"],["aria-hidden","true",1,"tw-ml-3","tw-opacity-50"],["href","documentation/index.html","target","_blank",1,"tw-inline-block","tw-text-blue-500","hover:tw-text-body","trans"],[1,"tw-flex","tw-items-center"],["href","mailto:support@identityserver.com?subject=AdminUI",1,"tw-inline-block","tw-text-blue-500","hover:tw-text-body","trans"],[1,"tw-form-text-danger"],["id","PasswordHelp",1,"tw-form-text-danger"],["id","claimsForm"],[3,"id","label","help","isLast",4,"ngFor","ngForOf"],[3,"id","label","help","isLast"],["class","tw-form-control","type","text","name","string","required","",3,"id","ngModel","ngModelChange",4,"ngIf"],["class","tw-form-control","type","number","name","number","required","",3,"id","ngModel","ngModelChange",4,"ngIf"],["class","tw-form-select",4,"ngIf"],["class","tw-w-full sm:tw-max-w-2xl",4,"ngIf"],["class","tw-form-text",4,"ngIf"],["type","text","name","string","required","",1,"tw-form-control",3,"id","ngModel","ngModelChange"],["type","number","name","number","required","",1,"tw-form-control",3,"id","ngModel","ngModelChange"],[1,"tw-form-select"],["name","boolean","required","",1,"tw-form-control",3,"id","ngModel","ngModelChange"],["value","true"],["value","false"],[1,"tw-w-full","sm:tw-max-w-2xl"],[4,"ngIf"],["name","claimValue","required","",3,"id","ngModel","ngModelChange"],["name","claimValue","required","",3,"id","ngModel","displayType","ngModelChange"],["name","enum","required","",1,"tw-form-control",3,"id","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"tw-form-text"],[1,"fad","fa-spinner-third","fa-spin","tw-text-secondary-500","tw-mr-2","tw-ml-2"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.qZA(),e.TgZ(2,"div",2)(3,"header",3),e._UZ(4,"img",4),e.TgZ(5,"span",5),e._uU(6),e.qZA()(),e.TgZ(7,"div",6),e.YNc(8,Kh,16,12,"div",7),e.YNc(9,EA,54,40,"div",8),e.qZA()()),2&t&&(e.xp6(6),e.hij("v",i.versionNumber,""),e.xp6(2),e.Q6J("ngIf",i.createdAdmin),e.xp6(1),e.Q6J("ngIf",!i.createdAdmin))},dependencies:[z.sg,z.O5,h._Y,h.YN,h.Kr,h.Fj,h.wV,h.EJ,h.JJ,h.JL,h.Q7,h.On,h.F,h.sg,h.u,Dn.L,Fl.j,Ut.X$],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]}),r})(),$h=(()=>{class r{constructor(t,i){this.http=t,this.headersService=i,this.actionUrl="webhookconfiguration",this.headers=this.headersService.setHeaders()}getWebhooks(){return this.http.get(this.actionUrl,{headers:this.headers})}saveWebhookConfiguration(t){const i=JSON.stringify(t);return this.http.put(this.actionUrl,i,{headers:this.headers})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(S.eN),e.LFG(zl.s))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})(),Gh=(()=>{class r{constructor(t,i,p){this.webhookService=t,this.protectedResourceService=i,this.errorService=p}resolve(){return(0,Xs.D)({webhooks:this.webhookService.getWebhooks(),protectedResources:this.protectedResourceService.getProtectedResources()}).pipe((0,u.U)(t=>{const i=new fv;i.webhookConfiguration=t.webhooks;const p=[];return t.protectedResources.forEach(C=>{p.push(...C.scopes)}),i.scopeNames=p.map(C=>C.name).sort(),i},t=>{this.errorService.handleError(t)}))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG($h),e.LFG(Zo.m),e.LFG(Ee.T))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();class fv{}class mv{constructor(l,t,i,p){this.webhooks={MfaReset:l,PasswordReset:t,UserRegistration:i,ServerSideSessionDelete:p}}}var na=(()=>{return(r=na||(na={})).MFAReset="MfaReset",r.PasswordReset="PasswordReset",r.UserRegistration="UserRegistration",r.ServerSideSessionDelete="ServerSideSessionDelete",na;var r})();function uw(r,l){if(1&r&&(e.TgZ(0,"option",11),e._uU(1),e.qZA()),2&r){const t=l.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.Oqu(t)}}let dw=(()=>{class r{constructor(){}ngOnInit(){}toggle(){this.parentForm.controls[this.webhookName].get("enabled").value?(this.parentForm.controls[this.webhookName].get("url").disable(),this.parentForm.controls[this.webhookName].get("scopeName").disable()):(this.parentForm.controls[this.webhookName].get("url").enable(),this.parentForm.controls[this.webhookName].get("scopeName").enable())}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-edit-webhook"]],inputs:{webhookName:"webhookName",scopeNames:"scopeNames",parentForm:"parentForm"},decls:11,vars:14,consts:[[3,"formGroup"],[3,"formGroupName"],[3,"id","label"],[3,"id","isTraffic","isAlt"],["formControlName","enabled","type","checkbox",1,"tw-form-switch__input",3,"id","click"],[3,"id","label","help"],["id","WebhookUrl","type","text","formControlName","url",1,"tw-form-control"],[3,"label","isLast"],[1,"tw-form-select"],["id","scopes","formControlName","scopeName",1,"tw-form-control"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"app-form-row",2)(3,"app-form-toggle",3)(4,"input",4),e.NdJ("click",function(){return i.toggle()}),e.qZA()()(),e.TgZ(5,"app-form-row",5),e._UZ(6,"input",6),e.qZA(),e.TgZ(7,"app-form-row",7)(8,"div",8)(9,"select",9),e.YNc(10,uw,2,2,"option",10),e.qZA()()()()()),2&t&&(e.Q6J("formGroup",i.parentForm),e.xp6(1),e.s9C("formGroupName",i.webhookName),e.xp6(1),e.Q6J("id","WebhookEnabled")("label","Webhooks.EnableWebhook"),e.xp6(1),e.Q6J("id","WebhookEnabled"+i.webhookName)("isTraffic",!0)("isAlt",!1),e.xp6(1),e.Q6J("id","WebhookEnabled"+i.webhookName),e.xp6(1),e.Q6J("id","WebhookUrl")("label","Common.URL")("help","Webhooks.EnsureHttps"),e.xp6(2),e.Q6J("label","Webhooks.ProtectingScope")("isLast",!0),e.xp6(3),e.Q6J("ngForOf",i.scopeNames))},dependencies:[z.sg,h._Y,h.YN,h.Kr,h.Fj,h.Wl,h.EJ,h.JJ,h.JL,h.F,h.sg,h.u,h.x0,Dn.L,ds.O],encapsulation:2}),r})();const pw=["save"];function du(r,l){if(1&r&&(e.TgZ(0,"div",5)(1,"form",6)(2,"h2",7),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"app-edit-webhook",8),e.TgZ(6,"h2",7),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"app-edit-webhook",8),e.TgZ(10,"h2",7),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"app-edit-webhook",8),e.TgZ(14,"h2",7),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"app-edit-webhook",8),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.webhooksForm),e.xp6(2),e.Oqu(e.lcZ(4,17,"Webhooks.MultiFactorHeading")),e.xp6(2),e.Q6J("webhookName",t.webhookNames.MFAReset)("scopeNames",t.scopeNames)("parentForm",t.webhooksForm),e.xp6(2),e.Oqu(e.lcZ(8,19,"Webhooks.PasswordResetHeading")),e.xp6(2),e.Q6J("webhookName",t.webhookNames.PasswordReset)("scopeNames",t.scopeNames)("parentForm",t.webhooksForm),e.xp6(2),e.Oqu(e.lcZ(12,21,"Webhooks.UserRegistrationHeading")),e.xp6(2),e.Q6J("webhookName",t.webhookNames.UserRegistration)("scopeNames",t.scopeNames)("parentForm",t.webhooksForm),e.xp6(2),e.Oqu(e.lcZ(16,23,"Webhooks.ServerSideSessionDeleteHeading")),e.xp6(2),e.Q6J("webhookName",t.webhookNames.ServerSideSessionDelete)("scopeNames",t.scopeNames)("parentForm",t.webhooksForm)}}let _v=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt){this.activatedRoute=t,this.errorService=i,this.fb=p,this.webhookService=C,this.translate=K,this.toastr=Ce,this.modalService=Ue,this.dialogService=lt,this.webhookNames=na,this.saveLock=!1,this.clientCreationConfirmationModalId="clientCreationConfirmationModalId",this.clientDeletionConfirmationModalId="clientDeletionConfirmationModalId",this.confirmationModalActions=[Vt.n.Save]}ngOnInit(){this.activatedRoute.data.pipe(function gv(...r){const l=r.length;if(0===l)throw new Error("list of properties cannot be empty.");return(0,u.U)(t=>{let i=t;for(let p=0;p<l;p++){const C=i?.[r[p]];if(!(typeof C<"u"))return;i=C}return i})}("webhookResolverObject")).subscribe(t=>{this.webhookConfiguration=t.webhookConfiguration,this.webhooksEnabled=this.checkWebhooksEnabled(),this.scopeNames=t.scopeNames,this.webhooksForm=this.fb.group({[na.MFAReset]:this.createFormGroup(this.webhookConfiguration.webhooks.MfaReset),[na.PasswordReset]:this.createFormGroup(this.webhookConfiguration.webhooks.PasswordReset),[na.UserRegistration]:this.createFormGroup(this.webhookConfiguration.webhooks.UserRegistration),[na.ServerSideSessionDelete]:this.createFormGroup(this.webhookConfiguration.webhooks.ServerSideSessionDelete)}),this.saveLock=!0,this.webhooksForm.valueChanges.subscribe(i=>{this.saveLock=!(this.webhooksForm.controls[na.MFAReset].valid&&this.webhooksForm.controls[na.PasswordReset].valid&&this.webhooksForm.controls[na.UserRegistration].valid&&this.webhooksForm.controls[na.ServerSideSessionDelete].valid)})},t=>{this.errorService.handleError(t)})}createFormGroup(t){return this.fb.group({url:[{value:t.url,disabled:!t.enabled},h.kI.required],scopeName:[{value:t.scopeName,disabled:!t.enabled}],enabled:[t.enabled]})}processWebhookConfigurationUpdate(){const t=this.getWebhookFormValues();return!this.webhooksEnabled&&this.checkAnyWebhooksEnabled(t)?this.modalService.showById(this.clientCreationConfirmationModalId,this.saveButtonRef):this.webhooksEnabled&&this.checkAllWebhooksDisabled(t)?this.modalService.showById(this.clientDeletionConfirmationModalId,this.saveButtonRef):void this.saveWebhookConfiguration()}saveWebhookConfiguration(){const t=this.getWebhookFormValues();this.webhookService.saveWebhookConfiguration(t).subscribe(()=>{this.toastr.success(this.translate.instant("Webhooks.WebhookConfigurationUpdated"),this.translate.instant("Notifications.Success")),this.webhookService.getWebhooks().subscribe(i=>{this.webhookConfiguration=i,this.webhooksEnabled=this.checkWebhooksEnabled()},i=>{this.errorService.handleError(i)}),this.webhooksForm.markAsPristine()},i=>{this.errorService.handleError(i)})}cancelWebhookUpdate(){this.modalService.hideById(this.clientCreationConfirmationModalId)}acceptClientCreation(){this.saveWebhookConfiguration()}getWebhookFormValues(){const t=this.webhooksForm.getRawValue();return new mv(t.MfaReset,t.PasswordReset,t.UserRegistration,t.ServerSideSessionDelete)}checkWebhooksEnabled(){return this.webhookConfiguration.webhooks.PasswordReset.enabled||this.webhookConfiguration.webhooks.UserRegistration.enabled||this.webhookConfiguration.webhooks.MfaReset.enabled||this.webhookConfiguration.webhooks.ServerSideSessionDelete.enabled}checkAnyWebhooksEnabled(t){return t.webhooks.PasswordReset.enabled||t.webhooks.UserRegistration.enabled||t.webhooks.MfaReset.enabled||t.webhooks.ServerSideSessionDelete.enabled}checkAllWebhooksDisabled(t){return!(t.webhooks.PasswordReset.enabled||t.webhooks.UserRegistration.enabled||t.webhooks.MfaReset.enabled||t.webhooks.ServerSideSessionDelete.enabled)}canDeactivate(){return!this.webhooksForm.dirty||(this.dialogService.confirm(),this.dialogService.eventStream)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.gz),e.Y36(Ee.T),e.Y36(h.QS),e.Y36($h),e.Y36(Ut.sK),e.Y36(si._W),e.Y36(sr.Z),e.Y36(ja.x))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-manage-webhooks"]],viewQuery:function(t,i){if(1&t&&e.Gf(pw,5),2&t){let p;e.iGM(p=e.CRH())&&(i.saveButtonRef=p.first)}},decls:20,vars:25,consts:[["class","tw-container tw-mx-auto",4,"ngIf"],[3,"saveText","actions","title","modalId","onCancel","onSave"],[1,"tw-text-xl","tw-font-semibold","md:tw-text-2xl"],["role","alert",1,"tw-alert-warning","tw-mb-4","tw-mt-4"],["id","save",1,"tw-btn-success","tw-mr-3","tw-mb-3",3,"disabled","click"],[1,"tw-container","tw-mx-auto"],[3,"formGroup"],[1,"tw-mb-6","tw-mt-8","tw-font-semibold","tw-text-lg"],[3,"webhookName","scopeNames","parentForm"]],template:function(t,i){1&t&&(e.YNc(0,du,18,25,"div",0),e.TgZ(1,"app-custom-modal",1),e.NdJ("onCancel",function(){return i.cancelWebhookUpdate()})("onSave",function(){return i.acceptClientCreation()}),e.TgZ(2,"h2",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"p",3),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"app-custom-modal",1),e.NdJ("onCancel",function(){return i.cancelWebhookUpdate()})("onSave",function(){return i.acceptClientCreation()}),e.TgZ(9,"h2",2),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"p",3),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"app-button-bar")(16,"button",4),e.NdJ("click",function(){return i.processWebhookConfigurationUpdate()}),e._uU(17),e.ALo(18,"translate"),e.qZA()(),e._UZ(19,"app-can-deactivate")),2&t&&(e.Q6J("ngIf",i.webhookConfiguration),e.xp6(1),e.Q6J("saveText","Common.Continue")("actions",i.confirmationModalActions)("title","Webhooks.ClientCreationWarningTitle")("modalId",i.clientCreationConfirmationModalId),e.xp6(2),e.Oqu(e.lcZ(4,15,"Common.Warning")),e.xp6(3),e.hij(" ",e.lcZ(7,17,"Webhooks.ClientCreationWarningDescription")," "),e.xp6(2),e.Q6J("saveText","Common.Continue")("actions",i.confirmationModalActions)("title","Webhooks.ClientDeletionWarningTitle")("modalId",i.clientDeletionConfirmationModalId),e.xp6(2),e.Oqu(e.lcZ(11,19,"Common.Warning")),e.xp6(3),e.hij(" ",e.lcZ(14,21,"Webhooks.ClientDeletionWarningDescription")," "),e.xp6(3),e.Q6J("disabled",i.saveLock),e.xp6(1),e.hij(" ",e.lcZ(18,23,"Common.Save")," "))},dependencies:[z.O5,h._Y,h.JL,h.sg,Ia.J,pa.N,ms.R,dw,Ut.X$],encapsulation:2}),r})(),vv=(()=>{class r{constructor(t,i){this.clientCachingService=t,this.fb=i}ngOnInit(){this.clientCachingService.unsavedCache$.pipe((0,tr.P)()).subscribe(t=>{this.client=JSON.parse(JSON.stringify(t)),this.createForm()})}ngAfterViewInit(){this.clientFormSubscription=this.cibaConfigForm.valueChanges.subscribe(t=>{this.clientCachingService.componentDirtyValidMap.set("CibaConfigurationComponent",{isValid:this.cibaConfigForm.valid});const i=JSON.parse(JSON.stringify(this.client));i.cibaLifetime=this.cibaConfigForm.controls.cibaLifetime.value,i.pollingInterval=this.cibaConfigForm.controls.pollingInterval.value,this.clientCachingService.unsavedCache.next(i)})}createForm(){this.cibaConfigForm=this.fb.group({cibaLifetime:[this.client.cibaLifetime,h.kI.required],pollingInterval:[this.client.pollingInterval,h.kI.required]}),this.cibaConfigForm.markAsPristine()}ngOnDestroy(){this.clientFormSubscription.unsubscribe()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(Vs.Z),e.Y36(h.QS))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-ciba-configuration"]],decls:5,vars:8,consts:[[3,"formGroup"],[3,"id","label","help"],["id","CIBALifetime","formControlName","cibaLifetime"],[3,"id","label","help","isLast"],["id","PollingInterval","formControlName","pollingInterval"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"app-form-row",1),e._UZ(2,"app-lifetime-picker",2),e.qZA(),e.TgZ(3,"app-form-row",3),e._UZ(4,"app-lifetime-picker",4),e.qZA()()),2&t&&(e.Q6J("formGroup",i.cibaConfigForm),e.xp6(1),e.Q6J("id","CIBALifetime")("label","Common.CIBALifetime")("help","Clients.CIBALifetimeDescription"),e.xp6(2),e.Q6J("id","PollingInterval")("label","Common.PollingInterval")("help","Clients.CIBAPollingIntervalDescription")("isLast",!0))},dependencies:[h._Y,h.JJ,h.JL,h.sg,h.u,Cc.U,Dn.L],encapsulation:2}),r})(),yv=(()=>{class r{constructor(t,i,p){this.router=t,this.config=i,this.localizeRouter=p}canActivate(t,i){return this.config.getConfig().pipe((0,tr.P)(),(0,u.U)(p=>{if("accesspolicy"!=t.firstChild.routeConfig.path||!p.featureFlagOptions.enforcerAuthorizationEnabled)return!0;{const C=this.localizeRouter.translateRoute("/settings/webhooks");this.router.navigate([C])}}))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(yn.F0),e.LFG(Yr.E),e.LFG(Un.An))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),zh=(()=>{class r{constructor(t,i){this.http=t,this.headersService=i,this.actionUrl="ServerSideSession",this.headers=this.headersService.setHeaders()}buildParams(t,i,p,C,K,Ce,Ue){let lt=new S.LE;return null!=t&&(lt=lt.append("query",t)),(0,ot.Ew)(C)||(lt=lt.append("sort",C)),i&&(lt=lt.append("created",i)),p&&(lt=lt.append("expires",p)),K&&(lt=lt.append("page",String(K))),Ce&&(lt=lt.append("pageSize",String(Ce))),Ue&&(lt=lt.append("filterExpired",String(Ue))),lt}getSessions(t,i,p,C,K,Ce,Ue){const lt=this.buildParams(t,i,p,C,K,Ce,Ue);return this.http.get(this.actionUrl,{headers:this.headers,params:lt})}deleteSession(t){return this.http.delete(`${this.actionUrl}/${t}`,{headers:this.headers})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(S.eN),e.LFG(zl.s))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();var Xl=m(5785),Dl=m(5503),ec=m(5971),Id=m(5898),Md=m(4380),Nd=m(8975),Yh=m(4837);class hw{constructor(l,t,i,p,C,K){this.query=l,this.page=t,this.pageSize=i,this.sortCriteria=p,this.fromDate=C,this.toDate=K}}class Cv{constructor(l){this.query=l.query,this.page=l.page,this.pageSize=l.pageSize,this.sortCriteria=l.sortCriteria,this.fromDate=l.fromDate?.toString(),this.toDate=l.toDate?.toString()}}var Mo=(()=>{return(r=Mo||(Mo={})).ByUser="user",r.ByUserDescending="-user",r.ByScheme="scheme",r.BySchemeDescending="-scheme",r.ByCreated="created",r.ByCreatedDescending="-created",r.ByExpires="expires",r.ByExpiresDescending="-expires",r.ByRenewed="renewed",r.ByRenewedDescending="-renewed",Mo;var r})(),fw=m(4456);let Od=(()=>{class r{now(){return gi.ou.now()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();function Xa(r,l){1&r&&(e.TgZ(0,"span",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Auditing.FromDateWarning")," "))}function mw(r,l){1&r&&(e.TgZ(0,"span",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&r&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Auditing.ToDateBehindWarning")," "))}function Xh(r,l){1&r&&(e.TgZ(0,"div",31)(1,"div",35)(2,"div",36)(3,"div",37),e._UZ(4,"input",38,39),e.ALo(6,"translate"),e.ALo(7,"translate"),e.qZA()()()()),2&r&&(e.xp6(4),e.uIk("placeholder",e.lcZ(6,2,"Auditing.FilterTermPlaceholder"))("aria-label",e.lcZ(7,4,"Auditing.AddFilterTerm")))}function pu(r,l){1&r&&(e.TgZ(0,"p",40),e._UZ(1,"span",41),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"Auditing.UpdateWarning")," "))}function gw(r,l){1&r&&e._UZ(0,"app-simple-loader")}function _w(r,l){1&r&&(e.TgZ(0,"div",42)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"SessionManagement.NoSessionsFound")))}function vw(r,l){if(1&r&&e._UZ(0,"app-data-table-column",48),2&r){const t=e.oxw(2);e.Q6J("prop","user")("title","Auditing.Subject")("link","resourceLink")("headClasses","tw-hidden xs:tw-table-cell lg:tw-w-1/4")("sort",t.sortingEnum.None)}}function kd(r,l){if(1&r&&(e.TgZ(0,"app-data-table",43),e.YNc(1,vw,1,5,"app-data-table-column",44),e._UZ(2,"app-data-table-column",45)(3,"app-data-table-column",46)(4,"app-data-table-column",47)(5,"app-data-table-column",46),e.qZA()),2&r){const t=e.oxw();e.Q6J("rows",t.pagedResult.results)("actions",t.dataTableActions),e.xp6(1),e.Q6J("ngIf",!t.resourceOnly()),e.xp6(1),e.Q6J("prop","scheme")("title","SessionManagement.Scheme")("headClasses","tw-hidden tw-w-32 md:tw-table-cell xl:tw-w-40"),e.xp6(1),e.Q6J("prop","created")("title","SessionManagement.Created")("headClasses","tw-hidden tw-w-32 md:tw-table-cell xl:tw-w-40")("date",t.dateColumn(t.DatePipeNames.prettyDateTime)),e.xp6(1),e.Q6J("prop","expires")("title","SessionManagement.Expires")("headClasses","tw-hidden tw-w-32 md:tw-table-cell xl:tw-w-40")("date",t.dateColumn(t.DatePipeNames.prettyDateTime,"SessionManagement.NoExpiration"))("sort",t.sortingEnum.Descending),e.xp6(1),e.Q6J("prop","renewed")("title","SessionManagement.Renewed")("headClasses","tw-hidden tw-w-32 md:tw-table-cell xl:tw-w-40")("date",t.dateColumn(t.DatePipeNames.prettyDateTime,"SessionManagement.NotRenewed"))}}function Rd(r,l){if(1&r){const t=e.EpF();e.TgZ(0,"app-pager",49),e.NdJ("onGoToPage",function(p){e.CHM(t);const C=e.oxw();return e.KtG(C.goToPage(p))}),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("totalResults",null==t.pagedResult?null:t.pagedResult.totalCount)("currentPage",t.filterForm.get("page").value)("lastPage",null==t.pagedResult?null:t.pagedResult.pageCount)}}const yw=function(r){return[r]};let ef=(()=>{class r{constructor(t,i,p,C,K,Ce,Ue,lt,Et,Wt){this.sessionManagementService=t,this.localizeRouter=i,this.router=p,this.fb=C,this.activatedRoute=K,this.dataTableService=Ce,this.modalService=Ue,this.securityService=lt,this.errorService=Et,this.systemClock=Wt,this.isLoading=!1,this.sortingEnum=Yh.JN,this.filterHasChanged=!1,this.sessionStream=new o.x,this.dateColumn=(an,mn)=>new Kl.X(an,mn),this.DatePipeNames=fw.T,this.dataTableActions=[ao.Xz.Delete],this.deleteModalId="SessionManagement",this.modelActions=Vt.n,this.deleteModalType=Bh.w.Warning,this.resourceName="",this.dataTableServiceSubscriptions=new Dh.w0}resourceOnly(){return!(0,ot.Ew)(this.resourceName)}ngOnDestroy(){this.dataTableServiceSubscriptions.unsubscribe()}userManagerReadOnly(){return(0,ot.ub)(this.securityService.userPermissions)}ngOnInit(){this.translatedRoute=this.buildTranslatedRoute(),this.dataTableActions=this.userManagerReadOnly()?[]:[ao.Xz.Delete],this.activatedRoute.parent.url.pipe((0,tr.P)()).subscribe({next:t=>{this.resourceName=t[1]?.path??"",this.initDataSource()},error:t=>this.errorService.handleError(t)}),this.dataTableServiceSubscriptions.add(this.dataTableService.sortColumnEvent.subscribe(t=>{this.sortResults(t)})),this.dataTableServiceSubscriptions.add(this.dataTableService.deleteRowEvent.subscribe(t=>{this.openDeleteModal(this.pagedResult.results[t])}))}initDataSource(){this.setupFilterForm(this.activatedRoute.snapshot.queryParams),this.sessionStream.pipe((0,F.O)({query:this.filterForm.value.query,fromDate:this.filterForm.value.fromDate??this.systemClock.now().minus({month:1}).toString(),toDate:this.filterForm.value.toDate??this.systemClock.now().plus({month:1}).toString(),sortCriteria:this.filterForm.value.sortCriteria,page:this.filterForm.value.page,pageSize:this.filterForm.value.pageSize}),(0,re.z)(i=>(this.isLoading=!0,this.sessionManagementService.getSessions(i.query||"",i.fromDate?.toString(),i.toDate?.toString(),i.sortCriteria||"-when",i.page,i.pageSize,this.resourceOnly())))).subscribe(i=>{this.isLoading=!1,this.pagedResult={totalCount:i.totalCount,pageSize:i.pageSize,currentPage:i.currentPage,pageCount:i.pageCount,results:i.results.map(p=>new Yh.op(p,this.translatedRoute))}})}applyForm(t){t&&this.filterForm.patchValue({page:1}),this.resourceOnly()&&this.filterForm.patchValue({query:this.resourceName});const i=this.filterForm.value;this.filterForm.patchValue({fromDate:i.fromDate,toDate:i.toDate}),this.sessionStream.next(i),this.router.navigate([this.router.url.split("?")[0]],{queryParams:new Cv(this.filterForm.value)}),this.filterHasChanged=!1}goToPage(t){this.filterForm.patchValue({page:t}),this.applyForm(!1)}buildTranslatedRoute(){return this.userManagerReadOnly()?`${this.localizeRouter.translateRoute("/users/view")}`:`${this.localizeRouter.translateRoute("/users")}`}resetForm(){this.filterForm.setValue({fromDate:this.systemClock.now().minus({month:1}).toString(),toDate:this.systemClock.now().plus({month:1}).toString(),query:this.resourceName??"",page:1,pageSize:25,sortCriteria:Mo.ByExpiresDescending}),this.filterHasChanged=!1,this.applyForm(!0)}openDeleteModal(t){this.sessionToDelete=t,this.modalService.showById(this.deleteModalId,null)}closeDeleteModal(){this.sessionToDelete=null,this.modalService.hideById(this.deleteModalId)}removeSession(){if(null==this.sessionToDelete)throw new Error("Delete called without target");this.delete()}delete(){this.sessionManagementService.deleteSession(this.sessionToDelete.sessionId).subscribe({next:()=>{this.sessionToDelete=null,this.applyForm(!1),this.closeDeleteModal()},error:t=>{this.errorService.handleError(t)}})}sortResults(t){const i=this.activatedRoute.snapshot.queryParams,p=(0,ot.Ew)(i?.fromDate)?this.systemClock.now().minus({month:1}):gi.ou.fromISO(i.fromDate),C=(0,ot.Ew)(i?.toDate)?this.systemClock.now().plus({month:1}):gi.ou.fromISO(i.toDate),K=new hw(i.query,i.page,i.pageSize,this.getSortFromColumnName(t.prop,i.sortCriteria),p,C),Ce=this.filterHasChanged;this.filterForm.patchValue({sortCriteria:K.sortCriteria}),this.sessionStream.next(K),this.filterHasChanged=Ce,this.router.navigate([this.router.url.split("?")[0]],{queryParams:new Cv(K)}),this.dataTableService.sortCompletedEvent.next(t.prop)}getSortFromColumnName(t,i){switch(t){case"user":return i===Mo.ByUserDescending?Mo.ByUser:Mo.ByUserDescending;case"expires":return i===Mo.ByExpiresDescending?Mo.ByExpires:Mo.ByExpiresDescending;default:return Mo.ByExpiresDescending}}setupFilterForm(t){const i=(0,ot.Ew)(t?.fromDate)?this.systemClock.now().minus({month:1}):gi.ou.fromISO(t.fromDate),p=(0,ot.Ew)(t?.toDate)?this.systemClock.now().plus({month:1}):gi.ou.fromISO(t.toDate);this.filterForm=this.fb.nonNullable.group({fromDate:[i,[ot.eC]],toDate:[p],query:[this.resourceName||""],page:[t?.page||1],pageSize:[t?.pageSize>1e3?1e3:t?.pageSize||25],sortCriteria:[t?.sortCriteria||Mo.ByExpiresDescending]},{validators:ot.sY}),this.filterForm.valueChanges.subscribe(()=>{this.filterHasChanged=!0})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(zh),e.Y36(Un.An),e.Y36(yn.F0),e.Y36(h.qu),e.Y36(yn.gz),e.Y36(xl.n),e.Y36(sr.Z),e.Y36(ti.I),e.Y36(Ee.T),e.Y36(Od))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-sessionmanagement"]],standalone:!0,features:[e._Bn([zh]),e.jDz],decls:56,vars:42,consts:[["id","sessionList",1,"tw-container","tw-mx-auto"],[1,"",3,"formGroup"],[1,"tw-border-b","tw-border-grey-200","tw-mb-4","tw-pb-5"],[1,"tw-flex-grid","tw-mb-3","lg:tw-flex-nowrap"],[1,"tw-flex-grid-col","xs:tw-w-1/2","lg:tw-w-1/4"],[1,"tw-form-group","tw-mb-0"],["for","fromDate",1,"tw-form-label"],["id","fromDate","name","fromDate","formControlName","fromDate","aria-describedby","toErrorLabel",3,"displayType"],["id","fromErrorLabel","class","tw-form-text-danger",4,"ngIf"],["for","toDate",1,"tw-form-label"],["id","toDate","name","toDate","formControlName","toDate","aria-describedby","toErrorLabel",3,"displayType"],["id","toErrorLabel","class","tw-form-text-danger",4,"ngIf"],[1,"tw-flex-grid-col","tw-w-40","tw-ml-auto"],["for","pageSize",1,"tw-form-label"],[1,"tw-form-select"],["id","pageSize","formControlName","pageSize",1,"tw-form-control"],["pageLength",""],[3,"value"],["class","tw-mb-4",4,"ngIf"],[1,"tw-flex","tw-flex-wrap","tw-items-center"],["type","hidden"],["sortCriteria",""],["id","applyBtn",1,"tw-btn-success","tw-mr-3",3,"disabled","click"],[1,"tw-btn-link","tw-mr-3",3,"click"],["class","tw-pill-warning tw-my-2",4,"ngIf"],[4,"ngIf"],["class","tw-alert","role","alert",4,"ngIf"],[3,"rows","actions",4,"ngIf"],[3,"totalResults","currentPage","lastPage","onGoToPage",4,"ngIf"],[3,"title","modalId","actions","modalType","onCancel","onDelete"],[1,"tw-text-center"],[1,"tw-mb-4"],[1,"tw-pill-danger",3,"innerHTML"],["id","fromErrorLabel",1,"tw-form-text-danger"],["id","toErrorLabel",1,"tw-form-text-danger"],["aria-labelledby","showFilterButton",1,"tw-mt-3","tw-mb-6"],[1,"tw-flex-grid","md:tw-flex-nowrap"],[1,"tw-flex-grid-col","tw-flex","xs:tw-w-3/5","sm:tw-w-1/2"],["formControlName","query","id","filterTerm","type","text","autocomplete","off",1,"tw-form-control","tw-border-r-1"],["filterValue",""],[1,"tw-pill-warning","tw-my-2"],["aria-hidden","true",1,"fas","fa-info-circle","tw-mr-1"],["role","alert",1,"tw-alert"],[3,"rows","actions"],[3,"prop","title","link","headClasses","sort",4,"ngIf"],[3,"prop","title","headClasses"],[3,"prop","title","headClasses","date"],[3,"prop","title","headClasses","date","sort"],[3,"prop","title","link","headClasses","sort"],[3,"totalResults","currentPage","lastPage","onGoToPage"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div"),e._UZ(10,"app-date-time",7),e.YNc(11,Xa,3,3,"span",8),e.qZA()()(),e.TgZ(12,"div",4)(13,"div",5)(14,"label",9),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"div"),e._UZ(18,"app-date-time",10),e.YNc(19,mw,3,3,"span",11),e.qZA()()(),e.TgZ(20,"div",12)(21,"div",5)(22,"label",13),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"div",14)(26,"select",15,16)(28,"option",17),e._uU(29,"25 "),e.qZA(),e.TgZ(30,"option",17),e._uU(31,"50"),e.qZA(),e.TgZ(32,"option",17),e._uU(33,"100"),e.qZA()()()()()(),e.YNc(34,Xh,8,6,"div",18),e.TgZ(35,"div",19),e._UZ(36,"input",20,21),e.TgZ(38,"button",22),e.NdJ("click",function(){return i.applyForm(!0)}),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"button",23),e.NdJ("click",function(){return i.resetForm()}),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.YNc(44,pu,4,3,"p",24),e.qZA()()(),e.YNc(45,gw,1,0,"app-simple-loader",25),e.YNc(46,_w,4,3,"div",26),e.YNc(47,kd,6,19,"app-data-table",27),e.YNc(48,Rd,1,3,"app-pager",28),e.qZA(),e.TgZ(49,"app-custom-modal",29),e.NdJ("onCancel",function(){return i.closeDeleteModal()})("onDelete",function(){return i.removeSession()}),e.TgZ(50,"div",30)(51,"p",31),e._uU(52),e.ALo(53,"translate"),e.qZA(),e._UZ(54,"p",32),e.ALo(55,"translate"),e.qZA()()),2&t){let p;e.xp6(1),e.Q6J("formGroup",i.filterForm),e.xp6(6),e.Oqu(e.lcZ(8,26,"SessionManagement.Created")),e.xp6(3),e.Q6J("displayType","date"),e.xp6(1),e.Q6J("ngIf",i.filterForm.get("fromDate").hasError("dateInFuture")),e.xp6(4),e.Oqu(e.lcZ(16,28,"SessionManagement.Expires")),e.xp6(3),e.Q6J("displayType","date"),e.xp6(1),e.Q6J("ngIf",i.filterForm.hasError("fromDateIsAfterToDate")),e.xp6(4),e.Oqu(e.lcZ(24,30,"Auditing.ResultsPerPage")),e.xp6(5),e.Q6J("value",25),e.xp6(2),e.Q6J("value",50),e.xp6(2),e.Q6J("value",100),e.xp6(2),e.Q6J("ngIf",!i.resourceOnly()),e.xp6(4),e.Q6J("disabled",(null==i.filterForm?null:i.filterForm.errors)||(null==(p=i.filterForm.get("fromDate"))?null:p.hasError("dateInFuture"))),e.xp6(1),e.hij(" ",e.lcZ(40,32,"Auditing.ExecuteAndDisplay")," "),e.xp6(3),e.hij(" ",e.lcZ(43,34,"Auditing.Reset")," "),e.xp6(2),e.Q6J("ngIf",i.filterHasChanged),e.xp6(1),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.pagedResult?null:i.pagedResult.results.length)<1&&!i.isLoading),e.xp6(1),e.Q6J("ngIf",(null==i.pagedResult?null:i.pagedResult.results.length)>0),e.xp6(1),e.Q6J("ngIf",(null==i.pagedResult?null:i.pagedResult.results.length)>0&&!i.isLoading),e.xp6(1),e.Q6J("title","Settings.Keys.DeleteKey")("modalId",i.deleteModalId)("actions",e.VKq(40,yw,i.modelActions.Delete))("modalType",i.deleteModalType),e.xp6(3),e.Oqu(e.lcZ(53,36,"Common.Delete.AreYouSureSimple")),e.xp6(2),e.Q6J("innerHTML",e.lcZ(55,38,"Common.Delete.Warning"),e.oJD)}},dependencies:[z.ez,z.O5,Ut.aw,Ut.X$,yn.Bz,Xl.U,wt.P,Dl.D,ec.s,En.w,h.UX,h._Y,h.YN,h.Kr,h.Fj,h.EJ,h.JJ,h.JL,h.sg,h.u,Id.T,Fl.j,Md.t,ao.Qj,Kl.E,Nd.d,ms.R],encapsulation:2}),r})();const tf=function(){return["active"]};function bv(r,l){1&r&&(e.TgZ(0,"ul",10),e.ALo(1,"translate"),e.TgZ(2,"li",11)(3,"button",12),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"li",11)(7,"button",13),e._uU(8),e.ALo(9,"translate"),e.qZA()()()),2&r&&(e.uIk("aria-label",e.lcZ(1,5,"Nav.SubMenu")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(11,tf)),e.xp6(1),e.Oqu(e.lcZ(5,7,"Nav.Users")),e.xp6(3),e.Q6J("routerLinkActive",e.DdM(12,tf)),e.xp6(1),e.Oqu(e.lcZ(9,9,"Nav.SessionManagement")))}let nf=(()=>{class r{constructor(t,i,p){this.r=t,this.route=i,this.configService=p}ngOnInit(){this.configService.getConfig().subscribe(t=>{this.showSessionManagement=t.featureFlagOptions.sessionManagementEnabled})}mobRoute(t){this.r.navigate([t],{relativeTo:this.route})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(yn.F0),e.Y36(yn.gz),e.Y36(Yr.E))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-users-nav"]],decls:21,vars:17,consts:[[3,"hasTabs","title"],["tabs",""],[1,"tw-p-4","md:tw-hidden"],["for","nav-sub-menu",1,"sr-only"],[1,"tw-form-select"],["id","nav-sub-menu",1,"tw-form-control",3,"change"],["value","list"],["value","sessions"],["class","tabs tw-hidden md:tw-flex","role","tablist",4,"ngIf"],["id","userRoutes"],["role","tablist",1,"tabs","tw-hidden","md:tw-flex"],[1,"tabs__item"],["type","button","routerLink","list","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"],["type","button","routerLink","sessions","role","tab","aria-selected","false",1,"tabs__link",3,"routerLinkActive"]],template:function(t,i){1&t&&(e.TgZ(0,"app-title-bar",0),e.ALo(1,"translate"),e.ynx(2,1),e.TgZ(3,"div",2)(4,"label",3),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",4)(8,"select",5),e.NdJ("change",function(C){return i.mobRoute(C.target.value)}),e.TgZ(9,"option",6),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"option",6),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"option",7),e._uU(16),e.ALo(17,"translate"),e.qZA()()()(),e.YNc(18,bv,10,13,"ul",8),e.BQk(),e.qZA(),e.TgZ(19,"div",9),e._UZ(20,"router-outlet"),e.qZA()),2&t&&(e.Q6J("hasTabs",!0)("title",e.lcZ(1,7,"Nav.Users")),e.xp6(5),e.Oqu(e.lcZ(6,9,"Nav.SubMenu")),e.xp6(5),e.hij("",e.lcZ(11,11,"Nav.SubMenu"),"..."),e.xp6(3),e.Oqu(e.lcZ(14,13,"Nav.Users")),e.xp6(3),e.Oqu(e.lcZ(17,15,"Nav.SessionManagement")),e.xp6(2),e.Q6J("ngIf",i.showSessionManagement))},dependencies:[z.O5,h.YN,h.Kr,dt.G,yn.lC,yn.rH,yn.Od,Ut.X$],encapsulation:2}),r})(),rf=(()=>{class r{constructor(t,i){this.router=t,this.config=i}canActivate(t,i){return this.config.getConfig().pipe((0,tr.P)(),(0,u.U)(p=>(p?.featureFlagOptions?.sessionManagementEnabled??!1)||this.router.parseUrl("/resourcenotfound/user")))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(yn.F0),e.LFG(Yr.E))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var Cw=m(9512);const wv=[{path:"",component:zg},{path:"initial-admin-creation",component:aw,canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.All]]}},{path:"home",component:Le,canActivate:[rs.B]},{path:"settings",component:kC,children:[{path:"",redirectTo:"accesspolicy",pathMatch:"full"},{path:"accesspolicy",component:Kg,canDeactivate:[Uo.I],resolve:{accessPolicyObject:J_}},{path:"webhooks",component:_v,canDeactivate:[Uo.I],resolve:{webhookResolverObject:Gh}},{path:"keys",component:Kb,canDeactivate:[Uo.I]}],canActivate:[rs.B,yv],canDeactivate:[Uo.I],data:{permissions:[Pt.y[Pt.y.All]]}},{path:"users",component:nf,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:xT},{path:"sessions",component:ef,canActivate:[rf]}],canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.UserManager],Pt.y[Pt.y.UserManagerReadOnly],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"users/:Id",component:xa,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:fp,canDeactivate:[Uo.I]},{path:"roles",component:Z0},{path:"additionaldetails",component:sy,canDeactivate:[Uo.I]},{path:"applications",component:cy},{path:"userlogins",component:n_},{path:"useraudits",component:l_.L},{path:"sessions",component:ef,canActivate:[rf]}],resolve:{user:mp.L},canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.UserManager],Pt.y[Pt.y.All]]}},{path:"users/view/:Id",loadChildren:()=>m.e(969).then(m.bind(m,4969)).then(r=>r.ViewUsersModule),component:tv,canActivate:[rs.B],resolve:{user:mp.L},data:{permissions:[Pt.y[Pt.y.UserManager],Pt.y[Pt.y.UserManagerReadOnly],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"roles",component:Sa,canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.UserManager],Pt.y[Pt.y.UserManagerReadOnly],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"roles/:Id",component:H1,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:k_,canDeactivate:[Uo.I]},{path:"users",component:Cb,canDeactivate:[Uo.I]}],resolve:{role:gp.O},canDeactivate:[Uo.I],canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.UserManager],Pt.y[Pt.y.All]]}},{path:"roles/view/:Id",component:Hh,loadChildren:()=>m.e(333).then(m.bind(m,7333)).then(r=>r.ViewRolesModule),resolve:{role:gp.O},canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.UserManager],Pt.y[Pt.y.UserManagerReadOnly],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"identityresources",component:wg,canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.IdentityServerManager],Pt.y[Pt.y.IdentityServerManagerReadOnly],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"identityresources/:Id",component:$a,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:v_,canDeactivate:[Uo.I]},{path:"claims",component:C_},{path:"properties",component:Hb}],resolve:{resource:th},canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.IdentityServerManager],Pt.y[Pt.y.All]]}},{path:"identityresources/view/:Id",component:Qh,loadChildren:()=>m.e(451).then(m.bind(m,451)).then(r=>r.ViewIdentityResourcesModule),resolve:{resource:th},canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.IdentityServerManager],Pt.y[Pt.y.IdentityServerManagerReadOnly],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"protectedresources",component:sh,canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.IdentityServerManager],Pt.y[Pt.y.IdentityServerManagerReadOnly],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"protectedresources/:Id",component:hC,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:T_,canDeactivate:[Uo.I]},{path:"scopes",component:M_},{path:"claims",component:Ih},{path:"secrets",component:Yl},{path:"properties",component:Jb}],resolve:{resource:Pa},canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.IdentityServerManager],Pt.y[Pt.y.All]]}},{path:"protectedresources/view/:Id",component:Yb.A,loadChildren:()=>m.e(785).then(m.bind(m,2785)).then(r=>r.ViewProtectedResourceModule),resolve:{resource:Pa},canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.IdentityServerManager],Pt.y[Pt.y.IdentityServerManagerReadOnly],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"clients",component:jy,canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.IdentityServerManager],Pt.y[Pt.y.IdentityServerManagerReadOnly],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"clients/:Id",component:zy,children:[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:xc},{path:"applicationurls",component:wC},{path:"secrets",component:Dc},{path:"resources",component:kg,children:[{path:"identity",component:Rh,data:{resourceType:Dd.P.Identity}},{path:"protected",component:Rh,data:{resourceType:Dd.P.Protected}}]},{path:"advanced",component:Rg.U,children:[{path:"consent",component:z_},{path:"tokens",component:Ac},{path:"refreshtokens",component:X_},{path:"singlesignout",component:Fb},{path:"deviceflow",component:Uh},{path:"pkce",component:Zb},{path:"claims",component:dd},{path:"granttypes",component:pA},{path:"identityproviders",component:Ph},{path:"properties",component:bb},{path:"other",component:Vb}]},{path:"wsfed",component:LC,resolve:{relyingParty:UC.U},children:[{path:"general",component:kb},{path:"claimmappings",component:cu}]},{path:"saml",component:bd,resolve:{serviceProvider:Sh.d},children:[{path:"acsendpoints",component:yd,data:{endpointType:"acs"}},{path:"sloendpoints",component:yd,data:{endpointType:"slo"}},{path:"arsendpoints",component:yd,data:{endpointType:"ars"}},{path:"claimmappings",component:cu},{path:"request",component:uu},{path:"response",component:Nb},{path:"advanced",component:xb}]},{path:"clientaudits",component:c_.J},{path:"ciba",component:vv}],canDeactivate:[Uo.I],resolve:{client:mg.A},canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.IdentityServerManager],Pt.y[Pt.y.All]]}},{path:"clients/view/:Id",component:jh,loadChildren:()=>m.e(133).then(m.bind(m,9133)).then(r=>r.ViewClientModule),resolve:{client:mg.A},canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.IdentityServerManager],Pt.y[Pt.y.IdentityServerManagerReadOnly],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"claim-types",component:ap,canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.UserManager],Pt.y[Pt.y.UserManagerReadOnly],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"claim-types/:Id",component:D0,resolve:{resource:_p.F},canDeactivate:[Uo.I],canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.UserManager],Pt.y[Pt.y.All]]}},{path:"claim-types/view/:Id",loadChildren:()=>m.e(233).then(m.bind(m,6233)).then(r=>r.ClaimTypesModule),resolve:{resource:_p.F},canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.UserManager],Pt.y[Pt.y.UserManagerReadOnly],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"dynamic-auth",loadChildren:()=>Promise.resolve().then(m.bind(m,3826)).then(r=>r.DynamicAuthModule),canActivate:[rs.B,Cw.n]},{path:"auditing",component:PC,canActivate:[rs.B],data:{permissions:[Pt.y[Pt.y.Auditer],Pt.y[Pt.y.AllReadOnly],Pt.y[Pt.y.All]]}},{path:"unauthorized",component:Lu},{path:"forbidden",component:Ul},{path:"auth",component:fC,data:{skipRouteLocalization:!0}},{path:"resourcenotfound",component:lo,canActivate:[rs.B]},{path:"**",component:ep,canActivate:[rs.B]}];let sf=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[yn.Bz.forRoot(wv,{scrollPositionRestoration:"enabled"}),yn.Bz]}),r})();var tc=m(7023),hu=m(8265),af=m(85),Av=m(4362),Bc=m(5084),fu=m(4022),Pd=m(7770),Fc=m(6980),Il=m(9650),Sv=m(2147),mu=m(4091);let Ld=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[_p.F],imports:[z.ez,h.u5,h.UX,Jf.H3,Ks.z8,le.zk,yn.Bz,Ut.aw,tc._,Un.fQ,Bc.y,Xl.U,fu.p,Pd.t,ec.s,Fc.K,Il.I,Sv.l,mu.G,Dl.D]}),r})(),xv=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[mp.L,af.e],imports:[z.ez,h.u5,h.UX,le.zk,Dl.D,Ut.aw,hu.j,Ks.z8,tc._,Un.fQ,Av.l,Bc.y,Xl.U,fu.p,Pd.t,ec.s,Fc.K,Il.I,Id.T,yn.Bz,ef,Ld,mu.G]}),r})();var Ev=m(1230);let Dv=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[gp.O],imports:[z.ez,h.u5,h.UX,le.zk,Dl.D,yn.Bz,Ut.aw,tc._,Un.fQ,Bc.y,Xl.U,fu.p,Pd.t,ec.s,Ev.M,Fc.K,Il.I,mu.G]}),r})();var Iv=m(8761),Mv=m(8192),Nv=m(1436),Ov=m(6493);let Vo=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[th,Pa,Sl.q],imports:[z.ez,yn.Bz,Ut.aw,h.u5,Dl.D,h.UX,Ms.P4,Ks.z8,Iv.W,hu.j,tc._,yo.fx,le.zk,Mv.h,Un.fQ,Bc.y,Xl.U,fu.p,Pd.t,ec.s,Fc.K,Il.I,Nv.W,Ov.l,mu.G]}),r})();var Zc=m(8007);class bw extends Un.DJ{constructor(l,t,i,p,C="assets/locales.json"){super(l,t,i),this.http=p,this.path=C}load(l){return new Promise(t=>{this.http.get(`${this.path}`).subscribe(i=>{this.locales=i.locales,this.prefix=i.prefix||"",this.escapePrefix=i.escapePrefix||"",this.init(l).then(t)})})}}let ww=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[J_,hd,ti.I,so.M,ce.f,Fh,Gh,xl.n],imports:[z.ez,h.u5,h.UX,le.zk,Ut.aw,Dl.D,yn.Bz,hu.j,tc._,Un.fQ,Bc.y,Md.t,Xl.U,ec.s,fu.p,Fc.K,Il.I,Nd.d,Id.T,Ev.M,Ld]}),r})(),DA=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[Ut.aw,Av.l,yn.Bz,Bc.y,Id.T]}),r})();var IA=m(1274),$o=m(4968),Ud=m(8421),Vc=m(5797),kv=m(5403);m(1135);var lf=m(1848),Aw=m(3269);function Fd(...r){const l=(0,Aw.jO)(r),t=(0,Vc.k)(r);return t.length?new Fu.y(i=>{let p=t.map(()=>[]),C=t.map(()=>!1);i.add(()=>{p=C=null});for(let K=0;!i.closed&&K<t.length;K++)(0,Ud.Xf)(t[K]).subscribe((0,kv.x)(i,Ce=>{if(p[K].push(Ce),p.every(Ue=>Ue.length)){const Ue=p.map(lt=>lt.shift());i.next(l?l(...Ue):Ue),p.some((lt,Et)=>!lt.length&&C[Et])&&i.complete()}},()=>{C[K]=!0,!p[K].length&&i.complete()}));return()=>{p=C=null}}):yc.E}var cf=m(7272),$s=m(2722),gu=m(8505),_u=m(1365);Math,Math,Math;const VA=["*"],XA=["dialog"];function uT(r){return"string"==typeof r}function xu(r){return null!=r}function qd(r){return(r||document.body).getBoundingClientRect()}const hS={animation:!0,transitionTimerDelayMs:5},kx=()=>{},{transitionTimerDelayMs:Rx}=hS,Rf=new Map,aa=(r,l,t,i)=>{let p=i.context||{};const C=Rf.get(l);if(C)switch(i.runningTransition){case"continue":return yc.E;case"stop":r.run(()=>C.transition$.complete()),p=Object.assign(C.context,p),Rf.delete(l)}const K=t(l,i.animation,p)||kx;if(!i.animation||"none"===window.getComputedStyle(l).transitionProperty)return r.run(()=>K()),(0,Wa.of)(void 0).pipe(function Nx(r){return l=>new Fu.y(t=>l.subscribe({next:K=>r.run(()=>t.next(K)),error:K=>r.run(()=>t.error(K)),complete:()=>r.run(()=>t.complete())}))}(r));const Ce=new o.x,Ue=new o.x,lt=Ce.pipe(function Rv(...r){return l=>(0,cf.z)(l,(0,Wa.of)(...r))}(!0));Rf.set(l,{transition$:Ce,complete:()=>{Ue.next(),Ue.complete()},context:p});const Et=function Ox(r){const{transitionDelay:l,transitionDuration:t}=window.getComputedStyle(r);return 1e3*(parseFloat(l)+parseFloat(t))}(l);return r.runOutsideAngular(()=>{const Wt=(0,$o.R)(l,"transitionend").pipe((0,$s.R)(lt),(0,de.h)(({target:mn})=>mn===l));(function Bd(...r){return 1===(r=(0,Vc.k)(r)).length?(0,Ud.Xf)(r[0]):new Fu.y(function Tw(r){return l=>{let t=[];for(let i=0;t&&!l.closed&&i<r.length;i++)t.push((0,Ud.Xf)(r[i]).subscribe((0,kv.x)(l,p=>{if(t){for(let C=0;C<t.length;C++)C!==i&&t[C].unsubscribe();t=null}l.next(p)})))}}(r))})((0,Zu.H)(Et+Rx).pipe((0,$s.R)(lt)),Wt,Ue).pipe((0,$s.R)(lt)).subscribe(()=>{Rf.delete(l),r.run(()=>{K(),Ce.next(),Ce.complete()})})}),Ce.asObservable()};let O1=(()=>{class r{constructor(){this.animation=hS.animation}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),yS=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[z.ez]}),r})(),CS=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[z.ez]}),r})(),TS=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[z.ez]}),r})(),AS=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({}),r})();var bo=(()=>{return(r=bo||(bo={}))[r.Tab=9]="Tab",r[r.Enter=13]="Enter",r[r.Escape=27]="Escape",r[r.Space=32]="Space",r[r.PageUp=33]="PageUp",r[r.PageDown=34]="PageDown",r[r.End=35]="End",r[r.Home=36]="Home",r[r.ArrowLeft=37]="ArrowLeft",r[r.ArrowUp=38]="ArrowUp",r[r.ArrowRight=39]="ArrowRight",r[r.ArrowDown=40]="ArrowDown",bo;var r})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const xS=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function ES(r){const l=Array.from(r.querySelectorAll(xS)).filter(t=>-1!==t.tabIndex);return[l[0],l[l.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let PS=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[z.ez,h.u5]}),r})(),FS=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({}),r})();class Mu{constructor(l,t,i){this.nodes=l,this.viewRef=t,this.componentRef=i}}let x2=(()=>{class r{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Oe.q)(1)).subscribe(()=>{aa(this._zone,this._el.nativeElement,(t,i)=>{i&&qd(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return aa(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.SBq),e.Y36(e.R0b))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,i){2&t&&(e.Tol("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),e.ekj("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),r})();class ZS{close(l){}dismiss(l){}}class E2{constructor(l,t,i,p){this._windowCmptRef=l,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=p,this._closed=new o.x,this._dismissed=new o.x,this._hidden=new o.x,l.instance.dismissEvent.subscribe(C=>{this.dismiss(C)}),this.result=new Promise((C,K)=>{this._resolve=C,this._reject=K}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe((0,$s.R)(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe((0,$s.R)(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(l){this._windowCmptRef&&(this._closed.next(l),this._resolve(l),this._removeModalElements())}_dismiss(l){this._dismissed.next(l),this._reject(l),this._removeModalElements()}dismiss(l){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function pS(r){return r&&r.then}(t)?!1!==t&&this._dismiss(l):t.then(i=>{!1!==i&&this._dismiss(l)},()=>{})}else this._dismiss(l)}_removeModalElements(){const l=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Wa.of)(void 0);l.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Fd(l,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var Bf=(()=>{return(r=Bf||(Bf={}))[r.BACKDROP_CLICK=0]="BACKDROP_CLICK",r[r.ESC=1]="ESC",Bf;var r})();let D2=(()=>{class r{constructor(t,i,p){this._document=t,this._elRef=i,this._zone=p,this._closed$=new o.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new e.vpe,this.shown=new o.x,this.hidden=new o.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":uT(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Oe.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},K=Fd(aa(this._zone,t,()=>t.classList.remove("show"),i),aa(this._zone,this._dialogEl.nativeElement,()=>{},i));return K.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),K}_show(){const t={animation:this.animation,runningTransition:"continue"};Fd(aa(this._zone,this._elRef.nativeElement,(C,K)=>{K&&qd(C),C.classList.add("show")},t),aa(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{(0,$o.R)(t,"keydown").pipe((0,$s.R)(this._closed$),(0,de.h)(p=>p.which===bo.Escape)).subscribe(p=>{this.keyboard?requestAnimationFrame(()=>{p.defaultPrevented||this._zone.run(()=>this.dismiss(Bf.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;(0,$o.R)(this._dialogEl.nativeElement,"mousedown").pipe((0,$s.R)(this._closed$),(0,gu.b)(()=>i=!1),(0,Gd.w)(()=>(0,$o.R)(t,"mouseup").pipe((0,$s.R)(this._closed$),(0,Oe.q)(1))),(0,de.h)(({target:p})=>t===p)).subscribe(()=>{i=!0}),(0,$o.R)(t,"click").pipe((0,$s.R)(this._closed$)).subscribe(({target:p})=>{t===p&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(Bf.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),p=ES(t)[0];(i||p||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let p;p=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>p.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&aa(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(z.K0),e.Y36(e.SBq),e.Y36(e.R0b))},r.\u0275cmp=e.Xpm({type:r,selectors:[["ngb-modal-window"]],viewQuery:function(t,i){if(1&t&&e.Gf(XA,7),2&t){let p;e.iGM(p=e.CRH())&&(i._dialogEl=p.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,i){2&t&&(e.uIk("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),e.Tol("modal d-block"+(i.windowClass?" "+i.windowClass:"")),e.ekj("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:VA,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"div",0,1)(2,"div",2),e.Hsn(3),e.qZA()()),2&t&&e.Tol("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),r})(),I2=(()=>{class r{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,p=i.style,{overflow:C,paddingRight:K}=p;if(t>0){const Ce=parseFloat(window.getComputedStyle(i).paddingRight);p.paddingRight=`${Ce+t}px`}return p.overflow="hidden",()=>{t>0&&(p.paddingRight=K),p.overflow=C}}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(z.K0))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),M2=(()=>{class r{constructor(t,i,p,C,K,Ce){this._applicationRef=t,this._injector=i,this._document=p,this._scrollBar=C,this._rendererFactory=K,this._ngZone=Ce,this._activeWindowCmptHasChanged=new o.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new e.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const Ue=this._windowCmpts[this._windowCmpts.length-1];((r,l,t,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const p=(0,$o.R)(l,"focusin").pipe((0,$s.R)(t),(0,u.U)(C=>C.target));(0,$o.R)(l,"keydown").pipe((0,$s.R)(t),(0,de.h)(C=>C.which===bo.Tab),(0,_u.M)(p)).subscribe(([C,K])=>{const[Ce,Ue]=ES(l);(K===Ce||K===l)&&C.shiftKey&&(Ue.focus(),C.preventDefault()),K===Ue&&!C.shiftKey&&(Ce.focus(),C.preventDefault())}),i&&(0,$o.R)(l,"click").pipe((0,$s.R)(t),(0,_u.M)(p),(0,u.U)(C=>C[1])).subscribe(C=>C.focus())})})(0,Ue.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(Ue.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,p){const C=p.container instanceof HTMLElement?p.container:xu(p.container)?this._document.querySelector(p.container):this._document.body,K=this._rendererFactory.createRenderer(null,null);if(!C)throw new Error(`The specified modal container "${p.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const Ce=new ZS,Ue=this._getContentRef(p.injector||t,i,Ce,p);let lt=!1!==p.backdrop?this._attachBackdrop(C):void 0,Et=this._attachWindowComponent(C,Ue.nodes),Wt=new E2(Et,Ue,lt,p.beforeDismiss);return this._registerModalRef(Wt),this._registerWindowCmpt(Et),Wt.hidden.pipe((0,Oe.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(K.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),Ce.close=an=>{Wt.close(an)},Ce.dismiss=an=>{Wt.dismiss(an)},this._applyWindowOptions(Et.instance,p),1===this._modalRefs.length&&K.addClass(this._document.body,"modal-open"),lt&&lt.instance&&(this._applyBackdropOptions(lt.instance,p),lt.changeDetectorRef.detectChanges()),Et.changeDetectorRef.detectChanges(),Wt}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let i=(0,e.LMc)(x2,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_attachWindowComponent(t,i){let p=(0,e.LMc)(D2,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(p.hostView),t.appendChild(p.location.nativeElement),p}_applyWindowOptions(t,i){this._windowAttributes.forEach(p=>{xu(i[p])&&(t[p]=i[p])})}_applyBackdropOptions(t,i){this._backdropAttributes.forEach(p=>{xu(i[p])&&(t[p]=i[p])})}_getContentRef(t,i,p,C){return i?i instanceof e.Rgc?this._createFromTemplateRef(i,p):uT(i)?this._createFromString(i):this._createFromComponent(t,i,p,C):new Mu([])}_createFromTemplateRef(t,i){const C=t.createEmbeddedView({$implicit:i,close(K){i.close(K)},dismiss(K){i.dismiss(K)}});return this._applicationRef.attachView(C),new Mu([C.rootNodes],C)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new Mu([[i]])}_createFromComponent(t,i,p,C){const K=e.zs3.create({providers:[{provide:ZS,useValue:p}],parent:t}),Ce=(0,e.LMc)(i,{environmentInjector:this._applicationRef.injector,elementInjector:K}),Ue=Ce.location.nativeElement;return C.scrollable&&Ue.classList.add("component-host-scrollable"),this._applicationRef.attachView(Ce.hostView),new Mu([[Ue]],Ce.hostView,Ce)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(p=>{p!==t&&"SCRIPT"!==p.nodeName&&(this._ariaHiddenValues.set(p,p.getAttribute("aria-hidden")),p.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const p=this._modalRefs.indexOf(t);p>-1&&(this._modalRefs.splice(p,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(e.z2F),e.LFG(e.zs3),e.LFG(z.K0),e.LFG(I2),e.LFG(e.FYo),e.LFG(e.R0b))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),N2=(()=>{class r{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(O1))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),O2=(()=>{class r{constructor(t,i,p){this._injector=t,this._modalStack=i,this._config=p}open(t,i={}){const p={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._injector,t,p)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(e.zs3),e.LFG(M2),e.LFG(N2))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),VS=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({providers:[O2]}),r})(),QS=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[z.ez]}),r})(),XS=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[z.ez]}),r})(),tx=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[z.ez]}),r})(),nx=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[z.ez]}),r})(),ix=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[z.ez]}),r})(),rx=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[z.ez]}),r})(),sx=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[z.ez]}),r})(),ox=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({}),r})();new e.OlP("live announcer delay",{providedIn:"root",factory:function Q2(){return 100}});let ax=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[z.ez]}),r})(),lx=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({}),r})();const W2=[yS,CS,TS,AS,PS,FS,VS,QS,lx,XS,tx,nx,ix,rx,sx,ox,ax];let j2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[W2,yS,CS,TS,AS,PS,FS,VS,QS,lx,XS,tx,nx,ix,rx,sx,ox,ax]}),r})();var K2=m(1888);let $2=(()=>{class r{intercept(t,i){if(t.url.startsWith("https://"))return i.handle(t);const p=(0,ot.SV)(),C=t.clone({url:`${p}${t.url}`});return i.handle(C)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();class G2{constructor(l,t="/assets/i18n/",i=".json"){this.http=l,this.prefix=t,this.suffix=i}getTranslation(l){return this.http.get(`${this.prefix}${l}${this.suffix}`)}}var z2=m(2843);let cx=(()=>{class r{}return r.EnforcerCompilationError=599,r.ExpiredTokenRedirect=413,r})(),Y2=(()=>{class r{constructor(t,i,p,C){this.router=t,this.localizeRouterService=i,this.appComponentViewService=p,this.securityService=C}intercept(t,i){return i.handle(t).pipe((0,Wl.K)(p=>{if(p.status===cx.ExpiredTokenRedirect)return this.securityService.startLogin(),lf.C;if(p.status===cx.EnforcerCompilationError){this.appComponentViewService.failedEnforcerCompilation();const C=this.localizeRouterService.translateRoute("/unauthorized");return document.dispatchEvent(new Event("appready")),this.router.navigate([C],{state:{enforcer:!0}}),lf.C}return(0,z2._)(()=>p)}))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(yn.F0),e.LFG(Un.An),e.LFG(fo.t),e.LFG(ti.I))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac}),r})();var X2=m(3826),eE=m(1842),tE=m(9490);function nE(r,l,t,i){return new bw(r,l,t,i,"resources/locales.json?cb="+ge)}function iE(r){return new G2(r,"./resources/",".json?cb="+ge)}let rE=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r,bootstrap:[io]}),r.\u0275inj=e.cJS({providers:[Od,Rc.$,Cr.K,ti.I,rs.B,ce.f,zl.s,so.M,He.VK,mp.L,gp.O,_p.F,eE.w,Ma.Q,Zo.m,Un.An,Ci.G,Wi,Ut.sK,ca.E,Yr.E,up.n,Ee.T,K2.B,$h,tE.o,{provide:S.TP,useClass:$2,multi:!0},{provide:S.TP,useClass:Y2,multi:!0}],imports:[sf,z.ez,h.u5,h.UX,Ln,S.JF,Dl.D,xv,Dv,Zc.V,X2.DynamicAuthModule,Vo,Ut.aw,tc._,Mv.h,Ut.aw.forRoot({loader:{provide:Ut.Zw,useFactory:iE,deps:[S.eN]}}),Un.fQ.forRoot(wv,{parser:{provide:Un.DJ,useFactory:nE,deps:[Ut.sK,z.Ye,Un.uh,S.eN]}}),le.zk.forRoot(),Ms.P4.forRoot(),Ks.z8.forRoot(),yo.fx.forRoot(),Ld,si.Rh.forRoot(),ww,DA,IA.T,j2,ec.s,Md.t,Nd.d,Il.I,Id.T,Un.fQ]}),r})();(0,e.G48)(),n.q6().bootstrapModule(rE)},5343:(nt,_e)=>{"use strict";_e.byteLength=function f(k){var O=w(k),U=O[1];return 3*(O[0]+U)/4-U},_e.toByteArray=function b(k){var O,Q,P=w(k),U=P[0],W=P[1],M=new e(function x(k,O,P){return 3*(O+P)/4-P}(0,U,W)),B=0,V=W>0?U-4:U;for(Q=0;Q<V;Q+=4)O=n[k.charCodeAt(Q)]<<18|n[k.charCodeAt(Q+1)]<<12|n[k.charCodeAt(Q+2)]<<6|n[k.charCodeAt(Q+3)],M[B++]=O>>16&255,M[B++]=O>>8&255,M[B++]=255&O;return 2===W&&(O=n[k.charCodeAt(Q)]<<2|n[k.charCodeAt(Q+1)]>>4,M[B++]=255&O),1===W&&(O=n[k.charCodeAt(Q)]<<10|n[k.charCodeAt(Q+1)]<<4|n[k.charCodeAt(Q+2)]>>2,M[B++]=O>>8&255,M[B++]=255&O),M},_e.fromByteArray=function R(k){for(var O,P=k.length,U=P%3,W=[],M=16383,B=0,V=P-U;B<V;B+=M)W.push(N(k,B,B+M>V?V:B+M));return 1===U?W.push(m[(O=k[P-1])>>2]+m[O<<4&63]+"=="):2===U&&W.push(m[(O=(k[P-2]<<8)+k[P-1])>>10]+m[O>>4&63]+m[O<<2&63]+"="),W.join("")};for(var m=[],n=[],e=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S=0,y=h.length;S<y;++S)m[S]=h[S],n[h.charCodeAt(S)]=S;function w(k){var O=k.length;if(O%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var P=k.indexOf("=");return-1===P&&(P=O),[P,P===O?0:4-P%4]}function g(k){return m[k>>18&63]+m[k>>12&63]+m[k>>6&63]+m[63&k]}function N(k,O,P){for(var W=[],M=O;M<P;M+=3)W.push(g((k[M]<<16&16711680)+(k[M+1]<<8&65280)+(255&k[M+2])));return W.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},3172:(nt,_e,m)=>{"use strict";const e=m(5343),h=m(8461),S="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;_e.lW=x,_e.h2=50;const y=2147483647;function f(ie){if(ie>y)throw new RangeError('The value "'+ie+'" is invalid for option "size"');const L=new Uint8Array(ie);return Object.setPrototypeOf(L,x.prototype),L}function x(ie,L,ne){if("number"==typeof ie){if("string"==typeof L)throw new TypeError('The "string" argument must be of type string. Received type number');return R(ie)}return b(ie,L,ne)}function b(ie,L,ne){if("string"==typeof ie)return function k(ie,L){if(("string"!=typeof L||""===L)&&(L="utf8"),!x.isEncoding(L))throw new TypeError("Unknown encoding: "+L);const ne=0|V(ie,L);let Ne=f(ne);const ze=Ne.write(ie,L);return ze!==ne&&(Ne=Ne.slice(0,ze)),Ne}(ie,L);if(ArrayBuffer.isView(ie))return function P(ie){if(Je(ie,Uint8Array)){const L=new Uint8Array(ie);return U(L.buffer,L.byteOffset,L.byteLength)}return O(ie)}(ie);if(null==ie)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(Je(ie,ArrayBuffer)||ie&&Je(ie.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Je(ie,SharedArrayBuffer)||ie&&Je(ie.buffer,SharedArrayBuffer)))return U(ie,L,ne);if("number"==typeof ie)throw new TypeError('The "value" argument must not be of type number. Received type number');const Ne=ie.valueOf&&ie.valueOf();if(null!=Ne&&Ne!==ie)return x.from(Ne,L,ne);const ze=function W(ie){if(x.isBuffer(ie)){const L=0|M(ie.length),ne=f(L);return 0===ne.length||ie.copy(ne,0,0,L),ne}return void 0!==ie.length?"number"!=typeof ie.length||Ct(ie.length)?f(0):O(ie):"Buffer"===ie.type&&Array.isArray(ie.data)?O(ie.data):void 0}(ie);if(ze)return ze;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof ie[Symbol.toPrimitive])return x.from(ie[Symbol.toPrimitive]("string"),L,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}function g(ie){if("number"!=typeof ie)throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function R(ie){return g(ie),f(ie<0?0:0|M(ie))}function O(ie){const L=ie.length<0?0:0|M(ie.length),ne=f(L);for(let Ne=0;Ne<L;Ne+=1)ne[Ne]=255&ie[Ne];return ne}function U(ie,L,ne){if(L<0||ie.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<L+(ne||0))throw new RangeError('"length" is outside of buffer bounds');let Ne;return Ne=void 0===L&&void 0===ne?new Uint8Array(ie):void 0===ne?new Uint8Array(ie,L):new Uint8Array(ie,L,ne),Object.setPrototypeOf(Ne,x.prototype),Ne}function M(ie){if(ie>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return 0|ie}function V(ie,L){if(x.isBuffer(ie))return ie.length;if(ArrayBuffer.isView(ie)||Je(ie,ArrayBuffer))return ie.byteLength;if("string"!=typeof ie)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);const ne=ie.length,Ne=arguments.length>2&&!0===arguments[2];if(!Ne&&0===ne)return 0;let ze=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return Re(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return Xe(ie).length;default:if(ze)return Ne?-1:Re(ie).length;L=(""+L).toLowerCase(),ze=!0}}function Q(ie,L,ne){let Ne=!1;if((void 0===L||L<0)&&(L=0),L>this.length||((void 0===ne||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(L>>>=0))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return Ge(this,L,ne);case"utf8":case"utf-8":return me(this,L,ne);case"ascii":return qe(this,L,ne);case"latin1":case"binary":return De(this,L,ne);case"base64":return ue(this,L,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,L,ne);default:if(Ne)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),Ne=!0}}function Y(ie,L,ne){const Ne=ie[L];ie[L]=ie[ne],ie[ne]=Ne}function fe(ie,L,ne,Ne,ze){if(0===ie.length)return-1;if("string"==typeof ne?(Ne=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),Ct(ne=+ne)&&(ne=ze?0:ie.length-1),ne<0&&(ne=ie.length+ne),ne>=ie.length){if(ze)return-1;ne=ie.length-1}else if(ne<0){if(!ze)return-1;ne=0}if("string"==typeof L&&(L=x.from(L,Ne)),x.isBuffer(L))return 0===L.length?-1:J(ie,L,ne,Ne,ze);if("number"==typeof L)return L&=255,"function"==typeof Uint8Array.prototype.indexOf?ze?Uint8Array.prototype.indexOf.call(ie,L,ne):Uint8Array.prototype.lastIndexOf.call(ie,L,ne):J(ie,[L],ne,Ne,ze);throw new TypeError("val must be string, number or Buffer")}function J(ie,L,ne,Ne,ze){let Yt,et=1,Tt=ie.length,Zt=L.length;if(void 0!==Ne&&("ucs2"===(Ne=String(Ne).toLowerCase())||"ucs-2"===Ne||"utf16le"===Ne||"utf-16le"===Ne)){if(ie.length<2||L.length<2)return-1;et=2,Tt/=2,Zt/=2,ne/=2}function gn(on,Xt){return 1===et?on[Xt]:on.readUInt16BE(Xt*et)}if(ze){let on=-1;for(Yt=ne;Yt<Tt;Yt++)if(gn(ie,Yt)===gn(L,-1===on?0:Yt-on)){if(-1===on&&(on=Yt),Yt-on+1===Zt)return on*et}else-1!==on&&(Yt-=Yt-on),on=-1}else for(ne+Zt>Tt&&(ne=Tt-Zt),Yt=ne;Yt>=0;Yt--){let on=!0;for(let Xt=0;Xt<Zt;Xt++)if(gn(ie,Yt+Xt)!==gn(L,Xt)){on=!1;break}if(on)return Yt}return-1}function ee(ie,L,ne,Ne){ne=Number(ne)||0;const ze=ie.length-ne;Ne?(Ne=Number(Ne))>ze&&(Ne=ze):Ne=ze;const et=L.length;let Tt;for(Ne>et/2&&(Ne=et/2),Tt=0;Tt<Ne;++Tt){const Zt=parseInt(L.substr(2*Tt,2),16);if(Ct(Zt))return Tt;ie[ne+Tt]=Zt}return Tt}function G(ie,L,ne,Ne){return Ke(Re(L,ie.length-ne),ie,ne,Ne)}function E(ie,L,ne,Ne){return Ke(function Se(ie){const L=[];for(let ne=0;ne<ie.length;++ne)L.push(255&ie.charCodeAt(ne));return L}(L),ie,ne,Ne)}function te(ie,L,ne,Ne){return Ke(Xe(L),ie,ne,Ne)}function $(ie,L,ne,Ne){return Ke(function Qe(ie,L){let ne,Ne,ze;const et=[];for(let Tt=0;Tt<ie.length&&!((L-=2)<0);++Tt)ne=ie.charCodeAt(Tt),Ne=ne>>8,ze=ne%256,et.push(ze),et.push(Ne);return et}(L,ie.length-ne),ie,ne,Ne)}function ue(ie,L,ne){return e.fromByteArray(0===L&&ne===ie.length?ie:ie.slice(L,ne))}function me(ie,L,ne){ne=Math.min(ie.length,ne);const Ne=[];let ze=L;for(;ze<ne;){const et=ie[ze];let Tt=null,Zt=et>239?4:et>223?3:et>191?2:1;if(ze+Zt<=ne){let gn,Yt,on,Xt;switch(Zt){case 1:et<128&&(Tt=et);break;case 2:gn=ie[ze+1],128==(192&gn)&&(Xt=(31&et)<<6|63&gn,Xt>127&&(Tt=Xt));break;case 3:gn=ie[ze+1],Yt=ie[ze+2],128==(192&gn)&&128==(192&Yt)&&(Xt=(15&et)<<12|(63&gn)<<6|63&Yt,Xt>2047&&(Xt<55296||Xt>57343)&&(Tt=Xt));break;case 4:gn=ie[ze+1],Yt=ie[ze+2],on=ie[ze+3],128==(192&gn)&&128==(192&Yt)&&128==(192&on)&&(Xt=(15&et)<<18|(63&gn)<<12|(63&Yt)<<6|63&on,Xt>65535&&Xt<1114112&&(Tt=Xt))}}null===Tt?(Tt=65533,Zt=1):Tt>65535&&(Tt-=65536,Ne.push(Tt>>>10&1023|55296),Tt=56320|1023&Tt),Ne.push(Tt),ze+=Zt}return function ye(ie){const L=ie.length;if(L<=4096)return String.fromCharCode.apply(String,ie);let ne="",Ne=0;for(;Ne<L;)ne+=String.fromCharCode.apply(String,ie.slice(Ne,Ne+=4096));return ne}(Ne)}function qe(ie,L,ne){let Ne="";ne=Math.min(ie.length,ne);for(let ze=L;ze<ne;++ze)Ne+=String.fromCharCode(127&ie[ze]);return Ne}function De(ie,L,ne){let Ne="";ne=Math.min(ie.length,ne);for(let ze=L;ze<ne;++ze)Ne+=String.fromCharCode(ie[ze]);return Ne}function Ge(ie,L,ne){const Ne=ie.length;(!L||L<0)&&(L=0),(!ne||ne<0||ne>Ne)&&(ne=Ne);let ze="";for(let et=L;et<ne;++et)ze+=ht[ie[et]];return ze}function ve(ie,L,ne){const Ne=ie.slice(L,ne);let ze="";for(let et=0;et<Ne.length-1;et+=2)ze+=String.fromCharCode(Ne[et]+256*Ne[et+1]);return ze}function c(ie,L,ne){if(ie%1!=0||ie<0)throw new RangeError("offset is not uint");if(ie+L>ne)throw new RangeError("Trying to access beyond buffer length")}function tt(ie,L,ne,Ne,ze,et){if(!x.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>ze||L<et)throw new RangeError('"value" argument is out of bounds');if(ne+Ne>ie.length)throw new RangeError("Index out of range")}function _t(ie,L,ne,Ne,ze){j(L,Ne,ze,ie,ne,7);let et=Number(L&BigInt(4294967295));ie[ne++]=et,et>>=8,ie[ne++]=et,et>>=8,ie[ne++]=et,et>>=8,ie[ne++]=et;let Tt=Number(L>>BigInt(32)&BigInt(4294967295));return ie[ne++]=Tt,Tt>>=8,ie[ne++]=Tt,Tt>>=8,ie[ne++]=Tt,Tt>>=8,ie[ne++]=Tt,ne}function ct(ie,L,ne,Ne,ze){j(L,Ne,ze,ie,ne,7);let et=Number(L&BigInt(4294967295));ie[ne+7]=et,et>>=8,ie[ne+6]=et,et>>=8,ie[ne+5]=et,et>>=8,ie[ne+4]=et;let Tt=Number(L>>BigInt(32)&BigInt(4294967295));return ie[ne+3]=Tt,Tt>>=8,ie[ne+2]=Tt,Tt>>=8,ie[ne+1]=Tt,Tt>>=8,ie[ne]=Tt,ne+8}function rt(ie,L,ne,Ne,ze,et){if(ne+Ne>ie.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function ft(ie,L,ne,Ne,ze){return L=+L,ne>>>=0,ze||rt(ie,0,ne,4),h.write(ie,L,ne,Ne,23,4),ne+4}function qt(ie,L,ne,Ne,ze){return L=+L,ne>>>=0,ze||rt(ie,0,ne,8),h.write(ie,L,ne,Ne,52,8),ne+8}!(x.TYPED_ARRAY_SUPPORT=function w(){try{const ie=new Uint8Array(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,Uint8Array.prototype),Object.setPrototypeOf(ie,L),42===ie.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(x.prototype,"parent",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.buffer}}),Object.defineProperty(x.prototype,"offset",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.byteOffset}}),x.poolSize=8192,x.from=function(ie,L,ne){return b(ie,L,ne)},Object.setPrototypeOf(x.prototype,Uint8Array.prototype),Object.setPrototypeOf(x,Uint8Array),x.alloc=function(ie,L,ne){return function N(ie,L,ne){return g(ie),ie<=0?f(ie):void 0!==L?"string"==typeof ne?f(ie).fill(L,ne):f(ie).fill(L):f(ie)}(ie,L,ne)},x.allocUnsafe=function(ie){return R(ie)},x.allocUnsafeSlow=function(ie){return R(ie)},x.isBuffer=function(L){return null!=L&&!0===L._isBuffer&&L!==x.prototype},x.compare=function(L,ne){if(Je(L,Uint8Array)&&(L=x.from(L,L.offset,L.byteLength)),Je(ne,Uint8Array)&&(ne=x.from(ne,ne.offset,ne.byteLength)),!x.isBuffer(L)||!x.isBuffer(ne))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===ne)return 0;let Ne=L.length,ze=ne.length;for(let et=0,Tt=Math.min(Ne,ze);et<Tt;++et)if(L[et]!==ne[et]){Ne=L[et],ze=ne[et];break}return Ne<ze?-1:ze<Ne?1:0},x.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.concat=function(L,ne){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(0===L.length)return x.alloc(0);let Ne;if(void 0===ne)for(ne=0,Ne=0;Ne<L.length;++Ne)ne+=L[Ne].length;const ze=x.allocUnsafe(ne);let et=0;for(Ne=0;Ne<L.length;++Ne){let Tt=L[Ne];if(Je(Tt,Uint8Array))et+Tt.length>ze.length?(x.isBuffer(Tt)||(Tt=x.from(Tt)),Tt.copy(ze,et)):Uint8Array.prototype.set.call(ze,Tt,et);else{if(!x.isBuffer(Tt))throw new TypeError('"list" argument must be an Array of Buffers');Tt.copy(ze,et)}et+=Tt.length}return ze},x.byteLength=V,x.prototype._isBuffer=!0,x.prototype.swap16=function(){const L=this.length;if(L%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ne=0;ne<L;ne+=2)Y(this,ne,ne+1);return this},x.prototype.swap32=function(){const L=this.length;if(L%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ne=0;ne<L;ne+=4)Y(this,ne,ne+3),Y(this,ne+1,ne+2);return this},x.prototype.swap64=function(){const L=this.length;if(L%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ne=0;ne<L;ne+=8)Y(this,ne,ne+7),Y(this,ne+1,ne+6),Y(this,ne+2,ne+5),Y(this,ne+3,ne+4);return this},x.prototype.toLocaleString=x.prototype.toString=function(){const L=this.length;return 0===L?"":0===arguments.length?me(this,0,L):Q.apply(this,arguments)},x.prototype.equals=function(L){if(!x.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L||0===x.compare(this,L)},x.prototype.inspect=function(){let L="";const ne=_e.h2;return L=this.toString("hex",0,ne).replace(/(.{2})/g,"$1 ").trim(),this.length>ne&&(L+=" ... "),"<Buffer "+L+">"},S&&(x.prototype[S]=x.prototype.inspect),x.prototype.compare=function(L,ne,Ne,ze,et){if(Je(L,Uint8Array)&&(L=x.from(L,L.offset,L.byteLength)),!x.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(void 0===ne&&(ne=0),void 0===Ne&&(Ne=L?L.length:0),void 0===ze&&(ze=0),void 0===et&&(et=this.length),ne<0||Ne>L.length||ze<0||et>this.length)throw new RangeError("out of range index");if(ze>=et&&ne>=Ne)return 0;if(ze>=et)return-1;if(ne>=Ne)return 1;if(this===L)return 0;let Tt=(et>>>=0)-(ze>>>=0),Zt=(Ne>>>=0)-(ne>>>=0);const gn=Math.min(Tt,Zt),Yt=this.slice(ze,et),on=L.slice(ne,Ne);for(let Xt=0;Xt<gn;++Xt)if(Yt[Xt]!==on[Xt]){Tt=Yt[Xt],Zt=on[Xt];break}return Tt<Zt?-1:Zt<Tt?1:0},x.prototype.includes=function(L,ne,Ne){return-1!==this.indexOf(L,ne,Ne)},x.prototype.indexOf=function(L,ne,Ne){return fe(this,L,ne,Ne,!0)},x.prototype.lastIndexOf=function(L,ne,Ne){return fe(this,L,ne,Ne,!1)},x.prototype.write=function(L,ne,Ne,ze){if(void 0===ne)ze="utf8",Ne=this.length,ne=0;else if(void 0===Ne&&"string"==typeof ne)ze=ne,Ne=this.length,ne=0;else{if(!isFinite(ne))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ne>>>=0,isFinite(Ne)?(Ne>>>=0,void 0===ze&&(ze="utf8")):(ze=Ne,Ne=void 0)}const et=this.length-ne;if((void 0===Ne||Ne>et)&&(Ne=et),L.length>0&&(Ne<0||ne<0)||ne>this.length)throw new RangeError("Attempt to write outside buffer bounds");ze||(ze="utf8");let Tt=!1;for(;;)switch(ze){case"hex":return ee(this,L,ne,Ne);case"utf8":case"utf-8":return G(this,L,ne,Ne);case"ascii":case"latin1":case"binary":return E(this,L,ne,Ne);case"base64":return te(this,L,ne,Ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,L,ne,Ne);default:if(Tt)throw new TypeError("Unknown encoding: "+ze);ze=(""+ze).toLowerCase(),Tt=!0}},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},x.prototype.slice=function(L,ne){const Ne=this.length;(L=~~L)<0?(L+=Ne)<0&&(L=0):L>Ne&&(L=Ne),(ne=void 0===ne?Ne:~~ne)<0?(ne+=Ne)<0&&(ne=0):ne>Ne&&(ne=Ne),ne<L&&(ne=L);const ze=this.subarray(L,ne);return Object.setPrototypeOf(ze,x.prototype),ze},x.prototype.readUintLE=x.prototype.readUIntLE=function(L,ne,Ne){L>>>=0,ne>>>=0,Ne||c(L,ne,this.length);let ze=this[L],et=1,Tt=0;for(;++Tt<ne&&(et*=256);)ze+=this[L+Tt]*et;return ze},x.prototype.readUintBE=x.prototype.readUIntBE=function(L,ne,Ne){L>>>=0,ne>>>=0,Ne||c(L,ne,this.length);let ze=this[L+--ne],et=1;for(;ne>0&&(et*=256);)ze+=this[L+--ne]*et;return ze},x.prototype.readUint8=x.prototype.readUInt8=function(L,ne){return L>>>=0,ne||c(L,1,this.length),this[L]},x.prototype.readUint16LE=x.prototype.readUInt16LE=function(L,ne){return L>>>=0,ne||c(L,2,this.length),this[L]|this[L+1]<<8},x.prototype.readUint16BE=x.prototype.readUInt16BE=function(L,ne){return L>>>=0,ne||c(L,2,this.length),this[L]<<8|this[L+1]},x.prototype.readUint32LE=x.prototype.readUInt32LE=function(L,ne){return L>>>=0,ne||c(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+16777216*this[L+3]},x.prototype.readUint32BE=x.prototype.readUInt32BE=function(L,ne){return L>>>=0,ne||c(L,4,this.length),16777216*this[L]+(this[L+1]<<16|this[L+2]<<8|this[L+3])},x.prototype.readBigUInt64LE=Ze(function(L){ae(L>>>=0,"offset");const ne=this[L],Ne=this[L+7];(void 0===ne||void 0===Ne)&&Be(L,this.length-8);const ze=ne+256*this[++L]+65536*this[++L]+this[++L]*2**24,et=this[++L]+256*this[++L]+65536*this[++L]+Ne*2**24;return BigInt(ze)+(BigInt(et)<<BigInt(32))}),x.prototype.readBigUInt64BE=Ze(function(L){ae(L>>>=0,"offset");const ne=this[L],Ne=this[L+7];(void 0===ne||void 0===Ne)&&Be(L,this.length-8);const ze=ne*2**24+65536*this[++L]+256*this[++L]+this[++L],et=this[++L]*2**24+65536*this[++L]+256*this[++L]+Ne;return(BigInt(ze)<<BigInt(32))+BigInt(et)}),x.prototype.readIntLE=function(L,ne,Ne){L>>>=0,ne>>>=0,Ne||c(L,ne,this.length);let ze=this[L],et=1,Tt=0;for(;++Tt<ne&&(et*=256);)ze+=this[L+Tt]*et;return et*=128,ze>=et&&(ze-=Math.pow(2,8*ne)),ze},x.prototype.readIntBE=function(L,ne,Ne){L>>>=0,ne>>>=0,Ne||c(L,ne,this.length);let ze=ne,et=1,Tt=this[L+--ze];for(;ze>0&&(et*=256);)Tt+=this[L+--ze]*et;return et*=128,Tt>=et&&(Tt-=Math.pow(2,8*ne)),Tt},x.prototype.readInt8=function(L,ne){return L>>>=0,ne||c(L,1,this.length),128&this[L]?-1*(255-this[L]+1):this[L]},x.prototype.readInt16LE=function(L,ne){L>>>=0,ne||c(L,2,this.length);const Ne=this[L]|this[L+1]<<8;return 32768&Ne?4294901760|Ne:Ne},x.prototype.readInt16BE=function(L,ne){L>>>=0,ne||c(L,2,this.length);const Ne=this[L+1]|this[L]<<8;return 32768&Ne?4294901760|Ne:Ne},x.prototype.readInt32LE=function(L,ne){return L>>>=0,ne||c(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},x.prototype.readInt32BE=function(L,ne){return L>>>=0,ne||c(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},x.prototype.readBigInt64LE=Ze(function(L){ae(L>>>=0,"offset");const ne=this[L],Ne=this[L+7];return(void 0===ne||void 0===Ne)&&Be(L,this.length-8),(BigInt(this[L+4]+256*this[L+5]+65536*this[L+6]+(Ne<<24))<<BigInt(32))+BigInt(ne+256*this[++L]+65536*this[++L]+this[++L]*2**24)}),x.prototype.readBigInt64BE=Ze(function(L){ae(L>>>=0,"offset");const ne=this[L],Ne=this[L+7];(void 0===ne||void 0===Ne)&&Be(L,this.length-8);const ze=(ne<<24)+65536*this[++L]+256*this[++L]+this[++L];return(BigInt(ze)<<BigInt(32))+BigInt(this[++L]*2**24+65536*this[++L]+256*this[++L]+Ne)}),x.prototype.readFloatLE=function(L,ne){return L>>>=0,ne||c(L,4,this.length),h.read(this,L,!0,23,4)},x.prototype.readFloatBE=function(L,ne){return L>>>=0,ne||c(L,4,this.length),h.read(this,L,!1,23,4)},x.prototype.readDoubleLE=function(L,ne){return L>>>=0,ne||c(L,8,this.length),h.read(this,L,!0,52,8)},x.prototype.readDoubleBE=function(L,ne){return L>>>=0,ne||c(L,8,this.length),h.read(this,L,!1,52,8)},x.prototype.writeUintLE=x.prototype.writeUIntLE=function(L,ne,Ne,ze){L=+L,ne>>>=0,Ne>>>=0,ze||tt(this,L,ne,Ne,Math.pow(2,8*Ne)-1,0);let et=1,Tt=0;for(this[ne]=255&L;++Tt<Ne&&(et*=256);)this[ne+Tt]=L/et&255;return ne+Ne},x.prototype.writeUintBE=x.prototype.writeUIntBE=function(L,ne,Ne,ze){L=+L,ne>>>=0,Ne>>>=0,ze||tt(this,L,ne,Ne,Math.pow(2,8*Ne)-1,0);let et=Ne-1,Tt=1;for(this[ne+et]=255&L;--et>=0&&(Tt*=256);)this[ne+et]=L/Tt&255;return ne+Ne},x.prototype.writeUint8=x.prototype.writeUInt8=function(L,ne,Ne){return L=+L,ne>>>=0,Ne||tt(this,L,ne,1,255,0),this[ne]=255&L,ne+1},x.prototype.writeUint16LE=x.prototype.writeUInt16LE=function(L,ne,Ne){return L=+L,ne>>>=0,Ne||tt(this,L,ne,2,65535,0),this[ne]=255&L,this[ne+1]=L>>>8,ne+2},x.prototype.writeUint16BE=x.prototype.writeUInt16BE=function(L,ne,Ne){return L=+L,ne>>>=0,Ne||tt(this,L,ne,2,65535,0),this[ne]=L>>>8,this[ne+1]=255&L,ne+2},x.prototype.writeUint32LE=x.prototype.writeUInt32LE=function(L,ne,Ne){return L=+L,ne>>>=0,Ne||tt(this,L,ne,4,4294967295,0),this[ne+3]=L>>>24,this[ne+2]=L>>>16,this[ne+1]=L>>>8,this[ne]=255&L,ne+4},x.prototype.writeUint32BE=x.prototype.writeUInt32BE=function(L,ne,Ne){return L=+L,ne>>>=0,Ne||tt(this,L,ne,4,4294967295,0),this[ne]=L>>>24,this[ne+1]=L>>>16,this[ne+2]=L>>>8,this[ne+3]=255&L,ne+4},x.prototype.writeBigUInt64LE=Ze(function(L,ne=0){return _t(this,L,ne,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeBigUInt64BE=Ze(function(L,ne=0){return ct(this,L,ne,BigInt(0),BigInt("0xffffffffffffffff"))}),x.prototype.writeIntLE=function(L,ne,Ne,ze){if(L=+L,ne>>>=0,!ze){const gn=Math.pow(2,8*Ne-1);tt(this,L,ne,Ne,gn-1,-gn)}let et=0,Tt=1,Zt=0;for(this[ne]=255&L;++et<Ne&&(Tt*=256);)L<0&&0===Zt&&0!==this[ne+et-1]&&(Zt=1),this[ne+et]=(L/Tt>>0)-Zt&255;return ne+Ne},x.prototype.writeIntBE=function(L,ne,Ne,ze){if(L=+L,ne>>>=0,!ze){const gn=Math.pow(2,8*Ne-1);tt(this,L,ne,Ne,gn-1,-gn)}let et=Ne-1,Tt=1,Zt=0;for(this[ne+et]=255&L;--et>=0&&(Tt*=256);)L<0&&0===Zt&&0!==this[ne+et+1]&&(Zt=1),this[ne+et]=(L/Tt>>0)-Zt&255;return ne+Ne},x.prototype.writeInt8=function(L,ne,Ne){return L=+L,ne>>>=0,Ne||tt(this,L,ne,1,127,-128),L<0&&(L=255+L+1),this[ne]=255&L,ne+1},x.prototype.writeInt16LE=function(L,ne,Ne){return L=+L,ne>>>=0,Ne||tt(this,L,ne,2,32767,-32768),this[ne]=255&L,this[ne+1]=L>>>8,ne+2},x.prototype.writeInt16BE=function(L,ne,Ne){return L=+L,ne>>>=0,Ne||tt(this,L,ne,2,32767,-32768),this[ne]=L>>>8,this[ne+1]=255&L,ne+2},x.prototype.writeInt32LE=function(L,ne,Ne){return L=+L,ne>>>=0,Ne||tt(this,L,ne,4,2147483647,-2147483648),this[ne]=255&L,this[ne+1]=L>>>8,this[ne+2]=L>>>16,this[ne+3]=L>>>24,ne+4},x.prototype.writeInt32BE=function(L,ne,Ne){return L=+L,ne>>>=0,Ne||tt(this,L,ne,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[ne]=L>>>24,this[ne+1]=L>>>16,this[ne+2]=L>>>8,this[ne+3]=255&L,ne+4},x.prototype.writeBigInt64LE=Ze(function(L,ne=0){return _t(this,L,ne,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),x.prototype.writeBigInt64BE=Ze(function(L,ne=0){return ct(this,L,ne,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),x.prototype.writeFloatLE=function(L,ne,Ne){return ft(this,L,ne,!0,Ne)},x.prototype.writeFloatBE=function(L,ne,Ne){return ft(this,L,ne,!1,Ne)},x.prototype.writeDoubleLE=function(L,ne,Ne){return qt(this,L,ne,!0,Ne)},x.prototype.writeDoubleBE=function(L,ne,Ne){return qt(this,L,ne,!1,Ne)},x.prototype.copy=function(L,ne,Ne,ze){if(!x.isBuffer(L))throw new TypeError("argument should be a Buffer");if(Ne||(Ne=0),!ze&&0!==ze&&(ze=this.length),ne>=L.length&&(ne=L.length),ne||(ne=0),ze>0&&ze<Ne&&(ze=Ne),ze===Ne||0===L.length||0===this.length)return 0;if(ne<0)throw new RangeError("targetStart out of bounds");if(Ne<0||Ne>=this.length)throw new RangeError("Index out of range");if(ze<0)throw new RangeError("sourceEnd out of bounds");ze>this.length&&(ze=this.length),L.length-ne<ze-Ne&&(ze=L.length-ne+Ne);const et=ze-Ne;return this===L&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(ne,Ne,ze):Uint8Array.prototype.set.call(L,this.subarray(Ne,ze),ne),et},x.prototype.fill=function(L,ne,Ne,ze){if("string"==typeof L){if("string"==typeof ne?(ze=ne,ne=0,Ne=this.length):"string"==typeof Ne&&(ze=Ne,Ne=this.length),void 0!==ze&&"string"!=typeof ze)throw new TypeError("encoding must be a string");if("string"==typeof ze&&!x.isEncoding(ze))throw new TypeError("Unknown encoding: "+ze);if(1===L.length){const Tt=L.charCodeAt(0);("utf8"===ze&&Tt<128||"latin1"===ze)&&(L=Tt)}}else"number"==typeof L?L&=255:"boolean"==typeof L&&(L=Number(L));if(ne<0||this.length<ne||this.length<Ne)throw new RangeError("Out of range index");if(Ne<=ne)return this;let et;if(ne>>>=0,Ne=void 0===Ne?this.length:Ne>>>0,L||(L=0),"number"==typeof L)for(et=ne;et<Ne;++et)this[et]=L;else{const Tt=x.isBuffer(L)?L:x.from(L,ze),Zt=Tt.length;if(0===Zt)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(et=0;et<Ne-ne;++et)this[et+ne]=Tt[et%Zt]}return this};const en={};function xt(ie,L,ne){en[ie]=class extends ne{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ie}]`,delete this.name}get code(){return ie}set code(ze){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ze,writable:!0})}toString(){return`${this.name} [${ie}]: ${this.message}`}}}function Dt(ie){let L="",ne=ie.length;const Ne="-"===ie[0]?1:0;for(;ne>=Ne+4;ne-=3)L=`_${ie.slice(ne-3,ne)}${L}`;return`${ie.slice(0,ne)}${L}`}function j(ie,L,ne,Ne,ze,et){if(ie>ne||ie<L){const Tt="bigint"==typeof L?"n":"";let Zt;throw Zt=et>3?0===L||L===BigInt(0)?`>= 0${Tt} and < 2${Tt} ** ${8*(et+1)}${Tt}`:`>= -(2${Tt} ** ${8*(et+1)-1}${Tt}) and < 2 ** ${8*(et+1)-1}${Tt}`:`>= ${L}${Tt} and <= ${ne}${Tt}`,new en.ERR_OUT_OF_RANGE("value",Zt,ie)}!function X(ie,L,ne){ae(L,"offset"),(void 0===ie[L]||void 0===ie[L+ne])&&Be(L,ie.length-(ne+1))}(Ne,ze,et)}function ae(ie,L){if("number"!=typeof ie)throw new en.ERR_INVALID_ARG_TYPE(L,"number",ie)}function Be(ie,L,ne){throw Math.floor(ie)!==ie?(ae(ie,ne),new en.ERR_OUT_OF_RANGE(ne||"offset","an integer",ie)):L<0?new en.ERR_BUFFER_OUT_OF_BOUNDS:new en.ERR_OUT_OF_RANGE(ne||"offset",`>= ${ne?1:0} and <= ${L}`,ie)}xt("ERR_BUFFER_OUT_OF_BOUNDS",function(ie){return ie?`${ie} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xt("ERR_INVALID_ARG_TYPE",function(ie,L){return`The "${ie}" argument must be of type number. Received type ${typeof L}`},TypeError),xt("ERR_OUT_OF_RANGE",function(ie,L,ne){let Ne=`The value of "${ie}" is out of range.`,ze=ne;return Number.isInteger(ne)&&Math.abs(ne)>2**32?ze=Dt(String(ne)):"bigint"==typeof ne&&(ze=String(ne),(ne>BigInt(2)**BigInt(32)||ne<-(BigInt(2)**BigInt(32)))&&(ze=Dt(ze)),ze+="n"),Ne+=` It must be ${L}. Received ${ze}`,Ne},RangeError);const je=/[^+/0-9A-Za-z-_]/g;function Re(ie,L){let ne;L=L||1/0;const Ne=ie.length;let ze=null;const et=[];for(let Tt=0;Tt<Ne;++Tt){if(ne=ie.charCodeAt(Tt),ne>55295&&ne<57344){if(!ze){if(ne>56319){(L-=3)>-1&&et.push(239,191,189);continue}if(Tt+1===Ne){(L-=3)>-1&&et.push(239,191,189);continue}ze=ne;continue}if(ne<56320){(L-=3)>-1&&et.push(239,191,189),ze=ne;continue}ne=65536+(ze-55296<<10|ne-56320)}else ze&&(L-=3)>-1&&et.push(239,191,189);if(ze=null,ne<128){if((L-=1)<0)break;et.push(ne)}else if(ne<2048){if((L-=2)<0)break;et.push(ne>>6|192,63&ne|128)}else if(ne<65536){if((L-=3)<0)break;et.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if((L-=4)<0)break;et.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return et}function Xe(ie){return e.toByteArray(function ke(ie){if((ie=(ie=ie.split("=")[0]).trim().replace(je,"")).length<2)return"";for(;ie.length%4!=0;)ie+="=";return ie}(ie))}function Ke(ie,L,ne,Ne){let ze;for(ze=0;ze<Ne&&!(ze+ne>=L.length||ze>=ie.length);++ze)L[ze+ne]=ie[ze];return ze}function Je(ie,L){return ie instanceof L||null!=ie&&null!=ie.constructor&&null!=ie.constructor.name&&ie.constructor.name===L.name}function Ct(ie){return ie!=ie}const ht=function(){const ie="0123456789abcdef",L=new Array(256);for(let ne=0;ne<16;++ne){const Ne=16*ne;for(let ze=0;ze<16;++ze)L[Ne+ze]=ie[ne]+ie[ze]}return L}();function Ze(ie){return typeof BigInt>"u"?oe:ie}function oe(){throw new Error("BigInt not supported")}},8461:(nt,_e)=>{_e.read=function(m,n,e,h,S){var y,w,f=8*S-h-1,x=(1<<f)-1,b=x>>1,g=-7,N=e?S-1:0,R=e?-1:1,k=m[n+N];for(N+=R,y=k&(1<<-g)-1,k>>=-g,g+=f;g>0;y=256*y+m[n+N],N+=R,g-=8);for(w=y&(1<<-g)-1,y>>=-g,g+=h;g>0;w=256*w+m[n+N],N+=R,g-=8);if(0===y)y=1-b;else{if(y===x)return w?NaN:1/0*(k?-1:1);w+=Math.pow(2,h),y-=b}return(k?-1:1)*w*Math.pow(2,y-h)},_e.write=function(m,n,e,h,S,y){var w,f,x,b=8*y-S-1,g=(1<<b)-1,N=g>>1,R=23===S?Math.pow(2,-24)-Math.pow(2,-77):0,k=h?0:y-1,O=h?1:-1,P=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(f=isNaN(n)?1:0,w=g):(w=Math.floor(Math.log(n)/Math.LN2),n*(x=Math.pow(2,-w))<1&&(w--,x*=2),(n+=w+N>=1?R/x:R*Math.pow(2,1-N))*x>=2&&(w++,x/=2),w+N>=g?(f=0,w=g):w+N>=1?(f=(n*x-1)*Math.pow(2,S),w+=N):(f=n*Math.pow(2,N-1)*Math.pow(2,S),w=0));S>=8;m[e+k]=255&f,k+=O,f/=256,S-=8);for(w=w<<S|f,b+=S;b>0;m[e+k]=255&w,k+=O,w/=256,b-=8);m[e+k-O]|=128*P}},1298:(nt,_e,m)=>{var n=m(8659);function e(O,P){n.cipher.registerAlgorithm(O,function(){return new n.aes.Algorithm(O,P)})}m(3311),m(3481),m(4747),nt.exports=n.aes=n.aes||{},n.aes.startEncrypting=function(O,P,U,W){var M=k({key:O,output:U,decrypt:!1,mode:W});return M.start(P),M},n.aes.createEncryptionCipher=function(O,P){return k({key:O,output:null,decrypt:!1,mode:P})},n.aes.startDecrypting=function(O,P,U,W){var M=k({key:O,output:U,decrypt:!0,mode:W});return M.start(P),M},n.aes.createDecryptionCipher=function(O,P){return k({key:O,output:null,decrypt:!0,mode:P})},n.aes.Algorithm=function(O,P){h||g();var U=this;U.name=O,U.mode=new P({blockSize:16,cipher:{encrypt:function(W,M){return R(U._w,W,M,!1)},decrypt:function(W,M){return R(U._w,W,M,!0)}}}),U._init=!1},n.aes.Algorithm.prototype.initialize=function(O){if(!this._init){var U,P=O.key;if("string"!=typeof P||16!==P.length&&24!==P.length&&32!==P.length){if(n.util.isArray(P)&&(16===P.length||24===P.length||32===P.length)){U=P,P=n.util.createBuffer();for(var W=0;W<U.length;++W)P.putByte(U[W])}}else P=n.util.createBuffer(P);if(!n.util.isArray(P)){U=P,P=[];var M=U.length();if(16===M||24===M||32===M)for(M>>>=2,W=0;W<M;++W)P.push(U.getInt32())}if(!n.util.isArray(P)||4!==P.length&&6!==P.length&&8!==P.length)throw new Error("Invalid key parameter.");var V=-1!==["CFB","OFB","CTR","GCM"].indexOf(this.mode.name);this._w=N(P,O.decrypt&&!V),this._init=!0}},n.aes._expandKey=function(O,P){return h||g(),N(O,P)},n.aes._updateBlock=R,e("AES-ECB",n.cipher.modes.ecb),e("AES-CBC",n.cipher.modes.cbc),e("AES-CFB",n.cipher.modes.cfb),e("AES-OFB",n.cipher.modes.ofb),e("AES-CTR",n.cipher.modes.ctr),e("AES-GCM",n.cipher.modes.gcm);var y,w,f,x,b,h=!1;function g(){h=!0,f=[0,1,2,4,8,16,32,64,128,27,54];for(var O=new Array(256),P=0;P<128;++P)O[P]=P<<1,O[P+128]=P+128<<1^283;for(y=new Array(256),w=new Array(256),x=new Array(4),b=new Array(4),P=0;P<4;++P)x[P]=new Array(256),b[P]=new Array(256);var M,B,V,Q,Y,fe,J,U=0,W=0;for(P=0;P<256;++P){y[U]=Q=(Q=W^W<<1^W<<2^W<<3^W<<4)>>8^255&Q^99,w[Q]=U,fe=(Y=O[Q])<<24^Q<<16^Q<<8^Q^Y,J=((M=O[U])^(B=O[M])^(V=O[B]))<<24^(U^V)<<16^(U^B^V)<<8^U^M^V;for(var ee=0;ee<4;++ee)x[ee][U]=fe,b[ee][Q]=J,fe=fe<<24|fe>>>8,J=J<<24|J>>>8;0===U?U=W=1:(U=M^O[O[O[M^V]]],W^=O[O[W]])}}function N(O,P){for(var W,U=O.slice(0),M=1,B=U.length,Q=4*(B+6+1),Y=B;Y<Q;++Y)W=U[Y-1],Y%B==0?(W=y[W>>>16&255]<<24^y[W>>>8&255]<<16^y[255&W]<<8^y[W>>>24]^f[M]<<24,M++):B>6&&Y%B==4&&(W=y[W>>>24]<<24^y[W>>>16&255]<<16^y[W>>>8&255]<<8^y[255&W]),U[Y]=U[Y-B]^W;if(P){for(var fe,J=b[0],ee=b[1],G=b[2],E=b[3],te=U.slice(0),$=(Y=0,(Q=U.length)-4);Y<Q;Y+=4,$-=4)if(0===Y||Y===Q-4)te[Y]=U[$],te[Y+1]=U[$+3],te[Y+2]=U[$+2],te[Y+3]=U[$+1];else for(var ue=0;ue<4;++ue)te[Y+(3&-ue)]=J[y[(fe=U[$+ue])>>>24]]^ee[y[fe>>>16&255]]^G[y[fe>>>8&255]]^E[y[255&fe]];U=te}return U}function R(O,P,U,W){var B,V,Q,Y,fe,J,ee,G,E,te,$,ue,M=O.length/4-1;W?(B=b[0],V=b[1],Q=b[2],Y=b[3],fe=w):(B=x[0],V=x[1],Q=x[2],Y=x[3],fe=y),J=P[0]^O[0],ee=P[W?3:1]^O[1],G=P[2]^O[2],E=P[W?1:3]^O[3];for(var me=3,we=1;we<M;++we)te=B[J>>>24]^V[ee>>>16&255]^Q[G>>>8&255]^Y[255&E]^O[++me],$=B[ee>>>24]^V[G>>>16&255]^Q[E>>>8&255]^Y[255&J]^O[++me],ue=B[G>>>24]^V[E>>>16&255]^Q[J>>>8&255]^Y[255&ee]^O[++me],E=B[E>>>24]^V[J>>>16&255]^Q[ee>>>8&255]^Y[255&G]^O[++me],J=te,ee=$,G=ue;U[0]=fe[J>>>24]<<24^fe[ee>>>16&255]<<16^fe[G>>>8&255]<<8^fe[255&E]^O[++me],U[W?3:1]=fe[ee>>>24]<<24^fe[G>>>16&255]<<16^fe[E>>>8&255]<<8^fe[255&J]^O[++me],U[2]=fe[G>>>24]<<24^fe[E>>>16&255]<<16^fe[J>>>8&255]<<8^fe[255&ee]^O[++me],U[W?1:3]=fe[E>>>24]<<24^fe[J>>>16&255]<<16^fe[ee>>>8&255]<<8^fe[255&G]^O[++me]}function k(O){var W,U="AES-"+((O=O||{}).mode||"CBC").toUpperCase(),M=(W=O.decrypt?n.cipher.createDecipher(U,O.key):n.cipher.createCipher(U,O.key)).start;return W.start=function(B,V){var Q=null;V instanceof n.util.ByteBuffer&&(Q=V,V={}),(V=V||{}).output=Q,V.iv=B,M.call(W,V)},W}},6683:(nt,_e,m)=>{var n=m(8659);m(1298),m(2266);var e=nt.exports=n.tls;function h(b,g,N){var R=g.entity===n.tls.ConnectionEnd.client;b.read.cipherState={init:!1,cipher:n.cipher.createDecipher("AES-CBC",R?N.keys.server_write_key:N.keys.client_write_key),iv:R?N.keys.server_write_IV:N.keys.client_write_IV},b.write.cipherState={init:!1,cipher:n.cipher.createCipher("AES-CBC",R?N.keys.client_write_key:N.keys.server_write_key),iv:R?N.keys.client_write_IV:N.keys.server_write_IV},b.read.cipherFunction=f,b.write.cipherFunction=S,b.read.macLength=b.write.macLength=N.mac_length,b.read.macFunction=b.write.macFunction=e.hmac_sha1}function S(b,g){var k,N=!1,R=g.macFunction(g.macKey,g.sequenceNumber,b);b.fragment.putBytes(R),g.updateSequenceNumber(),k=b.version.minor===e.Versions.TLS_1_0.minor?g.cipherState.init?null:g.cipherState.iv:n.random.getBytesSync(16),g.cipherState.init=!0;var O=g.cipherState.cipher;return O.start({iv:k}),b.version.minor>=e.Versions.TLS_1_1.minor&&O.output.putBytes(k),O.update(b.fragment),O.finish(y)&&(b.fragment=O.output,b.length=b.fragment.length(),N=!0),N}function y(b,g,N){if(!N){var R=b-g.length()%b;g.fillWithByte(R-1,R)}return!0}function w(b,g,N){var R=!0;if(N){for(var k=g.length(),O=g.last(),P=k-1-O;P<k-1;++P)R=R&&g.at(P)==O;R&&g.truncate(O+1)}return R}function f(b,g){var R,N=!1;R=b.version.minor===e.Versions.TLS_1_0.minor?g.cipherState.init?null:g.cipherState.iv:b.fragment.getBytes(16),g.cipherState.init=!0;var k=g.cipherState.cipher;k.start({iv:R}),k.update(b.fragment),N=k.finish(w);var O=g.macLength,P=n.random.getBytesSync(O),U=k.output.length();U>=O?(b.fragment=k.output.getBytes(U-O),P=k.output.getBytes(O)):b.fragment=k.output.getBytes(),b.fragment=n.util.createBuffer(b.fragment),b.length=b.fragment.length();var W=g.macFunction(g.macKey,g.sequenceNumber,b);return g.updateSequenceNumber(),N=function x(b,g,N){var R=n.hmac.create();return R.start("SHA1",b),R.update(g),g=R.digest().getBytes(),R.start(null,null),R.update(N),g===(N=R.digest().getBytes())}(g.macKey,P,W)&&N,N}e.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(b){b.bulk_cipher_algorithm=e.BulkCipherAlgorithm.aes,b.cipher_type=e.CipherType.block,b.enc_key_length=16,b.block_length=16,b.fixed_iv_length=16,b.record_iv_length=16,b.mac_algorithm=e.MACAlgorithm.hmac_sha1,b.mac_length=20,b.mac_key_length=20},initConnectionState:h},e.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(b){b.bulk_cipher_algorithm=e.BulkCipherAlgorithm.aes,b.cipher_type=e.CipherType.block,b.enc_key_length=32,b.block_length=16,b.fixed_iv_length=16,b.record_iv_length=16,b.mac_algorithm=e.MACAlgorithm.hmac_sha1,b.mac_length=20,b.mac_key_length=20},initConnectionState:h}},8877:(nt,_e,m)=>{var n=m(8659);m(7791);var e=n.asn1;_e.privateKeyValidator={name:"PrivateKeyInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},_e.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}},7791:(nt,_e,m)=>{var n=m(8659);m(4747),m(6078);var e=nt.exports=n.asn1=n.asn1||{};function h(f,x,b){if(b>x){var g=new Error("Too few bytes to parse DER.");throw g.available=f.length(),g.remaining=x,g.requested=b,g}}function y(f,x,b,g){var N;h(f,x,2);var R=f.getByte();x--;var k=192&R,O=31&R;N=f.length();var P=function(f,x){var b=f.getByte();if(x--,128!==b){var g;if(128&b){var R=127&b;h(f,x,R),g=f.getInt(R<<3)}else g=b;if(g<0)throw new Error("Negative length: "+g);return g}}(f,x);if(x-=N-f.length(),void 0!==P&&P>x){if(g.strict){var U=new Error("Too few bytes to read ASN.1 value.");throw U.available=f.length(),U.remaining=x,U.requested=P,U}P=x}var W,M,B=32==(32&R);if(B)if(W=[],void 0===P)for(;;){if(h(f,x,2),f.bytes(2)===String.fromCharCode(0,0)){f.getBytes(2),x-=2;break}N=f.length(),W.push(y(f,x,b+1,g)),x-=N-f.length()}else for(;P>0;)N=f.length(),W.push(y(f,P,b+1,g)),x-=N-f.length(),P-=N-f.length();if(void 0===W&&k===e.Class.UNIVERSAL&&O===e.Type.BITSTRING&&(M=f.bytes(P)),void 0===W&&g.decodeBitStrings&&k===e.Class.UNIVERSAL&&O===e.Type.BITSTRING&&P>1){var V=f.read,Q=x,Y=0;if(O===e.Type.BITSTRING&&(h(f,x,1),Y=f.getByte(),x--),0===Y)try{N=f.length();var J=y(f,x,b+1,{strict:!0,decodeBitStrings:!0}),ee=N-f.length();x-=ee,O==e.Type.BITSTRING&&ee++;var G=J.tagClass;ee===P&&(G===e.Class.UNIVERSAL||G===e.Class.CONTEXT_SPECIFIC)&&(W=[J])}catch{}void 0===W&&(f.read=V,x=Q)}if(void 0===W){if(void 0===P){if(g.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");P=x}if(O===e.Type.BMPSTRING)for(W="";P>0;P-=2)h(f,x,2),W+=String.fromCharCode(f.getInt16()),x-=2;else W=f.getBytes(P),x-=P}return e.create(k,O,B,W,void 0===M?null:{bitStringContents:M})}e.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},e.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},e.create=function(f,x,b,g,N){if(n.util.isArray(g)){for(var R=[],k=0;k<g.length;++k)void 0!==g[k]&&R.push(g[k]);g=R}var O={tagClass:f,type:x,constructed:b,composed:b||n.util.isArray(g),value:g};return N&&"bitStringContents"in N&&(O.bitStringContents=N.bitStringContents,O.original=e.copy(O)),O},e.copy=function(f,x){var b;if(n.util.isArray(f)){b=[];for(var g=0;g<f.length;++g)b.push(e.copy(f[g],x));return b}return"string"==typeof f?f:(b={tagClass:f.tagClass,type:f.type,constructed:f.constructed,composed:f.composed,value:e.copy(f.value,x)},x&&!x.excludeBitStringContents&&(b.bitStringContents=f.bitStringContents),b)},e.equals=function(f,x,b){if(n.util.isArray(f)){if(!n.util.isArray(x)||f.length!==x.length)return!1;for(var g=0;g<f.length;++g)if(!e.equals(f[g],x[g]))return!1;return!0}if(typeof f!=typeof x)return!1;if("string"==typeof f)return f===x;var N=f.tagClass===x.tagClass&&f.type===x.type&&f.constructed===x.constructed&&f.composed===x.composed&&e.equals(f.value,x.value);return b&&b.includeBitStringContents&&(N=N&&f.bitStringContents===x.bitStringContents),N},e.getBerValueLength=function(f){var x=f.getByte();if(128!==x)return 128&x?f.getInt((127&x)<<3):x},e.fromDer=function(f,x){void 0===x&&(x={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof x&&(x={strict:x,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in x||(x.strict=!0),"parseAllBytes"in x||(x.parseAllBytes=!0),"decodeBitStrings"in x||(x.decodeBitStrings=!0),"string"==typeof f&&(f=n.util.createBuffer(f));var b=f.length(),g=y(f,f.length(),0,x);if(x.parseAllBytes&&0!==f.length()){var N=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw N.byteCount=b,N.remaining=f.length(),N}return g},e.toDer=function(f){var x=n.util.createBuffer(),b=f.tagClass|f.type,g=n.util.createBuffer(),N=!1;if("bitStringContents"in f&&(N=!0,f.original&&(N=e.equals(f,f.original))),N)g.putBytes(f.bitStringContents);else if(f.composed){f.constructed?b|=32:g.putByte(0);for(var R=0;R<f.value.length;++R)void 0!==f.value[R]&&g.putBuffer(e.toDer(f.value[R]))}else if(f.type===e.Type.BMPSTRING)for(R=0;R<f.value.length;++R)g.putInt16(f.value.charCodeAt(R));else f.type===e.Type.INTEGER&&f.value.length>1&&(0===f.value.charCodeAt(0)&&0==(128&f.value.charCodeAt(1))||255===f.value.charCodeAt(0)&&128==(128&f.value.charCodeAt(1)))?g.putBytes(f.value.substr(1)):g.putBytes(f.value);if(x.putByte(b),g.length()<=127)x.putByte(127&g.length());else{var k=g.length(),O="";do{O+=String.fromCharCode(255&k),k>>>=8}while(k>0);for(x.putByte(128|O.length),R=O.length-1;R>=0;--R)x.putByte(O.charCodeAt(R))}return x.putBuffer(g),x},e.oidToDer=function(f){var x=f.split("."),b=n.util.createBuffer();b.putByte(40*parseInt(x[0],10)+parseInt(x[1],10));for(var g,N,R,k,O=2;O<x.length;++O){g=!0,N=[],R=parseInt(x[O],10);do{k=127&R,R>>>=7,g||(k|=128),N.push(k),g=!1}while(R>0);for(var P=N.length-1;P>=0;--P)b.putByte(N[P])}return b},e.derToOid=function(f){var x;"string"==typeof f&&(f=n.util.createBuffer(f));var b=f.getByte();x=Math.floor(b/40)+"."+b%40;for(var g=0;f.length()>0;)g<<=7,128&(b=f.getByte())?g+=127&b:(x+="."+(g+b),g=0);return x},e.utcTimeToDate=function(f){var x=new Date,b=parseInt(f.substr(0,2),10);b=b>=50?1900+b:2e3+b;var g=parseInt(f.substr(2,2),10)-1,N=parseInt(f.substr(4,2),10),R=parseInt(f.substr(6,2),10),k=parseInt(f.substr(8,2),10),O=0;if(f.length>11){var P=f.charAt(10),U=10;"+"!==P&&"-"!==P&&(O=parseInt(f.substr(10,2),10),U+=2)}if(x.setUTCFullYear(b,g,N),x.setUTCHours(R,k,O,0),U&&("+"===(P=f.charAt(U))||"-"===P)){var B=60*parseInt(f.substr(U+1,2),10)+parseInt(f.substr(U+4,2),10);B*=6e4,x.setTime("+"===P?+x-B:+x+B)}return x},e.generalizedTimeToDate=function(f){var x=new Date,b=parseInt(f.substr(0,4),10),g=parseInt(f.substr(4,2),10)-1,N=parseInt(f.substr(6,2),10),R=parseInt(f.substr(8,2),10),k=parseInt(f.substr(10,2),10),O=parseInt(f.substr(12,2),10),P=0,U=0,W=!1;"Z"===f.charAt(f.length-1)&&(W=!0);var M=f.length-5,B=f.charAt(M);return"+"!==B&&"-"!==B||(U=60*parseInt(f.substr(M+1,2),10)+parseInt(f.substr(M+4,2),10),U*=6e4,"+"===B&&(U*=-1),W=!0),"."===f.charAt(14)&&(P=1e3*parseFloat(f.substr(14),10)),W?(x.setUTCFullYear(b,g,N),x.setUTCHours(R,k,O,P),x.setTime(+x+U)):(x.setFullYear(b,g,N),x.setHours(R,k,O,P)),x},e.dateToUtcTime=function(f){if("string"==typeof f)return f;var x="",b=[];b.push((""+f.getUTCFullYear()).substr(2)),b.push(""+(f.getUTCMonth()+1)),b.push(""+f.getUTCDate()),b.push(""+f.getUTCHours()),b.push(""+f.getUTCMinutes()),b.push(""+f.getUTCSeconds());for(var g=0;g<b.length;++g)b[g].length<2&&(x+="0"),x+=b[g];return x+"Z"},e.dateToGeneralizedTime=function(f){if("string"==typeof f)return f;var x="",b=[];b.push(""+f.getUTCFullYear()),b.push(""+(f.getUTCMonth()+1)),b.push(""+f.getUTCDate()),b.push(""+f.getUTCHours()),b.push(""+f.getUTCMinutes()),b.push(""+f.getUTCSeconds());for(var g=0;g<b.length;++g)b[g].length<2&&(x+="0"),x+=b[g];return x+"Z"},e.integerToDer=function(f){var x=n.util.createBuffer();if(f>=-128&&f<128)return x.putSignedInt(f,8);if(f>=-32768&&f<32768)return x.putSignedInt(f,16);if(f>=-8388608&&f<8388608)return x.putSignedInt(f,24);if(f>=-2147483648&&f<2147483648)return x.putSignedInt(f,32);var b=new Error("Integer too large; max is 32-bits.");throw b.integer=f,b},e.derToInteger=function(f){"string"==typeof f&&(f=n.util.createBuffer(f));var x=8*f.length();if(x>32)throw new Error("Integer too large; max is 32-bits.");return f.getSignedInt(x)},e.validate=function(f,x,b,g){var N=!1;if((f.tagClass===x.tagClass||typeof x.tagClass>"u")&&(f.type===x.type||typeof x.type>"u"))if(f.constructed===x.constructed||typeof x.constructed>"u"){if(N=!0,x.value&&n.util.isArray(x.value))for(var R=0,k=0;N&&k<x.value.length;++k)N=x.value[k].optional||!1,f.value[R]&&((N=e.validate(f.value[R],x.value[k],b,g))?++R:x.value[k].optional&&(N=!0)),!N&&g&&g.push("["+x.name+'] Tag class "'+x.tagClass+'", type "'+x.type+'" expected value length "'+x.value.length+'", got "'+f.value.length+'"');if(N&&b&&(x.capture&&(b[x.capture]=f.value),x.captureAsn1&&(b[x.captureAsn1]=f),x.captureBitStringContents&&"bitStringContents"in f&&(b[x.captureBitStringContents]=f.bitStringContents),x.captureBitStringValue&&"bitStringContents"in f))if(f.bitStringContents.length<2)b[x.captureBitStringValue]="";else{if(0!==f.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");b[x.captureBitStringValue]=f.bitStringContents.slice(1)}}else g&&g.push("["+x.name+'] Expected constructed "'+x.constructed+'", got "'+f.constructed+'"');else g&&(f.tagClass!==x.tagClass&&g.push("["+x.name+'] Expected tag class "'+x.tagClass+'", got "'+f.tagClass+'"'),f.type!==x.type&&g.push("["+x.name+'] Expected type "'+x.type+'", got "'+f.type+'"'));return N};var w=/[^\\u0000-\\u00ff]/;e.prettyPrint=function(f,x,b){var g="";b=b||2,(x=x||0)>0&&(g+="\n");for(var N="",R=0;R<x*b;++R)N+=" ";switch(g+=N+"Tag: ",f.tagClass){case e.Class.UNIVERSAL:g+="Universal:";break;case e.Class.APPLICATION:g+="Application:";break;case e.Class.CONTEXT_SPECIFIC:g+="Context-Specific:";break;case e.Class.PRIVATE:g+="Private:"}if(f.tagClass===e.Class.UNIVERSAL)switch(g+=f.type,f.type){case e.Type.NONE:g+=" (None)";break;case e.Type.BOOLEAN:g+=" (Boolean)";break;case e.Type.INTEGER:g+=" (Integer)";break;case e.Type.BITSTRING:g+=" (Bit string)";break;case e.Type.OCTETSTRING:g+=" (Octet string)";break;case e.Type.NULL:g+=" (Null)";break;case e.Type.OID:g+=" (Object Identifier)";break;case e.Type.ODESC:g+=" (Object Descriptor)";break;case e.Type.EXTERNAL:g+=" (External or Instance of)";break;case e.Type.REAL:g+=" (Real)";break;case e.Type.ENUMERATED:g+=" (Enumerated)";break;case e.Type.EMBEDDED:g+=" (Embedded PDV)";break;case e.Type.UTF8:g+=" (UTF8)";break;case e.Type.ROID:g+=" (Relative Object Identifier)";break;case e.Type.SEQUENCE:g+=" (Sequence)";break;case e.Type.SET:g+=" (Set)";break;case e.Type.PRINTABLESTRING:g+=" (Printable String)";break;case e.Type.IA5String:g+=" (IA5String (ASCII))";break;case e.Type.UTCTIME:g+=" (UTC time)";break;case e.Type.GENERALIZEDTIME:g+=" (Generalized time)";break;case e.Type.BMPSTRING:g+=" (BMP String)"}else g+=f.type;if(g+="\n",g+=N+"Constructed: "+f.constructed+"\n",f.composed){var k=0,O="";for(R=0;R<f.value.length;++R)void 0!==f.value[R]&&(k+=1,O+=e.prettyPrint(f.value[R],x+1,b),R+1<f.value.length&&(O+=","));g+=N+"Sub values: "+k+O}else{if(g+=N+"Value: ",f.type===e.Type.OID){var P=e.derToOid(f.value);g+=P,n.pki&&n.pki.oids&&P in n.pki.oids&&(g+=" ("+n.pki.oids[P]+") ")}if(f.type===e.Type.INTEGER)try{g+=e.derToInteger(f.value)}catch{g+="0x"+n.util.bytesToHex(f.value)}else if(f.type===e.Type.BITSTRING){if(g+=f.value.length>1?"0x"+n.util.bytesToHex(f.value.slice(1)):"(none)",f.value.length>0){var U=f.value.charCodeAt(0);1==U?g+=" (1 unused bit shown)":U>1&&(g+=" ("+U+" unused bits shown)")}}else if(f.type===e.Type.OCTETSTRING)w.test(f.value)||(g+="("+f.value+") "),g+="0x"+n.util.bytesToHex(f.value);else if(f.type===e.Type.UTF8)try{g+=n.util.decodeUtf8(f.value)}catch(W){if("URI malformed"!==W.message)throw W;g+="0x"+n.util.bytesToHex(f.value)+" (malformed UTF8)"}else f.type===e.Type.PRINTABLESTRING||f.type===e.Type.IA5String?g+=f.value:w.test(f.value)?g+="0x"+n.util.bytesToHex(f.value):g+=0===f.value.length?"[null]":f.value}return g}},2020:nt=>{var _e={};nt.exports=_e;var m={};_e.encode=function(e,h,S){if("string"!=typeof h)throw new TypeError('"alphabet" must be a string.');if(void 0!==S&&"number"!=typeof S)throw new TypeError('"maxline" must be a number.');var y="";if(e instanceof Uint8Array){var w=0,f=h.length,x=h.charAt(0),b=[0];for(w=0;w<e.length;++w){for(var g=0,N=e[w];g<b.length;++g)b[g]=(N+=b[g]<<8)%f,N=N/f|0;for(;N>0;)b.push(N%f),N=N/f|0}for(w=0;0===e[w]&&w<e.length-1;++w)y+=x;for(w=b.length-1;w>=0;--w)y+=h[b[w]]}else y=function n(e,h){var S=0,y=h.length,w=h.charAt(0),f=[0];for(S=0;S<e.length();++S){for(var x=0,b=e.at(S);x<f.length;++x)f[x]=(b+=f[x]<<8)%y,b=b/y|0;for(;b>0;)f.push(b%y),b=b/y|0}var g="";for(S=0;0===e.at(S)&&S<e.length()-1;++S)g+=w;for(S=f.length-1;S>=0;--S)g+=h[f[S]];return g}(e,h);if(S){var R=new RegExp(".{1,"+S+"}","g");y=y.match(R).join("\r\n")}return y},_e.decode=function(e,h){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof h)throw new TypeError('"alphabet" must be a string.');var S=m[h];if(!S){S=m[h]=[];for(var y=0;y<h.length;++y)S[h.charCodeAt(y)]=y}e=e.replace(/\s/g,"");var w=h.length,f=h.charAt(0),x=[0];for(y=0;y<e.length;y++){var b=S[e.charCodeAt(y)];if(void 0===b)return;for(var g=0,N=b;g<x.length;++g)x[g]=255&(N+=x[g]*w),N>>=8;for(;N>0;)x.push(255&N),N>>=8}for(var R=0;e[R]===f&&R<e.length-1;++R)x.push(0);return typeof Buffer<"u"?Buffer.from(x.reverse()):new Uint8Array(x.reverse())}},3311:(nt,_e,m)=>{var n=m(8659);m(4747),nt.exports=n.cipher=n.cipher||{},n.cipher.algorithms=n.cipher.algorithms||{},n.cipher.createCipher=function(h,S){var y=h;if("string"==typeof y&&(y=n.cipher.getAlgorithm(y))&&(y=y()),!y)throw new Error("Unsupported algorithm: "+h);return new n.cipher.BlockCipher({algorithm:y,key:S,decrypt:!1})},n.cipher.createDecipher=function(h,S){var y=h;if("string"==typeof y&&(y=n.cipher.getAlgorithm(y))&&(y=y()),!y)throw new Error("Unsupported algorithm: "+h);return new n.cipher.BlockCipher({algorithm:y,key:S,decrypt:!0})},n.cipher.registerAlgorithm=function(h,S){h=h.toUpperCase(),n.cipher.algorithms[h]=S},n.cipher.getAlgorithm=function(h){return(h=h.toUpperCase())in n.cipher.algorithms?n.cipher.algorithms[h]:null};var e=n.cipher.BlockCipher=function(h){this.algorithm=h.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=h.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=h.decrypt,this.algorithm.initialize(h)};e.prototype.start=function(h){h=h||{};var S={};for(var y in h)S[y]=h[y];S.decrypt=this._decrypt,this._finish=!1,this._input=n.util.createBuffer(),this.output=h.output||n.util.createBuffer(),this.mode.start(S)},e.prototype.update=function(h){for(h&&this._input.putBuffer(h);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},e.prototype.finish=function(h){h&&("ECB"===this.mode.name||"CBC"===this.mode.name)&&(this.mode.pad=function(y){return h(this.blockSize,y,!1)},this.mode.unpad=function(y){return h(this.blockSize,y,!0)});var S={};return S.decrypt=this._decrypt,S.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,S)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,S))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,S))}},3481:(nt,_e,m)=>{var n=m(8659);m(4747),n.cipher=n.cipher||{};var e=nt.exports=n.cipher.modes=n.cipher.modes||{};function h(w,f){if("string"==typeof w&&(w=n.util.createBuffer(w)),n.util.isArray(w)&&w.length>4){var x=w;w=n.util.createBuffer();for(var b=0;b<x.length;++b)w.putByte(x[b])}if(w.length()<f)throw new Error("Invalid IV length; got "+w.length()+" bytes and expected "+f+" bytes.");if(!n.util.isArray(w)){var g=[],N=f/4;for(b=0;b<N;++b)g.push(w.getInt32());w=g}return w}function S(w){w[w.length-1]=w[w.length-1]+1&4294967295}function y(w){return[w/4294967296|0,4294967295&w]}e.ecb=function(w){w=w||{},this.name="ECB",this.cipher=w.cipher,this.blockSize=w.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},e.ecb.prototype.start=function(w){},e.ecb.prototype.encrypt=function(w,f,x){if(w.length()<this.blockSize&&!(x&&w.length()>0))return!0;for(var b=0;b<this._ints;++b)this._inBlock[b]=w.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),b=0;b<this._ints;++b)f.putInt32(this._outBlock[b])},e.ecb.prototype.decrypt=function(w,f,x){if(w.length()<this.blockSize&&!(x&&w.length()>0))return!0;for(var b=0;b<this._ints;++b)this._inBlock[b]=w.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),b=0;b<this._ints;++b)f.putInt32(this._outBlock[b])},e.ecb.prototype.pad=function(w,f){var x=w.length()===this.blockSize?this.blockSize:this.blockSize-w.length();return w.fillWithByte(x,x),!0},e.ecb.prototype.unpad=function(w,f){if(f.overflow>0)return!1;var x=w.length(),b=w.at(x-1);return!(b>this.blockSize<<2||(w.truncate(b),0))},e.cbc=function(w){w=w||{},this.name="CBC",this.cipher=w.cipher,this.blockSize=w.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},e.cbc.prototype.start=function(w){if(null===w.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in w))throw new Error("Invalid IV parameter.");this._iv=h(w.iv,this.blockSize),this._prev=this._iv.slice(0)}},e.cbc.prototype.encrypt=function(w,f,x){if(w.length()<this.blockSize&&!(x&&w.length()>0))return!0;for(var b=0;b<this._ints;++b)this._inBlock[b]=this._prev[b]^w.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),b=0;b<this._ints;++b)f.putInt32(this._outBlock[b]);this._prev=this._outBlock},e.cbc.prototype.decrypt=function(w,f,x){if(w.length()<this.blockSize&&!(x&&w.length()>0))return!0;for(var b=0;b<this._ints;++b)this._inBlock[b]=w.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),b=0;b<this._ints;++b)f.putInt32(this._prev[b]^this._outBlock[b]);this._prev=this._inBlock.slice(0)},e.cbc.prototype.pad=function(w,f){var x=w.length()===this.blockSize?this.blockSize:this.blockSize-w.length();return w.fillWithByte(x,x),!0},e.cbc.prototype.unpad=function(w,f){if(f.overflow>0)return!1;var x=w.length(),b=w.at(x-1);return!(b>this.blockSize<<2||(w.truncate(b),0))},e.cfb=function(w){w=w||{},this.name="CFB",this.cipher=w.cipher,this.blockSize=w.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},e.cfb.prototype.start=function(w){if(!("iv"in w))throw new Error("Invalid IV parameter.");this._iv=h(w.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.cfb.prototype.encrypt=function(w,f,x){var b=w.length();if(0===b)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&b>=this.blockSize)for(var g=0;g<this._ints;++g)this._inBlock[g]=w.getInt32()^this._outBlock[g],f.putInt32(this._inBlock[g]);else{var N=(this.blockSize-b)%this.blockSize;for(N>0&&(N=this.blockSize-N),this._partialOutput.clear(),g=0;g<this._ints;++g)this._partialBlock[g]=w.getInt32()^this._outBlock[g],this._partialOutput.putInt32(this._partialBlock[g]);if(N>0)w.read-=this.blockSize;else for(g=0;g<this._ints;++g)this._inBlock[g]=this._partialBlock[g];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),N>0&&!x)return f.putBytes(this._partialOutput.getBytes(N-this._partialBytes)),this._partialBytes=N,!0;f.putBytes(this._partialOutput.getBytes(b-this._partialBytes)),this._partialBytes=0}},e.cfb.prototype.decrypt=function(w,f,x){var b=w.length();if(0===b)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&b>=this.blockSize)for(var g=0;g<this._ints;++g)this._inBlock[g]=w.getInt32(),f.putInt32(this._inBlock[g]^this._outBlock[g]);else{var N=(this.blockSize-b)%this.blockSize;for(N>0&&(N=this.blockSize-N),this._partialOutput.clear(),g=0;g<this._ints;++g)this._partialBlock[g]=w.getInt32(),this._partialOutput.putInt32(this._partialBlock[g]^this._outBlock[g]);if(N>0)w.read-=this.blockSize;else for(g=0;g<this._ints;++g)this._inBlock[g]=this._partialBlock[g];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),N>0&&!x)return f.putBytes(this._partialOutput.getBytes(N-this._partialBytes)),this._partialBytes=N,!0;f.putBytes(this._partialOutput.getBytes(b-this._partialBytes)),this._partialBytes=0}},e.ofb=function(w){w=w||{},this.name="OFB",this.cipher=w.cipher,this.blockSize=w.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},e.ofb.prototype.start=function(w){if(!("iv"in w))throw new Error("Invalid IV parameter.");this._iv=h(w.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.ofb.prototype.encrypt=function(w,f,x){var b=w.length();if(0===w.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&b>=this.blockSize)for(var g=0;g<this._ints;++g)f.putInt32(w.getInt32()^this._outBlock[g]),this._inBlock[g]=this._outBlock[g];else{var N=(this.blockSize-b)%this.blockSize;for(N>0&&(N=this.blockSize-N),this._partialOutput.clear(),g=0;g<this._ints;++g)this._partialOutput.putInt32(w.getInt32()^this._outBlock[g]);if(N>0)w.read-=this.blockSize;else for(g=0;g<this._ints;++g)this._inBlock[g]=this._outBlock[g];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),N>0&&!x)return f.putBytes(this._partialOutput.getBytes(N-this._partialBytes)),this._partialBytes=N,!0;f.putBytes(this._partialOutput.getBytes(b-this._partialBytes)),this._partialBytes=0}},e.ofb.prototype.decrypt=e.ofb.prototype.encrypt,e.ctr=function(w){w=w||{},this.name="CTR",this.cipher=w.cipher,this.blockSize=w.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0},e.ctr.prototype.start=function(w){if(!("iv"in w))throw new Error("Invalid IV parameter.");this._iv=h(w.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},e.ctr.prototype.encrypt=function(w,f,x){var b=w.length();if(0===b)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&b>=this.blockSize)for(var g=0;g<this._ints;++g)f.putInt32(w.getInt32()^this._outBlock[g]);else{var N=(this.blockSize-b)%this.blockSize;for(N>0&&(N=this.blockSize-N),this._partialOutput.clear(),g=0;g<this._ints;++g)this._partialOutput.putInt32(w.getInt32()^this._outBlock[g]);if(N>0&&(w.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),N>0&&!x)return f.putBytes(this._partialOutput.getBytes(N-this._partialBytes)),this._partialBytes=N,!0;f.putBytes(this._partialOutput.getBytes(b-this._partialBytes)),this._partialBytes=0}S(this._inBlock)},e.ctr.prototype.decrypt=e.ctr.prototype.encrypt,e.gcm=function(w){w=w||{},this.name="GCM",this.cipher=w.cipher,this.blockSize=w.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=n.util.createBuffer(),this._partialBytes=0,this._R=3774873600},e.gcm.prototype.start=function(w){if(!("iv"in w))throw new Error("Invalid IV parameter.");var x,f=n.util.createBuffer(w.iv);if(this._cipherLength=0,x="additionalData"in w?n.util.createBuffer(w.additionalData):n.util.createBuffer(),this._tagLength="tagLength"in w?w.tagLength:128,this._tag=null,w.decrypt&&(this._tag=n.util.createBuffer(w.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var b=f.length();if(12===b)this._j0=[f.getInt32(),f.getInt32(),f.getInt32(),1];else{for(this._j0=[0,0,0,0];f.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[f.getInt32(),f.getInt32(),f.getInt32(),f.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(y(8*b)))}this._inBlock=this._j0.slice(0),S(this._inBlock),this._partialBytes=0,x=n.util.createBuffer(x),this._aDataLength=y(8*x.length());var g=x.length()%this.blockSize;for(g&&x.fillWithByte(0,this.blockSize-g),this._s=[0,0,0,0];x.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[x.getInt32(),x.getInt32(),x.getInt32(),x.getInt32()])},e.gcm.prototype.encrypt=function(w,f,x){var b=w.length();if(0===b)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&b>=this.blockSize){for(var g=0;g<this._ints;++g)f.putInt32(this._outBlock[g]^=w.getInt32());this._cipherLength+=this.blockSize}else{var N=(this.blockSize-b)%this.blockSize;for(N>0&&(N=this.blockSize-N),this._partialOutput.clear(),g=0;g<this._ints;++g)this._partialOutput.putInt32(w.getInt32()^this._outBlock[g]);if(N<=0||x){if(x){var R=b%this.blockSize;this._cipherLength+=R,this._partialOutput.truncate(this.blockSize-R)}else this._cipherLength+=this.blockSize;for(g=0;g<this._ints;++g)this._outBlock[g]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),N>0&&!x)return w.read-=this.blockSize,f.putBytes(this._partialOutput.getBytes(N-this._partialBytes)),this._partialBytes=N,!0;f.putBytes(this._partialOutput.getBytes(b-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),S(this._inBlock)},e.gcm.prototype.decrypt=function(w,f,x){var b=w.length();if(b<this.blockSize&&!(x&&b>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),S(this._inBlock),this._hashBlock[0]=w.getInt32(),this._hashBlock[1]=w.getInt32(),this._hashBlock[2]=w.getInt32(),this._hashBlock[3]=w.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var g=0;g<this._ints;++g)f.putInt32(this._outBlock[g]^this._hashBlock[g]);this._cipherLength+=b<this.blockSize?b%this.blockSize:this.blockSize},e.gcm.prototype.afterFinish=function(w,f){var x=!0;f.decrypt&&f.overflow&&w.truncate(this.blockSize-f.overflow),this.tag=n.util.createBuffer();var b=this._aDataLength.concat(y(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,b);var g=[];this.cipher.encrypt(this._j0,g);for(var N=0;N<this._ints;++N)this.tag.putInt32(this._s[N]^g[N]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),f.decrypt&&this.tag.bytes()!==this._tag&&(x=!1),x},e.gcm.prototype.multiply=function(w,f){for(var x=[0,0,0,0],b=f.slice(0),g=0;g<128;++g)w[g/32|0]&1<<31-g%32&&(x[0]^=b[0],x[1]^=b[1],x[2]^=b[2],x[3]^=b[3]),this.pow(b,b);return x},e.gcm.prototype.pow=function(w,f){for(var x=1&w[3],b=3;b>0;--b)f[b]=w[b]>>>1|(1&w[b-1])<<31;f[0]=w[0]>>>1,x&&(f[0]^=this._R)},e.gcm.prototype.tableMultiply=function(w){for(var f=[0,0,0,0],x=0;x<32;++x){var N=this._m[x][w[x/8|0]>>>4*(7-x%8)&15];f[0]^=N[0],f[1]^=N[1],f[2]^=N[2],f[3]^=N[3]}return f},e.gcm.prototype.ghash=function(w,f,x){return f[0]^=x[0],f[1]^=x[1],f[2]^=x[2],f[3]^=x[3],this.tableMultiply(f)},e.gcm.prototype.generateHashTable=function(w,f){for(var x=8/f,b=4*x,g=16*x,N=new Array(g),R=0;R<g;++R){var k=[0,0,0,0];k[R/b|0]=1<<f-1<<(b-1-R%b)*f,N[R]=this.generateSubHashTable(this.multiply(k,w),f)}return N},e.gcm.prototype.generateSubHashTable=function(w,f){var x=1<<f,b=x>>>1,g=new Array(x);g[b]=w.slice(0);for(var N=b>>>1;N>0;)this.pow(g[2*N],g[N]=[]),N>>=1;for(N=2;N<b;){for(var R=1;R<N;++R){var k=g[N],O=g[R];g[N+R]=[k[0]^O[0],k[1]^O[1],k[2]^O[2],k[3]^O[3]]}N*=2}for(g[0]=[0,0,0,0],N=b+1;N<x;++N){var P=g[N^b];g[N]=[w[0]^P[0],w[1]^P[1],w[2]^P[2],w[3]^P[3]]}return g}},279:(nt,_e,m)=>{var n=m(8659);function e(O,P){n.cipher.registerAlgorithm(O,function(){return new n.des.Algorithm(O,P)})}m(3311),m(3481),m(4747),nt.exports=n.des=n.des||{},n.des.startEncrypting=function(O,P,U,W){var M=k({key:O,output:U,decrypt:!1,mode:W||(null===P?"ECB":"CBC")});return M.start(P),M},n.des.createEncryptionCipher=function(O,P){return k({key:O,output:null,decrypt:!1,mode:P})},n.des.startDecrypting=function(O,P,U,W){var M=k({key:O,output:U,decrypt:!0,mode:W||(null===P?"ECB":"CBC")});return M.start(P),M},n.des.createDecryptionCipher=function(O,P){return k({key:O,output:null,decrypt:!0,mode:P})},n.des.Algorithm=function(O,P){var U=this;U.name=O,U.mode=new P({blockSize:8,cipher:{encrypt:function(W,M){return R(U._keys,W,M,!1)},decrypt:function(W,M){return R(U._keys,W,M,!0)}}}),U._init=!1},n.des.Algorithm.prototype.initialize=function(O){if(!this._init){var P=n.util.createBuffer(O.key);if(0===this.name.indexOf("3DES")&&24!==P.length())throw new Error("Invalid Triple-DES key size: "+8*P.length());this._keys=function N(O){for(var ye,P=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],U=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],W=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],M=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],B=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],V=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],Q=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],Y=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],fe=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],J=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],ee=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],G=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],E=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],te=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],$=O.length()>8?3:1,ue=[],me=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],we=0,qe=0;qe<$;qe++){var De=O.getInt32(),Ge=O.getInt32();De^=(ye=252645135&(De>>>4^Ge))<<4,De^=ye=65535&((Ge^=ye)>>>-16^De),De^=(ye=858993459&(De>>>2^(Ge^=ye<<-16)))<<2,De^=ye=65535&((Ge^=ye)>>>-16^De),De^=(ye=1431655765&(De>>>1^(Ge^=ye<<-16)))<<1,De^=ye=16711935&((Ge^=ye)>>>8^De),ye=(De^=(ye=1431655765&(De>>>1^(Ge^=ye<<8)))<<1)<<8|(Ge^=ye)>>>20&240,De=Ge<<24|Ge<<8&16711680|Ge>>>8&65280|Ge>>>24&240,Ge=ye;for(var ve=0;ve<me.length;++ve){me[ve]?(De=De<<2|De>>>26,Ge=Ge<<2|Ge>>>26):(De=De<<1|De>>>27,Ge=Ge<<1|Ge>>>27);var c=P[(De&=-15)>>>28]|U[De>>>24&15]|W[De>>>20&15]|M[De>>>16&15]|B[De>>>12&15]|V[De>>>8&15]|Q[De>>>4&15],tt=Y[(Ge&=-15)>>>28]|fe[Ge>>>24&15]|J[Ge>>>20&15]|ee[Ge>>>16&15]|G[Ge>>>12&15]|E[Ge>>>8&15]|te[Ge>>>4&15];ue[we++]=c^(ye=65535&(tt>>>16^c)),ue[we++]=tt^ye<<16}}return ue}(P),this._init=!0}},e("DES-ECB",n.cipher.modes.ecb),e("DES-CBC",n.cipher.modes.cbc),e("DES-CFB",n.cipher.modes.cfb),e("DES-OFB",n.cipher.modes.ofb),e("DES-CTR",n.cipher.modes.ctr),e("3DES-ECB",n.cipher.modes.ecb),e("3DES-CBC",n.cipher.modes.cbc),e("3DES-CFB",n.cipher.modes.cfb),e("3DES-OFB",n.cipher.modes.ofb),e("3DES-CTR",n.cipher.modes.ctr);var h=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],S=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],y=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],w=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],f=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],x=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],b=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],g=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function R(O,P,U,W){var B,M=32===O.length?3:9;B=3===M?W?[30,-2,-2]:[0,32,2]:W?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var V,Q=P[0],Y=P[1];Q^=(V=252645135&(Q>>>4^Y))<<4,Q^=(V=65535&(Q>>>16^(Y^=V)))<<16,Q^=V=858993459&((Y^=V)>>>2^Q),Q^=V=16711935&((Y^=V<<2)>>>8^Q),Q=(Q^=(V=1431655765&(Q>>>1^(Y^=V<<8)))<<1)<<1|Q>>>31,Y=(Y^=V)<<1|Y>>>31;for(var fe=0;fe<M;fe+=3){for(var J=B[fe+1],ee=B[fe+2],G=B[fe];G!=J;G+=ee){var E=Y^O[G],te=(Y>>>4|Y<<28)^O[G+1];V=Q,Q=Y,Y=V^(S[E>>>24&63]|w[E>>>16&63]|x[E>>>8&63]|g[63&E]|h[te>>>24&63]|y[te>>>16&63]|f[te>>>8&63]|b[63&te])}V=Q,Q=Y,Y=V}Y=Y>>>1|Y<<31,Y^=V=1431655765&((Q=Q>>>1|Q<<31)>>>1^Y),Y^=(V=16711935&(Y>>>8^(Q^=V<<1)))<<8,Y^=(V=858993459&(Y>>>2^(Q^=V)))<<2,Y^=V=65535&((Q^=V)>>>16^Y),Y^=V=252645135&((Q^=V<<16)>>>4^Y),U[0]=Q^=V<<4,U[1]=Y}function k(O){var W,U="DES-"+((O=O||{}).mode||"CBC").toUpperCase(),M=(W=O.decrypt?n.cipher.createDecipher(U,O.key):n.cipher.createCipher(U,O.key)).start;return W.start=function(B,V){var Q=null;V instanceof n.util.ByteBuffer&&(Q=V,V={}),(V=V||{}).output=Q,V.iv=B,M.call(W,V)},W}},4187:(nt,_e,m)=>{var n=m(8659);m(730),m(8365),m(8985),m(4747);var e=m(8877),h=e.publicKeyValidator,S=e.privateKeyValidator;if(typeof y>"u")var y=n.jsbn.BigInteger;var w=n.util.ByteBuffer,f=typeof Buffer>"u"?Uint8Array:Buffer;n.pki=n.pki||{},nt.exports=n.pki.ed25519=n.ed25519=n.ed25519||{};var x=n.ed25519;function b(xt){var Dt=xt.message;if(Dt instanceof Uint8Array||Dt instanceof f)return Dt;var X=xt.encoding;if(void 0===Dt){if(!xt.md)throw new TypeError('"options.message" or "options.md" not specified.');Dt=xt.md.digest().getBytes(),X="binary"}if("string"==typeof Dt&&!X)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if("string"==typeof Dt){if(typeof Buffer<"u")return Buffer.from(Dt,X);Dt=new w(Dt,X)}else if(!(Dt instanceof w))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var j=new f(Dt.length()),ae=0;ae<j.length;++ae)j[ae]=Dt.at(ae);return j}x.constants={},x.constants.PUBLIC_KEY_BYTE_LENGTH=32,x.constants.PRIVATE_KEY_BYTE_LENGTH=64,x.constants.SEED_BYTE_LENGTH=32,x.constants.SIGN_BYTE_LENGTH=64,x.constants.HASH_BYTE_LENGTH=64,x.generateKeyPair=function(xt){var Dt=(xt=xt||{}).seed;if(void 0===Dt)Dt=n.random.getBytesSync(x.constants.SEED_BYTE_LENGTH);else if("string"==typeof Dt){if(Dt.length!==x.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+x.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(Dt instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');Dt=b({message:Dt,encoding:"binary"});for(var X=new f(x.constants.PUBLIC_KEY_BYTE_LENGTH),j=new f(x.constants.PRIVATE_KEY_BYTE_LENGTH),ae=0;ae<32;++ae)j[ae]=Dt[ae];return function B(xt,Dt){var j,X=[ct(),ct(),ct(),ct()],ae=M(Dt,32);for(ae[0]&=248,ae[31]&=127,ae[31]|=64,Ge(X,ae),G(xt,X),j=0;j<32;++j)Dt[j+32]=xt[j]}(X,j),{publicKey:X,privateKey:j}},x.privateKeyFromAsn1=function(xt){var Dt={},X=[];if(!n.asn1.validate(xt,S,Dt,X)){var ae=new Error("Invalid Key.");throw ae.errors=X,ae}var Be=n.asn1.derToOid(Dt.privateKeyOid),je=n.oids.EdDSA25519;if(Be!==je)throw new Error('Invalid OID "'+Be+'"; OID must be "'+je+'".');return{privateKeyBytes:b({message:n.asn1.fromDer(Dt.privateKey).value,encoding:"binary"})}},x.publicKeyFromAsn1=function(xt){var Dt={},X=[];if(!n.asn1.validate(xt,h,Dt,X)){var ae=new Error("Invalid Key.");throw ae.errors=X,ae}var Be=n.asn1.derToOid(Dt.publicKeyOid),je=n.oids.EdDSA25519;if(Be!==je)throw new Error('Invalid OID "'+Be+'"; OID must be "'+je+'".');var ke=Dt.ed25519PublicKey;if(ke.length!==x.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return b({message:ke,encoding:"binary"})},x.publicKeyFromPrivateKey=function(xt){var Dt=b({message:(xt=xt||{}).privateKey,encoding:"binary"});if(Dt.length!==x.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+x.constants.PRIVATE_KEY_BYTE_LENGTH);for(var X=new f(x.constants.PUBLIC_KEY_BYTE_LENGTH),j=0;j<X.length;++j)X[j]=Dt[32+j];return X},x.sign=function(xt){var Dt=b(xt=xt||{}),X=b({message:xt.privateKey,encoding:"binary"});if(X.length===x.constants.SEED_BYTE_LENGTH)X=x.generateKeyPair({seed:X}).privateKey;else if(X.length!==x.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+x.constants.SEED_BYTE_LENGTH+" or "+x.constants.PRIVATE_KEY_BYTE_LENGTH);var ae=new f(x.constants.SIGN_BYTE_LENGTH+Dt.length);!function V(xt,Dt,X,j){var ae,Be,je=new Float64Array(64),ke=[ct(),ct(),ct(),ct()],Re=M(j,32);Re[0]&=248,Re[31]&=127,Re[31]|=64;var Se=X+64;for(ae=0;ae<X;++ae)xt[64+ae]=Dt[ae];for(ae=0;ae<32;++ae)xt[32+ae]=Re[32+ae];var Qe=M(xt.subarray(32),X+32);for(fe(Qe),Ge(ke,Qe),G(xt,ke),ae=32;ae<64;++ae)xt[ae]=j[ae];var Xe=M(xt,X+64);for(fe(Xe),ae=32;ae<64;++ae)je[ae]=0;for(ae=0;ae<32;++ae)je[ae]=Qe[ae];for(ae=0;ae<32;++ae)for(Be=0;Be<32;Be++)je[ae+Be]+=Xe[ae]*Re[Be];Y(xt.subarray(32),je)}(ae,Dt,Dt.length,X);for(var Be=new f(x.constants.SIGN_BYTE_LENGTH),je=0;je<Be.length;++je)Be[je]=ae[je];return Be},x.verify=function(xt){var Dt=b(xt=xt||{});if(void 0===xt.signature)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var X=b({message:xt.signature,encoding:"binary"});if(X.length!==x.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+x.constants.SIGN_BYTE_LENGTH);var j=b({message:xt.publicKey,encoding:"binary"});if(j.length!==x.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+x.constants.PUBLIC_KEY_BYTE_LENGTH);var je,ae=new f(x.constants.SIGN_BYTE_LENGTH+Dt.length),Be=new f(x.constants.SIGN_BYTE_LENGTH+Dt.length);for(je=0;je<x.constants.SIGN_BYTE_LENGTH;++je)ae[je]=X[je];for(je=0;je<Dt.length;++je)ae[je+x.constants.SIGN_BYTE_LENGTH]=Dt[je];return function Q(xt,Dt,X,j){var ae,je=new f(32),ke=[ct(),ct(),ct(),ct()],Re=[ct(),ct(),ct(),ct()];if(X<64||function te(xt,Dt){var X=ct(),j=ct(),ae=ct(),Be=ct(),je=ct(),ke=ct(),Re=ct();return ve(xt[2],N),function $(xt,Dt){var X;for(X=0;X<16;++X)xt[X]=Dt[2*X]+(Dt[2*X+1]<<8);xt[15]&=32767}(xt[1],Dt),qt(ae,xt[1]),en(Be,ae,R),ft(ae,ae,xt[2]),rt(Be,xt[2],Be),qt(je,Be),qt(ke,je),en(Re,ke,je),en(X,Re,ae),en(X,X,Be),function ue(xt,Dt){var j,X=ct();for(j=0;j<16;++j)X[j]=Dt[j];for(j=250;j>=0;--j)qt(X,X),1!==j&&en(X,X,Dt);for(j=0;j<16;++j)xt[j]=X[j]}(X,X),en(X,X,ae),en(X,X,Be),en(X,X,Be),en(xt[0],X,Be),qt(j,xt[0]),en(j,j,Be),me(j,ae)&&en(xt[0],xt[0],W),qt(j,xt[0]),en(j,j,Be),me(j,ae)?-1:(qe(xt[0])===Dt[31]>>7&&ft(xt[0],g,xt[0]),en(xt[3],xt[0],xt[1]),0)}(Re,j))return-1;for(ae=0;ae<X;++ae)xt[ae]=Dt[ae];for(ae=0;ae<32;++ae)xt[ae+32]=j[ae];var Se=M(xt,X);if(fe(Se),De(ke,Re,Se),Ge(Re,Dt.subarray(32)),J(ke,Re),G(je,ke),X-=64,we(Dt,0,je,0)){for(ae=0;ae<X;++ae)xt[ae]=0;return-1}for(ae=0;ae<X;++ae)xt[ae]=Dt[ae+64];return X}(Be,ae,ae.length,j)>=0};var g=ct(),N=ct([1]),R=ct([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),k=ct([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),O=ct([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),P=ct([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),U=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),W=ct([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function M(xt,Dt){var X=n.md.sha512.create(),j=new w(xt);X.update(j.getBytes(Dt),"binary");var ae=X.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(ae,"binary");for(var Be=new f(x.constants.HASH_BYTE_LENGTH),je=0;je<64;++je)Be[je]=ae.charCodeAt(je);return Be}function Y(xt,Dt){var X,j,ae,Be;for(j=63;j>=32;--j){for(X=0,ae=j-32,Be=j-12;ae<Be;++ae)Dt[ae]+=X-16*Dt[j]*U[ae-(j-32)],Dt[ae]-=256*(X=Dt[ae]+128>>8);Dt[ae]+=X,Dt[j]=0}for(X=0,ae=0;ae<32;++ae)Dt[ae]+=X-(Dt[31]>>4)*U[ae],X=Dt[ae]>>8,Dt[ae]&=255;for(ae=0;ae<32;++ae)Dt[ae]-=X*U[ae];for(j=0;j<32;++j)Dt[j+1]+=Dt[j]>>8,xt[j]=255&Dt[j]}function fe(xt){for(var Dt=new Float64Array(64),X=0;X<64;++X)Dt[X]=xt[X],xt[X]=0;Y(xt,Dt)}function J(xt,Dt){var X=ct(),j=ct(),ae=ct(),Be=ct(),je=ct(),ke=ct(),Re=ct(),Se=ct(),Qe=ct();ft(X,xt[1],xt[0]),ft(Qe,Dt[1],Dt[0]),en(X,X,Qe),rt(j,xt[0],xt[1]),rt(Qe,Dt[0],Dt[1]),en(j,j,Qe),en(ae,xt[3],Dt[3]),en(ae,ae,k),en(Be,xt[2],Dt[2]),rt(Be,Be,Be),ft(je,j,X),ft(ke,Be,ae),rt(Re,Be,ae),rt(Se,j,X),en(xt[0],je,ke),en(xt[1],Se,Re),en(xt[2],Re,ke),en(xt[3],je,Se)}function ee(xt,Dt,X){for(var j=0;j<4;++j)_t(xt[j],Dt[j],X)}function G(xt,Dt){var X=ct(),j=ct(),ae=ct();(function c(xt,Dt){var j,X=ct();for(j=0;j<16;++j)X[j]=Dt[j];for(j=253;j>=0;--j)qt(X,X),2!==j&&4!==j&&en(X,X,Dt);for(j=0;j<16;++j)xt[j]=X[j]})(ae,Dt[2]),en(X,Dt[0],ae),en(j,Dt[1],ae),E(xt,j),xt[31]^=qe(X)<<7}function E(xt,Dt){var X,j,ae,Be=ct(),je=ct();for(X=0;X<16;++X)je[X]=Dt[X];for(tt(je),tt(je),tt(je),j=0;j<2;++j){for(Be[0]=je[0]-65517,X=1;X<15;++X)Be[X]=je[X]-65535-(Be[X-1]>>16&1),Be[X-1]&=65535;Be[15]=je[15]-32767-(Be[14]>>16&1),ae=Be[15]>>16&1,Be[14]&=65535,_t(je,Be,1-ae)}for(X=0;X<16;X++)xt[2*X]=255&je[X],xt[2*X+1]=je[X]>>8}function me(xt,Dt){var X=new f(32),j=new f(32);return E(X,xt),E(j,Dt),we(X,0,j,0)}function we(xt,Dt,X,j){return function ye(xt,Dt,X,j,ae){var Be,je=0;for(Be=0;Be<ae;++Be)je|=xt[Dt+Be]^X[j+Be];return(1&je-1>>>8)-1}(xt,Dt,X,j,32)}function qe(xt){var Dt=new f(32);return E(Dt,xt),1&Dt[0]}function De(xt,Dt,X){var j,ae;for(ve(xt[0],g),ve(xt[1],N),ve(xt[2],N),ve(xt[3],g),ae=255;ae>=0;--ae)ee(xt,Dt,j=X[ae/8|0]>>(7&ae)&1),J(Dt,xt),J(xt,xt),ee(xt,Dt,j)}function Ge(xt,Dt){var X=[ct(),ct(),ct(),ct()];ve(X[0],O),ve(X[1],P),ve(X[2],N),en(X[3],O,P),De(xt,X,Dt)}function ve(xt,Dt){var X;for(X=0;X<16;X++)xt[X]=0|Dt[X]}function tt(xt){var Dt,X,j=1;for(Dt=0;Dt<16;++Dt)X=xt[Dt]+j+65535,j=Math.floor(X/65536),xt[Dt]=X-65536*j;xt[0]+=j-1+37*(j-1)}function _t(xt,Dt,X){for(var j,ae=~(X-1),Be=0;Be<16;++Be)xt[Be]^=j=ae&(xt[Be]^Dt[Be]),Dt[Be]^=j}function ct(xt){var Dt,X=new Float64Array(16);if(xt)for(Dt=0;Dt<xt.length;++Dt)X[Dt]=xt[Dt];return X}function rt(xt,Dt,X){for(var j=0;j<16;++j)xt[j]=Dt[j]+X[j]}function ft(xt,Dt,X){for(var j=0;j<16;++j)xt[j]=Dt[j]-X[j]}function qt(xt,Dt){en(xt,Dt,Dt)}function en(xt,Dt,X){var j,ae,Be=0,je=0,ke=0,Re=0,Se=0,Qe=0,Xe=0,Ke=0,Je=0,Ct=0,ht=0,Ze=0,oe=0,ie=0,L=0,ne=0,Ne=0,ze=0,et=0,Tt=0,Zt=0,gn=0,Yt=0,on=0,Xt=0,it=0,Gt=0,bt=0,jt=0,ln=0,kn=0,Tn=X[0],qn=X[1],ri=X[2],Yn=X[3],Ft=X[4],jn=X[5],In=X[6],Fn=X[7],Zn=X[8],zn=X[9],ut=X[10],vt=X[11],at=X[12],Ot=X[13],Ht=X[14],hn=X[15];Be+=(j=Dt[0])*Tn,je+=j*qn,ke+=j*ri,Re+=j*Yn,Se+=j*Ft,Qe+=j*jn,Xe+=j*In,Ke+=j*Fn,Je+=j*Zn,Ct+=j*zn,ht+=j*ut,Ze+=j*vt,oe+=j*at,ie+=j*Ot,L+=j*Ht,ne+=j*hn,je+=(j=Dt[1])*Tn,ke+=j*qn,Re+=j*ri,Se+=j*Yn,Qe+=j*Ft,Xe+=j*jn,Ke+=j*In,Je+=j*Fn,Ct+=j*Zn,ht+=j*zn,Ze+=j*ut,oe+=j*vt,ie+=j*at,L+=j*Ot,ne+=j*Ht,Ne+=j*hn,ke+=(j=Dt[2])*Tn,Re+=j*qn,Se+=j*ri,Qe+=j*Yn,Xe+=j*Ft,Ke+=j*jn,Je+=j*In,Ct+=j*Fn,ht+=j*Zn,Ze+=j*zn,oe+=j*ut,ie+=j*vt,L+=j*at,ne+=j*Ot,Ne+=j*Ht,ze+=j*hn,Re+=(j=Dt[3])*Tn,Se+=j*qn,Qe+=j*ri,Xe+=j*Yn,Ke+=j*Ft,Je+=j*jn,Ct+=j*In,ht+=j*Fn,Ze+=j*Zn,oe+=j*zn,ie+=j*ut,L+=j*vt,ne+=j*at,Ne+=j*Ot,ze+=j*Ht,et+=j*hn,Se+=(j=Dt[4])*Tn,Qe+=j*qn,Xe+=j*ri,Ke+=j*Yn,Je+=j*Ft,Ct+=j*jn,ht+=j*In,Ze+=j*Fn,oe+=j*Zn,ie+=j*zn,L+=j*ut,ne+=j*vt,Ne+=j*at,ze+=j*Ot,et+=j*Ht,Tt+=j*hn,Qe+=(j=Dt[5])*Tn,Xe+=j*qn,Ke+=j*ri,Je+=j*Yn,Ct+=j*Ft,ht+=j*jn,Ze+=j*In,oe+=j*Fn,ie+=j*Zn,L+=j*zn,ne+=j*ut,Ne+=j*vt,ze+=j*at,et+=j*Ot,Tt+=j*Ht,Zt+=j*hn,Xe+=(j=Dt[6])*Tn,Ke+=j*qn,Je+=j*ri,Ct+=j*Yn,ht+=j*Ft,Ze+=j*jn,oe+=j*In,ie+=j*Fn,L+=j*Zn,ne+=j*zn,Ne+=j*ut,ze+=j*vt,et+=j*at,Tt+=j*Ot,Zt+=j*Ht,gn+=j*hn,Ke+=(j=Dt[7])*Tn,Je+=j*qn,Ct+=j*ri,ht+=j*Yn,Ze+=j*Ft,oe+=j*jn,ie+=j*In,L+=j*Fn,ne+=j*Zn,Ne+=j*zn,ze+=j*ut,et+=j*vt,Tt+=j*at,Zt+=j*Ot,gn+=j*Ht,Yt+=j*hn,Je+=(j=Dt[8])*Tn,Ct+=j*qn,ht+=j*ri,Ze+=j*Yn,oe+=j*Ft,ie+=j*jn,L+=j*In,ne+=j*Fn,Ne+=j*Zn,ze+=j*zn,et+=j*ut,Tt+=j*vt,Zt+=j*at,gn+=j*Ot,Yt+=j*Ht,on+=j*hn,Ct+=(j=Dt[9])*Tn,ht+=j*qn,Ze+=j*ri,oe+=j*Yn,ie+=j*Ft,L+=j*jn,ne+=j*In,Ne+=j*Fn,ze+=j*Zn,et+=j*zn,Tt+=j*ut,Zt+=j*vt,gn+=j*at,Yt+=j*Ot,on+=j*Ht,Xt+=j*hn,ht+=(j=Dt[10])*Tn,Ze+=j*qn,oe+=j*ri,ie+=j*Yn,L+=j*Ft,ne+=j*jn,Ne+=j*In,ze+=j*Fn,et+=j*Zn,Tt+=j*zn,Zt+=j*ut,gn+=j*vt,Yt+=j*at,on+=j*Ot,Xt+=j*Ht,it+=j*hn,Ze+=(j=Dt[11])*Tn,oe+=j*qn,ie+=j*ri,L+=j*Yn,ne+=j*Ft,Ne+=j*jn,ze+=j*In,et+=j*Fn,Tt+=j*Zn,Zt+=j*zn,gn+=j*ut,Yt+=j*vt,on+=j*at,Xt+=j*Ot,it+=j*Ht,Gt+=j*hn,oe+=(j=Dt[12])*Tn,ie+=j*qn,L+=j*ri,ne+=j*Yn,Ne+=j*Ft,ze+=j*jn,et+=j*In,Tt+=j*Fn,Zt+=j*Zn,gn+=j*zn,Yt+=j*ut,on+=j*vt,Xt+=j*at,it+=j*Ot,Gt+=j*Ht,bt+=j*hn,ie+=(j=Dt[13])*Tn,L+=j*qn,ne+=j*ri,Ne+=j*Yn,ze+=j*Ft,et+=j*jn,Tt+=j*In,Zt+=j*Fn,gn+=j*Zn,Yt+=j*zn,on+=j*ut,Xt+=j*vt,it+=j*at,Gt+=j*Ot,bt+=j*Ht,jt+=j*hn,L+=(j=Dt[14])*Tn,ne+=j*qn,Ne+=j*ri,ze+=j*Yn,et+=j*Ft,Tt+=j*jn,Zt+=j*In,gn+=j*Fn,Yt+=j*Zn,on+=j*zn,Xt+=j*ut,it+=j*vt,Gt+=j*at,bt+=j*Ot,jt+=j*Ht,ln+=j*hn,ne+=(j=Dt[15])*Tn,je+=38*(ze+=j*ri),ke+=38*(et+=j*Yn),Re+=38*(Tt+=j*Ft),Se+=38*(Zt+=j*jn),Qe+=38*(gn+=j*In),Xe+=38*(Yt+=j*Fn),Ke+=38*(on+=j*Zn),Je+=38*(Xt+=j*zn),Ct+=38*(it+=j*ut),ht+=38*(Gt+=j*vt),Ze+=38*(bt+=j*at),oe+=38*(jt+=j*Ot),ie+=38*(ln+=j*Ht),L+=38*(kn+=j*hn),Be=(j=(Be+=38*(Ne+=j*qn))+(ae=1)+65535)-65536*(ae=Math.floor(j/65536)),je=(j=je+ae+65535)-65536*(ae=Math.floor(j/65536)),ke=(j=ke+ae+65535)-65536*(ae=Math.floor(j/65536)),Re=(j=Re+ae+65535)-65536*(ae=Math.floor(j/65536)),Se=(j=Se+ae+65535)-65536*(ae=Math.floor(j/65536)),Qe=(j=Qe+ae+65535)-65536*(ae=Math.floor(j/65536)),Xe=(j=Xe+ae+65535)-65536*(ae=Math.floor(j/65536)),Ke=(j=Ke+ae+65535)-65536*(ae=Math.floor(j/65536)),Je=(j=Je+ae+65535)-65536*(ae=Math.floor(j/65536)),Ct=(j=Ct+ae+65535)-65536*(ae=Math.floor(j/65536)),ht=(j=ht+ae+65535)-65536*(ae=Math.floor(j/65536)),Ze=(j=Ze+ae+65535)-65536*(ae=Math.floor(j/65536)),oe=(j=oe+ae+65535)-65536*(ae=Math.floor(j/65536)),ie=(j=ie+ae+65535)-65536*(ae=Math.floor(j/65536)),L=(j=L+ae+65535)-65536*(ae=Math.floor(j/65536)),ne=(j=ne+ae+65535)-65536*(ae=Math.floor(j/65536)),Be=(j=(Be+=ae-1+37*(ae-1))+(ae=1)+65535)-65536*(ae=Math.floor(j/65536)),je=(j=je+ae+65535)-65536*(ae=Math.floor(j/65536)),ke=(j=ke+ae+65535)-65536*(ae=Math.floor(j/65536)),Re=(j=Re+ae+65535)-65536*(ae=Math.floor(j/65536)),Se=(j=Se+ae+65535)-65536*(ae=Math.floor(j/65536)),Qe=(j=Qe+ae+65535)-65536*(ae=Math.floor(j/65536)),Xe=(j=Xe+ae+65535)-65536*(ae=Math.floor(j/65536)),Ke=(j=Ke+ae+65535)-65536*(ae=Math.floor(j/65536)),Je=(j=Je+ae+65535)-65536*(ae=Math.floor(j/65536)),Ct=(j=Ct+ae+65535)-65536*(ae=Math.floor(j/65536)),ht=(j=ht+ae+65535)-65536*(ae=Math.floor(j/65536)),Ze=(j=Ze+ae+65535)-65536*(ae=Math.floor(j/65536)),oe=(j=oe+ae+65535)-65536*(ae=Math.floor(j/65536)),ie=(j=ie+ae+65535)-65536*(ae=Math.floor(j/65536)),L=(j=L+ae+65535)-65536*(ae=Math.floor(j/65536)),ne=(j=ne+ae+65535)-65536*(ae=Math.floor(j/65536)),xt[0]=Be+=ae-1+37*(ae-1),xt[1]=je,xt[2]=ke,xt[3]=Re,xt[4]=Se,xt[5]=Qe,xt[6]=Xe,xt[7]=Ke,xt[8]=Je,xt[9]=Ct,xt[10]=ht,xt[11]=Ze,xt[12]=oe,xt[13]=ie,xt[14]=L,xt[15]=ne}},8659:nt=>{nt.exports={options:{usePureJavaScript:!1}}},9032:(nt,_e,m)=>{var n=m(8659);m(979),m(4747),(nt.exports=n.hmac=n.hmac||{}).create=function(){var h=null,S=null,y=null,w=null,f={start:function(x,b){if(null!==x)if("string"==typeof x){if(!((x=x.toLowerCase())in n.md.algorithms))throw new Error('Unknown hash algorithm "'+x+'"');S=n.md.algorithms[x].create()}else S=x;if(null===b)b=h;else{if("string"==typeof b)b=n.util.createBuffer(b);else if(n.util.isArray(b)){var g=b;b=n.util.createBuffer();for(var N=0;N<g.length;++N)b.putByte(g[N])}var R=b.length();for(R>S.blockLength&&(S.start(),S.update(b.bytes()),b=S.digest()),y=n.util.createBuffer(),w=n.util.createBuffer(),R=b.length(),N=0;N<R;++N)g=b.at(N),y.putByte(54^g),w.putByte(92^g);if(R<S.blockLength)for(g=S.blockLength-R,N=0;N<g;++N)y.putByte(54),w.putByte(92);h=b,y=y.bytes(),w=w.bytes()}S.start(),S.update(y)},update:function(x){S.update(x)},getMac:function(){var x=S.digest().bytes();return S.start(),S.update(w),S.update(x),S.digest()}};return f.digest=f.getMac,f}},592:(nt,_e,m)=>{nt.exports=m(8659),m(1298),m(6683),m(7791),m(3311),m(279),m(4187),m(9032),m(7196),m(6113),m(4752),m(8449),m(7949),m(8604),m(7246),m(562),m(422),m(1965),m(9709),m(4473),m(7256),m(8365),m(209),m(1015),m(2266),m(4747)},730:(nt,_e,m)=>{var e,n=m(8659);function y(Ve,We,st){this.data=[],null!=Ve&&("number"==typeof Ve?this.fromNumber(Ve,We,st):this.fromString(Ve,null==We&&"string"!=typeof Ve?256:We))}function w(){return new y(null)}function b(Ve,We,st,Mt,nn,rn){for(var bn=16383&We,An=We>>14;--rn>=0;){var wi=16383&this.data[Ve],di=this.data[Ve++]>>14,oi=An*wi+di*bn;nn=((wi=bn*wi+((16383&oi)<<14)+st.data[Mt]+nn)>>28)+(oi>>14)+An*di,st.data[Mt++]=268435455&wi}return nn}nt.exports=n.jsbn=n.jsbn||{},n.jsbn.BigInteger=y,typeof navigator>"u"?(y.prototype.am=b,e=28):"Microsoft Internet Explorer"==navigator.appName?(y.prototype.am=function x(Ve,We,st,Mt,nn,rn){for(var bn=32767&We,An=We>>15;--rn>=0;){var wi=32767&this.data[Ve],di=this.data[Ve++]>>15,oi=An*wi+di*bn;nn=((wi=bn*wi+((32767&oi)<<15)+st.data[Mt]+(1073741823&nn))>>>30)+(oi>>>15)+An*di+(nn>>>30),st.data[Mt++]=1073741823&wi}return nn},e=30):"Netscape"!=navigator.appName?(y.prototype.am=function f(Ve,We,st,Mt,nn,rn){for(;--rn>=0;){var bn=We*this.data[Ve++]+st.data[Mt]+nn;nn=Math.floor(bn/67108864),st.data[Mt++]=67108863&bn}return nn},e=26):(y.prototype.am=b,e=28),y.prototype.DB=e,y.prototype.DM=(1<<e)-1,y.prototype.DV=1<<e,y.prototype.FV=Math.pow(2,52),y.prototype.F1=52-e,y.prototype.F2=2*e-52;var k,O,R=new Array;for(k="0".charCodeAt(0),O=0;O<=9;++O)R[k++]=O;for(k="a".charCodeAt(0),O=10;O<36;++O)R[k++]=O;for(k="A".charCodeAt(0),O=10;O<36;++O)R[k++]=O;function P(Ve){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(Ve)}function U(Ve,We){return R[Ve.charCodeAt(We)]??-1}function B(Ve){var We=w();return We.fromInt(Ve),We}function G(Ve){var st,We=1;return 0!=(st=Ve>>>16)&&(Ve=st,We+=16),0!=(st=Ve>>8)&&(Ve=st,We+=8),0!=(st=Ve>>4)&&(Ve=st,We+=4),0!=(st=Ve>>2)&&(Ve=st,We+=2),0!=(st=Ve>>1)&&(Ve=st,We+=1),We}function ve(Ve){this.m=Ve}function qt(Ve){this.m=Ve,this.mp=Ve.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<Ve.DB-15)-1,this.mt2=2*Ve.t}function Ne(Ve,We){return Ve&We}function et(Ve,We){return Ve|We}function Zt(Ve,We){return Ve^We}function Yt(Ve,We){return Ve&~We}function bt(Ve){if(0==Ve)return-1;var We=0;return 0==(65535&Ve)&&(Ve>>=16,We+=16),0==(255&Ve)&&(Ve>>=8,We+=8),0==(15&Ve)&&(Ve>>=4,We+=4),0==(3&Ve)&&(Ve>>=2,We+=2),0==(1&Ve)&&++We,We}function ln(Ve){for(var We=0;0!=Ve;)Ve&=Ve-1,++We;return We}function Ht(){}function hn(Ve){return Ve}function mi(Ve){this.r2=w(),this.q3=w(),y.ONE.dlShiftTo(2*Ve.t,this.r2),this.mu=this.r2.divide(Ve),this.m=Ve}ve.prototype.convert=function c(Ve){return Ve.s<0||Ve.compareTo(this.m)>=0?Ve.mod(this.m):Ve},ve.prototype.revert=function tt(Ve){return Ve},ve.prototype.reduce=function _t(Ve){Ve.divRemTo(this.m,null,Ve)},ve.prototype.mulTo=function ct(Ve,We,st){Ve.multiplyTo(We,st),this.reduce(st)},ve.prototype.sqrTo=function rt(Ve,We){Ve.squareTo(We),this.reduce(We)},qt.prototype.convert=function en(Ve){var We=w();return Ve.abs().dlShiftTo(this.m.t,We),We.divRemTo(this.m,null,We),Ve.s<0&&We.compareTo(y.ZERO)>0&&this.m.subTo(We,We),We},qt.prototype.revert=function xt(Ve){var We=w();return Ve.copyTo(We),this.reduce(We),We},qt.prototype.reduce=function Dt(Ve){for(;Ve.t<=this.mt2;)Ve.data[Ve.t++]=0;for(var We=0;We<this.m.t;++We){var st=32767&Ve.data[We],Mt=st*this.mpl+((st*this.mph+(Ve.data[We]>>15)*this.mpl&this.um)<<15)&Ve.DM;for(Ve.data[st=We+this.m.t]+=this.m.am(0,Mt,Ve,We,0,this.m.t);Ve.data[st]>=Ve.DV;)Ve.data[st]-=Ve.DV,Ve.data[++st]++}Ve.clamp(),Ve.drShiftTo(this.m.t,Ve),Ve.compareTo(this.m)>=0&&Ve.subTo(this.m,Ve)},qt.prototype.mulTo=function j(Ve,We,st){Ve.multiplyTo(We,st),this.reduce(st)},qt.prototype.sqrTo=function X(Ve,We){Ve.squareTo(We),this.reduce(We)},y.prototype.copyTo=function W(Ve){for(var We=this.t-1;We>=0;--We)Ve.data[We]=this.data[We];Ve.t=this.t,Ve.s=this.s},y.prototype.fromInt=function M(Ve){this.t=1,this.s=Ve<0?-1:0,Ve>0?this.data[0]=Ve:Ve<-1?this.data[0]=Ve+this.DV:this.t=0},y.prototype.fromString=function V(Ve,We){var st;if(16==We)st=4;else if(8==We)st=3;else if(256==We)st=8;else if(2==We)st=1;else if(32==We)st=5;else{if(4!=We)return void this.fromRadix(Ve,We);st=2}this.t=0,this.s=0;for(var Mt=Ve.length,nn=!1,rn=0;--Mt>=0;){var bn=8==st?255&Ve[Mt]:U(Ve,Mt);bn<0?"-"==Ve.charAt(Mt)&&(nn=!0):(nn=!1,0==rn?this.data[this.t++]=bn:rn+st>this.DB?(this.data[this.t-1]|=(bn&(1<<this.DB-rn)-1)<<rn,this.data[this.t++]=bn>>this.DB-rn):this.data[this.t-1]|=bn<<rn,(rn+=st)>=this.DB&&(rn-=this.DB))}8==st&&0!=(128&Ve[0])&&(this.s=-1,rn>0&&(this.data[this.t-1]|=(1<<this.DB-rn)-1<<rn)),this.clamp(),nn&&y.ZERO.subTo(this,this)},y.prototype.clamp=function Q(){for(var Ve=this.s&this.DM;this.t>0&&this.data[this.t-1]==Ve;)--this.t},y.prototype.dlShiftTo=function te(Ve,We){var st;for(st=this.t-1;st>=0;--st)We.data[st+Ve]=this.data[st];for(st=Ve-1;st>=0;--st)We.data[st]=0;We.t=this.t+Ve,We.s=this.s},y.prototype.drShiftTo=function $(Ve,We){for(var st=Ve;st<this.t;++st)We.data[st-Ve]=this.data[st];We.t=Math.max(this.t-Ve,0),We.s=this.s},y.prototype.lShiftTo=function ue(Ve,We){var An,st=Ve%this.DB,Mt=this.DB-st,nn=(1<<Mt)-1,rn=Math.floor(Ve/this.DB),bn=this.s<<st&this.DM;for(An=this.t-1;An>=0;--An)We.data[An+rn+1]=this.data[An]>>Mt|bn,bn=(this.data[An]&nn)<<st;for(An=rn-1;An>=0;--An)We.data[An]=0;We.data[rn]=bn,We.t=this.t+rn+1,We.s=this.s,We.clamp()},y.prototype.rShiftTo=function me(Ve,We){We.s=this.s;var st=Math.floor(Ve/this.DB);if(st>=this.t)We.t=0;else{var Mt=Ve%this.DB,nn=this.DB-Mt,rn=(1<<Mt)-1;We.data[0]=this.data[st]>>Mt;for(var bn=st+1;bn<this.t;++bn)We.data[bn-st-1]|=(this.data[bn]&rn)<<nn,We.data[bn-st]=this.data[bn]>>Mt;Mt>0&&(We.data[this.t-st-1]|=(this.s&rn)<<nn),We.t=this.t-st,We.clamp()}},y.prototype.subTo=function we(Ve,We){for(var st=0,Mt=0,nn=Math.min(Ve.t,this.t);st<nn;)Mt+=this.data[st]-Ve.data[st],We.data[st++]=Mt&this.DM,Mt>>=this.DB;if(Ve.t<this.t){for(Mt-=Ve.s;st<this.t;)Mt+=this.data[st],We.data[st++]=Mt&this.DM,Mt>>=this.DB;Mt+=this.s}else{for(Mt+=this.s;st<Ve.t;)Mt-=Ve.data[st],We.data[st++]=Mt&this.DM,Mt>>=this.DB;Mt-=Ve.s}We.s=Mt<0?-1:0,Mt<-1?We.data[st++]=this.DV+Mt:Mt>0&&(We.data[st++]=Mt),We.t=st,We.clamp()},y.prototype.multiplyTo=function ye(Ve,We){var st=this.abs(),Mt=Ve.abs(),nn=st.t;for(We.t=nn+Mt.t;--nn>=0;)We.data[nn]=0;for(nn=0;nn<Mt.t;++nn)We.data[nn+st.t]=st.am(0,Mt.data[nn],We,nn,0,st.t);We.s=0,We.clamp(),this.s!=Ve.s&&y.ZERO.subTo(We,We)},y.prototype.squareTo=function qe(Ve){for(var We=this.abs(),st=Ve.t=2*We.t;--st>=0;)Ve.data[st]=0;for(st=0;st<We.t-1;++st){var Mt=We.am(st,We.data[st],Ve,2*st,0,1);(Ve.data[st+We.t]+=We.am(st+1,2*We.data[st],Ve,2*st+1,Mt,We.t-st-1))>=We.DV&&(Ve.data[st+We.t]-=We.DV,Ve.data[st+We.t+1]=1)}Ve.t>0&&(Ve.data[Ve.t-1]+=We.am(st,We.data[st],Ve,2*st,0,1)),Ve.s=0,Ve.clamp()},y.prototype.divRemTo=function De(Ve,We,st){var Mt=Ve.abs();if(!(Mt.t<=0)){var nn=this.abs();if(nn.t<Mt.t)return We?.fromInt(0),void(null!=st&&this.copyTo(st));null==st&&(st=w());var rn=w(),bn=this.s,An=Ve.s,wi=this.DB-G(Mt.data[Mt.t-1]);wi>0?(Mt.lShiftTo(wi,rn),nn.lShiftTo(wi,st)):(Mt.copyTo(rn),nn.copyTo(st));var di=rn.t,oi=rn.data[di-1];if(0!=oi){var dr=oi*(1<<this.F1)+(di>1?rn.data[di-2]>>this.F2:0),pr=this.FV/dr,Ar=(1<<this.F1)/dr,Fi=1<<this.F2,Br=st.t,Zi=Br-di,ir=We??w();for(rn.dlShiftTo(Zi,ir),st.compareTo(ir)>=0&&(st.data[st.t++]=1,st.subTo(ir,st)),y.ONE.dlShiftTo(di,ir),ir.subTo(rn,rn);rn.t<di;)rn.data[rn.t++]=0;for(;--Zi>=0;){var ns=st.data[--Br]==oi?this.DM:Math.floor(st.data[Br]*pr+(st.data[Br-1]+Fi)*Ar);if((st.data[Br]+=rn.am(0,ns,st,Zi,0,di))<ns)for(rn.dlShiftTo(Zi,ir),st.subTo(ir,st);st.data[Br]<--ns;)st.subTo(ir,st)}null!=We&&(st.drShiftTo(di,We),bn!=An&&y.ZERO.subTo(We,We)),st.t=di,st.clamp(),wi>0&&st.rShiftTo(wi,st),bn<0&&y.ZERO.subTo(st,st)}}},y.prototype.invDigit=function ft(){if(this.t<1)return 0;var Ve=this.data[0];if(0==(1&Ve))return 0;var We=3&Ve;return(We=(We=(We=(We=We*(2-(15&Ve)*We)&15)*(2-(255&Ve)*We)&255)*(2-((65535&Ve)*We&65535))&65535)*(2-Ve*We%this.DV)%this.DV)>0?this.DV-We:-We},y.prototype.isEven=function ae(){return 0==(this.t>0?1&this.data[0]:this.s)},y.prototype.exp=function Be(Ve,We){if(Ve>4294967295||Ve<1)return y.ONE;var st=w(),Mt=w(),nn=We.convert(this),rn=G(Ve)-1;for(nn.copyTo(st);--rn>=0;)if(We.sqrTo(st,Mt),(Ve&1<<rn)>0)We.mulTo(Mt,nn,st);else{var bn=st;st=Mt,Mt=bn}return We.revert(st)},y.prototype.toString=function Y(Ve){if(this.s<0)return"-"+this.negate().toString(Ve);var We;if(16==Ve)We=4;else if(8==Ve)We=3;else if(2==Ve)We=1;else if(32==Ve)We=5;else{if(4!=Ve)return this.toRadix(Ve);We=2}var Mt,st=(1<<We)-1,nn=!1,rn="",bn=this.t,An=this.DB-bn*this.DB%We;if(bn-- >0)for(An<this.DB&&(Mt=this.data[bn]>>An)>0&&(nn=!0,rn=P(Mt));bn>=0;)An<We?(Mt=(this.data[bn]&(1<<An)-1)<<We-An,Mt|=this.data[--bn]>>(An+=this.DB-We)):(Mt=this.data[bn]>>(An-=We)&st,An<=0&&(An+=this.DB,--bn)),Mt>0&&(nn=!0),nn&&(rn+=P(Mt));return nn?rn:"0"},y.prototype.negate=function fe(){var Ve=w();return y.ZERO.subTo(this,Ve),Ve},y.prototype.abs=function J(){return this.s<0?this.negate():this},y.prototype.compareTo=function ee(Ve){var We=this.s-Ve.s;if(0!=We)return We;var st=this.t;if(0!=(We=st-Ve.t))return this.s<0?-We:We;for(;--st>=0;)if(0!=(We=this.data[st]-Ve.data[st]))return We;return 0},y.prototype.bitLength=function E(){return this.t<=0?0:this.DB*(this.t-1)+G(this.data[this.t-1]^this.s&this.DM)},y.prototype.mod=function Ge(Ve){var We=w();return this.abs().divRemTo(Ve,null,We),this.s<0&&We.compareTo(y.ZERO)>0&&Ve.subTo(We,We),We},y.prototype.modPowInt=function je(Ve,We){var st;return st=Ve<256||We.isEven()?new ve(We):new qt(We),this.exp(Ve,st)},y.ZERO=B(0),y.ONE=B(1),Ht.prototype.convert=hn,Ht.prototype.revert=hn,Ht.prototype.mulTo=function Kt(Ve,We,st){Ve.multiplyTo(We,st)},Ht.prototype.sqrTo=function Xn(Ve,We){Ve.squareTo(We)},mi.prototype.convert=function ur(Ve){if(Ve.s<0||Ve.t>2*this.m.t)return Ve.mod(this.m);if(Ve.compareTo(this.m)<0)return Ve;var We=w();return Ve.copyTo(We),this.reduce(We),We},mi.prototype.revert=function yi(Ve){return Ve},mi.prototype.reduce=function nr(Ve){for(Ve.drShiftTo(this.m.t-1,this.r2),Ve.t>this.m.t+1&&(Ve.t=this.m.t+1,Ve.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);Ve.compareTo(this.r2)<0;)Ve.dAddOffset(1,this.m.t+1);for(Ve.subTo(this.r2,Ve);Ve.compareTo(this.m)>=0;)Ve.subTo(this.m,Ve)},mi.prototype.mulTo=function Ai(Ve,We,st){Ve.multiplyTo(We,st),this.reduce(st)},mi.prototype.sqrTo=function Gi(Ve,We){Ve.squareTo(We),this.reduce(We)};var Vn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],kr=(1<<26)/Vn[Vn.length-1];y.prototype.chunkSize=function Xe(Ve){return Math.floor(Math.LN2*this.DB/Math.log(Ve))},y.prototype.toRadix=function Je(Ve){if(null==Ve&&(Ve=10),0==this.signum()||Ve<2||Ve>36)return"0";var We=this.chunkSize(Ve),st=Math.pow(Ve,We),Mt=B(st),nn=w(),rn=w(),bn="";for(this.divRemTo(Mt,nn,rn);nn.signum()>0;)bn=(st+rn.intValue()).toString(Ve).substr(1)+bn,nn.divRemTo(Mt,nn,rn);return rn.intValue().toString(Ve)+bn},y.prototype.fromRadix=function Ct(Ve,We){this.fromInt(0),null==We&&(We=10);for(var st=this.chunkSize(We),Mt=Math.pow(We,st),nn=!1,rn=0,bn=0,An=0;An<Ve.length;++An){var wi=U(Ve,An);wi<0?"-"==Ve.charAt(An)&&0==this.signum()&&(nn=!0):(bn=We*bn+wi,++rn>=st&&(this.dMultiply(Mt),this.dAddOffset(bn,0),rn=0,bn=0))}rn>0&&(this.dMultiply(Math.pow(We,rn)),this.dAddOffset(bn,0)),nn&&y.ZERO.subTo(this,this)},y.prototype.fromNumber=function ht(Ve,We,st){if("number"==typeof We)if(Ve<2)this.fromInt(1);else for(this.fromNumber(Ve,st),this.testBit(Ve-1)||this.bitwiseTo(y.ONE.shiftLeft(Ve-1),et,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(We);)this.dAddOffset(2,0),this.bitLength()>Ve&&this.subTo(y.ONE.shiftLeft(Ve-1),this);else{var Mt=new Array,nn=7&Ve;Mt.length=1+(Ve>>3),We.nextBytes(Mt),nn>0?Mt[0]&=(1<<nn)-1:Mt[0]=0,this.fromString(Mt,256)}},y.prototype.bitwiseTo=function ne(Ve,We,st){var Mt,nn,rn=Math.min(Ve.t,this.t);for(Mt=0;Mt<rn;++Mt)st.data[Mt]=We(this.data[Mt],Ve.data[Mt]);if(Ve.t<this.t){for(nn=Ve.s&this.DM,Mt=rn;Mt<this.t;++Mt)st.data[Mt]=We(this.data[Mt],nn);st.t=this.t}else{for(nn=this.s&this.DM,Mt=rn;Mt<Ve.t;++Mt)st.data[Mt]=We(nn,Ve.data[Mt]);st.t=Ve.t}st.s=We(this.s,Ve.s),st.clamp()},y.prototype.changeBit=function qn(Ve,We){var st=y.ONE.shiftLeft(Ve);return this.bitwiseTo(st,We,st),st},y.prototype.addTo=function jn(Ve,We){for(var st=0,Mt=0,nn=Math.min(Ve.t,this.t);st<nn;)Mt+=this.data[st]+Ve.data[st],We.data[st++]=Mt&this.DM,Mt>>=this.DB;if(Ve.t<this.t){for(Mt+=Ve.s;st<this.t;)Mt+=this.data[st],We.data[st++]=Mt&this.DM,Mt>>=this.DB;Mt+=this.s}else{for(Mt+=this.s;st<Ve.t;)Mt+=Ve.data[st],We.data[st++]=Mt&this.DM,Mt>>=this.DB;Mt+=Ve.s}We.s=Mt<0?-1:0,Mt>0?We.data[st++]=Mt:Mt<-1&&(We.data[st++]=this.DV+Mt),We.t=st,We.clamp()},y.prototype.dMultiply=function at(Ve){this.data[this.t]=this.am(0,Ve-1,this,0,0,this.t),++this.t,this.clamp()},y.prototype.dAddOffset=function Ot(Ve,We){if(0!=Ve){for(;this.t<=We;)this.data[this.t++]=0;for(this.data[We]+=Ve;this.data[We]>=this.DV;)this.data[We]-=this.DV,++We>=this.t&&(this.data[this.t++]=0),++this.data[We]}},y.prototype.multiplyLowerTo=function os(Ve,We,st){var nn,Mt=Math.min(this.t+Ve.t,We);for(st.s=0,st.t=Mt;Mt>0;)st.data[--Mt]=0;for(nn=st.t-this.t;Mt<nn;++Mt)st.data[Mt+this.t]=this.am(0,Ve.data[Mt],st,Mt,0,this.t);for(nn=Math.min(Ve.t,We);Mt<nn;++Mt)this.am(0,Ve.data[Mt],st,Mt,0,We-Mt);st.clamp()},y.prototype.multiplyUpperTo=function Nn(Ve,We,st){--We;var Mt=st.t=this.t+Ve.t-We;for(st.s=0;--Mt>=0;)st.data[Mt]=0;for(Mt=Math.max(We-this.t,0);Mt<Ve.t;++Mt)st.data[this.t+Mt-We]=this.am(We-Mt,Ve.data[Mt],st,0,0,this.t+Mt-We);st.clamp(),st.drShiftTo(1,st)},y.prototype.modInt=function qr(Ve){if(Ve<=0)return 0;var We=this.DV%Ve,st=this.s<0?Ve-1:0;if(this.t>0)if(0==We)st=this.data[0]%Ve;else for(var Mt=this.t-1;Mt>=0;--Mt)st=(We*st+this.data[Mt])%Ve;return st},y.prototype.millerRabin=function Ui(Ve){var We=this.subtract(y.ONE),st=We.getLowestSetBit();if(st<=0)return!1;for(var rn,Mt=We.shiftRight(st),nn=function ws(){return{nextBytes:function(Ve){for(var We=0;We<Ve.length;++We)Ve[We]=Math.floor(256*Math.random())}}}(),bn=0;bn<Ve;++bn){do{rn=new y(this.bitLength(),nn)}while(rn.compareTo(y.ONE)<=0||rn.compareTo(We)>=0);var An=rn.modPow(Mt,this);if(0!=An.compareTo(y.ONE)&&0!=An.compareTo(We)){for(var wi=1;wi++<st&&0!=An.compareTo(We);)if(0==(An=An.modPowInt(2,this)).compareTo(y.ONE))return!1;if(0!=An.compareTo(We))return!1}}return!0},y.prototype.clone=function ke(){var Ve=w();return this.copyTo(Ve),Ve},y.prototype.intValue=function Re(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},y.prototype.byteValue=function Se(){return 0==this.t?this.s:this.data[0]<<24>>24},y.prototype.shortValue=function Qe(){return 0==this.t?this.s:this.data[0]<<16>>16},y.prototype.signum=function Ke(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},y.prototype.toByteArray=function Ze(){var Ve=this.t,We=new Array;We[0]=this.s;var Mt,st=this.DB-Ve*this.DB%8,nn=0;if(Ve-- >0)for(st<this.DB&&(Mt=this.data[Ve]>>st)!=(this.s&this.DM)>>st&&(We[nn++]=Mt|this.s<<this.DB-st);Ve>=0;)st<8?(Mt=(this.data[Ve]&(1<<st)-1)<<8-st,Mt|=this.data[--Ve]>>(st+=this.DB-8)):(Mt=this.data[Ve]>>(st-=8)&255,st<=0&&(st+=this.DB,--Ve)),0!=(128&Mt)&&(Mt|=-256),0==nn&&(128&this.s)!=(128&Mt)&&++nn,(nn>0||Mt!=this.s)&&(We[nn++]=Mt);return We},y.prototype.equals=function oe(Ve){return 0==this.compareTo(Ve)},y.prototype.min=function ie(Ve){return this.compareTo(Ve)<0?this:Ve},y.prototype.max=function L(Ve){return this.compareTo(Ve)>0?this:Ve},y.prototype.and=function ze(Ve){var We=w();return this.bitwiseTo(Ve,Ne,We),We},y.prototype.or=function Tt(Ve){var We=w();return this.bitwiseTo(Ve,et,We),We},y.prototype.xor=function gn(Ve){var We=w();return this.bitwiseTo(Ve,Zt,We),We},y.prototype.andNot=function on(Ve){var We=w();return this.bitwiseTo(Ve,Yt,We),We},y.prototype.not=function Xt(){for(var Ve=w(),We=0;We<this.t;++We)Ve.data[We]=this.DM&~this.data[We];return Ve.t=this.t,Ve.s=~this.s,Ve},y.prototype.shiftLeft=function it(Ve){var We=w();return Ve<0?this.rShiftTo(-Ve,We):this.lShiftTo(Ve,We),We},y.prototype.shiftRight=function Gt(Ve){var We=w();return Ve<0?this.lShiftTo(-Ve,We):this.rShiftTo(Ve,We),We},y.prototype.getLowestSetBit=function jt(){for(var Ve=0;Ve<this.t;++Ve)if(0!=this.data[Ve])return Ve*this.DB+bt(this.data[Ve]);return this.s<0?this.t*this.DB:-1},y.prototype.bitCount=function kn(){for(var Ve=0,We=this.s&this.DM,st=0;st<this.t;++st)Ve+=ln(this.data[st]^We);return Ve},y.prototype.testBit=function Tn(Ve){var We=Math.floor(Ve/this.DB);return We>=this.t?0!=this.s:0!=(this.data[We]&1<<Ve%this.DB)},y.prototype.setBit=function ri(Ve){return this.changeBit(Ve,et)},y.prototype.clearBit=function Yn(Ve){return this.changeBit(Ve,Yt)},y.prototype.flipBit=function Ft(Ve){return this.changeBit(Ve,Zt)},y.prototype.add=function In(Ve){var We=w();return this.addTo(Ve,We),We},y.prototype.subtract=function Fn(Ve){var We=w();return this.subTo(Ve,We),We},y.prototype.multiply=function Zn(Ve){var We=w();return this.multiplyTo(Ve,We),We},y.prototype.divide=function zn(Ve){var We=w();return this.divRemTo(Ve,We,null),We},y.prototype.remainder=function ut(Ve){var We=w();return this.divRemTo(Ve,null,We),We},y.prototype.divideAndRemainder=function vt(Ve){var We=w(),st=w();return this.divRemTo(Ve,We,st),new Array(We,st)},y.prototype.modPow=function Yi(Ve,We){var Mt,rn,st=Ve.bitLength(),nn=B(1);if(st<=0)return nn;Mt=st<18?1:st<48?3:st<144?4:st<768?5:6,rn=st<8?new ve(We):We.isEven()?new mi(We):new qt(We);var bn=new Array,An=3,wi=Mt-1,di=(1<<Mt)-1;if(bn[1]=rn.convert(this),Mt>1){var oi=w();for(rn.sqrTo(bn[1],oi);An<=di;)bn[An]=w(),rn.mulTo(oi,bn[An-2],bn[An]),An+=2}var pr,Br,dr=Ve.t-1,Ar=!0,Fi=w();for(st=G(Ve.data[dr])-1;dr>=0;){for(st>=wi?pr=Ve.data[dr]>>st-wi&di:(pr=(Ve.data[dr]&(1<<st+1)-1)<<wi-st,dr>0&&(pr|=Ve.data[dr-1]>>this.DB+st-wi)),An=Mt;0==(1&pr);)pr>>=1,--An;if((st-=An)<0&&(st+=this.DB,--dr),Ar)bn[pr].copyTo(nn),Ar=!1;else{for(;An>1;)rn.sqrTo(nn,Fi),rn.sqrTo(Fi,nn),An-=2;An>0?rn.sqrTo(nn,Fi):(Br=nn,nn=Fi,Fi=Br),rn.mulTo(Fi,bn[pr],nn)}for(;dr>=0&&0==(Ve.data[dr]&1<<st);)rn.sqrTo(nn,Fi),Br=nn,nn=Fi,Fi=Br,--st<0&&(st=this.DB-1,--dr)}return rn.revert(nn)},y.prototype.modInverse=function Tr(Ve){var We=Ve.isEven();if(this.isEven()&&We||0==Ve.signum())return y.ZERO;for(var st=Ve.clone(),Mt=this.clone(),nn=B(1),rn=B(0),bn=B(0),An=B(1);0!=st.signum();){for(;st.isEven();)st.rShiftTo(1,st),We?((!nn.isEven()||!rn.isEven())&&(nn.addTo(this,nn),rn.subTo(Ve,rn)),nn.rShiftTo(1,nn)):rn.isEven()||rn.subTo(Ve,rn),rn.rShiftTo(1,rn);for(;Mt.isEven();)Mt.rShiftTo(1,Mt),We?((!bn.isEven()||!An.isEven())&&(bn.addTo(this,bn),An.subTo(Ve,An)),bn.rShiftTo(1,bn)):An.isEven()||An.subTo(Ve,An),An.rShiftTo(1,An);st.compareTo(Mt)>=0?(st.subTo(Mt,st),We&&nn.subTo(bn,nn),rn.subTo(An,rn)):(Mt.subTo(st,Mt),We&&bn.subTo(nn,bn),An.subTo(rn,An))}return 0!=Mt.compareTo(y.ONE)?y.ZERO:An.compareTo(Ve)>=0?An.subtract(Ve):An.signum()<0?(An.addTo(Ve,An),An.signum()<0?An.add(Ve):An):An},y.prototype.pow=function Ei(Ve){return this.exp(Ve,new Ht)},y.prototype.gcd=function Jr(Ve){var We=this.s<0?this.negate():this.clone(),st=Ve.s<0?Ve.negate():Ve.clone();if(We.compareTo(st)<0){var Mt=We;We=st,st=Mt}var nn=We.getLowestSetBit(),rn=st.getLowestSetBit();if(rn<0)return We;for(nn<rn&&(rn=nn),rn>0&&(We.rShiftTo(rn,We),st.rShiftTo(rn,st));We.signum()>0;)(nn=We.getLowestSetBit())>0&&We.rShiftTo(nn,We),(nn=st.getLowestSetBit())>0&&st.rShiftTo(nn,st),We.compareTo(st)>=0?(We.subTo(st,We),We.rShiftTo(1,We)):(st.subTo(We,st),st.rShiftTo(1,st));return rn>0&&st.lShiftTo(rn,st),st},y.prototype.isProbablePrime=function ts(Ve){var We,st=this.abs();if(1==st.t&&st.data[0]<=Vn[Vn.length-1]){for(We=0;We<Vn.length;++We)if(st.data[0]==Vn[We])return!0;return!1}if(st.isEven())return!1;for(We=1;We<Vn.length;){for(var Mt=Vn[We],nn=We+1;nn<Vn.length&&Mt<kr;)Mt*=Vn[nn++];for(Mt=st.modInt(Mt);We<nn;)if(Mt%Vn[We++]==0)return!1}return st.millerRabin(Ve)}},7196:(nt,_e,m)=>{var n=m(8659);m(4747),m(8365),m(730),nt.exports=n.kem=n.kem||{};var e=n.jsbn.BigInteger;function h(S,y,w,f){S.generate=function(x,b){for(var g=new n.util.ByteBuffer,N=Math.ceil(b/f)+w,R=new n.util.ByteBuffer,k=w;k<N;++k){R.putInt32(k),y.start(),y.update(x+R.getBytes());var O=y.digest();g.putBytes(O.getBytes(f))}return g.truncate(g.length()-b),g.getBytes()}}n.kem.rsa={},n.kem.rsa.create=function(S,y){var w=(y=y||{}).prng||n.random;return{encrypt:function(x,b){var N,g=Math.ceil(x.n.bitLength()/8);do{N=new e(n.util.bytesToHex(w.getBytesSync(g)),16).mod(x.n)}while(N.compareTo(e.ONE)<=0);var R=g-(N=n.util.hexToBytes(N.toString(16))).length;return R>0&&(N=n.util.fillString(String.fromCharCode(0),R)+N),{encapsulation:x.encrypt(N,"NONE"),key:S.generate(N,b)}},decrypt:function(x,b,g){var N=x.decrypt(b,"NONE");return S.generate(N,g)}}},n.kem.kdf1=function(S,y){h(this,S,0,y||S.digestLength)},n.kem.kdf2=function(S,y){h(this,S,1,y||S.digestLength)}},6113:(nt,_e,m)=>{var n=m(8659);m(4747),nt.exports=n.log=n.log||{},n.log.levels=["none","error","warning","info","debug","verbose","max"];var e={},h=[],S=null;n.log.LEVEL_LOCKED=2,n.log.NO_LEVEL_CHECK=4,n.log.INTERPOLATE=8;for(var y=0;y<n.log.levels.length;++y){var w=n.log.levels[y];e[w]={index:y,name:w.toUpperCase()}}n.log.logMessage=function(k){for(var O=e[k.level].index,P=0;P<h.length;++P){var U=h[P];U.flags&n.log.NO_LEVEL_CHECK?U.f(k):O<=e[U.level].index&&U.f(U,k)}},n.log.prepareStandard=function(k){"standard"in k||(k.standard=e[k.level].name+" ["+k.category+"] "+k.message)},n.log.prepareFull=function(k){if(!("full"in k)){var O=[k.message];O=O.concat([]),k.full=n.util.format.apply(this,O)}},n.log.prepareStandardFull=function(k){"standardFull"in k||(n.log.prepareStandard(k),k.standardFull=k.standard)};var f=["error","warning","info","debug","verbose"];for(y=0;y<f.length;++y)!function(O){n.log[O]=function(P,U){var W=Array.prototype.slice.call(arguments).slice(2),M={timestamp:new Date,level:O,category:P,message:U,arguments:W};n.log.logMessage(M)}}(f[y]);if(n.log.makeLogger=function(k){var O={flags:0,f:k};return n.log.setLevel(O,"none"),O},n.log.setLevel=function(k,O){var P=!1;if(k&&!(k.flags&n.log.LEVEL_LOCKED))for(var U=0;U<n.log.levels.length;++U)if(O==n.log.levels[U]){k.level=O,P=!0;break}return P},n.log.lock=function(k,O){typeof O>"u"||O?k.flags|=n.log.LEVEL_LOCKED:k.flags&=~n.log.LEVEL_LOCKED},n.log.addLogger=function(k){h.push(k)},typeof console<"u"&&"log"in console){var x;if(console.error&&console.warn&&console.info&&console.debug){var b={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},g=function(k,O){n.log.prepareStandard(O);var P=b[O.level],U=[O.standard];U=U.concat(O.arguments.slice()),P.apply(console,U)};x=n.log.makeLogger(g)}else g=function(O,P){n.log.prepareStandardFull(P),console.log(P.standardFull)},x=n.log.makeLogger(g);n.log.setLevel(x,"debug"),n.log.addLogger(x),S=x}else console={log:function(){}};if(null!==S&&typeof window<"u"&&window.location){var N=new URL(window.location.href).searchParams;N.has("console.level")&&n.log.setLevel(S,N.get("console.level").slice(-1)[0]),N.has("console.lock")&&"true"==N.get("console.lock").slice(-1)[0]&&n.log.lock(S)}n.log.consoleLogger=S},4752:(nt,_e,m)=>{nt.exports=m(979),m(2687),m(7690),m(1594),m(8985)},979:(nt,_e,m)=>{var n=m(8659);nt.exports=n.md=n.md||{},n.md.algorithms=n.md.algorithms||{}},2687:(nt,_e,m)=>{var n=m(8659);m(979),m(4747);var e=nt.exports=n.md5=n.md5||{};n.md.md5=n.md.algorithms.md5=e,e.create=function(){f||function x(){h=String.fromCharCode(128),h+=n.util.fillString(String.fromCharCode(0),64),S=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],y=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],w=new Array(64);for(var g=0;g<64;++g)w[g]=Math.floor(4294967296*Math.abs(Math.sin(g+1)));f=!0}();var g=null,N=n.util.createBuffer(),R=new Array(16),k={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){k.messageLength=0,k.fullMessageLength=k.messageLength64=[];for(var O=k.messageLengthSize/4,P=0;P<O;++P)k.fullMessageLength.push(0);return N=n.util.createBuffer(),g={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},k}};return k.start(),k.update=function(O,P){"utf8"===P&&(O=n.util.encodeUtf8(O));var U=O.length;k.messageLength+=U,U=[U/4294967296>>>0,U>>>0];for(var W=k.fullMessageLength.length-1;W>=0;--W)k.fullMessageLength[W]+=U[1],U[1]=U[0]+(k.fullMessageLength[W]/4294967296>>>0),k.fullMessageLength[W]=k.fullMessageLength[W]>>>0,U[0]=U[1]/4294967296>>>0;return N.putBytes(O),b(g,R,N),(N.read>2048||0===N.length())&&N.compact(),k},k.digest=function(){var O=n.util.createBuffer();O.putBytes(N.bytes()),O.putBytes(h.substr(0,k.blockLength-(k.fullMessageLength[k.fullMessageLength.length-1]+k.messageLengthSize&k.blockLength-1)));for(var W,M=0,B=k.fullMessageLength.length-1;B>=0;--B)M=(W=8*k.fullMessageLength[B]+M)/4294967296>>>0,O.putInt32Le(W>>>0);var V={h0:g.h0,h1:g.h1,h2:g.h2,h3:g.h3};b(V,R,O);var Q=n.util.createBuffer();return Q.putInt32Le(V.h0),Q.putInt32Le(V.h1),Q.putInt32Le(V.h2),Q.putInt32Le(V.h3),Q},k};var h=null,S=null,y=null,w=null,f=!1;function b(g,N,R){for(var k,O,P,U,W,B,V,Q=R.length();Q>=64;){for(O=g.h0,P=g.h1,U=g.h2,W=g.h3,V=0;V<16;++V)N[V]=R.getInt32Le(),k=O+(W^P&(U^W))+w[V]+N[V],O=W,W=U,U=P,P+=k<<(B=y[V])|k>>>32-B;for(;V<32;++V)k=O+(U^W&(P^U))+w[V]+N[S[V]],O=W,W=U,U=P,P+=k<<(B=y[V])|k>>>32-B;for(;V<48;++V)k=O+(P^U^W)+w[V]+N[S[V]],O=W,W=U,U=P,P+=k<<(B=y[V])|k>>>32-B;for(;V<64;++V)k=O+(U^(P|~W))+w[V]+N[S[V]],O=W,W=U,U=P,P+=k<<(B=y[V])|k>>>32-B;g.h0=g.h0+O|0,g.h1=g.h1+P|0,g.h2=g.h2+U|0,g.h3=g.h3+W|0,Q-=64}}},9386:(nt,_e,m)=>{var n=m(8659);m(8449),nt.exports=n.mgf=n.mgf||{},n.mgf.mgf1=n.mgf1},8449:(nt,_e,m)=>{var n=m(8659);m(4747),n.mgf=n.mgf||{},(nt.exports=n.mgf.mgf1=n.mgf1=n.mgf1||{}).create=function(h){return{generate:function(y,w){for(var f=new n.util.ByteBuffer,x=Math.ceil(w/h.digestLength),b=0;b<x;b++){var g=new n.util.ByteBuffer;g.putInt32(b),h.start(),h.update(y+g.getBytes()),f.putBuffer(h.digest())}return f.truncate(f.length()-w),f.getBytes()}}}},6078:(nt,_e,m)=>{var n=m(8659);n.pki=n.pki||{};var e=nt.exports=n.pki.oids=n.oids=n.oids||{};function h(y,w){e[y]=w,e[w]=y}function S(y,w){e[y]=w}h("1.2.840.113549.1.1.1","rsaEncryption"),h("1.2.840.113549.1.1.4","md5WithRSAEncryption"),h("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),h("1.2.840.113549.1.1.7","RSAES-OAEP"),h("1.2.840.113549.1.1.8","mgf1"),h("1.2.840.113549.1.1.9","pSpecified"),h("1.2.840.113549.1.1.10","RSASSA-PSS"),h("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),h("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),h("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),h("1.3.101.112","EdDSA25519"),h("1.2.840.10040.4.3","dsa-with-sha1"),h("1.3.14.3.2.7","desCBC"),h("1.3.14.3.2.26","sha1"),h("1.3.14.3.2.29","sha1WithRSASignature"),h("2.16.840.1.101.3.4.2.1","sha256"),h("2.16.840.1.101.3.4.2.2","sha384"),h("2.16.840.1.101.3.4.2.3","sha512"),h("2.16.840.1.101.3.4.2.4","sha224"),h("2.16.840.1.101.3.4.2.5","sha512-224"),h("2.16.840.1.101.3.4.2.6","sha512-256"),h("1.2.840.113549.2.2","md2"),h("1.2.840.113549.2.5","md5"),h("1.2.840.113549.1.7.1","data"),h("1.2.840.113549.1.7.2","signedData"),h("1.2.840.113549.1.7.3","envelopedData"),h("1.2.840.113549.1.7.4","signedAndEnvelopedData"),h("1.2.840.113549.1.7.5","digestedData"),h("1.2.840.113549.1.7.6","encryptedData"),h("1.2.840.113549.1.9.1","emailAddress"),h("1.2.840.113549.1.9.2","unstructuredName"),h("1.2.840.113549.1.9.3","contentType"),h("1.2.840.113549.1.9.4","messageDigest"),h("1.2.840.113549.1.9.5","signingTime"),h("1.2.840.113549.1.9.6","counterSignature"),h("1.2.840.113549.1.9.7","challengePassword"),h("1.2.840.113549.1.9.8","unstructuredAddress"),h("1.2.840.113549.1.9.14","extensionRequest"),h("1.2.840.113549.1.9.20","friendlyName"),h("1.2.840.113549.1.9.21","localKeyId"),h("1.2.840.113549.1.9.22.1","x509Certificate"),h("1.2.840.113549.1.12.10.1.1","keyBag"),h("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),h("1.2.840.113549.1.12.10.1.3","certBag"),h("1.2.840.113549.1.12.10.1.4","crlBag"),h("1.2.840.113549.1.12.10.1.5","secretBag"),h("1.2.840.113549.1.12.10.1.6","safeContentsBag"),h("1.2.840.113549.1.5.13","pkcs5PBES2"),h("1.2.840.113549.1.5.12","pkcs5PBKDF2"),h("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),h("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),h("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),h("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),h("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),h("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),h("1.2.840.113549.2.7","hmacWithSHA1"),h("1.2.840.113549.2.8","hmacWithSHA224"),h("1.2.840.113549.2.9","hmacWithSHA256"),h("1.2.840.113549.2.10","hmacWithSHA384"),h("1.2.840.113549.2.11","hmacWithSHA512"),h("1.2.840.113549.3.7","des-EDE3-CBC"),h("2.16.840.1.101.3.4.1.2","aes128-CBC"),h("2.16.840.1.101.3.4.1.22","aes192-CBC"),h("2.16.840.1.101.3.4.1.42","aes256-CBC"),h("2.5.4.3","commonName"),h("2.5.4.4","surname"),h("2.5.4.5","serialNumber"),h("2.5.4.6","countryName"),h("2.5.4.7","localityName"),h("2.5.4.8","stateOrProvinceName"),h("2.5.4.9","streetAddress"),h("2.5.4.10","organizationName"),h("2.5.4.11","organizationalUnitName"),h("2.5.4.12","title"),h("2.5.4.13","description"),h("2.5.4.15","businessCategory"),h("2.5.4.17","postalCode"),h("2.5.4.42","givenName"),h("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),h("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),h("2.16.840.1.113730.1.1","nsCertType"),h("2.16.840.1.113730.1.13","nsComment"),S("2.5.29.1","authorityKeyIdentifier"),S("2.5.29.2","keyAttributes"),S("2.5.29.3","certificatePolicies"),S("2.5.29.4","keyUsageRestriction"),S("2.5.29.5","policyMapping"),S("2.5.29.6","subtreesConstraint"),S("2.5.29.7","subjectAltName"),S("2.5.29.8","issuerAltName"),S("2.5.29.9","subjectDirectoryAttributes"),S("2.5.29.10","basicConstraints"),S("2.5.29.11","nameConstraints"),S("2.5.29.12","policyConstraints"),S("2.5.29.13","basicConstraints"),h("2.5.29.14","subjectKeyIdentifier"),h("2.5.29.15","keyUsage"),S("2.5.29.16","privateKeyUsagePeriod"),h("2.5.29.17","subjectAltName"),h("2.5.29.18","issuerAltName"),h("2.5.29.19","basicConstraints"),S("2.5.29.20","cRLNumber"),S("2.5.29.21","cRLReason"),S("2.5.29.22","expirationDate"),S("2.5.29.23","instructionCode"),S("2.5.29.24","invalidityDate"),S("2.5.29.25","cRLDistributionPoints"),S("2.5.29.26","issuingDistributionPoint"),S("2.5.29.27","deltaCRLIndicator"),S("2.5.29.28","issuingDistributionPoint"),S("2.5.29.29","certificateIssuer"),S("2.5.29.30","nameConstraints"),h("2.5.29.31","cRLDistributionPoints"),h("2.5.29.32","certificatePolicies"),S("2.5.29.33","policyMappings"),S("2.5.29.34","policyConstraints"),h("2.5.29.35","authorityKeyIdentifier"),S("2.5.29.36","policyConstraints"),h("2.5.29.37","extKeyUsage"),S("2.5.29.46","freshestCRL"),S("2.5.29.54","inhibitAnyPolicy"),h("1.3.6.1.4.1.11129.2.4.2","timestampList"),h("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),h("1.3.6.1.5.5.7.3.1","serverAuth"),h("1.3.6.1.5.5.7.3.2","clientAuth"),h("1.3.6.1.5.5.7.3.3","codeSigning"),h("1.3.6.1.5.5.7.3.4","emailProtection"),h("1.3.6.1.5.5.7.3.8","timeStamping")},2158:(nt,_e,m)=>{var n=m(8659);if(m(1298),m(7791),m(279),m(979),m(6078),m(7949),m(8604),m(8365),m(209),m(5517),m(4747),typeof e>"u")var e=n.jsbn.BigInteger;var h=n.asn1,S=n.pki=n.pki||{};nt.exports=S.pbe=n.pbe=n.pbe||{};var y=S.oids,w={name:"EncryptedPrivateKeyInfo",tagClass:h.Class.UNIVERSAL,type:h.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:h.Class.UNIVERSAL,type:h.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:h.Class.UNIVERSAL,type:h.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:h.Class.UNIVERSAL,type:h.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:h.Class.UNIVERSAL,type:h.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},f={name:"PBES2Algorithms",tagClass:h.Class.UNIVERSAL,type:h.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:h.Class.UNIVERSAL,type:h.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:h.Class.UNIVERSAL,type:h.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:h.Class.UNIVERSAL,type:h.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:h.Class.UNIVERSAL,type:h.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:h.Class.UNIVERSAL,type:h.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:h.Class.UNIVERSAL,type:h.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:h.Class.UNIVERSAL,type:h.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:h.Class.UNIVERSAL,type:h.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:h.Class.UNIVERSAL,type:h.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:h.Class.UNIVERSAL,type:h.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:h.Class.UNIVERSAL,type:h.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},x={name:"pkcs-12PbeParams",tagClass:h.Class.UNIVERSAL,type:h.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:h.Class.UNIVERSAL,type:h.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:h.Class.UNIVERSAL,type:h.Type.INTEGER,constructed:!1,capture:"iterations"}]};function b(k,O){return k.start().update(O).digest().getBytes()}function g(k){var O;if(k){if(!(O=S.oids[h.derToOid(k)])){var P=new Error("Unsupported PRF OID.");throw P.oid=k,P.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],P}}else O="hmacWithSHA1";return N(O)}function N(k){var O=n.md;switch(k){case"hmacWithSHA224":O=n.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":k=k.substr(8).toLowerCase();break;default:var P=new Error("Unsupported PRF algorithm.");throw P.algorithm=k,P.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],P}if(!O||!(k in O))throw new Error("Unknown hash algorithm: "+k);return O[k].create()}S.encryptPrivateKeyInfo=function(k,O,P){(P=P||{}).saltSize=P.saltSize||8,P.count=P.count||2048,P.algorithm=P.algorithm||"aes128",P.prfAlgorithm=P.prfAlgorithm||"sha1";var B,V,Q,U=n.random.getBytesSync(P.saltSize),W=P.count,M=h.integerToDer(W);if(0===P.algorithm.indexOf("aes")||"des"===P.algorithm){var Y,fe,J;switch(P.algorithm){case"aes128":B=16,Y=16,fe=y["aes128-CBC"],J=n.aes.createEncryptionCipher;break;case"aes192":B=24,Y=16,fe=y["aes192-CBC"],J=n.aes.createEncryptionCipher;break;case"aes256":B=32,Y=16,fe=y["aes256-CBC"],J=n.aes.createEncryptionCipher;break;case"des":B=8,Y=8,fe=y.desCBC,J=n.des.createEncryptionCipher;break;default:throw(ee=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=P.algorithm,ee}var G="hmacWith"+P.prfAlgorithm.toUpperCase(),E=N(G),te=n.pkcs5.pbkdf2(O,U,W,B,E),$=n.random.getBytesSync(Y);(ue=J(te)).start($),ue.update(h.toDer(k)),ue.finish(),Q=ue.output.getBytes();var me=function R(k,O,P,U){var W=h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,k),h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,O.getBytes())]);return"hmacWithSHA1"!==U&&W.value.push(h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,n.util.hexToBytes(P.toString(16))),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(S.oids[U]).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.NULL,!1,"")])),W}(U,M,B,G);V=h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(y.pkcs5PBES2).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(y.pkcs5PBKDF2).getBytes()),me]),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(fe).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,$)])])])}else{var ee;if("3des"!==P.algorithm)throw(ee=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=P.algorithm,ee;B=24;var ue,we=new n.util.ByteBuffer(U);te=S.pbe.generatePkcs12Key(O,we,1,W,B),$=S.pbe.generatePkcs12Key(O,we,2,W,B),(ue=n.des.createEncryptionCipher(te)).start($),ue.update(h.toDer(k)),ue.finish(),Q=ue.output.getBytes(),V=h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OID,!1,h.oidToDer(y["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,U),h.create(h.Class.UNIVERSAL,h.Type.INTEGER,!1,M.getBytes())])])}return h.create(h.Class.UNIVERSAL,h.Type.SEQUENCE,!0,[V,h.create(h.Class.UNIVERSAL,h.Type.OCTETSTRING,!1,Q)])},S.decryptPrivateKeyInfo=function(k,O){var P=null,U={},W=[];if(!h.validate(k,w,U,W)){var M=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw M.errors=W,M}var B=h.derToOid(U.encryptionOid),V=S.pbe.getCipher(B,U.encryptionParams,O),Q=n.util.createBuffer(U.encryptedData);return V.update(Q),V.finish()&&(P=h.fromDer(V.output)),P},S.encryptedPrivateKeyToPem=function(k,O){var P={type:"ENCRYPTED PRIVATE KEY",body:h.toDer(k).getBytes()};return n.pem.encode(P,{maxline:O})},S.encryptedPrivateKeyFromPem=function(k){var O=n.pem.decode(k)[0];if("ENCRYPTED PRIVATE KEY"!==O.type){var P=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw P.headerType=O.type,P}if(O.procType&&"ENCRYPTED"===O.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return h.fromDer(O.body)},S.encryptRsaPrivateKey=function(k,O,P){if(!(P=P||{}).legacy){var U=S.wrapRsaPrivateKey(S.privateKeyToAsn1(k));return U=S.encryptPrivateKeyInfo(U,O,P),S.encryptedPrivateKeyToPem(U)}var W,M,B,V;switch(P.algorithm){case"aes128":W="AES-128-CBC",B=16,M=n.random.getBytesSync(16),V=n.aes.createEncryptionCipher;break;case"aes192":W="AES-192-CBC",B=24,M=n.random.getBytesSync(16),V=n.aes.createEncryptionCipher;break;case"aes256":W="AES-256-CBC",B=32,M=n.random.getBytesSync(16),V=n.aes.createEncryptionCipher;break;case"3des":W="DES-EDE3-CBC",B=24,M=n.random.getBytesSync(8),V=n.des.createEncryptionCipher;break;case"des":W="DES-CBC",B=8,M=n.random.getBytesSync(8),V=n.des.createEncryptionCipher;break;default:var Q=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+P.algorithm+'".');throw Q.algorithm=P.algorithm,Q}var fe=V(n.pbe.opensslDeriveBytes(O,M.substr(0,8),B));fe.start(M),fe.update(h.toDer(S.privateKeyToAsn1(k))),fe.finish();var J={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:W,parameters:n.util.bytesToHex(M).toUpperCase()},body:fe.output.getBytes()};return n.pem.encode(J)},S.decryptRsaPrivateKey=function(k,O){var P=null,U=n.pem.decode(k)[0];if("ENCRYPTED PRIVATE KEY"!==U.type&&"PRIVATE KEY"!==U.type&&"RSA PRIVATE KEY"!==U.type)throw(W=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=W,W;if(U.procType&&"ENCRYPTED"===U.procType.type){var M,B;switch(U.dekInfo.algorithm){case"DES-CBC":M=8,B=n.des.createDecryptionCipher;break;case"DES-EDE3-CBC":M=24,B=n.des.createDecryptionCipher;break;case"AES-128-CBC":M=16,B=n.aes.createDecryptionCipher;break;case"AES-192-CBC":M=24,B=n.aes.createDecryptionCipher;break;case"AES-256-CBC":M=32,B=n.aes.createDecryptionCipher;break;case"RC2-40-CBC":M=5,B=function(J){return n.rc2.createDecryptionCipher(J,40)};break;case"RC2-64-CBC":M=8,B=function(J){return n.rc2.createDecryptionCipher(J,64)};break;case"RC2-128-CBC":M=16,B=function(J){return n.rc2.createDecryptionCipher(J,128)};break;default:var W;throw(W=new Error('Could not decrypt private key; unsupported encryption algorithm "'+U.dekInfo.algorithm+'".')).algorithm=U.dekInfo.algorithm,W}var V=n.util.hexToBytes(U.dekInfo.parameters),Y=B(n.pbe.opensslDeriveBytes(O,V.substr(0,8),M));if(Y.start(V),Y.update(n.util.createBuffer(U.body)),!Y.finish())return P;P=Y.output.getBytes()}else P=U.body;return null!==(P="ENCRYPTED PRIVATE KEY"===U.type?S.decryptPrivateKeyInfo(h.fromDer(P),O):h.fromDer(P))&&(P=S.privateKeyFromAsn1(P)),P},S.pbe.generatePkcs12Key=function(k,O,P,U,W,M){var B,V;if(typeof M>"u"||null===M){if(!("sha1"in n.md))throw new Error('"sha1" hash algorithm unavailable.');M=n.md.sha1.create()}var Q=M.digestLength,Y=M.blockLength,fe=new n.util.ByteBuffer,J=new n.util.ByteBuffer;if(null!=k){for(V=0;V<k.length;V++)J.putInt16(k.charCodeAt(V));J.putInt16(0)}var ee=J.length(),G=O.length(),E=new n.util.ByteBuffer;E.fillWithByte(P,Y);var te=Y*Math.ceil(G/Y),$=new n.util.ByteBuffer;for(V=0;V<te;V++)$.putByte(O.at(V%G));var ue=Y*Math.ceil(ee/Y),me=new n.util.ByteBuffer;for(V=0;V<ue;V++)me.putByte(J.at(V%ee));var we=$;we.putBuffer(me);for(var ye=Math.ceil(W/Q),qe=1;qe<=ye;qe++){var De=new n.util.ByteBuffer;De.putBytes(E.bytes()),De.putBytes(we.bytes());for(var Ge=0;Ge<U;Ge++)M.start(),M.update(De.getBytes()),De=M.digest();var ve=new n.util.ByteBuffer;for(V=0;V<Y;V++)ve.putByte(De.at(V%Q));var c=Math.ceil(G/Y)+Math.ceil(ee/Y),tt=new n.util.ByteBuffer;for(B=0;B<c;B++){var _t=new n.util.ByteBuffer(we.getBytes(Y)),ct=511;for(V=ve.length()-1;V>=0;V--)ct>>=8,ct+=ve.at(V)+_t.at(V),_t.setAt(V,255&ct);tt.putBuffer(_t)}we=tt,fe.putBuffer(De)}return fe.truncate(fe.length()-W),fe},S.pbe.getCipher=function(k,O,P){switch(k){case S.oids.pkcs5PBES2:return S.pbe.getCipherForPBES2(k,O,P);case S.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case S.oids["pbewithSHAAnd40BitRC2-CBC"]:return S.pbe.getCipherForPKCS12PBE(k,O,P);default:var U=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw U.oid=k,U.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],U}},S.pbe.getCipherForPBES2=function(k,O,P){var M,U={},W=[];if(!h.validate(O,f,U,W))throw(M=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=W,M;if((k=h.derToOid(U.kdfOid))!==S.oids.pkcs5PBKDF2)throw(M=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=k,M.supportedOids=["pkcs5PBKDF2"],M;if((k=h.derToOid(U.encOid))!==S.oids["aes128-CBC"]&&k!==S.oids["aes192-CBC"]&&k!==S.oids["aes256-CBC"]&&k!==S.oids["des-EDE3-CBC"]&&k!==S.oids.desCBC)throw(M=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=k,M.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],M;var Q,Y,B=U.kdfSalt,V=n.util.createBuffer(U.kdfIterationCount);switch(V=V.getInt(V.length()<<3),S.oids[k]){case"aes128-CBC":Q=16,Y=n.aes.createDecryptionCipher;break;case"aes192-CBC":Q=24,Y=n.aes.createDecryptionCipher;break;case"aes256-CBC":Q=32,Y=n.aes.createDecryptionCipher;break;case"des-EDE3-CBC":Q=24,Y=n.des.createDecryptionCipher;break;case"desCBC":Q=8,Y=n.des.createDecryptionCipher}var fe=g(U.prfOid),J=n.pkcs5.pbkdf2(P,B,V,Q,fe),ee=U.encIv,G=Y(J);return G.start(ee),G},S.pbe.getCipherForPKCS12PBE=function(k,O,P){var U={},W=[];if(!h.validate(O,x,U,W))throw(M=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=W,M;var Q,Y,fe,B=n.util.createBuffer(U.salt),V=n.util.createBuffer(U.iterations);switch(V=V.getInt(V.length()<<3),k){case S.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:Q=24,Y=8,fe=n.des.startDecrypting;break;case S.oids["pbewithSHAAnd40BitRC2-CBC"]:Q=5,Y=8,fe=function(te,$){var ue=n.rc2.createDecryptionCipher(te,40);return ue.start($,null),ue};break;default:var M;throw(M=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=k,M}var J=g(U.prfOid),ee=S.pbe.generatePkcs12Key(P,B,1,V,Q,J);return J.start(),fe(ee,S.pbe.generatePkcs12Key(P,B,2,V,Y,J))},S.pbe.opensslDeriveBytes=function(k,O,P,U){if(typeof U>"u"||null===U){if(!("md5"in n.md))throw new Error('"md5" hash algorithm unavailable.');U=n.md.md5.create()}null===O&&(O="");for(var W=[b(U,k+O)],M=16,B=1;M<P;++B,M+=16)W.push(b(U,W[B-1]+k+O));return W.join("").substr(0,P)}},7949:(nt,_e,m)=>{var n=m(8659);m(9032),m(979),m(4747);var h,e=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(h=m(5819)),nt.exports=n.pbkdf2=e.pbkdf2=function(S,y,w,f,x,b){if("function"==typeof x&&(b=x,x=null),n.util.isNodejs&&!n.options.usePureJavaScript&&h.pbkdf2&&(null===x||"object"!=typeof x)&&(h.pbkdf2Sync.length>4||!x||"sha1"===x))return"string"!=typeof x&&(x="sha1"),S=Buffer.from(S,"binary"),y=Buffer.from(y,"binary"),b?4===h.pbkdf2Sync.length?h.pbkdf2(S,y,w,f,function(fe,J){if(fe)return b(fe);b(null,J.toString("binary"))}):h.pbkdf2(S,y,w,f,x,function(fe,J){if(fe)return b(fe);b(null,J.toString("binary"))}):4===h.pbkdf2Sync.length?h.pbkdf2Sync(S,y,w,f).toString("binary"):h.pbkdf2Sync(S,y,w,f,x).toString("binary");if((typeof x>"u"||null===x)&&(x="sha1"),"string"==typeof x){if(!(x in n.md.algorithms))throw new Error("Unknown hash algorithm: "+x);x=n.md[x].create()}var g=x.digestLength;if(f>4294967295*g){var N=new Error("Derived key is too long.");if(b)return b(N);throw N}var R=Math.ceil(f/g),k=f-(R-1)*g,O=n.hmac.create();O.start(x,S);var U,W,M,P="";if(!b){for(var B=1;B<=R;++B){O.start(null,null),O.update(y),O.update(n.util.int32ToBytes(B)),U=M=O.digest().getBytes();for(var V=2;V<=w;++V)O.start(null,null),O.update(M),W=O.digest().getBytes(),U=n.util.xorBytes(U,W,g),M=W;P+=B<R?U:U.substr(0,k)}return P}function Q(){if(B>R)return b(null,P);O.start(null,null),O.update(y),O.update(n.util.int32ToBytes(B)),U=M=O.digest().getBytes(),V=2,Y()}function Y(){if(V<=w)return O.start(null,null),O.update(M),W=O.digest().getBytes(),U=n.util.xorBytes(U,W,g),M=W,++V,n.util.setImmediate(Y);P+=B<R?U:U.substr(0,k),++B,Q()}B=1,Q()}},8604:(nt,_e,m)=>{var n=m(8659);m(4747);var e=nt.exports=n.pem=n.pem||{};function h(y){for(var w=y.name+": ",f=[],x=function(k,O){return" "+O},b=0;b<y.values.length;++b)f.push(y.values[b].replace(/^(\S+\r\n)/,x));w+=f.join(",")+"\r\n";var g=0,N=-1;for(b=0;b<w.length;++b,++g)if(g>65&&-1!==N){var R=w[N];","===R?(++N,w=w.substr(0,N)+"\r\n "+w.substr(N)):w=w.substr(0,N)+"\r\n"+R+w.substr(N+1),g=b-N-1,N=-1,++b}else(" "===w[b]||"\t"===w[b]||","===w[b])&&(N=b);return w}function S(y){return y.replace(/^\s+/,"")}e.encode=function(y,w){w=w||{};var x,f="-----BEGIN "+y.type+"-----\r\n";if(y.procType&&(f+=h(x={name:"Proc-Type",values:[String(y.procType.version),y.procType.type]})),y.contentDomain&&(f+=h(x={name:"Content-Domain",values:[y.contentDomain]})),y.dekInfo&&(x={name:"DEK-Info",values:[y.dekInfo.algorithm]},y.dekInfo.parameters&&x.values.push(y.dekInfo.parameters),f+=h(x)),y.headers)for(var b=0;b<y.headers.length;++b)f+=h(y.headers[b]);return y.procType&&(f+="\r\n"),(f+=n.util.encode64(y.body,w.maxline||64)+"\r\n")+"-----END "+y.type+"-----\r\n"},e.decode=function(y){for(var g,w=[],f=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,x=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,b=/\r?\n/;g=f.exec(y);){var N=g[1];"NEW CERTIFICATE REQUEST"===N&&(N="CERTIFICATE REQUEST");var R={type:N,procType:null,contentDomain:null,dekInfo:null,headers:[],body:n.util.decode64(g[3])};if(w.push(R),g[2]){for(var k=g[2].split(b),O=0;g&&O<k.length;){for(var P=k[O].replace(/\s+$/,""),U=O+1;U<k.length;++U){var W=k[U];if(!/\s/.test(W[0]))break;P+=W,O=U}if(g=P.match(x)){for(var M={name:g[1],values:[]},B=g[2].split(","),V=0;V<B.length;++V)M.values.push(S(B[V]));if(R.procType)if(R.contentDomain||"Content-Domain"!==M.name)if(R.dekInfo||"DEK-Info"!==M.name)R.headers.push(M);else{if(0===M.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');R.dekInfo={algorithm:B[0],parameters:B[1]||null}}else R.contentDomain=B[0]||"";else{if("Proc-Type"!==M.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==M.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');R.procType={version:B[0],type:B[1]}}}++O}if("ENCRYPTED"===R.procType&&!R.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===w.length)throw new Error("Invalid PEM formatted message.");return w}},7246:(nt,_e,m)=>{var n=m(8659);m(4747),m(8365),m(7690);var e=nt.exports=n.pkcs1=n.pkcs1||{};function h(S,y,w){w||(w=n.md.sha1.create());for(var f="",x=Math.ceil(y/w.digestLength),b=0;b<x;++b){var g=String.fromCharCode(b>>24&255,b>>16&255,b>>8&255,255&b);w.start(),w.update(S+g),f+=w.digest().getBytes()}return f.substring(0,y)}e.encode_rsa_oaep=function(S,y,w){var f,x,b,g;"string"==typeof w?(f=w,x=arguments[3]||void 0,b=arguments[4]||void 0):w&&(f=w.label||void 0,x=w.seed||void 0,b=w.md||void 0,w.mgf1&&w.mgf1.md&&(g=w.mgf1.md)),b?b.start():b=n.md.sha1.create(),g||(g=b);var N=Math.ceil(S.n.bitLength()/8),R=N-2*b.digestLength-2;if(y.length>R)throw(k=new Error("RSAES-OAEP input message length is too long.")).length=y.length,k.maxLength=R,k;f||(f=""),b.update(f,"raw");for(var O=b.digest(),P="",U=R-y.length,W=0;W<U;W++)P+="\0";var M=O.getBytes()+P+"\x01"+y;if(x){if(x.length!==b.digestLength){var k;throw(k=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=x.length,k.digestLength=b.digestLength,k}}else x=n.random.getBytes(b.digestLength);var B=h(x,N-b.digestLength-1,g),V=n.util.xorBytes(M,B,M.length),Q=h(V,b.digestLength,g),Y=n.util.xorBytes(x,Q,x.length);return"\0"+Y+V},e.decode_rsa_oaep=function(S,y,w){var f,x,b;"string"==typeof w?(f=w,x=arguments[3]||void 0):w&&(f=w.label||void 0,x=w.md||void 0,w.mgf1&&w.mgf1.md&&(b=w.mgf1.md));var g=Math.ceil(S.n.bitLength()/8);if(y.length!==g)throw(V=new Error("RSAES-OAEP encoded message length is invalid.")).length=y.length,V.expectedLength=g,V;if(void 0===x?x=n.md.sha1.create():x.start(),b||(b=x),g<2*x.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");f||(f=""),x.update(f,"raw");for(var N=x.digest().getBytes(),R=y.charAt(0),k=y.substring(1,x.digestLength+1),O=y.substring(1+x.digestLength),P=h(O,x.digestLength,b),U=n.util.xorBytes(k,P,k.length),W=h(U,g-x.digestLength-1,b),M=n.util.xorBytes(O,W,O.length),B=M.substring(0,x.digestLength),V="\0"!==R,Q=0;Q<x.digestLength;++Q)V|=N.charAt(Q)!==B.charAt(Q);for(var Y=1,fe=x.digestLength,J=x.digestLength;J<M.length;J++){var ee=M.charCodeAt(J),G=1&ee^1,E=Y?65534:0;V|=ee&E,fe+=Y&=G}if(V||1!==M.charCodeAt(fe))throw new Error("Invalid RSAES-OAEP padding.");return M.substring(fe+1)}},562:(nt,_e,m)=>{var n=m(8659);m(7791),m(9032),m(6078),m(4957),m(2158),m(8365),m(5517),m(7690),m(4747),m(5911);var e=n.asn1,h=n.pki,S=nt.exports=n.pkcs12=n.pkcs12||{},y={name:"ContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:e.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},w={name:"PFX",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},y,{name:"PFX.macData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:e.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},f={name:"SafeBag",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:e.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},x={name:"Attribute",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,capture:"values"}]},b={name:"CertBag",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:e.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:e.Class.UNIVERSAL,type:e.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function g(U,W,M,B){for(var V=[],Q=0;Q<U.length;Q++)for(var Y=0;Y<U[Q].safeBags.length;Y++){var fe=U[Q].safeBags[Y];if(void 0===B||fe.type===B){if(null===W){V.push(fe);continue}void 0!==fe.attributes[W]&&fe.attributes[W].indexOf(M)>=0&&V.push(fe)}}return V}function N(U){if(U.composed||U.constructed){for(var W=n.util.createBuffer(),M=0;M<U.value.length;++M)W.putBytes(U.value[M].value);U.composed=U.constructed=!1,U.value=W.getBytes()}return U}function k(U,W){var M={},B=[];if(!e.validate(U,n.pkcs7.asn1.encryptedDataValidator,M,B))throw(V=new Error("Cannot read EncryptedContentInfo.")).errors=B,V;var V,Q=e.derToOid(M.contentType);if(Q!==h.oids.data)throw(V=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=Q,V;Q=e.derToOid(M.encAlgorithm);var Y=h.pbe.getCipher(Q,M.encParameter,W),fe=N(M.encryptedContentAsn1),J=n.util.createBuffer(fe.value);if(Y.update(J),!Y.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return Y.output.getBytes()}function O(U,W,M){if(!W&&0===U.length)return[];if((U=e.fromDer(U,W)).tagClass!==e.Class.UNIVERSAL||U.type!==e.Type.SEQUENCE||!0!==U.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var B=[],V=0;V<U.value.length;V++){var Y={},fe=[];if(!e.validate(U.value[V],f,Y,fe))throw(J=new Error("Cannot read SafeBag.")).errors=fe,J;var ee={type:e.derToOid(Y.bagId),attributes:P(Y.bagAttributes)};B.push(ee);var G,E,te=Y.bagValue.value[0];switch(ee.type){case h.oids.pkcs8ShroudedKeyBag:if(null===(te=h.decryptPrivateKeyInfo(te,M)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case h.oids.keyBag:try{ee.key=h.privateKeyFromAsn1(te)}catch{ee.key=null,ee.asn1=te}continue;case h.oids.certBag:G=b,E=function(){if(e.derToOid(Y.certId)!==h.oids.x509Certificate){var ue=new Error("Unsupported certificate type, only X.509 supported.");throw ue.oid=e.derToOid(Y.certId),ue}var me=e.fromDer(Y.cert,W);try{ee.cert=h.certificateFromAsn1(me,!0)}catch{ee.cert=null,ee.asn1=me}};break;default:var J;throw(J=new Error("Unsupported PKCS#12 SafeBag type.")).oid=ee.type,J}if(void 0!==G&&!e.validate(te,G,Y,fe))throw(J=new Error("Cannot read PKCS#12 "+G.name)).errors=fe,J;E()}return B}function P(U){var W={};if(void 0!==U)for(var M=0;M<U.length;++M){var B={},V=[];if(!e.validate(U[M],x,B,V)){var Q=new Error("Cannot read PKCS#12 BagAttribute.");throw Q.errors=V,Q}var Y=e.derToOid(B.oid);if(void 0!==h.oids[Y]){W[h.oids[Y]]=[];for(var fe=0;fe<B.values.length;++fe)W[h.oids[Y]].push(B.values[fe].value)}}return W}S.pkcs12FromAsn1=function(U,W,M){"string"==typeof W?(M=W,W=!0):void 0===W&&(W=!0);var B={};if(!e.validate(U,w,B,[]))throw(Q=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=Q,Q;var Q,Y={version:B.version.charCodeAt(0),safeContents:[],getBags:function(we){var qe,ye={};return"localKeyId"in we?qe=we.localKeyId:"localKeyIdHex"in we&&(qe=n.util.hexToBytes(we.localKeyIdHex)),void 0===qe&&!("friendlyName"in we)&&"bagType"in we&&(ye[we.bagType]=g(Y.safeContents,null,null,we.bagType)),void 0!==qe&&(ye.localKeyId=g(Y.safeContents,"localKeyId",qe,we.bagType)),"friendlyName"in we&&(ye.friendlyName=g(Y.safeContents,"friendlyName",we.friendlyName,we.bagType)),ye},getBagsByFriendlyName:function(we,ye){return g(Y.safeContents,"friendlyName",we,ye)},getBagsByLocalKeyId:function(we,ye){return g(Y.safeContents,"localKeyId",we,ye)}};if(3!==B.version.charCodeAt(0))throw(Q=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=B.version.charCodeAt(0),Q;if(e.derToOid(B.contentType)!==h.oids.data)throw(Q=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=e.derToOid(B.contentType),Q;var fe=B.content.value[0];if(fe.tagClass!==e.Class.UNIVERSAL||fe.type!==e.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(fe=N(fe),B.mac){var J=null,ee=0,G=e.derToOid(B.macAlgorithm);switch(G){case h.oids.sha1:J=n.md.sha1.create(),ee=20;break;case h.oids.sha256:J=n.md.sha256.create(),ee=32;break;case h.oids.sha384:J=n.md.sha384.create(),ee=48;break;case h.oids.sha512:J=n.md.sha512.create(),ee=64;break;case h.oids.md5:J=n.md.md5.create(),ee=16}if(null===J)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+G);var E=new n.util.ByteBuffer(B.macSalt),te="macIterations"in B?parseInt(n.util.bytesToHex(B.macIterations),16):1,$=S.generateKey(M,E,3,te,ee,J),ue=n.hmac.create();if(ue.start(J,$),ue.update(fe.value),ue.getMac().getBytes()!==B.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function R(U,W,M,B){if((W=e.fromDer(W,M)).tagClass!==e.Class.UNIVERSAL||W.type!==e.Type.SEQUENCE||!0!==W.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var V=0;V<W.value.length;V++){var Y={},fe=[];if(!e.validate(W.value[V],y,Y,fe))throw(J=new Error("Cannot read ContentInfo.")).errors=fe,J;var ee={encrypted:!1},G=null,E=Y.content.value[0];switch(e.derToOid(Y.contentType)){case h.oids.data:if(E.tagClass!==e.Class.UNIVERSAL||E.type!==e.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");G=N(E).value;break;case h.oids.encryptedData:G=k(E,B),ee.encrypted=!0;break;default:var J;throw(J=new Error("Unsupported PKCS#12 contentType.")).contentType=e.derToOid(Y.contentType),J}ee.safeBags=O(G,M,B),U.safeContents.push(ee)}}(Y,fe.value,W,M),Y},S.toPkcs12Asn1=function(U,W,M,B){(B=B||{}).saltSize=B.saltSize||8,B.count=B.count||2048,B.algorithm=B.algorithm||B.encAlgorithm||"aes128","useMac"in B||(B.useMac=!0),"localKeyId"in B||(B.localKeyId=null),"generateLocalKeyId"in B||(B.generateLocalKeyId=!0);var Q,V=B.localKeyId;if(null!==V)V=n.util.hexToBytes(V);else if(B.generateLocalKeyId)if(W){var Y=n.util.isArray(W)?W[0]:W;"string"==typeof Y&&(Y=h.certificateFromPem(Y)),(fe=n.md.sha1.create()).update(e.toDer(h.certificateToAsn1(Y)).getBytes()),V=fe.digest().getBytes()}else V=n.random.getBytes(20);var J=[];null!==V&&J.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.oids.localKeyId).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,V)])])),"friendlyName"in B&&J.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.oids.friendlyName).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,e.Type.BMPSTRING,!1,B.friendlyName)])])),J.length>0&&(Q=e.create(e.Class.UNIVERSAL,e.Type.SET,!0,J));var ee=[],G=[];null!==W&&(G=n.util.isArray(W)?W:[W]);for(var E=[],te=0;te<G.length;++te){"string"==typeof(W=G[te])&&(W=h.certificateFromPem(W));var $=0===te?Q:void 0,ue=h.certificateToAsn1(W),me=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.oids.certBag).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.oids.x509Certificate).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,e.toDer(ue).getBytes())])])]),$]);E.push(me)}if(E.length>0){var we=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,E),ye=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.oids.data).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,e.toDer(we).getBytes())])]);ee.push(ye)}var qe=null;if(null!==U){var De=h.wrapRsaPrivateKey(h.privateKeyToAsn1(U));qe=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,null===M?[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.oids.keyBag).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[De]),Q]:[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.oids.pkcs8ShroudedKeyBag).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[h.encryptPrivateKeyInfo(De,M,B)]),Q]);var Ge=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[qe]),ve=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.oids.data).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,e.toDer(Ge).getBytes())])]);ee.push(ve)}var tt,c=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,ee);if(B.useMac){var fe=n.md.sha1.create(),_t=new n.util.ByteBuffer(n.random.getBytes(B.saltSize)),ct=B.count,rt=(U=S.generateKey(M,_t,3,ct,20),n.hmac.create());rt.start(fe,U),rt.update(e.toDer(c).getBytes());var ft=rt.getMac();tt=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.oids.sha1).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")]),e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,ft.getBytes())]),e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,_t.getBytes()),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(ct).getBytes())])}return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(3).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(h.oids.data).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,e.toDer(c).getBytes())])]),tt])},S.generateKey=n.pbe.generatePkcs12Key},422:(nt,_e,m)=>{var n=m(8659);m(1298),m(7791),m(279),m(6078),m(8604),m(4957),m(8365),m(4747),m(5911);var e=n.asn1,h=nt.exports=n.pkcs7=n.pkcs7||{};function S(U){var W={},M=[];if(!e.validate(U,h.asn1.recipientInfoValidator,W,M)){var B=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw B.errors=M,B}return{version:W.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(W.issuer),serialNumber:n.util.createBuffer(W.serial).toHex(),encryptedContent:{algorithm:e.derToOid(W.encAlgorithm),parameter:W.encParameter?W.encParameter.value:void 0,content:W.encKey}}}function y(U){return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(U.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:U.issuer}),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,n.util.hexToBytes(U.serialNumber))]),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(U.encryptedContent.algorithm).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")]),e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,U.encryptedContent.content)])}function f(U){for(var W=[],M=0;M<U.length;++M)W.push(y(U[M]));return W}function b(U){var W=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(U.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:U.issuer}),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,n.util.hexToBytes(U.serialNumber))]),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(U.digestAlgorithm).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])]);if(U.authenticatedAttributesAsn1&&W.value.push(U.authenticatedAttributesAsn1),W.value.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(U.signatureAlgorithm).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])),W.value.push(e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,U.signature)),U.unauthenticatedAttributes.length>0){for(var M=e.create(e.Class.CONTEXT_SPECIFIC,1,!0,[]),B=0;B<U.unauthenticatedAttributes.length;++B)M.values.push(R(U.unauthenticatedAttributes[B]));W.value.push(M)}return W}function R(U){var W;if(U.type===n.pki.oids.contentType)W=e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(U.value).getBytes());else if(U.type===n.pki.oids.messageDigest)W=e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,U.value.bytes());else if(U.type===n.pki.oids.signingTime){var M=new Date("1950-01-01T00:00:00Z"),B=new Date("2050-01-01T00:00:00Z"),V=U.value;if("string"==typeof V){var Q=Date.parse(V);V=isNaN(Q)?13===V.length?e.utcTimeToDate(V):e.generalizedTimeToDate(V):new Date(Q)}W=V>=M&&V<B?e.create(e.Class.UNIVERSAL,e.Type.UTCTIME,!1,e.dateToUtcTime(V)):e.create(e.Class.UNIVERSAL,e.Type.GENERALIZEDTIME,!1,e.dateToGeneralizedTime(V))}return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(U.type).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[W])])}function k(U){return[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(n.pki.oids.data).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(U.algorithm).getBytes()),U.parameter?e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,U.parameter.getBytes()):void 0]),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,U.content.getBytes())])]}function O(U,W,M){var B={};if(!e.validate(W,M,B,[])){var Q=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw Q.errors=Q,Q}if(e.derToOid(B.contentType)!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(B.encryptedContent){var fe="";if(n.util.isArray(B.encryptedContent))for(var J=0;J<B.encryptedContent.length;++J){if(B.encryptedContent[J].type!==e.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");fe+=B.encryptedContent[J].value}else fe=B.encryptedContent;U.encryptedContent={algorithm:e.derToOid(B.encAlgorithm),parameter:n.util.createBuffer(B.encParameter.value),content:n.util.createBuffer(fe)}}if(B.content){if(fe="",n.util.isArray(B.content))for(J=0;J<B.content.length;++J){if(B.content[J].type!==e.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");fe+=B.content[J].value}else fe=B.content;U.content=n.util.createBuffer(fe)}return U.version=B.version.charCodeAt(0),U.rawCapture=B,B}function P(U){if(void 0===U.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===U.content){var W;switch(U.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:W=n.aes.createDecryptionCipher(U.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:W=n.des.createDecryptionCipher(U.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+U.encryptedContent.algorithm)}if(W.start(U.encryptedContent.parameter),W.update(U.encryptedContent.content),!W.finish())throw new Error("Symmetric decryption failed.");U.content=W.output}}h.messageFromPem=function(U){var W=n.pem.decode(U)[0];if("PKCS7"!==W.type){var M=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw M.headerType=W.type,M}if(W.procType&&"ENCRYPTED"===W.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var B=e.fromDer(W.body);return h.messageFromAsn1(B)},h.messageToPem=function(U,W){var M={type:"PKCS7",body:e.toDer(U.toAsn1()).getBytes()};return n.pem.encode(M,{maxline:W})},h.messageFromAsn1=function(U){var W={},M=[];if(!e.validate(U,h.asn1.contentInfoValidator,W,M)){var B=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw B.errors=M,B}var Q,V=e.derToOid(W.contentType);switch(V){case n.pki.oids.envelopedData:Q=h.createEnvelopedData();break;case n.pki.oids.encryptedData:Q=h.createEncryptedData();break;case n.pki.oids.signedData:Q=h.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+V+" is not (yet) supported.")}return Q.fromAsn1(W.content.value[0]),Q},h.createSignedData=function(){var U=null;return U={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(B){if(O(U,B,h.asn1.signedDataValidator),U.certificates=[],U.crls=[],U.digestAlgorithmIdentifiers=[],U.contentInfo=null,U.signerInfos=[],U.rawCapture.certificates)for(var V=U.rawCapture.certificates.value,Q=0;Q<V.length;++Q)U.certificates.push(n.pki.certificateFromAsn1(V[Q]))},toAsn1:function(){U.contentInfo||U.sign();for(var B=[],V=0;V<U.certificates.length;++V)B.push(n.pki.certificateToAsn1(U.certificates[V]));var Q=[],Y=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(U.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,U.digestAlgorithmIdentifiers),U.contentInfo])]);return B.length>0&&Y.value[0].value.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,B)),Q.length>0&&Y.value[0].value.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,Q)),Y.value[0].value.push(e.create(e.Class.UNIVERSAL,e.Type.SET,!0,U.signerInfos)),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(U.type).getBytes()),Y])},addSigner:function(B){var V=B.issuer,Q=B.serialNumber;if(B.certificate){var Y=B.certificate;"string"==typeof Y&&(Y=n.pki.certificateFromPem(Y)),V=Y.issuer.attributes,Q=Y.serialNumber}var fe=B.key;if(!fe)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof fe&&(fe=n.pki.privateKeyFromPem(fe));var J=B.digestAlgorithm||n.pki.oids.sha1;switch(J){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+J)}var ee=B.authenticatedAttributes||[];if(ee.length>0){for(var G=!1,E=!1,te=0;te<ee.length;++te){var $=ee[te];if(G||$.type!==n.pki.oids.contentType){if(E||$.type!==n.pki.oids.messageDigest);else if(E=!0,G)break}else if(G=!0,E)break}if(!G||!E)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}U.signers.push({key:fe,version:1,issuer:V,serialNumber:Q,digestAlgorithm:J,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:ee,unauthenticatedAttributes:[]})},sign:function(B){var V;if(B=B||{},"object"==typeof U.content&&null!==U.contentInfo||(U.contentInfo=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(n.pki.oids.data).getBytes())]),!("content"in U))||(U.content instanceof n.util.ByteBuffer?V=U.content.bytes():"string"==typeof U.content&&(V=n.util.encodeUtf8(U.content)),B.detached?U.detachedContent=e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,V):U.contentInfo.value.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,V)]))),0!==U.signers.length){var Q=function W(){for(var B={},V=0;V<U.signers.length;++V){var Q=U.signers[V];(Y=Q.digestAlgorithm)in B||(B[Y]=n.md[n.pki.oids[Y]].create()),Q.md=0===Q.authenticatedAttributes.length?B[Y]:n.md[n.pki.oids[Y]].create()}for(var Y in U.digestAlgorithmIdentifiers=[],B)U.digestAlgorithmIdentifiers.push(e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(Y).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")]));return B}();!function M(B){var V;if(!(V=U.detachedContent?U.detachedContent:(V=U.contentInfo.value[1]).value[0]))throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var Q=e.derToOid(U.contentInfo.value[0].value),Y=e.toDer(V);for(var fe in Y.getByte(),e.getBerValueLength(Y),Y=Y.getBytes(),B)B[fe].start().update(Y);for(var J=new Date,ee=0;ee<U.signers.length;++ee){var G=U.signers[ee];if(0===G.authenticatedAttributes.length){if(Q!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{G.authenticatedAttributesAsn1=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var E=e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[]),te=0;te<G.authenticatedAttributes.length;++te){var $=G.authenticatedAttributes[te];$.type===n.pki.oids.messageDigest?$.value=B[G.digestAlgorithm].digest():$.type===n.pki.oids.signingTime&&($.value||($.value=J)),E.value.push(R($)),G.authenticatedAttributesAsn1.value.push(R($))}Y=e.toDer(E).getBytes(),G.md.start().update(Y)}G.signature=G.key.sign(G.md,"RSASSA-PKCS1-V1_5")}U.signerInfos=function N(U){for(var W=[],M=0;M<U.length;++M)W.push(b(U[M]));return W}(U.signers)}(Q)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(B){"string"==typeof B&&(B=n.pki.certificateFromPem(B)),U.certificates.push(B)},addCertificateRevokationList:function(B){throw new Error("PKCS#7 CRL support not yet implemented.")}}},h.createEncryptedData=function(){var U=null;return U={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(W){O(U,W,h.asn1.encryptedDataValidator)},decrypt:function(W){void 0!==W&&(U.encryptedContent.key=W),P(U)}}},h.createEnvelopedData=function(){var U=null;return U={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(W){var M=O(U,W,h.asn1.envelopedDataValidator);U.recipients=function w(U){for(var W=[],M=0;M<U.length;++M)W.push(S(U[M]));return W}(M.recipientInfos.value)},toAsn1:function(){return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(U.type).getBytes()),e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(U.version).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,f(U.recipients)),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,k(U.encryptedContent))])])])},findRecipient:function(W){for(var M=W.issuer.attributes,B=0;B<U.recipients.length;++B){var V=U.recipients[B],Q=V.issuer;if(V.serialNumber===W.serialNumber&&Q.length===M.length){for(var Y=!0,fe=0;fe<M.length;++fe)if(Q[fe].type!==M[fe].type||Q[fe].value!==M[fe].value){Y=!1;break}if(Y)return V}}return null},decrypt:function(W,M){if(void 0===U.encryptedContent.key&&void 0!==W&&void 0!==M)switch(W.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var B=M.decrypt(W.encryptedContent.content);U.encryptedContent.key=n.util.createBuffer(B);break;default:throw new Error("Unsupported asymmetric cipher, OID "+W.encryptedContent.algorithm)}P(U)},addRecipient:function(W){U.recipients.push({version:0,issuer:W.issuer.attributes,serialNumber:W.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:W.publicKey}})},encrypt:function(W,M){if(void 0===U.encryptedContent.content){var B,V,Q;switch(W=W||U.encryptedContent.key,M=M||U.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:B=16,V=16,Q=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:B=24,V=16,Q=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:B=32,V=16,Q=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:B=24,V=8,Q=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+M)}if(void 0===W)W=n.util.createBuffer(n.random.getBytes(B));else if(W.length()!=B)throw new Error("Symmetric key has wrong length; got "+W.length()+" bytes, expected "+B+".");U.encryptedContent.algorithm=M,U.encryptedContent.key=W,U.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(V));var Y=Q(W);if(Y.start(U.encryptedContent.parameter.copy()),Y.update(U.content),!Y.finish())throw new Error("Symmetric encryption failed.");U.encryptedContent.content=Y.output}for(var fe=0;fe<U.recipients.length;++fe){var J=U.recipients[fe];if(void 0===J.encryptedContent.content){if(J.encryptedContent.algorithm!==n.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+J.encryptedContent.algorithm);J.encryptedContent.content=J.encryptedContent.key.encrypt(U.encryptedContent.key.data)}}}}}},4957:(nt,_e,m)=>{var n=m(8659);m(7791),m(4747);var e=n.asn1,h=nt.exports=n.pkcs7asn1=n.pkcs7asn1||{};n.pkcs7=n.pkcs7||{},n.pkcs7.asn1=h;var S={name:"ContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};h.contentInfoValidator=S;var y={name:"EncryptedContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};h.envelopedDataValidator={name:"EnvelopedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(y)},h.encryptedDataValidator={name:"EncryptedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"}].concat(y)},h.signedDataValidator={name:"SignedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},S,{name:"SignedData.Certificates",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,capture:"signerInfos",optional:!0,value:[{name:"SignerInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]}]}]},h.recipientInfoValidator={name:"RecipientInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},1965:(nt,_e,m)=>{var n=m(8659);m(7791),m(6078),m(2158),m(8604),m(7949),m(562),m(7256),m(5517),m(4747),m(5911);var e=n.asn1,h=nt.exports=n.pki=n.pki||{};h.pemToDer=function(S){var y=n.pem.decode(S)[0];if(y.procType&&"ENCRYPTED"===y.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return n.util.createBuffer(y.body)},h.privateKeyFromPem=function(S){var y=n.pem.decode(S)[0];if("PRIVATE KEY"!==y.type&&"RSA PRIVATE KEY"!==y.type){var w=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw w.headerType=y.type,w}if(y.procType&&"ENCRYPTED"===y.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var f=e.fromDer(y.body);return h.privateKeyFromAsn1(f)},h.privateKeyToPem=function(S,y){var w={type:"RSA PRIVATE KEY",body:e.toDer(h.privateKeyToAsn1(S)).getBytes()};return n.pem.encode(w,{maxline:y})},h.privateKeyInfoToPem=function(S,y){var w={type:"PRIVATE KEY",body:e.toDer(S).getBytes()};return n.pem.encode(w,{maxline:y})}},9709:(nt,_e,m)=>{var n=m(8659);m(4747),m(730),m(8365),function(){if(n.prime)nt.exports=n.prime;else{var e=nt.exports=n.prime=n.prime||{},h=n.jsbn.BigInteger,S=[6,4,2,4,2,4,6,2],y=new h(null);y.fromInt(30);var w=function(k,O){return k|O};e.generateProbablePrime=function(k,O,P){"function"==typeof O&&(P=O,O={});var U=(O=O||{}).algorithm||"PRIMEINC";"string"==typeof U&&(U={name:U}),U.options=U.options||{};var W=O.prng||n.random;if("PRIMEINC"===U.name)return function f(k,O,P,U){return"workers"in P?function g(k,O,P,U){if(typeof Worker>"u")return x(k,O,P,U);var W=N(k,O),M=P.workers,B=P.workLoad||100,V=30*B/8,Q=P.workerScript||"forge/prime.worker.js";if(-1===M)return n.util.estimateCores(function(fe,J){fe&&(J=2),M=J-1,Y()});function Y(){M=Math.max(1,M);for(var fe=[],J=0;J<M;++J)fe[J]=new Worker(Q);for(J=0;J<M;++J)fe[J].addEventListener("message",E);var G=!1;function E(te){if(!G){var $=te.data;if($.found){for(var ue=0;ue<fe.length;++ue)fe[ue].terminate();return G=!0,U(null,new h($.prime,16))}W.bitLength()>k&&(W=N(k,O));var me=W.toString(16);te.target.postMessage({hex:me,workLoad:B}),W.dAddOffset(V,0)}}}Y()}(k,O,P,U):x(k,O,P,U)}(k,{nextBytes:function(B){for(var V=W.getBytesSync(B.length),Q=0;Q<B.length;++Q)B[Q]=V.charCodeAt(Q)}},U.options,P);throw new Error("Invalid prime generation algorithm: "+U.name)}}function x(k,O,P,U){var W=N(k,O),B=function R(k){return k<=100?27:k<=150?18:k<=200?15:k<=250?12:k<=300?9:k<=350?8:k<=400?7:k<=500?6:k<=600?5:k<=800?4:k<=1250?3:2}(W.bitLength());"millerRabinTests"in P&&(B=P.millerRabinTests);var V=10;"maxBlockTime"in P&&(V=P.maxBlockTime),b(W,k,O,0,B,V,U)}function b(k,O,P,U,W,M,B){var V=+new Date;do{if(k.bitLength()>O&&(k=N(O,P)),k.isProbablePrime(W))return B(null,k);k.dAddOffset(S[U++%8],0)}while(M<0||+new Date-V<M);n.util.setImmediate(function(){b(k,O,P,U,W,M,B)})}function N(k,O){var P=new h(k,O),U=k-1;return P.testBit(U)||P.bitwiseTo(h.ONE.shiftLeft(U),w,P),P.dAddOffset(31-P.mod(y).byteValue(),0),P}}()},4473:(nt,_e,m)=>{var n=m(8659);m(4747);var e=null;n.util.isNodejs&&!n.options.usePureJavaScript&&!process.versions["node-webkit"]&&(e=m(5819)),(nt.exports=n.prng=n.prng||{}).create=function(S){for(var y={plugin:S,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},w=S.md,f=new Array(32),x=0;x<32;++x)f[x]=w.create();function g(){if(y.pools[0].messageLength>=32)return N();y.collect(y.seedFileSync(32-y.pools[0].messageLength<<5)),N()}function N(){y.reseeds=4294967295===y.reseeds?0:y.reseeds+1;var k=y.plugin.md.create();k.update(y.keyBytes);for(var O=1,P=0;P<32;++P)y.reseeds%O==0&&(k.update(y.pools[P].digest().getBytes()),y.pools[P].start()),O<<=1;y.keyBytes=k.digest().getBytes(),k.start(),k.update(y.keyBytes);var U=k.digest().getBytes();y.key=y.plugin.formatKey(y.keyBytes),y.seed=y.plugin.formatSeed(U),y.generated=0}function R(k){var O=null,P=n.util.globalScope,U=P.crypto||P.msCrypto;U&&U.getRandomValues&&(O=function(ee){return U.getRandomValues(ee)});var W=n.util.createBuffer();if(O)for(;W.length()<k;){var M=Math.max(1,Math.min(k-W.length(),65536)/4),B=new Uint32Array(Math.floor(M));try{O(B);for(var V=0;V<B.length;++V)W.putInt32(B[V])}catch(ee){if(!(typeof QuotaExceededError<"u"&&ee instanceof QuotaExceededError))throw ee}}if(W.length()<k)for(var Q,Y,fe,J=Math.floor(65536*Math.random());W.length()<k;)for(Y=16807*(65535&J),Y+=(32767&(Q=16807*(J>>16)))<<16,J=4294967295&(Y=(2147483647&(Y+=Q>>15))+(Y>>31)),V=0;V<3;++V)fe=J>>>(V<<3),fe^=Math.floor(256*Math.random()),W.putByte(255&fe);return W.getBytes(k)}return y.pools=f,y.pool=0,y.generate=function(k,O){if(!O)return y.generateSync(k);var P=y.plugin.cipher,U=y.plugin.increment,W=y.plugin.formatKey,M=y.plugin.formatSeed,B=n.util.createBuffer();y.key=null,function V(Q){if(Q)return O(Q);if(B.length()>=k)return O(null,B.getBytes(k));if(y.generated>1048575&&(y.key=null),null===y.key)return n.util.nextTick(function(){!function b(k){if(y.pools[0].messageLength>=32)return N(),k();y.seedFile(32-y.pools[0].messageLength<<5,function(P,U){if(P)return k(P);y.collect(U),N(),k()})}(V)});var Y=P(y.key,y.seed);y.generated+=Y.length,B.putBytes(Y),y.key=W(P(y.key,U(y.seed))),y.seed=M(P(y.key,y.seed)),n.util.setImmediate(V)}()},y.generateSync=function(k){var O=y.plugin.cipher,P=y.plugin.increment,U=y.plugin.formatKey,W=y.plugin.formatSeed;y.key=null;for(var M=n.util.createBuffer();M.length()<k;){y.generated>1048575&&(y.key=null),null===y.key&&g();var B=O(y.key,y.seed);y.generated+=B.length,M.putBytes(B),y.key=U(O(y.key,P(y.seed))),y.seed=W(O(y.key,y.seed))}return M.getBytes(k)},e?(y.seedFile=function(k,O){e.randomBytes(k,function(P,U){if(P)return O(P);O(null,U.toString())})},y.seedFileSync=function(k){return e.randomBytes(k).toString()}):(y.seedFile=function(k,O){try{O(null,R(k))}catch(P){O(P)}},y.seedFileSync=R),y.collect=function(k){for(var O=k.length,P=0;P<O;++P)y.pools[y.pool].update(k.substr(P,1)),y.pool=31===y.pool?0:y.pool+1},y.collectInt=function(k,O){for(var P="",U=0;U<O;U+=8)P+=String.fromCharCode(k>>U&255);y.collect(P)},y.registerWorker=function(k){k===self?y.seedFile=function(P,U){self.addEventListener("message",function W(M){var B=M.data;B.forge&&B.forge.prng&&(self.removeEventListener("message",W),U(B.forge.prng.err,B.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:P}}})}:k.addEventListener("message",function(P){var U=P.data;U.forge&&U.forge.prng&&y.seedFile(U.forge.prng.needed,function(W,M){k.postMessage({forge:{prng:{err:W,bytes:M}}})})})},y}},7256:(nt,_e,m)=>{var n=m(8659);m(8365),m(4747),(nt.exports=n.pss=n.pss||{}).create=function(h){3===arguments.length&&(h={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var x,S=h.md,y=h.mgf,w=S.digestLength,f=h.salt||null;if("string"==typeof f&&(f=n.util.createBuffer(f)),"saltLength"in h)x=h.saltLength;else{if(null===f)throw new Error("Salt length not specified or specific salt not given.");x=f.length()}if(null!==f&&f.length()!==x)throw new Error("Given salt length does not match length of given salt.");var b=h.prng||n.random,g={encode:function(N,R){var k,W,O=R-1,P=Math.ceil(O/8),U=N.digest().getBytes();if(P<w+x+2)throw new Error("Message is too long to encrypt.");W=null===f?b.getBytesSync(x):f.bytes();var M=new n.util.ByteBuffer;M.fillWithByte(0,8),M.putBytes(U),M.putBytes(W),S.start(),S.update(M.getBytes());var B=S.digest().getBytes(),V=new n.util.ByteBuffer;V.fillWithByte(0,P-x-w-2),V.putByte(1),V.putBytes(W);var Q=V.getBytes(),Y=P-w-1,fe=y.generate(B,Y),J="";for(k=0;k<Y;k++)J+=String.fromCharCode(Q.charCodeAt(k)^fe.charCodeAt(k));var ee=65280>>8*P-O&255;return(J=String.fromCharCode(J.charCodeAt(0)&~ee)+J.substr(1))+B+String.fromCharCode(188)},verify:function(N,R,k){var O,P=k-1,U=Math.ceil(P/8);if(R=R.substr(-U),U<w+x+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==R.charCodeAt(U-1))throw new Error("Encoded message does not end in 0xBC.");var W=U-w-1,M=R.substr(0,W),B=R.substr(W,w),V=65280>>8*U-P&255;if(0!=(M.charCodeAt(0)&V))throw new Error("Bits beyond keysize not zero as expected.");var Q=y.generate(B,W),Y="";for(O=0;O<W;O++)Y+=String.fromCharCode(M.charCodeAt(O)^Q.charCodeAt(O));Y=String.fromCharCode(Y.charCodeAt(0)&~V)+Y.substr(1);var fe=U-w-x-2;for(O=0;O<fe;O++)if(0!==Y.charCodeAt(O))throw new Error("Leftmost octets not zero as expected");if(1!==Y.charCodeAt(fe))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var J=Y.substr(-x),ee=new n.util.ByteBuffer;return ee.fillWithByte(0,8),ee.putBytes(N),ee.putBytes(J),S.start(),S.update(ee.getBytes()),B===S.digest().getBytes()}};return g}},8365:(nt,_e,m)=>{var n=m(8659);m(1298),m(1594),m(4473),m(4747),n.random&&n.random.getBytes?nt.exports=n.random:function(e){var h={},S=new Array(4),y=n.util.createBuffer();function w(){var k=n.prng.create(h);return k.getBytes=function(O,P){return k.generate(O,P)},k.getBytesSync=function(O){return k.generate(O)},k}h.formatKey=function(k){var O=n.util.createBuffer(k);return(k=new Array(4))[0]=O.getInt32(),k[1]=O.getInt32(),k[2]=O.getInt32(),k[3]=O.getInt32(),n.aes._expandKey(k,!1)},h.formatSeed=function(k){var O=n.util.createBuffer(k);return(k=new Array(4))[0]=O.getInt32(),k[1]=O.getInt32(),k[2]=O.getInt32(),k[3]=O.getInt32(),k},h.cipher=function(k,O){return n.aes._updateBlock(k,O,S,!1),y.putInt32(S[0]),y.putInt32(S[1]),y.putInt32(S[2]),y.putInt32(S[3]),y.getBytes()},h.increment=function(k){return++k[3],k},h.md=n.md.sha256;var f=w(),x=null,b=n.util.globalScope,g=b.crypto||b.msCrypto;if(g&&g.getRandomValues&&(x=function(k){return g.getRandomValues(k)}),n.options.usePureJavaScript||!n.util.isNodejs&&!x){if(typeof window>"u"||window,f.collectInt(+new Date,32),typeof navigator<"u"){var N="";for(var R in navigator)try{"string"==typeof navigator[R]&&(N+=navigator[R])}catch{}f.collect(N),N=null}e&&(e().mousemove(function(k){f.collectInt(k.clientX,16),f.collectInt(k.clientY,16)}),e().keypress(function(k){f.collectInt(k.charCode,8)}))}if(n.random)for(var R in f)n.random[R]=f[R];else n.random=f;n.random.createInstance=w,nt.exports=n.random}(typeof jQuery<"u"?jQuery:null)},209:(nt,_e,m)=>{var n=m(8659);m(4747);var e=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],h=[1,2,3,5],S=function(f,x){return f<<x&65535|(65535&f)>>16-x},y=function(f,x){return(65535&f)>>x|f<<16-x&65535};nt.exports=n.rc2=n.rc2||{},n.rc2.expandKey=function(f,x){"string"==typeof f&&(f=n.util.createBuffer(f)),x=x||128;var O,b=f,g=f.length(),N=x,R=Math.ceil(N/8),k=255>>(7&N);for(O=g;O<128;O++)b.putByte(e[b.at(O-1)+b.at(O-g)&255]);for(b.setAt(128-R,e[b.at(128-R)&k]),O=127-R;O>=0;O--)b.setAt(O,e[b.at(O+1)^b.at(O+R)]);return b};var w=function(f,x,b){var O,P,U,W,g=!1,N=null,R=null,k=null,M=[];for(f=n.rc2.expandKey(f,x),U=0;U<64;U++)M.push(f.getInt16Le());b?(O=function(Q){for(U=0;U<4;U++)Q[U]+=M[W]+(Q[(U+3)%4]&Q[(U+2)%4])+(~Q[(U+3)%4]&Q[(U+1)%4]),Q[U]=S(Q[U],h[U]),W++},P=function(Q){for(U=0;U<4;U++)Q[U]+=M[63&Q[(U+3)%4]]}):(O=function(Q){for(U=3;U>=0;U--)Q[U]=y(Q[U],h[U]),Q[U]-=M[W]+(Q[(U+3)%4]&Q[(U+2)%4])+(~Q[(U+3)%4]&Q[(U+1)%4]),W--},P=function(Q){for(U=3;U>=0;U--)Q[U]-=M[63&Q[(U+3)%4]]});var B=function(Q){var Y=[];for(U=0;U<4;U++){var fe=N.getInt16Le();null!==k&&(b?fe^=k.getInt16Le():k.putInt16Le(fe)),Y.push(65535&fe)}W=b?0:63;for(var J=0;J<Q.length;J++)for(var ee=0;ee<Q[J][0];ee++)Q[J][1](Y);for(U=0;U<4;U++)null!==k&&(b?k.putInt16Le(Y[U]):Y[U]^=k.getInt16Le()),R.putInt16Le(Y[U])},V=null;return V={start:function(Q,Y){Q&&"string"==typeof Q&&(Q=n.util.createBuffer(Q)),g=!1,N=n.util.createBuffer(),R=Y||new n.util.createBuffer,k=Q,V.output=R},update:function(Q){for(g||N.putBuffer(Q);N.length()>=8;)B([[5,O],[1,P],[6,O],[1,P],[5,O]])},finish:function(Q){var Y=!0;if(b)if(Q)Y=Q(8,N,!b);else{var fe=8===N.length()?8:8-N.length();N.fillWithByte(fe,fe)}if(Y&&(g=!0,V.update()),!b&&(Y=0===N.length()))if(Q)Y=Q(8,R,!b);else{var J=R.length(),ee=R.at(J-1);ee>J?Y=!1:R.truncate(ee)}return Y}}};n.rc2.startEncrypting=function(f,x,b){var g=n.rc2.createEncryptionCipher(f,128);return g.start(x,b),g},n.rc2.createEncryptionCipher=function(f,x){return w(f,x,!0)},n.rc2.startDecrypting=function(f,x,b){var g=n.rc2.createDecryptionCipher(f,128);return g.start(x,b),g},n.rc2.createDecryptionCipher=function(f,x){return w(f,x,!1)}},5517:(nt,_e,m)=>{var n=m(8659);if(m(7791),m(730),m(6078),m(7246),m(9709),m(8365),m(4747),typeof e>"u")var e=n.jsbn.BigInteger;var h=n.util.isNodejs?m(5819):null,S=n.asn1,y=n.util;n.pki=n.pki||{},nt.exports=n.pki.rsa=n.rsa=n.rsa||{};var w=n.pki,f=[6,4,2,4,2,4,6,2],x={name:"PrivateKeyInfo",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:S.Class.UNIVERSAL,type:S.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},b={name:"RSAPrivateKey",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},g={name:"RSAPublicKey",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:S.Class.UNIVERSAL,type:S.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},N=n.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:S.Class.UNIVERSAL,type:S.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},R={name:"DigestInfo",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:S.Class.UNIVERSAL,type:S.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:S.Class.UNIVERSAL,type:S.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:S.Class.UNIVERSAL,type:S.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:S.Class.UNIVERSAL,type:S.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},k=function(E){if(!(E.algorithm in w.oids)){var $=new Error("Unknown message digest algorithm.");throw $.algorithm=E.algorithm,$}var ue=S.oidToDer(w.oids[E.algorithm]).getBytes(),me=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[]),we=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[]);we.value.push(S.create(S.Class.UNIVERSAL,S.Type.OID,!1,ue)),we.value.push(S.create(S.Class.UNIVERSAL,S.Type.NULL,!1,""));var ye=S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,E.digest().getBytes());return me.value.push(we),me.value.push(ye),S.toDer(me).getBytes()},O=function(E,te,$){if($)return E.modPow(te.e,te.n);if(!te.p||!te.q)return E.modPow(te.d,te.n);var ue;te.dP||(te.dP=te.d.mod(te.p.subtract(e.ONE))),te.dQ||(te.dQ=te.d.mod(te.q.subtract(e.ONE))),te.qInv||(te.qInv=te.q.modInverse(te.p));do{ue=new e(n.util.bytesToHex(n.random.getBytes(te.n.bitLength()/8)),16)}while(ue.compareTo(te.n)>=0||!ue.gcd(te.n).equals(e.ONE));for(var me=(E=E.multiply(ue.modPow(te.e,te.n)).mod(te.n)).mod(te.p).modPow(te.dP,te.p),we=E.mod(te.q).modPow(te.dQ,te.q);me.compareTo(we)<0;)me=me.add(te.p);var ye=me.subtract(we).multiply(te.qInv).mod(te.p).multiply(te.q).add(we);return ye.multiply(ue.modInverse(te.n)).mod(te.n)};function P(E,te,$){var ue=n.util.createBuffer(),me=Math.ceil(te.n.bitLength()/8);if(E.length>me-11){var we=new Error("Message is too long for PKCS#1 v1.5 padding.");throw we.length=E.length,we.max=me-11,we}ue.putByte(0),ue.putByte($);var qe,ye=me-3-E.length;if(0===$||1===$){qe=0===$?0:255;for(var De=0;De<ye;++De)ue.putByte(qe)}else for(;ye>0;){var Ge=0,ve=n.random.getBytes(ye);for(De=0;De<ye;++De)0===(qe=ve.charCodeAt(De))?++Ge:ue.putByte(qe);ye=Ge}return ue.putByte(0),ue.putBytes(E),ue}function U(E,te,$,ue){var me=Math.ceil(te.n.bitLength()/8),we=n.util.createBuffer(E),ye=we.getByte(),qe=we.getByte();if(0!==ye||$&&0!==qe&&1!==qe||!$&&2!=qe||$&&0===qe&&typeof ue>"u")throw new Error("Encryption block is invalid.");var De=0;if(0===qe){De=me-3-ue;for(var Ge=0;Ge<De;++Ge)if(0!==we.getByte())throw new Error("Encryption block is invalid.")}else if(1===qe)for(De=0;we.length()>1;){if(255!==we.getByte()){--we.read;break}++De}else if(2===qe)for(De=0;we.length()>1;){if(0===we.getByte()){--we.read;break}++De}if(0!==we.getByte()||De!==me-3-we.length())throw new Error("Encryption block is invalid.");return we.getBytes()}function W(E,te,$){"function"==typeof te&&($=te,te={});var ue={algorithm:{name:(te=te||{}).algorithm||"PRIMEINC",options:{workers:te.workers||2,workLoad:te.workLoad||100,workerScript:te.workerScript}}};function me(){we(E.pBits,function(qe,De){return qe?$(qe):(E.p=De,null!==E.q?ye(qe,E.q):void we(E.qBits,ye))})}function we(qe,De){n.prime.generateProbablePrime(qe,ue,De)}function ye(qe,De){if(qe)return $(qe);if(E.q=De,E.p.compareTo(E.q)<0){var Ge=E.p;E.p=E.q,E.q=Ge}if(0!==E.p.subtract(e.ONE).gcd(E.e).compareTo(e.ONE))return E.p=null,void me();if(0!==E.q.subtract(e.ONE).gcd(E.e).compareTo(e.ONE))return E.q=null,void we(E.qBits,ye);if(E.p1=E.p.subtract(e.ONE),E.q1=E.q.subtract(e.ONE),E.phi=E.p1.multiply(E.q1),0!==E.phi.gcd(E.e).compareTo(e.ONE))return E.p=E.q=null,void me();if(E.n=E.p.multiply(E.q),E.n.bitLength()!==E.bits)return E.q=null,void we(E.qBits,ye);var ve=E.e.modInverse(E.phi);E.keys={privateKey:w.rsa.setPrivateKey(E.n,E.e,ve,E.p,E.q,ve.mod(E.p1),ve.mod(E.q1),E.q.modInverse(E.p)),publicKey:w.rsa.setPublicKey(E.n,E.e)},$(null,E.keys)}"prng"in te&&(ue.prng=te.prng),me()}function M(E){var te=E.toString(16);te[0]>="8"&&(te="00"+te);var $=n.util.hexToBytes(te);return $.length>1&&(0===$.charCodeAt(0)&&0==(128&$.charCodeAt(1))||255===$.charCodeAt(0)&&128==(128&$.charCodeAt(1)))?$.substr(1):$}function B(E){return E<=100?27:E<=150?18:E<=200?15:E<=250?12:E<=300?9:E<=350?8:E<=400?7:E<=500?6:E<=600?5:E<=800?4:E<=1250?3:2}function V(E){return n.util.isNodejs&&"function"==typeof h[E]}function Q(E){return typeof y.globalScope<"u"&&"object"==typeof y.globalScope.crypto&&"object"==typeof y.globalScope.crypto.subtle&&"function"==typeof y.globalScope.crypto.subtle[E]}function Y(E){return typeof y.globalScope<"u"&&"object"==typeof y.globalScope.msCrypto&&"object"==typeof y.globalScope.msCrypto.subtle&&"function"==typeof y.globalScope.msCrypto.subtle[E]}function fe(E){for(var te=n.util.hexToBytes(E.toString(16)),$=new Uint8Array(te.length),ue=0;ue<te.length;++ue)$[ue]=te.charCodeAt(ue);return $}w.rsa.encrypt=function(E,te,$){var me,ue=$,we=Math.ceil(te.n.bitLength()/8);!1!==$&&!0!==$?(ue=2===$,me=P(E,te,$)):(me=n.util.createBuffer()).putBytes(E);for(var ye=new e(me.toHex(),16),De=O(ye,te,ue).toString(16),Ge=n.util.createBuffer(),ve=we-Math.ceil(De.length/2);ve>0;)Ge.putByte(0),--ve;return Ge.putBytes(n.util.hexToBytes(De)),Ge.getBytes()},w.rsa.decrypt=function(E,te,$,ue){var me=Math.ceil(te.n.bitLength()/8);if(E.length!==me){var we=new Error("Encrypted message length is invalid.");throw we.length=E.length,we.expected=me,we}var ye=new e(n.util.createBuffer(E).toHex(),16);if(ye.compareTo(te.n)>=0)throw new Error("Encrypted message is invalid.");for(var De=O(ye,te,$).toString(16),Ge=n.util.createBuffer(),ve=me-Math.ceil(De.length/2);ve>0;)Ge.putByte(0),--ve;return Ge.putBytes(n.util.hexToBytes(De)),!1!==ue?U(Ge.getBytes(),te,$):Ge.getBytes()},w.rsa.createKeyPairGenerationState=function(E,te,$){"string"==typeof E&&(E=parseInt(E,10)),E=E||2048;var ye,ue=($=$||{}).prng||n.random,me={nextBytes:function(qe){for(var De=ue.getBytesSync(qe.length),Ge=0;Ge<qe.length;++Ge)qe[Ge]=De.charCodeAt(Ge)}},we=$.algorithm||"PRIMEINC";if("PRIMEINC"!==we)throw new Error("Invalid key generation algorithm: "+we);return(ye={algorithm:we,state:0,bits:E,rng:me,eInt:te||65537,e:new e(null),p:null,q:null,qBits:E>>1,pBits:E-(E>>1),pqState:0,num:null,keys:null}).e.fromInt(ye.eInt),ye},w.rsa.stepKeyPairGenerationState=function(E,te){"algorithm"in E||(E.algorithm="PRIMEINC");var $=new e(null);$.fromInt(30);for(var ye,ue=0,me=function(c,tt){return c|tt},we=+new Date,qe=0;null===E.keys&&(te<=0||qe<te);){if(0===E.state){var De=null===E.p?E.pBits:E.qBits,Ge=De-1;0===E.pqState?(E.num=new e(De,E.rng),E.num.testBit(Ge)||E.num.bitwiseTo(e.ONE.shiftLeft(Ge),me,E.num),E.num.dAddOffset(31-E.num.mod($).byteValue(),0),ue=0,++E.pqState):1===E.pqState?E.num.bitLength()>De?E.pqState=0:E.num.isProbablePrime(B(E.num.bitLength()))?++E.pqState:E.num.dAddOffset(f[ue++%8],0):2===E.pqState?E.pqState=0===E.num.subtract(e.ONE).gcd(E.e).compareTo(e.ONE)?3:0:3===E.pqState&&(E.pqState=0,null===E.p?E.p=E.num:E.q=E.num,null!==E.p&&null!==E.q&&++E.state,E.num=null)}else if(1===E.state)E.p.compareTo(E.q)<0&&(E.num=E.p,E.p=E.q,E.q=E.num),++E.state;else if(2===E.state)E.p1=E.p.subtract(e.ONE),E.q1=E.q.subtract(e.ONE),E.phi=E.p1.multiply(E.q1),++E.state;else if(3===E.state)0===E.phi.gcd(E.e).compareTo(e.ONE)?++E.state:(E.p=null,E.q=null,E.state=0);else if(4===E.state)E.n=E.p.multiply(E.q),E.n.bitLength()===E.bits?++E.state:(E.q=null,E.state=0);else if(5===E.state){var ve=E.e.modInverse(E.phi);E.keys={privateKey:w.rsa.setPrivateKey(E.n,E.e,ve,E.p,E.q,ve.mod(E.p1),ve.mod(E.q1),E.q.modInverse(E.p)),publicKey:w.rsa.setPublicKey(E.n,E.e)}}qe+=(ye=+new Date)-we,we=ye}return null!==E.keys},w.rsa.generateKeyPair=function(E,te,$,ue){if(1===arguments.length?"object"==typeof E?($=E,E=void 0):"function"==typeof E&&(ue=E,E=void 0):2===arguments.length?"number"==typeof E?"function"==typeof te?(ue=te,te=void 0):"number"!=typeof te&&($=te,te=void 0):($=E,ue=te,E=void 0,te=void 0):3===arguments.length&&("number"==typeof te?"function"==typeof $&&(ue=$,$=void 0):(ue=$,$=te,te=void 0)),$=$||{},void 0===E&&(E=$.bits||2048),void 0===te&&(te=$.e||65537),!n.options.usePureJavaScript&&!$.prng&&E>=256&&E<=16384&&(65537===te||3===te))if(ue){if(V("generateKeyPair"))return h.generateKeyPair("rsa",{modulusLength:E,publicExponent:te,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(qe,De,Ge){if(qe)return ue(qe);ue(null,{privateKey:w.privateKeyFromPem(Ge),publicKey:w.publicKeyFromPem(De)})});if(Q("generateKey")&&Q("exportKey"))return y.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:E,publicExponent:fe(te),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(qe){return y.globalScope.crypto.subtle.exportKey("pkcs8",qe.privateKey)}).then(void 0,function(qe){ue(qe)}).then(function(qe){if(qe){var De=w.privateKeyFromAsn1(S.fromDer(n.util.createBuffer(qe)));ue(null,{privateKey:De,publicKey:w.setRsaPublicKey(De.n,De.e)})}});if(Y("generateKey")&&Y("exportKey")){var me=y.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:E,publicExponent:fe(te),hash:{name:"SHA-256"}},!0,["sign","verify"]);return me.oncomplete=function(qe){var Ge=y.globalScope.msCrypto.subtle.exportKey("pkcs8",qe.target.result.privateKey);Ge.oncomplete=function(ve){var tt=w.privateKeyFromAsn1(S.fromDer(n.util.createBuffer(ve.target.result)));ue(null,{privateKey:tt,publicKey:w.setRsaPublicKey(tt.n,tt.e)})},Ge.onerror=function(ve){ue(ve)}},void(me.onerror=function(qe){ue(qe)})}}else if(V("generateKeyPairSync")){var we=h.generateKeyPairSync("rsa",{modulusLength:E,publicExponent:te,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:w.privateKeyFromPem(we.privateKey),publicKey:w.publicKeyFromPem(we.publicKey)}}var ye=w.rsa.createKeyPairGenerationState(E,te,$);if(!ue)return w.rsa.stepKeyPairGenerationState(ye,0),ye.keys;W(ye,$,ue)},w.setRsaPublicKey=w.rsa.setPublicKey=function(E,te){var $={n:E,e:te,encrypt:function(ue,me,we){if("string"==typeof me?me=me.toUpperCase():void 0===me&&(me="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===me)me={encode:function(qe,De,Ge){return P(qe,De,2).getBytes()}};else if("RSA-OAEP"===me||"RSAES-OAEP"===me)me={encode:function(qe,De){return n.pkcs1.encode_rsa_oaep(De,qe,we)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(me))me={encode:function(qe){return qe}};else if("string"==typeof me)throw new Error('Unsupported encryption scheme: "'+me+'".');var ye=me.encode(ue,$,!0);return w.rsa.encrypt(ye,$,!0)},verify:function(ue,me,we,ye){"string"==typeof we?we=we.toUpperCase():void 0===we&&(we="RSASSA-PKCS1-V1_5"),void 0===ye&&(ye={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in ye||(ye._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===we?we={verify:function(De,Ge){Ge=U(Ge,$,!0);var ve=S.fromDer(Ge,{parseAllBytes:ye._parseAllDigestBytes}),c={},tt=[];if(!S.validate(ve,R,c,tt))throw(_t=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=tt,_t;var _t,ct=S.derToOid(c.algorithmIdentifier);if(ct!==n.oids.md2&&ct!==n.oids.md5&&ct!==n.oids.sha1&&ct!==n.oids.sha224&&ct!==n.oids.sha256&&ct!==n.oids.sha384&&ct!==n.oids.sha512&&ct!==n.oids["sha512-224"]&&ct!==n.oids["sha512-256"])throw(_t=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=ct,_t;if((ct===n.oids.md2||ct===n.oids.md5)&&!("parameters"in c))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return De===c.digest}}:("NONE"===we||"NULL"===we||null===we)&&(we={verify:function(De,Ge){return De===U(Ge,$,!0)}});var qe=w.rsa.decrypt(me,$,!0,!1);return we.verify(ue,qe,$.n.bitLength())}};return $},w.setRsaPrivateKey=w.rsa.setPrivateKey=function(E,te,$,ue,me,we,ye,qe){var De={n:E,e:te,d:$,p:ue,q:me,dP:we,dQ:ye,qInv:qe,decrypt:function(Ge,ve,c){"string"==typeof ve?ve=ve.toUpperCase():void 0===ve&&(ve="RSAES-PKCS1-V1_5");var tt=w.rsa.decrypt(Ge,De,!1,!1);if("RSAES-PKCS1-V1_5"===ve)ve={decode:U};else if("RSA-OAEP"===ve||"RSAES-OAEP"===ve)ve={decode:function(_t,ct){return n.pkcs1.decode_rsa_oaep(ct,_t,c)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(ve))throw new Error('Unsupported encryption scheme: "'+ve+'".');ve={decode:function(_t){return _t}}}return ve.decode(tt,De,!1)},sign:function(Ge,ve){var c=!1;"string"==typeof ve&&(ve=ve.toUpperCase()),void 0===ve||"RSASSA-PKCS1-V1_5"===ve?(ve={encode:k},c=1):("NONE"===ve||"NULL"===ve||null===ve)&&(ve={encode:function(){return Ge}},c=1);var tt=ve.encode(Ge,De.n.bitLength());return w.rsa.encrypt(tt,De,c)}};return De},w.wrapRsaPrivateKey=function(E){return S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,S.integerToDer(0).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(w.oids.rsaEncryption).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.NULL,!1,"")]),S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,S.toDer(E).getBytes())])},w.privateKeyFromAsn1=function(E){var me,we,ye,qe,De,Ge,ve,c,te={},$=[];if(S.validate(E,x,te,$)&&(E=S.fromDer(n.util.createBuffer(te.privateKey))),!S.validate(E,b,te={},$=[])){var ue=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw ue.errors=$,ue}return me=n.util.createBuffer(te.privateKeyModulus).toHex(),we=n.util.createBuffer(te.privateKeyPublicExponent).toHex(),ye=n.util.createBuffer(te.privateKeyPrivateExponent).toHex(),qe=n.util.createBuffer(te.privateKeyPrime1).toHex(),De=n.util.createBuffer(te.privateKeyPrime2).toHex(),Ge=n.util.createBuffer(te.privateKeyExponent1).toHex(),ve=n.util.createBuffer(te.privateKeyExponent2).toHex(),c=n.util.createBuffer(te.privateKeyCoefficient).toHex(),w.setRsaPrivateKey(new e(me,16),new e(we,16),new e(ye,16),new e(qe,16),new e(De,16),new e(Ge,16),new e(ve,16),new e(c,16))},w.privateKeyToAsn1=w.privateKeyToRSAPrivateKey=function(E){return S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,S.integerToDer(0).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,M(E.n)),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,M(E.e)),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,M(E.d)),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,M(E.p)),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,M(E.q)),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,M(E.dP)),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,M(E.dQ)),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,M(E.qInv))])},w.publicKeyFromAsn1=function(E){var te={},$=[];if(S.validate(E,N,te,$)){var me,ue=S.derToOid(te.publicKeyOid);if(ue!==w.oids.rsaEncryption)throw(me=new Error("Cannot read public key. Unknown OID.")).oid=ue,me;E=te.rsaPublicKey}if(!S.validate(E,g,te,$=[]))throw(me=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=$,me;var we=n.util.createBuffer(te.publicKeyModulus).toHex(),ye=n.util.createBuffer(te.publicKeyExponent).toHex();return w.setRsaPublicKey(new e(we,16),new e(ye,16))},w.publicKeyToAsn1=w.publicKeyToSubjectPublicKeyInfo=function(E){return S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(w.oids.rsaEncryption).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.NULL,!1,"")]),S.create(S.Class.UNIVERSAL,S.Type.BITSTRING,!1,[w.publicKeyToRSAPublicKey(E)])])},w.publicKeyToRSAPublicKey=function(E){return S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,M(E.n)),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,M(E.e))])}},7690:(nt,_e,m)=>{var n=m(8659);m(979),m(4747);var e=nt.exports=n.sha1=n.sha1||{};n.md.sha1=n.md.algorithms.sha1=e,e.create=function(){S||function y(){h=String.fromCharCode(128),h+=n.util.fillString(String.fromCharCode(0),64),S=!0}();var f=null,x=n.util.createBuffer(),b=new Array(80),g={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){g.messageLength=0,g.fullMessageLength=g.messageLength64=[];for(var N=g.messageLengthSize/4,R=0;R<N;++R)g.fullMessageLength.push(0);return x=n.util.createBuffer(),f={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},g}};return g.start(),g.update=function(N,R){"utf8"===R&&(N=n.util.encodeUtf8(N));var k=N.length;g.messageLength+=k,k=[k/4294967296>>>0,k>>>0];for(var O=g.fullMessageLength.length-1;O>=0;--O)g.fullMessageLength[O]+=k[1],k[1]=k[0]+(g.fullMessageLength[O]/4294967296>>>0),g.fullMessageLength[O]=g.fullMessageLength[O]>>>0,k[0]=k[1]/4294967296>>>0;return x.putBytes(N),w(f,b,x),(x.read>2048||0===x.length())&&x.compact(),g},g.digest=function(){var N=n.util.createBuffer();N.putBytes(x.bytes()),N.putBytes(h.substr(0,g.blockLength-(g.fullMessageLength[g.fullMessageLength.length-1]+g.messageLengthSize&g.blockLength-1)));for(var O,U=8*g.fullMessageLength[0],W=0;W<g.fullMessageLength.length-1;++W)N.putInt32((U+=(O=8*g.fullMessageLength[W+1])/4294967296>>>0)>>>0),U=O>>>0;N.putInt32(U);var M={h0:f.h0,h1:f.h1,h2:f.h2,h3:f.h3,h4:f.h4};w(M,b,N);var B=n.util.createBuffer();return B.putInt32(M.h0),B.putInt32(M.h1),B.putInt32(M.h2),B.putInt32(M.h3),B.putInt32(M.h4),B},g};var h=null,S=!1;function w(f,x,b){for(var g,N,R,k,O,P,W,M=b.length();M>=64;){for(N=f.h0,R=f.h1,k=f.h2,O=f.h3,P=f.h4,W=0;W<16;++W)g=b.getInt32(),x[W]=g,g=(N<<5|N>>>27)+(O^R&(k^O))+P+1518500249+g,P=O,O=k,k=(R<<30|R>>>2)>>>0,R=N,N=g;for(;W<20;++W)x[W]=g=(g=x[W-3]^x[W-8]^x[W-14]^x[W-16])<<1|g>>>31,g=(N<<5|N>>>27)+(O^R&(k^O))+P+1518500249+g,P=O,O=k,k=(R<<30|R>>>2)>>>0,R=N,N=g;for(;W<32;++W)x[W]=g=(g=x[W-3]^x[W-8]^x[W-14]^x[W-16])<<1|g>>>31,g=(N<<5|N>>>27)+(R^k^O)+P+1859775393+g,P=O,O=k,k=(R<<30|R>>>2)>>>0,R=N,N=g;for(;W<40;++W)x[W]=g=(g=x[W-6]^x[W-16]^x[W-28]^x[W-32])<<2|g>>>30,g=(N<<5|N>>>27)+(R^k^O)+P+1859775393+g,P=O,O=k,k=(R<<30|R>>>2)>>>0,R=N,N=g;for(;W<60;++W)x[W]=g=(g=x[W-6]^x[W-16]^x[W-28]^x[W-32])<<2|g>>>30,g=(N<<5|N>>>27)+(R&k|O&(R^k))+P+2400959708+g,P=O,O=k,k=(R<<30|R>>>2)>>>0,R=N,N=g;for(;W<80;++W)x[W]=g=(g=x[W-6]^x[W-16]^x[W-28]^x[W-32])<<2|g>>>30,g=(N<<5|N>>>27)+(R^k^O)+P+3395469782+g,P=O,O=k,k=(R<<30|R>>>2)>>>0,R=N,N=g;f.h0=f.h0+N|0,f.h1=f.h1+R|0,f.h2=f.h2+k|0,f.h3=f.h3+O|0,f.h4=f.h4+P|0,M-=64}}},1594:(nt,_e,m)=>{var n=m(8659);m(979),m(4747);var e=nt.exports=n.sha256=n.sha256||{};n.md.sha256=n.md.algorithms.sha256=e,e.create=function(){S||function w(){h=String.fromCharCode(128),h+=n.util.fillString(String.fromCharCode(0),64),y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],S=!0}();var x=null,b=n.util.createBuffer(),g=new Array(64),N={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){N.messageLength=0,N.fullMessageLength=N.messageLength64=[];for(var R=N.messageLengthSize/4,k=0;k<R;++k)N.fullMessageLength.push(0);return b=n.util.createBuffer(),x={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},N}};return N.start(),N.update=function(R,k){"utf8"===k&&(R=n.util.encodeUtf8(R));var O=R.length;N.messageLength+=O,O=[O/4294967296>>>0,O>>>0];for(var P=N.fullMessageLength.length-1;P>=0;--P)N.fullMessageLength[P]+=O[1],O[1]=O[0]+(N.fullMessageLength[P]/4294967296>>>0),N.fullMessageLength[P]=N.fullMessageLength[P]>>>0,O[0]=O[1]/4294967296>>>0;return b.putBytes(R),f(x,g,b),(b.read>2048||0===b.length())&&b.compact(),N},N.digest=function(){var R=n.util.createBuffer();R.putBytes(b.bytes()),R.putBytes(h.substr(0,N.blockLength-(N.fullMessageLength[N.fullMessageLength.length-1]+N.messageLengthSize&N.blockLength-1)));for(var P,W=8*N.fullMessageLength[0],M=0;M<N.fullMessageLength.length-1;++M)R.putInt32((W+=(P=8*N.fullMessageLength[M+1])/4294967296>>>0)>>>0),W=P>>>0;R.putInt32(W);var B={h0:x.h0,h1:x.h1,h2:x.h2,h3:x.h3,h4:x.h4,h5:x.h5,h6:x.h6,h7:x.h7};f(B,g,R);var V=n.util.createBuffer();return V.putInt32(B.h0),V.putInt32(B.h1),V.putInt32(B.h2),V.putInt32(B.h3),V.putInt32(B.h4),V.putInt32(B.h5),V.putInt32(B.h6),V.putInt32(B.h7),V},N};var h=null,S=!1,y=null;function f(x,b,g){for(var N,R,U,W,M,B,V,Q,Y,fe,J,ee,G=g.length();G>=64;){for(W=0;W<16;++W)b[W]=g.getInt32();for(;W<64;++W)b[W]=(N=((N=b[W-2])>>>17|N<<15)^(N>>>19|N<<13)^N>>>10)+b[W-7]+(R=((R=b[W-15])>>>7|R<<25)^(R>>>18|R<<14)^R>>>3)+b[W-16]|0;for(M=x.h0,B=x.h1,V=x.h2,Q=x.h3,Y=x.h4,fe=x.h5,J=x.h6,ee=x.h7,W=0;W<64;++W)U=M&B|V&(M^B),N=ee+((Y>>>6|Y<<26)^(Y>>>11|Y<<21)^(Y>>>25|Y<<7))+(J^Y&(fe^J))+y[W]+b[W],ee=J,J=fe,fe=Y,Y=Q+N>>>0,Q=V,V=B,B=M,M=N+(R=((M>>>2|M<<30)^(M>>>13|M<<19)^(M>>>22|M<<10))+U)>>>0;x.h0=x.h0+M|0,x.h1=x.h1+B|0,x.h2=x.h2+V|0,x.h3=x.h3+Q|0,x.h4=x.h4+Y|0,x.h5=x.h5+fe|0,x.h6=x.h6+J|0,x.h7=x.h7+ee|0,G-=64}}},8985:(nt,_e,m)=>{var n=m(8659);m(979),m(4747);var e=nt.exports=n.sha512=n.sha512||{};n.md.sha512=n.md.algorithms.sha512=e;var h=n.sha384=n.sha512.sha384=n.sha512.sha384||{};h.create=function(){return e.create("SHA-384")},n.md.sha384=n.md.algorithms.sha384=h,n.sha512.sha256=n.sha512.sha256||{create:function(){return e.create("SHA-512/256")}},n.md["sha512/256"]=n.md.algorithms["sha512/256"]=n.sha512.sha256,n.sha512.sha224=n.sha512.sha224||{create:function(){return e.create("SHA-512/224")}},n.md["sha512/224"]=n.md.algorithms["sha512/224"]=n.sha512.sha224,e.create=function(g){if(y||function x(){S=String.fromCharCode(128),S+=n.util.fillString(String.fromCharCode(0),128),w=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(f={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],f["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],f["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],f["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],y=!0}(),typeof g>"u"&&(g="SHA-512"),!(g in f))throw new Error("Invalid SHA-512 algorithm: "+g);for(var N=f[g],R=null,k=n.util.createBuffer(),O=new Array(80),P=0;P<80;++P)O[P]=new Array(2);var U=64;switch(g){case"SHA-384":U=48;break;case"SHA-512/256":U=32;break;case"SHA-512/224":U=28}var W={algorithm:g.replace("-","").toLowerCase(),blockLength:128,digestLength:U,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){W.messageLength=0,W.fullMessageLength=W.messageLength128=[];for(var M=W.messageLengthSize/4,B=0;B<M;++B)W.fullMessageLength.push(0);for(k=n.util.createBuffer(),R=new Array(N.length),B=0;B<N.length;++B)R[B]=N[B].slice(0);return W}};return W.start(),W.update=function(M,B){"utf8"===B&&(M=n.util.encodeUtf8(M));var V=M.length;W.messageLength+=V,V=[V/4294967296>>>0,V>>>0];for(var Q=W.fullMessageLength.length-1;Q>=0;--Q)W.fullMessageLength[Q]+=V[1],V[1]=V[0]+(W.fullMessageLength[Q]/4294967296>>>0),W.fullMessageLength[Q]=W.fullMessageLength[Q]>>>0,V[0]=V[1]/4294967296>>>0;return k.putBytes(M),b(R,O,k),(k.read>2048||0===k.length())&&k.compact(),W},W.digest=function(){var M=n.util.createBuffer();M.putBytes(k.bytes()),M.putBytes(S.substr(0,W.blockLength-(W.fullMessageLength[W.fullMessageLength.length-1]+W.messageLengthSize&W.blockLength-1)));for(var Q,fe=8*W.fullMessageLength[0],J=0;J<W.fullMessageLength.length-1;++J)M.putInt32((fe+=(Q=8*W.fullMessageLength[J+1])/4294967296>>>0)>>>0),fe=Q>>>0;M.putInt32(fe);var ee=new Array(R.length);for(J=0;J<R.length;++J)ee[J]=R[J].slice(0);b(ee,O,M);var E,G=n.util.createBuffer();for(E="SHA-512"===g?ee.length:"SHA-384"===g?ee.length-2:ee.length-4,J=0;J<E;++J)G.putInt32(ee[J][0]),(J!==E-1||"SHA-512/224"!==g)&&G.putInt32(ee[J][1]);return G},W};var S=null,y=!1,w=null,f=null;function b(g,N,R){for(var k,O,P,U,ee,G,E,te,$,ue,me,we,ye,qe,De,Ge,ve,c,tt,_t,ct,rt,ft,qt,en,xt,Dt,X=R.length();X>=128;){for(ct=0;ct<16;++ct)N[ct][0]=R.getInt32()>>>0,N[ct][1]=R.getInt32()>>>0;for(;ct<80;++ct)O=(((rt=(qt=N[ct-2])[0])<<13|(ft=qt[1])>>>19)^(ft<<3|rt>>>29)^(rt<<26|ft>>>6))>>>0,N[ct][0]=(k=((rt>>>19|ft<<13)^(ft>>>29|rt<<3)^rt>>>6)>>>0)+(en=N[ct-7])[0]+(P=(((rt=(xt=N[ct-15])[0])>>>1|(ft=xt[1])<<31)^(rt>>>8|ft<<24)^rt>>>7)>>>0)+(Dt=N[ct-16])[0]+((ft=O+en[1]+(U=((rt<<31|ft>>>1)^(rt<<24|ft>>>8)^(rt<<25|ft>>>7))>>>0)+Dt[1])/4294967296>>>0)>>>0,N[ct][1]=ft>>>0;for(ee=g[0][0],G=g[0][1],E=g[1][0],te=g[1][1],$=g[2][0],ue=g[2][1],me=g[3][0],we=g[3][1],ye=g[4][0],qe=g[4][1],De=g[5][0],Ge=g[5][1],ve=g[6][0],c=g[6][1],tt=g[7][0],_t=g[7][1],ct=0;ct<80;++ct)k=tt+(((ye>>>14|qe<<18)^(ye>>>18|qe<<14)^(qe>>>9|ye<<23))>>>0)+((ve^ye&(De^ve))>>>0)+w[ct][0]+N[ct][0]+((ft=_t+(((ye<<18|qe>>>14)^(ye<<14|qe>>>18)^(qe<<23|ye>>>9))>>>0)+((c^qe&(Ge^c))>>>0)+w[ct][1]+N[ct][1])/4294967296>>>0)>>>0,O=ft>>>0,P=(((ee>>>28|G<<4)^(G>>>2|ee<<30)^(G>>>7|ee<<25))>>>0)+((ee&E|$&(ee^E))>>>0)+((ft=(((ee<<4|G>>>28)^(G<<30|ee>>>2)^(G<<25|ee>>>7))>>>0)+((G&te|ue&(G^te))>>>0))/4294967296>>>0)>>>0,U=ft>>>0,tt=ve,_t=c,ve=De,c=Ge,De=ye,Ge=qe,ye=me+k+((ft=we+O)/4294967296>>>0)>>>0,qe=ft>>>0,me=$,we=ue,$=E,ue=te,E=ee,te=G,ee=k+P+((ft=O+U)/4294967296>>>0)>>>0,G=ft>>>0;g[0][0]=g[0][0]+ee+((ft=g[0][1]+G)/4294967296>>>0)>>>0,g[0][1]=ft>>>0,g[1][0]=g[1][0]+E+((ft=g[1][1]+te)/4294967296>>>0)>>>0,g[1][1]=ft>>>0,g[2][0]=g[2][0]+$+((ft=g[2][1]+ue)/4294967296>>>0)>>>0,g[2][1]=ft>>>0,g[3][0]=g[3][0]+me+((ft=g[3][1]+we)/4294967296>>>0)>>>0,g[3][1]=ft>>>0,g[4][0]=g[4][0]+ye+((ft=g[4][1]+qe)/4294967296>>>0)>>>0,g[4][1]=ft>>>0,g[5][0]=g[5][0]+De+((ft=g[5][1]+Ge)/4294967296>>>0)>>>0,g[5][1]=ft>>>0,g[6][0]=g[6][0]+ve+((ft=g[6][1]+c)/4294967296>>>0)>>>0,g[6][1]=ft>>>0,g[7][0]=g[7][0]+tt+((ft=g[7][1]+_t)/4294967296>>>0)>>>0,g[7][1]=ft>>>0,X-=128}}},1015:(nt,_e,m)=>{var n=m(8659);m(1298),m(9032),m(2687),m(7690),m(4747);var e=nt.exports=n.ssh=n.ssh||{};function h(w,f){var x=f.toString(16);x[0]>="8"&&(x="00"+x);var b=n.util.hexToBytes(x);w.putInt32(b.length),w.putBytes(b)}function S(w,f){w.putInt32(f.length),w.putString(f)}function y(){for(var w=n.md.sha1.create(),f=arguments.length,x=0;x<f;++x)w.update(arguments[x]);return w.digest()}e.privateKeyToPutty=function(w,f,x){var b="ssh-rsa",g=""===(f=f||"")?"none":"aes256-cbc",N="PuTTY-User-Key-File-2: "+b+"\r\n";N+="Encryption: "+g+"\r\n",N+="Comment: "+(x=x||"")+"\r\n";var R=n.util.createBuffer();S(R,b),h(R,w.e),h(R,w.n);var k=n.util.encode64(R.bytes(),64),O=Math.floor(k.length/66)+1;N+="Public-Lines: "+O+"\r\n",N+=k;var U,P=n.util.createBuffer();if(h(P,w.d),h(P,w.p),h(P,w.q),h(P,w.qInv),f){var W=P.length()+16-1;W-=W%16;var M=y(P.bytes());M.truncate(M.length()-W+P.length()),P.putBuffer(M);var B=n.util.createBuffer();B.putBuffer(y("\0\0\0\0",f)),B.putBuffer(y("\0\0\0\x01",f));var V=n.aes.createEncryptionCipher(B.truncate(8),"CBC");V.start(n.util.createBuffer().fillWithByte(0,16)),V.update(P.copy()),V.finish();var Q=V.output;Q.truncate(16),U=n.util.encode64(Q.bytes(),64)}else U=n.util.encode64(P.bytes(),64);N+="\r\nPrivate-Lines: "+(O=Math.floor(U.length/66)+1)+"\r\n",N+=U;var Y=y("putty-private-key-file-mac-key",f),fe=n.util.createBuffer();S(fe,b),S(fe,g),S(fe,x),fe.putInt32(R.length()),fe.putBuffer(R),fe.putInt32(P.length()),fe.putBuffer(P);var J=n.hmac.create();return J.start("sha1",Y),J.update(fe.bytes()),N+"\r\nPrivate-MAC: "+J.digest().toHex()+"\r\n"},e.publicKeyToOpenSSH=function(w,f){var x="ssh-rsa";f=f||"";var b=n.util.createBuffer();return S(b,x),h(b,w.e),h(b,w.n),x+" "+n.util.encode64(b.bytes())+" "+f},e.privateKeyToOpenSSH=function(w,f){return f?n.pki.encryptRsaPrivateKey(w,f,{legacy:!0,algorithm:"aes128"}):n.pki.privateKeyToPem(w)},e.getPublicKeyFingerprint=function(w,f){var x=(f=f||{}).md||n.md.md5.create(),g=n.util.createBuffer();S(g,"ssh-rsa"),h(g,w.e),h(g,w.n),x.start(),x.update(g.getBytes());var N=x.digest();if("hex"===f.encoding){var R=N.toHex();return f.delimiter?R.match(/.{2}/g).join(f.delimiter):R}if("binary"===f.encoding)return N.getBytes();if(f.encoding)throw new Error('Unknown encoding "'+f.encoding+'".');return N}},2266:(nt,_e,m)=>{var n=m(8659);m(7791),m(9032),m(2687),m(8604),m(1965),m(8365),m(7690),m(4747);var e=function(X,j,ae,Be){var je=n.util.createBuffer(),ke=X.length>>1,Re=ke+(1&X.length),Se=X.substr(0,Re),Qe=X.substr(ke,Re),Xe=n.util.createBuffer(),Ke=n.hmac.create();ae=j+ae;var Je=Math.ceil(Be/16),Ct=Math.ceil(Be/20);Ke.start("MD5",Se);var ht=n.util.createBuffer();Xe.putBytes(ae);for(var Ze=0;Ze<Je;++Ze)Ke.start(null,null),Ke.update(Xe.getBytes()),Xe.putBuffer(Ke.digest()),Ke.start(null,null),Ke.update(Xe.bytes()+ae),ht.putBuffer(Ke.digest());Ke.start("SHA1",Qe);var oe=n.util.createBuffer();for(Xe.clear(),Xe.putBytes(ae),Ze=0;Ze<Ct;++Ze)Ke.start(null,null),Ke.update(Xe.getBytes()),Xe.putBuffer(Ke.digest()),Ke.start(null,null),Ke.update(Xe.bytes()+ae),oe.putBuffer(Ke.digest());return je.putBytes(n.util.xorBytes(ht.getBytes(),oe.getBytes(),Be)),je},y=function(X,j,ae){var Be=!1;try{var je=X.deflate(j.fragment.getBytes());j.fragment=n.util.createBuffer(je),j.length=je.length,Be=!0}catch{}return Be},w=function(X,j,ae){var Be=!1;try{var je=X.inflate(j.fragment.getBytes());j.fragment=n.util.createBuffer(je),j.length=je.length,Be=!0}catch{}return Be},f=function(X,j){var ae=0;switch(j){case 1:ae=X.getByte();break;case 2:ae=X.getInt16();break;case 3:ae=X.getInt24();break;case 4:ae=X.getInt32()}return n.util.createBuffer(X.getBytes(ae))},x=function(X,j,ae){X.putInt(ae.length(),j<<3),X.putBuffer(ae)},b={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};b.SupportedVersions=[b.Versions.TLS_1_1,b.Versions.TLS_1_0],b.Version=b.SupportedVersions[0],b.MaxFragment=15360,b.ConnectionEnd={server:0,client:1},b.PRFAlgorithm={tls_prf_sha256:0},b.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},b.CipherType={stream:0,block:1,aead:2},b.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},b.CompressionMethod={none:0,deflate:1},b.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},b.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},b.Alert={},b.Alert.Level={warning:1,fatal:2},b.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},b.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},b.CipherSuites={},b.getCipherSuite=function(X){var j=null;for(var ae in b.CipherSuites){var Be=b.CipherSuites[ae];if(Be.id[0]===X.charCodeAt(0)&&Be.id[1]===X.charCodeAt(1)){j=Be;break}}return j},b.handleUnexpected=function(X,j){!X.open&&X.entity===b.ConnectionEnd.client||X.error(X,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.unexpected_message}})},b.handleHelloRequest=function(X,j,ae){!X.handshaking&&X.handshakes>0&&(b.queue(X,b.createAlert(X,{level:b.Alert.Level.warning,description:b.Alert.Description.no_renegotiation})),b.flush(X)),X.process()},b.parseHelloMessage=function(X,j,ae){var Be=null,je=X.entity===b.ConnectionEnd.client;if(ae<38)X.error(X,{message:je?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.illegal_parameter}});else{var ke=j.fragment,Re=ke.length();if(Be={version:{major:ke.getByte(),minor:ke.getByte()},random:n.util.createBuffer(ke.getBytes(32)),session_id:f(ke,1),extensions:[]},je?(Be.cipher_suite=ke.getBytes(2),Be.compression_method=ke.getByte()):(Be.cipher_suites=f(ke,2),Be.compression_methods=f(ke,1)),(Re=ae-(Re-ke.length()))>0){for(var Se=f(ke,2);Se.length()>0;)Be.extensions.push({type:[Se.getByte(),Se.getByte()],data:f(Se,2)});if(!je)for(var Qe=0;Qe<Be.extensions.length;++Qe){var Xe=Be.extensions[Qe];if(0===Xe.type[0]&&0===Xe.type[1])for(var Ke=f(Xe.data,2);Ke.length()>0&&0===Ke.getByte();)X.session.extensions.server_name.serverNameList.push(f(Ke,2).getBytes())}}if(X.session.version&&(Be.version.major!==X.session.version.major||Be.version.minor!==X.session.version.minor))return X.error(X,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.protocol_version}});if(je)X.session.cipherSuite=b.getCipherSuite(Be.cipher_suite);else for(var Ct=n.util.createBuffer(Be.cipher_suites.bytes());Ct.length()>0&&(X.session.cipherSuite=b.getCipherSuite(Ct.getBytes(2)),null===X.session.cipherSuite););if(null===X.session.cipherSuite)return X.error(X,{message:"No cipher suites in common.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.handshake_failure},cipherSuite:n.util.bytesToHex(Be.cipher_suite)});X.session.compressionMethod=je?Be.compression_method:b.CompressionMethod.none}return Be},b.createSecurityParameters=function(X,j){var ae=X.entity===b.ConnectionEnd.client,Be=j.random.bytes(),je=ae?X.session.sp.client_random:Be,ke=ae?Be:b.createRandom().getBytes();X.session.sp={entity:X.entity,prf_algorithm:b.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:X.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:je,server_random:ke}},b.handleServerHello=function(X,j,ae){var Be=b.parseHelloMessage(X,j,ae);if(!X.fail){if(!(Be.version.minor<=X.version.minor))return X.error(X,{message:"Incompatible TLS version.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.protocol_version}});X.version.minor=Be.version.minor,X.session.version=X.version;var je=Be.session_id.bytes();je.length>0&&je===X.session.id?(X.expect=P,X.session.resuming=!0,X.session.sp.server_random=Be.random.bytes()):(X.expect=N,X.session.resuming=!1,b.createSecurityParameters(X,Be)),X.session.id=je,X.process()}},b.handleClientHello=function(X,j,ae){var Be=b.parseHelloMessage(X,j,ae);if(!X.fail){var je=Be.session_id.bytes(),ke=null;if(X.sessionCache&&(null===(ke=X.sessionCache.getSession(je))?je="":(ke.version.major!==Be.version.major||ke.version.minor>Be.version.minor)&&(ke=null,je="")),0===je.length&&(je=n.random.getBytes(32)),X.session.id=je,X.session.clientHelloVersion=Be.version,X.session.sp={},ke)X.version=X.session.version=ke.version,X.session.sp=ke.sp;else{for(var Re,Se=1;Se<b.SupportedVersions.length&&!((Re=b.SupportedVersions[Se]).minor<=Be.version.minor);++Se);X.version={major:Re.major,minor:Re.minor},X.session.version=X.version}null!==ke?(X.expect=fe,X.session.resuming=!0,X.session.sp.client_random=Be.random.bytes()):(X.expect=!1!==X.verifyClient?V:Q,X.session.resuming=!1,b.createSecurityParameters(X,Be)),X.open=!0,b.queue(X,b.createRecord(X,{type:b.ContentType.handshake,data:b.createServerHello(X)})),X.session.resuming?(b.queue(X,b.createRecord(X,{type:b.ContentType.change_cipher_spec,data:b.createChangeCipherSpec()})),X.state.pending=b.createConnectionState(X),X.state.current.write=X.state.pending.write,b.queue(X,b.createRecord(X,{type:b.ContentType.handshake,data:b.createFinished(X)}))):(b.queue(X,b.createRecord(X,{type:b.ContentType.handshake,data:b.createCertificate(X)})),X.fail||(b.queue(X,b.createRecord(X,{type:b.ContentType.handshake,data:b.createServerKeyExchange(X)})),!1!==X.verifyClient&&b.queue(X,b.createRecord(X,{type:b.ContentType.handshake,data:b.createCertificateRequest(X)})),b.queue(X,b.createRecord(X,{type:b.ContentType.handshake,data:b.createServerHelloDone(X)})))),b.flush(X),X.process()}},b.handleCertificate=function(X,j,ae){if(ae<3)return X.error(X,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.illegal_parameter}});var ke,Re,je={certificate_list:f(j.fragment,3)},Se=[];try{for(;je.certificate_list.length()>0;)ke=f(je.certificate_list,3),Re=n.asn1.fromDer(ke),ke=n.pki.certificateFromAsn1(Re,!0),Se.push(ke)}catch(Xe){return X.error(X,{message:"Could not parse certificate list.",cause:Xe,send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.bad_certificate}})}var Qe=X.entity===b.ConnectionEnd.client;!Qe&&!0!==X.verifyClient||0!==Se.length?0===Se.length?X.expect=Qe?R:Q:(Qe?X.session.serverCertificate=Se[0]:X.session.clientCertificate=Se[0],b.verifyCertificateChain(X,Se)&&(X.expect=Qe?R:Q)):X.error(X,{message:Qe?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.illegal_parameter}}),X.process()},b.handleServerKeyExchange=function(X,j,ae){if(ae>0)return X.error(X,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.unsupported_certificate}});X.expect=k,X.process()},b.handleClientKeyExchange=function(X,j,ae){if(ae<48)return X.error(X,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.unsupported_certificate}});var je={enc_pre_master_secret:f(j.fragment,2).getBytes()},ke=null;if(X.getPrivateKey)try{ke=X.getPrivateKey(X,X.session.serverCertificate),ke=n.pki.privateKeyFromPem(ke)}catch(Qe){X.error(X,{message:"Could not get private key.",cause:Qe,send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.internal_error}})}if(null===ke)return X.error(X,{message:"No private key set.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.internal_error}});try{var Re=X.session.sp;Re.pre_master_secret=ke.decrypt(je.enc_pre_master_secret);var Se=X.session.clientHelloVersion;if(Se.major!==Re.pre_master_secret.charCodeAt(0)||Se.minor!==Re.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{Re.pre_master_secret=n.random.getBytes(48)}X.expect=fe,null!==X.session.clientCertificate&&(X.expect=Y),X.process()},b.handleCertificateRequest=function(X,j,ae){if(ae<3)return X.error(X,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.illegal_parameter}});var Be=j.fragment,je={certificate_types:f(Be,1),certificate_authorities:f(Be,2)};X.session.certificateRequest=je,X.expect=O,X.process()},b.handleCertificateVerify=function(X,j,ae){if(ae<2)return X.error(X,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.illegal_parameter}});var Be=j.fragment;Be.read-=4;var je=Be.bytes();Be.read+=4;var ke={signature:f(Be,2).getBytes()},Re=n.util.createBuffer();Re.putBuffer(X.session.md5.digest()),Re.putBuffer(X.session.sha1.digest()),Re=Re.getBytes();try{if(!X.session.clientCertificate.publicKey.verify(Re,ke.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");X.session.md5.update(je),X.session.sha1.update(je)}catch{return X.error(X,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.handshake_failure}})}X.expect=fe,X.process()},b.handleServerHelloDone=function(X,j,ae){if(ae>0)return X.error(X,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.record_overflow}});if(null===X.serverCertificate){var Be={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.insufficient_security}},ke=X.verify(X,Be.alert.description,0,[]);if(!0!==ke)return(ke||0===ke)&&("object"!=typeof ke||n.util.isArray(ke)?"number"==typeof ke&&(Be.alert.description=ke):(ke.message&&(Be.message=ke.message),ke.alert&&(Be.alert.description=ke.alert))),X.error(X,Be)}null!==X.session.certificateRequest&&(j=b.createRecord(X,{type:b.ContentType.handshake,data:b.createCertificate(X)}),b.queue(X,j)),j=b.createRecord(X,{type:b.ContentType.handshake,data:b.createClientKeyExchange(X)}),b.queue(X,j),X.expect=M;var Re=function(Se,Qe){null!==Se.session.certificateRequest&&null!==Se.session.clientCertificate&&b.queue(Se,b.createRecord(Se,{type:b.ContentType.handshake,data:b.createCertificateVerify(Se,Qe)})),b.queue(Se,b.createRecord(Se,{type:b.ContentType.change_cipher_spec,data:b.createChangeCipherSpec()})),Se.state.pending=b.createConnectionState(Se),Se.state.current.write=Se.state.pending.write,b.queue(Se,b.createRecord(Se,{type:b.ContentType.handshake,data:b.createFinished(Se)})),Se.expect=P,b.flush(Se),Se.process()};if(null===X.session.certificateRequest||null===X.session.clientCertificate)return Re(X,null);b.getClientSignature(X,Re)},b.handleChangeCipherSpec=function(X,j){if(1!==j.fragment.getByte())return X.error(X,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.illegal_parameter}});var ae=X.entity===b.ConnectionEnd.client;(X.session.resuming&&ae||!X.session.resuming&&!ae)&&(X.state.pending=b.createConnectionState(X)),X.state.current.read=X.state.pending.read,(!X.session.resuming&&ae||X.session.resuming&&!ae)&&(X.state.pending=null),X.expect=ae?U:J,X.process()},b.handleFinished=function(X,j,ae){var Be=j.fragment;Be.read-=4;var je=Be.bytes();Be.read+=4;var ke=j.fragment.getBytes();(Be=n.util.createBuffer()).putBuffer(X.session.md5.digest()),Be.putBuffer(X.session.sha1.digest());var Re=X.entity===b.ConnectionEnd.client;if((Be=e(X.session.sp.master_secret,Re?"server finished":"client finished",Be.getBytes(),12)).getBytes()!==ke)return X.error(X,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.decrypt_error}});X.session.md5.update(je),X.session.sha1.update(je),(X.session.resuming&&Re||!X.session.resuming&&!Re)&&(b.queue(X,b.createRecord(X,{type:b.ContentType.change_cipher_spec,data:b.createChangeCipherSpec()})),X.state.current.write=X.state.pending.write,X.state.pending=null,b.queue(X,b.createRecord(X,{type:b.ContentType.handshake,data:b.createFinished(X)}))),X.expect=Re?W:ee,X.handshaking=!1,++X.handshakes,X.peerCertificate=Re?X.session.serverCertificate:X.session.clientCertificate,b.flush(X),X.isConnected=!0,X.connected(X),X.process()},b.handleAlert=function(X,j){var je,ae=j.fragment,Be={level:ae.getByte(),description:ae.getByte()};switch(Be.description){case b.Alert.Description.close_notify:je="Connection closed.";break;case b.Alert.Description.unexpected_message:je="Unexpected message.";break;case b.Alert.Description.bad_record_mac:je="Bad record MAC.";break;case b.Alert.Description.decryption_failed:je="Decryption failed.";break;case b.Alert.Description.record_overflow:je="Record overflow.";break;case b.Alert.Description.decompression_failure:je="Decompression failed.";break;case b.Alert.Description.handshake_failure:je="Handshake failure.";break;case b.Alert.Description.bad_certificate:je="Bad certificate.";break;case b.Alert.Description.unsupported_certificate:je="Unsupported certificate.";break;case b.Alert.Description.certificate_revoked:je="Certificate revoked.";break;case b.Alert.Description.certificate_expired:je="Certificate expired.";break;case b.Alert.Description.certificate_unknown:je="Certificate unknown.";break;case b.Alert.Description.illegal_parameter:je="Illegal parameter.";break;case b.Alert.Description.unknown_ca:je="Unknown certificate authority.";break;case b.Alert.Description.access_denied:je="Access denied.";break;case b.Alert.Description.decode_error:je="Decode error.";break;case b.Alert.Description.decrypt_error:je="Decrypt error.";break;case b.Alert.Description.export_restriction:je="Export restriction.";break;case b.Alert.Description.protocol_version:je="Unsupported protocol version.";break;case b.Alert.Description.insufficient_security:je="Insufficient security.";break;case b.Alert.Description.internal_error:je="Internal error.";break;case b.Alert.Description.user_canceled:je="User canceled.";break;case b.Alert.Description.no_renegotiation:je="Renegotiation not supported.";break;default:je="Unknown error."}if(Be.description===b.Alert.Description.close_notify)return X.close();X.error(X,{message:je,send:!1,origin:X.entity===b.ConnectionEnd.client?"server":"client",alert:Be}),X.process()},b.handleHandshake=function(X,j){var ae=j.fragment,Be=ae.getByte(),je=ae.getInt24();if(je>ae.length())return X.fragmented=j,j.fragment=n.util.createBuffer(),ae.read-=4,X.process();X.fragmented=null,ae.read-=4;var ke=ae.bytes(je+4);ae.read+=4,Be in ct[X.entity][X.expect]?(X.entity===b.ConnectionEnd.server&&!X.open&&!X.fail&&(X.handshaking=!0,X.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:n.md.md5.create(),sha1:n.md.sha1.create()}),Be!==b.HandshakeType.hello_request&&Be!==b.HandshakeType.certificate_verify&&Be!==b.HandshakeType.finished&&(X.session.md5.update(ke),X.session.sha1.update(ke)),ct[X.entity][X.expect][Be](X,j,je)):b.handleUnexpected(X,j)},b.handleApplicationData=function(X,j){X.data.putBuffer(j.fragment),X.dataReady(X),X.process()},b.handleHeartbeat=function(X,j){var ae=j.fragment,Be=ae.getByte(),je=ae.getInt16(),ke=ae.getBytes(je);if(Be===b.HeartbeatMessageType.heartbeat_request){if(X.handshaking||je>ke.length)return X.process();b.queue(X,b.createRecord(X,{type:b.ContentType.heartbeat,data:b.createHeartbeat(b.HeartbeatMessageType.heartbeat_response,ke)})),b.flush(X)}else if(Be===b.HeartbeatMessageType.heartbeat_response){if(ke!==X.expectedHeartbeatPayload)return X.process();X.heartbeatReceived&&X.heartbeatReceived(X,n.util.createBuffer(ke))}X.process()};var N=1,R=2,k=3,O=4,P=5,U=6,W=7,M=8,V=1,Q=2,Y=3,fe=4,J=5,ee=6,E=b.handleUnexpected,te=b.handleChangeCipherSpec,$=b.handleAlert,ue=b.handleHandshake,me=b.handleApplicationData,we=b.handleHeartbeat,ye=[];ye[b.ConnectionEnd.client]=[[E,$,ue,E,we],[E,$,ue,E,we],[E,$,ue,E,we],[E,$,ue,E,we],[E,$,ue,E,we],[te,$,E,E,we],[E,$,ue,E,we],[E,$,ue,me,we],[E,$,ue,E,we]],ye[b.ConnectionEnd.server]=[[E,$,ue,E,we],[E,$,ue,E,we],[E,$,ue,E,we],[E,$,ue,E,we],[te,$,E,E,we],[E,$,ue,E,we],[E,$,ue,me,we],[E,$,ue,E,we]];var qe=b.handleHelloRequest,Ge=b.handleCertificate,ve=b.handleServerKeyExchange,c=b.handleCertificateRequest,tt=b.handleServerHelloDone,_t=b.handleFinished,ct=[];ct[b.ConnectionEnd.client]=[[E,E,b.handleServerHello,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[qe,E,E,E,E,E,E,E,E,E,E,Ge,ve,c,tt,E,E,E,E,E,E],[qe,E,E,E,E,E,E,E,E,E,E,E,ve,c,tt,E,E,E,E,E,E],[qe,E,E,E,E,E,E,E,E,E,E,E,E,c,tt,E,E,E,E,E,E],[qe,E,E,E,E,E,E,E,E,E,E,E,E,E,tt,E,E,E,E,E,E],[qe,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[qe,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,_t],[qe,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[qe,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]],ct[b.ConnectionEnd.server]=[[E,b.handleClientHello,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,Ge,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,b.handleClientKeyExchange,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,b.handleCertificateVerify,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,_t],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E],[E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E]],b.generateKeys=function(X,j){var ae=e,Be=j.client_random+j.server_random;X.session.resuming||(j.master_secret=ae(j.pre_master_secret,"master secret",Be,48).bytes(),j.pre_master_secret=null);var je=2*j.mac_key_length+2*j.enc_key_length,ke=X.version.major===b.Versions.TLS_1_0.major&&X.version.minor===b.Versions.TLS_1_0.minor;ke&&(je+=2*j.fixed_iv_length);var Re=ae(j.master_secret,"key expansion",Be=j.server_random+j.client_random,je),Se={client_write_MAC_key:Re.getBytes(j.mac_key_length),server_write_MAC_key:Re.getBytes(j.mac_key_length),client_write_key:Re.getBytes(j.enc_key_length),server_write_key:Re.getBytes(j.enc_key_length)};return ke&&(Se.client_write_IV=Re.getBytes(j.fixed_iv_length),Se.server_write_IV=Re.getBytes(j.fixed_iv_length)),Se},b.createConnectionState=function(X){var j=X.entity===b.ConnectionEnd.client,ae=function(){var ke={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(Re){return!0},compressionState:null,compressFunction:function(Re){return!0},updateSequenceNumber:function(){4294967295===ke.sequenceNumber[1]?(ke.sequenceNumber[1]=0,++ke.sequenceNumber[0]):++ke.sequenceNumber[1]}};return ke},Be={read:ae(),write:ae()};if(Be.read.update=function(ke,Re){return Be.read.cipherFunction(Re,Be.read)?Be.read.compressFunction(ke,Re,Be.read)||ke.error(ke,{message:"Could not decompress record.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.decompression_failure}}):ke.error(ke,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.bad_record_mac}}),!ke.fail},Be.write.update=function(ke,Re){return Be.write.compressFunction(ke,Re,Be.write)?Be.write.cipherFunction(Re,Be.write)||ke.error(ke,{message:"Could not encrypt record.",send:!1,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.internal_error}}):ke.error(ke,{message:"Could not compress record.",send:!1,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.internal_error}}),!ke.fail},X.session){var je=X.session.sp;switch(X.session.cipherSuite.initSecurityParameters(je),je.keys=b.generateKeys(X,je),Be.read.macKey=j?je.keys.server_write_MAC_key:je.keys.client_write_MAC_key,Be.write.macKey=j?je.keys.client_write_MAC_key:je.keys.server_write_MAC_key,X.session.cipherSuite.initConnectionState(Be,X,je),je.compression_algorithm){case b.CompressionMethod.none:break;case b.CompressionMethod.deflate:Be.read.compressFunction=w,Be.write.compressFunction=y;break;default:throw new Error("Unsupported compression algorithm.")}}return Be},b.createRandom=function(){var X=new Date,j=+X+6e4*X.getTimezoneOffset(),ae=n.util.createBuffer();return ae.putInt32(j),ae.putBytes(n.random.getBytes(28)),ae},b.createRecord=function(X,j){return j.data?{type:j.type,version:{major:X.version.major,minor:X.version.minor},length:j.data.length(),fragment:j.data}:null},b.createAlert=function(X,j){var ae=n.util.createBuffer();return ae.putByte(j.level),ae.putByte(j.description),b.createRecord(X,{type:b.ContentType.alert,data:ae})},b.createClientHello=function(X){X.session.clientHelloVersion={major:X.version.major,minor:X.version.minor};for(var j=n.util.createBuffer(),ae=0;ae<X.cipherSuites.length;++ae){var Be=X.cipherSuites[ae];j.putByte(Be.id[0]),j.putByte(Be.id[1])}var je=j.length(),ke=n.util.createBuffer();ke.putByte(b.CompressionMethod.none);var Re=ke.length(),Se=n.util.createBuffer();if(X.virtualHost){var Qe=n.util.createBuffer();Qe.putByte(0),Qe.putByte(0);var Xe=n.util.createBuffer();Xe.putByte(0),x(Xe,2,n.util.createBuffer(X.virtualHost));var Ke=n.util.createBuffer();x(Ke,2,Xe),x(Qe,2,Ke),Se.putBuffer(Qe)}var Je=Se.length();Je>0&&(Je+=2);var Ct=X.session.id,ht=Ct.length+1+2+4+28+2+je+1+Re+Je,Ze=n.util.createBuffer();return Ze.putByte(b.HandshakeType.client_hello),Ze.putInt24(ht),Ze.putByte(X.version.major),Ze.putByte(X.version.minor),Ze.putBytes(X.session.sp.client_random),x(Ze,1,n.util.createBuffer(Ct)),x(Ze,2,j),x(Ze,1,ke),Je>0&&x(Ze,2,Se),Ze},b.createServerHello=function(X){var j=X.session.id,ae=j.length+1+2+4+28+2+1,Be=n.util.createBuffer();return Be.putByte(b.HandshakeType.server_hello),Be.putInt24(ae),Be.putByte(X.version.major),Be.putByte(X.version.minor),Be.putBytes(X.session.sp.server_random),x(Be,1,n.util.createBuffer(j)),Be.putByte(X.session.cipherSuite.id[0]),Be.putByte(X.session.cipherSuite.id[1]),Be.putByte(X.session.compressionMethod),Be},b.createCertificate=function(X){var j=X.entity===b.ConnectionEnd.client,ae=null;X.getCertificate&&(ae=X.getCertificate(X,j?X.session.certificateRequest:X.session.extensions.server_name.serverNameList));var je=n.util.createBuffer();if(null!==ae)try{n.util.isArray(ae)||(ae=[ae]);for(var ke=null,Re=0;Re<ae.length;++Re){var Se=n.pem.decode(ae[Re])[0];if("CERTIFICATE"!==Se.type&&"X509 CERTIFICATE"!==Se.type&&"TRUSTED CERTIFICATE"!==Se.type){var Qe=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw Qe.headerType=Se.type,Qe}if(Se.procType&&"ENCRYPTED"===Se.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var Xe=n.util.createBuffer(Se.body);null===ke&&(ke=n.asn1.fromDer(Xe.bytes(),!1));var Ke=n.util.createBuffer();x(Ke,3,Xe),je.putBuffer(Ke)}ae=n.pki.certificateFromAsn1(ke),j?X.session.clientCertificate=ae:X.session.serverCertificate=ae}catch(ht){return X.error(X,{message:"Could not send certificate list.",cause:ht,send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.bad_certificate}})}var Je=3+je.length(),Ct=n.util.createBuffer();return Ct.putByte(b.HandshakeType.certificate),Ct.putInt24(Je),x(Ct,3,je),Ct},b.createClientKeyExchange=function(X){var j=n.util.createBuffer();j.putByte(X.session.clientHelloVersion.major),j.putByte(X.session.clientHelloVersion.minor),j.putBytes(n.random.getBytes(46));var ae=X.session.sp;ae.pre_master_secret=j.getBytes();var je=(j=X.session.serverCertificate.publicKey.encrypt(ae.pre_master_secret)).length+2,ke=n.util.createBuffer();return ke.putByte(b.HandshakeType.client_key_exchange),ke.putInt24(je),ke.putInt16(j.length),ke.putBytes(j),ke},b.createServerKeyExchange=function(X){return n.util.createBuffer()},b.getClientSignature=function(X,j){var ae=n.util.createBuffer();ae.putBuffer(X.session.md5.digest()),ae.putBuffer(X.session.sha1.digest()),ae=ae.getBytes(),X.getSignature=X.getSignature||function(Be,je,ke){var Re=null;if(Be.getPrivateKey)try{Re=Be.getPrivateKey(Be,Be.session.clientCertificate),Re=n.pki.privateKeyFromPem(Re)}catch(Se){Be.error(Be,{message:"Could not get private key.",cause:Se,send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.internal_error}})}null===Re?Be.error(Be,{message:"No private key set.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.internal_error}}):je=Re.sign(je,null),ke(Be,je)},X.getSignature(X,ae,j)},b.createCertificateVerify=function(X,j){var ae=j.length+2,Be=n.util.createBuffer();return Be.putByte(b.HandshakeType.certificate_verify),Be.putInt24(ae),Be.putInt16(j.length),Be.putBytes(j),Be},b.createCertificateRequest=function(X){var j=n.util.createBuffer();j.putByte(1);var ae=n.util.createBuffer();for(var Be in X.caStore.certs){var ke=n.pki.distinguishedNameToAsn1(X.caStore.certs[Be].subject),Re=n.asn1.toDer(ke);ae.putInt16(Re.length()),ae.putBuffer(Re)}var Se=1+j.length()+2+ae.length(),Qe=n.util.createBuffer();return Qe.putByte(b.HandshakeType.certificate_request),Qe.putInt24(Se),x(Qe,1,j),x(Qe,2,ae),Qe},b.createServerHelloDone=function(X){var j=n.util.createBuffer();return j.putByte(b.HandshakeType.server_hello_done),j.putInt24(0),j},b.createChangeCipherSpec=function(){var X=n.util.createBuffer();return X.putByte(1),X},b.createFinished=function(X){var j=n.util.createBuffer();j.putBuffer(X.session.md5.digest()),j.putBuffer(X.session.sha1.digest()),j=e(X.session.sp.master_secret,X.entity===b.ConnectionEnd.client?"client finished":"server finished",j.getBytes(),12);var Se=n.util.createBuffer();return Se.putByte(b.HandshakeType.finished),Se.putInt24(j.length()),Se.putBuffer(j),Se},b.createHeartbeat=function(X,j,ae){typeof ae>"u"&&(ae=j.length);var Be=n.util.createBuffer();Be.putByte(X),Be.putInt16(ae),Be.putBytes(j);var je=Be.length(),ke=Math.max(16,je-ae-3);return Be.putBytes(n.random.getBytes(ke)),Be},b.queue=function(X,j){if(j&&(0!==j.fragment.length()||j.type!==b.ContentType.handshake&&j.type!==b.ContentType.alert&&j.type!==b.ContentType.change_cipher_spec)){if(j.type===b.ContentType.handshake){var ae=j.fragment.bytes();X.session.md5.update(ae),X.session.sha1.update(ae),ae=null}var Be;if(j.fragment.length()<=b.MaxFragment)Be=[j];else{Be=[];for(var je=j.fragment.bytes();je.length>b.MaxFragment;)Be.push(b.createRecord(X,{type:j.type,data:n.util.createBuffer(je.slice(0,b.MaxFragment))})),je=je.slice(b.MaxFragment);je.length>0&&Be.push(b.createRecord(X,{type:j.type,data:n.util.createBuffer(je)}))}for(var ke=0;ke<Be.length&&!X.fail;++ke){var Re=Be[ke];X.state.current.write.update(X,Re)&&X.records.push(Re)}}},b.flush=function(X){for(var j=0;j<X.records.length;++j){var ae=X.records[j];X.tlsData.putByte(ae.type),X.tlsData.putByte(ae.version.major),X.tlsData.putByte(ae.version.minor),X.tlsData.putInt16(ae.fragment.length()),X.tlsData.putBuffer(X.records[j].fragment)}return X.records=[],X.tlsDataReady(X)};var en=function(X){switch(X){case!0:return!0;case n.pki.certificateError.bad_certificate:return b.Alert.Description.bad_certificate;case n.pki.certificateError.unsupported_certificate:return b.Alert.Description.unsupported_certificate;case n.pki.certificateError.certificate_revoked:return b.Alert.Description.certificate_revoked;case n.pki.certificateError.certificate_expired:return b.Alert.Description.certificate_expired;case n.pki.certificateError.certificate_unknown:return b.Alert.Description.certificate_unknown;case n.pki.certificateError.unknown_ca:return b.Alert.Description.unknown_ca;default:return b.Alert.Description.bad_certificate}};for(var Dt in b.verifyCertificateChain=function(X,j){try{var ae={};for(var Be in X.verifyOptions)ae[Be]=X.verifyOptions[Be];ae.verify=function(ke,Re,Se){en(ke);var Xe=X.verify(X,ke,Re,Se);if(!0!==Xe){if("object"==typeof Xe&&!n.util.isArray(Xe)){var Ke=new Error("The application rejected the certificate.");throw Ke.send=!0,Ke.alert={level:b.Alert.Level.fatal,description:b.Alert.Description.bad_certificate},Xe.message&&(Ke.message=Xe.message),Xe.alert&&(Ke.alert.description=Xe.alert),Ke}Xe!==ke&&(Xe=function(X){switch(X){case!0:return!0;case b.Alert.Description.bad_certificate:return n.pki.certificateError.bad_certificate;case b.Alert.Description.unsupported_certificate:return n.pki.certificateError.unsupported_certificate;case b.Alert.Description.certificate_revoked:return n.pki.certificateError.certificate_revoked;case b.Alert.Description.certificate_expired:return n.pki.certificateError.certificate_expired;case b.Alert.Description.certificate_unknown:return n.pki.certificateError.certificate_unknown;case b.Alert.Description.unknown_ca:return n.pki.certificateError.unknown_ca;default:return n.pki.certificateError.bad_certificate}}(Xe))}return Xe},n.pki.verifyCertificateChain(X.caStore,j,ae)}catch(ke){var je=ke;("object"!=typeof je||n.util.isArray(je))&&(je={send:!0,alert:{level:b.Alert.Level.fatal,description:en(ke)}}),"send"in je||(je.send=!0),"alert"in je||(je.alert={level:b.Alert.Level.fatal,description:en(je.error)}),X.error(X,je)}return!X.fail},b.createSessionCache=function(X,j){var ae=null;if(X&&X.getSession&&X.setSession&&X.order)ae=X;else{for(var Be in(ae={}).cache=X||{},ae.capacity=Math.max(j||100,1),ae.order=[],X)ae.order.length<=j?ae.order.push(Be):delete X[Be];ae.getSession=function(je){var ke=null,Re=null;if(je?Re=n.util.bytesToHex(je):ae.order.length>0&&(Re=ae.order[0]),null!==Re&&Re in ae.cache)for(var Se in ke=ae.cache[Re],delete ae.cache[Re],ae.order)if(ae.order[Se]===Re){ae.order.splice(Se,1);break}return ke},ae.setSession=function(je,ke){if(ae.order.length===ae.capacity){var Re=ae.order.shift();delete ae.cache[Re]}Re=n.util.bytesToHex(je),ae.order.push(Re),ae.cache[Re]=ke}}return ae},b.createConnection=function(X){var j;j=X.caStore?n.util.isArray(X.caStore)?n.pki.createCaStore(X.caStore):X.caStore:n.pki.createCaStore();var ae=X.cipherSuites||null;if(null===ae)for(var Be in ae=[],b.CipherSuites)ae.push(b.CipherSuites[Be]);var je=X.server?b.ConnectionEnd.server:b.ConnectionEnd.client,ke=X.sessionCache?b.createSessionCache(X.sessionCache):null,Re={version:{major:b.Version.major,minor:b.Version.minor},entity:je,sessionId:X.sessionId,caStore:j,sessionCache:ke,cipherSuites:ae,connected:X.connected,virtualHost:X.virtualHost||null,verifyClient:X.verifyClient||!1,verify:X.verify||function(Ke,Je,Ct,ht){return Je},verifyOptions:X.verifyOptions||{},getCertificate:X.getCertificate||null,getPrivateKey:X.getPrivateKey||null,getSignature:X.getSignature||null,input:n.util.createBuffer(),tlsData:n.util.createBuffer(),data:n.util.createBuffer(),tlsDataReady:X.tlsDataReady,dataReady:X.dataReady,heartbeatReceived:X.heartbeatReceived,closed:X.closed,error:function(Ke,Je){Je.origin=Je.origin||(Ke.entity===b.ConnectionEnd.client?"client":"server"),Je.send&&(b.queue(Ke,b.createAlert(Ke,Je.alert)),b.flush(Ke));var Ct=!1!==Je.fatal;Ct&&(Ke.fail=!0),X.error(Ke,Je),Ct&&Ke.close(!1)},deflate:X.deflate||null,inflate:X.inflate||null,reset:function(Ke){Re.version={major:b.Version.major,minor:b.Version.minor},Re.record=null,Re.session=null,Re.peerCertificate=null,Re.state={pending:null,current:null},Re.expect=0,Re.fragmented=null,Re.records=[],Re.open=!1,Re.handshakes=0,Re.handshaking=!1,Re.isConnected=!1,Re.fail=!(Ke||typeof Ke>"u"),Re.input.clear(),Re.tlsData.clear(),Re.data.clear(),Re.state.current=b.createConnectionState(Re)}};return Re.reset(),Re.handshake=function(Ke){if(Re.entity!==b.ConnectionEnd.client)Re.error(Re,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(Re.handshaking)Re.error(Re,{message:"Handshake already in progress.",fatal:!1});else{Re.fail&&!Re.open&&0===Re.handshakes&&(Re.fail=!1),Re.handshaking=!0;var Je=null;(Ke=Ke||"").length>0&&(Re.sessionCache&&(Je=Re.sessionCache.getSession(Ke)),null===Je&&(Ke="")),0===Ke.length&&Re.sessionCache&&null!==(Je=Re.sessionCache.getSession())&&(Ke=Je.id),Re.session={id:Ke,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:n.md.md5.create(),sha1:n.md.sha1.create()},Je&&(Re.version=Je.version,Re.session.sp=Je.sp),Re.session.sp.client_random=b.createRandom().getBytes(),Re.open=!0,b.queue(Re,b.createRecord(Re,{type:b.ContentType.handshake,data:b.createClientHello(Re)})),b.flush(Re)}},Re.process=function(Ke){var Je=0;return Ke&&Re.input.putBytes(Ke),Re.fail||(null!==Re.record&&Re.record.ready&&Re.record.fragment.isEmpty()&&(Re.record=null),null===Re.record&&(Je=function(Ke){var Je=0,Ct=Ke.input,ht=Ct.length();if(ht<5)Je=5-ht;else{Ke.record={type:Ct.getByte(),version:{major:Ct.getByte(),minor:Ct.getByte()},length:Ct.getInt16(),fragment:n.util.createBuffer(),ready:!1};var Ze=Ke.record.version.major===Ke.version.major;Ze&&Ke.session&&Ke.session.version&&(Ze=Ke.record.version.minor===Ke.version.minor),Ze||Ke.error(Ke,{message:"Incompatible TLS version.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.protocol_version}})}return Je}(Re)),!Re.fail&&null!==Re.record&&!Re.record.ready&&(Je=function(Ke){var Je=0,Ct=Ke.input,ht=Ct.length();return ht<Ke.record.length?Je=Ke.record.length-ht:(Ke.record.fragment.putBytes(Ct.getBytes(Ke.record.length)),Ct.compact(),Ke.state.current.read.update(Ke,Ke.record)&&(null!==Ke.fragmented&&(Ke.fragmented.type===Ke.record.type?(Ke.fragmented.fragment.putBuffer(Ke.record.fragment),Ke.record=Ke.fragmented):Ke.error(Ke,{message:"Invalid fragmented record.",send:!0,alert:{level:b.Alert.Level.fatal,description:b.Alert.Description.unexpected_message}})),Ke.record.ready=!0)),Je}(Re)),!Re.fail&&null!==Re.record&&Re.record.ready&&function(Ke,Je){var Ct=Je.type-b.ContentType.change_cipher_spec,ht=ye[Ke.entity][Ke.expect];Ct in ht?ht[Ct](Ke,Je):b.handleUnexpected(Ke,Je)}(Re,Re.record)),Je},Re.prepare=function(Ke){return b.queue(Re,b.createRecord(Re,{type:b.ContentType.application_data,data:n.util.createBuffer(Ke)})),b.flush(Re)},Re.prepareHeartbeatRequest=function(Ke,Je){return Ke instanceof n.util.ByteBuffer&&(Ke=Ke.bytes()),typeof Je>"u"&&(Je=Ke.length),Re.expectedHeartbeatPayload=Ke,b.queue(Re,b.createRecord(Re,{type:b.ContentType.heartbeat,data:b.createHeartbeat(b.HeartbeatMessageType.heartbeat_request,Ke,Je)})),b.flush(Re)},Re.close=function(Ke){if(!Re.fail&&Re.sessionCache&&Re.session){var Je={id:Re.session.id,version:Re.session.version,sp:Re.session.sp};Je.sp.keys=null,Re.sessionCache.setSession(Je.id,Je)}Re.open&&(Re.open=!1,Re.input.clear(),(Re.isConnected||Re.handshaking)&&(Re.isConnected=Re.handshaking=!1,b.queue(Re,b.createAlert(Re,{level:b.Alert.Level.warning,description:b.Alert.Description.close_notify})),b.flush(Re)),Re.closed(Re)),Re.reset(Ke)},Re},nt.exports=n.tls=n.tls||{},b)"function"!=typeof b[Dt]&&(n.tls[Dt]=b[Dt]);n.tls.prf_tls1=e,n.tls.hmac_sha1=function(X,j,ae){var Be=n.hmac.create();Be.start("SHA1",X);var je=n.util.createBuffer();return je.putInt32(j[0]),je.putInt32(j[1]),je.putByte(ae.type),je.putByte(ae.version.major),je.putByte(ae.version.minor),je.putInt16(ae.length),je.putBytes(ae.fragment.bytes()),Be.update(je.getBytes()),Be.digest().getBytes()},n.tls.createSessionCache=b.createSessionCache,n.tls.createConnection=b.createConnection},4747:(nt,_e,m)=>{var n=m(8659),e=m(2020),h=nt.exports=n.util=n.util||{};function S(M){if(8!==M&&16!==M&&24!==M&&32!==M)throw new Error("Only 8, 16, 24, or 32 bits supported: "+M)}function y(M){if(this.data="",this.read=0,"string"==typeof M)this.data=M;else if(h.isArrayBuffer(M)||h.isArrayBufferView(M))if(typeof Buffer<"u"&&M instanceof Buffer)this.data=M.toString("binary");else{var B=new Uint8Array(M);try{this.data=String.fromCharCode.apply(null,B)}catch{for(var V=0;V<B.length;++V)this.putByte(B[V])}}else(M instanceof y||"object"==typeof M&&"string"==typeof M.data&&"number"==typeof M.read)&&(this.data=M.data,this.read=M.read);this._constructedStringLength=0}(function(){if(typeof process<"u"&&process.nextTick&&!process.browser)return h.nextTick=process.nextTick,void(h.setImmediate="function"==typeof setImmediate?setImmediate:h.nextTick);if("function"==typeof setImmediate)return h.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(h.nextTick=function(ee){return setImmediate(ee)});if(h.setImmediate=function(ee){setTimeout(ee,0)},typeof window<"u"&&"function"==typeof window.postMessage){let ee=function(G){if(G.source===window&&G.data===M){G.stopPropagation();var E=B.slice();B.length=0,E.forEach(function(te){te()})}};var M="forge.setImmediate",B=[];h.setImmediate=function(G){B.push(G),1===B.length&&window.postMessage(M,"*")},window.addEventListener("message",ee,!0)}if(typeof MutationObserver<"u"){var V=Date.now(),Q=!0,Y=document.createElement("div");B=[],new MutationObserver(function(){var G=B.slice();B.length=0,G.forEach(function(E){E()})}).observe(Y,{attributes:!0});var fe=h.setImmediate;h.setImmediate=function(G){Date.now()-V>15?(V=Date.now(),fe(G)):(B.push(G),1===B.length&&Y.setAttribute("a",Q=!Q))}}h.nextTick=h.setImmediate})(),h.isNodejs=typeof process<"u"&&process.versions&&process.versions.node,h.globalScope=h.isNodejs?global:typeof self>"u"?window:self,h.isArray=Array.isArray||function(M){return"[object Array]"===Object.prototype.toString.call(M)},h.isArrayBuffer=function(M){return typeof ArrayBuffer<"u"&&M instanceof ArrayBuffer},h.isArrayBufferView=function(M){return M&&h.isArrayBuffer(M.buffer)&&void 0!==M.byteLength},h.ByteBuffer=y,h.ByteStringBuffer=y,h.ByteStringBuffer.prototype._optimizeConstructedString=function(M){this._constructedStringLength+=M,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},h.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},h.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},h.ByteStringBuffer.prototype.putByte=function(M){return this.putBytes(String.fromCharCode(M))},h.ByteStringBuffer.prototype.fillWithByte=function(M,B){M=String.fromCharCode(M);for(var V=this.data;B>0;)1&B&&(V+=M),(B>>>=1)>0&&(M+=M);return this.data=V,this._optimizeConstructedString(B),this},h.ByteStringBuffer.prototype.putBytes=function(M){return this.data+=M,this._optimizeConstructedString(M.length),this},h.ByteStringBuffer.prototype.putString=function(M){return this.putBytes(h.encodeUtf8(M))},h.ByteStringBuffer.prototype.putInt16=function(M){return this.putBytes(String.fromCharCode(M>>8&255)+String.fromCharCode(255&M))},h.ByteStringBuffer.prototype.putInt24=function(M){return this.putBytes(String.fromCharCode(M>>16&255)+String.fromCharCode(M>>8&255)+String.fromCharCode(255&M))},h.ByteStringBuffer.prototype.putInt32=function(M){return this.putBytes(String.fromCharCode(M>>24&255)+String.fromCharCode(M>>16&255)+String.fromCharCode(M>>8&255)+String.fromCharCode(255&M))},h.ByteStringBuffer.prototype.putInt16Le=function(M){return this.putBytes(String.fromCharCode(255&M)+String.fromCharCode(M>>8&255))},h.ByteStringBuffer.prototype.putInt24Le=function(M){return this.putBytes(String.fromCharCode(255&M)+String.fromCharCode(M>>8&255)+String.fromCharCode(M>>16&255))},h.ByteStringBuffer.prototype.putInt32Le=function(M){return this.putBytes(String.fromCharCode(255&M)+String.fromCharCode(M>>8&255)+String.fromCharCode(M>>16&255)+String.fromCharCode(M>>24&255))},h.ByteStringBuffer.prototype.putInt=function(M,B){S(B);var V="";do{B-=8,V+=String.fromCharCode(M>>B&255)}while(B>0);return this.putBytes(V)},h.ByteStringBuffer.prototype.putSignedInt=function(M,B){return M<0&&(M+=2<<B-1),this.putInt(M,B)},h.ByteStringBuffer.prototype.putBuffer=function(M){return this.putBytes(M.getBytes())},h.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},h.ByteStringBuffer.prototype.getInt16=function(){var M=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,M},h.ByteStringBuffer.prototype.getInt24=function(){var M=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,M},h.ByteStringBuffer.prototype.getInt32=function(){var M=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,M},h.ByteStringBuffer.prototype.getInt16Le=function(){var M=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,M},h.ByteStringBuffer.prototype.getInt24Le=function(){var M=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,M},h.ByteStringBuffer.prototype.getInt32Le=function(){var M=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,M},h.ByteStringBuffer.prototype.getInt=function(M){S(M);var B=0;do{B=(B<<8)+this.data.charCodeAt(this.read++),M-=8}while(M>0);return B},h.ByteStringBuffer.prototype.getSignedInt=function(M){var B=this.getInt(M),V=2<<M-2;return B>=V&&(B-=V<<1),B},h.ByteStringBuffer.prototype.getBytes=function(M){var B;return M?(M=Math.min(this.length(),M),B=this.data.slice(this.read,this.read+M),this.read+=M):0===M?B="":(B=0===this.read?this.data:this.data.slice(this.read),this.clear()),B},h.ByteStringBuffer.prototype.bytes=function(M){return typeof M>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+M)},h.ByteStringBuffer.prototype.at=function(M){return this.data.charCodeAt(this.read+M)},h.ByteStringBuffer.prototype.setAt=function(M,B){return this.data=this.data.substr(0,this.read+M)+String.fromCharCode(B)+this.data.substr(this.read+M+1),this},h.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},h.ByteStringBuffer.prototype.copy=function(){var M=h.createBuffer(this.data);return M.read=this.read,M},h.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},h.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},h.ByteStringBuffer.prototype.truncate=function(M){var B=Math.max(0,this.length()-M);return this.data=this.data.substr(this.read,B),this.read=0,this},h.ByteStringBuffer.prototype.toHex=function(){for(var M="",B=this.read;B<this.data.length;++B){var V=this.data.charCodeAt(B);V<16&&(M+="0"),M+=V.toString(16)}return M},h.ByteStringBuffer.prototype.toString=function(){return h.decodeUtf8(this.bytes())},h.DataBuffer=function f(M,B){this.read=(B=B||{}).readOffset||0,this.growSize=B.growSize||1024;var V=h.isArrayBuffer(M),Q=h.isArrayBufferView(M);if(V||Q)return this.data=V?new DataView(M):new DataView(M.buffer,M.byteOffset,M.byteLength),void(this.write="writeOffset"in B?B.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=M&&this.putBytes(M),"writeOffset"in B&&(this.write=B.writeOffset)},h.DataBuffer.prototype.length=function(){return this.write-this.read},h.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},h.DataBuffer.prototype.accommodate=function(M,B){if(this.length()>=M)return this;B=Math.max(B||this.growSize,M);var V=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),Q=new Uint8Array(this.length()+B);return Q.set(V),this.data=new DataView(Q.buffer),this},h.DataBuffer.prototype.putByte=function(M){return this.accommodate(1),this.data.setUint8(this.write++,M),this},h.DataBuffer.prototype.fillWithByte=function(M,B){this.accommodate(B);for(var V=0;V<B;++V)this.data.setUint8(M);return this},h.DataBuffer.prototype.putBytes=function(M,B){if(h.isArrayBufferView(M)){var Q=(V=new Uint8Array(M.buffer,M.byteOffset,M.byteLength)).byteLength-V.byteOffset;return this.accommodate(Q),new Uint8Array(this.data.buffer,this.write).set(V),this.write+=Q,this}if(h.isArrayBuffer(M)){var V=new Uint8Array(M);return this.accommodate(V.byteLength),new Uint8Array(this.data.buffer).set(V,this.write),this.write+=V.byteLength,this}if(M instanceof h.DataBuffer||"object"==typeof M&&"number"==typeof M.read&&"number"==typeof M.write&&h.isArrayBufferView(M.data))return V=new Uint8Array(M.data.byteLength,M.read,M.length()),this.accommodate(V.byteLength),new Uint8Array(M.data.byteLength,this.write).set(V),this.write+=V.byteLength,this;if(M instanceof h.ByteStringBuffer&&(M=M.data,B="binary"),B=B||"binary","string"==typeof M){var fe;if("hex"===B)return this.accommodate(Math.ceil(M.length/2)),fe=new Uint8Array(this.data.buffer,this.write),this.write+=h.binary.hex.decode(M,fe,this.write),this;if("base64"===B)return this.accommodate(3*Math.ceil(M.length/4)),fe=new Uint8Array(this.data.buffer,this.write),this.write+=h.binary.base64.decode(M,fe,this.write),this;if("utf8"===B&&(M=h.encodeUtf8(M),B="binary"),"binary"===B||"raw"===B)return this.accommodate(M.length),fe=new Uint8Array(this.data.buffer,this.write),this.write+=h.binary.raw.decode(fe),this;if("utf16"===B)return this.accommodate(2*M.length),fe=new Uint16Array(this.data.buffer,this.write),this.write+=h.text.utf16.encode(fe),this;throw new Error("Invalid encoding: "+B)}throw Error("Invalid parameter: "+M)},h.DataBuffer.prototype.putBuffer=function(M){return this.putBytes(M),M.clear(),this},h.DataBuffer.prototype.putString=function(M){return this.putBytes(M,"utf16")},h.DataBuffer.prototype.putInt16=function(M){return this.accommodate(2),this.data.setInt16(this.write,M),this.write+=2,this},h.DataBuffer.prototype.putInt24=function(M){return this.accommodate(3),this.data.setInt16(this.write,M>>8&65535),this.data.setInt8(this.write,M>>16&255),this.write+=3,this},h.DataBuffer.prototype.putInt32=function(M){return this.accommodate(4),this.data.setInt32(this.write,M),this.write+=4,this},h.DataBuffer.prototype.putInt16Le=function(M){return this.accommodate(2),this.data.setInt16(this.write,M,!0),this.write+=2,this},h.DataBuffer.prototype.putInt24Le=function(M){return this.accommodate(3),this.data.setInt8(this.write,M>>16&255),this.data.setInt16(this.write,M>>8&65535,!0),this.write+=3,this},h.DataBuffer.prototype.putInt32Le=function(M){return this.accommodate(4),this.data.setInt32(this.write,M,!0),this.write+=4,this},h.DataBuffer.prototype.putInt=function(M,B){S(B),this.accommodate(B/8);do{B-=8,this.data.setInt8(this.write++,M>>B&255)}while(B>0);return this},h.DataBuffer.prototype.putSignedInt=function(M,B){return S(B),this.accommodate(B/8),M<0&&(M+=2<<B-1),this.putInt(M,B)},h.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},h.DataBuffer.prototype.getInt16=function(){var M=this.data.getInt16(this.read);return this.read+=2,M},h.DataBuffer.prototype.getInt24=function(){var M=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,M},h.DataBuffer.prototype.getInt32=function(){var M=this.data.getInt32(this.read);return this.read+=4,M},h.DataBuffer.prototype.getInt16Le=function(){var M=this.data.getInt16(this.read,!0);return this.read+=2,M},h.DataBuffer.prototype.getInt24Le=function(){var M=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,M},h.DataBuffer.prototype.getInt32Le=function(){var M=this.data.getInt32(this.read,!0);return this.read+=4,M},h.DataBuffer.prototype.getInt=function(M){S(M);var B=0;do{B=(B<<8)+this.data.getInt8(this.read++),M-=8}while(M>0);return B},h.DataBuffer.prototype.getSignedInt=function(M){var B=this.getInt(M),V=2<<M-2;return B>=V&&(B-=V<<1),B},h.DataBuffer.prototype.getBytes=function(M){var B;return M?(M=Math.min(this.length(),M),B=this.data.slice(this.read,this.read+M),this.read+=M):0===M?B="":(B=0===this.read?this.data:this.data.slice(this.read),this.clear()),B},h.DataBuffer.prototype.bytes=function(M){return typeof M>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+M)},h.DataBuffer.prototype.at=function(M){return this.data.getUint8(this.read+M)},h.DataBuffer.prototype.setAt=function(M,B){return this.data.setUint8(M,B),this},h.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},h.DataBuffer.prototype.copy=function(){return new h.DataBuffer(this)},h.DataBuffer.prototype.compact=function(){if(this.read>0){var M=new Uint8Array(this.data.buffer,this.read),B=new Uint8Array(M.byteLength);B.set(M),this.data=new DataView(B),this.write-=this.read,this.read=0}return this},h.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},h.DataBuffer.prototype.truncate=function(M){return this.write=Math.max(0,this.length()-M),this.read=Math.min(this.read,this.write),this},h.DataBuffer.prototype.toHex=function(){for(var M="",B=this.read;B<this.data.byteLength;++B){var V=this.data.getUint8(B);V<16&&(M+="0"),M+=V.toString(16)}return M},h.DataBuffer.prototype.toString=function(M){var B=new Uint8Array(this.data,this.read,this.length());if("binary"===(M=M||"utf8")||"raw"===M)return h.binary.raw.encode(B);if("hex"===M)return h.binary.hex.encode(B);if("base64"===M)return h.binary.base64.encode(B);if("utf8"===M)return h.text.utf8.decode(B);if("utf16"===M)return h.text.utf16.decode(B);throw new Error("Invalid encoding: "+M)},h.createBuffer=function(M,B){return B=B||"raw",void 0!==M&&"utf8"===B&&(M=h.encodeUtf8(M)),new h.ByteBuffer(M)},h.fillString=function(M,B){for(var V="";B>0;)1&B&&(V+=M),(B>>>=1)>0&&(M+=M);return V},h.xorBytes=function(M,B,V){for(var Q="",Y="",fe="",J=0,ee=0;V>0;--V,++J)Y=M.charCodeAt(J)^B.charCodeAt(J),ee>=10&&(Q+=fe,fe="",ee=0),fe+=String.fromCharCode(Y),++ee;return Q+fe},h.hexToBytes=function(M){var B="",V=0;for(!0&M.length&&(V=1,B+=String.fromCharCode(parseInt(M[0],16)));V<M.length;V+=2)B+=String.fromCharCode(parseInt(M.substr(V,2),16));return B},h.bytesToHex=function(M){return h.createBuffer(M).toHex()},h.int32ToBytes=function(M){return String.fromCharCode(M>>24&255)+String.fromCharCode(M>>16&255)+String.fromCharCode(M>>8&255)+String.fromCharCode(255&M)};var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],g="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";h.encode64=function(M,B){for(var Y,fe,J,V="",Q="",ee=0;ee<M.length;)Y=M.charCodeAt(ee++),fe=M.charCodeAt(ee++),J=M.charCodeAt(ee++),V+=x.charAt(Y>>2),V+=x.charAt((3&Y)<<4|fe>>4),isNaN(fe)?V+="==":(V+=x.charAt((15&fe)<<2|J>>6),V+=isNaN(J)?"=":x.charAt(63&J)),B&&V.length>B&&(Q+=V.substr(0,B)+"\r\n",V=V.substr(B));return Q+V},h.decode64=function(M){M=M.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var V,Q,Y,fe,B="",J=0;J<M.length;)V=b[M.charCodeAt(J++)-43],Q=b[M.charCodeAt(J++)-43],Y=b[M.charCodeAt(J++)-43],fe=b[M.charCodeAt(J++)-43],B+=String.fromCharCode(V<<2|Q>>4),64!==Y&&(B+=String.fromCharCode((15&Q)<<4|Y>>2),64!==fe&&(B+=String.fromCharCode((3&Y)<<6|fe)));return B},h.encodeUtf8=function(M){return unescape(encodeURIComponent(M))},h.decodeUtf8=function(M){return decodeURIComponent(escape(M))},h.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:e.encode,decode:e.decode}},h.binary.raw.encode=function(M){return String.fromCharCode.apply(null,M)},h.binary.raw.decode=function(M,B,V){var Q=B;Q||(Q=new Uint8Array(M.length));for(var Y=V=V||0,fe=0;fe<M.length;++fe)Q[Y++]=M.charCodeAt(fe);return B?Y-V:Q},h.binary.hex.encode=h.bytesToHex,h.binary.hex.decode=function(M,B,V){var Q=B;Q||(Q=new Uint8Array(Math.ceil(M.length/2)));var Y=0,fe=V=V||0;for(1&M.length&&(Y=1,Q[fe++]=parseInt(M[0],16));Y<M.length;Y+=2)Q[fe++]=parseInt(M.substr(Y,2),16);return B?fe-V:Q},h.binary.base64.encode=function(M,B){for(var Y,fe,J,V="",Q="",ee=0;ee<M.byteLength;)Y=M[ee++],fe=M[ee++],J=M[ee++],V+=x.charAt(Y>>2),V+=x.charAt((3&Y)<<4|fe>>4),isNaN(fe)?V+="==":(V+=x.charAt((15&fe)<<2|J>>6),V+=isNaN(J)?"=":x.charAt(63&J)),B&&V.length>B&&(Q+=V.substr(0,B)+"\r\n",V=V.substr(B));return Q+V},h.binary.base64.decode=function(M,B,V){var Q=B;Q||(Q=new Uint8Array(3*Math.ceil(M.length/4))),M=M.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var Y,fe,J,ee,G=0,E=V=V||0;G<M.length;)Y=b[M.charCodeAt(G++)-43],fe=b[M.charCodeAt(G++)-43],J=b[M.charCodeAt(G++)-43],ee=b[M.charCodeAt(G++)-43],Q[E++]=Y<<2|fe>>4,64!==J&&(Q[E++]=(15&fe)<<4|J>>2,64!==ee&&(Q[E++]=(3&J)<<6|ee));return B?E-V:Q.subarray(0,E)},h.binary.base58.encode=function(M,B){return h.binary.baseN.encode(M,g,B)},h.binary.base58.decode=function(M,B){return h.binary.baseN.decode(M,g,B)},h.text={utf8:{},utf16:{}},h.text.utf8.encode=function(M,B,V){M=h.encodeUtf8(M);var Q=B;Q||(Q=new Uint8Array(M.length));for(var Y=V=V||0,fe=0;fe<M.length;++fe)Q[Y++]=M.charCodeAt(fe);return B?Y-V:Q},h.text.utf8.decode=function(M){return h.decodeUtf8(String.fromCharCode.apply(null,M))},h.text.utf16.encode=function(M,B,V){var Q=B;Q||(Q=new Uint8Array(2*M.length));for(var Y=new Uint16Array(Q.buffer),fe=V=V||0,J=V,ee=0;ee<M.length;++ee)Y[J++]=M.charCodeAt(ee),fe+=2;return B?fe-V:Q},h.text.utf16.decode=function(M){return String.fromCharCode.apply(null,new Uint16Array(M.buffer))},h.deflate=function(M,B,V){if(B=h.decode64(M.deflate(h.encode64(B)).rval),V){var Q=2;32&B.charCodeAt(1)&&(Q=6),B=B.substring(Q,B.length-4)}return B},h.inflate=function(M,B,V){var Q=M.inflate(h.encode64(B)).rval;return null===Q?null:h.decode64(Q)};var N=function(M,B,V){if(!M)throw new Error("WebStorage not available.");var Q;if(null===V?Q=M.removeItem(B):(V=h.encode64(JSON.stringify(V)),Q=M.setItem(B,V)),typeof Q<"u"&&!0!==Q.rval){var Y=new Error(Q.error.message);throw Y.id=Q.error.id,Y.name=Q.error.name,Y}},R=function(M,B){if(!M)throw new Error("WebStorage not available.");var V=M.getItem(B);if(M.init)if(null===V.rval){if(V.error){var Q=new Error(V.error.message);throw Q.id=V.error.id,Q.name=V.error.name,Q}V=null}else V=V.rval;return null!==V&&(V=JSON.parse(h.decode64(V))),V},k=function(M,B,V,Q){var Y=R(M,B);null===Y&&(Y={}),Y[V]=Q,N(M,B,Y)},O=function(M,B,V){var Q=R(M,B);return null!==Q&&(Q=V in Q?Q[V]:null),Q},P=function(M,B,V){var Q=R(M,B);if(null!==Q&&V in Q){delete Q[V];var Y=!0;for(var fe in Q){Y=!1;break}Y&&(Q=null),N(M,B,Q)}},U=function(M,B){N(M,B,null)},W=function(M,B,V){var Q=null;typeof V>"u"&&(V=["web","flash"]);var Y,fe=!1,J=null;for(var ee in V){Y=V[ee];try{if("flash"===Y||"both"===Y){if(null===B[0])throw new Error("Flash local storage not available.");Q=M.apply(this,B),fe="flash"===Y}("web"===Y||"both"===Y)&&(B[0]=localStorage,Q=M.apply(this,B),fe=!0)}catch(G){J=G}if(fe)break}if(!fe)throw J;return Q};h.setItem=function(M,B,V,Q,Y){W(k,arguments,Y)},h.getItem=function(M,B,V,Q){return W(O,arguments,Q)},h.removeItem=function(M,B,V,Q){W(P,arguments,Q)},h.clearItems=function(M,B,V){W(U,arguments,V)},h.isEmpty=function(M){for(var B in M)if(M.hasOwnProperty(B))return!1;return!0},h.format=function(M){for(var V,Q,B=/%./g,Y=0,fe=[],J=0;V=B.exec(M);){(Q=M.substring(J,B.lastIndex-2)).length>0&&fe.push(Q),J=B.lastIndex;var ee=V[0][1];switch(ee){case"s":case"o":fe.push(Y<arguments.length?arguments[1+Y++]:"<?>");break;case"%":fe.push("%");break;default:fe.push("<%"+ee+"?>")}}return fe.push(M.substring(J)),fe.join("")},h.formatNumber=function(M,B,V,Q){var Y=M,fe=isNaN(B=Math.abs(B))?2:B,J=void 0===V?",":V,ee=void 0===Q?".":Q,G=Y<0?"-":"",E=parseInt(Y=Math.abs(+Y||0).toFixed(fe),10)+"",te=E.length>3?E.length%3:0;return G+(te?E.substr(0,te)+ee:"")+E.substr(te).replace(/(\d{3})(?=\d)/g,"$1"+ee)+(fe?J+Math.abs(Y-E).toFixed(fe).slice(2):"")},h.formatSize=function(M){return M>=1073741824?h.formatNumber(M/1073741824,2,".","")+" GiB":M>=1048576?h.formatNumber(M/1048576,2,".","")+" MiB":M>=1024?h.formatNumber(M/1024,0)+" KiB":h.formatNumber(M,0)+" bytes"},h.bytesFromIP=function(M){return-1!==M.indexOf(".")?h.bytesFromIPv4(M):-1!==M.indexOf(":")?h.bytesFromIPv6(M):null},h.bytesFromIPv4=function(M){if(4!==(M=M.split(".")).length)return null;for(var B=h.createBuffer(),V=0;V<M.length;++V){var Q=parseInt(M[V],10);if(isNaN(Q))return null;B.putByte(Q)}return B.getBytes()},h.bytesFromIPv6=function(M){for(var B=0,V=2*(8-(M=M.split(":").filter(function(J){return 0===J.length&&++B,!0})).length+B),Q=h.createBuffer(),Y=0;Y<8;++Y)if(M[Y]&&0!==M[Y].length){var fe=h.hexToBytes(M[Y]);fe.length<2&&Q.putByte(0),Q.putBytes(fe)}else Q.fillWithByte(0,V),V=0;return Q.getBytes()},h.bytesToIP=function(M){return 4===M.length?h.bytesToIPv4(M):16===M.length?h.bytesToIPv6(M):null},h.bytesToIPv4=function(M){if(4!==M.length)return null;for(var B=[],V=0;V<M.length;++V)B.push(M.charCodeAt(V));return B.join(".")},h.bytesToIPv6=function(M){if(16!==M.length)return null;for(var B=[],V=[],Q=0,Y=0;Y<M.length;Y+=2){for(var fe=h.bytesToHex(M[Y]+M[Y+1]);"0"===fe[0]&&"0"!==fe;)fe=fe.substr(1);if("0"===fe){var J=V[V.length-1],ee=B.length;J&&ee===J.end+1?(J.end=ee,J.end-J.start>V[Q].end-V[Q].start&&(Q=V.length-1)):V.push({start:ee,end:ee})}B.push(fe)}if(V.length>0){var G=V[Q];G.end-G.start>0&&(B.splice(G.start,G.end-G.start+1,""),0===G.start&&B.unshift(""),7===G.end&&B.push(""))}return B.join(":")},h.estimateCores=function(M,B){if("function"==typeof M&&(B=M,M={}),M=M||{},"cores"in h&&!M.update)return B(null,h.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return h.cores=navigator.hardwareConcurrency,B(null,h.cores);if(typeof Worker>"u")return h.cores=1,B(null,h.cores);if(typeof Blob>"u")return h.cores=2,B(null,h.cores);var V=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(J){for(var ee=Date.now(),G=ee+4;Date.now()<G;);self.postMessage({st:ee,et:G})})}.toString(),")()"],{type:"application/javascript"}));!function Q(J,ee,G){if(0===ee){var E=Math.floor(J.reduce(function(te,$){return te+$},0)/J.length);return h.cores=Math.max(1,E),URL.revokeObjectURL(V),B(null,h.cores)}!function Y(J,ee){for(var G=[],E=[],te=0;te<J;++te){var $=new Worker(V);$.addEventListener("message",function(ue){if(E.push(ue.data),E.length===J){for(var me=0;me<J;++me)G[me].terminate();ee(null,E)}}),G.push($)}for(te=0;te<J;++te)G[te].postMessage(te)}(G,function(te,$){J.push(function fe(J,ee){for(var G=[],E=0;E<J;++E)for(var te=ee[E],$=G[E]=[],ue=0;ue<J;++ue)if(E!==ue){var me=ee[ue];(te.st>me.st&&te.st<me.et||me.st>te.st&&me.st<te.et)&&$.push(ue)}return G.reduce(function(we,ye){return Math.max(we,ye.length)},0)}(G,$)),Q(J,ee-1,G)})}([],5,16)}},5911:(nt,_e,m)=>{var n=m(8659);m(1298),m(7791),m(279),m(979),m(9386),m(6078),m(8604),m(7256),m(5517),m(4747);var e=n.asn1,h=nt.exports=n.pki=n.pki||{},S=h.oids,y={};y.CN=S.commonName,y.commonName="CN",y.C=S.countryName,y.countryName="C",y.L=S.localityName,y.localityName="L",y.ST=S.stateOrProvinceName,y.stateOrProvinceName="ST",y.O=S.organizationName,y.organizationName="O",y.OU=S.organizationalUnitName,y.organizationalUnitName="OU",y.E=S.emailAddress,y.emailAddress="E";var w=n.pki.rsa.publicKeyValidator,f={name:"Certificate",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:e.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:e.Class.UNIVERSAL,type:e.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:e.Class.UNIVERSAL,type:e.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:e.Class.UNIVERSAL,type:e.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:e.Class.UNIVERSAL,type:e.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},w,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:e.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:e.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:e.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},x={name:"rsapss",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:e.Class.UNIVERSAL,type:e.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:e.Class.UNIVERSAL,type:e.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:e.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:e.Class.UNIVERSAL,type:e.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:e.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:e.Class.UNIVERSAL,type:e.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},g={name:"CertificationRequest",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[{name:"CertificationRequestInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},w,{name:"CertificationRequestInfo.attributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0}]}]}]},{name:"CertificationRequest.signatureAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:e.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:e.Class.UNIVERSAL,type:e.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function N(J,ee){"string"==typeof ee&&(ee={shortName:ee});for(var E,G=null,te=0;null===G&&te<J.attributes.length;++te)E=J.attributes[te],(ee.type&&ee.type===E.type||ee.name&&ee.name===E.name||ee.shortName&&ee.shortName===E.shortName)&&(G=E);return G}h.RDNAttributesAsArray=function(J,ee){for(var E,te,$,G=[],ue=0;ue<J.value.length;++ue){E=J.value[ue];for(var me=0;me<E.value.length;++me)($={}).type=e.derToOid((te=E.value[me]).value[0].value),$.value=te.value[1].value,$.valueTagClass=te.value[1].type,$.type in S&&($.name=S[$.type],$.name in y&&($.shortName=y[$.name])),ee&&(ee.update($.type),ee.update($.value)),G.push($)}return G},h.CRIAttributesAsArray=function(J){for(var ee=[],G=0;G<J.length;++G)for(var E=J[G],te=e.derToOid(E.value[0].value),$=E.value[1].value,ue=0;ue<$.length;++ue){var me={};if(me.type=te,me.value=$[ue].value,me.valueTagClass=$[ue].type,me.type in S&&(me.name=S[me.type],me.name in y&&(me.shortName=y[me.name])),me.type===S.extensionRequest){me.extensions=[];for(var we=0;we<me.value.length;++we)me.extensions.push(h.certificateExtensionFromAsn1(me.value[we]))}ee.push(me)}return ee};var R=function(J,ee,G){var E={};if(J!==S["RSASSA-PSS"])return E;G&&(E={hash:{algorithmOid:S.sha1},mgf:{algorithmOid:S.mgf1,hash:{algorithmOid:S.sha1}},saltLength:20});var te={},$=[];if(!e.validate(ee,x,te,$)){var ue=new Error("Cannot read RSASSA-PSS parameter block.");throw ue.errors=$,ue}return void 0!==te.hashOid&&(E.hash=E.hash||{},E.hash.algorithmOid=e.derToOid(te.hashOid)),void 0!==te.maskGenOid&&(E.mgf=E.mgf||{},E.mgf.algorithmOid=e.derToOid(te.maskGenOid),E.mgf.hash=E.mgf.hash||{},E.mgf.hash.algorithmOid=e.derToOid(te.maskGenHashOid)),void 0!==te.saltLength&&(E.saltLength=te.saltLength.charCodeAt(0)),E},k=function(J){switch(S[J.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return n.md.sha1.create();case"md5WithRSAEncryption":return n.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return n.md.sha256.create();case"sha384WithRSAEncryption":return n.md.sha384.create();case"sha512WithRSAEncryption":return n.md.sha512.create();default:var ee=new Error("Could not compute "+J.type+" digest. Unknown signature OID.");throw ee.signatureOid=J.signatureOid,ee}},O=function(J){var G,ee=J.certificate;switch(ee.signatureOid){case S.sha1WithRSAEncryption:case S.sha1WithRSASignature:break;case S["RSASSA-PSS"]:var E,te,$;if(void 0===(E=S[ee.signatureParameters.mgf.hash.algorithmOid])||void 0===n.md[E])throw($=new Error("Unsupported MGF hash function.")).oid=ee.signatureParameters.mgf.hash.algorithmOid,$.name=E,$;if(void 0===(te=S[ee.signatureParameters.mgf.algorithmOid])||void 0===n.mgf[te])throw($=new Error("Unsupported MGF function.")).oid=ee.signatureParameters.mgf.algorithmOid,$.name=te,$;if(te=n.mgf[te].create(n.md[E].create()),void 0===(E=S[ee.signatureParameters.hash.algorithmOid])||void 0===n.md[E])throw($=new Error("Unsupported RSASSA-PSS hash function.")).oid=ee.signatureParameters.hash.algorithmOid,$.name=E,$;G=n.pss.create(n.md[E].create(),te,ee.signatureParameters.saltLength)}return ee.publicKey.verify(J.md.digest().getBytes(),J.signature,G)};function P(J){for(var G,E,ee=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),te=J.attributes,$=0;$<te.length;++$){var ue=(G=te[$]).value,me=e.Type.PRINTABLESTRING;"valueTagClass"in G&&(me=G.valueTagClass)===e.Type.UTF8&&(ue=n.util.encodeUtf8(ue)),E=e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(G.type).getBytes()),e.create(e.Class.UNIVERSAL,me,!1,ue)])]),ee.value.push(E)}return ee}function W(J){for(var ee,G=0;G<J.length;++G){if(typeof(ee=J[G]).name>"u"&&(ee.type&&ee.type in h.oids?ee.name=h.oids[ee.type]:ee.shortName&&ee.shortName in y&&(ee.name=h.oids[y[ee.shortName]])),typeof ee.type>"u"){if(!ee.name||!(ee.name in h.oids))throw(E=new Error("Attribute type not specified.")).attribute=ee,E;ee.type=h.oids[ee.name]}if(typeof ee.shortName>"u"&&ee.name&&ee.name in y&&(ee.shortName=y[ee.name]),ee.type===S.extensionRequest&&(ee.valueConstructed=!0,ee.valueTagClass=e.Type.SEQUENCE,!ee.value&&ee.extensions)){ee.value=[];for(var te=0;te<ee.extensions.length;++te)ee.value.push(h.certificateExtensionToAsn1(M(ee.extensions[te])))}var E;if(typeof ee.value>"u")throw(E=new Error("Attribute value not specified.")).attribute=ee,E}}function M(J,ee){if(ee=ee||{},typeof J.name>"u"&&J.id&&J.id in h.oids&&(J.name=h.oids[J.id]),typeof J.id>"u"){if(!J.name||!(J.name in h.oids))throw(G=new Error("Extension ID not specified.")).extension=J,G;J.id=h.oids[J.name]}if(typeof J.value<"u")return J;if("keyUsage"===J.name){var E=0,te=0,$=0;J.digitalSignature&&(te|=128,E=7),J.nonRepudiation&&(te|=64,E=6),J.keyEncipherment&&(te|=32,E=5),J.dataEncipherment&&(te|=16,E=4),J.keyAgreement&&(te|=8,E=3),J.keyCertSign&&(te|=4,E=2),J.cRLSign&&(te|=2,E=1),J.encipherOnly&&(te|=1,E=0),J.decipherOnly&&($|=128,E=7);var ue=String.fromCharCode(E);0!==$?ue+=String.fromCharCode(te)+String.fromCharCode($):0!==te&&(ue+=String.fromCharCode(te)),J.value=e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,ue)}else if("basicConstraints"===J.name)J.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),J.cA&&J.value.value.push(e.create(e.Class.UNIVERSAL,e.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in J&&J.value.value.push(e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(J.pathLenConstraint).getBytes()));else if("extKeyUsage"===J.name){J.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);var me=J.value.value;for(var we in J)!0===J[we]&&(we in S?me.push(e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(S[we]).getBytes())):-1!==we.indexOf(".")&&me.push(e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(we).getBytes())))}else if("nsCertType"===J.name)E=0,te=0,J.client&&(te|=128,E=7),J.server&&(te|=64,E=6),J.email&&(te|=32,E=5),J.objsign&&(te|=16,E=4),J.reserved&&(te|=8,E=3),J.sslCA&&(te|=4,E=2),J.emailCA&&(te|=2,E=1),J.objCA&&(te|=1,E=0),ue=String.fromCharCode(E),0!==te&&(ue+=String.fromCharCode(te)),J.value=e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,ue);else if("subjectAltName"===J.name||"issuerAltName"===J.name){J.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);for(var qe=0;qe<J.altNames.length;++qe){if(ue=(ye=J.altNames[qe]).value,7===ye.type&&ye.ip){if(null===(ue=n.util.bytesFromIP(ye.ip)))throw(G=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=J,G}else 8===ye.type&&(ue=e.oidToDer(ye.oid?e.oidToDer(ye.oid):ue));J.value.value.push(e.create(e.Class.CONTEXT_SPECIFIC,ye.type,!1,ue))}}else if("nsComment"===J.name&&ee.cert){if(!/^[\x00-\x7F]*$/.test(J.comment)||J.comment.length<1||J.comment.length>128)throw new Error('Invalid "nsComment" content.');J.value=e.create(e.Class.UNIVERSAL,e.Type.IA5STRING,!1,J.comment)}else if("subjectKeyIdentifier"===J.name&&ee.cert){var De=ee.cert.generateSubjectKeyIdentifier();J.subjectKeyIdentifier=De.toHex(),J.value=e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,De.getBytes())}else if("authorityKeyIdentifier"===J.name&&ee.cert){if(J.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),me=J.value.value,J.keyIdentifier){var Ge=!0===J.keyIdentifier?ee.cert.generateSubjectKeyIdentifier().getBytes():J.keyIdentifier;me.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!1,Ge))}if(J.authorityCertIssuer){var ve=[e.create(e.Class.CONTEXT_SPECIFIC,4,!0,[P(!0===J.authorityCertIssuer?ee.cert.issuer:J.authorityCertIssuer)])];me.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,ve))}if(J.serialNumber){var c=n.util.hexToBytes(!0===J.serialNumber?ee.cert.serialNumber:J.serialNumber);me.push(e.create(e.Class.CONTEXT_SPECIFIC,2,!1,c))}}else if("cRLDistributionPoints"===J.name){J.value=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),me=J.value.value;var ye,tt=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]),_t=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[]);for(qe=0;qe<J.altNames.length;++qe){if(ue=(ye=J.altNames[qe]).value,7===ye.type&&ye.ip){if(null===(ue=n.util.bytesFromIP(ye.ip)))throw(G=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=J,G}else 8===ye.type&&(ue=e.oidToDer(ye.oid?e.oidToDer(ye.oid):ue));_t.value.push(e.create(e.Class.CONTEXT_SPECIFIC,ye.type,!1,ue))}tt.value.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[_t])),me.push(tt)}var G;if(typeof J.value>"u")throw(G=new Error("Extension value not specified.")).extension=J,G;return J}function B(J,ee){if(J===S["RSASSA-PSS"]){var G=[];return void 0!==ee.hash.algorithmOid&&G.push(e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(ee.hash.algorithmOid).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])])),void 0!==ee.mgf.algorithmOid&&G.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,[e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(ee.mgf.algorithmOid).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(ee.mgf.hash.algorithmOid).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")])])])),void 0!==ee.saltLength&&G.push(e.create(e.Class.CONTEXT_SPECIFIC,2,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(ee.saltLength).getBytes())])),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,G)}return e.create(e.Class.UNIVERSAL,e.Type.NULL,!1,"")}function V(J){var ee=e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===J.attributes.length)return ee;for(var G=J.attributes,E=0;E<G.length;++E){var te=G[E],$=te.value,ue=e.Type.UTF8;"valueTagClass"in te&&(ue=te.valueTagClass),ue===e.Type.UTF8&&($=n.util.encodeUtf8($));var me=!1;"valueConstructed"in te&&(me=te.valueConstructed);var we=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(te.type).getBytes()),e.create(e.Class.UNIVERSAL,e.Type.SET,!0,[e.create(e.Class.UNIVERSAL,ue,me,$)])]);ee.value.push(we)}return ee}h.certificateFromPem=function(J,ee,G){var E=n.pem.decode(J)[0];if("CERTIFICATE"!==E.type&&"X509 CERTIFICATE"!==E.type&&"TRUSTED CERTIFICATE"!==E.type){var te=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw te.headerType=E.type,te}if(E.procType&&"ENCRYPTED"===E.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var $=e.fromDer(E.body,G);return h.certificateFromAsn1($,ee)},h.certificateToPem=function(J,ee){var G={type:"CERTIFICATE",body:e.toDer(h.certificateToAsn1(J)).getBytes()};return n.pem.encode(G,{maxline:ee})},h.publicKeyFromPem=function(J){var ee=n.pem.decode(J)[0];if("PUBLIC KEY"!==ee.type&&"RSA PUBLIC KEY"!==ee.type){var G=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw G.headerType=ee.type,G}if(ee.procType&&"ENCRYPTED"===ee.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var E=e.fromDer(ee.body);return h.publicKeyFromAsn1(E)},h.publicKeyToPem=function(J,ee){var G={type:"PUBLIC KEY",body:e.toDer(h.publicKeyToAsn1(J)).getBytes()};return n.pem.encode(G,{maxline:ee})},h.publicKeyToRSAPublicKeyPem=function(J,ee){var G={type:"RSA PUBLIC KEY",body:e.toDer(h.publicKeyToRSAPublicKey(J)).getBytes()};return n.pem.encode(G,{maxline:ee})},h.getPublicKeyFingerprint=function(J,ee){var te,G=(ee=ee||{}).md||n.md.sha1.create();switch(ee.type||"RSAPublicKey"){case"RSAPublicKey":te=e.toDer(h.publicKeyToRSAPublicKey(J)).getBytes();break;case"SubjectPublicKeyInfo":te=e.toDer(h.publicKeyToAsn1(J)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+ee.type+'".')}G.start(),G.update(te);var $=G.digest();if("hex"===ee.encoding){var ue=$.toHex();return ee.delimiter?ue.match(/.{2}/g).join(ee.delimiter):ue}if("binary"===ee.encoding)return $.getBytes();if(ee.encoding)throw new Error('Unknown encoding "'+ee.encoding+'".');return $},h.certificationRequestFromPem=function(J,ee,G){var E=n.pem.decode(J)[0];if("CERTIFICATE REQUEST"!==E.type){var te=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw te.headerType=E.type,te}if(E.procType&&"ENCRYPTED"===E.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var $=e.fromDer(E.body,G);return h.certificationRequestFromAsn1($,ee)},h.certificationRequestToPem=function(J,ee){var G={type:"CERTIFICATE REQUEST",body:e.toDer(h.certificationRequestToAsn1(J)).getBytes()};return n.pem.encode(G,{maxline:ee})},h.createCertificate=function(){var J={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return J.siginfo.algorithmOid=null,J.validity={},J.validity.notBefore=new Date,J.validity.notAfter=new Date,J.issuer={},J.issuer.getField=function(ee){return N(J.issuer,ee)},J.issuer.addField=function(ee){W([ee]),J.issuer.attributes.push(ee)},J.issuer.attributes=[],J.issuer.hash=null,J.subject={},J.subject.getField=function(ee){return N(J.subject,ee)},J.subject.addField=function(ee){W([ee]),J.subject.attributes.push(ee)},J.subject.attributes=[],J.subject.hash=null,J.extensions=[],J.publicKey=null,J.md=null,J.setSubject=function(ee,G){W(ee),J.subject.attributes=ee,delete J.subject.uniqueId,G&&(J.subject.uniqueId=G),J.subject.hash=null},J.setIssuer=function(ee,G){W(ee),J.issuer.attributes=ee,delete J.issuer.uniqueId,G&&(J.issuer.uniqueId=G),J.issuer.hash=null},J.setExtensions=function(ee){for(var G=0;G<ee.length;++G)M(ee[G],{cert:J});J.extensions=ee},J.getExtension=function(ee){"string"==typeof ee&&(ee={name:ee});for(var E,G=null,te=0;null===G&&te<J.extensions.length;++te)E=J.extensions[te],(ee.id&&E.id===ee.id||ee.name&&E.name===ee.name)&&(G=E);return G},J.sign=function(ee,G){J.md=G||n.md.sha1.create();var E=S[J.md.algorithm+"WithRSAEncryption"];if(!E){var te=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw te.algorithm=J.md.algorithm,te}J.signatureOid=J.siginfo.algorithmOid=E,J.tbsCertificate=h.getTBSCertificate(J);var $=e.toDer(J.tbsCertificate);J.md.update($.getBytes()),J.signature=ee.sign(J.md)},J.verify=function(ee){var G=!1;if(!J.issued(ee)){var E=ee.issuer,te=J.subject,$=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw $.expectedIssuer=te.attributes,$.actualIssuer=E.attributes,$}var ue=ee.md;if(null===ue){ue=k({signatureOid:ee.signatureOid,type:"certificate"});var me=ee.tbsCertificate||h.getTBSCertificate(ee),we=e.toDer(me);ue.update(we.getBytes())}return null!==ue&&(G=O({certificate:J,md:ue,signature:ee.signature})),G},J.isIssuer=function(ee){var G=!1,E=J.issuer,te=ee.subject;if(E.hash&&te.hash)G=E.hash===te.hash;else if(E.attributes.length===te.attributes.length){G=!0;for(var $,ue,me=0;G&&me<E.attributes.length;++me)(($=E.attributes[me]).type!==(ue=te.attributes[me]).type||$.value!==ue.value)&&(G=!1)}return G},J.issued=function(ee){return ee.isIssuer(J)},J.generateSubjectKeyIdentifier=function(){return h.getPublicKeyFingerprint(J.publicKey,{type:"RSAPublicKey"})},J.verifySubjectKeyIdentifier=function(){for(var ee=S.subjectKeyIdentifier,G=0;G<J.extensions.length;++G){var E=J.extensions[G];if(E.id===ee){var te=J.generateSubjectKeyIdentifier().getBytes();return n.util.hexToBytes(E.subjectKeyIdentifier)===te}}return!1},J},h.certificateFromAsn1=function(J,ee){var G={},E=[];if(!e.validate(J,f,G,E)){var te=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw te.errors=E,te}if(e.derToOid(G.publicKeyOid)!==h.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var ue=h.createCertificate();ue.version=G.certVersion?G.certVersion.charCodeAt(0):0;var me=n.util.createBuffer(G.certSerialNumber);ue.serialNumber=me.toHex(),ue.signatureOid=n.asn1.derToOid(G.certSignatureOid),ue.signatureParameters=R(ue.signatureOid,G.certSignatureParams,!0),ue.siginfo.algorithmOid=n.asn1.derToOid(G.certinfoSignatureOid),ue.siginfo.parameters=R(ue.siginfo.algorithmOid,G.certinfoSignatureParams,!1),ue.signature=G.certSignature;var we=[];if(void 0!==G.certValidity1UTCTime&&we.push(e.utcTimeToDate(G.certValidity1UTCTime)),void 0!==G.certValidity2GeneralizedTime&&we.push(e.generalizedTimeToDate(G.certValidity2GeneralizedTime)),void 0!==G.certValidity3UTCTime&&we.push(e.utcTimeToDate(G.certValidity3UTCTime)),void 0!==G.certValidity4GeneralizedTime&&we.push(e.generalizedTimeToDate(G.certValidity4GeneralizedTime)),we.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(we.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(ue.validity.notBefore=we[0],ue.validity.notAfter=we[1],ue.tbsCertificate=G.tbsCertificate,ee){ue.md=k({signatureOid:ue.signatureOid,type:"certificate"});var ye=e.toDer(ue.tbsCertificate);ue.md.update(ye.getBytes())}var qe=n.md.sha1.create(),De=e.toDer(G.certIssuer);qe.update(De.getBytes()),ue.issuer.getField=function(c){return N(ue.issuer,c)},ue.issuer.addField=function(c){W([c]),ue.issuer.attributes.push(c)},ue.issuer.attributes=h.RDNAttributesAsArray(G.certIssuer),G.certIssuerUniqueId&&(ue.issuer.uniqueId=G.certIssuerUniqueId),ue.issuer.hash=qe.digest().toHex();var Ge=n.md.sha1.create(),ve=e.toDer(G.certSubject);return Ge.update(ve.getBytes()),ue.subject.getField=function(c){return N(ue.subject,c)},ue.subject.addField=function(c){W([c]),ue.subject.attributes.push(c)},ue.subject.attributes=h.RDNAttributesAsArray(G.certSubject),G.certSubjectUniqueId&&(ue.subject.uniqueId=G.certSubjectUniqueId),ue.subject.hash=Ge.digest().toHex(),ue.extensions=G.certExtensions?h.certificateExtensionsFromAsn1(G.certExtensions):[],ue.publicKey=h.publicKeyFromAsn1(G.subjectPublicKeyInfo),ue},h.certificateExtensionsFromAsn1=function(J){for(var ee=[],G=0;G<J.value.length;++G)for(var E=J.value[G],te=0;te<E.value.length;++te)ee.push(h.certificateExtensionFromAsn1(E.value[te]));return ee},h.certificateExtensionFromAsn1=function(J){var ee={};if(ee.id=e.derToOid(J.value[0].value),ee.critical=!1,J.value[1].type===e.Type.BOOLEAN?(ee.critical=0!==J.value[1].value.charCodeAt(0),ee.value=J.value[2].value):ee.value=J.value[1].value,ee.id in S)if(ee.name=S[ee.id],"keyUsage"===ee.name){var E=0,te=0;(G=e.fromDer(ee.value)).value.length>1&&(E=G.value.charCodeAt(1),te=G.value.length>2?G.value.charCodeAt(2):0),ee.digitalSignature=128==(128&E),ee.nonRepudiation=64==(64&E),ee.keyEncipherment=32==(32&E),ee.dataEncipherment=16==(16&E),ee.keyAgreement=8==(8&E),ee.keyCertSign=4==(4&E),ee.cRLSign=2==(2&E),ee.encipherOnly=1==(1&E),ee.decipherOnly=128==(128&te)}else if("basicConstraints"===ee.name){var G=e.fromDer(ee.value);ee.cA=G.value.length>0&&G.value[0].type===e.Type.BOOLEAN&&0!==G.value[0].value.charCodeAt(0);var $=null;G.value.length>0&&G.value[0].type===e.Type.INTEGER?$=G.value[0].value:G.value.length>1&&($=G.value[1].value),null!==$&&(ee.pathLenConstraint=e.derToInteger($))}else if("extKeyUsage"===ee.name){G=e.fromDer(ee.value);for(var ue=0;ue<G.value.length;++ue){var me=e.derToOid(G.value[ue].value);me in S?ee[S[me]]=!0:ee[me]=!0}}else if("nsCertType"===ee.name)E=0,(G=e.fromDer(ee.value)).value.length>1&&(E=G.value.charCodeAt(1)),ee.client=128==(128&E),ee.server=64==(64&E),ee.email=32==(32&E),ee.objsign=16==(16&E),ee.reserved=8==(8&E),ee.sslCA=4==(4&E),ee.emailCA=2==(2&E),ee.objCA=1==(1&E);else if("subjectAltName"===ee.name||"issuerAltName"===ee.name){ee.altNames=[],G=e.fromDer(ee.value);for(var we,ye=0;ye<G.value.length;++ye){var qe={type:(we=G.value[ye]).type,value:we.value};switch(ee.altNames.push(qe),we.type){case 1:case 2:case 6:break;case 7:qe.ip=n.util.bytesToIP(we.value);break;case 8:qe.oid=e.derToOid(we.value)}}}else"subjectKeyIdentifier"===ee.name&&(G=e.fromDer(ee.value),ee.subjectKeyIdentifier=n.util.bytesToHex(G.value));return ee},h.certificationRequestFromAsn1=function(J,ee){var G={},E=[];if(!e.validate(J,g,G,E)){var te=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw te.errors=E,te}if(e.derToOid(G.publicKeyOid)!==h.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var ue=h.createCertificationRequest();if(ue.version=G.csrVersion?G.csrVersion.charCodeAt(0):0,ue.signatureOid=n.asn1.derToOid(G.csrSignatureOid),ue.signatureParameters=R(ue.signatureOid,G.csrSignatureParams,!0),ue.siginfo.algorithmOid=n.asn1.derToOid(G.csrSignatureOid),ue.siginfo.parameters=R(ue.siginfo.algorithmOid,G.csrSignatureParams,!1),ue.signature=G.csrSignature,ue.certificationRequestInfo=G.certificationRequestInfo,ee){ue.md=k({signatureOid:ue.signatureOid,type:"certification request"});var me=e.toDer(ue.certificationRequestInfo);ue.md.update(me.getBytes())}var we=n.md.sha1.create();return ue.subject.getField=function(ye){return N(ue.subject,ye)},ue.subject.addField=function(ye){W([ye]),ue.subject.attributes.push(ye)},ue.subject.attributes=h.RDNAttributesAsArray(G.certificationRequestInfoSubject,we),ue.subject.hash=we.digest().toHex(),ue.publicKey=h.publicKeyFromAsn1(G.subjectPublicKeyInfo),ue.getAttribute=function(ye){return N(ue,ye)},ue.addAttribute=function(ye){W([ye]),ue.attributes.push(ye)},ue.attributes=h.CRIAttributesAsArray(G.certificationRequestInfoAttributes||[]),ue},h.createCertificationRequest=function(){var J={version:0,signatureOid:null,signature:null,siginfo:{}};return J.siginfo.algorithmOid=null,J.subject={},J.subject.getField=function(ee){return N(J.subject,ee)},J.subject.addField=function(ee){W([ee]),J.subject.attributes.push(ee)},J.subject.attributes=[],J.subject.hash=null,J.publicKey=null,J.attributes=[],J.getAttribute=function(ee){return N(J,ee)},J.addAttribute=function(ee){W([ee]),J.attributes.push(ee)},J.md=null,J.setSubject=function(ee){W(ee),J.subject.attributes=ee,J.subject.hash=null},J.setAttributes=function(ee){W(ee),J.attributes=ee},J.sign=function(ee,G){J.md=G||n.md.sha1.create();var E=S[J.md.algorithm+"WithRSAEncryption"];if(!E){var te=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw te.algorithm=J.md.algorithm,te}J.signatureOid=J.siginfo.algorithmOid=E,J.certificationRequestInfo=h.getCertificationRequestInfo(J);var $=e.toDer(J.certificationRequestInfo);J.md.update($.getBytes()),J.signature=ee.sign(J.md)},J.verify=function(){var ee=!1,G=J.md;if(null===G){G=k({signatureOid:J.signatureOid,type:"certification request"});var E=J.certificationRequestInfo||h.getCertificationRequestInfo(J),te=e.toDer(E);G.update(te.getBytes())}return null!==G&&(ee=O({certificate:J,md:G,signature:J.signature})),ee},J};var Q=new Date("1950-01-01T00:00:00Z"),Y=new Date("2050-01-01T00:00:00Z");function fe(J){return J>=Q&&J<Y?e.create(e.Class.UNIVERSAL,e.Type.UTCTIME,!1,e.dateToUtcTime(J)):e.create(e.Class.UNIVERSAL,e.Type.GENERALIZEDTIME,!1,e.dateToGeneralizedTime(J))}h.getTBSCertificate=function(J){var ee=fe(J.validity.notBefore),G=fe(J.validity.notAfter),E=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.CONTEXT_SPECIFIC,0,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(J.version).getBytes())]),e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,n.util.hexToBytes(J.serialNumber)),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(J.siginfo.algorithmOid).getBytes()),B(J.siginfo.algorithmOid,J.siginfo.parameters)]),P(J.issuer),e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[ee,G]),P(J.subject),h.publicKeyToAsn1(J.publicKey)]);return J.issuer.uniqueId&&E.value.push(e.create(e.Class.CONTEXT_SPECIFIC,1,!0,[e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,String.fromCharCode(0)+J.issuer.uniqueId)])),J.subject.uniqueId&&E.value.push(e.create(e.Class.CONTEXT_SPECIFIC,2,!0,[e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,String.fromCharCode(0)+J.subject.uniqueId)])),J.extensions.length>0&&E.value.push(h.certificateExtensionsToAsn1(J.extensions)),E},h.getCertificationRequestInfo=function(J){return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.INTEGER,!1,e.integerToDer(J.version).getBytes()),P(J.subject),h.publicKeyToAsn1(J.publicKey),V(J)])},h.distinguishedNameToAsn1=function(J){return P(J)},h.certificateToAsn1=function(J){var ee=J.tbsCertificate||h.getTBSCertificate(J);return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[ee,e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(J.signatureOid).getBytes()),B(J.signatureOid,J.signatureParameters)]),e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,String.fromCharCode(0)+J.signature)])},h.certificateExtensionsToAsn1=function(J){var ee=e.create(e.Class.CONTEXT_SPECIFIC,3,!0,[]),G=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);ee.value.push(G);for(var E=0;E<J.length;++E)G.value.push(h.certificateExtensionToAsn1(J[E]));return ee},h.certificateExtensionToAsn1=function(J){var ee=e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[]);ee.value.push(e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(J.id).getBytes())),J.critical&&ee.value.push(e.create(e.Class.UNIVERSAL,e.Type.BOOLEAN,!1,String.fromCharCode(255)));var G=J.value;return"string"!=typeof J.value&&(G=e.toDer(G).getBytes()),ee.value.push(e.create(e.Class.UNIVERSAL,e.Type.OCTETSTRING,!1,G)),ee},h.certificationRequestToAsn1=function(J){var ee=J.certificationRequestInfo||h.getCertificationRequestInfo(J);return e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[ee,e.create(e.Class.UNIVERSAL,e.Type.SEQUENCE,!0,[e.create(e.Class.UNIVERSAL,e.Type.OID,!1,e.oidToDer(J.signatureOid).getBytes()),B(J.signatureOid,J.signatureParameters)]),e.create(e.Class.UNIVERSAL,e.Type.BITSTRING,!1,String.fromCharCode(0)+J.signature)])},h.createCaStore=function(J){var ee={certs:{}};function G(ue){return E(ue),ee.certs[ue.hash]||null}function E(ue){if(!ue.hash){var me=n.md.sha1.create();ue.attributes=h.RDNAttributesAsArray(P(ue),me),ue.hash=me.digest().toHex()}}if(ee.getIssuer=function(ue){return G(ue.issuer)},ee.addCertificate=function(ue){if("string"==typeof ue&&(ue=n.pki.certificateFromPem(ue)),E(ue.subject),!ee.hasCertificate(ue))if(ue.subject.hash in ee.certs){var me=ee.certs[ue.subject.hash];n.util.isArray(me)||(me=[me]),me.push(ue),ee.certs[ue.subject.hash]=me}else ee.certs[ue.subject.hash]=ue},ee.hasCertificate=function(ue){"string"==typeof ue&&(ue=n.pki.certificateFromPem(ue));var me=G(ue.subject);if(!me)return!1;n.util.isArray(me)||(me=[me]);for(var we=e.toDer(h.certificateToAsn1(ue)).getBytes(),ye=0;ye<me.length;++ye)if(we===e.toDer(h.certificateToAsn1(me[ye])).getBytes())return!0;return!1},ee.listAllCertificates=function(){var ue=[];for(var me in ee.certs)if(ee.certs.hasOwnProperty(me)){var we=ee.certs[me];if(n.util.isArray(we))for(var ye=0;ye<we.length;++ye)ue.push(we[ye]);else ue.push(we)}return ue},ee.removeCertificate=function(ue){var me;if("string"==typeof ue&&(ue=n.pki.certificateFromPem(ue)),E(ue.subject),!ee.hasCertificate(ue))return null;var we=G(ue.subject);if(!n.util.isArray(we))return me=ee.certs[ue.subject.hash],delete ee.certs[ue.subject.hash],me;for(var ye=e.toDer(h.certificateToAsn1(ue)).getBytes(),qe=0;qe<we.length;++qe)ye===e.toDer(h.certificateToAsn1(we[qe])).getBytes()&&(me=we[qe],we.splice(qe,1));return 0===we.length&&delete ee.certs[ue.subject.hash],me},J)for(var te=0;te<J.length;++te)ee.addCertificate(J[te]);return ee},h.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},h.verifyCertificateChain=function(J,ee,G){"function"==typeof G&&(G={verify:G}),G=G||{};var E=(ee=ee.slice(0)).slice(0),te=G.validityCheckDate;typeof te>"u"&&(te=new Date);var $=!0,ue=null,me=0;do{var we=ee.shift(),ye=null,qe=!1;if(te&&(te<we.validity.notBefore||te>we.validity.notAfter)&&(ue={message:"Certificate is not valid yet or has expired.",error:h.certificateError.certificate_expired,notBefore:we.validity.notBefore,notAfter:we.validity.notAfter,now:te}),null===ue){if(null===(ye=ee[0]||J.getIssuer(we))&&we.isIssuer(we)&&(qe=!0,ye=we),ye){var De=ye;n.util.isArray(De)||(De=[De]);for(var Ge=!1;!Ge&&De.length>0;){ye=De.shift();try{Ge=ye.verify(we)}catch{}}Ge||(ue={message:"Certificate signature is invalid.",error:h.certificateError.bad_certificate})}null===ue&&(!ye||qe)&&!J.hasCertificate(we)&&(ue={message:"Certificate is not trusted.",error:h.certificateError.unknown_ca})}if(null===ue&&ye&&!we.isIssuer(ye)&&(ue={message:"Certificate issuer is invalid.",error:h.certificateError.bad_certificate}),null===ue)for(var ve={keyUsage:!0,basicConstraints:!0},c=0;null===ue&&c<we.extensions.length;++c){var tt=we.extensions[c];tt.critical&&!(tt.name in ve)&&(ue={message:"Certificate has an unsupported critical extension.",error:h.certificateError.unsupported_certificate})}if(null===ue&&(!$||0===ee.length&&(!ye||qe))){var _t=we.getExtension("basicConstraints"),ct=we.getExtension("keyUsage");null!==ct&&(!ct.keyCertSign||null===_t)&&(ue={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:h.certificateError.bad_certificate}),null===ue&&null!==_t&&!_t.cA&&(ue={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:h.certificateError.bad_certificate}),null===ue&&null!==ct&&"pathLenConstraint"in _t&&me-1>_t.pathLenConstraint&&(ue={message:"Certificate basicConstraints pathLenConstraint violated.",error:h.certificateError.bad_certificate})}var ft=null===ue||ue.error,qt=G.verify?G.verify(ft,me,E):ft;if(!0!==qt)throw!0===ft&&(ue={message:"The application rejected the certificate.",error:h.certificateError.bad_certificate}),(qt||0===qt)&&("object"!=typeof qt||n.util.isArray(qt)?"string"==typeof qt&&(ue.error=qt):(qt.message&&(ue.message=qt.message),qt.error&&(ue.error=qt.error))),ue;ue=null,$=!1,++me}while(ee.length>0);return!0}},1935:(nt,_e,m)=>{"use strict";_e.KG=void 0;const e=m(592);_e.KG=(y,w)=>{var f;const x=e.asn1.fromDer(y.toString("binary")),g=e.pkcs12.pkcs12FromAsn1(x,!1,w).getBags({bagType:e.pki.oids.certBag});if(!g||null==g||null===(f=g[e.pki.oids.certBag])||void 0===f||!f[0])throw new Error("Unable to parse certificate. Incorrect Password?");return g[e.pki.oids.certBag][0]}},6801:(nt,_e)=>{"use strict";class e{static isArrayBuffer(g){return"[object ArrayBuffer]"===Object.prototype.toString.call(g)}static toArrayBuffer(g){return this.isArrayBuffer(g)?g:g.byteLength===g.buffer.byteLength?g.buffer:this.toUint8Array(g).slice().buffer}static toUint8Array(g){return this.toView(g,Uint8Array)}static toView(g,N){if(g.constructor===N)return g;if(this.isArrayBuffer(g))return new N(g);if(this.isArrayBufferView(g))return new N(g.buffer,g.byteOffset,g.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(g){return this.isArrayBufferView(g)||this.isArrayBuffer(g)}static isArrayBufferView(g){return ArrayBuffer.isView(g)||g&&this.isArrayBuffer(g.buffer)}static isEqual(g,N){const R=e.toUint8Array(g),k=e.toUint8Array(N);if(R.length!==k.byteLength)return!1;for(let O=0;O<R.length;O++)if(R[O]!==k[O])return!1;return!0}static concat(...g){if(Array.isArray(g[0])){const N=g[0];let R=0;for(const P of N)R+=P.byteLength;const k=new Uint8Array(R);let O=0;for(const P of N){const U=this.toUint8Array(P);k.set(U,O),O+=U.length}return g[1]?this.toView(k,g[1]):k.buffer}return this.concat(g)}}class h{static fromString(g){const N=unescape(encodeURIComponent(g)),R=new Uint8Array(N.length);for(let k=0;k<N.length;k++)R[k]=N.charCodeAt(k);return R.buffer}static toString(g){const N=e.toUint8Array(g);let R="";for(let O=0;O<N.length;O++)R+=String.fromCharCode(N[O]);return decodeURIComponent(escape(R))}}class S{static toString(g,N=!1){const R=e.toArrayBuffer(g),k=new DataView(R);let O="";for(let P=0;P<R.byteLength;P+=2){const U=k.getUint16(P,N);O+=String.fromCharCode(U)}return O}static fromString(g,N=!1){const R=new ArrayBuffer(2*g.length),k=new DataView(R);for(let O=0;O<g.length;O++)k.setUint16(2*O,g.charCodeAt(O),N);return R}}let y=(()=>{class b{static isHex(N){return"string"==typeof N&&/^[a-z0-9]+$/i.test(N)}static isBase64(N){return"string"==typeof N&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(N)}static isBase64Url(N){return"string"==typeof N&&/^[a-zA-Z0-9-_]+$/i.test(N)}static ToString(N,R="utf8"){const k=e.toUint8Array(N);switch(R.toLowerCase()){case"utf8":return this.ToUtf8String(k);case"binary":return this.ToBinary(k);case"hex":return this.ToHex(k);case"base64":return this.ToBase64(k);case"base64url":return this.ToBase64Url(k);case"utf16le":return S.toString(k,!0);case"utf16":case"utf16be":return S.toString(k);default:throw new Error(`Unknown type of encoding '${R}'`)}}static FromString(N,R="utf8"){if(!N)return new ArrayBuffer(0);switch(R.toLowerCase()){case"utf8":return this.FromUtf8String(N);case"binary":return this.FromBinary(N);case"hex":return this.FromHex(N);case"base64":return this.FromBase64(N);case"base64url":return this.FromBase64Url(N);case"utf16le":return S.fromString(N,!0);case"utf16":case"utf16be":return S.fromString(N);default:throw new Error(`Unknown type of encoding '${R}'`)}}static ToBase64(N){const R=e.toUint8Array(N);if(typeof btoa<"u"){const k=this.ToString(R,"binary");return btoa(k)}return Buffer.from(R).toString("base64")}static FromBase64(N){const R=this.formatString(N);if(!R)return new ArrayBuffer(0);if(!b.isBase64(R))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(R)):new Uint8Array(Buffer.from(R,"base64")).buffer}static FromBase64Url(N){const R=this.formatString(N);if(!R)return new ArrayBuffer(0);if(!b.isBase64Url(R))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(R.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(N){return this.ToBase64(N).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(N,R=b.DEFAULT_UTF8_ENCODING){switch(R){case"ascii":return this.FromBinary(N);case"utf8":return h.fromString(N);case"utf16":case"utf16be":return S.fromString(N);case"utf16le":case"usc2":return S.fromString(N,!0);default:throw new Error(`Unknown type of encoding '${R}'`)}}static ToUtf8String(N,R=b.DEFAULT_UTF8_ENCODING){switch(R){case"ascii":return this.ToBinary(N);case"utf8":return h.toString(N);case"utf16":case"utf16be":return S.toString(N);case"utf16le":case"usc2":return S.toString(N,!0);default:throw new Error(`Unknown type of encoding '${R}'`)}}static FromBinary(N){const R=N.length,k=new Uint8Array(R);for(let O=0;O<R;O++)k[O]=N.charCodeAt(O);return k.buffer}static ToBinary(N){const R=e.toUint8Array(N);let k="";for(let O=0;O<R.length;O++)k+=String.fromCharCode(R[O]);return k}static ToHex(N){const R=e.toUint8Array(N),O=[],P=R.length;for(let U=0;U<P;U++){const W=R[U].toString(16).padStart(2,"0");O.push(W)}return O.join("")}static FromHex(N){let R=this.formatString(N);if(!R)return new ArrayBuffer(0);if(!b.isHex(R))throw new TypeError("Argument 'hexString' is not HEX encoded");R.length%2&&(R=`0${R}`);const k=new Uint8Array(R.length/2);for(let O=0;O<R.length;O+=2){const P=R.slice(O,O+2);k[O/2]=parseInt(P,16)}return k.buffer}static ToUtf16String(N,R=!1){return S.toString(N,R)}static FromUtf16String(N,R=!1){return S.fromString(N,R)}static Base64Padding(N){const R=4-N.length%4;if(R<4)for(let k=0;k<R;k++)N+="=";return N}static formatString(N){return N?.replace(/[\n\r\t ]/g,"")||""}}return b.DEFAULT_UTF8_ENCODING="utf8",b})();_e.vJ=e,_e.ep=y},1135:(nt,_e,m)=>{"use strict";m.d(_e,{X:()=>e});var n=m(7579);class e extends n.x{constructor(S){super(),this._value=S}get value(){return this.getValue()}_subscribe(S){const y=super._subscribe(S);return!y.closed&&S.next(this._value),y}getValue(){const{hasError:S,thrownError:y,_value:w}=this;if(S)throw y;return this._throwIfClosed(),w}next(S){super.next(this._value=S)}}},9751:(nt,_e,m)=>{"use strict";m.d(_e,{y:()=>x});var n=m(930),e=m(727),h=m(8822),S=m(9635),y=m(2416),w=m(576),f=m(2806);let x=(()=>{class R{constructor(O){O&&(this._subscribe=O)}lift(O){const P=new R;return P.source=this,P.operator=O,P}subscribe(O,P,U){const W=function N(R){return R&&R instanceof n.Lv||function g(R){return R&&(0,w.m)(R.next)&&(0,w.m)(R.error)&&(0,w.m)(R.complete)}(R)&&(0,e.Nn)(R)}(O)?O:new n.Hp(O,P,U);return(0,f.x)(()=>{const{operator:M,source:B}=this;W.add(M?M.call(W,B):B?this._subscribe(W):this._trySubscribe(W))}),W}_trySubscribe(O){try{return this._subscribe(O)}catch(P){O.error(P)}}forEach(O,P){return new(P=b(P))((U,W)=>{const M=new n.Hp({next:B=>{try{O(B)}catch(V){W(V),M.unsubscribe()}},error:W,complete:U});this.subscribe(M)})}_subscribe(O){var P;return null===(P=this.source)||void 0===P?void 0:P.subscribe(O)}[h.L](){return this}pipe(...O){return(0,S.U)(O)(this)}toPromise(O){return new(O=b(O))((P,U)=>{let W;this.subscribe(M=>W=M,M=>U(M),()=>P(W))})}}return R.create=k=>new R(k),R})();function b(R){var k;return null!==(k=R??y.v.Promise)&&void 0!==k?k:Promise}},4707:(nt,_e,m)=>{"use strict";m.d(_e,{t:()=>h});var n=m(7579),e=m(6063);class h extends n.x{constructor(y=1/0,w=1/0,f=e.l){super(),this._bufferSize=y,this._windowTime=w,this._timestampProvider=f,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=w===1/0,this._bufferSize=Math.max(1,y),this._windowTime=Math.max(1,w)}next(y){const{isStopped:w,_buffer:f,_infiniteTimeWindow:x,_timestampProvider:b,_windowTime:g}=this;w||(f.push(y),!x&&f.push(b.now()+g)),this._trimBuffer(),super.next(y)}_subscribe(y){this._throwIfClosed(),this._trimBuffer();const w=this._innerSubscribe(y),{_infiniteTimeWindow:f,_buffer:x}=this,b=x.slice();for(let g=0;g<b.length&&!y.closed;g+=f?1:2)y.next(b[g]);return this._checkFinalizedStatuses(y),w}_trimBuffer(){const{_bufferSize:y,_timestampProvider:w,_buffer:f,_infiniteTimeWindow:x}=this,b=(x?1:2)*y;if(y<1/0&&b<f.length&&f.splice(0,f.length-b),!x){const g=w.now();let N=0;for(let R=1;R<f.length&&f[R]<=g;R+=2)N=R;N&&f.splice(0,N+1)}}}},7579:(nt,_e,m)=>{"use strict";m.d(_e,{x:()=>f});var n=m(9751),e=m(727);const S=(0,m(3888).d)(b=>function(){b(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var y=m(8737),w=m(2806);let f=(()=>{class b extends n.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(N){const R=new x(this,this);return R.operator=N,R}_throwIfClosed(){if(this.closed)throw new S}next(N){(0,w.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const R of this.currentObservers)R.next(N)}})}error(N){(0,w.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=N;const{observers:R}=this;for(;R.length;)R.shift().error(N)}})}complete(){(0,w.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:N}=this;for(;N.length;)N.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var N;return(null===(N=this.observers)||void 0===N?void 0:N.length)>0}_trySubscribe(N){return this._throwIfClosed(),super._trySubscribe(N)}_subscribe(N){return this._throwIfClosed(),this._checkFinalizedStatuses(N),this._innerSubscribe(N)}_innerSubscribe(N){const{hasError:R,isStopped:k,observers:O}=this;return R||k?e.Lc:(this.currentObservers=null,O.push(N),new e.w0(()=>{this.currentObservers=null,(0,y.P)(O,N)}))}_checkFinalizedStatuses(N){const{hasError:R,thrownError:k,isStopped:O}=this;R?N.error(k):O&&N.complete()}asObservable(){const N=new n.y;return N.source=this,N}}return b.create=(g,N)=>new x(g,N),b})();class x extends f{constructor(g,N){super(),this.destination=g,this.source=N}next(g){var N,R;null===(R=null===(N=this.destination)||void 0===N?void 0:N.next)||void 0===R||R.call(N,g)}error(g){var N,R;null===(R=null===(N=this.destination)||void 0===N?void 0:N.error)||void 0===R||R.call(N,g)}complete(){var g,N;null===(N=null===(g=this.destination)||void 0===g?void 0:g.complete)||void 0===N||N.call(g)}_subscribe(g){var N,R;return null!==(R=null===(N=this.source)||void 0===N?void 0:N.subscribe(g))&&void 0!==R?R:e.Lc}}},930:(nt,_e,m)=>{"use strict";m.d(_e,{Hp:()=>U,Lv:()=>R});var n=m(576),e=m(727),h=m(2416),S=m(7849),y=m(5032);const w=b("C",void 0,void 0);function b(Q,Y,fe){return{kind:Q,value:Y,error:fe}}var g=m(3410),N=m(2806);class R extends e.w0{constructor(Y){super(),this.isStopped=!1,Y?(this.destination=Y,(0,e.Nn)(Y)&&Y.add(this)):this.destination=V}static create(Y,fe,J){return new U(Y,fe,J)}next(Y){this.isStopped?B(function x(Q){return b("N",Q,void 0)}(Y),this):this._next(Y)}error(Y){this.isStopped?B(function f(Q){return b("E",void 0,Q)}(Y),this):(this.isStopped=!0,this._error(Y))}complete(){this.isStopped?B(w,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Y){this.destination.next(Y)}_error(Y){try{this.destination.error(Y)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const k=Function.prototype.bind;function O(Q,Y){return k.call(Q,Y)}class P{constructor(Y){this.partialObserver=Y}next(Y){const{partialObserver:fe}=this;if(fe.next)try{fe.next(Y)}catch(J){W(J)}}error(Y){const{partialObserver:fe}=this;if(fe.error)try{fe.error(Y)}catch(J){W(J)}else W(Y)}complete(){const{partialObserver:Y}=this;if(Y.complete)try{Y.complete()}catch(fe){W(fe)}}}class U extends R{constructor(Y,fe,J){let ee;if(super(),(0,n.m)(Y)||!Y)ee={next:Y??void 0,error:fe??void 0,complete:J??void 0};else{let G;this&&h.v.useDeprecatedNextContext?(G=Object.create(Y),G.unsubscribe=()=>this.unsubscribe(),ee={next:Y.next&&O(Y.next,G),error:Y.error&&O(Y.error,G),complete:Y.complete&&O(Y.complete,G)}):ee=Y}this.destination=new P(ee)}}function W(Q){h.v.useDeprecatedSynchronousErrorHandling?(0,N.O)(Q):(0,S.h)(Q)}function B(Q,Y){const{onStoppedNotification:fe}=h.v;fe&&g.z.setTimeout(()=>fe(Q,Y))}const V={closed:!0,next:y.Z,error:function M(Q){throw Q},complete:y.Z}},727:(nt,_e,m)=>{"use strict";m.d(_e,{Lc:()=>w,w0:()=>y,Nn:()=>f});var n=m(576);const h=(0,m(3888).d)(b=>function(N){b(this),this.message=N?`${N.length} errors occurred during unsubscription:\n${N.map((R,k)=>`${k+1}) ${R.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=N});var S=m(8737);class y{constructor(g){this.initialTeardown=g,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let g;if(!this.closed){this.closed=!0;const{_parentage:N}=this;if(N)if(this._parentage=null,Array.isArray(N))for(const O of N)O.remove(this);else N.remove(this);const{initialTeardown:R}=this;if((0,n.m)(R))try{R()}catch(O){g=O instanceof h?O.errors:[O]}const{_finalizers:k}=this;if(k){this._finalizers=null;for(const O of k)try{x(O)}catch(P){g=g??[],P instanceof h?g=[...g,...P.errors]:g.push(P)}}if(g)throw new h(g)}}add(g){var N;if(g&&g!==this)if(this.closed)x(g);else{if(g instanceof y){if(g.closed||g._hasParent(this))return;g._addParent(this)}(this._finalizers=null!==(N=this._finalizers)&&void 0!==N?N:[]).push(g)}}_hasParent(g){const{_parentage:N}=this;return N===g||Array.isArray(N)&&N.includes(g)}_addParent(g){const{_parentage:N}=this;this._parentage=Array.isArray(N)?(N.push(g),N):N?[N,g]:g}_removeParent(g){const{_parentage:N}=this;N===g?this._parentage=null:Array.isArray(N)&&(0,S.P)(N,g)}remove(g){const{_finalizers:N}=this;N&&(0,S.P)(N,g),g instanceof y&&g._removeParent(this)}}y.EMPTY=(()=>{const b=new y;return b.closed=!0,b})();const w=y.EMPTY;function f(b){return b instanceof y||b&&"closed"in b&&(0,n.m)(b.remove)&&(0,n.m)(b.add)&&(0,n.m)(b.unsubscribe)}function x(b){(0,n.m)(b)?b():b.unsubscribe()}},2416:(nt,_e,m)=>{"use strict";m.d(_e,{v:()=>n});const n={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(nt,_e,m)=>{"use strict";m.d(_e,{a:()=>g,l:()=>N});var n=m(9751),e=m(4742),h=m(2076),S=m(4671),y=m(3268),w=m(3269),f=m(1810),x=m(5403),b=m(9672);function g(...k){const O=(0,w.yG)(k),P=(0,w.jO)(k),{args:U,keys:W}=(0,e.D)(k);if(0===U.length)return(0,h.D)([],O);const M=new n.y(N(U,O,W?B=>(0,f.n)(W,B):S.y));return P?M.pipe((0,y.Z)(P)):M}function N(k,O,P=S.y){return U=>{R(O,()=>{const{length:W}=k,M=new Array(W);let B=W,V=W;for(let Q=0;Q<W;Q++)R(O,()=>{const Y=(0,h.D)(k[Q],O);let fe=!1;Y.subscribe((0,x.x)(U,J=>{M[Q]=J,fe||(fe=!0,V--),V||U.next(P(M.slice()))},()=>{--B||U.complete()}))},U)},U)}}function R(k,O,P){k?(0,b.f)(P,k,O):O()}},7272:(nt,_e,m)=>{"use strict";m.d(_e,{z:()=>y});var n=m(8189),h=m(3269),S=m(2076);function y(...w){return function e(){return(0,n.J)(1)}()((0,S.D)(w,(0,h.yG)(w)))}},9770:(nt,_e,m)=>{"use strict";m.d(_e,{P:()=>h});var n=m(9751),e=m(8421);function h(S){return new n.y(y=>{(0,e.Xf)(S()).subscribe(y)})}},515:(nt,_e,m)=>{"use strict";m.d(_e,{E:()=>e,c:()=>h});var n=m(9751);const e=new n.y(y=>y.complete());function h(y){return y?function S(y){return new n.y(w=>y.schedule(()=>w.complete()))}(y):e}},4128:(nt,_e,m)=>{"use strict";m.d(_e,{D:()=>x});var n=m(9751),e=m(4742),h=m(8421),S=m(3269),y=m(5403),w=m(3268),f=m(1810);function x(...b){const g=(0,S.jO)(b),{args:N,keys:R}=(0,e.D)(b),k=new n.y(O=>{const{length:P}=N;if(!P)return void O.complete();const U=new Array(P);let W=P,M=P;for(let B=0;B<P;B++){let V=!1;(0,h.Xf)(N[B]).subscribe((0,y.x)(O,Q=>{V||(V=!0,M--),U[B]=Q},()=>W--,void 0,()=>{(!W||!V)&&(M||O.next(R?(0,f.n)(R,U):U),O.complete())}))}});return g?k.pipe((0,w.Z)(g)):k}},2076:(nt,_e,m)=>{"use strict";m.d(_e,{D:()=>J});var n=m(8421),e=m(9672),h=m(4482),S=m(5403);function y(ee,G=0){return(0,h.e)((E,te)=>{E.subscribe((0,S.x)(te,$=>(0,e.f)(te,ee,()=>te.next($),G),()=>(0,e.f)(te,ee,()=>te.complete(),G),$=>(0,e.f)(te,ee,()=>te.error($),G)))})}function w(ee,G=0){return(0,h.e)((E,te)=>{te.add(ee.schedule(()=>E.subscribe(te),G))})}var b=m(9751),N=m(2202),R=m(576);function O(ee,G){if(!ee)throw new Error("Iterable cannot be null");return new b.y(E=>{(0,e.f)(E,G,()=>{const te=ee[Symbol.asyncIterator]();(0,e.f)(E,G,()=>{te.next().then($=>{$.done?E.complete():E.next($.value)})},0,!0)})})}var P=m(3670),U=m(8239),W=m(1144),M=m(6495),B=m(2206),V=m(4532),Q=m(3260);function J(ee,G){return G?function fe(ee,G){if(null!=ee){if((0,P.c)(ee))return function f(ee,G){return(0,n.Xf)(ee).pipe(w(G),y(G))}(ee,G);if((0,W.z)(ee))return function g(ee,G){return new b.y(E=>{let te=0;return G.schedule(function(){te===ee.length?E.complete():(E.next(ee[te++]),E.closed||this.schedule())})})}(ee,G);if((0,U.t)(ee))return function x(ee,G){return(0,n.Xf)(ee).pipe(w(G),y(G))}(ee,G);if((0,B.D)(ee))return O(ee,G);if((0,M.T)(ee))return function k(ee,G){return new b.y(E=>{let te;return(0,e.f)(E,G,()=>{te=ee[N.h](),(0,e.f)(E,G,()=>{let $,ue;try{({value:$,done:ue}=te.next())}catch(me){return void E.error(me)}ue?E.complete():E.next($)},0,!0)}),()=>(0,R.m)(te?.return)&&te.return()})}(ee,G);if((0,Q.L)(ee))return function Y(ee,G){return O((0,Q.Q)(ee),G)}(ee,G)}throw(0,V.z)(ee)}(ee,G):(0,n.Xf)(ee)}},4968:(nt,_e,m)=>{"use strict";m.d(_e,{R:()=>g});var n=m(8421),e=m(9751),h=m(5577),S=m(1144),y=m(576),w=m(3268);const f=["addListener","removeListener"],x=["addEventListener","removeEventListener"],b=["on","off"];function g(P,U,W,M){if((0,y.m)(W)&&(M=W,W=void 0),M)return g(P,U,W).pipe((0,w.Z)(M));const[B,V]=function O(P){return(0,y.m)(P.addEventListener)&&(0,y.m)(P.removeEventListener)}(P)?x.map(Q=>Y=>P[Q](U,Y,W)):function R(P){return(0,y.m)(P.addListener)&&(0,y.m)(P.removeListener)}(P)?f.map(N(P,U)):function k(P){return(0,y.m)(P.on)&&(0,y.m)(P.off)}(P)?b.map(N(P,U)):[];if(!B&&(0,S.z)(P))return(0,h.z)(Q=>g(Q,U,W))((0,n.Xf)(P));if(!B)throw new TypeError("Invalid event target");return new e.y(Q=>{const Y=(...fe)=>Q.next(1<fe.length?fe:fe[0]);return B(Y),()=>V(Y)})}function N(P,U){return W=>M=>P[W](U,M)}},8421:(nt,_e,m)=>{"use strict";m.d(_e,{Xf:()=>k});var n=m(655),e=m(1144),h=m(8239),S=m(9751),y=m(3670),w=m(2206),f=m(4532),x=m(6495),b=m(3260),g=m(576),N=m(7849),R=m(8822);function k(Q){if(Q instanceof S.y)return Q;if(null!=Q){if((0,y.c)(Q))return function O(Q){return new S.y(Y=>{const fe=Q[R.L]();if((0,g.m)(fe.subscribe))return fe.subscribe(Y);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Q);if((0,e.z)(Q))return function P(Q){return new S.y(Y=>{for(let fe=0;fe<Q.length&&!Y.closed;fe++)Y.next(Q[fe]);Y.complete()})}(Q);if((0,h.t)(Q))return function U(Q){return new S.y(Y=>{Q.then(fe=>{Y.closed||(Y.next(fe),Y.complete())},fe=>Y.error(fe)).then(null,N.h)})}(Q);if((0,w.D)(Q))return M(Q);if((0,x.T)(Q))return function W(Q){return new S.y(Y=>{for(const fe of Q)if(Y.next(fe),Y.closed)return;Y.complete()})}(Q);if((0,b.L)(Q))return function B(Q){return M((0,b.Q)(Q))}(Q)}throw(0,f.z)(Q)}function M(Q){return new S.y(Y=>{(function V(Q,Y){var fe,J,ee,G;return(0,n.mG)(this,void 0,void 0,function*(){try{for(fe=(0,n.KL)(Q);!(J=yield fe.next()).done;)if(Y.next(J.value),Y.closed)return}catch(E){ee={error:E}}finally{try{J&&!J.done&&(G=fe.return)&&(yield G.call(fe))}finally{if(ee)throw ee.error}}Y.complete()})})(Q,Y).catch(fe=>Y.error(fe))})}},6451:(nt,_e,m)=>{"use strict";m.d(_e,{T:()=>w});var n=m(8189),e=m(8421),h=m(515),S=m(3269),y=m(2076);function w(...f){const x=(0,S.yG)(f),b=(0,S._6)(f,1/0),g=f;return g.length?1===g.length?(0,e.Xf)(g[0]):(0,n.J)(b)((0,y.D)(g,x)):h.E}},1848:(nt,_e,m)=>{"use strict";m.d(_e,{C:()=>h});var n=m(9751),e=m(5032);const h=new n.y(e.Z)},9646:(nt,_e,m)=>{"use strict";m.d(_e,{of:()=>h});var n=m(3269),e=m(2076);function h(...S){const y=(0,n.yG)(S);return(0,e.D)(S,y)}},2843:(nt,_e,m)=>{"use strict";m.d(_e,{_:()=>h});var n=m(9751),e=m(576);function h(S,y){const w=(0,e.m)(S)?S:()=>S,f=x=>x.error(w());return new n.y(y?x=>y.schedule(f,0,x):f)}},5963:(nt,_e,m)=>{"use strict";m.d(_e,{H:()=>y});var n=m(9751),e=m(4986),h=m(3532);function y(w=0,f,x=e.P){let b=-1;return null!=f&&((0,h.K)(f)?x=f:b=f),new n.y(g=>{let N=function S(w){return w instanceof Date&&!isNaN(w)}(w)?+w-x.now():w;N<0&&(N=0);let R=0;return x.schedule(function(){g.closed||(g.next(R++),0<=b?this.schedule(void 0,b):g.complete())},N)})}},5403:(nt,_e,m)=>{"use strict";m.d(_e,{x:()=>e});var n=m(930);function e(S,y,w,f,x){return new h(S,y,w,f,x)}class h extends n.Lv{constructor(y,w,f,x,b,g){super(y),this.onFinalize=b,this.shouldUnsubscribe=g,this._next=w?function(N){try{w(N)}catch(R){y.error(R)}}:super._next,this._error=x?function(N){try{x(N)}catch(R){y.error(R)}finally{this.unsubscribe()}}:super._error,this._complete=f?function(){try{f()}catch(N){y.error(N)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var y;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:w}=this;super.unsubscribe(),!w&&(null===(y=this.onFinalize)||void 0===y||y.call(this))}}}},262:(nt,_e,m)=>{"use strict";m.d(_e,{K:()=>S});var n=m(8421),e=m(5403),h=m(4482);function S(y){return(0,h.e)((w,f)=>{let g,x=null,b=!1;x=w.subscribe((0,e.x)(f,void 0,void 0,N=>{g=(0,n.Xf)(y(N,S(y)(w))),x?(x.unsubscribe(),x=null,g.subscribe(f)):b=!0})),b&&(x.unsubscribe(),x=null,g.subscribe(f))})}},2718:(nt,_e,m)=>{"use strict";m.d(_e,{V:()=>x});var n=m(9841),e=m(4482),h=m(5797),S=m(3268),y=m(9635),w=m(3269);function f(...b){const g=(0,w.jO)(b);return g?(0,y.z)(f(...b),(0,S.Z)(g)):(0,e.e)((N,R)=>{(0,n.l)([N,...(0,h.k)(b)])(R)})}function x(...b){return f(...b)}},4351:(nt,_e,m)=>{"use strict";m.d(_e,{b:()=>h});var n=m(5577),e=m(576);function h(S,y){return(0,e.m)(y)?(0,n.z)(S,y,1):(0,n.z)(S,1)}},8372:(nt,_e,m)=>{"use strict";m.d(_e,{b:()=>S});var n=m(4986),e=m(4482),h=m(5403);function S(y,w=n.z){return(0,e.e)((f,x)=>{let b=null,g=null,N=null;const R=()=>{if(b){b.unsubscribe(),b=null;const O=g;g=null,x.next(O)}};function k(){const O=N+y,P=w.now();if(P<O)return b=this.schedule(void 0,O-P),void x.add(b);R()}f.subscribe((0,h.x)(x,O=>{g=O,N=w.now(),b||(b=w.schedule(k,y),x.add(b))},()=>{R(),x.complete()},void 0,()=>{g=b=null}))})}},6590:(nt,_e,m)=>{"use strict";m.d(_e,{d:()=>h});var n=m(4482),e=m(5403);function h(S){return(0,n.e)((y,w)=>{let f=!1;y.subscribe((0,e.x)(w,x=>{f=!0,w.next(x)},()=>{f||w.next(S),w.complete()}))})}},1005:(nt,_e,m)=>{"use strict";m.d(_e,{g:()=>R});var n=m(4986),e=m(7272),h=m(5698),S=m(4482),y=m(5403),w=m(5032),x=m(9718),b=m(5577);function g(k,O){return O?P=>(0,e.z)(O.pipe((0,h.q)(1),function f(){return(0,S.e)((k,O)=>{k.subscribe((0,y.x)(O,w.Z))})}()),P.pipe(g(k))):(0,b.z)((P,U)=>k(P,U).pipe((0,h.q)(1),(0,x.h)(P)))}var N=m(5963);function R(k,O=n.z){const P=(0,N.H)(k,O);return g(()=>P)}},1884:(nt,_e,m)=>{"use strict";m.d(_e,{x:()=>S});var n=m(4671),e=m(4482),h=m(5403);function S(w,f=n.y){return w=w??y,(0,e.e)((x,b)=>{let g,N=!0;x.subscribe((0,h.x)(b,R=>{const k=f(R);(N||!w(g,k))&&(N=!1,g=k,b.next(R))}))})}function y(w,f){return w===f}},9300:(nt,_e,m)=>{"use strict";m.d(_e,{h:()=>h});var n=m(4482),e=m(5403);function h(S,y){return(0,n.e)((w,f)=>{let x=0;w.subscribe((0,e.x)(f,b=>S.call(y,b,x++)&&f.next(b)))})}},590:(nt,_e,m)=>{"use strict";m.d(_e,{P:()=>f});var n=m(6805),e=m(9300),h=m(5698),S=m(6590),y=m(8068),w=m(4671);function f(x,b){const g=arguments.length>=2;return N=>N.pipe(x?(0,e.h)((R,k)=>x(R,k,N)):w.y,(0,h.q)(1),g?(0,S.d)(b):(0,y.T)(()=>new n.K))}},4004:(nt,_e,m)=>{"use strict";m.d(_e,{U:()=>h});var n=m(4482),e=m(5403);function h(S,y){return(0,n.e)((w,f)=>{let x=0;w.subscribe((0,e.x)(f,b=>{f.next(S.call(y,b,x++))}))})}},9718:(nt,_e,m)=>{"use strict";m.d(_e,{h:()=>e});var n=m(4004);function e(h){return(0,n.U)(()=>h)}},5683:(nt,_e,m)=>{"use strict";m.d(_e,{T:()=>w});var n=m(4482),e=m(5797),h=m(8189),S=m(3269),y=m(2076);function w(...f){const x=(0,S.yG)(f),b=(0,S._6)(f,1/0);return f=(0,e.k)(f),(0,n.e)((g,N)=>{(0,h.J)(b)((0,y.D)([g,...f],x)).subscribe(N)})}},8189:(nt,_e,m)=>{"use strict";m.d(_e,{J:()=>h});var n=m(5577),e=m(4671);function h(S=1/0){return(0,n.z)(e.y,S)}},5577:(nt,_e,m)=>{"use strict";m.d(_e,{z:()=>x});var n=m(4004),e=m(8421),h=m(4482),S=m(9672),y=m(5403),f=m(576);function x(b,g,N=1/0){return(0,f.m)(g)?x((R,k)=>(0,n.U)((O,P)=>g(R,O,k,P))((0,e.Xf)(b(R,k))),N):("number"==typeof g&&(N=g),(0,h.e)((R,k)=>function w(b,g,N,R,k,O,P,U){const W=[];let M=0,B=0,V=!1;const Q=()=>{V&&!W.length&&!M&&g.complete()},Y=J=>M<R?fe(J):W.push(J),fe=J=>{O&&g.next(J),M++;let ee=!1;(0,e.Xf)(N(J,B++)).subscribe((0,y.x)(g,G=>{k?.(G),O?Y(G):g.next(G)},()=>{ee=!0},void 0,()=>{if(ee)try{for(M--;W.length&&M<R;){const G=W.shift();P?(0,S.f)(g,P,()=>fe(G)):fe(G)}Q()}catch(G){g.error(G)}}))};return b.subscribe((0,y.x)(g,Y,()=>{V=!0,Q()})),()=>{U?.()}}(R,k,b,N)))}},3635:(nt,_e,m)=>{"use strict";m.d(_e,{b:()=>e});var n=m(5683);function e(...h){return(0,n.T)(...h)}},7359:(nt,_e,m)=>{"use strict";m.d(_e,{U:()=>e});var n=m(5403);function e(h,S,y,w,f){return(x,b)=>{let g=y,N=S,R=0;x.subscribe((0,n.x)(b,k=>{const O=R++;N=g?h(N,k,O):(g=!0,k),w&&b.next(N)},f&&(()=>{g&&b.next(N),b.complete()})))}}},3099:(nt,_e,m)=>{"use strict";m.d(_e,{B:()=>y});var n=m(8421),e=m(7579),h=m(930),S=m(4482);function y(f={}){const{connector:x=(()=>new e.x),resetOnError:b=!0,resetOnComplete:g=!0,resetOnRefCountZero:N=!0}=f;return R=>{let k,O,P,U=0,W=!1,M=!1;const B=()=>{O?.unsubscribe(),O=void 0},V=()=>{B(),k=P=void 0,W=M=!1},Q=()=>{const Y=k;V(),Y?.unsubscribe()};return(0,S.e)((Y,fe)=>{U++,!M&&!W&&B();const J=P=P??x();fe.add(()=>{U--,0===U&&!M&&!W&&(O=w(Q,N))}),J.subscribe(fe),!k&&U>0&&(k=new h.Hp({next:ee=>J.next(ee),error:ee=>{M=!0,B(),O=w(V,b,ee),J.error(ee)},complete:()=>{W=!0,B(),O=w(V,g),J.complete()}}),(0,n.Xf)(Y).subscribe(k))})(R)}}function w(f,x,...b){if(!0===x)return void f();if(!1===x)return;const g=new h.Hp({next:()=>{g.unsubscribe(),f()}});return x(...b).subscribe(g)}},4782:(nt,_e,m)=>{"use strict";m.d(_e,{d:()=>h});var n=m(4707),e=m(3099);function h(S,y,w){let f,x=!1;return S&&"object"==typeof S?({bufferSize:f=1/0,windowTime:y=1/0,refCount:x=!1,scheduler:w}=S):f=S??1/0,(0,e.B)({connector:()=>new n.t(f,y,w),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:x})}},8675:(nt,_e,m)=>{"use strict";m.d(_e,{O:()=>S});var n=m(7272),e=m(3269),h=m(4482);function S(...y){const w=(0,e.yG)(y);return(0,h.e)((f,x)=>{(w?(0,n.z)(y,f,w):(0,n.z)(y,f)).subscribe(x)})}},3900:(nt,_e,m)=>{"use strict";m.d(_e,{w:()=>S});var n=m(8421),e=m(4482),h=m(5403);function S(y,w){return(0,e.e)((f,x)=>{let b=null,g=0,N=!1;const R=()=>N&&!b&&x.complete();f.subscribe((0,h.x)(x,k=>{b?.unsubscribe();let O=0;const P=g++;(0,n.Xf)(y(k,P)).subscribe(b=(0,h.x)(x,U=>x.next(w?w(k,U,P,O++):U),()=>{b=null,R()}))},()=>{N=!0,R()}))})}},5698:(nt,_e,m)=>{"use strict";m.d(_e,{q:()=>S});var n=m(515),e=m(4482),h=m(5403);function S(y){return y<=0?()=>n.E:(0,e.e)((w,f)=>{let x=0;w.subscribe((0,h.x)(f,b=>{++x<=y&&(f.next(b),y<=x&&f.complete())}))})}},2722:(nt,_e,m)=>{"use strict";m.d(_e,{R:()=>y});var n=m(4482),e=m(5403),h=m(8421),S=m(5032);function y(w){return(0,n.e)((f,x)=>{(0,h.Xf)(w).subscribe((0,e.x)(x,()=>x.complete(),S.Z)),!x.closed&&f.subscribe(x)})}},8505:(nt,_e,m)=>{"use strict";m.d(_e,{b:()=>y});var n=m(576),e=m(4482),h=m(5403),S=m(4671);function y(w,f,x){const b=(0,n.m)(w)||f||x?{next:w,error:f,complete:x}:w;return b?(0,e.e)((g,N)=>{var R;null===(R=b.subscribe)||void 0===R||R.call(b);let k=!0;g.subscribe((0,h.x)(N,O=>{var P;null===(P=b.next)||void 0===P||P.call(b,O),N.next(O)},()=>{var O;k=!1,null===(O=b.complete)||void 0===O||O.call(b),N.complete()},O=>{var P;k=!1,null===(P=b.error)||void 0===P||P.call(b,O),N.error(O)},()=>{var O,P;k&&(null===(O=b.unsubscribe)||void 0===O||O.call(b)),null===(P=b.finalize)||void 0===P||P.call(b)}))}):S.y}},8068:(nt,_e,m)=>{"use strict";m.d(_e,{T:()=>S});var n=m(6805),e=m(4482),h=m(5403);function S(w=y){return(0,e.e)((f,x)=>{let b=!1;f.subscribe((0,h.x)(x,g=>{b=!0,x.next(g)},()=>b?x.complete():x.error(w())))})}function y(){return new n.K}},1365:(nt,_e,m)=>{"use strict";m.d(_e,{M:()=>f});var n=m(4482),e=m(5403),h=m(8421),S=m(4671),y=m(5032),w=m(3269);function f(...x){const b=(0,w.jO)(x);return(0,n.e)((g,N)=>{const R=x.length,k=new Array(R);let O=x.map(()=>!1),P=!1;for(let U=0;U<R;U++)(0,h.Xf)(x[U]).subscribe((0,e.x)(N,W=>{k[U]=W,!P&&!O[U]&&(O[U]=!0,(P=O.every(S.y))&&(O=null))},y.Z));g.subscribe((0,e.x)(N,U=>{if(P){const W=[U,...k];N.next(b?b(...W):W)}}))})}},4408:(nt,_e,m)=>{"use strict";m.d(_e,{o:()=>y});var n=m(727);class e extends n.w0{constructor(f,x){super()}schedule(f,x=0){return this}}const h={setInterval(w,f,...x){const{delegate:b}=h;return b?.setInterval?b.setInterval(w,f,...x):setInterval(w,f,...x)},clearInterval(w){const{delegate:f}=h;return(f?.clearInterval||clearInterval)(w)},delegate:void 0};var S=m(8737);class y extends e{constructor(f,x){super(f,x),this.scheduler=f,this.work=x,this.pending=!1}schedule(f,x=0){if(this.closed)return this;this.state=f;const b=this.id,g=this.scheduler;return null!=b&&(this.id=this.recycleAsyncId(g,b,x)),this.pending=!0,this.delay=x,this.id=this.id||this.requestAsyncId(g,this.id,x),this}requestAsyncId(f,x,b=0){return h.setInterval(f.flush.bind(f,this),b)}recycleAsyncId(f,x,b=0){if(null!=b&&this.delay===b&&!1===this.pending)return x;h.clearInterval(x)}execute(f,x){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const b=this._execute(f,x);if(b)return b;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(f,x){let g,b=!1;try{this.work(f)}catch(N){b=!0,g=N||new Error("Scheduled action threw falsy error")}if(b)return this.unsubscribe(),g}unsubscribe(){if(!this.closed){const{id:f,scheduler:x}=this,{actions:b}=x;this.work=this.state=this.scheduler=null,this.pending=!1,(0,S.P)(b,this),null!=f&&(this.id=this.recycleAsyncId(x,f,null)),this.delay=null,super.unsubscribe()}}}},7565:(nt,_e,m)=>{"use strict";m.d(_e,{v:()=>h});var n=m(6063);class e{constructor(y,w=e.now){this.schedulerActionCtor=y,this.now=w}schedule(y,w=0,f){return new this.schedulerActionCtor(this,y).schedule(f,w)}}e.now=n.l.now;class h extends e{constructor(y,w=e.now){super(y,w),this.actions=[],this._active=!1,this._scheduled=void 0}flush(y){const{actions:w}=this;if(this._active)return void w.push(y);let f;this._active=!0;do{if(f=y.execute(y.state,y.delay))break}while(y=w.shift());if(this._active=!1,f){for(;y=w.shift();)y.unsubscribe();throw f}}}},4986:(nt,_e,m)=>{"use strict";m.d(_e,{P:()=>S,z:()=>h});var n=m(4408);const h=new(m(7565).v)(n.o),S=h},6063:(nt,_e,m)=>{"use strict";m.d(_e,{l:()=>n});const n={now:()=>(n.delegate||Date).now(),delegate:void 0}},3410:(nt,_e,m)=>{"use strict";m.d(_e,{z:()=>n});const n={setTimeout(e,h,...S){const{delegate:y}=n;return y?.setTimeout?y.setTimeout(e,h,...S):setTimeout(e,h,...S)},clearTimeout(e){const{delegate:h}=n;return(h?.clearTimeout||clearTimeout)(e)},delegate:void 0}},2202:(nt,_e,m)=>{"use strict";m.d(_e,{h:()=>e});const e=function n(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(nt,_e,m)=>{"use strict";m.d(_e,{L:()=>n});const n="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(nt,_e,m)=>{"use strict";m.d(_e,{K:()=>e});const e=(0,m(3888).d)(h=>function(){h(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(nt,_e,m)=>{"use strict";m.d(_e,{_6:()=>w,jO:()=>S,yG:()=>y});var n=m(576),e=m(3532);function h(f){return f[f.length-1]}function S(f){return(0,n.m)(h(f))?f.pop():void 0}function y(f){return(0,e.K)(h(f))?f.pop():void 0}function w(f,x){return"number"==typeof h(f)?f.pop():x}},4742:(nt,_e,m)=>{"use strict";m.d(_e,{D:()=>y});const{isArray:n}=Array,{getPrototypeOf:e,prototype:h,keys:S}=Object;function y(f){if(1===f.length){const x=f[0];if(n(x))return{args:x,keys:null};if(function w(f){return f&&"object"==typeof f&&e(f)===h}(x)){const b=S(x);return{args:b.map(g=>x[g]),keys:b}}}return{args:f,keys:null}}},5797:(nt,_e,m)=>{"use strict";m.d(_e,{k:()=>e});const{isArray:n}=Array;function e(h){return 1===h.length&&n(h[0])?h[0]:h}},8737:(nt,_e,m)=>{"use strict";function n(e,h){if(e){const S=e.indexOf(h);0<=S&&e.splice(S,1)}}m.d(_e,{P:()=>n})},3888:(nt,_e,m)=>{"use strict";function n(e){const S=e(y=>{Error.call(y),y.stack=(new Error).stack});return S.prototype=Object.create(Error.prototype),S.prototype.constructor=S,S}m.d(_e,{d:()=>n})},1810:(nt,_e,m)=>{"use strict";function n(e,h){return e.reduce((S,y,w)=>(S[y]=h[w],S),{})}m.d(_e,{n:()=>n})},2806:(nt,_e,m)=>{"use strict";m.d(_e,{O:()=>S,x:()=>h});var n=m(2416);let e=null;function h(y){if(n.v.useDeprecatedSynchronousErrorHandling){const w=!e;if(w&&(e={errorThrown:!1,error:null}),y(),w){const{errorThrown:f,error:x}=e;if(e=null,f)throw x}}else y()}function S(y){n.v.useDeprecatedSynchronousErrorHandling&&e&&(e.errorThrown=!0,e.error=y)}},9672:(nt,_e,m)=>{"use strict";function n(e,h,S,y=0,w=!1){const f=h.schedule(function(){S(),w?e.add(this.schedule(null,y)):this.unsubscribe()},y);if(e.add(f),!w)return f}m.d(_e,{f:()=>n})},4671:(nt,_e,m)=>{"use strict";function n(e){return e}m.d(_e,{y:()=>n})},1144:(nt,_e,m)=>{"use strict";m.d(_e,{z:()=>n});const n=e=>e&&"number"==typeof e.length&&"function"!=typeof e},2206:(nt,_e,m)=>{"use strict";m.d(_e,{D:()=>e});var n=m(576);function e(h){return Symbol.asyncIterator&&(0,n.m)(h?.[Symbol.asyncIterator])}},576:(nt,_e,m)=>{"use strict";function n(e){return"function"==typeof e}m.d(_e,{m:()=>n})},3670:(nt,_e,m)=>{"use strict";m.d(_e,{c:()=>h});var n=m(8822),e=m(576);function h(S){return(0,e.m)(S[n.L])}},6495:(nt,_e,m)=>{"use strict";m.d(_e,{T:()=>h});var n=m(2202),e=m(576);function h(S){return(0,e.m)(S?.[n.h])}},5191:(nt,_e,m)=>{"use strict";m.d(_e,{b:()=>h});var n=m(9751),e=m(576);function h(S){return!!S&&(S instanceof n.y||(0,e.m)(S.lift)&&(0,e.m)(S.subscribe))}},8239:(nt,_e,m)=>{"use strict";m.d(_e,{t:()=>e});var n=m(576);function e(h){return(0,n.m)(h?.then)}},3260:(nt,_e,m)=>{"use strict";m.d(_e,{L:()=>S,Q:()=>h});var n=m(655),e=m(576);function h(y){return(0,n.FC)(this,arguments,function*(){const f=y.getReader();try{for(;;){const{value:x,done:b}=yield(0,n.qq)(f.read());if(b)return yield(0,n.qq)(void 0);yield yield(0,n.qq)(x)}}finally{f.releaseLock()}})}function S(y){return(0,e.m)(y?.getReader)}},3532:(nt,_e,m)=>{"use strict";m.d(_e,{K:()=>e});var n=m(576);function e(h){return h&&(0,n.m)(h.schedule)}},4482:(nt,_e,m)=>{"use strict";m.d(_e,{A:()=>e,e:()=>h});var n=m(576);function e(S){return(0,n.m)(S?.lift)}function h(S){return y=>{if(e(y))return y.lift(function(w){try{return S(w,this)}catch(f){this.error(f)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(nt,_e,m)=>{"use strict";m.d(_e,{Z:()=>S});var n=m(4004);const{isArray:e}=Array;function S(y){return(0,n.U)(w=>function h(y,w){return e(w)?y(...w):y(w)}(y,w))}},5032:(nt,_e,m)=>{"use strict";function n(){}m.d(_e,{Z:()=>n})},9635:(nt,_e,m)=>{"use strict";m.d(_e,{U:()=>h,z:()=>e});var n=m(4671);function e(...S){return h(S)}function h(S){return 0===S.length?n.y:1===S.length?S[0]:function(w){return S.reduce((f,x)=>x(f),w)}}},7849:(nt,_e,m)=>{"use strict";m.d(_e,{h:()=>h});var n=m(2416),e=m(3410);function h(S){e.z.setTimeout(()=>{const{onUnhandledError:y}=n.v;if(!y)throw S;y(S)})}},4532:(nt,_e,m)=>{"use strict";function n(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}m.d(_e,{z:()=>n})},5834:function(nt,_e,m){var n;!function(e,h){"use strict";var f="function",x="undefined",b="object",g="string",N="major",R="model",k="name",O="type",P="vendor",U="version",W="architecture",M="console",B="mobile",V="tablet",Q="smarttv",Y="wearable",fe="embedded",ee="Amazon",G="Apple",E="ASUS",te="BlackBerry",$="Browser",ue="Chrome",we="Firefox",ye="Google",Ge="Microsoft",ve="Motorola",c="Opera",tt="Samsung",ct="Sony",ft="Xiaomi",qt="Zebra",en="Facebook",xt="Chromium OS",j=function(Ze){for(var oe={},ie=0;ie<Ze.length;ie++)oe[Ze[ie].toUpperCase()]=Ze[ie];return oe},ae=function(Ze,oe){return typeof Ze===g&&-1!==Be(oe).indexOf(Be(Ze))},Be=function(Ze){return Ze.toLowerCase()},ke=function(Ze,oe){if(typeof Ze===g)return Ze=Ze.replace(/^\s\s*/,""),typeof oe===x?Ze:Ze.substring(0,350)},Re=function(Ze,oe){for(var L,ne,Ne,ze,et,Tt,ie=0;ie<oe.length&&!et;){var Zt=oe[ie],gn=oe[ie+1];for(L=ne=0;L<Zt.length&&!et&&Zt[L];)if(et=Zt[L++].exec(Ze))for(Ne=0;Ne<gn.length;Ne++)Tt=et[++ne],typeof(ze=gn[Ne])===b&&ze.length>0?2===ze.length?this[ze[0]]=typeof ze[1]==f?ze[1].call(this,Tt):ze[1]:3===ze.length?this[ze[0]]=typeof ze[1]!==f||ze[1].exec&&ze[1].test?Tt?Tt.replace(ze[1],ze[2]):h:Tt?ze[1].call(this,Tt,ze[2]):h:4===ze.length&&(this[ze[0]]=Tt?ze[3].call(this,Tt.replace(ze[1],ze[2])):h):this[ze]=Tt||h;ie+=2}},Se=function(Ze,oe){for(var ie in oe)if(typeof oe[ie]===b&&oe[ie].length>0){for(var L=0;L<oe[ie].length;L++)if(ae(oe[ie][L],Ze))return"?"===ie?h:ie}else if(ae(oe[ie],Ze))return"?"===ie?h:ie;return Ze},Xe={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ke={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[U,[k,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[U,[k,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[k,U],[/opios[\/ ]+([\w\.]+)/i],[U,[k,c+" Mini"]],[/\bopr\/([\w\.]+)/i],[U,[k,c]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[k,U],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[U,[k,"UC"+$]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[U,[k,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[U,[k,"WeChat"]],[/konqueror\/([\w\.]+)/i],[U,[k,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[U,[k,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[U,[k,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[k,/(.+)/,"$1 Secure "+$],U],[/\bfocus\/([\w\.]+)/i],[U,[k,we+" Focus"]],[/\bopt\/([\w\.]+)/i],[U,[k,c+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[U,[k,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[U,[k,"Dolphin"]],[/coast\/([\w\.]+)/i],[U,[k,c+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[U,[k,"MIUI "+$]],[/fxios\/([-\w\.]+)/i],[U,[k,we]],[/\bqihu|(qi?ho?o?|360)browser/i],[[k,"360 "+$]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[k,/(.+)/,"$1 "+$],U],[/(comodo_dragon)\/([\w\.]+)/i],[[k,/_/g," "],U],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[k,U],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[k],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[k,en],U],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[k,U],[/\bgsa\/([\w\.]+) .*safari\//i],[U,[k,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[U,[k,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[U,[k,ue+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[k,ue+" WebView"],U],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[U,[k,"Android "+$]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[k,U],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[U,[k,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[U,k],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[k,[U,Se,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[k,U],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[k,"Netscape"],U],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[U,[k,we+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[k,U],[/(cobalt)\/([\w\.]+)/i],[k,[U,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[W,"amd64"]],[/(ia32(?=;))/i],[[W,Be]],[/((?:i[346]|x)86)[;\)]/i],[[W,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[W,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[W,"armhf"]],[/windows (ce|mobile); ppc;/i],[[W,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[W,/ower/,"",Be]],[/(sun4\w)[;\)]/i],[[W,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[W,Be]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[R,[P,tt],[O,V]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[R,[P,tt],[O,B]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[R,[P,G],[O,B]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[R,[P,G],[O,V]],[/(macintosh);/i],[R,[P,G]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[R,[P,"Sharp"],[O,B]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[R,[P,"Huawei"],[O,V]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[R,[P,"Huawei"],[O,B]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[R,/_/g," "],[P,ft],[O,B]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[R,/_/g," "],[P,ft],[O,V]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[R,[P,"OPPO"],[O,B]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[R,[P,"Vivo"],[O,B]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[R,[P,"Realme"],[O,B]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[R,[P,ve],[O,B]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[R,[P,ve],[O,V]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[R,[P,"LG"],[O,V]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[R,[P,"LG"],[O,B]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[R,[P,"Lenovo"],[O,V]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[R,/_/g," "],[P,"Nokia"],[O,B]],[/(pixel c)\b/i],[R,[P,ye],[O,V]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[R,[P,ye],[O,B]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[R,[P,ct],[O,B]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[R,"Xperia Tablet"],[P,ct],[O,V]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[R,[P,"OnePlus"],[O,B]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[R,[P,ee],[O,V]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[R,/(.+)/g,"Fire Phone $1"],[P,ee],[O,B]],[/(playbook);[-\w\),; ]+(rim)/i],[R,P,[O,V]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[R,[P,te],[O,B]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[R,[P,E],[O,V]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[R,[P,E],[O,B]],[/(nexus 9)/i],[R,[P,"HTC"],[O,V]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[P,[R,/_/g," "],[O,B]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[R,[P,"Acer"],[O,V]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[R,[P,"Meizu"],[O,B]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[P,R,[O,B]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[P,R,[O,V]],[/(surface duo)/i],[R,[P,Ge],[O,V]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[R,[P,"Fairphone"],[O,B]],[/(u304aa)/i],[R,[P,"AT&T"],[O,B]],[/\bsie-(\w*)/i],[R,[P,"Siemens"],[O,B]],[/\b(rct\w+) b/i],[R,[P,"RCA"],[O,V]],[/\b(venue[\d ]{2,7}) b/i],[R,[P,"Dell"],[O,V]],[/\b(q(?:mv|ta)\w+) b/i],[R,[P,"Verizon"],[O,V]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[R,[P,"Barnes & Noble"],[O,V]],[/\b(tm\d{3}\w+) b/i],[R,[P,"NuVision"],[O,V]],[/\b(k88) b/i],[R,[P,"ZTE"],[O,V]],[/\b(nx\d{3}j) b/i],[R,[P,"ZTE"],[O,B]],[/\b(gen\d{3}) b.+49h/i],[R,[P,"Swiss"],[O,B]],[/\b(zur\d{3}) b/i],[R,[P,"Swiss"],[O,V]],[/\b((zeki)?tb.*\b) b/i],[R,[P,"Zeki"],[O,V]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[P,"Dragon Touch"],R,[O,V]],[/\b(ns-?\w{0,9}) b/i],[R,[P,"Insignia"],[O,V]],[/\b((nxa|next)-?\w{0,9}) b/i],[R,[P,"NextBook"],[O,V]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[P,"Voice"],R,[O,B]],[/\b(lvtel\-)?(v1[12]) b/i],[[P,"LvTel"],R,[O,B]],[/\b(ph-1) /i],[R,[P,"Essential"],[O,B]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[R,[P,"Envizen"],[O,V]],[/\b(trio[-\w\. ]+) b/i],[R,[P,"MachSpeed"],[O,V]],[/\btu_(1491) b/i],[R,[P,"Rotor"],[O,V]],[/(shield[\w ]+) b/i],[R,[P,"Nvidia"],[O,V]],[/(sprint) (\w+)/i],[P,R,[O,B]],[/(kin\.[onetw]{3})/i],[[R,/\./g," "],[P,Ge],[O,B]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[R,[P,qt],[O,V]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[R,[P,qt],[O,B]],[/smart-tv.+(samsung)/i],[P,[O,Q]],[/hbbtv.+maple;(\d+)/i],[[R,/^/,"SmartTV"],[P,tt],[O,Q]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[P,"LG"],[O,Q]],[/(apple) ?tv/i],[P,[R,G+" TV"],[O,Q]],[/crkey/i],[[R,ue+"cast"],[P,ye],[O,Q]],[/droid.+aft(\w)( bui|\))/i],[R,[P,ee],[O,Q]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[R,[P,"Sharp"],[O,Q]],[/(bravia[\w ]+)( bui|\))/i],[R,[P,ct],[O,Q]],[/(mitv-\w{5}) bui/i],[R,[P,ft],[O,Q]],[/Hbbtv.*(technisat) (.*);/i],[P,R,[O,Q]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[P,ke],[R,ke],[O,Q]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[O,Q]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[P,R,[O,M]],[/droid.+; (shield) bui/i],[R,[P,"Nvidia"],[O,M]],[/(playstation [345portablevi]+)/i],[R,[P,ct],[O,M]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[R,[P,Ge],[O,M]],[/((pebble))app/i],[P,R,[O,Y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[R,[P,G],[O,Y]],[/droid.+; (glass) \d/i],[R,[P,ye],[O,Y]],[/droid.+; (wt63?0{2,3})\)/i],[R,[P,qt],[O,Y]],[/(quest( 2| pro)?)/i],[R,[P,en],[O,Y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[P,[O,fe]],[/(aeobc)\b/i],[R,[P,ee],[O,fe]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[R,[O,B]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[R,[O,V]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[O,V]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[O,B]],[/(android[-\w\. ]{0,9});.+buil/i],[R,[P,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[U,[k,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[U,[k,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[k,U],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[U,k]],os:[[/microsoft (windows) (vista|xp)/i],[k,U],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[k,[U,Se,Xe]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[k,"Windows"],[U,Se,Xe]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[U,/_/g,"."],[k,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[k,"Mac OS"],[U,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[U,k],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[k,U],[/\(bb(10);/i],[U,[k,te]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[U,[k,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[U,[k,we+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[U,[k,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[U,[k,"watchOS"]],[/crkey\/([\d\.]+)/i],[U,[k,ue+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[k,xt],U],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[k,U],[/(sunos) ?([\w\.\d]*)/i],[[k,"Solaris"],U],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[k,U]]},Je=function(Ze,oe){if(typeof Ze===b&&(oe=Ze,Ze=h),!(this instanceof Je))return new Je(Ze,oe).getResult();var ie=typeof e!==x&&e.navigator?e.navigator:h,L=Ze||(ie&&ie.userAgent?ie.userAgent:""),ne=ie&&ie.userAgentData?ie.userAgentData:h,Ne=oe?function(Ze,oe){var ie={};for(var L in Ze)ie[L]=oe[L]&&oe[L].length%2==0?oe[L].concat(Ze[L]):Ze[L];return ie}(Ke,oe):Ke,ze=ie&&ie.userAgent==L;return this.getBrowser=function(){var et={};return et[k]=h,et[U]=h,Re.call(et,L,Ne.browser),et[N]=function(Ze){return typeof Ze===g?Ze.replace(/[^\d\.]/g,"").split(".")[0]:h}(et[U]),ze&&ie&&ie.brave&&typeof ie.brave.isBrave==f&&(et[k]="Brave"),et},this.getCPU=function(){var et={};return et[W]=h,Re.call(et,L,Ne.cpu),et},this.getDevice=function(){var et={};return et[P]=h,et[R]=h,et[O]=h,Re.call(et,L,Ne.device),ze&&!et[O]&&ne&&ne.mobile&&(et[O]=B),ze&&"Macintosh"==et[R]&&ie&&typeof ie.standalone!==x&&ie.maxTouchPoints&&ie.maxTouchPoints>2&&(et[R]="iPad",et[O]=V),et},this.getEngine=function(){var et={};return et[k]=h,et[U]=h,Re.call(et,L,Ne.engine),et},this.getOS=function(){var et={};return et[k]=h,et[U]=h,Re.call(et,L,Ne.os),ze&&!et[k]&&ne&&"Unknown"!=ne.platform&&(et[k]=ne.platform.replace(/chrome os/i,xt).replace(/macos/i,"Mac OS")),et},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return L},this.setUA=function(et){return L=typeof et===g&&et.length>350?ke(et,350):et,this},this.setUA(L),this};Je.VERSION="1.0.35",Je.BROWSER=j([k,U,N]),Je.CPU=j([W]),Je.DEVICE=j([R,P,O,M,B,Q,V,Y,fe]),Je.ENGINE=Je.OS=j([k,U]),typeof _e!==x?(nt.exports&&(_e=nt.exports=Je),_e.UAParser=Je):m.amdO?(n=function(){return Je}.call(_e,m,_e,nt))!==h&&(nt.exports=n):typeof e!==x&&(e.UAParser=Je);var Ct=typeof e!==x&&(e.jQuery||e.Zepto);if(Ct&&!Ct.ua){var ht=new Je;Ct.ua=ht.getResult(),Ct.ua.get=function(){return ht.getUA()},Ct.ua.set=function(Ze){ht.setUA(Ze);var oe=ht.getResult();for(var ie in oe)Ct.ua[ie]=oe[ie]}}}("object"==typeof window?window:this)},317:function(nt,_e){var m,e;!function(h,S){"use strict";m=function(h){return function(y){y=y||{},function f(){y.arrayAccessForm=y.arrayAccessForm||"none",y.emptyNodeForm=y.emptyNodeForm||"text",y.jsAttributeFilter=y.jsAttributeFilter,y.jsAttributeConverter=y.jsAttributeConverter,y.attributeConverters=y.attributeConverters||[],y.datetimeAccessFormPaths=y.datetimeAccessFormPaths||[],y.arrayAccessFormPaths=y.arrayAccessFormPaths||[],y.xmldomOptions=y.xmldomOptions||{},void 0===y.enableToStringFunc&&(y.enableToStringFunc=!0),void 0===y.skipEmptyTextNodesForObj&&(y.skipEmptyTextNodesForObj=!0),void 0===y.stripWhitespaces&&(y.stripWhitespaces=!0),void 0===y.useDoubleQuotes&&(y.useDoubleQuotes=!0),void 0===y.ignoreRoot&&(y.ignoreRoot=!1),void 0===y.escapeMode&&(y.escapeMode=!0),void 0===y.attributePrefix&&(y.attributePrefix="_"),void 0===y.selfClosingElements&&(y.selfClosingElements=!0),void 0===y.keepCData&&(y.keepCData=!1),void 0===y.keepText&&(y.keepText=!1),void 0===y.jsDateUTC&&(y.jsDateUTC=!1)}(),function x(){function we(ye){var qe=String(ye);return 1===qe.length&&(qe="0"+qe),qe}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),"function"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+we(this.getUTCMonth()+1)+"-"+we(this.getUTCDate())+"T"+we(this.getUTCHours())+":"+we(this.getUTCMinutes())+":"+we(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}();var b_ELEMENT_NODE=1,b_TEXT_NODE=3,b_CDATA_SECTION_NODE=4,b_COMMENT_NODE=8,b_DOCUMENT_NODE=9;function g(we){var ye=we.localName;return null==ye&&(ye=we.baseName),(null==ye||""===ye)&&(ye=we.nodeName),ye}function R(we){return"string"==typeof we?we.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"):we}function O(we,ye,qe){if("property"===y.arrayAccessForm&&(we[ye+"_asArray"]=we[ye]instanceof Array?we[ye]:[we[ye]]),!(we[ye]instanceof Array)&&y.arrayAccessFormPaths.length>0){for(var De=!1,Ge=0;Ge<y.arrayAccessFormPaths.length;Ge++){var ve=y.arrayAccessFormPaths[Ge];if("string"==typeof ve){if(ve===qe){De=!0;break}}else if(ve instanceof RegExp){if(ve.test(qe)){De=!0;break}}else if("function"==typeof ve&&ve(ye,qe)){De=!0;break}}De&&(we[ye]=[we[ye]])}}function P(we){var qe=we.split(/[-T:+Z]/g),De=new Date(qe[0],qe[1]-1,qe[2]),Ge=qe[5].split(".");if(De.setHours(qe[3],qe[4],Ge[0]),Ge.length>1&&De.setMilliseconds(Ge[1]),qe[6]&&qe[7]){var ve=60*qe[6]+Number(qe[7]);ve=0+("-"==(/\d\d-\d\d:\d\d$/.test(we)?"-":"+")?-1*ve:ve),De.setMinutes(De.getMinutes()-ve-De.getTimezoneOffset())}else-1!==we.indexOf("Z",we.length-1)&&(De=new Date(Date.UTC(De.getFullYear(),De.getMonth(),De.getDate(),De.getHours(),De.getMinutes(),De.getSeconds(),De.getMilliseconds())));return De}function M(we,ye){for(var qe={__cnt:0},De=we.childNodes,Ge=0;Ge<De.length;Ge++){var ve=De.item(Ge),c=g(ve);ve.nodeType!==b_COMMENT_NODE&&(qe.__cnt++,null==qe[c]?(qe[c]=B(ve,ye+"."+c),O(qe,c,ye+"."+c)):(qe[c]instanceof Array||(qe[c]=[qe[c]],O(qe,c,ye+"."+c)),qe[c][qe[c].length]=B(ve,ye+"."+c)))}for(var tt=0;tt<we.attributes.length;tt++){var _t=we.attributes.item(tt);qe.__cnt++;for(var ct=_t.value,rt=0;rt<y.attributeConverters.length;rt++){var ft=y.attributeConverters[rt];ft.test.call(null,_t.name,_t.value)&&(ct=ft.convert.call(null,_t.name,_t.value))}qe[y.attributePrefix+_t.name]=ct}var qt=function N(we){return we.prefix}(we);return qt&&(qe.__cnt++,qe.__prefix=qt),qe["#text"]&&(qe.__text=qe["#text"],qe.__text instanceof Array&&(qe.__text=qe.__text.join("\n")),y.escapeMode&&(qe.__text=function k(we){return we.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&amp;/g,"&")}(qe.__text)),y.stripWhitespaces&&(qe.__text=qe.__text.trim()),delete qe["#text"],"property"===y.arrayAccessForm&&delete qe["#text_asArray"],qe.__text=function U(we,ye,qe){if(y.datetimeAccessFormPaths.length>0)for(var De=qe.split(".#")[0],Ge=0;Ge<y.datetimeAccessFormPaths.length;Ge++){var ve=y.datetimeAccessFormPaths[Ge];if("string"==typeof ve){if(ve===De)return P(we)}else if(ve instanceof RegExp){if(ve.test(De))return P(we)}else if("function"==typeof ve&&ve(De))return P(we)}return we}(qe.__text,0,ye+".#text")),qe.hasOwnProperty("#cdata-section")&&(qe.__cdata=qe["#cdata-section"],delete qe["#cdata-section"],"property"===y.arrayAccessForm&&delete qe["#cdata-section_asArray"]),1===qe.__cnt&&qe.__text&&!y.keepText?qe=qe.__text:0===qe.__cnt&&"text"===y.emptyNodeForm?qe="":qe.__cnt>1&&void 0!==qe.__text&&y.skipEmptyTextNodesForObj&&(y.stripWhitespaces&&""===qe.__text||""===qe.__text.trim())&&delete qe.__text,delete qe.__cnt,y.keepCData||qe.hasOwnProperty("__text")||!qe.hasOwnProperty("__cdata")||1!==Object.keys(qe).length?(y.enableToStringFunc&&(qe.__text||qe.__cdata)&&(qe.toString=function(){return(this.__text?this.__text:"")+(this.__cdata?this.__cdata:"")}),qe):qe.__cdata?qe.__cdata:""}function B(we,ye){return we.nodeType===b_DOCUMENT_NODE?function W(we){for(var ye={},qe=we.childNodes,De=0;De<qe.length;De++){var Ge=qe.item(De);if(Ge.nodeType===b_ELEMENT_NODE){var ve=g(Ge);y.ignoreRoot?ye=B(Ge,ve):ye[ve]=B(Ge,ve)}}return ye}(we):we.nodeType===b_ELEMENT_NODE?M(we,ye):we.nodeType===b_TEXT_NODE||we.nodeType===b_CDATA_SECTION_NODE?we.nodeValue:null}function V(we,ye,qe,De){var Ge="<"+(we&&we.__prefix?we.__prefix+":":"")+ye;if(qe)for(var ve=0;ve<qe.length;ve++){var c=qe[ve],tt=we[c];y.escapeMode&&(tt=R(tt)),Ge+=" "+c.substr(y.attributePrefix.length)+"=",Ge+=y.useDoubleQuotes?'"'+tt+'"':"'"+tt+"'"}return Ge+(De?" />":">")}function Q(we,ye){return"</"+(we&&we.__prefix?we.__prefix+":":"")+ye+">"}function fe(we,ye){return!!("property"===y.arrayAccessForm&&function Y(we,ye){return-1!==we.indexOf(ye,we.length-ye.length)}(ye.toString(),"_asArray")||0===ye.toString().indexOf(y.attributePrefix)||0===ye.toString().indexOf("__")||we[ye]instanceof Function)}function J(we){var ye=0;if(we instanceof Object)for(var qe in we)fe(we,qe)||ye++;return ye}function ee(we){var ye=[];if(we instanceof Object)for(var qe in we)-1===qe.toString().indexOf("__")&&0===qe.toString().indexOf(y.attributePrefix)&&ye.push(qe);return ye}function E(we){var ye="";return we instanceof Object?ye+=function G(we){var ye="";return we.__cdata&&(ye+="<![CDATA["+we.__cdata+"]]>"),(we.__text||"number"==typeof we.__text||"boolean"==typeof we.__text)&&(ye+=y.escapeMode?R(we.__text):we.__text),ye}(we):null!==we&&(ye+=y.escapeMode?R(we):we),ye}function $(we,ye,qe){var De="";return y.jsAttributeFilter&&y.jsAttributeFilter.call(null,ye,we)||(y.jsAttributeConverter&&(we=y.jsAttributeConverter.call(null,ye,we)),null!=we&&""!==we||!y.selfClosingElements?"object"==typeof we?"[object Array]"===Object.prototype.toString.call(we)?De+=function te(we,ye,qe){var De="";if(0===we.length)De+=V(we,ye,qe,!0);else for(var Ge=0;Ge<we.length;Ge++)De+=$(we[Ge],ye,ee(we[Ge]));return De}(we,ye,qe):we instanceof Date?(De+=V(we,ye,qe,!1),De+=y.jsDateUTC?we.toUTCString():we.toISOString(),De+=Q(we,ye)):J(we)>0||"number"==typeof we.__text||"boolean"==typeof we.__text||we.__text||we.__cdata?(De+=V(we,ye,qe,!1),De+=ue(we),De+=Q(we,ye)):y.selfClosingElements?De+=V(we,ye,qe,!0):(De+=V(we,ye,qe,!1),De+=Q(we,ye)):(De+=V(we,ye,qe,!1),De+=E(we),De+=Q(we,ye)):De+=V(we,ye,qe,!0)),De}function ue(we){var ye="";if(J(we)>0)for(var De in we)if(!fe(we,De)){var Ge=we[De];ye+=$(Ge,De,ee(Ge))}return ye+E(we)}function me(we){if(void 0===we||"string"!=typeof we)return null;var ye=null,qe=null;if(h)qe=(ye=new h(y.xmldomOptions)).parseFromString(we,"text/xml");else if(window&&window.DOMParser){ye=new window.DOMParser;var De=null;if(!window.ActiveXObject&&!("ActiveXObject"in window)&&document.all&&!document.addEventListener)try{De=ye.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch{De=null}try{qe=ye.parseFromString(we,"text/xml"),null!==De&&qe.getElementsByTagNameNS(De,"parsererror").length>0&&(qe=null)}catch{qe=null}}else 0===we.indexOf("<?")&&(we=we.substr(we.indexOf("?>")+2)),(qe=new ActiveXObject("Microsoft.XMLDOM")).async="false",qe.loadXML(we);return qe}this.asArray=function(ye){return null==ye?[]:ye instanceof Array?ye:[ye]},this.toXmlDateTime=function(ye){return ye instanceof Date?ye.toISOString():"number"==typeof ye?new Date(ye).toISOString():null},this.asDateTime=function(ye){return"string"==typeof ye?P(ye):ye},this.xml2dom=function(ye){return me(ye)},this.dom2js=function(ye){return B(ye,null)},this.js2dom=function(ye){return me(this.js2xml(ye))},this.xml2js=function(ye){var qe=me(ye);return null!=qe?this.dom2js(qe):null},this.js2xml=function(ye){return ue(ye)},this.getVersion=function(){return"3.4.0"}}},void 0!==(e=m.apply(_e,[]))&&(nt.exports=e)}()},655:(nt,_e,m)=>{"use strict";function y(te,$,ue,me){var qe,we=arguments.length,ye=we<3?$:null===me?me=Object.getOwnPropertyDescriptor($,ue):me;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)ye=Reflect.decorate(te,$,ue,me);else for(var De=te.length-1;De>=0;De--)(qe=te[De])&&(ye=(we<3?qe(ye):we>3?qe($,ue,ye):qe($,ue))||ye);return we>3&&ye&&Object.defineProperty($,ue,ye),ye}function f(te,$){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(te,$)}function x(te,$,ue,me){return new(ue||(ue=Promise))(function(ye,qe){function De(c){try{ve(me.next(c))}catch(tt){qe(tt)}}function Ge(c){try{ve(me.throw(c))}catch(tt){qe(tt)}}function ve(c){c.done?ye(c.value):function we(ye){return ye instanceof ue?ye:new ue(function(qe){qe(ye)})}(c.value).then(De,Ge)}ve((me=me.apply(te,$||[])).next())})}function W(te){return this instanceof W?(this.v=te,this):new W(te)}function M(te,$,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,me=ue.apply(te,$||[]),ye=[];return we={},qe("next"),qe("throw"),qe("return"),we[Symbol.asyncIterator]=function(){return this},we;function qe(_t){me[_t]&&(we[_t]=function(ct){return new Promise(function(rt,ft){ye.push([_t,ct,rt,ft])>1||De(_t,ct)})})}function De(_t,ct){try{!function Ge(_t){_t.value instanceof W?Promise.resolve(_t.value.v).then(ve,c):tt(ye[0][2],_t)}(me[_t](ct))}catch(rt){tt(ye[0][3],rt)}}function ve(_t){De("next",_t)}function c(_t){De("throw",_t)}function tt(_t,ct){_t(ct),ye.shift(),ye.length&&De(ye[0][0],ye[0][1])}}function V(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,$=te[Symbol.asyncIterator];return $?$.call(te):(te=function R(te){var $="function"==typeof Symbol&&Symbol.iterator,ue=$&&te[$],me=0;if(ue)return ue.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&me>=te.length&&(te=void 0),{value:te&&te[me++],done:!te}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),ue={},me("next"),me("throw"),me("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function me(ye){ue[ye]=te[ye]&&function(qe){return new Promise(function(De,Ge){!function we(ye,qe,De,Ge){Promise.resolve(Ge).then(function(ve){ye({value:ve,done:De})},qe)}(De,Ge,(qe=te[ye](qe)).done,qe.value)})}}}m.d(_e,{FC:()=>M,KL:()=>V,gn:()=>y,mG:()=>x,qq:()=>W,w6:()=>f})},5819:()=>{},7340:(nt,_e,m)=>{"use strict";m.d(_e,{LC:()=>e,SB:()=>b,X$:()=>S,ZE:()=>B,ZN:()=>M,_j:()=>n,eR:()=>N,jt:()=>y,k1:()=>V,l3:()=>h,oB:()=>x,vP:()=>f});class n{}class e{}const h="*";function S(Q,Y){return{type:7,name:Q,definitions:Y,options:{}}}function y(Q,Y=null){return{type:4,styles:Y,timings:Q}}function f(Q,Y=null){return{type:2,steps:Q,options:Y}}function x(Q){return{type:6,styles:Q,offset:null}}function b(Q,Y,fe){return{type:0,name:Q,styles:Y,options:fe}}function N(Q,Y,fe=null){return{type:1,expr:Q,animation:Y,options:fe}}function W(Q){Promise.resolve().then(Q)}class M{constructor(Y=0,fe=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Y+fe}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Y=>Y()),this._onDoneFns=[])}onStart(Y){this._originalOnStartFns.push(Y),this._onStartFns.push(Y)}onDone(Y){this._originalOnDoneFns.push(Y),this._onDoneFns.push(Y)}onDestroy(Y){this._onDestroyFns.push(Y)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){W(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Y=>Y()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Y=>Y()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Y){this._position=this.totalTime?Y*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Y){const fe="start"==Y?this._onStartFns:this._onDoneFns;fe.forEach(J=>J()),fe.length=0}}class B{constructor(Y){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Y;let fe=0,J=0,ee=0;const G=this.players.length;0==G?W(()=>this._onFinish()):this.players.forEach(E=>{E.onDone(()=>{++fe==G&&this._onFinish()}),E.onDestroy(()=>{++J==G&&this._onDestroy()}),E.onStart(()=>{++ee==G&&this._onStart()})}),this.totalTime=this.players.reduce((E,te)=>Math.max(E,te.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Y=>Y()),this._onDoneFns=[])}init(){this.players.forEach(Y=>Y.init())}onStart(Y){this._onStartFns.push(Y)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Y=>Y()),this._onStartFns=[])}onDone(Y){this._onDoneFns.push(Y)}onDestroy(Y){this._onDestroyFns.push(Y)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Y=>Y.play())}pause(){this.players.forEach(Y=>Y.pause())}restart(){this.players.forEach(Y=>Y.restart())}finish(){this._onFinish(),this.players.forEach(Y=>Y.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Y=>Y.destroy()),this._onDestroyFns.forEach(Y=>Y()),this._onDestroyFns=[])}reset(){this.players.forEach(Y=>Y.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Y){const fe=Y*this.totalTime;this.players.forEach(J=>{const ee=J.totalTime?Math.min(1,fe/J.totalTime):1;J.setPosition(ee)})}getPosition(){const Y=this.players.reduce((fe,J)=>null===fe||J.totalTime>fe.totalTime?J:fe,null);return null!=Y?Y.getPosition():0}beforeDestroy(){this.players.forEach(Y=>{Y.beforeDestroy&&Y.beforeDestroy()})}triggerCallback(Y){const fe="start"==Y?this._onStartFns:this._onDoneFns;fe.forEach(J=>J()),fe.length=0}}const V="!"},6895:(nt,_e,m)=>{"use strict";m.d(_e,{Do:()=>V,EM:()=>xs,HT:()=>y,JF:()=>Us,JJ:()=>Sr,K0:()=>f,Mx:()=>Tr,NF:()=>Wr,Nd:()=>Rn,O5:()=>Mt,OU:()=>ls,S$:()=>W,V_:()=>g,Ye:()=>Q,b0:()=>B,bD:()=>cs,ez:()=>_r,gd:()=>ho,mk:()=>Vn,q:()=>h,sg:()=>Ve,tP:()=>Fi,w_:()=>w});var n=m(4650);let e=null;function h(){return e}function y(de){e||(e=de)}class w{}const f=new n.OlP("DocumentToken");let x=(()=>{class de{historyGo(ge){throw new Error("Not implemented")}}return de.\u0275fac=function(ge){return new(ge||de)},de.\u0275prov=n.Yz7({token:de,factory:function(){return function b(){return(0,n.LFG)(N)}()},providedIn:"platform"}),de})();const g=new n.OlP("Location Initialized");let N=(()=>{class de extends x{constructor(ge){super(),this._doc=ge,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return h().getBaseHref(this._doc)}onPopState(ge){const He=h().getGlobalEventTarget(this._doc,"window");return He.addEventListener("popstate",ge,!1),()=>He.removeEventListener("popstate",ge)}onHashChange(ge){const He=h().getGlobalEventTarget(this._doc,"window");return He.addEventListener("hashchange",ge,!1),()=>He.removeEventListener("hashchange",ge)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(ge){this.location.pathname=ge}pushState(ge,He,ot){R()?this._history.pushState(ge,He,ot):this.location.hash=ot}replaceState(ge,He,ot){R()?this._history.replaceState(ge,He,ot):this.location.hash=ot}forward(){this._history.forward()}back(){this._history.back()}historyGo(ge=0){this._history.go(ge)}getState(){return this._history.state}}return de.\u0275fac=function(ge){return new(ge||de)(n.LFG(f))},de.\u0275prov=n.Yz7({token:de,factory:function(){return function k(){return new N((0,n.LFG)(f))}()},providedIn:"platform"}),de})();function R(){return!!window.history.pushState}function O(de,Oe){if(0==de.length)return Oe;if(0==Oe.length)return de;let ge=0;return de.endsWith("/")&&ge++,Oe.startsWith("/")&&ge++,2==ge?de+Oe.substring(1):1==ge?de+Oe:de+"/"+Oe}function P(de){const Oe=de.match(/#|\?|$/),ge=Oe&&Oe.index||de.length;return de.slice(0,ge-("/"===de[ge-1]?1:0))+de.slice(ge)}function U(de){return de&&"?"!==de[0]?"?"+de:de}let W=(()=>{class de{historyGo(ge){throw new Error("Not implemented")}}return de.\u0275fac=function(ge){return new(ge||de)},de.\u0275prov=n.Yz7({token:de,factory:function(){return(0,n.f3M)(B)},providedIn:"root"}),de})();const M=new n.OlP("appBaseHref");let B=(()=>{class de extends W{constructor(ge,He){var ot,Vt,zt;super(),this._platformLocation=ge,this._removeListenerFns=[],this._baseHref=null!==(ot=null!==(Vt=He??this._platformLocation.getBaseHrefFromDOM())&&void 0!==Vt?Vt:null===(zt=(0,n.f3M)(f).location)||void 0===zt?void 0:zt.origin)&&void 0!==ot?ot:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(ge){this._removeListenerFns.push(this._platformLocation.onPopState(ge),this._platformLocation.onHashChange(ge))}getBaseHref(){return this._baseHref}prepareExternalUrl(ge){return O(this._baseHref,ge)}path(ge=!1){const He=this._platformLocation.pathname+U(this._platformLocation.search),ot=this._platformLocation.hash;return ot&&ge?`${He}${ot}`:He}pushState(ge,He,ot,Vt){const zt=this.prepareExternalUrl(ot+U(Vt));this._platformLocation.pushState(ge,He,zt)}replaceState(ge,He,ot,Vt){const zt=this.prepareExternalUrl(ot+U(Vt));this._platformLocation.replaceState(ge,He,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(ge=0){var He,ot;null===(He=(ot=this._platformLocation).historyGo)||void 0===He||He.call(ot,ge)}}return de.\u0275fac=function(ge){return new(ge||de)(n.LFG(x),n.LFG(M,8))},de.\u0275prov=n.Yz7({token:de,factory:de.\u0275fac,providedIn:"root"}),de})(),V=(()=>{class de extends W{constructor(ge,He){super(),this._platformLocation=ge,this._baseHref="",this._removeListenerFns=[],null!=He&&(this._baseHref=He)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(ge){this._removeListenerFns.push(this._platformLocation.onPopState(ge),this._platformLocation.onHashChange(ge))}getBaseHref(){return this._baseHref}path(ge=!1){let He=this._platformLocation.hash;return null==He&&(He="#"),He.length>0?He.substring(1):He}prepareExternalUrl(ge){const He=O(this._baseHref,ge);return He.length>0?"#"+He:He}pushState(ge,He,ot,Vt){let zt=this.prepareExternalUrl(ot+U(Vt));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.pushState(ge,He,zt)}replaceState(ge,He,ot,Vt){let zt=this.prepareExternalUrl(ot+U(Vt));0==zt.length&&(zt=this._platformLocation.pathname),this._platformLocation.replaceState(ge,He,zt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(ge=0){var He,ot;null===(He=(ot=this._platformLocation).historyGo)||void 0===He||He.call(ot,ge)}}return de.\u0275fac=function(ge){return new(ge||de)(n.LFG(x),n.LFG(M,8))},de.\u0275prov=n.Yz7({token:de,factory:de.\u0275fac}),de})(),Q=(()=>{class de{constructor(ge){this._subject=new n.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=ge;const He=this._locationStrategy.getBaseHref();this._baseHref=P(J(He)),this._locationStrategy.onPopState(ot=>{this._subject.emit({url:this.path(!0),pop:!0,state:ot.state,type:ot.type})})}ngOnDestroy(){var ge;null===(ge=this._urlChangeSubscription)||void 0===ge||ge.unsubscribe(),this._urlChangeListeners=[]}path(ge=!1){return this.normalize(this._locationStrategy.path(ge))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(ge,He=""){return this.path()==this.normalize(ge+U(He))}normalize(ge){return de.stripTrailingSlash(function fe(de,Oe){return de&&Oe.startsWith(de)?Oe.substring(de.length):Oe}(this._baseHref,J(ge)))}prepareExternalUrl(ge){return ge&&"/"!==ge[0]&&(ge="/"+ge),this._locationStrategy.prepareExternalUrl(ge)}go(ge,He="",ot=null){this._locationStrategy.pushState(ot,"",ge,He),this._notifyUrlChangeListeners(this.prepareExternalUrl(ge+U(He)),ot)}replaceState(ge,He="",ot=null){this._locationStrategy.replaceState(ot,"",ge,He),this._notifyUrlChangeListeners(this.prepareExternalUrl(ge+U(He)),ot)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(ge=0){var He,ot;null===(He=(ot=this._locationStrategy).historyGo)||void 0===He||He.call(ot,ge)}onUrlChange(ge){return this._urlChangeListeners.push(ge),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(He=>{this._notifyUrlChangeListeners(He.url,He.state)})),()=>{const He=this._urlChangeListeners.indexOf(ge);var ot;this._urlChangeListeners.splice(He,1),0===this._urlChangeListeners.length&&(null===(ot=this._urlChangeSubscription)||void 0===ot||ot.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(ge="",He){this._urlChangeListeners.forEach(ot=>ot(ge,He))}subscribe(ge,He,ot){return this._subject.subscribe({next:ge,error:He,complete:ot})}}return de.normalizeQueryParams=U,de.joinWithSlash=O,de.stripTrailingSlash=P,de.\u0275fac=function(ge){return new(ge||de)(n.LFG(W))},de.\u0275prov=n.Yz7({token:de,factory:function(){return function Y(){return new Q((0,n.LFG)(W))}()},providedIn:"root"}),de})();function J(de){return de.replace(/\/index.html$/,"")}var G=(()=>((G=G||{})[G.Decimal=0]="Decimal",G[G.Percent=1]="Percent",G[G.Currency=2]="Currency",G[G.Scientific=3]="Scientific",G))(),me=(()=>((me=me||{})[me.Decimal=0]="Decimal",me[me.Group=1]="Group",me[me.List=2]="List",me[me.PercentSign=3]="PercentSign",me[me.PlusSign=4]="PlusSign",me[me.MinusSign=5]="MinusSign",me[me.Exponential=6]="Exponential",me[me.SuperscriptingExponent=7]="SuperscriptingExponent",me[me.PerMille=8]="PerMille",me[me.Infinity=9]="Infinity",me[me.NaN=10]="NaN",me[me.TimeSeparator=11]="TimeSeparator",me[me.CurrencyDecimal=12]="CurrencyDecimal",me[me.CurrencyGroup=13]="CurrencyGroup",me))();function ft(de,Oe){const ge=(0,n.cg1)(de),He=ge[n.wAp.NumberSymbols][Oe];if(typeof He>"u"){if(Oe===me.CurrencyDecimal)return ge[n.wAp.NumberSymbols][me.Decimal];if(Oe===me.CurrencyGroup)return ge[n.wAp.NumberSymbols][me.Group]}return He}const Zn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Gi(de){const Oe=parseInt(de);if(isNaN(Oe))throw new Error("Invalid integer literal when parsing "+de);return Oe}function Tr(de,Oe){Oe=encodeURIComponent(Oe);for(const ge of de.split(";")){const He=ge.indexOf("="),[ot,Vt]=-1==He?[ge,""]:[ge.slice(0,He),ge.slice(He+1)];if(ot.trim()===Oe)return decodeURIComponent(Vt)}return null}let Vn=(()=>{class de{constructor(ge,He,ot,Vt){this._iterableDiffers=ge,this._keyValueDiffers=He,this._ngEl=ot,this._renderer=Vt,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(ge){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof ge?ge.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(ge){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof ge?ge.split(/\s+/):ge,this._rawClass&&((0,n.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const ge=this._iterableDiffer.diff(this._rawClass);ge&&this._applyIterableChanges(ge)}else if(this._keyValueDiffer){const ge=this._keyValueDiffer.diff(this._rawClass);ge&&this._applyKeyValueChanges(ge)}}_applyKeyValueChanges(ge){ge.forEachAddedItem(He=>this._toggleClass(He.key,He.currentValue)),ge.forEachChangedItem(He=>this._toggleClass(He.key,He.currentValue)),ge.forEachRemovedItem(He=>{He.previousValue&&this._toggleClass(He.key,!1)})}_applyIterableChanges(ge){ge.forEachAddedItem(He=>{if("string"!=typeof He.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,n.AaK)(He.item)}`);this._toggleClass(He.item,!0)}),ge.forEachRemovedItem(He=>this._toggleClass(He.item,!1))}_applyClasses(ge){ge&&(Array.isArray(ge)||ge instanceof Set?ge.forEach(He=>this._toggleClass(He,!0)):Object.keys(ge).forEach(He=>this._toggleClass(He,!!ge[He])))}_removeClasses(ge){ge&&(Array.isArray(ge)||ge instanceof Set?ge.forEach(He=>this._toggleClass(He,!1)):Object.keys(ge).forEach(He=>this._toggleClass(He,!1)))}_toggleClass(ge,He){(ge=ge.trim())&&ge.split(/\s+/g).forEach(ot=>{He?this._renderer.addClass(this._ngEl.nativeElement,ot):this._renderer.removeClass(this._ngEl.nativeElement,ot)})}}return de.\u0275fac=function(ge){return new(ge||de)(n.Y36(n.ZZ4),n.Y36(n.aQg),n.Y36(n.SBq),n.Y36(n.Qsj))},de.\u0275dir=n.lG2({type:de,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),de})();class ws{constructor(Oe,ge,He,ot){this.$implicit=Oe,this.ngForOf=ge,this.index=He,this.count=ot}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ve=(()=>{class de{constructor(ge,He,ot){this._viewContainer=ge,this._template=He,this._differs=ot,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(ge){this._ngForOf=ge,this._ngForOfDirty=!0}set ngForTrackBy(ge){this._trackByFn=ge}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(ge){ge&&(this._template=ge)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const ge=this._ngForOf;!this._differ&&ge&&(this._differ=this._differs.find(ge).create(this.ngForTrackBy))}if(this._differ){const ge=this._differ.diff(this._ngForOf);ge&&this._applyChanges(ge)}}_applyChanges(ge){const He=this._viewContainer;ge.forEachOperation((ot,Vt,zt)=>{if(null==ot.previousIndex)He.createEmbeddedView(this._template,new ws(ot.item,this._ngForOf,-1,-1),null===zt?void 0:zt);else if(null==zt)He.remove(null===Vt?void 0:Vt);else if(null!==Vt){const Pt=He.get(Vt);He.move(Pt,zt),We(Pt,ot)}});for(let ot=0,Vt=He.length;ot<Vt;ot++){const Pt=He.get(ot).context;Pt.index=ot,Pt.count=Vt,Pt.ngForOf=this._ngForOf}ge.forEachIdentityChange(ot=>{We(He.get(ot.currentIndex),ot)})}static ngTemplateContextGuard(ge,He){return!0}}return de.\u0275fac=function(ge){return new(ge||de)(n.Y36(n.s_b),n.Y36(n.Rgc),n.Y36(n.ZZ4))},de.\u0275dir=n.lG2({type:de,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),de})();function We(de,Oe){de.context.$implicit=Oe.item}let Mt=(()=>{class de{constructor(ge,He){this._viewContainer=ge,this._context=new nn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=He}set ngIf(ge){this._context.$implicit=this._context.ngIf=ge,this._updateView()}set ngIfThen(ge){rn("ngIfThen",ge),this._thenTemplateRef=ge,this._thenViewRef=null,this._updateView()}set ngIfElse(ge){rn("ngIfElse",ge),this._elseTemplateRef=ge,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(ge,He){return!0}}return de.\u0275fac=function(ge){return new(ge||de)(n.Y36(n.s_b),n.Y36(n.Rgc))},de.\u0275dir=n.lG2({type:de,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),de})();class nn{constructor(){this.$implicit=null,this.ngIf=null}}function rn(de,Oe){if(Oe&&!Oe.createEmbeddedView)throw new Error(`${de} must be a TemplateRef, but received '${(0,n.AaK)(Oe)}'.`)}let Fi=(()=>{class de{constructor(ge){this._viewContainerRef=ge,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(ge){if(ge.ngTemplateOutlet||ge.ngTemplateOutletInjector){const He=this._viewContainerRef;if(this._viewRef&&He.remove(He.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ot,ngTemplateOutletContext:Vt,ngTemplateOutletInjector:zt}=this;this._viewRef=He.createEmbeddedView(ot,Vt,zt?{injector:zt}:void 0)}else this._viewRef=null}else this._viewRef&&ge.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return de.\u0275fac=function(ge){return new(ge||de)(n.Y36(n.s_b))},de.\u0275dir=n.lG2({type:de,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[n.TTD]}),de})();function Zi(de,Oe){return new n.vHH(2100,!1)}let ho=(()=>{class de{transform(ge){if(null==ge)return null;if("string"!=typeof ge)throw Zi();return ge.toUpperCase()}}return de.\u0275fac=function(ge){return new(ge||de)},de.\u0275pipe=n.Yjl({name:"uppercase",type:de,pure:!0,standalone:!0}),de})(),Rn=(()=>{class de{constructor(ge){this.differs=ge,this.keyValues=[],this.compareFn=mr}transform(ge,He=mr){if(!ge||!(ge instanceof Map)&&"object"!=typeof ge)return null;this.differ||(this.differ=this.differs.find(ge).create());const ot=this.differ.diff(ge),Vt=He!==this.compareFn;return ot&&(this.keyValues=[],ot.forEachItem(zt=>{this.keyValues.push(function As(de,Oe){return{key:de,value:Oe}}(zt.key,zt.currentValue))})),(ot||Vt)&&(this.keyValues.sort(He),this.compareFn=He),this.keyValues}}return de.\u0275fac=function(ge){return new(ge||de)(n.Y36(n.aQg,16))},de.\u0275pipe=n.Yjl({name:"keyvalue",type:de,pure:!1,standalone:!0}),de})();function mr(de,Oe){const ge=de.key,He=Oe.key;if(ge===He)return 0;if(void 0===ge)return 1;if(void 0===He)return-1;if(null===ge)return 1;if(null===He)return-1;if("string"==typeof ge&&"string"==typeof He)return ge<He?-1:1;if("number"==typeof ge&&"number"==typeof He)return ge-He;if("boolean"==typeof ge&&"boolean"==typeof He)return ge<He?-1:1;const ot=String(ge),Vt=String(He);return ot==Vt?0:ot<Vt?-1:1}let Sr=(()=>{class de{constructor(ge){this._locale=ge}transform(ge,He,ot){if(!function Zr(de){return!(null==de||""===de||de!=de)}(ge))return null;ot=ot||this._locale;try{return function Nn(de,Oe,ge){return function Xn(de,Oe,ge,He,ot,Vt,zt=!1){let Pt="",gi=!1;if(isFinite(de)){let pi=function yi(de){let He,ot,Vt,zt,Pt,Oe=Math.abs(de)+"",ge=0;for((ot=Oe.indexOf("."))>-1&&(Oe=Oe.replace(".","")),(Vt=Oe.search(/e/i))>0?(ot<0&&(ot=Vt),ot+=+Oe.slice(Vt+1),Oe=Oe.substring(0,Vt)):ot<0&&(ot=Oe.length),Vt=0;"0"===Oe.charAt(Vt);Vt++);if(Vt===(Pt=Oe.length))He=[0],ot=1;else{for(Pt--;"0"===Oe.charAt(Pt);)Pt--;for(ot-=Vt,He=[],zt=0;Vt<=Pt;Vt++,zt++)He[zt]=Number(Oe.charAt(Vt))}return ot>22&&(He=He.splice(0,21),ge=ot-1,ot=1),{digits:He,exponent:ge,integerLen:ot}}(de);zt&&(pi=function ur(de){if(0===de.digits[0])return de;const Oe=de.digits.length-de.integerLen;return de.exponent?de.exponent+=2:(0===Oe?de.digits.push(0,0):1===Oe&&de.digits.push(0),de.integerLen+=2),de}(pi));let ti=Oe.minInt,Ut=Oe.minFrac,Un=Oe.maxFrac;if(Vt){const Wi=Vt.match(Zn);if(null===Wi)throw new Error(`${Vt} is not a valid digit info`);const Ri=Wi[1],Ds=Wi[3],fo=Wi[5];null!=Ri&&(ti=Gi(Ri)),null!=Ds&&(Ut=Gi(Ds)),null!=fo?Un=Gi(fo):null!=Ds&&Ut>Un&&(Un=Ut)}!function nr(de,Oe,ge){if(Oe>ge)throw new Error(`The minimum number of digits after fraction (${Oe}) is higher than the maximum (${ge}).`);let He=de.digits,ot=He.length-de.integerLen;const Vt=Math.min(Math.max(Oe,ot),ge);let zt=Vt+de.integerLen,Pt=He[zt];if(zt>0){He.splice(Math.max(de.integerLen,zt));for(let Ut=zt;Ut<He.length;Ut++)He[Ut]=0}else{ot=Math.max(0,ot),de.integerLen=1,He.length=Math.max(1,zt=Vt+1),He[0]=0;for(let Ut=1;Ut<zt;Ut++)He[Ut]=0}if(Pt>=5)if(zt-1<0){for(let Ut=0;Ut>zt;Ut--)He.unshift(0),de.integerLen++;He.unshift(1),de.integerLen++}else He[zt-1]++;for(;ot<Math.max(0,Vt);ot++)He.push(0);let gi=0!==Vt;const pi=Oe+de.integerLen,ti=He.reduceRight(function(Ut,Un,Ci,hr){return hr[Ci]=(Un+=Ut)<10?Un:Un-10,gi&&(0===hr[Ci]&&Ci>=pi?hr.pop():gi=!1),Un>=10?1:0},0);ti&&(He.unshift(ti),de.integerLen++)}(pi,Ut,Un);let Ci=pi.digits,hr=pi.integerLen;const Cr=pi.exponent;let sr=[];for(gi=Ci.every(Wi=>!Wi);hr<ti;hr++)Ci.unshift(0);for(;hr<0;hr++)Ci.unshift(0);hr>0?sr=Ci.splice(hr,Ci.length):(sr=Ci,Ci=[0]);const qs=[];for(Ci.length>=Oe.lgSize&&qs.unshift(Ci.splice(-Oe.lgSize,Ci.length).join(""));Ci.length>Oe.gSize;)qs.unshift(Ci.splice(-Oe.gSize,Ci.length).join(""));Ci.length&&qs.unshift(Ci.join("")),Pt=qs.join(ft(ge,He)),sr.length&&(Pt+=ft(ge,ot)+sr.join("")),Cr&&(Pt+=ft(ge,me.Exponential)+"+"+Cr)}else Pt=ft(ge,me.Infinity);return Pt=de<0&&!gi?Oe.negPre+Pt+Oe.negSuf:Oe.posPre+Pt+Oe.posSuf,Pt}(de,function mi(de,Oe="-"){const ge={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},He=de.split(";"),ot=He[0],Vt=He[1],zt=-1!==ot.indexOf(".")?ot.split("."):[ot.substring(0,ot.lastIndexOf("0")+1),ot.substring(ot.lastIndexOf("0")+1)],Pt=zt[0],gi=zt[1]||"";ge.posPre=Pt.substring(0,Pt.indexOf("#"));for(let ti=0;ti<gi.length;ti++){const Ut=gi.charAt(ti);"0"===Ut?ge.minFrac=ge.maxFrac=ti+1:"#"===Ut?ge.maxFrac=ti+1:ge.posSuf+=Ut}const pi=Pt.split(",");if(ge.gSize=pi[1]?pi[1].length:0,ge.lgSize=pi[2]||pi[1]?(pi[2]||pi[1]).length:0,Vt){const ti=ot.length-ge.posPre.length-ge.posSuf.length,Ut=Vt.indexOf("#");ge.negPre=Vt.substring(0,Ut).replace(/'/g,""),ge.negSuf=Vt.slice(Ut+ti).replace(/'/g,"")}else ge.negPre=Oe+ge.posPre,ge.negSuf=ge.posSuf;return ge}(function qt(de,Oe){return(0,n.cg1)(de)[n.wAp.NumberFormats][Oe]}(Oe,G.Decimal),ft(Oe,me.MinusSign)),Oe,me.Group,me.Decimal,ge)}(function gr(de){if("string"==typeof de&&!isNaN(Number(de)-parseFloat(de)))return Number(de);if("number"!=typeof de)throw new Error(`${de} is not a number`);return de}(ge),ot,He)}catch(Vt){throw Zi()}}}return de.\u0275fac=function(ge){return new(ge||de)(n.Y36(n.soG,16))},de.\u0275pipe=n.Yjl({name:"number",type:de,pure:!0,standalone:!0}),de})();let ls=(()=>{class de{transform(ge,He,ot){if(null==ge)return null;if(!this.supports(ge))throw Zi();return ge.slice(He,ot)}supports(ge){return"string"==typeof ge||Array.isArray(ge)}}return de.\u0275fac=function(ge){return new(ge||de)},de.\u0275pipe=n.Yjl({name:"slice",type:de,pure:!1,standalone:!0}),de})(),_r=(()=>{class de{}return de.\u0275fac=function(ge){return new(ge||de)},de.\u0275mod=n.oAB({type:de}),de.\u0275inj=n.cJS({}),de})();const cs="browser";function Wr(de){return de===cs}let xs=(()=>{class de{}return de.\u0275prov=(0,n.Yz7)({token:de,providedIn:"root",factory:()=>new To((0,n.LFG)(f),window)}),de})();class To{constructor(Oe,ge){this.document=Oe,this.window=ge,this.offset=()=>[0,0]}setOffset(Oe){this.offset=Array.isArray(Oe)?()=>Oe:Oe}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Oe){this.supportsScrolling()&&this.window.scrollTo(Oe[0],Oe[1])}scrollToAnchor(Oe){if(!this.supportsScrolling())return;const ge=function ss(de,Oe){const ge=de.getElementById(Oe)||de.getElementsByName(Oe)[0];if(ge)return ge;if("function"==typeof de.createTreeWalker&&de.body&&(de.body.createShadowRoot||de.body.attachShadow)){const He=de.createTreeWalker(de.body,NodeFilter.SHOW_ELEMENT);let ot=He.currentNode;for(;ot;){const Vt=ot.shadowRoot;if(Vt){const zt=Vt.getElementById(Oe)||Vt.querySelector(`[name="${Oe}"]`);if(zt)return zt}ot=He.nextNode()}}return null}(this.document,Oe);ge&&(this.scrollToElement(ge),ge.focus())}setHistoryScrollRestoration(Oe){if(this.supportScrollRestoration()){const ge=this.window.history;ge&&ge.scrollRestoration&&(ge.scrollRestoration=Oe)}}scrollToElement(Oe){const ge=Oe.getBoundingClientRect(),He=ge.left+this.window.pageXOffset,ot=ge.top+this.window.pageYOffset,Vt=this.offset();this.window.scrollTo(He-Vt[0],ot-Vt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Oe=jr(this.window.history)||jr(Object.getPrototypeOf(this.window.history));return!(!Oe||!Oe.writable&&!Oe.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function jr(de){return Object.getOwnPropertyDescriptor(de,"scrollRestoration")}class Us{}},529:(nt,_e,m)=>{"use strict";m.d(_e,{JF:()=>Ke,LE:()=>M,TP:()=>De,UA:()=>me,WM:()=>g,eN:()=>ye});var n=m(6895),e=m(4650),h=m(9646),S=m(9751),y=m(4351),w=m(9300),f=m(4004);class x{}class b{}class g{constructor(Ze){this.normalizedNames=new Map,this.lazyUpdate=null,Ze?this.lazyInit="string"==typeof Ze?()=>{this.headers=new Map,Ze.split("\n").forEach(oe=>{const ie=oe.indexOf(":");if(ie>0){const L=oe.slice(0,ie),ne=L.toLowerCase(),Ne=oe.slice(ie+1).trim();this.maybeSetNormalizedName(L,ne),this.headers.has(ne)?this.headers.get(ne).push(Ne):this.headers.set(ne,[Ne])}})}:()=>{this.headers=new Map,Object.keys(Ze).forEach(oe=>{let ie=Ze[oe];const L=oe.toLowerCase();"string"==typeof ie&&(ie=[ie]),ie.length>0&&(this.headers.set(L,ie),this.maybeSetNormalizedName(oe,L))})}:this.headers=new Map}has(Ze){return this.init(),this.headers.has(Ze.toLowerCase())}get(Ze){this.init();const oe=this.headers.get(Ze.toLowerCase());return oe&&oe.length>0?oe[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(Ze){return this.init(),this.headers.get(Ze.toLowerCase())||null}append(Ze,oe){return this.clone({name:Ze,value:oe,op:"a"})}set(Ze,oe){return this.clone({name:Ze,value:oe,op:"s"})}delete(Ze,oe){return this.clone({name:Ze,value:oe,op:"d"})}maybeSetNormalizedName(Ze,oe){this.normalizedNames.has(oe)||this.normalizedNames.set(oe,Ze)}init(){this.lazyInit&&(this.lazyInit instanceof g?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(Ze=>this.applyUpdate(Ze)),this.lazyUpdate=null))}copyFrom(Ze){Ze.init(),Array.from(Ze.headers.keys()).forEach(oe=>{this.headers.set(oe,Ze.headers.get(oe)),this.normalizedNames.set(oe,Ze.normalizedNames.get(oe))})}clone(Ze){const oe=new g;return oe.lazyInit=this.lazyInit&&this.lazyInit instanceof g?this.lazyInit:this,oe.lazyUpdate=(this.lazyUpdate||[]).concat([Ze]),oe}applyUpdate(Ze){const oe=Ze.name.toLowerCase();switch(Ze.op){case"a":case"s":let ie=Ze.value;if("string"==typeof ie&&(ie=[ie]),0===ie.length)return;this.maybeSetNormalizedName(Ze.name,oe);const L=("a"===Ze.op?this.headers.get(oe):void 0)||[];L.push(...ie),this.headers.set(oe,L);break;case"d":const ne=Ze.value;if(ne){let Ne=this.headers.get(oe);if(!Ne)return;Ne=Ne.filter(ze=>-1===ne.indexOf(ze)),0===Ne.length?(this.headers.delete(oe),this.normalizedNames.delete(oe)):this.headers.set(oe,Ne)}else this.headers.delete(oe),this.normalizedNames.delete(oe)}}forEach(Ze){this.init(),Array.from(this.normalizedNames.keys()).forEach(oe=>Ze(this.normalizedNames.get(oe),this.headers.get(oe)))}}class R{encodeKey(Ze){return U(Ze)}encodeValue(Ze){return U(Ze)}decodeKey(Ze){return decodeURIComponent(Ze)}decodeValue(Ze){return decodeURIComponent(Ze)}}const O=/%(\d[a-f0-9])/gi,P={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function U(ht){return encodeURIComponent(ht).replace(O,(Ze,oe)=>{var ie;return null!==(ie=P[oe])&&void 0!==ie?ie:Ze})}function W(ht){return`${ht}`}class M{constructor(Ze={}){if(this.updates=null,this.cloneFrom=null,this.encoder=Ze.encoder||new R,Ze.fromString){if(Ze.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function k(ht,Ze){const oe=new Map;return ht.length>0&&ht.replace(/^\?/,"").split("&").forEach(L=>{const ne=L.indexOf("="),[Ne,ze]=-1==ne?[Ze.decodeKey(L),""]:[Ze.decodeKey(L.slice(0,ne)),Ze.decodeValue(L.slice(ne+1))],et=oe.get(Ne)||[];et.push(ze),oe.set(Ne,et)}),oe}(Ze.fromString,this.encoder)}else Ze.fromObject?(this.map=new Map,Object.keys(Ze.fromObject).forEach(oe=>{const ie=Ze.fromObject[oe],L=Array.isArray(ie)?ie.map(W):[W(ie)];this.map.set(oe,L)})):this.map=null}has(Ze){return this.init(),this.map.has(Ze)}get(Ze){this.init();const oe=this.map.get(Ze);return oe?oe[0]:null}getAll(Ze){return this.init(),this.map.get(Ze)||null}keys(){return this.init(),Array.from(this.map.keys())}append(Ze,oe){return this.clone({param:Ze,value:oe,op:"a"})}appendAll(Ze){const oe=[];return Object.keys(Ze).forEach(ie=>{const L=Ze[ie];Array.isArray(L)?L.forEach(ne=>{oe.push({param:ie,value:ne,op:"a"})}):oe.push({param:ie,value:L,op:"a"})}),this.clone(oe)}set(Ze,oe){return this.clone({param:Ze,value:oe,op:"s"})}delete(Ze,oe){return this.clone({param:Ze,value:oe,op:"d"})}toString(){return this.init(),this.keys().map(Ze=>{const oe=this.encoder.encodeKey(Ze);return this.map.get(Ze).map(ie=>oe+"="+this.encoder.encodeValue(ie)).join("&")}).filter(Ze=>""!==Ze).join("&")}clone(Ze){const oe=new M({encoder:this.encoder});return oe.cloneFrom=this.cloneFrom||this,oe.updates=(this.updates||[]).concat(Ze),oe}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(Ze=>this.map.set(Ze,this.cloneFrom.map.get(Ze))),this.updates.forEach(Ze=>{switch(Ze.op){case"a":case"s":const oe=("a"===Ze.op?this.map.get(Ze.param):void 0)||[];oe.push(W(Ze.value)),this.map.set(Ze.param,oe);break;case"d":if(void 0===Ze.value){this.map.delete(Ze.param);break}{let ie=this.map.get(Ze.param)||[];const L=ie.indexOf(W(Ze.value));-1!==L&&ie.splice(L,1),ie.length>0?this.map.set(Ze.param,ie):this.map.delete(Ze.param)}}}),this.cloneFrom=this.updates=null)}}class V{constructor(){this.map=new Map}set(Ze,oe){return this.map.set(Ze,oe),this}get(Ze){return this.map.has(Ze)||this.map.set(Ze,Ze.defaultValue()),this.map.get(Ze)}delete(Ze){return this.map.delete(Ze),this}has(Ze){return this.map.has(Ze)}keys(){return this.map.keys()}}function Y(ht){return typeof ArrayBuffer<"u"&&ht instanceof ArrayBuffer}function fe(ht){return typeof Blob<"u"&&ht instanceof Blob}function J(ht){return typeof FormData<"u"&&ht instanceof FormData}class G{constructor(Ze,oe,ie,L){let ne;if(this.url=oe,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=Ze.toUpperCase(),function Q(ht){switch(ht){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||L?(this.body=void 0!==ie?ie:null,ne=L):ne=ie,ne&&(this.reportProgress=!!ne.reportProgress,this.withCredentials=!!ne.withCredentials,ne.responseType&&(this.responseType=ne.responseType),ne.headers&&(this.headers=ne.headers),ne.context&&(this.context=ne.context),ne.params&&(this.params=ne.params)),this.headers||(this.headers=new g),this.context||(this.context=new V),this.params){const Ne=this.params.toString();if(0===Ne.length)this.urlWithParams=oe;else{const ze=oe.indexOf("?");this.urlWithParams=oe+(-1===ze?"?":ze<oe.length-1?"&":"")+Ne}}else this.params=new M,this.urlWithParams=oe}serializeBody(){return null===this.body?null:Y(this.body)||fe(this.body)||J(this.body)||function ee(ht){return typeof URLSearchParams<"u"&&ht instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof M?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||J(this.body)?null:fe(this.body)?this.body.type||null:Y(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof M?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(Ze={}){var oe;const ie=Ze.method||this.method,L=Ze.url||this.url,ne=Ze.responseType||this.responseType,Ne=void 0!==Ze.body?Ze.body:this.body,ze=void 0!==Ze.withCredentials?Ze.withCredentials:this.withCredentials,et=void 0!==Ze.reportProgress?Ze.reportProgress:this.reportProgress;let Tt=Ze.headers||this.headers,Zt=Ze.params||this.params;const gn=null!==(oe=Ze.context)&&void 0!==oe?oe:this.context;return void 0!==Ze.setHeaders&&(Tt=Object.keys(Ze.setHeaders).reduce((Yt,on)=>Yt.set(on,Ze.setHeaders[on]),Tt)),Ze.setParams&&(Zt=Object.keys(Ze.setParams).reduce((Yt,on)=>Yt.set(on,Ze.setParams[on]),Zt)),new G(ie,L,Ne,{params:Zt,headers:Tt,context:gn,reportProgress:et,responseType:ne,withCredentials:ze})}}var E=(()=>((E=E||{})[E.Sent=0]="Sent",E[E.UploadProgress=1]="UploadProgress",E[E.ResponseHeader=2]="ResponseHeader",E[E.DownloadProgress=3]="DownloadProgress",E[E.Response=4]="Response",E[E.User=5]="User",E))();class te{constructor(Ze,oe=200,ie="OK"){this.headers=Ze.headers||new g,this.status=void 0!==Ze.status?Ze.status:oe,this.statusText=Ze.statusText||ie,this.url=Ze.url||null,this.ok=this.status>=200&&this.status<300}}class $ extends te{constructor(Ze={}){super(Ze),this.type=E.ResponseHeader}clone(Ze={}){return new $({headers:Ze.headers||this.headers,status:void 0!==Ze.status?Ze.status:this.status,statusText:Ze.statusText||this.statusText,url:Ze.url||this.url||void 0})}}class ue extends te{constructor(Ze={}){super(Ze),this.type=E.Response,this.body=void 0!==Ze.body?Ze.body:null}clone(Ze={}){return new ue({body:void 0!==Ze.body?Ze.body:this.body,headers:Ze.headers||this.headers,status:void 0!==Ze.status?Ze.status:this.status,statusText:Ze.statusText||this.statusText,url:Ze.url||this.url||void 0})}}class me extends te{constructor(Ze){super(Ze,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${Ze.url||"(unknown url)"}`:`Http failure response for ${Ze.url||"(unknown url)"}: ${Ze.status} ${Ze.statusText}`,this.error=Ze.error||null}}function we(ht,Ze){return{body:Ze,headers:ht.headers,context:ht.context,observe:ht.observe,params:ht.params,reportProgress:ht.reportProgress,responseType:ht.responseType,withCredentials:ht.withCredentials}}let ye=(()=>{class ht{constructor(oe){this.handler=oe}request(oe,ie,L={}){let ne;if(oe instanceof G)ne=oe;else{let et,Tt;et=L.headers instanceof g?L.headers:new g(L.headers),L.params&&(Tt=L.params instanceof M?L.params:new M({fromObject:L.params})),ne=new G(oe,ie,void 0!==L.body?L.body:null,{headers:et,context:L.context,params:Tt,reportProgress:L.reportProgress,responseType:L.responseType||"json",withCredentials:L.withCredentials})}const Ne=(0,h.of)(ne).pipe((0,y.b)(et=>this.handler.handle(et)));if(oe instanceof G||"events"===L.observe)return Ne;const ze=Ne.pipe((0,w.h)(et=>et instanceof ue));switch(L.observe||"body"){case"body":switch(ne.responseType){case"arraybuffer":return ze.pipe((0,f.U)(et=>{if(null!==et.body&&!(et.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return et.body}));case"blob":return ze.pipe((0,f.U)(et=>{if(null!==et.body&&!(et.body instanceof Blob))throw new Error("Response is not a Blob.");return et.body}));case"text":return ze.pipe((0,f.U)(et=>{if(null!==et.body&&"string"!=typeof et.body)throw new Error("Response is not a string.");return et.body}));default:return ze.pipe((0,f.U)(et=>et.body))}case"response":return ze;default:throw new Error(`Unreachable: unhandled observe type ${L.observe}}`)}}delete(oe,ie={}){return this.request("DELETE",oe,ie)}get(oe,ie={}){return this.request("GET",oe,ie)}head(oe,ie={}){return this.request("HEAD",oe,ie)}jsonp(oe,ie){return this.request("JSONP",oe,{params:(new M).append(ie,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(oe,ie={}){return this.request("OPTIONS",oe,ie)}patch(oe,ie,L={}){return this.request("PATCH",oe,we(L,ie))}post(oe,ie,L={}){return this.request("POST",oe,we(L,ie))}put(oe,ie,L={}){return this.request("PUT",oe,we(L,ie))}}return ht.\u0275fac=function(oe){return new(oe||ht)(e.LFG(x))},ht.\u0275prov=e.Yz7({token:ht,factory:ht.\u0275fac}),ht})();class qe{constructor(Ze,oe){this.next=Ze,this.interceptor=oe}handle(Ze){return this.interceptor.intercept(Ze,this.next)}}const De=new e.OlP("HTTP_INTERCEPTORS");let Ge=(()=>{class ht{intercept(oe,ie){return ie.handle(oe)}}return ht.\u0275fac=function(oe){return new(oe||ht)},ht.\u0275prov=e.Yz7({token:ht,factory:ht.\u0275fac}),ht})();const xt=/^\)\]\}',?\n/;let X=(()=>{class ht{constructor(oe){this.xhrFactory=oe}handle(oe){if("JSONP"===oe.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new S.y(ie=>{const L=this.xhrFactory.build();if(L.open(oe.method,oe.urlWithParams),oe.withCredentials&&(L.withCredentials=!0),oe.headers.forEach((on,Xt)=>L.setRequestHeader(on,Xt.join(","))),oe.headers.has("Accept")||L.setRequestHeader("Accept","application/json, text/plain, */*"),!oe.headers.has("Content-Type")){const on=oe.detectContentTypeHeader();null!==on&&L.setRequestHeader("Content-Type",on)}if(oe.responseType){const on=oe.responseType.toLowerCase();L.responseType="json"!==on?on:"text"}const ne=oe.serializeBody();let Ne=null;const ze=()=>{if(null!==Ne)return Ne;const on=L.statusText||"OK",Xt=new g(L.getAllResponseHeaders()),it=function Dt(ht){return"responseURL"in ht&&ht.responseURL?ht.responseURL:/^X-Request-URL:/m.test(ht.getAllResponseHeaders())?ht.getResponseHeader("X-Request-URL"):null}(L)||oe.url;return Ne=new $({headers:Xt,status:L.status,statusText:on,url:it}),Ne},et=()=>{let{headers:on,status:Xt,statusText:it,url:Gt}=ze(),bt=null;204!==Xt&&(bt=typeof L.response>"u"?L.responseText:L.response),0===Xt&&(Xt=bt?200:0);let jt=Xt>=200&&Xt<300;if("json"===oe.responseType&&"string"==typeof bt){const ln=bt;bt=bt.replace(xt,"");try{bt=""!==bt?JSON.parse(bt):null}catch(kn){bt=ln,jt&&(jt=!1,bt={error:kn,text:bt})}}jt?(ie.next(new ue({body:bt,headers:on,status:Xt,statusText:it,url:Gt||void 0})),ie.complete()):ie.error(new me({error:bt,headers:on,status:Xt,statusText:it,url:Gt||void 0}))},Tt=on=>{const{url:Xt}=ze(),it=new me({error:on,status:L.status||0,statusText:L.statusText||"Unknown Error",url:Xt||void 0});ie.error(it)};let Zt=!1;const gn=on=>{Zt||(ie.next(ze()),Zt=!0);let Xt={type:E.DownloadProgress,loaded:on.loaded};on.lengthComputable&&(Xt.total=on.total),"text"===oe.responseType&&!!L.responseText&&(Xt.partialText=L.responseText),ie.next(Xt)},Yt=on=>{let Xt={type:E.UploadProgress,loaded:on.loaded};on.lengthComputable&&(Xt.total=on.total),ie.next(Xt)};return L.addEventListener("load",et),L.addEventListener("error",Tt),L.addEventListener("timeout",Tt),L.addEventListener("abort",Tt),oe.reportProgress&&(L.addEventListener("progress",gn),null!==ne&&L.upload&&L.upload.addEventListener("progress",Yt)),L.send(ne),ie.next({type:E.Sent}),()=>{L.removeEventListener("error",Tt),L.removeEventListener("abort",Tt),L.removeEventListener("load",et),L.removeEventListener("timeout",Tt),oe.reportProgress&&(L.removeEventListener("progress",gn),null!==ne&&L.upload&&L.upload.removeEventListener("progress",Yt)),L.readyState!==L.DONE&&L.abort()}})}}return ht.\u0275fac=function(oe){return new(oe||ht)(e.LFG(n.JF))},ht.\u0275prov=e.Yz7({token:ht,factory:ht.\u0275fac}),ht})();const j=new e.OlP("XSRF_COOKIE_NAME"),ae=new e.OlP("XSRF_HEADER_NAME");class Be{}let je=(()=>{class ht{constructor(oe,ie,L){this.doc=oe,this.platform=ie,this.cookieName=L,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const oe=this.doc.cookie||"";return oe!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,n.Mx)(oe,this.cookieName),this.lastCookieString=oe),this.lastToken}}return ht.\u0275fac=function(oe){return new(oe||ht)(e.LFG(n.K0),e.LFG(e.Lbi),e.LFG(j))},ht.\u0275prov=e.Yz7({token:ht,factory:ht.\u0275fac}),ht})(),ke=(()=>{class ht{constructor(oe,ie){this.tokenService=oe,this.headerName=ie}intercept(oe,ie){const L=oe.url.toLowerCase();if("GET"===oe.method||"HEAD"===oe.method||L.startsWith("http://")||L.startsWith("https://"))return ie.handle(oe);const ne=this.tokenService.getToken();return null!==ne&&!oe.headers.has(this.headerName)&&(oe=oe.clone({headers:oe.headers.set(this.headerName,ne)})),ie.handle(oe)}}return ht.\u0275fac=function(oe){return new(oe||ht)(e.LFG(Be),e.LFG(ae))},ht.\u0275prov=e.Yz7({token:ht,factory:ht.\u0275fac}),ht})(),Re=(()=>{class ht{constructor(oe,ie){this.backend=oe,this.injector=ie,this.chain=null}handle(oe){if(null===this.chain){const ie=this.injector.get(De,[]);this.chain=ie.reduceRight((L,ne)=>new qe(L,ne),this.backend)}return this.chain.handle(oe)}}return ht.\u0275fac=function(oe){return new(oe||ht)(e.LFG(b),e.LFG(e.zs3))},ht.\u0275prov=e.Yz7({token:ht,factory:ht.\u0275fac}),ht})(),Xe=(()=>{class ht{static disable(){return{ngModule:ht,providers:[{provide:ke,useClass:Ge}]}}static withOptions(oe={}){return{ngModule:ht,providers:[oe.cookieName?{provide:j,useValue:oe.cookieName}:[],oe.headerName?{provide:ae,useValue:oe.headerName}:[]]}}}return ht.\u0275fac=function(oe){return new(oe||ht)},ht.\u0275mod=e.oAB({type:ht}),ht.\u0275inj=e.cJS({providers:[ke,{provide:De,useExisting:ke,multi:!0},{provide:Be,useClass:je},{provide:j,useValue:"XSRF-TOKEN"},{provide:ae,useValue:"X-XSRF-TOKEN"}]}),ht})(),Ke=(()=>{class ht{}return ht.\u0275fac=function(oe){return new(oe||ht)},ht.\u0275mod=e.oAB({type:ht}),ht.\u0275inj=e.cJS({providers:[ye,{provide:x,useClass:Re},X,{provide:b,useExisting:X}],imports:[Xe.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),ht})()},4650:(nt,_e,m)=>{"use strict";m.d(_e,{$8M:()=>Lr,$Z:()=>ig,AFp:()=>Kv,ALo:()=>Dl,AaK:()=>x,AsE:()=>xh,BQk:()=>_d,CHM:()=>fs,CRH:()=>xv,CZH:()=>Wc,CqO:()=>qg,D6c:()=>aT,DdM:()=>lw,Dn7:()=>Yh,EJc:()=>Gv,EiD:()=>tp,EpF:()=>Hg,F$t:()=>Gg,F4k:()=>Jg,FYo:()=>pm,FiY:()=>xa,G48:()=>Ww,Gf:()=>mu,GfV:()=>hm,GkF:()=>mh,Gpc:()=>N,Gre:()=>Dh,HTZ:()=>gv,Hsn:()=>zg,Ikx:()=>Ih,JOm:()=>Ka,JVY:()=>Y1,Jf7:()=>Sm,KtG:()=>ei,L6k:()=>X1,LAX:()=>t0,LFG:()=>$r,LMc:()=>cT,LSH:()=>ip,Lbi:()=>hf,Lck:()=>Xb,MAs:()=>Vg,MGl:()=>vd,MMx:()=>jh,MT6:()=>wd,NdJ:()=>_h,OlP:()=>Z,Oqu:()=>Sh,PXZ:()=>a1,Q6J:()=>ph,QGY:()=>gh,QP$:()=>Fn,QbO:()=>Iw,Qsj:()=>N0,QtT:()=>nv,R0b:()=>va,RDi:()=>J1,Rgc:()=>pu,SBq:()=>eu,SDv:()=>Fh,Sil:()=>kw,Suo:()=>Ld,TTD:()=>as,TgZ:()=>fd,Tol:()=>p_,Udp:()=>bh,VKq:()=>Gh,W1O:()=>Ov,WLB:()=>fv,X6Q:()=>Qw,XFs:()=>Re,Xpm:()=>Gt,Xts:()=>rp,Y36:()=>gc,YKP:()=>sv,YNc:()=>Zg,Yjl:()=>Yn,Yz7:()=>ct,Z0I:()=>en,ZZ4:()=>A1,_Bn:()=>rv,_UZ:()=>fh,_Vd:()=>tr,_c5:()=>sT,_uU:()=>Ah,aQg:()=>If,c2e:()=>$v,cJS:()=>ft,cg1:()=>Nh,d8E:()=>Mh,dDg:()=>Zw,dqk:()=>L,eBb:()=>e0,eFA:()=>l1,ekj:()=>wh,eoX:()=>r1,evT:()=>xm,f3M:()=>Lu,g9A:()=>Au,h0i:()=>Uc,hGG:()=>oT,hYB:()=>yh,hij:()=>bd,iGM:()=>Sv,ifc:()=>ie,ip1:()=>Vd,jDz:()=>av,kEZ:()=>cw,kL8:()=>k_,l5B:()=>mv,lG2:()=>ri,lcZ:()=>Md,lqb:()=>ha,lri:()=>n1,mCW:()=>Hu,n5z:()=>ua,oAB:()=>kn,oJD:()=>tm,oxw:()=>$g,pB0:()=>n0,pQV:()=>Zh,q3G:()=>Zs,qLn:()=>Bo,qOj:()=>lh,qZA:()=>md,qbA:()=>na,qzn:()=>lc,rWj:()=>i1,s9C:()=>vh,sBO:()=>jw,sIi:()=>Xr,s_b:()=>Rd,soG:()=>Nl,tb:()=>ff,tp0:()=>Ea,uIk:()=>dh,vHH:()=>P,vpe:()=>Xa,wAp:()=>fi,xi3:()=>Nd,xp6:()=>qm,ynx:()=>gd,z2F:()=>Af,z3N:()=>al,zSh:()=>ap,zs3:()=>Ql});var n=m(7579),e=m(727),h=m(9751),S=m(6451),y=m(3099);function w(s){for(let a in s)if(s[a]===w)return a;throw Error("Could not find renamed property on target object.")}function f(s,a){for(const d in a)a.hasOwnProperty(d)&&!s.hasOwnProperty(d)&&(s[d]=a[d])}function x(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(x).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const d=a.indexOf("\n");return-1===d?a:a.substring(0,d)}function b(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const g=w({__forward_ref__:w});function N(s){return s.__forward_ref__=N,s.toString=function(){return x(this())},s}function R(s){return k(s)?s():s}function k(s){return"function"==typeof s&&s.hasOwnProperty(g)&&s.__forward_ref__===N}class P extends Error{constructor(a,d){super(function U(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}(a,d)),this.code=a}}function W(s){return"string"==typeof s?s:null==s?"":String(s)}function Y(s,a){throw new P(-201,!1)}function ve(s,a,d,v){throw new Error(`ASSERTION ERROR: ${s}`+(null==v?"":` [Expected=> ${d} ${v} ${a} <=Actual]`))}function ct(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function ft(s){return{providers:s.providers||[],imports:s.imports||[]}}function qt(s){return xt(s,ae)||xt(s,je)}function en(s){return null!==qt(s)}function xt(s,a){return s.hasOwnProperty(a)?s[a]:null}function j(s){return s&&(s.hasOwnProperty(Be)||s.hasOwnProperty(ke))?s[Be]:null}const ae=w({\u0275prov:w}),Be=w({\u0275inj:w}),je=w({ngInjectableDef:w}),ke=w({ngInjectorDef:w});var Re=(()=>((Re=Re||{})[Re.Default=0]="Default",Re[Re.Host=1]="Host",Re[Re.Self=2]="Self",Re[Re.SkipSelf=4]="SkipSelf",Re[Re.Optional=8]="Optional",Re))();let Se;function Xe(s){const a=Se;return Se=s,a}function Ke(s,a,d){const v=qt(s);return v&&"root"==v.providedIn?void 0===v.value?v.value=v.factory():v.value:d&Re.Optional?null:void 0!==a?a:void Y(x(s))}function Ct(s){return{toString:s}.toString()}var ht=(()=>((ht=ht||{})[ht.OnPush=0]="OnPush",ht[ht.Default=1]="Default",ht))(),ie=(()=>{return(s=ie||(ie={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ie;var s})();const L=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ze={},et=[],Tt=w({\u0275cmp:w}),Zt=w({\u0275dir:w}),gn=w({\u0275pipe:w}),Yt=w({\u0275mod:w}),on=w({\u0275fac:w}),Xt=w({__NG_ELEMENT_ID__:w});let it=0;function Gt(s){return Ct(()=>{const d=!0===s.standalone,v={},A={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:v,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===ht.OnPush,directiveDefs:null,pipeDefs:null,standalone:d,dependencies:d&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||et,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ie.Emulated,id:"c"+it++,styles:s.styles||et,_:null,setInput:null,schemas:s.schemas||null,tView:null},I=s.dependencies,q=s.features;return A.inputs=qn(s.inputs,v),A.outputs=qn(s.outputs),q&&q.forEach(se=>se(A)),A.directiveDefs=I?()=>("function"==typeof I?I():I).map(jt).filter(ln):null,A.pipeDefs=I?()=>("function"==typeof I?I():I).map(In).filter(ln):null,A})}function jt(s){return Ft(s)||jn(s)}function ln(s){return null!==s}function kn(s){return Ct(()=>({type:s.type,bootstrap:s.bootstrap||et,declarations:s.declarations||et,imports:s.imports||et,exports:s.exports||et,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function qn(s,a){if(null==s)return ze;const d={};for(const v in s)if(s.hasOwnProperty(v)){let A=s[v],I=A;Array.isArray(A)&&(I=A[1],A=A[0]),d[A]=v,a&&(a[A]=I)}return d}const ri=Gt;function Yn(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ft(s){return s[Tt]||null}function jn(s){return s[Zt]||null}function In(s){return s[gn]||null}function Fn(s){const a=Ft(s)||jn(s)||In(s);return null!==a&&a.standalone}function Zn(s,a){const d=s[Yt]||null;if(!d&&!0===a)throw new Error(`Type ${x(s)} does not have '\u0275mod' property.`);return d}function rn(s){return Array.isArray(s)&&"object"==typeof s[1]}function bn(s){return Array.isArray(s)&&!0===s[1]}function An(s){return 0!=(8&s.flags)}function wi(s){return 2==(2&s.flags)}function di(s){return 1==(1&s.flags)}function oi(s){return null!==s.template}function dr(s){return 0!=(256&s[2])}function mr(s,a){return s.hasOwnProperty(on)?s[on]:null}class Sr{constructor(a,d,v){this.previousValue=a,this.currentValue=d,this.firstChange=v}isFirstChange(){return this.firstChange}}function as(){return Qr}function Qr(s){return s.type.prototype.ngOnChanges&&(s.setInput=gr),Zr}function Zr(){const s=zi(this),a=s?.current;if(a){const d=s.previous;if(d===ze)s.previous=a;else for(let v in a)d[v]=a[v];s.current=null,this.ngOnChanges(a)}}function gr(s,a,d,v){const A=zi(s)||function _r(s,a){return s[ls]=a}(s,{previous:ze,current:null}),I=A.current||(A.current={}),q=A.previous,se=this.declaredInputs[d],pe=q[se];I[se]=new Sr(pe&&pe.currentValue,a,q===ze),s[v]=a}as.ngInherit=!0;const ls="__ngSimpleChanges__";function zi(s){return s[ls]||null}function Di(s){for(;Array.isArray(s);)s=s[0];return s}function jr(s,a){return Di(a[s])}function ss(s,a){return Di(a[s.index])}function Us(s,a){return s.data[a]}function Es(s,a){return s[a]}function ki(s,a){const d=a[s];return rn(d)?d:d[0]}function us(s){return 64==(64&s[2])}function Ii(s,a){return null==a?null:s[a]}function Vi(s){s[18]=0}function xr(s,a){s[5]+=a;let d=s,v=s[3];for(;null!==v&&(1===a&&1===d[5]||-1===a&&0===d[5]);)v[5]+=a,d=v,v=v[3]}const Wn={lFrame:Oo(null),bindingsEnabled:!0};function yr(){return Wn.bindingsEnabled}function cn(){return Wn.lFrame.lView}function Kn(){return Wn.lFrame.tView}function fs(s){return Wn.lFrame.contextLView=s,s[8]}function ei(s){return Wn.lFrame.contextLView=null,s}function Hi(){let s=Te();for(;null!==s&&64===s.type;)s=s.parent;return s}function Te(){return Wn.lFrame.currentTNode}function he(){const s=Wn.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}function z(s,a){const d=Wn.lFrame;d.currentTNode=s,d.isParent=a}function $e(){return Wn.lFrame.isParent}function $t(){Wn.lFrame.isParent=!1}function Ji(){const s=Wn.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function ai(){return Wn.lFrame.bindingIndex}function Fe(){return Wn.lFrame.bindingIndex++}function yt(s){const a=Wn.lFrame,d=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,d}function Bt(s){Wn.lFrame.inI18n=s}function Lt(s,a){const d=Wn.lFrame;d.bindingIndex=d.bindingRootIndex=s,fn(a)}function fn(s){Wn.lFrame.currentDirectiveIndex=s}function $n(s){const a=Wn.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}function Ln(){return Wn.lFrame.currentQueryIndex}function lr(s){Wn.lFrame.currentQueryIndex=s}function Pr(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function cr(s,a,d){if(d&Re.SkipSelf){let A=a,I=s;for(;!(A=A.parent,null!==A||d&Re.Host||(A=Pr(I),null===A||(I=I[15],10&A.type))););if(null===A)return!1;a=A,s=I}const v=Wn.lFrame=yn();return v.currentTNode=a,v.lView=s,!0}function si(s){const a=yn(),d=s[1];Wn.lFrame=a,a.currentTNode=d.firstChild,a.lView=s,a.tView=d,a.contextLView=s,a.bindingIndex=d.bindingStartIndex,a.inI18n=!1}function yn(){const s=Wn.lFrame,a=null===s?null:s.child;return null===a?Oo(s):a}function Oo(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Xs(){const s=Wn.lFrame;return Wn.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const de=Xs;function Oe(){const s=Xs();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ot(){return Wn.lFrame.selectedIndex}function Vt(s){Wn.lFrame.selectedIndex=s}function zt(){const s=Wn.lFrame;return Us(s.tView,s.selectedIndex)}function Ci(s,a){for(let d=a.directiveStart,v=a.directiveEnd;d<v;d++){const I=s.data[d].type.prototype,{ngAfterContentInit:q,ngAfterContentChecked:se,ngAfterViewInit:pe,ngAfterViewChecked:Me,ngOnDestroy:Ye}=I;q&&(s.contentHooks||(s.contentHooks=[])).push(-d,q),se&&((s.contentHooks||(s.contentHooks=[])).push(d,se),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(d,se)),pe&&(s.viewHooks||(s.viewHooks=[])).push(-d,pe),Me&&((s.viewHooks||(s.viewHooks=[])).push(d,Me),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(d,Me)),null!=Ye&&(s.destroyHooks||(s.destroyHooks=[])).push(d,Ye)}}function hr(s,a,d){qs(s,a,3,d)}function Cr(s,a,d,v){(3&s[2])===d&&qs(s,a,d,v)}function sr(s,a){let d=s[2];(3&d)===a&&(d&=2047,d+=1,s[2]=d)}function qs(s,a,d,v){const I=v??-1,q=a.length-1;let se=0;for(let pe=void 0!==v?65535&s[18]:0;pe<q;pe++)if("number"==typeof a[pe+1]){if(se=a[pe],null!=v&&se>=v)break}else a[pe]<0&&(s[18]+=65536),(se<I||-1==I)&&(Wi(s,d,a,pe),s[18]=(4294901760&s[18])+pe+2),pe++}function Wi(s,a,d,v){const A=d[v]<0,I=d[v+1],se=s[A?-d[v]:d[v]];if(A){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{I.call(se)}finally{}}}else try{I.call(se)}finally{}}class Ds{constructor(a,d,v){this.factory=a,this.resolving=!1,this.canSeeViewProviders=d,this.injectImpl=v}}function qo(s,a,d){let v=0;for(;v<d.length;){const A=d[v];if("number"==typeof A){if(0!==A)break;v++;const I=d[v++],q=d[v++],se=d[v++];s.setAttribute(a,q,se,I)}else{const I=A,q=d[++v];Is(I)?s.setProperty(a,I,q):s.setAttribute(a,I,q),v++}}return v}function or(s){return 3===s||4===s||6===s}function Is(s){return 64===s.charCodeAt(0)}function Qo(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let d=-1;for(let v=0;v<a.length;v++){const A=a[v];"number"==typeof A?d=A:0===d||wa(s,d,A,null,-1===d||2===d?a[++v]:null)}}return s}function wa(s,a,d,v,A){let I=0,q=s.length;if(-1===a)q=-1;else for(;I<s.length;){const se=s[I++];if("number"==typeof se){if(se===a){q=-1;break}if(se>a){q=I-1;break}}}for(;I<s.length;){const se=s[I];if("number"==typeof se)break;if(se===d){if(null===v)return void(null!==A&&(s[I+1]=A));if(v===s[I+1])return void(s[I+2]=A)}I++,null!==v&&I++,null!==A&&I++}-1!==q&&(s.splice(q,0,a),I=q+1),s.splice(I++,0,d),null!==v&&s.splice(I++,0,v),null!==A&&s.splice(I++,0,A)}function eo(s){return-1!==s}function Mr(s){return 32767&s}function mo(s,a){let d=function Va(s){return s>>16}(s),v=a;for(;d>0;)v=v[15],d--;return v}let So=!0;function to(s){const a=So;return So=s,a}let Wo=0;const ii={};function jo(s,a){const d=H(s,a);if(-1!==d)return d;const v=a[1];v.firstCreatePass&&(s.injectorIndex=a.length,xe(v.data,s),xe(a,null),xe(v.blueprint,null));const A=be(s,a),I=s.injectorIndex;if(eo(A)){const q=Mr(A),se=mo(A,a),pe=se[1].data;for(let Me=0;Me<8;Me++)a[I+Me]=se[q+Me]|pe[q+Me]}return a[I+8]=A,I}function xe(s,a){s.push(0,0,0,0,0,0,0,0,a)}function H(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function be(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let d=0,v=null,A=a;for(;null!==A;){if(v=js(A),null===v)return-1;if(d++,A=A[15],-1!==v.injectorIndex)return v.injectorIndex|d<<16}return-1}function Pe(s,a,d){!function xo(s,a,d){let v;"string"==typeof d?v=d.charCodeAt(0)||0:d.hasOwnProperty(Xt)&&(v=d[Xt]),null==v&&(v=d[Xt]=Wo++);const A=255&v;a.data[s+(A>>5)]|=1<<A}(s,a,d)}function It(s,a,d){if(d&Re.Optional||void 0!==s)return s;Y()}function St(s,a,d,v){if(d&Re.Optional&&void 0===v&&(v=null),0==(d&(Re.Self|Re.Host))){const A=s[9],I=Xe(void 0);try{return A?A.get(a,v,d&Re.Optional):Ke(a,v,d&Re.Optional)}finally{Xe(I)}}return It(v,0,d)}function Jt(s,a,d,v=Re.Default,A){if(null!==s){if(1024&a[2]){const q=function Ja(s,a,d,v,A){let I=s,q=a;for(;null!==I&&null!==q&&1024&q[2]&&!(256&q[2]);){const se=un(I,q,d,v|Re.Self,ii);if(se!==ii)return se;let pe=I.parent;if(!pe){const Me=q[21];if(Me){const Ye=Me.get(d,ii,v);if(Ye!==ii)return Ye}pe=js(q),q=q[15]}I=pe}return A}(s,a,d,v,ii);if(q!==ii)return q}const I=un(s,a,d,v,ii);if(I!==ii)return I}return St(a,d,v,A)}function un(s,a,d,v,A){const I=function br(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Xt)?s[Xt]:void 0;return"number"==typeof a?a>=0?255&a:Ws:a}(d);if("function"==typeof I){if(!cr(a,s,v))return v&Re.Host?It(A,0,v):St(a,d,v,A);try{const q=I(v);if(null!=q||v&Re.Optional)return q;Y()}finally{de()}}else if("number"==typeof I){let q=null,se=H(s,a),pe=-1,Me=v&Re.Host?a[16][6]:null;for((-1===se||v&Re.SkipSelf)&&(pe=-1===se?be(s,a):a[se+8],-1!==pe&&Hr(v,!1)?(q=a[1],se=Mr(pe),a=mo(pe,a)):se=-1);-1!==se;){const Ye=a[1];if(ni(I,se,Ye.data)){const mt=pn(se,a,d,q,v,Me);if(mt!==ii)return mt}pe=a[se+8],-1!==pe&&Hr(v,a[1].data[se+8]===Me)&&ni(I,se,a)?(q=Ye,se=Mr(pe),a=mo(pe,a)):se=-1}}return A}function pn(s,a,d,v,A,I){const q=a[1],se=q.data[s+8],Ye=_i(se,q,d,null==v?wi(se)&&So:v!=q&&0!=(3&se.type),A&Re.Host&&I===se);return null!==Ye?Pi(a,q,Ye,se):ii}function _i(s,a,d,v,A){const I=s.providerIndexes,q=a.data,se=1048575&I,pe=s.directiveStart,Ye=I>>20,Rt=A?se+Ye:s.directiveEnd;for(let Qt=v?se:se+Ye;Qt<Rt;Qt++){const dn=q[Qt];if(Qt<pe&&d===dn||Qt>=pe&&dn.type===d)return Qt}if(A){const Qt=q[pe];if(Qt&&oi(Qt)&&Qt.type===d)return pe}return null}function Pi(s,a,d,v){let A=s[d];const I=a.data;if(function fo(s){return s instanceof Ds}(A)){const q=A;q.resolving&&function B(s,a){const d=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new P(-200,`Circular dependency in DI detected for ${s}${d}`)}(function M(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():W(s)}(I[d]));const se=to(q.canSeeViewProviders);q.resolving=!0;const pe=q.injectImpl?Xe(q.injectImpl):null;cr(s,v,Re.Default);try{A=s[d]=q.factory(void 0,I,s,v),a.firstCreatePass&&d>=v.directiveStart&&function Un(s,a,d){const{ngOnChanges:v,ngOnInit:A,ngDoCheck:I}=a.type.prototype;if(v){const q=Qr(a);(d.preOrderHooks||(d.preOrderHooks=[])).push(s,q),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(s,q)}A&&(d.preOrderHooks||(d.preOrderHooks=[])).push(0-s,A),I&&((d.preOrderHooks||(d.preOrderHooks=[])).push(s,I),(d.preOrderCheckHooks||(d.preOrderCheckHooks=[])).push(s,I))}(d,I[d],a)}finally{null!==pe&&Xe(pe),to(se),q.resolving=!1,de()}}return A}function ni(s,a,d){return!!(d[a+(s>>5)]&1<<s)}function Hr(s,a){return!(s&Re.Self||s&Re.Host&&a)}class Qs{constructor(a,d){this._tNode=a,this._lView=d}get(a,d,v){return Jt(this._tNode,this._lView,a,v,d)}}function Ws(){return new Qs(Hi(),cn())}function ua(s){return Ct(()=>{const a=s.prototype.constructor,d=a[on]||Ha(a),v=Object.prototype;let A=Object.getPrototypeOf(s.prototype).constructor;for(;A&&A!==v;){const I=A[on]||Ha(A);if(I&&I!==d)return I;A=Object.getPrototypeOf(A)}return I=>new I})}function Ha(s){return k(s)?()=>{const a=Ha(R(s));return a&&a()}:mr(s)}function js(s){const a=s[1],d=a.type;return 2===d?a.declTNode:1===d?s[6]:null}function Lr(s){return function pt(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const d=s.attrs;if(d){const v=d.length;let A=0;for(;A<v;){const I=d[A];if(or(I))break;if(0===I)A+=2;else if("number"==typeof I)for(A++;A<v&&"string"==typeof d[A];)A++;else{if(I===a)return d[A+1];A+=2}}}return null}(Hi(),s)}const vo="__parameters__";function Ms(s,a,d){return Ct(()=>{const v=function yo(s){return function(...d){if(s){const v=s(...d);for(const A in v)this[A]=v[A]}}}(a);function A(...I){if(this instanceof A)return v.apply(this,I),this;const q=new A(...I);return se.annotation=q,se;function se(pe,Me,Ye){const mt=pe.hasOwnProperty(vo)?pe[vo]:Object.defineProperty(pe,vo,{value:[]})[vo];for(;mt.length<=Ye;)mt.push(null);return(mt[Ye]=mt[Ye]||[]).push(q),pe}}return d&&(A.prototype=Object.create(d.prototype)),A.prototype.ngMetadataName=s,A.annotationCls=A,A})}class Z{constructor(a,d){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof d?this.__NG_ELEMENT_ID__=d:void 0!==d&&(this.\u0275prov=ct({token:this,providedIn:d.providedIn||"root",factory:d.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ro(s,a){void 0===a&&(a=s);for(let d=0;d<s.length;d++){let v=s[d];Array.isArray(v)?(a===s&&(a=s.slice(0,d)),ro(v,a)):a!==s&&a.push(v)}return a}function Xo(s,a){s.forEach(d=>Array.isArray(d)?Xo(d,a):a(d))}function Pl(s,a,d){a>=s.length?s.push(d):s.splice(a,0,d)}function _l(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function Le(s,a){const d=[];for(let v=0;v<s;v++)d.push(a);return d}function re(s,a,d){let v=Ee(s,a);return v>=0?s[1|v]=d:(v=~v,function _(s,a,d,v){let A=s.length;if(A==a)s.push(d,v);else if(1===A)s.push(v,s[0]),s[0]=d;else{for(A--,s.push(s[A-1],s[A]);A>a;)s[A]=s[A-2],A--;s[a]=d,s[a+1]=v}}(s,v,a,d)),v}function ce(s,a){const d=Ee(s,a);if(d>=0)return s[1|d]}function Ee(s,a){return function wt(s,a,d){let v=0,A=s.length>>d;for(;A!==v;){const I=v+(A-v>>1),q=s[I<<d];if(a===q)return I<<d;q>a?A=I:v=I+1}return~(A<<d)}(s,a,1)}const Nr={},Os="__NG_DI_FLAG__",rl="ngTempTokenPath",qa=/\n/gm,Pu="__source";let Lo;function Or(s){const a=Lo;return Lo=s,a}function Sa(s,a=Re.Default){if(void 0===Lo)throw new P(-203,!1);return null===Lo?Ke(s,void 0,a):Lo.get(s,a&Re.Optional?null:void 0,a)}function $r(s,a=Re.Default){return(function Qe(){return Se}()||Sa)(R(s),a)}function Lu(s,a=Re.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),$r(s,a)}function Ul(s){const a=[];for(let d=0;d<s.length;d++){const v=R(s[d]);if(Array.isArray(v)){if(0===v.length)throw new P(900,!1);let A,I=Re.Default;for(let q=0;q<v.length;q++){const se=v[q],pe=Uu(se);"number"==typeof pe?-1===pe?A=se.token:I|=pe:A=se}a.push($r(A,I))}else a.push($r(v))}return a}function Co(s,a){return s[Os]=a,s.prototype[Os]=a,s}function Uu(s){return s[Os]}const xa=Co(Ms("Optional"),8),Ea=Co(Ms("SkipSelf"),4);let zd,oc,Vu;function J1(s){zd=s}function Wf(){return void 0!==zd?zd:typeof document<"u"?document:void 0}function ac(s){var a;return(null===(a=function Yd(){if(void 0===oc&&(oc=null,L.trustedTypes))try{oc=L.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return oc}())||void 0===a?void 0:a.createHTML(s))||s}function jf(s){var a;return(null===(a=function Xd(){if(void 0===Vu&&(Vu=null,L.trustedTypes))try{Vu=L.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Vu}())||void 0===a?void 0:a.createHTML(s))||s}class Cl{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class W1 extends Cl{getTypeName(){return"HTML"}}class j1 extends Cl{getTypeName(){return"Style"}}class K1 extends Cl{getTypeName(){return"Script"}}class $1 extends Cl{getTypeName(){return"URL"}}class G1 extends Cl{getTypeName(){return"ResourceURL"}}function al(s){return s instanceof Cl?s.changingThisBreaksApplicationSecurity:s}function lc(s,a){const d=function z1(s){return s instanceof Cl&&s.getTypeName()||null}(s);if(null!=d&&d!==a){if("ResourceURL"===d&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${d} (see https://g.co/ng/security#xss)`)}return d===a}function Y1(s){return new W1(s)}function X1(s){return new j1(s)}function e0(s){return new K1(s)}function t0(s){return new $1(s)}function n0(s){return new G1(s)}function Gf(s){const a=new s0(s);return function o0(){try{return!!(new window.DOMParser).parseFromString(ac(""),"text/html")}catch{return!1}}()?new r0(a):a}class r0{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const d=(new window.DOMParser).parseFromString(ac(a),"text/html").body;return null===d?this.inertDocumentHelper.getInertBodyElement(a):(d.removeChild(d.firstChild),d)}catch{return null}}}class s0{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const d=this.inertDocument.createElement("html");this.inertDocument.appendChild(d);const v=this.inertDocument.createElement("body");d.appendChild(v)}}getInertBodyElement(a){const d=this.inertDocument.createElement("template");if("content"in d)return d.innerHTML=ac(a),d;const v=this.inertDocument.createElement("body");return v.innerHTML=ac(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(v),v}stripCustomNsAttrs(a){const d=a.attributes;for(let A=d.length-1;0<A;A--){const q=d.item(A).name;("xmlns:ns1"===q||0===q.indexOf("ns1:"))&&a.removeAttribute(q)}let v=a.firstChild;for(;v;)v.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(v),v=v.nextSibling}}const a0=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Hu(s){return(s=String(s)).match(a0)?s:"unsafe:"+s}function ll(s){const a={};for(const d of s.split(","))a[d]=!0;return a}function Yc(...s){const a={};for(const d of s)for(const v in d)d.hasOwnProperty(v)&&(a[v]=!0);return a}const zf=ll("area,br,col,hr,img,wbr"),Yf=ll("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Xf=ll("rp,rt"),ep=Yc(zf,Yc(Yf,ll("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Yc(Xf,ll("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Yc(Xf,Yf)),Uo=ll("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),oo=Yc(Uo,ll("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ll("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),l0=ll("script,style,template");class c0{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let d=a.firstChild,v=!0;for(;d;)if(d.nodeType===Node.ELEMENT_NODE?v=this.startElement(d):d.nodeType===Node.TEXT_NODE?this.chars(d.nodeValue):this.sanitizedSomething=!0,v&&d.firstChild)d=d.firstChild;else for(;d;){d.nodeType===Node.ELEMENT_NODE&&this.endElement(d);let A=this.checkClobberedElement(d,d.nextSibling);if(A){d=A;break}d=this.checkClobberedElement(d,d.parentNode)}return this.buf.join("")}startElement(a){const d=a.nodeName.toLowerCase();if(!ep.hasOwnProperty(d))return this.sanitizedSomething=!0,!l0.hasOwnProperty(d);this.buf.push("<"),this.buf.push(d);const v=a.attributes;for(let A=0;A<v.length;A++){const I=v.item(A),q=I.name,se=q.toLowerCase();if(!oo.hasOwnProperty(se)){this.sanitizedSomething=!0;continue}let pe=I.value;Uo[se]&&(pe=Hu(pe)),this.buf.push(" ",q,'="',em(pe),'"')}return this.buf.push(">"),!0}endElement(a){const d=a.nodeName.toLowerCase();ep.hasOwnProperty(d)&&!zf.hasOwnProperty(d)&&(this.buf.push("</"),this.buf.push(d),this.buf.push(">"))}chars(a){this.buf.push(em(a))}checkClobberedElement(a,d){if(d&&(a.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return d}}const u0=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d0=/([^\#-~ |!])/g;function em(s){return s.replace(/&/g,"&amp;").replace(u0,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(d0,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ju;function tp(s,a){let d=null;try{Ju=Ju||Gf(s);let v=a?String(a):"";d=Ju.getInertBodyElement(v);let A=5,I=v;do{if(0===A)throw new Error("Failed to sanitize html because the input is unstable");A--,v=I,I=d.innerHTML,d=Ju.getInertBodyElement(v)}while(v!==I);return ac((new c0).sanitizeChildren(np(d)||d))}finally{if(d){const v=np(d)||d;for(;v.firstChild;)v.removeChild(v.firstChild)}}}function np(s){return"content"in s&&function p0(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Zs=(()=>((Zs=Zs||{})[Zs.NONE=0]="NONE",Zs[Zs.HTML=1]="HTML",Zs[Zs.STYLE=2]="STYLE",Zs[Zs.SCRIPT=3]="SCRIPT",Zs[Zs.URL=4]="URL",Zs[Zs.RESOURCE_URL=5]="RESOURCE_URL",Zs))();function tm(s){const a=Xc();return a?jf(a.sanitize(Zs.HTML,s)||""):lc(s,"HTML")?jf(al(s)):tp(Wf(),W(s))}function ip(s){const a=Xc();return a?a.sanitize(Zs.URL,s)||"":lc(s,"URL")?al(s):Hu(W(s))}function Xc(){const s=cn();return s&&s[12]}const rp=new Z("ENVIRONMENT_INITIALIZER"),im=new Z("INJECTOR",-1),rm=new Z("INJECTOR_DEF_TYPES");class sm{get(a,d=Nr){if(d===Nr){const v=new Error(`NullInjectorError: No provider for ${x(a)}!`);throw v.name="NullInjectorError",v}return d}}function y0(...s){return{\u0275providers:om(0,s)}}function om(s,...a){const d=[],v=new Set;let A;return Xo(a,I=>{const q=I;sp(q,d,[],v)&&(A||(A=[]),A.push(q))}),void 0!==A&&am(A,d),d}function am(s,a){for(let d=0;d<s.length;d++){const{providers:A}=s[d];Xo(A,I=>{a.push(I)})}}function sp(s,a,d,v){if(!(s=R(s)))return!1;let A=null,I=j(s);const q=!I&&Ft(s);if(I||q){if(q&&!q.standalone)return!1;A=s}else{const pe=s.ngModule;if(I=j(pe),!I)return!1;A=pe}const se=v.has(A);if(q){if(se)return!1;if(v.add(A),q.dependencies){const pe="function"==typeof q.dependencies?q.dependencies():q.dependencies;for(const Me of pe)sp(Me,a,d,v)}}else{if(!I)return!1;{if(null!=I.imports&&!se){let Me;v.add(A);try{Xo(I.imports,Ye=>{sp(Ye,a,d,v)&&(Me||(Me=[]),Me.push(Ye))})}finally{}void 0!==Me&&am(Me,a)}if(!se){const Me=mr(A)||(()=>new A);a.push({provide:A,useFactory:Me,deps:et},{provide:rm,useValue:A,multi:!0},{provide:rp,useValue:()=>$r(A),multi:!0})}const pe=I.providers;null==pe||se||Xo(pe,Ye=>{a.push(Ye)})}}return A!==s&&void 0!==s.providers}const C0=w({provide:String,useValue:w});function op(s){return null!==s&&"object"==typeof s&&C0 in s}function Zl(s){return"function"==typeof s}const ap=new Z("Set Injector scope."),cl={},ja={};let Ia;function pa(){return void 0===Ia&&(Ia=new sm),Ia}class ha{}class Vl extends ha{constructor(a,d,v,A){super(),this.parent=d,this.source=v,this.scopes=A,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cp(a,q=>this.processProvider(q)),this.records.set(im,cc(void 0,this)),A.has("environment")&&this.records.set(ha,cc(void 0,this));const I=this.records.get(ap);null!=I&&"string"==typeof I.value&&this.scopes.add(I.value),this.injectorDefTypes=new Set(this.get(rm.multi,et,Re.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const d=Or(this),v=Xe(void 0);try{return a()}finally{Or(d),Xe(v)}}get(a,d=Nr,v=Re.Default){this.assertNotDestroyed();const A=Or(this),I=Xe(void 0);try{if(!(v&Re.SkipSelf)){let se=this.records.get(a);if(void 0===se){const pe=function S0(s){return"function"==typeof s||"object"==typeof s&&s instanceof Z}(a)&&qt(a);se=pe&&this.injectableDefInScope(pe)?cc(lp(a),cl):null,this.records.set(a,se)}if(null!=se)return this.hydrate(a,se)}return(v&Re.Self?pa():this.parent).get(a,d=v&Re.Optional&&d===Nr?null:d)}catch(q){if("NullInjectorError"===q.name){if((q[rl]=q[rl]||[]).unshift(x(a)),A)throw q;return function sl(s,a,d,v){const A=s[rl];throw a[Pu]&&A.unshift(a[Pu]),s.message=function Gc(s,a,d,v=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let A=x(a);if(Array.isArray(a))A=a.map(x).join(" -> ");else if("object"==typeof a){let I=[];for(let q in a)if(a.hasOwnProperty(q)){let se=a[q];I.push(q+":"+("string"==typeof se?JSON.stringify(se):x(se)))}A=`{${I.join(", ")}}`}return`${d}${v?"("+v+")":""}[${A}]: ${s.replace(qa,"\n  ")}`}("\n"+s.message,A,d,v),s.ngTokenPath=A,s[rl]=null,s}(q,a,"R3InjectorError",this.source)}throw q}finally{Xe(I),Or(A)}}resolveInjectorInitializers(){const a=Or(this),d=Xe(void 0);try{const v=this.get(rp.multi,et,Re.Self);for(const A of v)A()}finally{Or(a),Xe(d)}}toString(){const a=[],d=this.records;for(const v of d.keys())a.push(x(v));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new P(205,!1)}processProvider(a){let d=Zl(a=R(a))?a:R(a&&a.provide);const v=function w0(s){return op(s)?cc(void 0,s.useValue):cc(um(s),cl)}(a);if(Zl(a)||!0!==a.multi)this.records.get(d);else{let A=this.records.get(d);A||(A=cc(void 0,cl,!0),A.factory=()=>Ul(A.multi),this.records.set(d,A)),d=a,A.multi.push(a)}this.records.set(d,v)}hydrate(a,d){return d.value===cl&&(d.value=ja,d.value=d.factory()),"object"==typeof d.value&&d.value&&function A0(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(d.value)&&this._ngOnDestroyHooks.add(d.value),d.value}injectableDefInScope(a){if(!a.providedIn)return!1;const d=R(a.providedIn);return"string"==typeof d?"any"===d||this.scopes.has(d):this.injectorDefTypes.has(d)}}function lp(s){const a=qt(s),d=null!==a?a.factory:mr(s);if(null!==d)return d;if(s instanceof Z)throw new P(204,!1);if(s instanceof Function)return function qu(s){const a=s.length;if(a>0)throw Le(a,"?"),new P(204,!1);const d=function Dt(s){const a=s&&(s[ae]||s[je]);if(a){const d=function X(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${d}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${d}" class.`),a}return null}(s);return null!==d?()=>d.factory(s):()=>new s}(s);throw new P(204,!1)}function um(s,a,d){let v;if(Zl(s)){const A=R(s);return mr(A)||lp(A)}if(op(s))v=()=>R(s.useValue);else if(function cm(s){return!(!s||!s.useFactory)}(s))v=()=>s.useFactory(...Ul(s.deps||[]));else if(function lm(s){return!(!s||!s.useExisting)}(s))v=()=>$r(R(s.useExisting));else{const A=R(s&&(s.useClass||s.provide));if(!function T0(s){return!!s.deps}(s))return mr(A)||lp(A);v=()=>new A(...Ul(s.deps))}return v}function cc(s,a,d=!1){return{factory:s,value:a,multi:d?[]:void 0}}function x0(s){return!!s.\u0275providers}function cp(s,a){for(const d of s)Array.isArray(d)?cp(d,a):x0(d)?cp(d.\u0275providers,a):a(d)}class dm{}class Qu{resolveComponentFactory(a){throw function D0(s){const a=Error(`No component factory found for ${x(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let tr=(()=>{class s{}return s.NULL=new Qu,s})();function up(){return dc(Hi(),cn())}function dc(s,a){return new eu(ss(s,a))}let eu=(()=>{class s{constructor(d){this.nativeElement=d}}return s.__NG_ELEMENT_ID__=up,s})();function M0(s){return s instanceof eu?s.nativeElement:s}class pm{}let N0=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function O0(){const s=cn(),d=ki(Hi().index,s);return(rn(d)?d:s)[11]}(),s})(),k0=(()=>{class s{}return s.\u0275prov=ct({token:s,providedIn:"root",factory:()=>null}),s})();class hm{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const R0=new hm("14.2.2"),dp={};function bp(s){return s.ngOriginalError}class Bo{constructor(){this._console=console}handleError(a){const d=this._findOriginalError(a);this._console.error("ERROR",a),d&&this._console.error("ORIGINAL ERROR",d)}_findOriginalError(a){let d=a&&bp(a);for(;d&&bp(d);)d=bp(d);return d||null}}const F0=/^>|^->|<!--|-->|--!>|<!-$/g,Z0=/(<|>)/;const Tp=new Map;let Q0=0;const Sp="__ngContext__";function Eo(s,a){rn(a)?(s[Sp]=a[20],function j0(s){Tp.set(s[20],s)}(a)):s[Sp]=a}function Sm(s){return s.ownerDocument.defaultView}function xm(s){return s.ownerDocument}function ul(s){return s instanceof Function?s():s}var Ka=(()=>((Ka=Ka||{})[Ka.Important=1]="Important",Ka[Ka.DashCase=2]="DashCase",Ka))();let xp;function Wu(s,a){return xp(s,a)}function nu(s){const a=s[3];return bn(a)?a[3]:a}function Ep(s){return Im(s[13])}function Dp(s){return Im(s[4])}function Im(s){for(;null!==s&&!bn(s);)s=s[4];return s}function hc(s,a,d,v,A){if(null!=v){let I,q=!1;bn(v)?I=v:rn(v)&&(q=!0,v=v[0]);const se=Di(v);0===s&&null!==d?null==A?ma(a,d,se):ea(a,d,se,A||null,!0):1===s&&null!==d?ea(a,d,se,A||null,!0):2===s?Gu(a,se,q):3===s&&a.destroyNode(se),null!=I&&function Bm(s,a,d,v,A){const I=d[7];I!==Di(d)&&hc(a,s,v,I,A);for(let se=10;se<d.length;se++){const pe=d[se];wl(pe[1],pe,s,a,v,I)}}(a,s,I,d,A)}}function Ip(s,a){return s.createText(a)}function Mm(s,a,d){s.setValue(a,d)}function Nm(s,a){return s.createComment(function vm(s){return s.replace(F0,a=>a.replace(Z0,"\u200b$1\u200b"))}(a))}function Mp(s,a,d){return s.createElement(a,d)}function hi(s,a){const d=s[9],v=d.indexOf(a),A=a[3];512&a[2]&&(a[2]&=-513,xr(A,-1)),d.splice(v,1)}function Np(s,a){if(s.length<=10)return;const d=10+a,v=s[d];if(v){const A=v[17];null!==A&&A!==s&&hi(A,v),a>0&&(s[d-1][4]=v[4]);const I=_l(s,10+a);!function cy(s,a){wl(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(v[1],v);const q=I[19];null!==q&&q.detachView(I[1]),v[3]=null,v[4]=null,v[2]&=-65}return v}function fa(s,a){if(!(128&a[2])){const d=a[11];d.destroyNode&&wl(s,a,d,3,null,null),function Hl(s){let a=s[13];if(!a)return Li(s[1],s);for(;a;){let d=null;if(rn(a))d=a[13];else{const v=a[10];v&&(d=v)}if(!d){for(;a&&!a[4]&&a!==s;)rn(a)&&Li(a[1],a),a=a[3];null===a&&(a=s),rn(a)&&Li(a[1],a),d=a&&a[4]}a=d}}(a)}}function Li(s,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function ju(s,a){let d;if(null!=s&&null!=(d=s.destroyHooks))for(let v=0;v<d.length;v+=2){const A=a[d[v]];if(!(A instanceof Ds)){const I=d[v+1];if(Array.isArray(I))for(let q=0;q<I.length;q+=2){const se=A[I[q]],pe=I[q+1];try{pe.call(se)}finally{}}else try{I.call(A)}finally{}}}}(s,a),function fr(s,a){const d=s.cleanup,v=a[7];let A=-1;if(null!==d)for(let I=0;I<d.length-1;I+=2)if("string"==typeof d[I]){const q=d[I+1],se="function"==typeof q?q(a):Di(a[q]),pe=v[A=d[I+2]],Me=d[I+3];"boolean"==typeof Me?se.removeEventListener(d[I],pe,Me):Me>=0?v[A=Me]():v[A=-Me].unsubscribe(),I+=2}else{const q=v[A=d[I+1]];d[I].call(q)}if(null!==v){for(let I=A+1;I<v.length;I++)(0,v[I])();a[7]=null}}(s,a),1===a[1].type&&a[11].destroy();const d=a[17];if(null!==d&&bn(a[3])){d!==a[3]&&hi(d,a);const v=a[19];null!==v&&v.detachView(s)}!function K0(s){Tp.delete(s[20])}(a)}}function Jl(s,a,d){return bl(s,a.parent,d)}function bl(s,a,d){let v=a;for(;null!==v&&40&v.type;)v=(a=v).parent;if(null===v)return d[0];if(2&v.flags){const A=s.data[v.directiveStart].encapsulation;if(A===ie.None||A===ie.Emulated)return null}return ss(v,d)}function ea(s,a,d,v,A){s.insertBefore(a,d,v,A)}function ma(s,a,d){s.appendChild(a,d)}function Op(s,a,d,v,A){null!==v?ea(s,a,d,v,A):ma(s,a,d)}function Ko(s,a){return s.parentNode(a)}function Om(s,a,d){return km(s,a,d)}function ql(s,a,d){return 40&s.type?ss(s,d):null}let Rp,km=ql;function Rm(s,a){km=s,Rp=a}function Ku(s,a,d,v){const A=Jl(s,v,a),I=a[11],se=Om(v.parent||a[6],v,a);if(null!=A)if(Array.isArray(d))for(let pe=0;pe<d.length;pe++)Op(I,A,d[pe],se,!1);else Op(I,A,d,se,!1);void 0!==Rp&&Rp(I,v,a,d,A)}function $u(s,a){if(null!==a){const d=a.type;if(3&d)return ss(a,s);if(4&d)return Pp(-1,s[a.index]);if(8&d){const v=a.child;if(null!==v)return $u(s,v);{const A=s[a.index];return bn(A)?Pp(-1,A):Di(A)}}if(32&d)return Wu(a,s)()||Di(s[a.index]);{const v=Pm(s,a);return null!==v?Array.isArray(v)?v[0]:$u(nu(s[16]),v):$u(s,a.next)}}return null}function Pm(s,a){return null!==a?s[16][6].projection[a.projection]:null}function Pp(s,a){const d=10+s+1;if(d<a.length){const v=a[d],A=v[1].firstChild;if(null!==A)return $u(v,A)}return a[7]}function Gu(s,a,d){const v=Ko(s,a);v&&function py(s,a,d,v){s.removeChild(a,d,v)}(s,v,a,d)}function Lm(s,a,d,v,A,I,q){for(;null!=d;){const se=v[d.index],pe=d.type;if(q&&0===a&&(se&&Eo(Di(se),v),d.flags|=4),64!=(64&d.flags))if(8&pe)Lm(s,a,d.child,v,A,I,!1),hc(a,s,A,se,I);else if(32&pe){const Me=Wu(d,v);let Ye;for(;Ye=Me();)hc(a,s,A,Ye,I);hc(a,s,A,se,I)}else 16&pe?Um(s,a,v,d,A,I):hc(a,s,A,se,I);d=q?d.projectionNext:d.next}}function wl(s,a,d,v,A,I){Lm(d,v,s.firstChild,a,A,I,!1)}function Um(s,a,d,v,A,I){const q=d[16],pe=q[6].projection[v.projection];if(Array.isArray(pe))for(let Me=0;Me<pe.length;Me++)hc(a,s,A,pe[Me],I);else Lm(s,a,pe,q[3],A,I,!0)}function Lp(s,a,d){s.setAttribute(a,"style",d)}function Up(s,a,d){""===d?s.removeAttribute(a,"class"):s.setAttribute(a,"class",d)}function Fm(s,a,d){let v=s.length;for(;;){const A=s.indexOf(a,d);if(-1===A)return A;if(0===A||s.charCodeAt(A-1)<=32){const I=a.length;if(A+I===v||s.charCodeAt(A+I)<=32)return A}d=A+1}}const Zo="ng-template";function fy(s,a,d){let v=0;for(;v<s.length;){let A=s[v++];if(d&&"class"===A){if(A=s[v],-1!==Fm(A.toLowerCase(),a,0))return!0}else if(1===A){for(;v<s.length&&"string"==typeof(A=s[v++]);)if(A.toLowerCase()===a)return!0;return!1}}return!1}function Zm(s){return 4===s.type&&s.value!==Zo}function pl(s,a,d){return a===(4!==s.type||d?s.value:Zo)}function Vm(s,a,d){let v=4;const A=s.attrs||[],I=function _y(s){for(let a=0;a<s.length;a++)if(or(s[a]))return a;return s.length}(A);let q=!1;for(let se=0;se<a.length;se++){const pe=a[se];if("number"!=typeof pe){if(!q)if(4&v){if(v=2|1&v,""!==pe&&!pl(s,pe,d)||""===pe&&1===a.length){if(Na(v))return!1;q=!0}}else{const Me=8&v?pe:a[++se];if(8&v&&null!==s.attrs){if(!fy(s.attrs,Me,d)){if(Na(v))return!1;q=!0}continue}const mt=my(8&v?"class":pe,A,Zm(s),d);if(-1===mt){if(Na(v))return!1;q=!0;continue}if(""!==Me){let Rt;Rt=mt>I?"":A[mt+1].toLowerCase();const Qt=8&v?Rt:null;if(Qt&&-1!==Fm(Qt,Me,0)||2&v&&Me!==Rt){if(Na(v))return!1;q=!0}}}}else{if(!q&&!Na(v)&&!Na(pe))return!1;if(q&&Na(pe))continue;q=!1,v=pe|1&v}}return Na(v)||q}function Na(s){return 0==(1&s)}function my(s,a,d,v){if(null===a)return-1;let A=0;if(v||!d){let I=!1;for(;A<a.length;){const q=a[A];if(q===s)return A;if(3===q||6===q)I=!0;else{if(1===q||2===q){let se=a[++A];for(;"string"==typeof se;)se=a[++A];continue}if(4===q)break;if(0===q){A+=4;continue}}A+=I?1:2}return-1}return function vy(s,a){let d=s.indexOf(4);if(d>-1)for(d++;d<s.length;){const v=s[d];if("number"==typeof v)return-1;if(v===a)return d;d++}return-1}(a,s)}function Hm(s,a,d=!1){for(let v=0;v<a.length;v++)if(Vm(s,a[v],d))return!0;return!1}function yy(s,a){e:for(let d=0;d<a.length;d++){const v=a[d];if(s.length===v.length){for(let A=0;A<s.length;A++)if(s[A]!==v[A])continue e;return!0}}return!1}function Jm(s,a){return s?":not("+a.trim()+")":a}function Cy(s){let a=s[0],d=1,v=2,A="",I=!1;for(;d<s.length;){let q=s[d];if("string"==typeof q)if(2&v){const se=s[++d];A+="["+q+(se.length>0?'="'+se+'"':"")+"]"}else 8&v?A+="."+q:4&v&&(A+=" "+q);else""!==A&&!Na(q)&&(a+=Jm(I,A),A=""),v=q,I=I||!Na(v);d++}return""!==A&&(a+=Jm(I,A)),a}const Mi={};function qm(s){Qm(Kn(),cn(),ot()+s,!1)}function Qm(s,a,d,v){if(!v)if(3==(3&a[2])){const I=s.preOrderCheckHooks;null!==I&&hr(a,I,d)}else{const I=s.preOrderHooks;null!==I&&Cr(a,I,0,d)}Vt(d)}function $m(s,a=null,d=null,v){const A=Gm(s,a,d,v);return A.resolveInjectorInitializers(),A}function Gm(s,a=null,d=null,v,A=new Set){const I=[d||et,y0(s)];return v=v||("object"==typeof s?void 0:x(s)),new Vl(I,a||pa(),v||null,A)}let Ql=(()=>{class s{static create(d,v){if(Array.isArray(d))return $m({name:""},v,d,"");{var A;const I=null!==(A=d.name)&&void 0!==A?A:"";return $m({name:I},d.parent,d.providers,I)}}}return s.THROW_IF_NOT_FOUND=Nr,s.NULL=new sm,s.\u0275prov=ct({token:s,providedIn:"any",factory:()=>$r(im)}),s.__NG_ELEMENT_ID__=-1,s})();function gc(s,a=Re.Default){const d=cn();return null===d?$r(s,a):Jt(Hi(),d,R(s),a)}function ig(){throw new Error("invalid")}function Yu(s,a){return s<<17|a<<2}function Oa(s){return s>>17&32767}function iu(s){return 2|s}function hl(s){return(131068&s)>>2}function Hp(s,a){return-131069&s|a<<2}function Jp(s){return 1|s}function dg(s,a){const d=s.contentQueries;if(null!==d)for(let v=0;v<d.length;v+=2){const A=d[v],I=d[v+1];if(-1!==I){const q=s.data[I];lr(A),q.contentQueries(2,a[I],I)}}}function rd(s,a,d,v,A,I,q,se,pe,Me,Ye){const mt=a.blueprint.slice();return mt[0]=A,mt[2]=76|v,(null!==Ye||s&&1024&s[2])&&(mt[2]|=1024),Vi(mt),mt[3]=mt[15]=s,mt[8]=d,mt[10]=q||s&&s[10],mt[11]=se||s&&s[11],mt[12]=pe||s&&s[12]||null,mt[9]=Me||s&&s[9]||null,mt[6]=I,mt[20]=function W0(){return Q0++}(),mt[21]=Ye,mt[16]=2==a.type?s[16]:mt,mt}function _c(s,a,d,v,A){let I=s.data[a];if(null===I)I=Kp(s,a,d,v,A),function At(){return Wn.lFrame.inI18n}()&&(I.flags|=64);else if(64&I.type){I.type=d,I.value=v,I.attrs=A;const q=he();I.injectorIndex=null===q?-1:q.injectorIndex}return z(I,!0),I}function Kp(s,a,d,v,A){const I=Te(),q=$e(),pe=s.data[a]=function Yy(s,a,d,v,A,I){return{type:d,index:v,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:A,attrs:I,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,q?I:I&&I.parent,d,a,v,A);return null===s.firstChild&&(s.firstChild=pe),null!==I&&(q?null==I.child&&null!==pe.parent&&(I.child=pe):null===I.next&&(I.next=pe)),pe}function vc(s,a,d,v){if(0===d)return-1;const A=a.length;for(let I=0;I<d;I++)a.push(v),s.blueprint.push(v),s.data.push(null);return A}function $p(s,a,d){si(a);try{const v=s.viewQuery;null!==v&&rh(1,v,d);const A=s.template;null!==A&&pg(s,a,A,1,d),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&dg(s,a),s.staticViewQueries&&rh(2,s.viewQuery,d);const I=s.components;null!==I&&function Gy(s,a){for(let d=0;d<a.length;d++)dC(s,a[d])}(a,I)}catch(v){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),v}finally{a[2]&=-5,Oe()}}function sd(s,a,d,v){const A=a[2];if(128!=(128&A)){si(a);try{Vi(a),function Ie(s){return Wn.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==d&&pg(s,a,d,2,v);const q=3==(3&A);if(q){const Me=s.preOrderCheckHooks;null!==Me&&hr(a,Me,null)}else{const Me=s.preOrderHooks;null!==Me&&Cr(a,Me,0,null),sr(a,0)}if(function cC(s){for(let a=Ep(s);null!==a;a=Dp(a)){if(!a[2])continue;const d=a[9];for(let v=0;v<d.length;v++){const A=d[v],I=A[3];0==(512&A[2])&&xr(I,1),A[2]|=512}}}(a),function lC(s){for(let a=Ep(s);null!==a;a=Dp(a))for(let d=10;d<a.length;d++){const v=a[d],A=v[1];us(v)&&sd(A,v,A.template,v[8])}}(a),null!==s.contentQueries&&dg(s,a),q){const Me=s.contentCheckHooks;null!==Me&&hr(a,Me)}else{const Me=s.contentHooks;null!==Me&&Cr(a,Me,1),sr(a,1)}!function Ky(s,a){const d=s.hostBindingOpCodes;if(null!==d)try{for(let v=0;v<d.length;v++){const A=d[v];if(A<0)Vt(~A);else{const I=A,q=d[++v],se=d[++v];Lt(q,I),se(2,a[I])}}}finally{Vt(-1)}}(s,a);const se=s.components;null!==se&&function $y(s,a){for(let d=0;d<a.length;d++)uC(s,a[d])}(a,se);const pe=s.viewQuery;if(null!==pe&&rh(2,pe,v),q){const Me=s.viewCheckHooks;null!==Me&&hr(a,Me)}else{const Me=s.viewHooks;null!==Me&&Cr(a,Me,2),sr(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,xr(a[3],-1))}finally{Oe()}}}function pg(s,a,d,v,A){const I=ot(),q=2&v;try{Vt(-1),q&&a.length>22&&Qm(s,a,22,!1),d(v,A)}finally{Vt(I)}}function hg(s,a,d){if(An(a)){const A=a.directiveEnd;for(let I=a.directiveStart;I<A;I++){const q=s.data[I];q.contentQueries&&q.contentQueries(1,d[I],I)}}}function Gp(s,a,d){!yr()||(function iC(s,a,d,v){const A=d.directiveStart,I=d.directiveEnd;s.firstCreatePass||jo(d,a),Eo(v,a);const q=d.initialInputs;for(let se=A;se<I;se++){const pe=s.data[se],Me=oi(pe);Me&&aC(a,d,pe);const Ye=Pi(a,s,se,d);Eo(Ye,a),null!==q&&eh(0,se-A,Ye,pe,0,q),Me&&(ki(d.index,a)[8]=Ye)}}(s,a,d,ss(d,a)),128==(128&d.flags)&&function rC(s,a,d){const v=d.directiveStart,A=d.directiveEnd,I=d.index,q=function tn(){return Wn.lFrame.currentDirectiveIndex}();try{Vt(I);for(let se=v;se<A;se++){const pe=s.data[se],Me=a[se];fn(se),(null!==pe.hostBindings||0!==pe.hostVars||null!==pe.hostAttrs)&&bg(pe,Me)}}finally{Vt(-1),fn(q)}}(s,a,d))}function zp(s,a,d=ss){const v=a.localNames;if(null!==v){let A=a.index+1;for(let I=0;I<v.length;I+=2){const q=v[I+1],se=-1===q?d(a,s):s[q];s[A++]=se}}}function fg(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Yp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function Yp(s,a,d,v,A,I,q,se,pe,Me){const Ye=22+v,mt=Ye+A,Rt=function zy(s,a){const d=[];for(let v=0;v<a;v++)d.push(v<s?null:Mi);return d}(Ye,mt),Qt="function"==typeof Me?Me():Me;return Rt[1]={type:s,blueprint:Rt,template:d,queries:null,viewQuery:se,declTNode:a,data:Rt.slice().fill(null,Ye),bindingStartIndex:Ye,expandoStartIndex:mt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof I?I():I,pipeRegistry:"function"==typeof q?q():q,firstChild:null,schemas:pe,consts:Qt,incompleteFirstPass:!1}}function gg(s,a,d,v){const A=Sg(a);null===d?A.push(v):(A.push(d),s.firstCreatePass&&xg(s).push(v,A.length-1))}function _g(s,a,d){for(let v in s)if(s.hasOwnProperty(v)){const A=s[v];(d=null===d?{}:d).hasOwnProperty(v)?d[v].push(a,A):d[v]=[a,A]}return d}function vg(s,a){const v=a.directiveEnd,A=s.data,I=a.attrs,q=[];let se=null,pe=null;for(let Me=a.directiveStart;Me<v;Me++){const Ye=A[Me],mt=Ye.inputs,Rt=null===I||Zm(a)?null:th(mt,I);q.push(Rt),se=_g(mt,Me,se),pe=_g(Ye.outputs,Me,pe)}null!==se&&(se.hasOwnProperty("class")&&(a.flags|=16),se.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=q,a.inputs=se,a.outputs=pe}function ta(s,a,d,v,A,I,q,se){const pe=ss(a,d);let Ye,Me=a.inputs;!se&&null!=Me&&(Ye=Me[v])?(sh(s,d,Ye,v,A),wi(a)&&yg(d,a.index)):3&a.type&&(v=function Xy(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(v),A=null!=q?q(A,a.value||"",v):A,I.setProperty(pe,v,A))}function yg(s,a){const d=ki(a,s);16&d[2]||(d[2]|=32)}function Xp(s,a,d,v){let A=!1;if(yr()){const I=function sC(s,a,d){const v=s.directiveRegistry;let A=null;if(v)for(let I=0;I<v.length;I++){const q=v[I];Hm(d,q.selectors,!1)&&(A||(A=[]),Pe(jo(d,a),s,q.type),oi(q)?(wg(s,d),A.unshift(q)):A.push(q))}return A}(s,a,d),q=null===v?null:{"":-1};if(null!==I){A=!0,Tg(d,s.data.length,I.length);for(let Ye=0;Ye<I.length;Ye++){const mt=I[Ye];mt.providersResolver&&mt.providersResolver(mt)}let se=!1,pe=!1,Me=vc(s,a,I.length,null);for(let Ye=0;Ye<I.length;Ye++){const mt=I[Ye];d.mergedAttrs=Qo(d.mergedAttrs,mt.hostAttrs),od(s,d,a,Me,mt),oC(Me,mt,q),null!==mt.contentQueries&&(d.flags|=8),(null!==mt.hostBindings||null!==mt.hostAttrs||0!==mt.hostVars)&&(d.flags|=128);const Rt=mt.type.prototype;!se&&(Rt.ngOnChanges||Rt.ngOnInit||Rt.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(d.index),se=!0),!pe&&(Rt.ngOnChanges||Rt.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(d.index),pe=!0),Me++}vg(s,d)}q&&function Sl(s,a,d){if(a){const v=s.localNames=[];for(let A=0;A<a.length;A+=2){const I=d[a[A+1]];if(null==I)throw new P(-301,!1);v.push(a[A],I)}}}(d,v,q)}return d.mergedAttrs=Qo(d.mergedAttrs,d.attrs),A}function Cg(s,a,d,v,A,I){const q=I.hostBindings;if(q){let se=s.hostBindingOpCodes;null===se&&(se=s.hostBindingOpCodes=[]);const pe=~a.index;(function nC(s){let a=s.length;for(;a>0;){const d=s[--a];if("number"==typeof d&&d<0)return d}return 0})(se)!=pe&&se.push(pe),se.push(v,A,q)}}function bg(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function wg(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function oC(s,a,d){if(d){if(a.exportAs)for(let v=0;v<a.exportAs.length;v++)d[a.exportAs[v]]=s;oi(a)&&(d[""]=s)}}function Tg(s,a,d){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+d,s.providerIndexes=a}function od(s,a,d,v,A){s.data[v]=A;const I=A.factory||(A.factory=mr(A.type)),q=new Ds(I,oi(A),gc);s.blueprint[v]=q,d[v]=q,Cg(s,a,0,v,vc(s,d,A.hostVars,Mi),A)}function aC(s,a,d){const v=ss(a,s),A=fg(d),I=s[10],q=ad(s,rd(s,A,null,d.onPush?32:16,v,a,I,I.createRenderer(v,d),null,null,null));s[a.index]=q}function yc(s,a,d,v,A,I,q){if(null==I)s.removeAttribute(a,A,d);else{const se=null==q?W(I):q(I,v||"",A);s.setAttribute(a,A,se,d)}}function eh(s,a,d,v,A,I){const q=I[a];if(null!==q){const se=v.setInput;for(let pe=0;pe<q.length;){const Me=q[pe++],Ye=q[pe++],mt=q[pe++];null!==se?v.setInput(d,mt,Me,Ye):d[Ye]=mt}}}function th(s,a){let d=null,v=0;for(;v<a.length;){const A=a[v];if(0!==A)if(5!==A){if("number"==typeof A)break;s.hasOwnProperty(A)&&(null===d&&(d=[]),d.push(A,s[A],a[v+1])),v+=2}else v+=2;else v+=4}return d}function Ag(s,a,d,v){return new Array(s,!0,!1,a,null,0,v,d,null,null)}function uC(s,a){const d=ki(a,s);if(us(d)){const v=d[1];48&d[2]?sd(v,d,v.template,d[8]):d[5]>0&&nh(d)}}function nh(s){for(let v=Ep(s);null!==v;v=Dp(v))for(let A=10;A<v.length;A++){const I=v[A];if(us(I))if(512&I[2]){const q=I[1];sd(q,I,q.template,I[8])}else I[5]>0&&nh(I)}const d=s[1].components;if(null!==d)for(let v=0;v<d.length;v++){const A=ki(d[v],s);us(A)&&A[5]>0&&nh(A)}}function dC(s,a){const d=ki(a,s),v=d[1];(function pC(s,a){for(let d=a.length;d<s.blueprint.length;d++)a.push(s.blueprint[d])})(v,d),$p(v,d,d[8])}function ad(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function ih(s){for(;s;){s[2]|=32;const a=nu(s);if(dr(s)&&!a)return s;s=a}return null}function ld(s,a,d,v=!0){const A=a[10];A.begin&&A.begin();try{sd(s,a,s.template,d)}catch(q){throw v&&Dg(a,q),q}finally{A.end&&A.end()}}function rh(s,a,d){lr(0),a(s,d)}function Sg(s){return s[7]||(s[7]=[])}function xg(s){return s.cleanup||(s.cleanup=[])}function Dg(s,a){const d=s[9],v=d?d.get(Bo,null):null;v&&v.handleError(a)}function sh(s,a,d,v,A){for(let I=0;I<d.length;){const q=d[I++],se=d[I++],pe=a[q],Me=s.data[q];null!==Me.setInput?Me.setInput(pe,A,v,se):pe[se]=A}}function Pa(s,a,d){const v=jr(a,s);Mm(s[11],v,d)}function cd(s,a,d){let v=d?s.styles:null,A=d?s.classes:null,I=0;if(null!==a)for(let q=0;q<a.length;q++){const se=a[q];"number"==typeof se?I=se:1==I?A=b(A,se):2==I&&(v=b(v,se+": "+a[++q]+";"))}d?s.styles=v:s.stylesWithoutHost=v,d?s.classes=A:s.classesWithoutHost=A}function ud(s,a,d,v,A=!1){for(;null!==d;){const I=a[d.index];if(null!==I&&v.push(Di(I)),bn(I))for(let se=10;se<I.length;se++){const pe=I[se],Me=pe[1].firstChild;null!==Me&&ud(pe[1],pe,Me,v)}const q=d.type;if(8&q)ud(s,a,d.child,v);else if(32&q){const se=Wu(d,a);let pe;for(;pe=se();)v.push(pe)}else if(16&q){const se=Pm(a,d);if(Array.isArray(se))v.push(...se);else{const pe=nu(a[16]);ud(pe[1],pe,se,v,!0)}}d=A?d.projectionNext:d.next}return v}class ru{constructor(a,d){this._lView=a,this._cdRefInjectingView=d,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,d=a[1];return ud(d,a,d.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(bn(a)){const d=a[8],v=d?d.indexOf(this):-1;v>-1&&(Np(a,v),_l(d,v))}this._attachedToViewContainer=!1}fa(this._lView[1],this._lView)}onDestroy(a){gg(this._lView[1],this._lView,null,a)}markForCheck(){ih(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ld(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new P(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function BT(s,a){wl(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new P(902,!1);this._appRef=a}}class su extends ru{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;ld(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class oh extends tr{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const d=Ft(a);return new jl(d,this.ngModule)}}function ah(s){const a=[];for(let d in s)s.hasOwnProperty(d)&&a.push({propName:s[d],templateName:d});return a}class fC{constructor(a,d){this.injector=a,this.parentInjector=d}get(a,d,v){const A=this.injector.get(a,dp,v);return A!==dp||d===dp?A:this.parentInjector.get(a,d,v)}}class jl extends dm{constructor(a,d){super(),this.componentDef=a,this.ngModule=d,this.componentType=a.type,this.selector=function by(s){return s.map(Cy).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!d}get inputs(){return ah(this.componentDef.inputs)}get outputs(){return ah(this.componentDef.outputs)}create(a,d,v,A){var I;let q=(A=A||this.ngModule)instanceof ha?A:null===(I=A)||void 0===I?void 0:I.injector;q&&null!==this.componentDef.getStandaloneInjector&&(q=this.componentDef.getStandaloneInjector(q)||q);const se=q?new fC(a,q):a,pe=se.get(pm,null);if(null===pe)throw new P(407,!1);const Me=se.get(k0,null),Ye=pe.createRenderer(null,this.componentDef),mt=this.componentDef.selectors[0][0]||"div",Rt=v?function mg(s,a,d){return s.selectRootElement(a,d===ie.ShadowDom)}(Ye,v,this.componentDef.encapsulation):Mp(pe.createRenderer(null,this.componentDef),mt,function hC(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(mt)),Qt=this.componentDef.onPush?288:272,dn=Yp(0,null,null,1,0,null,null,null,null,null),wn=rd(null,dn,null,Qt,null,null,pe,Ye,Me,se,null);let On,Jn;si(wn);try{const bi=function Mg(s,a,d,v,A,I){const q=d[1];d[22]=s;const pe=_c(q,22,2,"#host",null),Me=pe.mergedAttrs=a.hostAttrs;null!==Me&&(cd(pe,Me,!0),null!==s&&(qo(A,s,Me),null!==pe.classes&&Up(A,s,pe.classes),null!==pe.styles&&Lp(A,s,pe.styles)));const Ye=v.createRenderer(s,a),mt=rd(d,fg(a),null,a.onPush?32:16,d[22],pe,v,Ye,I||null,null,null);return q.firstCreatePass&&(Pe(jo(pe,d),q,a.type),wg(q,pe),Tg(pe,d.length,1)),ad(d,mt),d[22]=mt}(Rt,this.componentDef,wn,pe,Ye);if(Rt)if(v)qo(Ye,Rt,["ng-version",R0.full]);else{const{attrs:_n,classes:ci}=function wy(s){const a=[],d=[];let v=1,A=2;for(;v<s.length;){let I=s[v];if("string"==typeof I)2===A?""!==I&&a.push(I,s[++v]):8===A&&d.push(I);else{if(!Na(A))break;A=I}v++}return{attrs:a,classes:d}}(this.componentDef.selectors[0]);_n&&qo(Ye,Rt,_n),ci&&ci.length>0&&Up(Ye,Rt,ci.join(" "))}if(Jn=Us(dn,22),void 0!==d){const _n=Jn.projection=[];for(let ci=0;ci<this.ngContentSelectors.length;ci++){const ar=d[ci];_n.push(null!=ar?Array.from(ar):null)}}On=function mC(s,a,d,v){const A=d[1],I=function tC(s,a,d){const v=Hi();s.firstCreatePass&&(d.providersResolver&&d.providersResolver(d),od(s,v,a,vc(s,a,1,null),d),vg(s,v));const A=Pi(a,s,v.directiveStart,v);Eo(A,a);const I=ss(v,a);return I&&Eo(I,a),A}(A,d,a);if(s[8]=d[8]=I,null!==v)for(const se of v)se(I,a);if(a.contentQueries){const se=Hi();a.contentQueries(1,I,se.directiveStart)}const q=Hi();return!A.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Vt(q.index),Cg(d[1],q,0,q.directiveStart,q.directiveEnd,a),bg(a,I)),I}(bi,this.componentDef,wn,[gC]),$p(dn,wn,null)}finally{Oe()}return new xl(this.componentType,On,dc(Jn,wn),wn,Jn)}}class xl extends class E0{}{constructor(a,d,v,A,I){super(),this.location=v,this._rootLView=A,this._tNode=I,this.instance=d,this.hostView=this.changeDetectorRef=new su(A),this.componentType=a}setInput(a,d){const v=this._tNode.inputs;let A;if(null!==v&&(A=v[a])){const I=this._rootLView;sh(I[1],I,A,a,d),yg(I,this._tNode.index)}}get injector(){return new Qs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function gC(){const s=Hi();Ci(cn()[1],s)}function lh(s){let a=function Ng(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),d=!0;const v=[s];for(;a;){let A;if(oi(s))A=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new P(903,!1);A=a.\u0275dir}if(A){if(d){v.push(A);const q=s;q.inputs=ch(s.inputs),q.declaredInputs=ch(s.declaredInputs),q.outputs=ch(s.outputs);const se=A.hostBindings;se&&CC(s,se);const pe=A.viewQuery,Me=A.contentQueries;if(pe&&vC(s,pe),Me&&yC(s,Me),f(s.inputs,A.inputs),f(s.declaredInputs,A.declaredInputs),f(s.outputs,A.outputs),oi(A)&&A.data.animation){const Ye=s.data;Ye.animation=(Ye.animation||[]).concat(A.data.animation)}}const I=A.features;if(I)for(let q=0;q<I.length;q++){const se=I[q];se&&se.ngInherit&&se(s),se===lh&&(d=!1)}}a=Object.getPrototypeOf(a)}!function _C(s){let a=0,d=null;for(let v=s.length-1;v>=0;v--){const A=s[v];A.hostVars=a+=A.hostVars,A.hostAttrs=Qo(A.hostAttrs,d=Qo(d,A.hostAttrs))}}(v)}function ch(s){return s===ze?{}:s===et?[]:s}function vC(s,a){const d=s.viewQuery;s.viewQuery=d?(v,A)=>{a(v,A),d(v,A)}:a}function yC(s,a){const d=s.contentQueries;s.contentQueries=d?(v,A,I)=>{a(v,A,I),d(v,A,I)}:a}function CC(s,a){const d=s.hostBindings;s.hostBindings=d?(v,A)=>{a(v,A),d(v,A)}:a}let dd=null;function $l(){if(!dd){const s=L.Symbol;if(s&&s.iterator)dd=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let d=0;d<a.length;++d){const v=a[d];"entries"!==v&&"size"!==v&&Map.prototype[v]===Map.prototype.entries&&(dd=v)}}}return dd}function Xr(s){return!!uh(s)&&(Array.isArray(s)||!(s instanceof Map)&&$l()in s)}function uh(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ga(s,a,d){return s[a]=d}function bc(s,a){return s[a]}function Io(s,a,d){return!Object.is(s[a],d)&&(s[a]=d,!0)}function Gl(s,a,d,v){const A=Io(s,a,d);return Io(s,a+1,v)||A}function ga(s,a,d,v,A,I){const q=Gl(s,a,d,v);return Gl(s,a+2,A,I)||q}function dh(s,a,d,v){const A=cn();return Io(A,Fe(),a)&&(Kn(),function $a(s,a,d,v,A,I){const q=ss(s,a);yc(a[11],q,I,s.value,d,v,A)}(zt(),A,s,a,d,v)),dh}function Tc(s,a,d,v){return Io(s,Fe(),d)?a+W(d)+v:Mi}function Ac(s,a,d,v,A,I){const se=Gl(s,ai(),d,A);return yt(2),se?a+W(d)+v+W(A)+I:Mi}function Zg(s,a,d,v,A,I,q,se){const pe=cn(),Me=Kn(),Ye=s+22,mt=Me.firstCreatePass?function xC(s,a,d,v,A,I,q,se,pe){const Me=a.consts,Ye=_c(a,s,4,q||null,Ii(Me,se));Xp(a,d,Ye,Ii(Me,pe)),Ci(a,Ye);const mt=Ye.tViews=Yp(2,Ye,v,A,I,a.directiveRegistry,a.pipeRegistry,null,a.schemas,Me);return null!==a.queries&&(a.queries.template(a,Ye),mt.queries=a.queries.embeddedTView(Ye)),Ye}(Ye,Me,pe,a,d,v,A,I,q):Me.data[Ye];z(mt,!1);const Rt=pe[11].createComment("");Ku(Me,pe,Rt,mt),Eo(Rt,pe),ad(pe,pe[Ye]=Ag(Rt,pe,Rt,mt)),di(mt)&&Gp(Me,pe,mt),null!=q&&zp(pe,mt,se)}function Vg(s){return Es(function xi(){return Wn.lFrame.contextLView}(),22+s)}function ph(s,a,d){const v=cn();return Io(v,Fe(),a)&&ta(Kn(),zt(),v,s,a,v[11],d,!1),ph}function hh(s,a,d,v,A){const q=A?"class":"style";sh(s,d,a.inputs[q],q,v)}function fd(s,a,d,v){const A=cn(),I=Kn(),q=22+s,se=A[11],pe=A[q]=Mp(se,a,function Ut(){return Wn.lFrame.currentNamespace}()),Me=I.firstCreatePass?function DC(s,a,d,v,A,I,q){const se=a.consts,Me=_c(a,s,2,A,Ii(se,I));return Xp(a,d,Me,Ii(se,q)),null!==Me.attrs&&cd(Me,Me.attrs,!1),null!==Me.mergedAttrs&&cd(Me,Me.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,Me),Me}(q,I,A,0,a,d,v):I.data[q];z(Me,!0);const Ye=Me.mergedAttrs;null!==Ye&&qo(se,pe,Ye);const mt=Me.classes;null!==mt&&Up(se,pe,mt);const Rt=Me.styles;return null!==Rt&&Lp(se,pe,Rt),64!=(64&Me.flags)&&Ku(I,A,pe,Me),0===function Kr(){return Wn.lFrame.elementDepthCount}()&&Eo(pe,A),function Ao(){Wn.lFrame.elementDepthCount++}(),di(Me)&&(Gp(I,A,Me),hg(I,Me,A)),null!==v&&zp(A,Me),fd}function md(){let s=Hi();$e()?$t():(s=s.parent,z(s,!1));const a=s;!function Ti(){Wn.lFrame.elementDepthCount--}();const d=Kn();return d.firstCreatePass&&(Ci(d,s),An(s)&&d.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Jo(s){return 0!=(16&s.flags)}(a)&&hh(d,a,cn(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function ba(s){return 0!=(32&s.flags)}(a)&&hh(d,a,cn(),a.stylesWithoutHost,!1),md}function fh(s,a,d,v){return fd(s,a,d,v),md(),fh}function gd(s,a,d){const v=cn(),A=Kn(),I=s+22,q=A.firstCreatePass?function IC(s,a,d,v,A){const I=a.consts,q=Ii(I,v),se=_c(a,s,8,"ng-container",q);return null!==q&&cd(se,q,!0),Xp(a,d,se,Ii(I,A)),null!==a.queries&&a.queries.elementStart(a,se),se}(I,A,v,a,d):A.data[I];z(q,!0);const se=v[I]=v[11].createComment("");return Ku(A,v,se,q),Eo(se,v),di(q)&&(Gp(A,v,q),hg(A,q,v)),null!=d&&zp(v,q),gd}function _d(){let s=Hi();const a=Kn();return $e()?$t():(s=s.parent,z(s,!1)),a.firstCreatePass&&(Ci(a,s),An(s)&&a.queries.elementEnd(s)),_d}function mh(s,a,d){return gd(s,a,d),_d(),mh}function Hg(){return cn()}function gh(s){return!!s&&"function"==typeof s.then}function Jg(s){return!!s&&"function"==typeof s.subscribe}const qg=Jg;function _h(s,a,d,v){const A=cn(),I=Kn(),q=Hi();return function Wg(s,a,d,v,A,I,q,se){const pe=di(v),Ye=s.firstCreatePass&&xg(s),mt=a[8],Rt=Sg(a);let Qt=!0;if(3&v.type||se){const On=ss(v,a),Jn=se?se(On):On,bi=Rt.length,_n=se?ar=>se(Di(ar[v.index])):v.index;let ci=null;if(!se&&pe&&(ci=function MC(s,a,d,v){const A=s.cleanup;if(null!=A)for(let I=0;I<A.length-1;I+=2){const q=A[I];if(q===d&&A[I+1]===v){const se=a[7],pe=A[I+2];return se.length>pe?se[pe]:null}"string"==typeof q&&(I+=2)}return null}(s,a,A,v.index)),null!==ci)(ci.__ngLastListenerFn__||ci).__ngNextListenerFn__=I,ci.__ngLastListenerFn__=I,Qt=!1;else{I=Kg(v,a,mt,I,!1);const ar=d.listen(Jn,A,I);Rt.push(I,ar),Ye&&Ye.push(A,_n,bi,bi+1)}}else I=Kg(v,a,mt,I,!1);const dn=v.outputs;let wn;if(Qt&&null!==dn&&(wn=dn[A])){const On=wn.length;if(On)for(let Jn=0;Jn<On;Jn+=2){const bs=a[wn[Jn]][wn[Jn+1]].subscribe(I),rc=Rt.length;Rt.push(I,bs),Ye&&Ye.push(A,v.index,rc,-(rc+1))}}}(I,A,A[11],q,s,a,0,v),_h}function jg(s,a,d,v){try{return!1!==d(v)}catch(A){return Dg(s,A),!1}}function Kg(s,a,d,v,A){return function I(q){if(q===Function)return v;ih(2&s.flags?ki(s.index,a):a);let pe=jg(a,0,v,q),Me=I.__ngNextListenerFn__;for(;Me;)pe=jg(a,0,Me,q)&&pe,Me=Me.__ngNextListenerFn__;return A&&!1===pe&&(q.preventDefault(),q.returnValue=!1),pe}}function $g(s=1){return function ge(s){return(Wn.lFrame.contextLView=function He(s,a){for(;s>0;)a=a[15],s--;return a}(s,Wn.lFrame.contextLView))[8]}(s)}function NC(s,a){let d=null;const v=function gy(s){const a=s.attrs;if(null!=a){const d=a.indexOf(5);if(0==(1&d))return a[d+1]}return null}(s);for(let A=0;A<a.length;A++){const I=a[A];if("*"!==I){if(null===v?Hm(s,I,!0):yy(v,I))return A}else d=A}return d}function Gg(s){const a=cn()[16][6];if(!a.projection){const v=a.projection=Le(s?s.length:1,null),A=v.slice();let I=a.child;for(;null!==I;){const q=s?NC(I,s):0;null!==q&&(A[q]?A[q].projectionNext=I:v[q]=I,A[q]=I),I=I.next}}}function zg(s,a=0,d){const v=cn(),A=Kn(),I=_c(A,22+s,16,null,d||null);null===I.projection&&(I.projection=a),$t(),64!=(64&I.flags)&&function hy(s,a,d){Um(a[11],0,a,d,Jl(s,d,a),Om(d.parent||a[6],d,a))}(A,v,I)}function vh(s,a,d){return vd(s,"",a,"",d),vh}function vd(s,a,d,v,A){const I=cn(),q=Tc(I,a,d,v);return q!==Mi&&ta(Kn(),zt(),I,s,q,I[11],A,!1),vd}function yh(s,a,d,v,A,I,q){const se=cn(),pe=Ac(se,a,d,v,A,I);return pe!==Mi&&ta(Kn(),zt(),se,s,pe,se[11],q,!1),yh}function r_(s,a,d,v,A){const I=s[d+1],q=null===a;let se=v?Oa(I):hl(I),pe=!1;for(;0!==se&&(!1===pe||q);){const Ye=s[se+1];kC(s[se],a)&&(pe=!0,s[se+1]=v?Jp(Ye):iu(Ye)),se=v?Oa(Ye):hl(Ye)}pe&&(s[d+1]=v?iu(I):Jp(I))}function kC(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&Ee(s,a)>=0}const lo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function s_(s){return s.substring(lo.key,lo.keyEnd)}function a_(s,a){const d=lo.textEnd;return d===a?-1:(a=lo.keyEnd=function LC(s,a,d){for(;a<d&&s.charCodeAt(a)>32;)a++;return a}(s,lo.key=a,d),El(s,a,d))}function El(s,a,d){for(;a<d&&s.charCodeAt(a)<=32;)a++;return a}function bh(s,a,d){return La(s,a,d,!1),bh}function wh(s,a){return La(s,a,null,!0),wh}function p_(s){Ua(re,Ya,s,!0)}function Ya(s,a){for(let d=function RC(s){return function c_(s){lo.key=0,lo.keyEnd=0,lo.value=0,lo.valueEnd=0,lo.textEnd=s.length}(s),a_(s,El(s,0,lo.textEnd))}(a);d>=0;d=a_(a,d))re(s,s_(a),!0)}function La(s,a,d,v){const A=cn(),I=Kn(),q=yt(2);I.firstUpdatePass&&f_(I,s,q,v),a!==Mi&&Io(A,q,a)&&yd(I,I.data[ot()],A,A[11],s,A[q+1]=function g_(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=x(al(s)))),s}(a,d),v,q)}function Ua(s,a,d,v){const A=Kn(),I=yt(2);A.firstUpdatePass&&f_(A,null,I,v);const q=cn();if(d!==Mi&&Io(q,I,d)){const se=A.data[ot()];if(__(se,v)&&!h_(A,I)){let pe=v?se.classesWithoutHost:se.stylesWithoutHost;null!==pe&&(d=b(pe,d||"")),hh(A,se,q,d,v)}else!function QC(s,a,d,v,A,I,q,se){A===Mi&&(A=et);let pe=0,Me=0,Ye=0<A.length?A[0]:null,mt=0<I.length?I[0]:null;for(;null!==Ye||null!==mt;){const Rt=pe<A.length?A[pe+1]:void 0,Qt=Me<I.length?I[Me+1]:void 0;let wn,dn=null;Ye===mt?(pe+=2,Me+=2,Rt!==Qt&&(dn=mt,wn=Qt)):null===mt||null!==Ye&&Ye<mt?(pe+=2,dn=Ye):(Me+=2,dn=mt,wn=Qt),null!==dn&&yd(s,a,d,v,dn,wn,q,se),Ye=pe<A.length?A[pe]:null,mt=Me<I.length?I[Me]:null}}(A,se,q,q[11],q[I+1],q[I+1]=function qC(s,a,d){if(null==d||""===d)return et;const v=[],A=al(d);if(Array.isArray(A))for(let I=0;I<A.length;I++)s(v,A[I],!0);else if("object"==typeof A)for(const I in A)A.hasOwnProperty(I)&&s(v,I,A[I]);else"string"==typeof A&&a(v,A);return v}(s,a,d),v,I)}}function h_(s,a){return a>=s.expandoStartIndex}function f_(s,a,d,v){const A=s.data;if(null===A[d+1]){const I=A[ot()],q=h_(s,d);__(I,v)&&null===a&&!q&&(a=!1),a=function ZC(s,a,d,v){const A=$n(s);let I=v?a.residualClasses:a.residualStyles;if(null===A)0===(v?a.classBindings:a.styleBindings)&&(d=ou(d=Th(null,s,a,d,v),a.attrs,v),I=null);else{const q=a.directiveStylingLast;if(-1===q||s[q]!==A)if(d=Th(A,s,a,d,v),null===I){let pe=function VC(s,a,d){const v=d?a.classBindings:a.styleBindings;if(0!==hl(v))return s[Oa(v)]}(s,a,v);void 0!==pe&&Array.isArray(pe)&&(pe=Th(null,s,a,pe[1],v),pe=ou(pe,a.attrs,v),function HC(s,a,d,v){s[Oa(d?a.classBindings:a.styleBindings)]=v}(s,a,v,pe))}else I=function JC(s,a,d){let v;const A=a.directiveEnd;for(let I=1+a.directiveStylingLast;I<A;I++)v=ou(v,s[I].hostAttrs,d);return ou(v,a.attrs,d)}(s,a,v)}return void 0!==I&&(v?a.residualClasses=I:a.residualStyles=I),d}(A,I,a,v),function Ch(s,a,d,v,A,I){let q=I?a.classBindings:a.styleBindings,se=Oa(q),pe=hl(q);s[v]=d;let Ye,Me=!1;if(Array.isArray(d)){const mt=d;Ye=mt[1],(null===Ye||Ee(mt,Ye)>0)&&(Me=!0)}else Ye=d;if(A)if(0!==pe){const Rt=Oa(s[se+1]);s[v+1]=Yu(Rt,se),0!==Rt&&(s[Rt+1]=Hp(s[Rt+1],v)),s[se+1]=function sg(s,a){return 131071&s|a<<17}(s[se+1],v)}else s[v+1]=Yu(se,0),0!==se&&(s[se+1]=Hp(s[se+1],v)),se=v;else s[v+1]=Yu(pe,0),0===se?se=v:s[pe+1]=Hp(s[pe+1],v),pe=v;Me&&(s[v+1]=iu(s[v+1])),r_(s,Ye,v,!0),r_(s,Ye,v,!1),function OC(s,a,d,v,A){const I=A?s.residualClasses:s.residualStyles;null!=I&&"string"==typeof a&&Ee(I,a)>=0&&(d[v+1]=Jp(d[v+1]))}(a,Ye,s,v,I),q=Yu(se,pe),I?a.classBindings=q:a.styleBindings=q}(A,I,a,d,q,v)}}function Th(s,a,d,v,A){let I=null;const q=d.directiveEnd;let se=d.directiveStylingLast;for(-1===se?se=d.directiveStart:se++;se<q&&(I=a[se],v=ou(v,I.hostAttrs,A),I!==s);)se++;return null!==s&&(d.directiveStylingLast=se),v}function ou(s,a,d){const v=d?1:2;let A=-1;if(null!==a)for(let I=0;I<a.length;I++){const q=a[I];"number"==typeof q?A=q:A===v&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),re(s,q,!!d||a[++I]))}return void 0===s?null:s}function yd(s,a,d,v,A,I,q,se){if(!(3&a.type))return;const pe=s.data,Me=pe[se+1];Cd(function og(s){return 1==(1&s)}(Me)?WC(pe,a,d,A,hl(Me),q):void 0)||(Cd(I)||function Xu(s){return 2==(2&s)}(Me)&&(I=WC(pe,null,d,A,se,q)),function Ma(s,a,d,v,A){if(a)A?s.addClass(d,v):s.removeClass(d,v);else{let I=-1===v.indexOf("-")?void 0:Ka.DashCase;null==A?s.removeStyle(d,v,I):("string"==typeof A&&A.endsWith("!important")&&(A=A.slice(0,-10),I|=Ka.Important),s.setStyle(d,v,A,I))}}(v,q,jr(ot(),d),A,I))}function WC(s,a,d,v,A,I){const q=null===a;let se;for(;A>0;){const pe=s[A],Me=Array.isArray(pe),Ye=Me?pe[1]:pe,mt=null===Ye;let Rt=d[A+1];Rt===Mi&&(Rt=mt?et:void 0);let Qt=mt?ce(Rt,v):Ye===v?Rt:void 0;if(Me&&!Cd(Qt)&&(Qt=ce(pe,v)),Cd(Qt)&&(se=Qt,q))return se;const dn=s[A+1];A=q?Oa(dn):hl(dn)}if(null!==a){let pe=I?a.residualClasses:a.residualStyles;null!=pe&&(se=ce(pe,v))}return se}function Cd(s){return void 0!==s}function __(s,a){return 0!=(s.flags&(a?16:32))}function Ah(s,a=""){const d=cn(),v=Kn(),A=s+22,I=v.firstCreatePass?_c(v,A,1,a,null):v.data[A],q=d[A]=Ip(d[11],a);Ku(v,d,q,I),z(I,!1)}function Sh(s){return bd("",s,""),Sh}function bd(s,a,d){const v=cn(),A=Tc(v,s,a,d);return A!==Mi&&Pa(v,ot(),A),bd}function xh(s,a,d,v,A){const I=cn(),q=Ac(I,s,a,d,v,A);return q!==Mi&&Pa(I,ot(),q),xh}function Dh(s,a,d){Ua(re,Ya,Tc(cn(),s,a,d),!0)}function wd(s,a,d,v,A){Ua(re,Ya,Ac(cn(),s,a,d,v,A),!0)}function Ih(s,a,d){const v=cn();return Io(v,Fe(),a)&&ta(Kn(),zt(),v,s,a,v[11],d,!0),Ih}function Mh(s,a,d){const v=cn();if(Io(v,Fe(),a)){const I=Kn(),q=zt();ta(I,q,v,s,a,function Eg(s,a,d){return(null===s||oi(s))&&(d=function xs(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(d[a.index])),d[11]}($n(I.data),q,v),d,!0)}return Mh}const Yl=void 0;var O_=["en",[["a","p"],["AM","PM"],Yl],[["AM","PM"],Yl,Yl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yl,"{1} 'at' {0}",Yl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function lb(s){const d=Math.floor(Math.abs(s)),v=s.toString().replace(/^[^.]*\.?/,"").length;return 1===d&&0===v?1:5}];let Nc={};function Nh(s){const a=function cb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let d=Oc(a);if(d)return d;const v=a.split("-")[0];if(d=Oc(v),d)return d;if("en"===v)return O_;throw new P(701,!1)}function k_(s){return Nh(s)[fi.PluralCase]}function Oc(s){return s in Nc||(Nc[s]=L.ng&&L.ng.common&&L.ng.common.locales&&L.ng.common.locales[s]),Nc[s]}var fi=(()=>((fi=fi||{})[fi.LocaleId=0]="LocaleId",fi[fi.DayPeriodsFormat=1]="DayPeriodsFormat",fi[fi.DayPeriodsStandalone=2]="DayPeriodsStandalone",fi[fi.DaysFormat=3]="DaysFormat",fi[fi.DaysStandalone=4]="DaysStandalone",fi[fi.MonthsFormat=5]="MonthsFormat",fi[fi.MonthsStandalone=6]="MonthsStandalone",fi[fi.Eras=7]="Eras",fi[fi.FirstDayOfWeek=8]="FirstDayOfWeek",fi[fi.WeekendRange=9]="WeekendRange",fi[fi.DateFormat=10]="DateFormat",fi[fi.TimeFormat=11]="TimeFormat",fi[fi.DateTimeFormat=12]="DateTimeFormat",fi[fi.NumberSymbols=13]="NumberSymbols",fi[fi.NumberFormats=14]="NumberFormats",fi[fi.CurrencyCode=15]="CurrencyCode",fi[fi.CurrencySymbol=16]="CurrencySymbol",fi[fi.CurrencyName=17]="CurrencyName",fi[fi.Currencies=18]="Currencies",fi[fi.Directionality=19]="Directionality",fi[fi.PluralCase=20]="PluralCase",fi[fi.ExtraData=21]="ExtraData",fi))();const ub=["zero","one","two","few","many"],kc="en-US",Sd={marker:"element"},xd={marker:"ICU"};var ks=(()=>((ks=ks||{})[ks.SHIFT=2]="SHIFT",ks[ks.APPEND_EAGERLY=1]="APPEND_EAGERLY",ks[ks.COMMENT=2]="COMMENT",ks))();let R_=kc;function P_(s){(function Ge(s,a){null==s&&ve(a,s,null,"!=")})(s,"Expected localeId to be defined"),"string"==typeof s&&(R_=s.toLowerCase().replace(/_/g,"-"))}function L_(s,a,d){const v=a.insertBeforeIndex,A=Array.isArray(v)?v[0]:v;return null===A?ql(s,0,d):Di(d[A])}function U_(s,a,d,v,A){const I=a.insertBeforeIndex;if(Array.isArray(I)){let q=v,se=null;if(3&a.type||(se=q,q=A),null!==q&&0==(2&a.flags))for(let pe=1;pe<I.length;pe++)ea(s,q,d[I[pe]],se,!1)}}function B_(s,a){if(s.push(a),s.length>1)for(let d=s.length-2;d>=0;d--){const v=s[d];F_(v)||fb(v,a)&&null===mb(v)&&gb(v,a.index)}}function F_(s){return!(64&s.type)}function fb(s,a){return F_(a)||s.index>a.index}function mb(s){const a=s.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function gb(s,a){const d=s.insertBeforeIndex;Array.isArray(d)?d[0]=a:(Rm(L_,U_),s.insertBeforeIndex=a)}function au(s,a){const d=s.data[a];return null===d||"string"==typeof d?null:d.hasOwnProperty("currentCaseLViewIndex")?d:d.value}function yb(s,a,d){const v=Kp(s,d,64,null,null);return B_(a,v),v}function Ed(s,a){const d=a[s.currentCaseLViewIndex];return null===d?d:d<0?~d:d}function Z_(s){return s>>>17}function V_(s){return(131070&s)>>>1}let lu=0,Rc=0;function q_(s,a,d,v){const A=d[11];let q,I=null;for(let se=0;se<a.length;se++){const pe=a[se];if("string"==typeof pe){const Me=a[++se];null===d[Me]&&(d[Me]=Ip(A,pe))}else if("number"==typeof pe)switch(1&pe){case 0:const Me=Z_(pe);let Ye,mt;if(null===I&&(I=Me,q=Ko(A,v)),Me===I?(Ye=v,mt=q):(Ye=null,mt=Di(d[Me])),null!==mt){const wn=V_(pe);ea(A,mt,d[wn],Ye,!1);const Jn=au(s,wn);if(null!==Jn&&"object"==typeof Jn){const bi=Ed(Jn,d);null!==bi&&q_(s,Jn.create[bi],d,d[Jn.anchorIdx])}}break;case 1:const Qt=a[++se],dn=a[++se];yc(A,jr(pe>>>1,d),null,null,Qt,dn,null)}else switch(pe){case xd:const Me=a[++se],Ye=a[++se];null===d[Ye]&&Eo(d[Ye]=Nm(A,Me),d);break;case Sd:const mt=a[++se],Rt=a[++se];null===d[Rt]&&Eo(d[Rt]=Mp(A,mt,null),d)}}}function Q_(s,a,d,v,A){for(let I=0;I<d.length;I++){const q=d[I],se=d[++I];if(q&A){let pe="";for(let Me=I+1;Me<=I+se;Me++){const Ye=d[Me];if("string"==typeof Ye)pe+=Ye;else if("number"==typeof Ye)if(Ye<0)pe+=W(a[v-Ye]);else{const mt=Ye>>>2;switch(3&Ye){case 1:const Rt=d[++Me],Qt=d[++Me],dn=s.data[mt];"string"==typeof dn?yc(a[11],a[mt],null,dn,Rt,pe,Qt):ta(s,dn,a,Rt,pe,a[11],Qt,!1);break;case 0:const wn=a[mt];null!==wn&&Mm(a[11],wn,pe);break;case 2:Tb(s,au(s,mt),a,pe);break;case 3:W_(s,au(s,mt),v,a)}}}}else{const pe=d[I+1];if(pe>0&&3==(3&pe)){const Ye=au(s,pe>>>2);a[Ye.currentCaseLViewIndex]<0&&W_(s,Ye,v,a)}}I+=se}}function W_(s,a,d,v){let A=v[a.currentCaseLViewIndex];if(null!==A){let I=lu;A<0&&(A=v[a.currentCaseLViewIndex]=~A,I=-1),Q_(s,v,a.update[A],d,I)}}function Tb(s,a,d,v){const A=function Ab(s,a){let d=s.cases.indexOf(a);if(-1===d)switch(s.type){case 1:{const v=function db(s,a){const d=k_(a)(parseInt(s,10)),v=ub[d];return void 0!==v?v:"other"}(a,function hb(){return R_}());d=s.cases.indexOf(v),-1===d&&"other"!==v&&(d=s.cases.indexOf("other"));break}case 0:d=s.cases.indexOf("other")}return-1===d?null:d}(a,v);if(Ed(a,d)!==A&&(j_(s,a,d),d[a.currentCaseLViewIndex]=null===A?null:~A,null!==A)){const q=d[a.anchorIdx];q&&q_(s,a.create[A],d,q)}}function j_(s,a,d){let v=Ed(a,d);if(null!==v){const A=a.remove[v];for(let I=0;I<A.length;I++){const q=A[I];if(q>0){const se=jr(q,d);null!==se&&Gu(d[11],se)}else j_(s,au(s,~q),d)}}}function Sb(){const s=[];let d,v,a=-1;function I(se,pe){a=0;const Me=Ed(se,pe);v=null!==Me?se.remove[Me]:et}function q(){if(a<v.length){const se=v[a++];return se>0?d[se]:(s.push(a,v),I(d[1].data[~se],d),q())}return 0===s.length?null:(v=s.pop(),a=s.pop(),q())}return function A(se,pe){for(d=pe;s.length;)s.pop();return I(se.value,pe),q}}const cu=/\ufffd(\d+):?\d*\ufffd/gi,kh=/\ufffd(\d+)\ufffd/,K_=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Eb=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Db=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Ib=/\uE500/g;function G_(s,a,d,v,A,I,q){const se=vc(s,v,1,null);let pe=se<<ks.SHIFT,Me=he();a===Me&&(Me=null),null===Me&&(pe|=ks.APPEND_EAGERLY),q&&(pe|=ks.COMMENT,function sy(s){void 0===xp&&(xp=s())}(Sb)),A.push(pe,null===I?"":I);const Ye=Kp(s,se,q?32:1,null===I?"":I,null);B_(d,Ye);const mt=Ye.index;return z(Ye,!1),null!==Me&&a!==Me&&function vb(s,a){let d=s.insertBeforeIndex;null===d?(Rm(L_,U_),d=s.insertBeforeIndex=[null,a]):(function E(s,a,d){s!=a&&ve(d,s,a,"==")}(Array.isArray(d),!0,"Expecting array here"),d.push(a))}(Me,mt),Ye}function Nb(s,a,d,v,A,I,q){const se=q.match(cu),pe=G_(s,a,d,I,v,se?null:q,!1);se&&uu(A,q,pe.index,null,0,null)}function uu(s,a,d,v,A,I){const q=s.length,se=q+1;s.push(null,null);const pe=q+2,Me=a.split(cu);let Ye=0;for(let mt=0;mt<Me.length;mt++){const Rt=Me[mt];if(1&mt){const Qt=A+parseInt(Rt,10);s.push(-1-Qt),Ye|=z_(Qt)}else""!==Rt&&s.push(Rt)}return s.push(d<<2|(v?1:0)),v&&s.push(v,I),s[q]=Ye,s[se]=s.length-pe,Ye}function z_(s){return 1<<Math.min(s,31)}function Y_(s){let a,I,d="",v=0,A=!1;for(;null!==(a=Eb.exec(s));)A?a[0]===`\ufffd/*${I}\ufffd`&&(v=a.index,A=!1):(d+=s.substring(v,a.index+a[0].length),I=a[1],A=!0);return d+=s.slice(v),d}function Rh(s,a,d,v,A,I){let q=0;const se={type:A.type,currentCaseLViewIndex:vc(s,a,1,null),anchorIdx:I,cases:[],create:[],remove:[],update:[]};(function Bb(s,a,d){s.push(z_(a.mainBinding),2,-1-a.mainBinding,d<<2|2)})(d,A,I),function _b(s,a,d){const v=s.data[a];null===v?s.data[a]=d:v.value=d}(s,I,se);const pe=A.values;for(let Me=0;Me<pe.length;Me++){const Ye=pe[Me],mt=[];for(let Rt=0;Rt<Ye.length;Rt++){const Qt=Ye[Rt];if("string"!=typeof Qt){const dn=mt.push(Qt)-1;Ye[Rt]=`\x3c!--\ufffd${dn}\ufffd--\x3e`}}q=Lb(s,se,a,d,v,A.cases[Me],Ye.join(""),mt)|q}q&&function Fb(s,a,d){s.push(a,1,d<<2|3)}(d,q,I)}function Pb(s){const a=[],d=[];let v=1,A=0;const I=Ph(s=s.replace(K_,function(q,se,pe){return v="select"===pe?0:1,A=parseInt(se.slice(1),10),""}));for(let q=0;q<I.length;){let se=I[q++].trim();1===v&&(se=se.replace(/\s*(?:=)?(\w+)\s*/,"$1")),se.length&&a.push(se);const pe=Ph(I[q++]);a.length>d.length&&d.push(pe)}return{type:v,mainBinding:A,cases:a,values:d}}function Ph(s){if(!s)return[];let a=0;const d=[],v=[],A=/[{}]/g;let I;for(A.lastIndex=0;I=A.exec(s);){const se=I.index;if("}"==I[0]){if(d.pop(),0==d.length){const pe=s.substring(a,se);K_.test(pe)?v.push(Pb(pe)):v.push(pe),a=se+1}}else{if(0==d.length){const pe=s.substring(a,se);v.push(pe),a=se+1}d.push("{")}}const q=s.substring(a);return v.push(q),v}function Lb(s,a,d,v,A,I,q,se){const pe=[],Me=[],Ye=[];a.cases.push(I),a.create.push(pe),a.remove.push(Me),a.update.push(Ye);const Rt=Gf(Wf()).getInertBodyElement(q),Qt=np(Rt)||Rt;return Qt?Lh(s,a,d,v,pe,Me,Ye,Qt,A,se,0):0}function Lh(s,a,d,v,A,I,q,se,pe,Me,Ye){let mt=0,Rt=se.firstChild;for(;Rt;){const Qt=vc(s,d,1,null);switch(Rt.nodeType){case Node.ELEMENT_NODE:const dn=Rt,wn=dn.tagName.toLowerCase();if(ep.hasOwnProperty(wn)){Uh(A,Sd,wn,pe,Qt),s.data[Qt]=wn;const _n=dn.attributes;for(let ci=0;ci<_n.length;ci++){const ar=_n.item(ci),bs=ar.name.toLowerCase();ar.value.match(cu)?oo.hasOwnProperty(bs)&&uu(q,ar.value,Qt,ar.name,0,Uo[bs]?Hu:null):Zb(A,Qt,ar)}mt=Lh(s,a,d,v,A,I,q,Rt,Qt,Me,Ye+1)|mt,X_(I,Qt,Ye)}break;case Node.TEXT_NODE:const On=Rt.textContent||"",Jn=On.match(cu);Uh(A,null,Jn?"":On,pe,Qt),X_(I,Qt,Ye),Jn&&(mt=uu(q,On,Qt,null,0,null)|mt);break;case Node.COMMENT_NODE:const bi=kh.exec(Rt.textContent||"");if(bi){const ci=Me[parseInt(bi[1],10)];Uh(A,xd,"",pe,Qt),Rh(s,d,v,pe,ci,Qt),Ub(I,Qt,Ye)}}Rt=Rt.nextSibling}return mt}function X_(s,a,d){0===d&&s.push(a)}function Ub(s,a,d){0===d&&(s.push(~a),s.push(a))}function Uh(s,a,d,v,A){null!==a&&s.push(a),s.push(d,A,function Cb(s,a,d){return s|a<<17|d<<1}(0,v,A))}function Zb(s,a,d){s.push(a<<1|1,d.name,d.value)}function tv(s,a,d=-1){const v=Kn(),A=cn(),I=22+s,q=Ii(v.consts,a),se=he();v.firstCreatePass&&function Mb(s,a,d,v,A,I){const q=he(),se=[],pe=[],Me=[[]];A=function Rb(s,a){if(function Dd(s){return-1===s}(a))return Y_(s);{const d=s.indexOf(`:${a}\ufffd`)+2+a.toString().length,v=s.search(new RegExp(`\ufffd\\/\\*\\d+:${a}\ufffd`));return Y_(s.substring(d,v))}}(A,I);const Ye=function $_(s){return s.replace(Ib," ")}(A).split(Db);for(let mt=0;mt<Ye.length;mt++){let Rt=Ye[mt];if(0==(1&mt)){const Qt=Ph(Rt);for(let dn=0;dn<Qt.length;dn++){let wn=Qt[dn];if(0==(1&dn)){const On=wn;""!==On&&Nb(s,q,Me[0],se,pe,d,On)}else{const On=wn;if("object"!=typeof On)throw new Error(`Unable to parse ICU expression in "${A}" message.`);Rh(s,d,pe,a,On,G_(s,q,Me[0],d,se,"",!0).index)}}}else{const Qt=47===Rt.charCodeAt(0),wn=(Rt.charCodeAt(Qt?1:0),22+Number.parseInt(Rt.substring(Qt?2:1)));if(Qt)Me.shift(),z(he(),!1);else{const On=yb(s,Me[0],wn);Me.unshift([]),z(On,!0)}}}s.data[v]={create:se,update:pe}}(v,null===se?0:se.index,A,I,q,d);const pe=v.data[I],Ye=bl(v,se===A[6]?null:se,A);(function wb(s,a,d,v){const A=s[11];for(let I=0;I<a.length;I++){const q=a[I++],se=a[I],pe=(q&ks.COMMENT)===ks.COMMENT,Me=(q&ks.APPEND_EAGERLY)===ks.APPEND_EAGERLY,Ye=q>>>ks.SHIFT;let mt=s[Ye];null===mt&&(mt=s[Ye]=pe?A.createComment(se):Ip(A,se)),Me&&null!==d&&ea(A,d,mt,v,!1)}})(A,pe.create,Ye,se&&8&se.type?A[se.index]:null),Bt(!0)}function Fh(s,a,d){tv(s,a,d),function Bh(){Bt(!1)}()}function Zh(s){return function J_(s){s&&(lu|=1<<Math.min(Rc,31)),Rc++}(Io(cn(),Fe(),s)),Zh}function nv(s){!function bb(s,a,d){if(Rc>0){const v=s.data[d];Q_(s,a,Array.isArray(v)?v:v.update,ai()-Rc-1,lu)}lu=0,Rc=0}(Kn(),cn(),s+22)}function Vh(s,a,d,v,A){if(s=R(s),Array.isArray(s))for(let I=0;I<s.length;I++)Vh(s[I],a,d,v,A);else{const I=Kn(),q=cn();let se=Zl(s)?s:R(s.provide),pe=um(s);const Me=Hi(),Ye=1048575&Me.providerIndexes,mt=Me.directiveStart,Rt=Me.providerIndexes>>20;if(Zl(s)||!s.multi){const Qt=new Ds(pe,A,gc),dn=Jh(se,a,A?Ye:Ye+Rt,mt);-1===dn?(Pe(jo(Me,q),I,se),Hh(I,s,a.length),a.push(se),Me.directiveStart++,Me.directiveEnd++,A&&(Me.providerIndexes+=1048576),d.push(Qt),q.push(Qt)):(d[dn]=Qt,q[dn]=Qt)}else{const Qt=Jh(se,a,Ye+Rt,mt),dn=Jh(se,a,Ye,Ye+Rt),wn=Qt>=0&&d[Qt],On=dn>=0&&d[dn];if(A&&!On||!A&&!wn){Pe(jo(Me,q),I,se);const Jn=function Yb(s,a,d,v,A){const I=new Ds(s,d,gc);return I.multi=[],I.index=a,I.componentProviders=0,iv(I,A,v&&!d),I}(A?qh:zb,d.length,A,v,pe);!A&&On&&(d[dn].providerFactory=Jn),Hh(I,s,a.length,0),a.push(se),Me.directiveStart++,Me.directiveEnd++,A&&(Me.providerIndexes+=1048576),d.push(Jn),q.push(Jn)}else Hh(I,s,Qt>-1?Qt:dn,iv(d[A?dn:Qt],pe,!A&&v));!A&&v&&On&&d[dn].componentProviders++}}}function Hh(s,a,d,v){const A=Zl(a),I=function b0(s){return!!s.useClass}(a);if(A||I){const pe=(I?R(a.useClass):a).prototype.ngOnDestroy;if(pe){const Me=s.destroyHooks||(s.destroyHooks=[]);if(!A&&a.multi){const Ye=Me.indexOf(d);-1===Ye?Me.push(d,[v,pe]):Me[Ye+1].push(v,pe)}else Me.push(d,pe)}}}function iv(s,a,d){return d&&s.componentProviders++,s.multi.push(a)-1}function Jh(s,a,d,v){for(let A=d;A<v;A++)if(a[A]===s)return A;return-1}function zb(s,a,d,v){return Qh(this.multi,[])}function qh(s,a,d,v){const A=this.multi;let I;if(this.providerFactory){const q=this.providerFactory.componentProviders,se=Pi(d,d[1],this.providerFactory.index,v);I=se.slice(0,q),Qh(A,I);for(let pe=q;pe<se.length;pe++)I.push(se[pe])}else I=[],Qh(A,I);return I}function Qh(s,a){for(let d=0;d<s.length;d++)a.push((0,s[d])());return a}function rv(s,a=[]){return d=>{d.providersResolver=(v,A)=>function Gb(s,a,d){const v=Kn();if(v.firstCreatePass){const A=oi(s);Vh(d,v.data,v.blueprint,A,!0),Vh(a,v.data,v.blueprint,A,!1)}}(v,A?A(s):s,a)}}class Uc{}class sv{}function Xb(s,a){return new ov(s,a??null)}class ov extends Uc{constructor(a,d){super(),this._parent=d,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new oh(this);const v=Zn(a);this._bootstrapComponents=ul(v.bootstrap),this._r3Injector=Gm(a,d,[{provide:Uc,useValue:this},{provide:tr,useValue:this.componentFactoryResolver}],x(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(d=>d()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Wh extends sv{constructor(a){super(),this.moduleType=a}create(a){return new ov(this.moduleType,a)}}class ew extends Uc{constructor(a,d,v){super(),this.componentFactoryResolver=new oh(this),this.instance=null;const A=new Vl([...a,{provide:Uc,useValue:this},{provide:tr,useValue:this.componentFactoryResolver}],d||pa(),v,new Set(["environment"]));this.injector=A,A.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function jh(s,a,d=null){return new ew(s,a,d).injector}let AA=(()=>{class s{constructor(d){this._injector=d,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(d){if(!d.standalone)return null;if(!this.cachedInjectors.has(d.id)){const v=om(0,d.type),A=v.length>0?jh([v],this._injector,`Standalone[${d.type.name}]`):null;this.cachedInjectors.set(d.id,A)}return this.cachedInjectors.get(d.id)}ngOnDestroy(){try{for(const d of this.cachedInjectors.values())null!==d&&d.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=ct({token:s,providedIn:"environment",factory:()=>new s($r(ha))}),s})();function av(s){s.getStandaloneInjector=a=>a.get(AA).getOrCreateStandaloneInjector(s)}function lw(s,a,d){const v=Ji()+s,A=cn();return A[v]===Mi?Ga(A,v,d?a.call(d):a()):bc(A,v)}function Gh(s,a,d,v){return _v(cn(),Ji(),s,a,d,v)}function fv(s,a,d,v,A){return vv(cn(),Ji(),s,a,d,v,A)}function cw(s,a,d,v,A,I){return yv(cn(),Ji(),s,a,d,v,A,I)}function mv(s,a,d,v,A,I,q){return function zh(s,a,d,v,A,I,q,se,pe){const Me=a+d;return ga(s,Me,A,I,q,se)?Ga(s,Me+4,pe?v.call(pe,A,I,q,se):v(A,I,q,se)):du(s,Me+4)}(cn(),Ji(),s,a,d,v,A,I,q)}function na(s,a,d,v,A,I,q,se){const pe=Ji()+s,Me=cn(),Ye=ga(Me,pe,d,v,A,I);return Io(Me,pe+4,q)||Ye?Ga(Me,pe+5,se?a.call(se,d,v,A,I,q):a(d,v,A,I,q)):bc(Me,pe+5)}function gv(s,a,d,v,A,I,q,se,pe){const Me=Ji()+s,Ye=cn(),mt=ga(Ye,Me,d,v,A,I);return Gl(Ye,Me+4,q,se)||mt?Ga(Ye,Me+6,pe?a.call(pe,d,v,A,I,q,se):a(d,v,A,I,q,se)):bc(Ye,Me+6)}function du(s,a){const d=s[a];return d===Mi?void 0:d}function _v(s,a,d,v,A,I){const q=a+d;return Io(s,q,A)?Ga(s,q+1,I?v.call(I,A):v(A)):du(s,q+1)}function vv(s,a,d,v,A,I,q){const se=a+d;return Gl(s,se,A,I)?Ga(s,se+2,q?v.call(q,A,I):v(A,I)):du(s,se+2)}function yv(s,a,d,v,A,I,q,se){const pe=a+d;return function pd(s,a,d,v,A){const I=Gl(s,a,d,v);return Io(s,a+2,A)||I}(s,pe,A,I,q)?Ga(s,pe+3,se?v.call(se,A,I,q):v(A,I,q)):du(s,pe+3)}function Dl(s,a){const d=Kn();let v;const A=s+22;d.firstCreatePass?(v=function ec(s,a){if(a)for(let d=a.length-1;d>=0;d--){const v=a[d];if(s===v.name)return v}}(a,d.pipeRegistry),d.data[A]=v,v.onDestroy&&(d.destroyHooks||(d.destroyHooks=[])).push(A,v.onDestroy)):v=d.data[A];const I=v.factory||(v.factory=mr(v.type)),q=Xe(gc);try{const se=to(!1),pe=I();return to(se),function EC(s,a,d,v){d>=s.data.length&&(s.data[d]=null,s.blueprint[d]=null),a[d]=v}(d,cn(),A,pe),pe}finally{Xe(q)}}function Md(s,a,d){const v=s+22,A=cn(),I=Es(A,v);return Mo(A,v)?_v(A,Ji(),a,I.transform,d,I):I.transform(d)}function Nd(s,a,d,v){const A=s+22,I=cn(),q=Es(I,A);return Mo(I,A)?vv(I,Ji(),a,q.transform,d,v,q):q.transform(d,v)}function Yh(s,a,d,v,A){const I=s+22,q=cn(),se=Es(q,I);return Mo(q,I)?yv(q,Ji(),a,se.transform,d,v,A,se):se.transform(d,v,A)}function Mo(s,a){return s[1].data[a].pure}function Od(s){return a=>{setTimeout(s,void 0,a)}}const Xa=class fw extends n.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,d,v){let A=a,I=d||(()=>null),q=v;if(a&&"object"==typeof a){var se,pe,Me;const mt=a;A=null===(se=mt.next)||void 0===se?void 0:se.bind(mt),I=null===(pe=mt.error)||void 0===pe?void 0:pe.bind(mt),q=null===(Me=mt.complete)||void 0===Me?void 0:Me.bind(mt)}this.__isAsync&&(I=Od(I),A&&(A=Od(A)),q&&(q=Od(q)));const Ye=super.subscribe({next:A,error:I,complete:q});return a instanceof e.w0&&a.add(Ye),Ye}};function mw(){return this._results[$l()]()}class Xh{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const d=$l(),v=Xh.prototype;v[d]||(v[d]=mw)}get changes(){return this._changes||(this._changes=new Xa)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,d){return this._results.reduce(a,d)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,d){const v=this;v.dirty=!1;const A=ro(a);(this._changesDetected=!function Ru(s,a,d){if(s.length!==a.length)return!1;for(let v=0;v<s.length;v++){let A=s[v],I=a[v];if(d&&(A=d(A),I=d(I)),I!==A)return!1}return!0}(v._results,A,d))&&(v._results=A,v.length=A.length,v.last=A[this.length-1],v.first=A[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let pu=(()=>{class s{}return s.__NG_ELEMENT_ID__=vw,s})();const gw=pu,_w=class extends gw{constructor(a,d,v){super(),this._declarationLView=a,this._declarationTContainer=d,this.elementRef=v}createEmbeddedView(a,d){const v=this._declarationTContainer.tViews,A=rd(this._declarationLView,v,a,16,null,v.declTNode,null,null,null,null,d||null);A[17]=this._declarationLView[this._declarationTContainer.index];const q=this._declarationLView[19];return null!==q&&(A[19]=q.createEmbeddedView(v)),$p(v,A,a),new ru(A)}};function vw(){return kd(Hi(),cn())}function kd(s,a){return 4&s.type?new _w(a,s,dc(s,a)):null}let Rd=(()=>{class s{}return s.__NG_ELEMENT_ID__=yw,s})();function yw(){return rf(Hi(),cn())}const ef=Rd,tf=class extends ef{constructor(a,d,v){super(),this._lContainer=a,this._hostTNode=d,this._hostLView=v}get element(){return dc(this._hostTNode,this._hostLView)}get injector(){return new Qs(this._hostTNode,this._hostLView)}get parentInjector(){const a=be(this._hostTNode,this._hostLView);if(eo(a)){const d=mo(a,this._hostLView),v=Mr(a);return new Qs(d[1].data[v+8],d)}return new Qs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const d=bv(this._lContainer);return null!==d&&d[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,d,v){let A,I;"number"==typeof v?A=v:null!=v&&(A=v.index,I=v.injector);const q=a.createEmbeddedView(d||{},I);return this.insert(q,A),q}createComponent(a,d,v,A,I){const q=a&&!function Yo(s){return"function"==typeof s}(a);let se;if(q)se=d;else{const mt=d||{};se=mt.index,v=mt.injector,A=mt.projectableNodes,I=mt.environmentInjector||mt.ngModuleRef}const pe=q?a:new jl(Ft(a)),Me=v||this.parentInjector;if(!I&&null==pe.ngModule){const Rt=(q?Me:this.parentInjector).get(ha,null);Rt&&(I=Rt)}const Ye=pe.create(Me,A,void 0,I);return this.insert(Ye.hostView,se),Ye}insert(a,d){const v=a._lView,A=v[1];if(function _o(s){return bn(s[3])}(v)){const Ye=this.indexOf(a);if(-1!==Ye)this.detach(Ye);else{const mt=v[3],Rt=new tf(mt,mt[6],mt[3]);Rt.detach(Rt.indexOf(a))}}const I=this._adjustIndex(d),q=this._lContainer;!function fc(s,a,d,v){const A=10+v,I=d.length;v>0&&(d[A-1][4]=a),v<I-10?(a[4]=d[A],Pl(d,10+v,a)):(d.push(a),a[4]=null),a[3]=d;const q=a[17];null!==q&&d!==q&&function dy(s,a){const d=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===d?s[9]=[a]:d.push(a)}(q,a);const se=a[19];null!==se&&se.insertView(s),a[2]|=64}(A,v,q,I);const se=Pp(I,q),pe=v[11],Me=Ko(pe,q[7]);return null!==Me&&function uy(s,a,d,v,A,I){v[0]=A,v[6]=a,wl(s,v,d,1,A,I)}(A,q[6],pe,v,Me,se),a.attachToViewContainerRef(),Pl(nf(q),I,a),a}move(a,d){return this.insert(a,d)}indexOf(a){const d=bv(this._lContainer);return null!==d?d.indexOf(a):-1}remove(a){const d=this._adjustIndex(a,-1),v=Np(this._lContainer,d);v&&(_l(nf(this._lContainer),d),fa(v[1],v))}detach(a){const d=this._adjustIndex(a,-1),v=Np(this._lContainer,d);return v&&null!=_l(nf(this._lContainer),d)?new ru(v):null}_adjustIndex(a,d=0){return a??this.length+d}};function bv(s){return s[8]}function nf(s){return s[8]||(s[8]=[])}function rf(s,a){let d;const v=a[s.index];if(bn(v))d=v;else{let A;if(8&s.type)A=Di(v);else{const I=a[11];A=I.createComment("");const q=ss(s,a);ea(I,Ko(I,q),A,function kp(s,a){return s.nextSibling(a)}(I,q),!1)}a[s.index]=d=Ag(v,a,A,s),ad(a,d)}return new tf(d,s,a)}class Tv{constructor(a){this.queryList=a,this.matches=null}clone(){return new Tv(this.queryList)}setDirty(){this.queryList.setDirty()}}class sf{constructor(a=[]){this.queries=a}createEmbeddedView(a){const d=a.queries;if(null!==d){const v=null!==a.contentQueries?a.contentQueries[0]:d.length,A=[];for(let I=0;I<v;I++){const q=d.getByIndex(I);A.push(this.queries[q.indexInDeclarationView].clone())}return new sf(A)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let d=0;d<this.queries.length;d++)null!==Nv(a,d).matches&&this.queries[d].setDirty()}}class tc{constructor(a,d,v=null){this.predicate=a,this.flags=d,this.read=v}}class hu{constructor(a=[]){this.queries=a}elementStart(a,d){for(let v=0;v<this.queries.length;v++)this.queries[v].elementStart(a,d)}elementEnd(a){for(let d=0;d<this.queries.length;d++)this.queries[d].elementEnd(a)}embeddedTView(a){let d=null;for(let v=0;v<this.length;v++){const A=null!==d?d.length:0,I=this.getByIndex(v).embeddedTView(a,A);I&&(I.indexInDeclarationView=v,null!==d?d.push(I):d=[I])}return null!==d?new hu(d):null}template(a,d){for(let v=0;v<this.queries.length;v++)this.queries[v].template(a,d)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class af{constructor(a,d=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=d}elementStart(a,d){this.isApplyingToNode(d)&&this.matchTNode(a,d)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,d){this.elementStart(a,d)}embeddedTView(a,d){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,d),new af(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const d=this._declarationNodeIndex;let v=a.parent;for(;null!==v&&8&v.type&&v.index!==d;)v=v.parent;return d===(null!==v?v.index:-1)}return this._appliesToNextNode}matchTNode(a,d){const v=this.metadata.predicate;if(Array.isArray(v))for(let A=0;A<v.length;A++){const I=v[A];this.matchTNodeWithReadOption(a,d,Av(d,I)),this.matchTNodeWithReadOption(a,d,_i(d,a,I,!1,!1))}else v===pu?4&d.type&&this.matchTNodeWithReadOption(a,d,-1):this.matchTNodeWithReadOption(a,d,_i(d,a,v,!1,!1))}matchTNodeWithReadOption(a,d,v){if(null!==v){const A=this.metadata.read;if(null!==A)if(A===eu||A===Rd||A===pu&&4&d.type)this.addMatch(d.index,-2);else{const I=_i(d,a,A,!1,!1);null!==I&&this.addMatch(d.index,I)}else this.addMatch(d.index,v)}}addMatch(a,d){null===this.matches?this.matches=[a,d]:this.matches.push(a,d)}}function Av(s,a){const d=s.localNames;if(null!==d)for(let v=0;v<d.length;v+=2)if(d[v]===a)return d[v+1];return null}function fu(s,a,d,v){return-1===d?function Bc(s,a){return 11&s.type?dc(s,a):4&s.type?kd(s,a):null}(a,s):-2===d?function Pd(s,a,d){return d===eu?dc(a,s):d===pu?kd(a,s):d===Rd?rf(a,s):void 0}(s,a,v):Pi(s,s[1],d,a)}function Fc(s,a,d,v){const A=a[19].queries[v];if(null===A.matches){const I=s.data,q=d.matches,se=[];for(let pe=0;pe<q.length;pe+=2){const Me=q[pe];se.push(Me<0?null:fu(a,I[Me],q[pe+1],d.metadata.read))}A.matches=se}return A.matches}function Il(s,a,d,v){const A=s.queries.getByIndex(d),I=A.matches;if(null!==I){const q=Fc(s,a,A,d);for(let se=0;se<I.length;se+=2){const pe=I[se];if(pe>0)v.push(q[se/2]);else{const Me=I[se+1],Ye=a[-pe];for(let mt=10;mt<Ye.length;mt++){const Rt=Ye[mt];Rt[17]===Rt[3]&&Il(Rt[1],Rt,Me,v)}if(null!==Ye[9]){const mt=Ye[9];for(let Rt=0;Rt<mt.length;Rt++){const Qt=mt[Rt];Il(Qt[1],Qt,Me,v)}}}}}return v}function Sv(s){const a=cn(),d=Kn(),v=Ln();lr(v+1);const A=Nv(d,v);if(s.dirty&&function No(s){return 4==(4&s[2])}(a)===(2==(2&A.metadata.flags))){if(null===A.matches)s.reset([]);else{const I=A.crossesNgTemplate?Il(d,a,v,[]):Fc(d,a,A,v);s.reset(I,M0),s.notifyOnChanges()}return!0}return!1}function mu(s,a,d){const v=Kn();v.firstCreatePass&&(Iv(v,new tc(s,a,d),-1),2==(2&a)&&(v.staticViewQueries=!0)),Dv(v,cn(),a)}function Ld(s,a,d,v){const A=Kn();if(A.firstCreatePass){const I=Hi();Iv(A,new tc(a,d,v),I.index),function Mv(s,a){const d=s.contentQueries||(s.contentQueries=[]);a!==(d.length?d[d.length-1]:-1)&&d.push(s.queries.length-1,a)}(A,s),2==(2&d)&&(A.staticContentQueries=!0)}Dv(A,cn(),d)}function xv(){return function Ev(s,a){return s[19].queries[a].queryList}(cn(),Ln())}function Dv(s,a,d){const v=new Xh(4==(4&d));gg(s,a,v,v.destroy),null===a[19]&&(a[19]=new sf),a[19].queries.push(new Tv(v))}function Iv(s,a,d){null===s.queries&&(s.queries=new hu),s.queries.track(new af(a,d))}function Nv(s,a){return s.queries.getByIndex(a)}function Ov(s,a){return kd(s,a)}function wu(...s){}const Vd=new Z("Application Initializer");let Wc=(()=>{class s{constructor(d){this.appInits=d,this.resolve=wu,this.reject=wu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((v,A)=>{this.resolve=v,this.reject=A})}runInitializers(){if(this.initialized)return;const d=[],v=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let A=0;A<this.appInits.length;A++){const I=this.appInits[A]();if(gh(I))d.push(I);else if(qg(I)){const q=new Promise((se,pe)=>{I.subscribe({complete:se,error:pe})});d.push(q)}}Promise.all(d).then(()=>{v()}).catch(A=>{this.reject(A)}),0===d.length&&v(),this.initialized=!0}}return s.\u0275fac=function(d){return new(d||s)($r(Vd,8))},s.\u0275prov=ct({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Kv=new Z("AppId",{providedIn:"root",factory:function tl(){return`${_a()}${_a()}${_a()}`}});function _a(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Au=new Z("Platform Initializer"),hf=new Z("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ff=new Z("appBootstrapListener"),Iw=new Z("AnimationModuleType");let $v=(()=>{class s{log(d){console.log(d)}warn(d){console.warn(d)}}return s.\u0275fac=function(d){return new(d||s)},s.\u0275prov=ct({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Nl=new Z("LocaleId",{providedIn:"root",factory:()=>Lu(Nl,Re.Optional|Re.SkipSelf)||function Mw(){return typeof $localize<"u"&&$localize.locale||kc}()}),Gv=new Z("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ow{constructor(a,d){this.ngModuleFactory=a,this.componentFactories=d}}let kw=(()=>{class s{compileModuleSync(d){return new Wh(d)}compileModuleAsync(d){return Promise.resolve(this.compileModuleSync(d))}compileModuleAndAllComponentsSync(d){const v=this.compileModuleSync(d),I=ul(Zn(d).declarations).reduce((q,se)=>{const pe=Ft(se);return pe&&q.push(new jl(pe)),q},[]);return new Ow(v,I)}compileModuleAndAllComponentsAsync(d){return Promise.resolve(this.compileModuleAndAllComponentsSync(d))}clearCache(){}clearCacheFor(d){}getModuleId(d){}}return s.\u0275fac=function(d){return new(d||s)},s.\u0275prov=ct({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Pw=(()=>Promise.resolve(0))();function _f(s){typeof Zone>"u"?Pw.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class va{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:d=!1,shouldCoalesceRunChangeDetection:v=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xa(!1),this.onMicrotaskEmpty=new Xa(!1),this.onStable=new Xa(!1),this.onError=new Xa(!1),typeof Zone>"u")throw new P(908,!1);Zone.assertZonePatched();const A=this;if(A._nesting=0,A._outer=A._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const I=Zone.AsyncStackTaggingZoneSpec;A._inner=A._inner.fork(new I("Angular"))}Zone.TaskTrackingZoneSpec&&(A._inner=A._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(A._inner=A._inner.fork(Zone.longStackTraceZoneSpec)),A.shouldCoalesceEventChangeDetection=!v&&d,A.shouldCoalesceRunChangeDetection=v,A.lastRequestAnimationFrameId=-1,A.nativeRequestAnimationFrame=function Lw(){let s=L.requestAnimationFrame,a=L.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const d=s[Zone.__symbol__("OriginalDelegate")];d&&(s=d);const v=a[Zone.__symbol__("OriginalDelegate")];v&&(a=v)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function vf(s){const a=()=>{!function Bw(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(L,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,yf(s),s.isCheckStableRunning=!0,ic(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),yf(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(d,v,A,I,q,se)=>{try{return e1(s),d.invokeTask(A,I,q,se)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===I.type||s.shouldCoalesceRunChangeDetection)&&a(),t1(s)}},onInvoke:(d,v,A,I,q,se,pe)=>{try{return e1(s),d.invoke(A,I,q,se,pe)}finally{s.shouldCoalesceRunChangeDetection&&a(),t1(s)}},onHasTask:(d,v,A,I)=>{d.hasTask(A,I),v===A&&("microTask"==I.change?(s._hasPendingMicrotasks=I.microTask,yf(s),ic(s)):"macroTask"==I.change&&(s.hasPendingMacrotasks=I.macroTask))},onHandleError:(d,v,A,I)=>(d.handleError(A,I),s.runOutsideAngular(()=>s.onError.emit(I)),!1)})}(A)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!va.isInAngularZone())throw new P(909,!1)}static assertNotInAngularZone(){if(va.isInAngularZone())throw new P(909,!1)}run(a,d,v){return this._inner.run(a,d,v)}runTask(a,d,v,A){const I=this._inner,q=I.scheduleEventTask("NgZoneEvent: "+A,a,Uw,wu,wu);try{return I.runTask(q,d,v)}finally{I.cancelTask(q)}}runGuarded(a,d,v){return this._inner.runGuarded(a,d,v)}runOutsideAngular(a){return this._outer.run(a)}}const Uw={};function ic(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function yf(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function e1(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function t1(s){s._nesting--,ic(s)}class Fw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xa,this.onMicrotaskEmpty=new Xa,this.onStable=new Xa,this.onError=new Xa}run(a,d,v){return a.apply(d,v)}runGuarded(a,d,v){return a.apply(d,v)}runOutsideAngular(a){return a()}runTask(a,d,v,A){return a.apply(d,v)}}const n1=new Z(""),i1=new Z("");let Cf,Zw=(()=>{class s{constructor(d,v,A){this._ngZone=d,this.registry=v,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Cf||(function Vw(s){Cf=s}(A),A.addToWindow(v)),this._watchAngularEvents(),d.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{va.assertNotInAngularZone(),_f(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_f(()=>{for(;0!==this._callbacks.length;){let d=this._callbacks.pop();clearTimeout(d.timeoutId),d.doneCb(this._didWork)}this._didWork=!1});else{let d=this.getPendingTasks();this._callbacks=this._callbacks.filter(v=>!v.updateCb||!v.updateCb(d)||(clearTimeout(v.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(d=>({source:d.source,creationLocation:d.creationLocation,data:d.data})):[]}addCallback(d,v,A){let I=-1;v&&v>0&&(I=setTimeout(()=>{this._callbacks=this._callbacks.filter(q=>q.timeoutId!==I),d(this._didWork,this.getPendingTasks())},v)),this._callbacks.push({doneCb:d,timeoutId:I,updateCb:A})}whenStable(d,v,A){if(A&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(d,v,A),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(d){this.registry.registerApplication(d,this)}unregisterApplication(d){this.registry.unregisterApplication(d)}findProviders(d,v,A){return[]}}return s.\u0275fac=function(d){return new(d||s)($r(va),$r(r1),$r(i1))},s.\u0275prov=ct({token:s,factory:s.\u0275fac}),s})(),r1=(()=>{class s{constructor(){this._applications=new Map}registerApplication(d,v){this._applications.set(d,v)}unregisterApplication(d){this._applications.delete(d)}unregisterAllApplications(){this._applications.clear()}getTestability(d){return this._applications.get(d)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(d,v=!0){var A,I;return null!==(A=null===(I=Cf)||void 0===I?void 0:I.findTestabilityInTree(this,d,v))&&void 0!==A?A:null}}return s.\u0275fac=function(d){return new(d||s)},s.\u0275prov=ct({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Ol=null;const s1=new Z("AllowMultipleToken"),bf=new Z("PlatformDestroyListeners");class a1{constructor(a,d){this.name=a,this.token=d}}function l1(s,a,d=[]){const v=`Platform: ${a}`,A=new Z(v);return(I=[])=>{let q=wf();if(!q||q.injector.get(s1,!1)){const se=[...d,...I,{provide:A,useValue:!0}];s?s(se):function Hw(s){if(Ol&&!Ol.get(s1,!1))throw new P(400,!1);Ol=s;const a=s.get(Tf);(function Su(s){const a=s.get(Au,null);a&&a.forEach(d=>d())})(s)}(function c1(s=[],a){return Ql.create({name:a,providers:[{provide:ap,useValue:"platform"},{provide:bf,useValue:new Set([()=>Ol=null])},...s]})}(se,v))}return function Jw(s){const a=wf();if(!a)throw new P(401,!1);return a}()}}function wf(){var s,a;return null!==(s=null===(a=Ol)||void 0===a?void 0:a.get(Tf))&&void 0!==s?s:null}let Tf=(()=>{class s{constructor(d){this._injector=d,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(d,v){const A=function d1(s,a){let d;return d="noop"===s?new Fw:("zone.js"===s?void 0:s)||new va(a),d}(v?.ngZone,function u1(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(v)),I=[{provide:va,useValue:A}];return A.run(()=>{const q=Ql.create({providers:I,parent:this.injector,name:d.moduleType.name}),se=d.create(q),pe=se.injector.get(Bo,null);if(!pe)throw new P(402,!1);return A.runOutsideAngular(()=>{const Me=A.onError.subscribe({next:Ye=>{pe.handleError(Ye)}});se.onDestroy(()=>{Jd(this._modules,se),Me.unsubscribe()})}),function p1(s,a,d){try{const v=d();return gh(v)?v.catch(A=>{throw a.runOutsideAngular(()=>s.handleError(A)),A}):v}catch(v){throw a.runOutsideAngular(()=>s.handleError(v)),v}}(pe,A,()=>{const Me=se.injector.get(Wc);return Me.runInitializers(),Me.donePromise.then(()=>(P_(se.injector.get(Nl,kc)||kc),this._moduleDoBootstrap(se),se))})})}bootstrapModule(d,v=[]){const A=h1({},v);return function RA(s,a,d){const v=new Wh(d);return Promise.resolve(v)}(0,0,d).then(I=>this.bootstrapModuleFactory(I,A))}_moduleDoBootstrap(d){const v=d.injector.get(Af);if(d._bootstrapComponents.length>0)d._bootstrapComponents.forEach(A=>v.bootstrap(A));else{if(!d.instance.ngDoBootstrap)throw new P(403,!1);d.instance.ngDoBootstrap(v)}this._modules.push(d)}onDestroy(d){this._destroyListeners.push(d)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new P(404,!1);this._modules.slice().forEach(v=>v.destroy()),this._destroyListeners.forEach(v=>v());const d=this._injector.get(bf,null);d&&(d.forEach(v=>v()),d.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(d){return new(d||s)($r(Ql))},s.\u0275prov=ct({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function h1(s,a){return Array.isArray(a)?a.reduce(h1,s):{...s,...a}}let Af=(()=>{class s{constructor(d,v,A){this._zone=d,this._injector=v,this._exceptionHandler=A,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const I=new h.y(se=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{se.next(this._stable),se.complete()})}),q=new h.y(se=>{let pe;this._zone.runOutsideAngular(()=>{pe=this._zone.onStable.subscribe(()=>{va.assertNotInAngularZone(),_f(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,se.next(!0))})})});const Me=this._zone.onUnstable.subscribe(()=>{va.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{se.next(!1)}))});return()=>{pe.unsubscribe(),Me.unsubscribe()}});this.isStable=(0,S.T)(I,q.pipe((0,y.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(d,v){const A=d instanceof dm;if(!this._injector.get(Wc).done)throw!A&&Fn(d),new P(405,false);let q;q=A?d:this._injector.get(tr).resolveComponentFactory(d),this.componentTypes.push(q.componentType);const se=function o1(s){return s.isBoundToModule}(q)?void 0:this._injector.get(Uc),Me=q.create(Ql.NULL,[],v||q.selector,se),Ye=Me.location.nativeElement,mt=Me.injector.get(n1,null);return mt?.registerApplication(Ye),Me.onDestroy(()=>{this.detachView(Me.hostView),Jd(this.components,Me),mt?.unregisterApplication(Ye)}),this._loadComponent(Me),Me}tick(){if(this._runningTick)throw new P(101,!1);try{this._runningTick=!0;for(let d of this._views)d.detectChanges()}catch(d){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(d))}finally{this._runningTick=!1}}attachView(d){const v=d;this._views.push(v),v.attachToAppRef(this)}detachView(d){const v=d;Jd(this._views,v),v.detachFromAppRef()}_loadComponent(d){this.attachView(d.hostView),this.tick(),this.components.push(d),this._injector.get(ff,[]).concat(this._bootstrapListeners).forEach(A=>A(d))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(d=>d()),this._views.slice().forEach(d=>d.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(d){return this._destroyListeners.push(d),()=>Jd(this._destroyListeners,d)}destroy(){if(this._destroyed)throw new P(406,!1);const d=this._injector;d.destroy&&!d.destroyed&&d.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(d){return new(d||s)($r(va),$r(ha),$r(Bo))},s.\u0275prov=ct({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Jd(s,a){const d=s.indexOf(a);d>-1&&s.splice(d,1)}let m1=!0,g1=!1;function Qw(){return g1=!0,m1}function Ww(){if(g1)throw new Error("Cannot enable prod mode after platform setup.");m1=!1}let jw=(()=>{class s{}return s.__NG_ELEMENT_ID__=Kw,s})();function Kw(s){return function ZA(s,a,d){if(wi(s)&&!d){const v=ki(s.index,a);return new ru(v,v)}return 47&s.type?new ru(a[16],a):null}(Hi(),cn(),16==(16&s))}class zw{constructor(){}supports(a){return Xr(a)}create(a){return new YA(a)}}const zA=(s,a)=>a;class YA{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||zA}forEachItem(a){let d;for(d=this._itHead;null!==d;d=d._next)a(d)}forEachOperation(a){let d=this._itHead,v=this._removalsHead,A=0,I=null;for(;d||v;){const q=!v||d&&d.currentIndex<b1(v,A,I)?d:v,se=b1(q,A,I),pe=q.currentIndex;if(q===v)A--,v=v._nextRemoved;else if(d=d._next,null==q.previousIndex)A++;else{I||(I=[]);const Me=se-A,Ye=pe-A;if(Me!=Ye){for(let Rt=0;Rt<Me;Rt++){const Qt=Rt<I.length?I[Rt]:I[Rt]=0,dn=Qt+Rt;Ye<=dn&&dn<Me&&(I[Rt]=Qt+1)}I[q.previousIndex]=Ye-Me}}se!==pe&&a(q,se,pe)}}forEachPreviousItem(a){let d;for(d=this._previousItHead;null!==d;d=d._nextPrevious)a(d)}forEachAddedItem(a){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)a(d)}forEachMovedItem(a){let d;for(d=this._movesHead;null!==d;d=d._nextMoved)a(d)}forEachRemovedItem(a){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)a(d)}forEachIdentityChange(a){let d;for(d=this._identityChangesHead;null!==d;d=d._nextIdentityChange)a(d)}diff(a){if(null==a&&(a=[]),!Xr(a))throw new P(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let A,I,q,d=this._itHead,v=!1;if(Array.isArray(a)){this.length=a.length;for(let se=0;se<this.length;se++)I=a[se],q=this._trackByFn(se,I),null!==d&&Object.is(d.trackById,q)?(v&&(d=this._verifyReinsertion(d,I,q,se)),Object.is(d.item,I)||this._addIdentityChange(d,I)):(d=this._mismatch(d,I,q,se),v=!0),d=d._next}else A=0,function Cc(s,a){if(Array.isArray(s))for(let d=0;d<s.length;d++)a(s[d]);else{const d=s[$l()]();let v;for(;!(v=d.next()).done;)a(v.value)}}(a,se=>{q=this._trackByFn(A,se),null!==d&&Object.is(d.trackById,q)?(v&&(d=this._verifyReinsertion(d,se,q,A)),Object.is(d.item,se)||this._addIdentityChange(d,se)):(d=this._mismatch(d,se,q,A),v=!0),d=d._next,A++}),this.length=A;return this._truncate(d),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,d,v,A){let I;return null===a?I=this._itTail:(I=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(v,null))?(Object.is(a.item,d)||this._addIdentityChange(a,d),this._reinsertAfter(a,I,A)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(v,A))?(Object.is(a.item,d)||this._addIdentityChange(a,d),this._moveAfter(a,I,A)):a=this._addAfter(new Yw(d,v),I,A),a}_verifyReinsertion(a,d,v,A){let I=null===this._unlinkedRecords?null:this._unlinkedRecords.get(v,null);return null!==I?a=this._reinsertAfter(I,a._prev,A):a.currentIndex!=A&&(a.currentIndex=A,this._addToMoves(a,A)),a}_truncate(a){for(;null!==a;){const d=a._next;this._addToRemovals(this._unlink(a)),a=d}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,d,v){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const A=a._prevRemoved,I=a._nextRemoved;return null===A?this._removalsHead=I:A._nextRemoved=I,null===I?this._removalsTail=A:I._prevRemoved=A,this._insertAfter(a,d,v),this._addToMoves(a,v),a}_moveAfter(a,d,v){return this._unlink(a),this._insertAfter(a,d,v),this._addToMoves(a,v),a}_addAfter(a,d,v){return this._insertAfter(a,d,v),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,d,v){const A=null===d?this._itHead:d._next;return a._next=A,a._prev=d,null===A?this._itTail=a:A._prev=a,null===d?this._itHead=a:d._next=a,null===this._linkedRecords&&(this._linkedRecords=new eT),this._linkedRecords.put(a),a.currentIndex=v,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const d=a._prev,v=a._next;return null===d?this._itHead=v:d._next=v,null===v?this._itTail=d:v._prev=d,a}_addToMoves(a,d){return a.previousIndex===d||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new eT),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,d){return a.item=d,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Yw{constructor(a,d){this.item=a,this.trackById=d,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Xw{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,d){let v;for(v=this._head;null!==v;v=v._nextDup)if((null===d||d<=v.currentIndex)&&Object.is(v.trackById,a))return v;return null}remove(a){const d=a._prevDup,v=a._nextDup;return null===d?this._head=v:d._nextDup=v,null===v?this._tail=d:v._prevDup=d,null===this._head}}class eT{constructor(){this.map=new Map}put(a){const d=a.trackById;let v=this.map.get(d);v||(v=new Xw,this.map.set(d,v)),v.add(a)}get(a,d){const A=this.map.get(a);return A?A.get(a,d):null}remove(a){const d=a.trackById;return this.map.get(d).remove(a)&&this.map.delete(d),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function b1(s,a,d){const v=s.previousIndex;if(null===v)return v;let A=0;return d&&v<d.length&&(A=d[v]),v+a+A}class w1{constructor(){}supports(a){return a instanceof Map||uh(a)}create(){return new tT}}class tT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let d;for(d=this._mapHead;null!==d;d=d._next)a(d)}forEachPreviousItem(a){let d;for(d=this._previousMapHead;null!==d;d=d._nextPrevious)a(d)}forEachChangedItem(a){let d;for(d=this._changesHead;null!==d;d=d._nextChanged)a(d)}forEachAddedItem(a){let d;for(d=this._additionsHead;null!==d;d=d._nextAdded)a(d)}forEachRemovedItem(a){let d;for(d=this._removalsHead;null!==d;d=d._nextRemoved)a(d)}diff(a){if(a){if(!(a instanceof Map||uh(a)))throw new P(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let d=this._mapHead;if(this._appendAfter=null,this._forEach(a,(v,A)=>{if(d&&d.key===A)this._maybeAddToChanges(d,v),this._appendAfter=d,d=d._next;else{const I=this._getOrCreateRecordForKey(A,v);d=this._insertBeforeOrAppend(d,I)}}),d){d._prev&&(d._prev._next=null),this._removalsHead=d;for(let v=d;null!==v;v=v._nextRemoved)v===this._mapHead&&(this._mapHead=null),this._records.delete(v.key),v._nextRemoved=v._next,v.previousValue=v.currentValue,v.currentValue=null,v._prev=null,v._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,d){if(a){const v=a._prev;return d._next=a,d._prev=v,a._prev=d,v&&(v._next=d),a===this._mapHead&&(this._mapHead=d),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=d,d._prev=this._appendAfter):this._mapHead=d,this._appendAfter=d,null}_getOrCreateRecordForKey(a,d){if(this._records.has(a)){const A=this._records.get(a);this._maybeAddToChanges(A,d);const I=A._prev,q=A._next;return I&&(I._next=q),q&&(q._prev=I),A._next=null,A._prev=null,A}const v=new nT(a);return this._records.set(a,v),v.currentValue=d,this._addToAdditions(v),v}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,d){Object.is(d,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=d,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,d){a instanceof Map?a.forEach(d):Object.keys(a).forEach(v=>d(a[v],v))}}class nT{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function T1(){return new A1([new zw])}let A1=(()=>{class s{constructor(d){this.factories=d}static create(d,v){if(null!=v){const A=v.factories.slice();d=d.concat(A)}return new s(d)}static extend(d){return{provide:s,useFactory:v=>s.create(d,v||T1()),deps:[[s,new Ea,new xa]]}}find(d){const v=this.factories.find(A=>A.supports(d));if(null!=v)return v;throw new P(901,!1)}}return s.\u0275prov=ct({token:s,providedIn:"root",factory:T1}),s})();function S1(){return new If([new w1])}let If=(()=>{class s{constructor(d){this.factories=d}static create(d,v){if(v){const A=v.factories.slice();d=d.concat(A)}return new s(d)}static extend(d){return{provide:s,useFactory:v=>s.create(d,v||S1()),deps:[[s,new Ea,new xa]]}}find(d){const v=this.factories.find(A=>A.supports(d));if(v)return v;throw new P(901,!1)}}return s.\u0275prov=ct({token:s,providedIn:"root",factory:S1}),s})();const sT=l1(null,"core",[]);let oT=(()=>{class s{constructor(d){}}return s.\u0275fac=function(d){return new(d||s)($r(Af))},s.\u0275mod=kn({type:s}),s.\u0275inj=ft({}),s})();function aT(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function cT(s,a){const d=Ft(s),v=a.elementInjector||pa();return new jl(d).create(v,a.projectableNodes,a.hostElement,a.environmentInjector)}},4006:(nt,_e,m)=>{"use strict";m.d(_e,{Cf:()=>M,EJ:()=>gr,F:()=>Ui,Fj:()=>O,JJ:()=>Re,JL:()=>Se,JU:()=>x,Kr:()=>zr,On:()=>Ar,Q7:()=>Hs,QS:()=>ei,UX:()=>Ti,Wl:()=>g,YN:()=>ls,_:()=>ys,_Y:()=>Fi,a5:()=>ae,kI:()=>Q,nD:()=>Ii,p4:()=>st,qQ:()=>To,qu:()=>Kn,sg:()=>Xi,u:()=>Sr,u5:()=>Ao,wO:()=>us,wV:()=>Zi,x0:()=>Cs});var n=m(4650),e=m(6895),h=m(2076),S=m(4128),y=m(4004);let w=(()=>{class Te{constructor(z,$e){this._renderer=z,this._elementRef=$e,this.onChange=$t=>{},this.onTouched=()=>{}}setProperty(z,$e){this._renderer.setProperty(this._elementRef.nativeElement,z,$e)}registerOnTouched(z){this.onTouched=z}registerOnChange(z){this.onChange=z}setDisabledState(z){this.setProperty("disabled",z)}}return Te.\u0275fac=function(z){return new(z||Te)(n.Y36(n.Qsj),n.Y36(n.SBq))},Te.\u0275dir=n.lG2({type:Te}),Te})(),f=(()=>{class Te extends w{}return Te.\u0275fac=function(){let he;return function($e){return(he||(he=n.n5z(Te)))($e||Te)}}(),Te.\u0275dir=n.lG2({type:Te,features:[n.qOj]}),Te})();const x=new n.OlP("NgValueAccessor"),b={provide:x,useExisting:(0,n.Gpc)(()=>g),multi:!0};let g=(()=>{class Te extends f{writeValue(z){this.setProperty("checked",z)}}return Te.\u0275fac=function(){let he;return function($e){return(he||(he=n.n5z(Te)))($e||Te)}}(),Te.\u0275dir=n.lG2({type:Te,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(z,$e){1&z&&n.NdJ("change",function(xn){return $e.onChange(xn.target.checked)})("blur",function(){return $e.onTouched()})},features:[n._Bn([b]),n.qOj]}),Te})();const N={provide:x,useExisting:(0,n.Gpc)(()=>O),multi:!0},k=new n.OlP("CompositionEventMode");let O=(()=>{class Te extends w{constructor(z,$e,$t){super(z,$e),this._compositionMode=$t,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function R(){const Te=(0,e.q)()?(0,e.q)().getUserAgent():"";return/android (\d+)/.test(Te.toLowerCase())}())}writeValue(z){this.setProperty("value",z??"")}_handleInput(z){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(z)}_compositionStart(){this._composing=!0}_compositionEnd(z){this._composing=!1,this._compositionMode&&this.onChange(z)}}return Te.\u0275fac=function(z){return new(z||Te)(n.Y36(n.Qsj),n.Y36(n.SBq),n.Y36(k,8))},Te.\u0275dir=n.lG2({type:Te,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(z,$e){1&z&&n.NdJ("input",function(xn){return $e._handleInput(xn.target.value)})("blur",function(){return $e.onTouched()})("compositionstart",function(){return $e._compositionStart()})("compositionend",function(xn){return $e._compositionEnd(xn.target.value)})},features:[n._Bn([N]),n.qOj]}),Te})();function U(Te){return null==Te||("string"==typeof Te||Array.isArray(Te))&&0===Te.length}function W(Te){return null!=Te&&"number"==typeof Te.length}const M=new n.OlP("NgValidators"),B=new n.OlP("NgAsyncValidators"),V=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Q{static min(he){return Y(he)}static max(he){return function fe(Te){return he=>{if(U(he.value)||U(Te))return null;const z=parseFloat(he.value);return!isNaN(z)&&z>Te?{max:{max:Te,actual:he.value}}:null}}(he)}static required(he){return J(he)}static requiredTrue(he){return function ee(Te){return!0===Te.value?null:{required:!0}}(he)}static email(he){return function G(Te){return U(Te.value)||V.test(Te.value)?null:{email:!0}}(he)}static minLength(he){return E(he)}static maxLength(he){return te(he)}static pattern(he){return function $(Te){if(!Te)return ue;let he,z;return"string"==typeof Te?(z="","^"!==Te.charAt(0)&&(z+="^"),z+=Te,"$"!==Te.charAt(Te.length-1)&&(z+="$"),he=new RegExp(z)):(z=Te.toString(),he=Te),$e=>{if(U($e.value))return null;const $t=$e.value;return he.test($t)?null:{pattern:{requiredPattern:z,actualValue:$t}}}}(he)}static nullValidator(he){return null}static compose(he){return ve(he)}static composeAsync(he){return tt(he)}}function Y(Te){return he=>{if(U(he.value)||U(Te))return null;const z=parseFloat(he.value);return!isNaN(z)&&z<Te?{min:{min:Te,actual:he.value}}:null}}function J(Te){return U(Te.value)?{required:!0}:null}function E(Te){return he=>U(he.value)||!W(he.value)?null:he.value.length<Te?{minlength:{requiredLength:Te,actualLength:he.value.length}}:null}function te(Te){return he=>W(he.value)&&he.value.length>Te?{maxlength:{requiredLength:Te,actualLength:he.value.length}}:null}function ue(Te){return null}function me(Te){return null!=Te}function we(Te){return(0,n.QGY)(Te)?(0,h.D)(Te):Te}function ye(Te){let he={};return Te.forEach(z=>{he=null!=z?{...he,...z}:he}),0===Object.keys(he).length?null:he}function qe(Te,he){return he.map(z=>z(Te))}function Ge(Te){return Te.map(he=>function De(Te){return!Te.validate}(he)?he:z=>he.validate(z))}function ve(Te){if(!Te)return null;const he=Te.filter(me);return 0==he.length?null:function(z){return ye(qe(z,he))}}function c(Te){return null!=Te?ve(Ge(Te)):null}function tt(Te){if(!Te)return null;const he=Te.filter(me);return 0==he.length?null:function(z){const $e=qe(z,he).map(we);return(0,S.D)($e).pipe((0,y.U)(ye))}}function _t(Te){return null!=Te?tt(Ge(Te)):null}function ct(Te,he){return null===Te?[he]:Array.isArray(Te)?[...Te,he]:[Te,he]}function rt(Te){return Te._rawValidators}function ft(Te){return Te._rawAsyncValidators}function qt(Te){return Te?Array.isArray(Te)?Te:[Te]:[]}function en(Te,he){return Array.isArray(Te)?Te.includes(he):Te===he}function xt(Te,he){const z=qt(he);return qt(Te).forEach($t=>{en(z,$t)||z.push($t)}),z}function Dt(Te,he){return qt(he).filter(z=>!en(Te,z))}class X{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(he){this._rawValidators=he||[],this._composedValidatorFn=c(this._rawValidators)}_setAsyncValidators(he){this._rawAsyncValidators=he||[],this._composedAsyncValidatorFn=_t(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(he){this._onDestroyCallbacks.push(he)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(he=>he()),this._onDestroyCallbacks=[]}reset(he){this.control&&this.control.reset(he)}hasError(he,z){return!!this.control&&this.control.hasError(he,z)}getError(he,z){return this.control?this.control.getError(he,z):null}}class j extends X{get formDirective(){return null}get path(){return null}}class ae extends X{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Be{constructor(he){this._cd=he}get isTouched(){var he,z;return!(null===(he=this._cd)||void 0===he||null===(z=he.control)||void 0===z||!z.touched)}get isUntouched(){var he,z;return!(null===(he=this._cd)||void 0===he||null===(z=he.control)||void 0===z||!z.untouched)}get isPristine(){var he,z;return!(null===(he=this._cd)||void 0===he||null===(z=he.control)||void 0===z||!z.pristine)}get isDirty(){var he,z;return!(null===(he=this._cd)||void 0===he||null===(z=he.control)||void 0===z||!z.dirty)}get isValid(){var he,z;return!(null===(he=this._cd)||void 0===he||null===(z=he.control)||void 0===z||!z.valid)}get isInvalid(){var he,z;return!(null===(he=this._cd)||void 0===he||null===(z=he.control)||void 0===z||!z.invalid)}get isPending(){var he,z;return!(null===(he=this._cd)||void 0===he||null===(z=he.control)||void 0===z||!z.pending)}get isSubmitted(){var he;return!(null===(he=this._cd)||void 0===he||!he.submitted)}}let Re=(()=>{class Te extends Be{constructor(z){super(z)}}return Te.\u0275fac=function(z){return new(z||Te)(n.Y36(ae,2))},Te.\u0275dir=n.lG2({type:Te,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(z,$e){2&z&&n.ekj("ng-untouched",$e.isUntouched)("ng-touched",$e.isTouched)("ng-pristine",$e.isPristine)("ng-dirty",$e.isDirty)("ng-valid",$e.isValid)("ng-invalid",$e.isInvalid)("ng-pending",$e.isPending)},features:[n.qOj]}),Te})(),Se=(()=>{class Te extends Be{constructor(z){super(z)}}return Te.\u0275fac=function(z){return new(z||Te)(n.Y36(j,10))},Te.\u0275dir=n.lG2({type:Te,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(z,$e){2&z&&n.ekj("ng-untouched",$e.isUntouched)("ng-touched",$e.isTouched)("ng-pristine",$e.isPristine)("ng-dirty",$e.isDirty)("ng-valid",$e.isValid)("ng-invalid",$e.isInvalid)("ng-pending",$e.isPending)("ng-submitted",$e.isSubmitted)},features:[n.qOj]}),Te})();const on="VALID",Xt="INVALID",it="PENDING",Gt="DISABLED";function bt(Te){return(Tn(Te)?Te.validators:Te)||null}function jt(Te){return Array.isArray(Te)?c(Te):Te||null}function ln(Te,he){return(Tn(he)?he.asyncValidators:Te)||null}function kn(Te){return Array.isArray(Te)?_t(Te):Te||null}function Tn(Te){return null!=Te&&!Array.isArray(Te)&&"object"==typeof Te}function qn(Te,he,z){const $e=Te.controls;if(!(he?Object.keys($e):$e).length)throw new n.vHH(1e3,"");if(!$e[z])throw new n.vHH(1001,"")}function ri(Te,he,z){Te._forEachChild(($e,$t)=>{if(void 0===z[$t])throw new n.vHH(1002,"")})}class Yn{constructor(he,z){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=he,this._rawAsyncValidators=z,this._composedValidatorFn=jt(this._rawValidators),this._composedAsyncValidatorFn=kn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(he){this._rawValidators=this._composedValidatorFn=he}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(he){this._rawAsyncValidators=this._composedAsyncValidatorFn=he}get parent(){return this._parent}get valid(){return this.status===on}get invalid(){return this.status===Xt}get pending(){return this.status==it}get disabled(){return this.status===Gt}get enabled(){return this.status!==Gt}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(he){this._rawValidators=he,this._composedValidatorFn=jt(he)}setAsyncValidators(he){this._rawAsyncValidators=he,this._composedAsyncValidatorFn=kn(he)}addValidators(he){this.setValidators(xt(he,this._rawValidators))}addAsyncValidators(he){this.setAsyncValidators(xt(he,this._rawAsyncValidators))}removeValidators(he){this.setValidators(Dt(he,this._rawValidators))}removeAsyncValidators(he){this.setAsyncValidators(Dt(he,this._rawAsyncValidators))}hasValidator(he){return en(this._rawValidators,he)}hasAsyncValidator(he){return en(this._rawAsyncValidators,he)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(he={}){this.touched=!0,this._parent&&!he.onlySelf&&this._parent.markAsTouched(he)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(he=>he.markAllAsTouched())}markAsUntouched(he={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(z=>{z.markAsUntouched({onlySelf:!0})}),this._parent&&!he.onlySelf&&this._parent._updateTouched(he)}markAsDirty(he={}){this.pristine=!1,this._parent&&!he.onlySelf&&this._parent.markAsDirty(he)}markAsPristine(he={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(z=>{z.markAsPristine({onlySelf:!0})}),this._parent&&!he.onlySelf&&this._parent._updatePristine(he)}markAsPending(he={}){this.status=it,!1!==he.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!he.onlySelf&&this._parent.markAsPending(he)}disable(he={}){const z=this._parentMarkedDirty(he.onlySelf);this.status=Gt,this.errors=null,this._forEachChild($e=>{$e.disable({...he,onlySelf:!0})}),this._updateValue(),!1!==he.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...he,skipPristineCheck:z}),this._onDisabledChange.forEach($e=>$e(!0))}enable(he={}){const z=this._parentMarkedDirty(he.onlySelf);this.status=on,this._forEachChild($e=>{$e.enable({...he,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:he.emitEvent}),this._updateAncestors({...he,skipPristineCheck:z}),this._onDisabledChange.forEach($e=>$e(!1))}_updateAncestors(he){this._parent&&!he.onlySelf&&(this._parent.updateValueAndValidity(he),he.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(he){this._parent=he}getRawValue(){return this.value}updateValueAndValidity(he={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===on||this.status===it)&&this._runAsyncValidator(he.emitEvent)),!1!==he.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!he.onlySelf&&this._parent.updateValueAndValidity(he)}_updateTreeValidity(he={emitEvent:!0}){this._forEachChild(z=>z._updateTreeValidity(he)),this.updateValueAndValidity({onlySelf:!0,emitEvent:he.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gt:on}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(he){if(this.asyncValidator){this.status=it,this._hasOwnPendingAsyncValidator=!0;const z=we(this.asyncValidator(this));this._asyncValidationSubscription=z.subscribe($e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors($e,{emitEvent:he})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(he,z={}){this.errors=he,this._updateControlsErrors(!1!==z.emitEvent)}get(he){let z=he;return null==z||(Array.isArray(z)||(z=z.split(".")),0===z.length)?null:z.reduce(($e,$t)=>$e&&$e._find($t),this)}getError(he,z){const $e=z?this.get(z):this;return $e&&$e.errors?$e.errors[he]:null}hasError(he,z){return!!this.getError(he,z)}get root(){let he=this;for(;he._parent;)he=he._parent;return he}_updateControlsErrors(he){this.status=this._calculateStatus(),he&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(he)}_initObservables(){this.valueChanges=new n.vpe,this.statusChanges=new n.vpe}_calculateStatus(){return this._allControlsDisabled()?Gt:this.errors?Xt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(it)?it:this._anyControlsHaveStatus(Xt)?Xt:on}_anyControlsHaveStatus(he){return this._anyControls(z=>z.status===he)}_anyControlsDirty(){return this._anyControls(he=>he.dirty)}_anyControlsTouched(){return this._anyControls(he=>he.touched)}_updatePristine(he={}){this.pristine=!this._anyControlsDirty(),this._parent&&!he.onlySelf&&this._parent._updatePristine(he)}_updateTouched(he={}){this.touched=this._anyControlsTouched(),this._parent&&!he.onlySelf&&this._parent._updateTouched(he)}_registerOnCollectionChange(he){this._onCollectionChange=he}_setUpdateStrategy(he){Tn(he)&&null!=he.updateOn&&(this._updateOn=he.updateOn)}_parentMarkedDirty(he){return!he&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(he){return null}}class Ft extends Yn{constructor(he,z,$e){super(bt(z),ln($e,z)),this.controls=he,this._initObservables(),this._setUpdateStrategy(z),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(he,z){return this.controls[he]?this.controls[he]:(this.controls[he]=z,z.setParent(this),z._registerOnCollectionChange(this._onCollectionChange),z)}addControl(he,z,$e={}){this.registerControl(he,z),this.updateValueAndValidity({emitEvent:$e.emitEvent}),this._onCollectionChange()}removeControl(he,z={}){this.controls[he]&&this.controls[he]._registerOnCollectionChange(()=>{}),delete this.controls[he],this.updateValueAndValidity({emitEvent:z.emitEvent}),this._onCollectionChange()}setControl(he,z,$e={}){this.controls[he]&&this.controls[he]._registerOnCollectionChange(()=>{}),delete this.controls[he],z&&this.registerControl(he,z),this.updateValueAndValidity({emitEvent:$e.emitEvent}),this._onCollectionChange()}contains(he){return this.controls.hasOwnProperty(he)&&this.controls[he].enabled}setValue(he,z={}){ri(this,0,he),Object.keys(he).forEach($e=>{qn(this,!0,$e),this.controls[$e].setValue(he[$e],{onlySelf:!0,emitEvent:z.emitEvent})}),this.updateValueAndValidity(z)}patchValue(he,z={}){null!=he&&(Object.keys(he).forEach($e=>{const $t=this.controls[$e];$t&&$t.patchValue(he[$e],{onlySelf:!0,emitEvent:z.emitEvent})}),this.updateValueAndValidity(z))}reset(he={},z={}){this._forEachChild(($e,$t)=>{$e.reset(he[$t],{onlySelf:!0,emitEvent:z.emitEvent})}),this._updatePristine(z),this._updateTouched(z),this.updateValueAndValidity(z)}getRawValue(){return this._reduceChildren({},(he,z,$e)=>(he[$e]=z.getRawValue(),he))}_syncPendingControls(){let he=this._reduceChildren(!1,(z,$e)=>!!$e._syncPendingControls()||z);return he&&this.updateValueAndValidity({onlySelf:!0}),he}_forEachChild(he){Object.keys(this.controls).forEach(z=>{const $e=this.controls[z];$e&&he($e,z)})}_setUpControls(){this._forEachChild(he=>{he.setParent(this),he._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(he){for(const[z,$e]of Object.entries(this.controls))if(this.contains(z)&&he($e))return!0;return!1}_reduceValue(){return this._reduceChildren({},(z,$e,$t)=>(($e.enabled||this.disabled)&&(z[$t]=$e.value),z))}_reduceChildren(he,z){let $e=he;return this._forEachChild(($t,xn)=>{$e=z($e,$t,xn)}),$e}_allControlsDisabled(){for(const he of Object.keys(this.controls))if(this.controls[he].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(he){return this.controls.hasOwnProperty(he)?this.controls[he]:null}}class Fn extends Ft{}function zn(Te,he){return[...he.path,Te]}function ut(Te,he){var z,$e;Ht(Te,he),he.valueAccessor.writeValue(Te.value),Te.disabled&&(null===(z=($e=he.valueAccessor).setDisabledState)||void 0===z||z.call($e,!0)),function Kt(Te,he){he.valueAccessor.registerOnChange(z=>{Te._pendingValue=z,Te._pendingChange=!0,Te._pendingDirty=!0,"change"===Te.updateOn&&Ei(Te,he)})}(Te,he),function os(Te,he){const z=($e,$t)=>{he.valueAccessor.writeValue($e),$t&&he.viewToModelUpdate($e)};Te.registerOnChange(z),he._registerOnDestroy(()=>{Te._unregisterOnChange(z)})}(Te,he),function Xn(Te,he){he.valueAccessor.registerOnTouched(()=>{Te._pendingTouched=!0,"blur"===Te.updateOn&&Te._pendingChange&&Ei(Te,he),"submit"!==Te.updateOn&&Te.markAsTouched()})}(Te,he),function Ot(Te,he){if(he.valueAccessor.setDisabledState){const z=$e=>{he.valueAccessor.setDisabledState($e)};Te.registerOnDisabledChange(z),he._registerOnDestroy(()=>{Te._unregisterOnDisabledChange(z)})}}(Te,he)}function vt(Te,he,z=!0){const $e=()=>{};he.valueAccessor&&(he.valueAccessor.registerOnChange($e),he.valueAccessor.registerOnTouched($e)),hn(Te,he),Te&&(he._invokeOnDestroyCallbacks(),Te._registerOnCollectionChange(()=>{}))}function at(Te,he){Te.forEach(z=>{z.registerOnValidatorChange&&z.registerOnValidatorChange(he)})}function Ht(Te,he){const z=rt(Te);null!==he.validator?Te.setValidators(ct(z,he.validator)):"function"==typeof z&&Te.setValidators([z]);const $e=ft(Te);null!==he.asyncValidator?Te.setAsyncValidators(ct($e,he.asyncValidator)):"function"==typeof $e&&Te.setAsyncValidators([$e]);const $t=()=>Te.updateValueAndValidity();at(he._rawValidators,$t),at(he._rawAsyncValidators,$t)}function hn(Te,he){let z=!1;if(null!==Te){if(null!==he.validator){const $t=rt(Te);if(Array.isArray($t)&&$t.length>0){const xn=$t.filter(xi=>xi!==he.validator);xn.length!==$t.length&&(z=!0,Te.setValidators(xn))}}if(null!==he.asyncValidator){const $t=ft(Te);if(Array.isArray($t)&&$t.length>0){const xn=$t.filter(xi=>xi!==he.asyncValidator);xn.length!==$t.length&&(z=!0,Te.setAsyncValidators(xn))}}}const $e=()=>{};return at(he._rawValidators,$e),at(he._rawAsyncValidators,$e),z}function Ei(Te,he){Te._pendingDirty&&Te.markAsDirty(),Te.setValue(Te._pendingValue,{emitModelToViewChange:!1}),he.viewToModelUpdate(Te._pendingValue),Te._pendingChange=!1}function Nn(Te,he){Ht(Te,he)}function Ai(Te,he){if(!Te.hasOwnProperty("model"))return!1;const z=Te.model;return!!z.isFirstChange()||!Object.is(he,z.currentValue)}function Jr(Te,he){Te._syncPendingControls(),he.forEach(z=>{const $e=z.control;"submit"===$e.updateOn&&$e._pendingChange&&(z.viewToModelUpdate($e._pendingValue),$e._pendingChange=!1)})}function qr(Te,he){if(!he)return null;let z,$e,$t;return Array.isArray(he),he.forEach(xn=>{xn.constructor===O?z=xn:function Yi(Te){return Object.getPrototypeOf(Te.constructor)===f}(xn)?$e=xn:$t=xn}),$t||$e||z||null}const kr={provide:j,useExisting:(0,n.Gpc)(()=>Ui)},ts=(()=>Promise.resolve())();let Ui=(()=>{class Te extends j{constructor(z,$e){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new n.vpe,this.form=new Ft({},c(z),_t($e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(z){ts.then(()=>{const $e=this._findContainer(z.path);z.control=$e.registerControl(z.name,z.control),ut(z.control,z),z.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(z)})}getControl(z){return this.form.get(z.path)}removeControl(z){ts.then(()=>{const $e=this._findContainer(z.path);$e&&$e.removeControl(z.name),this._directives.delete(z)})}addFormGroup(z){ts.then(()=>{const $e=this._findContainer(z.path),$t=new Ft({});Nn($t,z),$e.registerControl(z.name,$t),$t.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(z){ts.then(()=>{const $e=this._findContainer(z.path);$e&&$e.removeControl(z.name)})}getFormGroup(z){return this.form.get(z.path)}updateModel(z,$e){ts.then(()=>{this.form.get(z.path).setValue($e)})}setValue(z){this.control.setValue(z)}onSubmit(z){var $e;return this.submitted=!0,Jr(this.form,this._directives),this.ngSubmit.emit(z),"dialog"===(null==z||null===($e=z.target)||void 0===$e?void 0:$e.method)}onReset(){this.resetForm()}resetForm(z){this.form.reset(z),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(z){return z.pop(),z.length?this.form.get(z):this.form}}return Te.\u0275fac=function(z){return new(z||Te)(n.Y36(M,10),n.Y36(B,10))},Te.\u0275dir=n.lG2({type:Te,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(z,$e){1&z&&n.NdJ("submit",function(xn){return $e.onSubmit(xn)})("reset",function(){return $e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[n._Bn([kr]),n.qOj]}),Te})();function ws(Te,he){const z=Te.indexOf(he);z>-1&&Te.splice(z,1)}function Ve(Te){return"object"==typeof Te&&null!==Te&&2===Object.keys(Te).length&&"value"in Te&&"disabled"in Te}const We=class extends Yn{constructor(he=null,z,$e){super(bt(z),ln($e,z)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(he),this._setUpdateStrategy(z),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tn(z)&&(z.nonNullable||z.initialValueIsDefault)&&(this.defaultValue=Ve(he)?he.value:he)}setValue(he,z={}){this.value=this._pendingValue=he,this._onChange.length&&!1!==z.emitModelToViewChange&&this._onChange.forEach($e=>$e(this.value,!1!==z.emitViewToModelChange)),this.updateValueAndValidity(z)}patchValue(he,z={}){this.setValue(he,z)}reset(he=this.defaultValue,z={}){this._applyFormState(he),this.markAsPristine(z),this.markAsUntouched(z),this.setValue(this.value,z),this._pendingChange=!1}_updateValue(){}_anyControls(he){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(he){this._onChange.push(he)}_unregisterOnChange(he){ws(this._onChange,he)}registerOnDisabledChange(he){this._onDisabledChange.push(he)}_unregisterOnDisabledChange(he){ws(this._onDisabledChange,he)}_forEachChild(he){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(he){Ve(he)?(this.value=this._pendingValue=he.value,he.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=he}},st=We;let nn=(()=>{class Te extends j{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return zn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return Te.\u0275fac=function(){let he;return function($e){return(he||(he=n.n5z(Te)))($e||Te)}}(),Te.\u0275dir=n.lG2({type:Te,features:[n.qOj]}),Te})();const dr={provide:ae,useExisting:(0,n.Gpc)(()=>Ar)},pr=(()=>Promise.resolve())();let Ar=(()=>{class Te extends ae{constructor(z,$e,$t,xn,xi){super(),this._changeDetectorRef=xi,this.control=new We,this._registered=!1,this.update=new n.vpe,this._parent=z,this._setValidators($e),this._setAsyncValidators($t),this.valueAccessor=qr(0,xn)}ngOnChanges(z){if(this._checkForErrors(),!this._registered||"name"in z){if(this._registered&&(this._checkName(),this.formDirective)){const $e=z.name.previousValue;this.formDirective.removeControl({name:$e,path:this._getPath($e)})}this._setUpControl()}"isDisabled"in z&&this._updateDisabled(z),Ai(z,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(z){this.viewModel=z,this.update.emit(z)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ut(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(z){pr.then(()=>{var $e;this.control.setValue(z,{emitViewToModelChange:!1}),null===($e=this._changeDetectorRef)||void 0===$e||$e.markForCheck()})}_updateDisabled(z){const $e=z.isDisabled.currentValue,$t=0!==$e&&(0,n.D6c)($e);pr.then(()=>{var xn;$t&&!this.control.disabled?this.control.disable():!$t&&this.control.disabled&&this.control.enable(),null===(xn=this._changeDetectorRef)||void 0===xn||xn.markForCheck()})}_getPath(z){return this._parent?zn(z,this._parent):[z]}}return Te.\u0275fac=function(z){return new(z||Te)(n.Y36(j,9),n.Y36(M,10),n.Y36(B,10),n.Y36(x,10),n.Y36(n.sBO,8))},Te.\u0275dir=n.lG2({type:Te,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[n._Bn([dr]),n.qOj,n.TTD]}),Te})(),Fi=(()=>{class Te{}return Te.\u0275fac=function(z){return new(z||Te)},Te.\u0275dir=n.lG2({type:Te,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),Te})();const Br={provide:x,useExisting:(0,n.Gpc)(()=>Zi),multi:!0};let Zi=(()=>{class Te extends f{writeValue(z){this.setProperty("value",z??"")}registerOnChange(z){this.onChange=$e=>{z(""==$e?null:parseFloat($e))}}}return Te.\u0275fac=function(){let he;return function($e){return(he||(he=n.n5z(Te)))($e||Te)}}(),Te.\u0275dir=n.lG2({type:Te,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(z,$e){1&z&&n.NdJ("input",function(xn){return $e.onChange(xn.target.value)})("blur",function(){return $e.onTouched()})},features:[n._Bn([Br]),n.qOj]}),Te})();const ir={provide:x,useExisting:(0,n.Gpc)(()=>ys),multi:!0};let Gs=(()=>{class Te{}return Te.\u0275fac=function(z){return new(z||Te)},Te.\u0275mod=n.oAB({type:Te}),Te.\u0275inj=n.cJS({}),Te})(),po=(()=>{class Te{constructor(){this._accessors=[]}add(z,$e){this._accessors.push([z,$e])}remove(z){for(let $e=this._accessors.length-1;$e>=0;--$e)if(this._accessors[$e][1]===z)return void this._accessors.splice($e,1)}select(z){this._accessors.forEach($e=>{this._isSameGroup($e,z)&&$e[1]!==z&&$e[1].fireUncheck(z.value)})}_isSameGroup(z,$e){return!!z[0].control&&z[0]._parent===$e._control._parent&&z[1].name===$e.name}}return Te.\u0275fac=function(z){return new(z||Te)},Te.\u0275prov=n.Yz7({token:Te,factory:Te.\u0275fac,providedIn:Gs}),Te})(),ys=(()=>{class Te extends f{constructor(z,$e,$t,xn){super(z,$e),this._registry=$t,this._injector=xn,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(ae),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(z){this._state=z===this.value,this.setProperty("checked",this._state)}registerOnChange(z){this._fn=z,this.onChange=()=>{z(this.value),this._registry.select(this)}}fireUncheck(z){this.writeValue(z)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return Te.\u0275fac=function(z){return new(z||Te)(n.Y36(n.Qsj),n.Y36(n.SBq),n.Y36(po),n.Y36(n.zs3))},Te.\u0275dir=n.lG2({type:Te,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(z,$e){1&z&&n.NdJ("change",function(){return $e.onChange()})("blur",function(){return $e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[n._Bn([ir]),n.qOj]}),Te})();const Ts=new n.OlP("NgModelWithFormControlWarning"),Fr={provide:j,useExisting:(0,n.Gpc)(()=>Xi)};let Xi=(()=>{class Te extends j{constructor(z,$e){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new n.vpe,this._setValidators(z),this._setAsyncValidators($e)}ngOnChanges(z){this._checkFormPresent(),z.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(z){const $e=this.form.get(z.path);return ut($e,z),$e.updateValueAndValidity({emitEvent:!1}),this.directives.push(z),$e}getControl(z){return this.form.get(z.path)}removeControl(z){vt(z.control||null,z,!1),function Tr(Te,he){const z=Te.indexOf(he);z>-1&&Te.splice(z,1)}(this.directives,z)}addFormGroup(z){this._setUpFormContainer(z)}removeFormGroup(z){this._cleanUpFormContainer(z)}getFormGroup(z){return this.form.get(z.path)}addFormArray(z){this._setUpFormContainer(z)}removeFormArray(z){this._cleanUpFormContainer(z)}getFormArray(z){return this.form.get(z.path)}updateModel(z,$e){this.form.get(z.path).setValue($e)}onSubmit(z){var $e;return this.submitted=!0,Jr(this.form,this.directives),this.ngSubmit.emit(z),"dialog"===(null==z||null===($e=z.target)||void 0===$e?void 0:$e.method)}onReset(){this.resetForm()}resetForm(z){this.form.reset(z),this.submitted=!1}_updateDomValue(){this.directives.forEach(z=>{const $e=z.control,$t=this.form.get(z.path);$e!==$t&&(vt($e||null,z),(Te=>Te instanceof We)($t)&&(ut($t,z),z.control=$t))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(z){const $e=this.form.get(z.path);Nn($e,z),$e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(z){if(this.form){const $e=this.form.get(z.path);$e&&function mi(Te,he){return hn(Te,he)}($e,z)&&$e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ht(this.form,this),this._oldForm&&hn(this._oldForm,this)}_checkFormPresent(){}}return Te.\u0275fac=function(z){return new(z||Te)(n.Y36(M,10),n.Y36(B,10))},Te.\u0275dir=n.lG2({type:Te,selectors:[["","formGroup",""]],hostBindings:function(z,$e){1&z&&n.NdJ("submit",function(xn){return $e.onSubmit(xn)})("reset",function(){return $e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[n._Bn([Fr]),n.qOj,n.TTD]}),Te})();const Si={provide:j,useExisting:(0,n.Gpc)(()=>Cs)};let Cs=(()=>{class Te extends nn{constructor(z,$e,$t){super(),this._parent=z,this._setValidators($e),this._setAsyncValidators($t)}_checkParentType(){Rn(this._parent)}}return Te.\u0275fac=function(z){return new(z||Te)(n.Y36(j,13),n.Y36(M,10),n.Y36(B,10))},Te.\u0275dir=n.lG2({type:Te,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[n._Bn([Si]),n.qOj]}),Te})();const Hn={provide:j,useExisting:(0,n.Gpc)(()=>As)};let As=(()=>{class Te extends j{constructor(z,$e,$t){super(),this._parent=z,this._setValidators($e),this._setAsyncValidators($t)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return zn(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Rn(this._parent)}}return Te.\u0275fac=function(z){return new(z||Te)(n.Y36(j,13),n.Y36(M,10),n.Y36(B,10))},Te.\u0275dir=n.lG2({type:Te,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[n._Bn([Hn]),n.qOj]}),Te})();function Rn(Te){return!(Te instanceof Cs||Te instanceof Xi||Te instanceof As)}const mr={provide:ae,useExisting:(0,n.Gpc)(()=>Sr)};let Sr=(()=>{class Te extends ae{constructor(z,$e,$t,xn,xi){super(),this._ngModelWarningConfig=xi,this._added=!1,this.update=new n.vpe,this._ngModelWarningSent=!1,this._parent=z,this._setValidators($e),this._setAsyncValidators($t),this.valueAccessor=qr(0,xn)}set isDisabled(z){}ngOnChanges(z){this._added||this._setUpControl(),Ai(z,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(z){this.viewModel=z,this.update.emit(z)}get path(){return zn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return Te._ngModelWarningSentOnce=!1,Te.\u0275fac=function(z){return new(z||Te)(n.Y36(j,13),n.Y36(M,10),n.Y36(B,10),n.Y36(x,10),n.Y36(Ts,8))},Te.\u0275dir=n.lG2({type:Te,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[n._Bn([mr]),n.qOj,n.TTD]}),Te})();const as={provide:x,useExisting:(0,n.Gpc)(()=>gr),multi:!0};function Qr(Te,he){return null==Te?`${he}`:(he&&"object"==typeof he&&(he="Object"),`${Te}: ${he}`.slice(0,50))}let gr=(()=>{class Te extends f{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(z){this._compareWith=z}writeValue(z){this.value=z;const $t=Qr(this._getOptionId(z),z);this.setProperty("value",$t)}registerOnChange(z){this.onChange=$e=>{this.value=this._getOptionValue($e),z(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(z){for(const $e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get($e),z))return $e;return null}_getOptionValue(z){const $e=function Zr(Te){return Te.split(":")[0]}(z);return this._optionMap.has($e)?this._optionMap.get($e):z}}return Te.\u0275fac=function(){let he;return function($e){return(he||(he=n.n5z(Te)))($e||Te)}}(),Te.\u0275dir=n.lG2({type:Te,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(z,$e){1&z&&n.NdJ("change",function(xn){return $e.onChange(xn.target.value)})("blur",function(){return $e.onTouched()})},inputs:{compareWith:"compareWith"},features:[n._Bn([as]),n.qOj]}),Te})(),ls=(()=>{class Te{constructor(z,$e,$t){this._element=z,this._renderer=$e,this._select=$t,this._select&&(this.id=this._select._registerOption())}set ngValue(z){null!=this._select&&(this._select._optionMap.set(this.id,z),this._setElementValue(Qr(this.id,z)),this._select.writeValue(this._select.value))}set value(z){this._setElementValue(z),this._select&&this._select.writeValue(this._select.value)}_setElementValue(z){this._renderer.setProperty(this._element.nativeElement,"value",z)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Te.\u0275fac=function(z){return new(z||Te)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(gr,9))},Te.\u0275dir=n.lG2({type:Te,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Te})();const zi={provide:x,useExisting:(0,n.Gpc)(()=>Ni),multi:!0};function _r(Te,he){return null==Te?`${he}`:("string"==typeof he&&(he=`'${he}'`),he&&"object"==typeof he&&(he="Object"),`${Te}: ${he}`.slice(0,50))}let Ni=(()=>{class Te extends f{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(z){this._compareWith=z}writeValue(z){let $e;if(this.value=z,Array.isArray(z)){const $t=z.map(xn=>this._getOptionId(xn));$e=(xn,xi)=>{xn._setSelected($t.indexOf(xi.toString())>-1)}}else $e=($t,xn)=>{$t._setSelected(!1)};this._optionMap.forEach($e)}registerOnChange(z){this.onChange=$e=>{const $t=[],xn=$e.selectedOptions;if(void 0!==xn){const xi=xn;for(let Dr=0;Dr<xi.length;Dr++){const Ji=this._getOptionValue(xi[Dr].value);$t.push(Ji)}}else{const xi=$e.options;for(let Dr=0;Dr<xi.length;Dr++){const Ir=xi[Dr];if(Ir.selected){const Ji=this._getOptionValue(Ir.value);$t.push(Ji)}}}this.value=$t,z($t)}}_registerOption(z){const $e=(this._idCounter++).toString();return this._optionMap.set($e,z),$e}_getOptionId(z){for(const $e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get($e)._value,z))return $e;return null}_getOptionValue(z){const $e=function cs(Te){return Te.split(":")[0]}(z);return this._optionMap.has($e)?this._optionMap.get($e)._value:z}}return Te.\u0275fac=function(){let he;return function($e){return(he||(he=n.n5z(Te)))($e||Te)}}(),Te.\u0275dir=n.lG2({type:Te,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(z,$e){1&z&&n.NdJ("change",function(xn){return $e.onChange(xn.target)})("blur",function(){return $e.onTouched()})},inputs:{compareWith:"compareWith"},features:[n._Bn([zi]),n.qOj]}),Te})(),zr=(()=>{class Te{constructor(z,$e,$t){this._element=z,this._renderer=$e,this._select=$t,this._select&&(this.id=this._select._registerOption(this))}set ngValue(z){null!=this._select&&(this._value=z,this._setElementValue(_r(this.id,z)),this._select.writeValue(this._select.value))}set value(z){this._select?(this._value=z,this._setElementValue(_r(this.id,z)),this._select.writeValue(this._select.value)):this._setElementValue(z)}_setElementValue(z){this._renderer.setProperty(this._element.nativeElement,"value",z)}_setSelected(z){this._renderer.setProperty(this._element.nativeElement,"selected",z)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return Te.\u0275fac=function(z){return new(z||Te)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(Ni,9))},Te.\u0275dir=n.lG2({type:Te,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),Te})();function Wr(Te){return"number"==typeof Te?Te:parseInt(Te,10)}let Rr=(()=>{class Te{constructor(){this._validator=ue}ngOnChanges(z){if(this.inputName in z){const $e=this.normalizeInput(z[this.inputName].currentValue);this._enabled=this.enabled($e),this._validator=this._enabled?this.createValidator($e):ue,this._onChange&&this._onChange()}}validate(z){return this._validator(z)}registerOnValidatorChange(z){this._onChange=z}enabled(z){return null!=z}}return Te.\u0275fac=function(z){return new(z||Te)},Te.\u0275dir=n.lG2({type:Te,features:[n.TTD]}),Te})();const xs={provide:M,useExisting:(0,n.Gpc)(()=>To),multi:!0};let To=(()=>{class Te extends Rr{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=z=>function Ls(Te){return"number"==typeof Te?Te:parseFloat(Te)}(z),this.createValidator=z=>Y(z)}}return Te.\u0275fac=function(){let he;return function($e){return(he||(he=n.n5z(Te)))($e||Te)}}(),Te.\u0275dir=n.lG2({type:Te,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(z,$e){2&z&&n.uIk("min",$e._enabled?$e.min:null)},inputs:{min:"min"},features:[n._Bn([xs]),n.qOj]}),Te})();const jr={provide:M,useExisting:(0,n.Gpc)(()=>Hs),multi:!0};let Hs=(()=>{class Te extends Rr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=n.D6c,this.createValidator=z=>J}enabled(z){return z}}return Te.\u0275fac=function(){let he;return function($e){return(he||(he=n.n5z(Te)))($e||Te)}}(),Te.\u0275dir=n.lG2({type:Te,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(z,$e){2&z&&n.uIk("required",$e._enabled?"":null)},inputs:{required:"required"},features:[n._Bn([jr]),n.qOj]}),Te})();const No={provide:M,useExisting:(0,n.Gpc)(()=>us),multi:!0};let us=(()=>{class Te extends Rr{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=z=>Wr(z),this.createValidator=z=>E(z)}}return Te.\u0275fac=function(){let he;return function($e){return(he||(he=n.n5z(Te)))($e||Te)}}(),Te.\u0275dir=n.lG2({type:Te,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(z,$e){2&z&&n.uIk("minlength",$e._enabled?$e.minlength:null)},inputs:{minlength:"minlength"},features:[n._Bn([No]),n.qOj]}),Te})();const _o={provide:M,useExisting:(0,n.Gpc)(()=>Ii),multi:!0};let Ii=(()=>{class Te extends Rr{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=z=>Wr(z),this.createValidator=z=>te(z)}}return Te.\u0275fac=function(){let he;return function($e){return(he||(he=n.n5z(Te)))($e||Te)}}(),Te.\u0275dir=n.lG2({type:Te,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(z,$e){2&z&&n.uIk("maxlength",$e._enabled?$e.maxlength:null)},inputs:{maxlength:"maxlength"},features:[n._Bn([_o]),n.qOj]}),Te})(),Kr=(()=>{class Te{}return Te.\u0275fac=function(z){return new(z||Te)},Te.\u0275mod=n.oAB({type:Te}),Te.\u0275inj=n.cJS({imports:[Gs]}),Te})(),Ao=(()=>{class Te{}return Te.\u0275fac=function(z){return new(z||Te)},Te.\u0275mod=n.oAB({type:Te}),Te.\u0275inj=n.cJS({imports:[Kr]}),Te})(),Ti=(()=>{class Te{static withConfig(z){return{ngModule:Te,providers:[{provide:Ts,useValue:z.warnOnNgModelWithFormControl}]}}}return Te.\u0275fac=function(z){return new(z||Te)},Te.\u0275mod=n.oAB({type:Te}),Te.\u0275inj=n.cJS({imports:[Kr]}),Te})();class yr extends Yn{constructor(he,z,$e){super(bt(z),ln($e,z)),this.controls=he,this._initObservables(),this._setUpdateStrategy(z),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(he){return this.controls[this._adjustIndex(he)]}push(he,z={}){this.controls.push(he),this._registerControl(he),this.updateValueAndValidity({emitEvent:z.emitEvent}),this._onCollectionChange()}insert(he,z,$e={}){this.controls.splice(he,0,z),this._registerControl(z),this.updateValueAndValidity({emitEvent:$e.emitEvent})}removeAt(he,z={}){let $e=this._adjustIndex(he);$e<0&&($e=0),this.controls[$e]&&this.controls[$e]._registerOnCollectionChange(()=>{}),this.controls.splice($e,1),this.updateValueAndValidity({emitEvent:z.emitEvent})}setControl(he,z,$e={}){let $t=this._adjustIndex(he);$t<0&&($t=0),this.controls[$t]&&this.controls[$t]._registerOnCollectionChange(()=>{}),this.controls.splice($t,1),z&&(this.controls.splice($t,0,z),this._registerControl(z)),this.updateValueAndValidity({emitEvent:$e.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(he,z={}){ri(this,0,he),he.forEach(($e,$t)=>{qn(this,!1,$t),this.at($t).setValue($e,{onlySelf:!0,emitEvent:z.emitEvent})}),this.updateValueAndValidity(z)}patchValue(he,z={}){null!=he&&(he.forEach(($e,$t)=>{this.at($t)&&this.at($t).patchValue($e,{onlySelf:!0,emitEvent:z.emitEvent})}),this.updateValueAndValidity(z))}reset(he=[],z={}){this._forEachChild(($e,$t)=>{$e.reset(he[$t],{onlySelf:!0,emitEvent:z.emitEvent})}),this._updatePristine(z),this._updateTouched(z),this.updateValueAndValidity(z)}getRawValue(){return this.controls.map(he=>he.getRawValue())}clear(he={}){this.controls.length<1||(this._forEachChild(z=>z._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:he.emitEvent}))}_adjustIndex(he){return he<0?he+this.length:he}_syncPendingControls(){let he=this.controls.reduce((z,$e)=>!!$e._syncPendingControls()||z,!1);return he&&this.updateValueAndValidity({onlySelf:!0}),he}_forEachChild(he){this.controls.forEach((z,$e)=>{he(z,$e)})}_updateValue(){this.value=this.controls.filter(he=>he.enabled||this.disabled).map(he=>he.value)}_anyControls(he){return this.controls.some(z=>z.enabled&&he(z))}_setUpControls(){this._forEachChild(he=>this._registerControl(he))}_allControlsDisabled(){for(const he of this.controls)if(he.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(he){he.setParent(this),he._registerOnCollectionChange(this._onCollectionChange)}_find(he){var z;return null!==(z=this.at(he))&&void 0!==z?z:null}}function cn(Te){return!!Te&&(void 0!==Te.asyncValidators||void 0!==Te.validators||void 0!==Te.updateOn)}let Kn=(()=>{class Te{constructor(){this.useNonNullable=!1}get nonNullable(){const z=new Te;return z.useNonNullable=!0,z}group(z,$e=null){const $t=this._reduceControls(z);let xn={};return cn($e)?xn=$e:null!==$e&&(xn.validators=$e.validator,xn.asyncValidators=$e.asyncValidator),new Ft($t,xn)}record(z,$e=null){const $t=this._reduceControls(z);return new Fn($t,$e)}control(z,$e,$t){let xn={};return this.useNonNullable?(cn($e)?xn=$e:(xn.validators=$e,xn.asyncValidators=$t),new We(z,{...xn,nonNullable:!0})):new We(z,$e,$t)}array(z,$e,$t){const xn=z.map(xi=>this._createControl(xi));return new yr(xn,$e,$t)}_reduceControls(z){const $e={};return Object.keys(z).forEach($t=>{$e[$t]=this._createControl(z[$t])}),$e}_createControl(z){return z instanceof We||z instanceof Yn?z:Array.isArray(z)?this.control(z[0],z.length>1?z[1]:null,z.length>2?z[2]:null):this.control(z)}}return Te.\u0275fac=function(z){return new(z||Te)},Te.\u0275prov=n.Yz7({token:Te,factory:Te.\u0275fac,providedIn:Ti}),Te})(),ei=(()=>{class Te extends Kn{group(z,$e=null){return super.group(z,$e)}control(z,$e,$t){return super.control(z,$e,$t)}array(z,$e,$t){return super.array(z,$e,$t)}}return Te.\u0275fac=function(){let he;return function($e){return(he||(he=n.n5z(Te)))($e||Te)}}(),Te.\u0275prov=n.Yz7({token:Te,factory:Te.\u0275fac,providedIn:Ti}),Te})()},1481:(nt,_e,m)=>{"use strict";m.d(_e,{Dx:()=>ht,H7:()=>In,b2:()=>Qe,q6:()=>je,se:()=>me});var n=m(6895),e=m(4650);class h extends n.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class S extends h{static makeCurrent(){(0,n.HT)(new S)}onAndCancel(vt,at,Ot){return vt.addEventListener(at,Ot,!1),()=>{vt.removeEventListener(at,Ot,!1)}}dispatchEvent(vt,at){vt.dispatchEvent(at)}remove(vt){vt.parentNode&&vt.parentNode.removeChild(vt)}createElement(vt,at){return(at=at||this.getDefaultDocument()).createElement(vt)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(vt){return vt.nodeType===Node.ELEMENT_NODE}isShadowRoot(vt){return vt instanceof DocumentFragment}getGlobalEventTarget(vt,at){return"window"===at?window:"document"===at?vt:"body"===at?vt.body:null}getBaseHref(vt){const at=function w(){return y=y||document.querySelector("base"),y?y.getAttribute("href"):null}();return null==at?null:function x(ut){f=f||document.createElement("a"),f.setAttribute("href",ut);const vt=f.pathname;return"/"===vt.charAt(0)?vt:`/${vt}`}(at)}resetBaseElement(){y=null}getUserAgent(){return window.navigator.userAgent}getCookie(vt){return(0,n.Mx)(document.cookie,vt)}}let f,y=null;const b=new e.OlP("TRANSITION_ID"),N=[{provide:e.ip1,useFactory:function g(ut,vt,at){return()=>{at.get(e.CZH).donePromise.then(()=>{const Ot=(0,n.q)(),Ht=vt.querySelectorAll(`style[ng-transition="${ut}"]`);for(let hn=0;hn<Ht.length;hn++)Ot.remove(Ht[hn])})}},deps:[b,n.K0,e.zs3],multi:!0}];let k=(()=>{class ut{build(){return new XMLHttpRequest}}return ut.\u0275fac=function(at){return new(at||ut)},ut.\u0275prov=e.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const O=new e.OlP("EventManagerPlugins");let P=(()=>{class ut{constructor(at,Ot){this._zone=Ot,this._eventNameToPlugin=new Map,at.forEach(Ht=>Ht.manager=this),this._plugins=at.slice().reverse()}addEventListener(at,Ot,Ht){return this._findPluginFor(Ot).addEventListener(at,Ot,Ht)}addGlobalEventListener(at,Ot,Ht){return this._findPluginFor(Ot).addGlobalEventListener(at,Ot,Ht)}getZone(){return this._zone}_findPluginFor(at){const Ot=this._eventNameToPlugin.get(at);if(Ot)return Ot;const Ht=this._plugins;for(let hn=0;hn<Ht.length;hn++){const Kt=Ht[hn];if(Kt.supports(at))return this._eventNameToPlugin.set(at,Kt),Kt}throw new Error(`No event manager plugin found for event ${at}`)}}return ut.\u0275fac=function(at){return new(at||ut)(e.LFG(O),e.LFG(e.R0b))},ut.\u0275prov=e.Yz7({token:ut,factory:ut.\u0275fac}),ut})();class U{constructor(vt){this._doc=vt}addGlobalEventListener(vt,at,Ot){const Ht=(0,n.q)().getGlobalEventTarget(this._doc,vt);if(!Ht)throw new Error(`Unsupported event target ${Ht} for event ${at}`);return this.addEventListener(Ht,at,Ot)}}let W=(()=>{class ut{constructor(){this._stylesSet=new Set}addStyles(at){const Ot=new Set;at.forEach(Ht=>{this._stylesSet.has(Ht)||(this._stylesSet.add(Ht),Ot.add(Ht))}),this.onStylesAdded(Ot)}onStylesAdded(at){}getAllStyles(){return Array.from(this._stylesSet)}}return ut.\u0275fac=function(at){return new(at||ut)},ut.\u0275prov=e.Yz7({token:ut,factory:ut.\u0275fac}),ut})(),M=(()=>{class ut extends W{constructor(at){super(),this._doc=at,this._hostNodes=new Map,this._hostNodes.set(at.head,[])}_addStylesToHost(at,Ot,Ht){at.forEach(hn=>{const Kt=this._doc.createElement("style");Kt.textContent=hn,Ht.push(Ot.appendChild(Kt))})}addHost(at){const Ot=[];this._addStylesToHost(this._stylesSet,at,Ot),this._hostNodes.set(at,Ot)}removeHost(at){const Ot=this._hostNodes.get(at);Ot&&Ot.forEach(B),this._hostNodes.delete(at)}onStylesAdded(at){this._hostNodes.forEach((Ot,Ht)=>{this._addStylesToHost(at,Ht,Ot)})}ngOnDestroy(){this._hostNodes.forEach(at=>at.forEach(B))}}return ut.\u0275fac=function(at){return new(at||ut)(e.LFG(n.K0))},ut.\u0275prov=e.Yz7({token:ut,factory:ut.\u0275fac}),ut})();function B(ut){(0,n.q)().remove(ut)}const V={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Q=/%COMP%/g;function te(ut,vt,at){for(let Ot=0;Ot<vt.length;Ot++){let Ht=vt[Ot];Array.isArray(Ht)?te(ut,Ht,at):(Ht=Ht.replace(Q,ut),at.push(Ht))}return at}function $(ut){return vt=>{if("__ngUnwrap__"===vt)return ut;!1===ut(vt)&&(vt.preventDefault(),vt.returnValue=!1)}}let me=(()=>{class ut{constructor(at,Ot,Ht){this.eventManager=at,this.sharedStylesHost=Ot,this.appId=Ht,this.rendererByCompId=new Map,this.defaultRenderer=new we(at)}createRenderer(at,Ot){if(!at||!Ot)return this.defaultRenderer;switch(Ot.encapsulation){case e.ifc.Emulated:{let Ht=this.rendererByCompId.get(Ot.id);return Ht||(Ht=new Ge(this.eventManager,this.sharedStylesHost,Ot,this.appId),this.rendererByCompId.set(Ot.id,Ht)),Ht.applyToHost(at),Ht}case 1:case e.ifc.ShadowDom:return new ve(this.eventManager,this.sharedStylesHost,at,Ot);default:if(!this.rendererByCompId.has(Ot.id)){const Ht=te(Ot.id,Ot.styles,[]);this.sharedStylesHost.addStyles(Ht),this.rendererByCompId.set(Ot.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ut.\u0275fac=function(at){return new(at||ut)(e.LFG(P),e.LFG(M),e.LFG(e.AFp))},ut.\u0275prov=e.Yz7({token:ut,factory:ut.\u0275fac}),ut})();class we{constructor(vt){this.eventManager=vt,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(vt,at){return at?document.createElementNS(V[at]||at,vt):document.createElement(vt)}createComment(vt){return document.createComment(vt)}createText(vt){return document.createTextNode(vt)}appendChild(vt,at){(De(vt)?vt.content:vt).appendChild(at)}insertBefore(vt,at,Ot){vt&&(De(vt)?vt.content:vt).insertBefore(at,Ot)}removeChild(vt,at){vt&&vt.removeChild(at)}selectRootElement(vt,at){let Ot="string"==typeof vt?document.querySelector(vt):vt;if(!Ot)throw new Error(`The selector "${vt}" did not match any elements`);return at||(Ot.textContent=""),Ot}parentNode(vt){return vt.parentNode}nextSibling(vt){return vt.nextSibling}setAttribute(vt,at,Ot,Ht){if(Ht){at=Ht+":"+at;const hn=V[Ht];hn?vt.setAttributeNS(hn,at,Ot):vt.setAttribute(at,Ot)}else vt.setAttribute(at,Ot)}removeAttribute(vt,at,Ot){if(Ot){const Ht=V[Ot];Ht?vt.removeAttributeNS(Ht,at):vt.removeAttribute(`${Ot}:${at}`)}else vt.removeAttribute(at)}addClass(vt,at){vt.classList.add(at)}removeClass(vt,at){vt.classList.remove(at)}setStyle(vt,at,Ot,Ht){Ht&(e.JOm.DashCase|e.JOm.Important)?vt.style.setProperty(at,Ot,Ht&e.JOm.Important?"important":""):vt.style[at]=Ot}removeStyle(vt,at,Ot){Ot&e.JOm.DashCase?vt.style.removeProperty(at):vt.style[at]=""}setProperty(vt,at,Ot){vt[at]=Ot}setValue(vt,at){vt.nodeValue=at}listen(vt,at,Ot){return"string"==typeof vt?this.eventManager.addGlobalEventListener(vt,at,$(Ot)):this.eventManager.addEventListener(vt,at,$(Ot))}}function De(ut){return"TEMPLATE"===ut.tagName&&void 0!==ut.content}class Ge extends we{constructor(vt,at,Ot,Ht){super(vt),this.component=Ot;const hn=te(Ht+"-"+Ot.id,Ot.styles,[]);at.addStyles(hn),this.contentAttr=function G(ut){return"_ngcontent-%COMP%".replace(Q,ut)}(Ht+"-"+Ot.id),this.hostAttr=function E(ut){return"_nghost-%COMP%".replace(Q,ut)}(Ht+"-"+Ot.id)}applyToHost(vt){super.setAttribute(vt,this.hostAttr,"")}createElement(vt,at){const Ot=super.createElement(vt,at);return super.setAttribute(Ot,this.contentAttr,""),Ot}}class ve extends we{constructor(vt,at,Ot,Ht){super(vt),this.sharedStylesHost=at,this.hostEl=Ot,this.shadowRoot=Ot.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const hn=te(Ht.id,Ht.styles,[]);for(let Kt=0;Kt<hn.length;Kt++){const Xn=document.createElement("style");Xn.textContent=hn[Kt],this.shadowRoot.appendChild(Xn)}}nodeOrShadowRoot(vt){return vt===this.hostEl?this.shadowRoot:vt}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(vt,at){return super.appendChild(this.nodeOrShadowRoot(vt),at)}insertBefore(vt,at,Ot){return super.insertBefore(this.nodeOrShadowRoot(vt),at,Ot)}removeChild(vt,at){return super.removeChild(this.nodeOrShadowRoot(vt),at)}parentNode(vt){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(vt)))}}let c=(()=>{class ut extends U{constructor(at){super(at)}supports(at){return!0}addEventListener(at,Ot,Ht){return at.addEventListener(Ot,Ht,!1),()=>this.removeEventListener(at,Ot,Ht)}removeEventListener(at,Ot,Ht){return at.removeEventListener(Ot,Ht)}}return ut.\u0275fac=function(at){return new(at||ut)(e.LFG(n.K0))},ut.\u0275prov=e.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const tt=["alt","control","meta","shift"],_t={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ct={alt:ut=>ut.altKey,control:ut=>ut.ctrlKey,meta:ut=>ut.metaKey,shift:ut=>ut.shiftKey};let rt=(()=>{class ut extends U{constructor(at){super(at)}supports(at){return null!=ut.parseEventName(at)}addEventListener(at,Ot,Ht){const hn=ut.parseEventName(Ot),Kt=ut.eventCallback(hn.fullKey,Ht,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,n.q)().onAndCancel(at,hn.domEventName,Kt))}static parseEventName(at){const Ot=at.toLowerCase().split("."),Ht=Ot.shift();if(0===Ot.length||"keydown"!==Ht&&"keyup"!==Ht)return null;const hn=ut._normalizeKey(Ot.pop());let Kt="",Xn=Ot.indexOf("code");if(Xn>-1&&(Ot.splice(Xn,1),Kt="code."),tt.forEach(os=>{const Nn=Ot.indexOf(os);Nn>-1&&(Ot.splice(Nn,1),Kt+=os+".")}),Kt+=hn,0!=Ot.length||0===hn.length)return null;const Ei={};return Ei.domEventName=Ht,Ei.fullKey=Kt,Ei}static matchEventFullKeyCode(at,Ot){let Ht=_t[at.key]||at.key,hn="";return Ot.indexOf("code.")>-1&&(Ht=at.code,hn="code."),!(null==Ht||!Ht)&&(Ht=Ht.toLowerCase()," "===Ht?Ht="space":"."===Ht&&(Ht="dot"),tt.forEach(Kt=>{Kt!==Ht&&(0,ct[Kt])(at)&&(hn+=Kt+".")}),hn+=Ht,hn===Ot)}static eventCallback(at,Ot,Ht){return hn=>{ut.matchEventFullKeyCode(hn,at)&&Ht.runGuarded(()=>Ot(hn))}}static _normalizeKey(at){return"esc"===at?"escape":at}}return ut.\u0275fac=function(at){return new(at||ut)(e.LFG(n.K0))},ut.\u0275prov=e.Yz7({token:ut,factory:ut.\u0275fac}),ut})();const je=(0,e.eFA)(e._c5,"browser",[{provide:e.Lbi,useValue:n.bD},{provide:e.g9A,useValue:function X(){S.makeCurrent()},multi:!0},{provide:n.K0,useFactory:function ae(){return(0,e.RDi)(document),document},deps:[]}]),ke=new e.OlP(""),Re=[{provide:e.rWj,useClass:class R{addToWindow(vt){e.dqk.getAngularTestability=(Ot,Ht=!0)=>{const hn=vt.findTestabilityInTree(Ot,Ht);if(null==hn)throw new Error("Could not find testability for element.");return hn},e.dqk.getAllAngularTestabilities=()=>vt.getAllTestabilities(),e.dqk.getAllAngularRootElements=()=>vt.getAllRootElements(),e.dqk.frameworkStabilizers||(e.dqk.frameworkStabilizers=[]),e.dqk.frameworkStabilizers.push(Ot=>{const Ht=e.dqk.getAllAngularTestabilities();let hn=Ht.length,Kt=!1;const Xn=function(Ei){Kt=Kt||Ei,hn--,0==hn&&Ot(Kt)};Ht.forEach(function(Ei){Ei.whenStable(Xn)})})}findTestabilityInTree(vt,at,Ot){return null==at?null:vt.getTestability(at)??(Ot?(0,n.q)().isShadowRoot(at)?this.findTestabilityInTree(vt,at.host,!0):this.findTestabilityInTree(vt,at.parentElement,!0):null)}},deps:[]},{provide:e.lri,useClass:e.dDg,deps:[e.R0b,e.eoX,e.rWj]},{provide:e.dDg,useClass:e.dDg,deps:[e.R0b,e.eoX,e.rWj]}],Se=[{provide:e.zSh,useValue:"root"},{provide:e.qLn,useFactory:function j(){return new e.qLn},deps:[]},{provide:O,useClass:c,multi:!0,deps:[n.K0,e.R0b,e.Lbi]},{provide:O,useClass:rt,multi:!0,deps:[n.K0]},{provide:me,useClass:me,deps:[P,M,e.AFp]},{provide:e.FYo,useExisting:me},{provide:W,useExisting:M},{provide:M,useClass:M,deps:[n.K0]},{provide:P,useClass:P,deps:[O,e.R0b]},{provide:n.JF,useClass:k,deps:[]},[]];let Qe=(()=>{class ut{constructor(at){}static withServerTransition(at){return{ngModule:ut,providers:[{provide:e.AFp,useValue:at.appId},{provide:b,useExisting:e.AFp},N]}}}return ut.\u0275fac=function(at){return new(at||ut)(e.LFG(ke,12))},ut.\u0275mod=e.oAB({type:ut}),ut.\u0275inj=e.cJS({providers:[...Se,...Re],imports:[n.ez,e.hGG]}),ut})(),ht=(()=>{class ut{constructor(at){this._doc=at}getTitle(){return this._doc.title}setTitle(at){this._doc.title=at||""}}return ut.\u0275fac=function(at){return new(at||ut)(e.LFG(n.K0))},ut.\u0275prov=e.Yz7({token:ut,factory:function(at){let Ot=null;return Ot=at?new at:function Ct(){return new ht((0,e.LFG)(n.K0))}(),Ot},providedIn:"root"}),ut})();typeof window<"u"&&window;let In=(()=>{class ut{}return ut.\u0275fac=function(at){return new(at||ut)},ut.\u0275prov=e.Yz7({token:ut,factory:function(at){let Ot=null;return Ot=at?new(at||ut):e.LFG(Zn),Ot},providedIn:"root"}),ut})(),Zn=(()=>{class ut extends In{constructor(at){super(),this._doc=at}sanitize(at,Ot){if(null==Ot)return null;switch(at){case e.q3G.NONE:return Ot;case e.q3G.HTML:return(0,e.qzn)(Ot,"HTML")?(0,e.z3N)(Ot):(0,e.EiD)(this._doc,String(Ot)).toString();case e.q3G.STYLE:return(0,e.qzn)(Ot,"Style")?(0,e.z3N)(Ot):Ot;case e.q3G.SCRIPT:if((0,e.qzn)(Ot,"Script"))return(0,e.z3N)(Ot);throw new Error("unsafe value used in a script context");case e.q3G.URL:return(0,e.qzn)(Ot,"URL")?(0,e.z3N)(Ot):(0,e.mCW)(String(Ot));case e.q3G.RESOURCE_URL:if((0,e.qzn)(Ot,"ResourceURL"))return(0,e.z3N)(Ot);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${at} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(at){return(0,e.JVY)(at)}bypassSecurityTrustStyle(at){return(0,e.L6k)(at)}bypassSecurityTrustScript(at){return(0,e.eBb)(at)}bypassSecurityTrustUrl(at){return(0,e.LAX)(at)}bypassSecurityTrustResourceUrl(at){return(0,e.pB0)(at)}}return ut.\u0275fac=function(at){return new(at||ut)(e.LFG(n.K0))},ut.\u0275prov=e.Yz7({token:ut,factory:function(at){let Ot=null;return Ot=at?new at:function Fn(ut){return new Zn(ut.get(n.K0))}(e.LFG(e.zs3)),Ot},providedIn:"root"}),ut})()},8185:(nt,_e,m)=>{"use strict";m.d(_e,{gz:()=>Xi,y6:()=>Wr,gk:()=>rn,m2:()=>nn,OD:()=>Mt,cx:()=>Wo,Z6:()=>xo,wN:()=>to,F0:()=>pn,rH:()=>br,Od:()=>Hr,yS:()=>ni,Bz:()=>Aa,lC:()=>Rr,oI:()=>xe,Hx:()=>gn});var n=m(4650),e=m(2076),h=m(9646),S=m(1135),y=m(6805),w=m(9841),f=m(7272),x=m(9770),b=m(9635),g=m(2843),N=m(9751),R=m(515),k=m(727),O=m(4482),P=m(5403);function U(){return(0,O.e)((o,u)=>{let _=null;o._refCount++;const T=(0,P.x)(u,void 0,void 0,void 0,()=>{if(!o||o._refCount<=0||0<--o._refCount)return void(_=null);const D=o._connection,F=_;_=null,D&&(!F||D===F)&&D.unsubscribe(),u.unsubscribe()});o.subscribe(T),T.closed||(_=o.connect())})}class W extends N.y{constructor(u,_){super(),this.source=u,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,O.A)(u)&&(this.lift=u.lift)}_subscribe(u){return this.getSubject().subscribe(u)}getSubject(){const u=this._subject;return(!u||u.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:u}=this;this._subject=this._connection=null,u?.unsubscribe()}connect(){let u=this._connection;if(!u){u=this._connection=new k.w0;const _=this.getSubject();u.add(this.source.subscribe((0,P.x)(_,void 0,()=>{this._teardown(),_.complete()},T=>{this._teardown(),_.error(T)},()=>this._teardown()))),u.closed&&(this._connection=null,u=k.w0.EMPTY)}return u}refCount(){return U()(this)}}var M=m(7579),B=m(6895),V=m(4004),Q=m(3900),Y=m(5698),fe=m(8675),J=m(9300),ee=m(5577),G=m(590),E=m(4351),te=m(8505),$=m(262),ue=m(7359);function me(o,u){return(0,O.e)((0,ue.U)(o,u,arguments.length>=2,!0))}function we(o){return o<=0?()=>R.E:(0,O.e)((u,_)=>{let T=[];u.subscribe((0,P.x)(_,D=>{T.push(D),o<T.length&&T.shift()},()=>{for(const D of T)_.next(D);_.complete()},void 0,()=>{T=null}))})}var ye=m(8068),qe=m(6590),De=m(4671);function Ge(o,u){const _=arguments.length>=2;return T=>T.pipe(o?(0,J.h)((D,F)=>o(D,F,T)):De.y,we(1),_?(0,qe.d)(u):(0,ye.T)(()=>new y.K))}var c=m(9718);function tt(o){return(0,O.e)((u,_)=>{try{u.subscribe(_)}finally{_.add(o)}})}var _t=m(8189),ct=m(1481);const rt="primary",ft=Symbol("RouteTitle");class qt{constructor(u){this.params=u||{}}has(u){return Object.prototype.hasOwnProperty.call(this.params,u)}get(u){if(this.has(u)){const _=this.params[u];return Array.isArray(_)?_[0]:_}return null}getAll(u){if(this.has(u)){const _=this.params[u];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function en(o){return new qt(o)}function xt(o,u,_){const T=_.path.split("/");if(T.length>o.length||"full"===_.pathMatch&&(u.hasChildren()||T.length<o.length))return null;const D={};for(let F=0;F<T.length;F++){const re=T[F],ce=o[F];if(re.startsWith(":"))D[re.substring(1)]=ce;else if(re!==ce.path)return null}return{consumed:o.slice(0,T.length),posParams:D}}function X(o,u){const _=o?Object.keys(o):void 0,T=u?Object.keys(u):void 0;if(!_||!T||_.length!=T.length)return!1;let D;for(let F=0;F<_.length;F++)if(D=_[F],!j(o[D],u[D]))return!1;return!0}function j(o,u){if(Array.isArray(o)&&Array.isArray(u)){if(o.length!==u.length)return!1;const _=[...o].sort(),T=[...u].sort();return _.every((D,F)=>T[F]===D)}return o===u}function ae(o){return Array.prototype.concat.apply([],o)}function Be(o){return o.length>0?o[o.length-1]:null}function ke(o,u){for(const _ in o)o.hasOwnProperty(_)&&u(o[_],_)}function Re(o){return(0,n.CqO)(o)?o:(0,n.QGY)(o)?(0,e.D)(Promise.resolve(o)):(0,h.of)(o)}const Xe={exact:function ht(o,u,_){if(!Tt(o.segments,u.segments)||!L(o.segments,u.segments,_)||o.numberOfChildren!==u.numberOfChildren)return!1;for(const T in u.children)if(!o.children[T]||!ht(o.children[T],u.children[T],_))return!1;return!0},subset:oe},Ke={exact:function Ct(o,u){return X(o,u)},subset:function Ze(o,u){return Object.keys(u).length<=Object.keys(o).length&&Object.keys(u).every(_=>j(o[_],u[_]))},ignored:()=>!0};function Je(o,u,_){return Xe[_.paths](o.root,u.root,_.matrixParams)&&Ke[_.queryParams](o.queryParams,u.queryParams)&&!("exact"===_.fragment&&o.fragment!==u.fragment)}function oe(o,u,_){return ie(o,u,u.segments,_)}function ie(o,u,_,T){if(o.segments.length>_.length){const D=o.segments.slice(0,_.length);return!(!Tt(D,_)||u.hasChildren()||!L(D,_,T))}if(o.segments.length===_.length){if(!Tt(o.segments,_)||!L(o.segments,_,T))return!1;for(const D in u.children)if(!o.children[D]||!oe(o.children[D],u.children[D],T))return!1;return!0}{const D=_.slice(0,o.segments.length),F=_.slice(o.segments.length);return!!(Tt(o.segments,D)&&L(o.segments,D,T)&&o.children[rt])&&ie(o.children[rt],u,F,T)}}function L(o,u,_){return u.every((T,D)=>Ke[_](o[D].parameters,T.parameters))}class ne{constructor(u,_,T){this.root=u,this.queryParams=_,this.fragment=T}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=en(this.queryParams)),this._queryParamMap}toString(){return on.serialize(this)}}class Ne{constructor(u,_){this.segments=u,this.children=_,this.parent=null,ke(_,(T,D)=>T.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xt(this)}}class ze{constructor(u,_){this.path=u,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=en(this.parameters)),this._parameterMap}toString(){return qn(this)}}function Tt(o,u){return o.length===u.length&&o.every((_,T)=>_.path===u[T].path)}let gn=(()=>{class o{}return o.\u0275fac=function(_){return new(_||o)},o.\u0275prov=n.Yz7({token:o,factory:function(){return new Yt},providedIn:"root"}),o})();class Yt{parse(u){const _=new ut(u);return new ne(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(u){const _=`/${it(u.root,!0)}`,T=function Yn(o){const u=Object.keys(o).map(_=>{const T=o[_];return Array.isArray(T)?T.map(D=>`${bt(_)}=${bt(D)}`).join("&"):`${bt(_)}=${bt(T)}`}).filter(_=>!!_);return u.length?`?${u.join("&")}`:""}(u.queryParams);return`${_}${T}${"string"==typeof u.fragment?`#${function jt(o){return encodeURI(o)}(u.fragment)}`:""}`}}const on=new Yt;function Xt(o){return o.segments.map(u=>qn(u)).join("/")}function it(o,u){if(!o.hasChildren())return Xt(o);if(u){const _=o.children[rt]?it(o.children[rt],!1):"",T=[];return ke(o.children,(D,F)=>{F!==rt&&T.push(`${F}:${it(D,!1)}`)}),T.length>0?`${_}(${T.join("//")})`:_}{const _=function Zt(o,u){let _=[];return ke(o.children,(T,D)=>{D===rt&&(_=_.concat(u(T,D)))}),ke(o.children,(T,D)=>{D!==rt&&(_=_.concat(u(T,D)))}),_}(o,(T,D)=>D===rt?[it(o.children[rt],!1)]:[`${D}:${it(T,!1)}`]);return 1===Object.keys(o.children).length&&null!=o.children[rt]?`${Xt(o)}/${_[0]}`:`${Xt(o)}/(${_.join("//")})`}}function Gt(o){return encodeURIComponent(o).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bt(o){return Gt(o).replace(/%3B/gi,";")}function ln(o){return Gt(o).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kn(o){return decodeURIComponent(o)}function Tn(o){return kn(o.replace(/\+/g,"%20"))}function qn(o){return`${ln(o.path)}${function ri(o){return Object.keys(o).map(u=>`;${ln(u)}=${ln(o[u])}`).join("")}(o.parameters)}`}const Ft=/^[^\/()?;=#]+/;function jn(o){const u=o.match(Ft);return u?u[0]:""}const In=/^[^=?&#]+/,Zn=/^[^&#]+/;class ut{constructor(u){this.url=u,this.remaining=u}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ne([],{}):new Ne([],this.parseChildren())}parseQueryParams(){const u={};if(this.consumeOptional("?"))do{this.parseQueryParam(u)}while(this.consumeOptional("&"));return u}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const u=[];for(this.peekStartsWith("(")||u.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),u.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let T={};return this.peekStartsWith("(")&&(T=this.parseParens(!1)),(u.length>0||Object.keys(_).length>0)&&(T[rt]=new Ne(u,_)),T}parseSegment(){const u=jn(this.remaining);if(""===u&&this.peekStartsWith(";"))throw new n.vHH(4009,!1);return this.capture(u),new ze(kn(u),this.parseMatrixParams())}parseMatrixParams(){const u={};for(;this.consumeOptional(";");)this.parseParam(u);return u}parseParam(u){const _=jn(this.remaining);if(!_)return;this.capture(_);let T="";if(this.consumeOptional("=")){const D=jn(this.remaining);D&&(T=D,this.capture(T))}u[kn(_)]=kn(T)}parseQueryParam(u){const _=function Fn(o){const u=o.match(In);return u?u[0]:""}(this.remaining);if(!_)return;this.capture(_);let T="";if(this.consumeOptional("=")){const re=function zn(o){const u=o.match(Zn);return u?u[0]:""}(this.remaining);re&&(T=re,this.capture(T))}const D=Tn(_),F=Tn(T);if(u.hasOwnProperty(D)){let re=u[D];Array.isArray(re)||(re=[re],u[D]=re),re.push(F)}else u[D]=F}parseParens(u){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const T=jn(this.remaining),D=this.remaining[T.length];if("/"!==D&&")"!==D&&";"!==D)throw new n.vHH(4010,!1);let F;T.indexOf(":")>-1?(F=T.slice(0,T.indexOf(":")),this.capture(F),this.capture(":")):u&&(F=rt);const re=this.parseChildren();_[F]=1===Object.keys(re).length?re[rt]:new Ne([],re),this.consumeOptional("//")}return _}peekStartsWith(u){return this.remaining.startsWith(u)}consumeOptional(u){return!!this.peekStartsWith(u)&&(this.remaining=this.remaining.substring(u.length),!0)}capture(u){if(!this.consumeOptional(u))throw new n.vHH(4011,!1)}}function vt(o){return o.segments.length>0?new Ne([],{[rt]:o}):o}function at(o){const u={};for(const T of Object.keys(o.children)){const F=at(o.children[T]);(F.segments.length>0||F.hasChildren())&&(u[T]=F)}return function Ot(o){if(1===o.numberOfChildren&&o.children[rt]){const u=o.children[rt];return new Ne(o.segments.concat(u.segments),u.children)}return o}(new Ne(o.segments,u))}function Ht(o){return o instanceof ne}function os(o,u,_,T,D){var F;if(0===_.length)return ur(u.root,u.root,u.root,T,D);const re=function Gi(o){if("string"==typeof o[0]&&1===o.length&&"/"===o[0])return new nr(!0,0,o);let u=0,_=!1;const T=o.reduce((D,F,re)=>{if("object"==typeof F&&null!=F){if(F.outlets){const ce={};return ke(F.outlets,(Ee,dt)=>{ce[dt]="string"==typeof Ee?Ee.split("/"):Ee}),[...D,{outlets:ce}]}if(F.segmentPath)return[...D,F.segmentPath]}return"string"!=typeof F?[...D,F]:0===re?(F.split("/").forEach((ce,Ee)=>{0==Ee&&"."===ce||(0==Ee&&""===ce?_=!0:".."===ce?u++:""!=ce&&D.push(ce))}),D):[...D,F]},[]);return new nr(_,u,T)}(_);if(re.toRoot())return ur(u.root,u.root,new Ne([],{}),T,D);const Ee=function ce(wt){var kt;const sn=function Jr(o,u,_,T){if(o.isAbsolute)return new Ai(u.root,!0,0);if(-1===T)return new Ai(_,_===u.root,0);return function qr(o,u,_){let T=o,D=u,F=_;for(;F>D;){if(F-=D,T=T.parent,!T)throw new n.vHH(4005,!1);D=T.segments.length}return new Ai(T,!1,D-F)}(_,T+(Nn(o.commands[0])?0:1),o.numberOfDoubleDots)}(re,u,null===(kt=o.snapshot)||void 0===kt?void 0:kt._urlSegment,wt),Sn=sn.processChildren?kr(sn.segmentGroup,sn.index,re.commands):Vn(sn.segmentGroup,sn.index,re.commands);return ur(u.root,sn.segmentGroup,Sn,T,D)}(null===(F=o.snapshot)||void 0===F?void 0:F._lastPathIndex);return Ee}function Nn(o){return"object"==typeof o&&null!=o&&!o.outlets&&!o.segmentPath}function mi(o){return"object"==typeof o&&null!=o&&o.outlets}function ur(o,u,_,T,D){let re,F={};T&&ke(T,(Ee,dt)=>{F[dt]=Array.isArray(Ee)?Ee.map(wt=>`${wt}`):`${Ee}`}),re=o===u?_:yi(o,u,_);const ce=vt(at(re));return new ne(ce,F,D)}function yi(o,u,_){const T={};return ke(o.children,(D,F)=>{T[F]=D===u?_:yi(D,u,_)}),new Ne(o.segments,T)}class nr{constructor(u,_,T){if(this.isAbsolute=u,this.numberOfDoubleDots=_,this.commands=T,u&&T.length>0&&Nn(T[0]))throw new n.vHH(4003,!1);const D=T.find(mi);if(D&&D!==Be(T))throw new n.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ai{constructor(u,_,T){this.segmentGroup=u,this.processChildren=_,this.index=T}}function Vn(o,u,_){if(o||(o=new Ne([],{})),0===o.segments.length&&o.hasChildren())return kr(o,u,_);const T=function ts(o,u,_){let T=0,D=u;const F={match:!1,pathIndex:0,commandIndex:0};for(;D<o.segments.length;){if(T>=_.length)return F;const re=o.segments[D],ce=_[T];if(mi(ce))break;const Ee=`${ce}`,dt=T<_.length-1?_[T+1]:null;if(D>0&&void 0===Ee)break;if(Ee&&dt&&"object"==typeof dt&&void 0===dt.outlets){if(!We(Ee,dt,re))return F;T+=2}else{if(!We(Ee,{},re))return F;T++}D++}return{match:!0,pathIndex:D,commandIndex:T}}(o,u,_),D=_.slice(T.commandIndex);if(T.match&&T.pathIndex<o.segments.length){const F=new Ne(o.segments.slice(0,T.pathIndex),{});return F.children[rt]=new Ne(o.segments.slice(T.pathIndex),o.children),kr(F,0,D)}return T.match&&0===D.length?new Ne(o.segments,{}):T.match&&!o.hasChildren()?Ui(o,u,_):T.match?kr(o,0,D):Ui(o,u,_)}function kr(o,u,_){if(0===_.length)return new Ne(o.segments,{});{const T=function Tr(o){return mi(o[0])?o[0].outlets:{[rt]:o}}(_),D={};return ke(T,(F,re)=>{"string"==typeof F&&(F=[F]),null!==F&&(D[re]=Vn(o.children[re],u,F))}),ke(o.children,(F,re)=>{void 0===T[re]&&(D[re]=F)}),new Ne(o.segments,D)}}function Ui(o,u,_){const T=o.segments.slice(0,u);let D=0;for(;D<_.length;){const F=_[D];if(mi(F)){const Ee=ws(F.outlets);return new Ne(T,Ee)}if(0===D&&Nn(_[0])){T.push(new ze(o.segments[u].path,Ve(_[0]))),D++;continue}const re=mi(F)?F.outlets[rt]:`${F}`,ce=D<_.length-1?_[D+1]:null;re&&ce&&Nn(ce)?(T.push(new ze(re,Ve(ce))),D+=2):(T.push(new ze(re,{})),D++)}return new Ne(T,{})}function ws(o){const u={};return ke(o,(_,T)=>{"string"==typeof _&&(_=[_]),null!==_&&(u[T]=Ui(new Ne([],{}),0,_))}),u}function Ve(o){const u={};return ke(o,(_,T)=>u[T]=`${_}`),u}function We(o,u,_){return o==_.path&&X(u,_.parameters)}class st{constructor(u,_){this.id=u,this.url=_}}class Mt extends st{constructor(u,_,T="imperative",D=null){super(u,_),this.type=0,this.navigationTrigger=T,this.restoredState=D}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class nn extends st{constructor(u,_,T){super(u,_),this.urlAfterRedirects=T,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rn extends st{constructor(u,_,T,D){super(u,_),this.reason=T,this.code=D,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bn extends st{constructor(u,_,T,D){super(u,_),this.error=T,this.target=D,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class An extends st{constructor(u,_,T,D){super(u,_),this.urlAfterRedirects=T,this.state=D,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wi extends st{constructor(u,_,T,D){super(u,_),this.urlAfterRedirects=T,this.state=D,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class di extends st{constructor(u,_,T,D,F){super(u,_),this.urlAfterRedirects=T,this.state=D,this.shouldActivate=F,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class oi extends st{constructor(u,_,T,D){super(u,_),this.urlAfterRedirects=T,this.state=D,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dr extends st{constructor(u,_,T,D){super(u,_),this.urlAfterRedirects=T,this.state=D,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pr{constructor(u){this.route=u,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ar{constructor(u){this.route=u,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fi{constructor(u){this.snapshot=u,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Br{constructor(u){this.snapshot=u,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zi{constructor(u){this.snapshot=u,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ir{constructor(u){this.snapshot=u,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ns{constructor(u,_,T){this.routerEvent=u,this.position=_,this.anchor=T,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class po{constructor(u){this._root=u}get root(){return this._root.value}parent(u){const _=this.pathFromRoot(u);return _.length>1?_[_.length-2]:null}children(u){const _=ys(u,this._root);return _?_.children.map(T=>T.value):[]}firstChild(u){const _=ys(u,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(u){const _=zs(u,this._root);return _.length<2?[]:_[_.length-2].children.map(D=>D.value).filter(D=>D!==u)}pathFromRoot(u){return zs(u,this._root).map(_=>_.value)}}function ys(o,u){if(o===u.value)return u;for(const _ of u.children){const T=ys(o,_);if(T)return T}return null}function zs(o,u){if(o===u.value)return[u];for(const _ of u.children){const T=zs(o,_);if(T.length)return T.unshift(u),T}return[]}class is{constructor(u,_){this.value=u,this.children=_}toString(){return`TreeNode(${this.value})`}}function Ts(o){const u={};return o&&o.children.forEach(_=>u[_.value.outlet]=_),u}class ho extends po{constructor(u,_){super(u),this.snapshot=_,Rn(this,u)}toString(){return this.snapshot.toString()}}function Ys(o,u){const _=function Fr(o,u){const re=new Hn([],{},{},"",{},rt,u,null,o.root,-1,{});return new As("",new is(re,[]))}(o,u),T=new S.X([new ze("",{})]),D=new S.X({}),F=new S.X({}),re=new S.X({}),ce=new S.X(""),Ee=new Xi(T,D,re,ce,F,rt,u,_.root);return Ee.snapshot=_.root,new ho(new is(Ee,[]),_)}class Xi{constructor(u,_,T,D,F,re,ce,Ee){var dt,wt;this.url=u,this.params=_,this.queryParams=T,this.fragment=D,this.data=F,this.outlet=re,this.component=ce,this.title=null!==(dt=null===(wt=this.data)||void 0===wt?void 0:wt.pipe((0,V.U)(kt=>kt[ft])))&&void 0!==dt?dt:(0,h.of)(void 0),this._futureSnapshot=Ee}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,V.U)(u=>en(u)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,V.U)(u=>en(u)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Si(o,u="emptyOnly"){const _=o.pathFromRoot;let T=0;if("always"!==u)for(T=_.length-1;T>=1;){const D=_[T],F=_[T-1];if(D.routeConfig&&""===D.routeConfig.path)T--;else{if(F.component)break;T--}}return function Cs(o){return o.reduce((u,_)=>{var T;return{params:{...u.params,..._.params},data:{...u.data,..._.data},resolve:{..._.data,...u.resolve,...null===(T=_.routeConfig)||void 0===T?void 0:T.data,..._._resolvedData}}},{params:{},data:{},resolve:{}})}(_.slice(T))}class Hn{constructor(u,_,T,D,F,re,ce,Ee,dt,wt,kt,sn){var Sn;this.url=u,this.params=_,this.queryParams=T,this.fragment=D,this.data=F,this.outlet=re,this.component=ce,this.title=null===(Sn=this.data)||void 0===Sn?void 0:Sn[ft],this.routeConfig=Ee,this._urlSegment=dt,this._lastPathIndex=wt,this._correctedLastPathIndex=sn??wt,this._resolve=kt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=en(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=en(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(T=>T.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class As extends po{constructor(u,_){super(_),this.url=u,Rn(this,_)}toString(){return mr(this._root)}}function Rn(o,u){u.value._routerState=o,u.children.forEach(_=>Rn(o,_))}function mr(o){const u=o.children.length>0?` { ${o.children.map(mr).join(", ")} } `:"";return`${o.value}${u}`}function Sr(o){if(o.snapshot){const u=o.snapshot,_=o._futureSnapshot;o.snapshot=_,X(u.queryParams,_.queryParams)||o.queryParams.next(_.queryParams),u.fragment!==_.fragment&&o.fragment.next(_.fragment),X(u.params,_.params)||o.params.next(_.params),function Dt(o,u){if(o.length!==u.length)return!1;for(let _=0;_<o.length;++_)if(!X(o[_],u[_]))return!1;return!0}(u.url,_.url)||o.url.next(_.url),X(u.data,_.data)||o.data.next(_.data)}else o.snapshot=o._futureSnapshot,o.data.next(o._futureSnapshot.data)}function as(o,u){const _=X(o.params,u.params)&&function et(o,u){return Tt(o,u)&&o.every((_,T)=>X(_.parameters,u[T].parameters))}(o.url,u.url);return _&&!(!o.parent!=!u.parent)&&(!o.parent||as(o.parent,u.parent))}function Zr(o,u,_){if(_&&o.shouldReuseRoute(u.value,_.value.snapshot)){const T=_.value;T._futureSnapshot=u.value;const D=function gr(o,u,_){return u.children.map(T=>{for(const D of _.children)if(o.shouldReuseRoute(T.value,D.value.snapshot))return Zr(o,T,D);return Zr(o,T)})}(o,u,_);return new is(T,D)}{if(o.shouldAttach(u.value)){const F=o.retrieve(u.value);if(null!==F){const re=F.route;return re.value._futureSnapshot=u.value,re.children=u.children.map(ce=>Zr(o,ce)),re}}const T=function ls(o){return new Xi(new S.X(o.url),new S.X(o.params),new S.X(o.queryParams),new S.X(o.fragment),new S.X(o.data),o.outlet,o.component,o)}(u.value),D=u.children.map(F=>Zr(o,F));return new is(T,D)}}const zi="ngNavigationCancelingError";function _r(o,u){const{redirectTo:_,navigationBehaviorOptions:T}=Ht(u)?{redirectTo:u,navigationBehaviorOptions:void 0}:u,D=cs(!1,0,u);return D.url=_,D.navigationBehaviorOptions=T,D}function cs(o,u,_){const T=new Error("NavigationCancelingError: "+(o||""));return T[zi]=!0,T.cancellationCode=u,_&&(T.url=_),T}function vr(o){return Ni(o)&&Ht(o.url)}function Ni(o){return o&&o[zi]}class zr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Wr,this.attachRef=null}}let Wr=(()=>{class o{constructor(){this.contexts=new Map}onChildOutletCreated(_,T){const D=this.getOrCreateContext(_);D.outlet=T,this.contexts.set(_,D)}onChildOutletDestroyed(_){const T=this.getContext(_);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let T=this.getContext(_);return T||(T=new zr,this.contexts.set(_,T)),T}getContext(_){return this.contexts.get(_)||null}}return o.\u0275fac=function(_){return new(_||o)},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Ls=!1;let Rr=(()=>{class o{constructor(_,T,D,F,re){this.parentContexts=_,this.location=T,this.changeDetector=F,this.environmentInjector=re,this.activated=null,this._activatedRoute=null,this.activateEvents=new n.vpe,this.deactivateEvents=new n.vpe,this.attachEvents=new n.vpe,this.detachEvents=new n.vpe,this.name=D||rt,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){var _;(null===(_=this.parentContexts.getContext(this.name))||void 0===_?void 0:_.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new n.vHH(4012,Ls);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new n.vHH(4012,Ls);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new n.vHH(4012,Ls);this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,T){this.activated=_,this._activatedRoute=T,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,T){if(this.isActivated)throw new n.vHH(4013,Ls);this._activatedRoute=_;const D=this.location,re=_._futureSnapshot.component,ce=this.parentContexts.getOrCreateContext(this.name).children,Ee=new Ss(_,ce,D.injector);if(T&&function Di(o){return!!o.resolveComponentFactory}(T)){const dt=T.resolveComponentFactory(re);this.activated=D.createComponent(dt,D.length,Ee)}else this.activated=D.createComponent(re,{index:D.length,injector:Ee,environmentInjector:T??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return o.\u0275fac=function(_){return new(_||o)(n.Y36(Wr),n.Y36(n.s_b),n.$8M("name"),n.Y36(n.sBO),n.Y36(n.lqb))},o.\u0275dir=n.lG2({type:o,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),o})();class Ss{constructor(u,_,T){this.route=u,this.childContexts=_,this.parent=T}get(u,_){return u===Xi?this.route:u===Wr?this.childContexts:this.parent.get(u,_)}}let xs=(()=>{class o{}return o.\u0275fac=function(_){return new(_||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["ng-component"]],standalone:!0,features:[n.jDz],decls:1,vars:0,template:function(_,T){1&_&&n._UZ(0,"router-outlet")},dependencies:[Rr],encapsulation:2}),o})();function To(o,u){var _;return o.providers&&!o._injector&&(o._injector=(0,n.MMx)(o.providers,u,`Route: ${o.path}`)),null!==(_=o._injector)&&void 0!==_?_:u}function _o(o){const u=o.children&&o.children.map(_o),_=u?{...o,children:u}:{...o};return!_.component&&!_.loadComponent&&(u||_.loadChildren)&&_.outlet&&_.outlet!==rt&&(_.component=xs),_}function Ii(o){return o.outlet||rt}function Vi(o,u){const _=o.filter(T=>Ii(T)===u);return _.push(...o.filter(T=>Ii(T)!==u)),_}function xr(o){var u;if(!o)return null;if(null!==(u=o.routeConfig)&&void 0!==u&&u._injector)return o.routeConfig._injector;for(let _=o.parent;_;_=_.parent){const T=_.routeConfig;if(null!=T&&T._loadedInjector)return T._loadedInjector;if(null!=T&&T._injector)return T._injector}return null}class Js{constructor(u,_,T,D){this.routeReuseStrategy=u,this.futureState=_,this.currState=T,this.forwardEvent=D}activate(u){const _=this.futureState._root,T=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,T,u),Sr(this.futureState.root),this.activateChildRoutes(_,T,u)}deactivateChildRoutes(u,_,T){const D=Ts(_);u.children.forEach(F=>{const re=F.value.outlet;this.deactivateRoutes(F,D[re],T),delete D[re]}),ke(D,(F,re)=>{this.deactivateRouteAndItsChildren(F,T)})}deactivateRoutes(u,_,T){const D=u.value,F=_?_.value:null;if(D===F)if(D.component){const re=T.getContext(D.outlet);re&&this.deactivateChildRoutes(u,_,re.children)}else this.deactivateChildRoutes(u,_,T);else F&&this.deactivateRouteAndItsChildren(_,T)}deactivateRouteAndItsChildren(u,_){u.value.component&&this.routeReuseStrategy.shouldDetach(u.value.snapshot)?this.detachAndStoreRouteSubtree(u,_):this.deactivateRouteAndOutlet(u,_)}detachAndStoreRouteSubtree(u,_){const T=_.getContext(u.value.outlet),D=T&&u.value.component?T.children:_,F=Ts(u);for(const re of Object.keys(F))this.deactivateRouteAndItsChildren(F[re],D);if(T&&T.outlet){const re=T.outlet.detach(),ce=T.children.onOutletDeactivated();this.routeReuseStrategy.store(u.value.snapshot,{componentRef:re,route:u,contexts:ce})}}deactivateRouteAndOutlet(u,_){const T=_.getContext(u.value.outlet),D=T&&u.value.component?T.children:_,F=Ts(u);for(const re of Object.keys(F))this.deactivateRouteAndItsChildren(F[re],D);T&&T.outlet&&(T.outlet.deactivate(),T.children.onOutletDeactivated(),T.attachRef=null,T.resolver=null,T.route=null)}activateChildRoutes(u,_,T){const D=Ts(_);u.children.forEach(F=>{this.activateRoutes(F,D[F.value.outlet],T),this.forwardEvent(new ir(F.value.snapshot))}),u.children.length&&this.forwardEvent(new Br(u.value.snapshot))}activateRoutes(u,_,T){const D=u.value,F=_?_.value:null;if(Sr(D),D===F)if(D.component){const ce=T.getOrCreateContext(D.outlet);this.activateChildRoutes(u,_,ce.children)}else this.activateChildRoutes(u,_,T);else if(D.component){const ce=T.getOrCreateContext(D.outlet);if(this.routeReuseStrategy.shouldAttach(D.snapshot)){const Ee=this.routeReuseStrategy.retrieve(D.snapshot);this.routeReuseStrategy.store(D.snapshot,null),ce.children.onOutletReAttached(Ee.contexts),ce.attachRef=Ee.componentRef,ce.route=Ee.route.value,ce.outlet&&ce.outlet.attach(Ee.componentRef,Ee.route.value),Sr(Ee.route.value),this.activateChildRoutes(u,null,ce.children)}else{var re;const Ee=xr(D.snapshot),dt=null!==(re=Ee?.get(n._Vd))&&void 0!==re?re:null;ce.attachRef=null,ce.route=D,ce.resolver=dt,ce.injector=Ee,ce.outlet&&ce.outlet.activateWith(D,ce.injector),this.activateChildRoutes(u,null,ce.children)}}else this.activateChildRoutes(u,null,T)}}class rr{constructor(u){this.path=u,this.route=this.path[this.path.length-1]}}class Kr{constructor(u,_){this.component=u,this.route=_}}function Ao(o,u,_){const T=o._root;return Vr(T,u?u._root:null,_,[T.value])}function yr(o,u){const _=Symbol(),T=u.get(o,_);return T===_?"function"!=typeof o||(0,n.Z0I)(o)?u.get(o):o:T}function Vr(o,u,_,T,D={canDeactivateChecks:[],canActivateChecks:[]}){const F=Ts(u);return o.children.forEach(re=>{(function Er(o,u,_,T,D={canDeactivateChecks:[],canActivateChecks:[]}){const F=o.value,re=u?u.value:null,ce=_?_.getContext(o.value.outlet):null;if(re&&F.routeConfig===re.routeConfig){const Ee=function cn(o,u,_){if("function"==typeof _)return _(o,u);switch(_){case"pathParamsChange":return!Tt(o.url,u.url);case"pathParamsOrQueryParamsChange":return!Tt(o.url,u.url)||!X(o.queryParams,u.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!as(o,u)||!X(o.queryParams,u.queryParams);default:return!as(o,u)}}(re,F,F.routeConfig.runGuardsAndResolvers);Ee?D.canActivateChecks.push(new rr(T)):(F.data=re.data,F._resolvedData=re._resolvedData),Vr(o,u,F.component?ce?ce.children:null:_,T,D),Ee&&ce&&ce.outlet&&ce.outlet.isActivated&&D.canDeactivateChecks.push(new Kr(ce.outlet.component,re))}else re&&Kn(u,ce,D),D.canActivateChecks.push(new rr(T)),Vr(o,null,F.component?ce?ce.children:null:_,T,D)})(re,F[re.value.outlet],_,T.concat([re.value]),D),delete F[re.value.outlet]}),ke(F,(re,ce)=>Kn(re,_.getContext(ce),D)),D}function Kn(o,u,_){const T=Ts(o),D=o.value;ke(T,(F,re)=>{Kn(F,D.component?u?u.children.getContext(re):null:u,_)}),_.canDeactivateChecks.push(new Kr(D.component&&u&&u.outlet&&u.outlet.isActivated?u.outlet.component:null,D))}function fs(o){return"function"==typeof o}function xi(o){return o instanceof y.K||"EmptyError"===o?.name}const Dr=Symbol("INITIAL_VALUE");function Ir(){return(0,Q.w)(o=>(0,w.a)(o.map(u=>u.pipe((0,Y.q)(1),(0,fe.O)(Dr)))).pipe((0,V.U)(u=>{for(const _ of u)if(!0!==_){if(_===Dr)return Dr;if(!1===_||_ instanceof ne)return _}return!0}),(0,J.h)(u=>u!==Dr),(0,Y.q)(1)))}function fn(o){return(0,b.z)((0,te.b)(u=>{if(Ht(u))throw _r(0,u)}),(0,V.U)(u=>!0===u))}const Ln={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lr(o,u,_,T,D){const F=Pr(o,u,_);return F.matched?function $n(o,u,_,T){const D=u.canMatch;if(!D||0===D.length)return(0,h.of)(!0);const F=D.map(re=>{const ce=yr(re,o);return Re(function $e(o){return o&&fs(o.canMatch)}(ce)?ce.canMatch(u,_):o.runInContext(()=>ce(u,_)))});return(0,h.of)(F).pipe(Ir(),fn())}(T=To(u,T),u,_).pipe((0,V.U)(re=>!0===re?F:{...Ln})):(0,h.of)(F)}function Pr(o,u,_){var T;if(""===u.path)return"full"===u.pathMatch&&(o.hasChildren()||_.length>0)?{...Ln}:{matched:!0,consumedSegments:[],remainingSegments:_,parameters:{},positionalParamSegments:{}};const F=(u.matcher||xt)(_,o,u);if(!F)return{...Ln};const re={};ke(F.posParams,(Ee,dt)=>{re[dt]=Ee.path});const ce=F.consumed.length>0?{...re,...F.consumed[F.consumed.length-1].parameters}:re;return{matched:!0,consumedSegments:F.consumed,remainingSegments:_.slice(F.consumed.length),parameters:ce,positionalParamSegments:null!==(T=F.posParams)&&void 0!==T?T:{}}}function cr(o,u,_,T,D="corrected"){if(_.length>0&&function Oo(o,u,_){return _.some(T=>de(o,u,T)&&Ii(T)!==rt)}(o,_,T)){const re=new Ne(u,function yn(o,u,_,T){const D={};D[rt]=T,T._sourceSegment=o,T._segmentIndexShift=u.length;for(const F of _)if(""===F.path&&Ii(F)!==rt){const re=new Ne([],{});re._sourceSegment=o,re._segmentIndexShift=u.length,D[Ii(F)]=re}return D}(o,u,T,new Ne(_,o.children)));return re._sourceSegment=o,re._segmentIndexShift=u.length,{segmentGroup:re,slicedSegments:[]}}if(0===_.length&&function Xs(o,u,_){return _.some(T=>de(o,u,T))}(o,_,T)){const re=new Ne(o.segments,function si(o,u,_,T,D,F){const re={};for(const ce of T)if(de(o,_,ce)&&!D[Ii(ce)]){const Ee=new Ne([],{});Ee._sourceSegment=o,Ee._segmentIndexShift="legacy"===F?o.segments.length:u.length,re[Ii(ce)]=Ee}return{...D,...re}}(o,u,_,T,o.children,D));return re._sourceSegment=o,re._segmentIndexShift=u.length,{segmentGroup:re,slicedSegments:_}}const F=new Ne(o.segments,o.children);return F._sourceSegment=o,F._segmentIndexShift=u.length,{segmentGroup:F,slicedSegments:_}}function de(o,u,_){return(!(o.hasChildren()||u.length>0)||"full"!==_.pathMatch)&&""===_.path}function Oe(o,u,_,T){return!!(Ii(o)===T||T!==rt&&de(u,_,o))&&("**"===o.path||Pr(u,o,_).matched)}function ge(o,u,_){return 0===u.length&&!o.children[_]}const He=!1;class ot{constructor(u){this.segmentGroup=u||null}}class Vt{constructor(u){this.urlTree=u}}function zt(o){return(0,g._)(new ot(o))}function Pt(o){return(0,g._)(new Vt(o))}class Ut{constructor(u,_,T,D,F){this.injector=u,this.configLoader=_,this.urlSerializer=T,this.urlTree=D,this.config=F,this.allowRedirects=!0}apply(){const u=cr(this.urlTree.root,[],[],this.config).segmentGroup,_=new Ne(u.segments,u.children);return this.expandSegmentGroup(this.injector,this.config,_,rt).pipe((0,V.U)(F=>this.createUrlTree(at(F),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,$.K)(F=>{if(F instanceof Vt)return this.allowRedirects=!1,this.match(F.urlTree);throw F instanceof ot?this.noMatchError(F):F}))}match(u){return this.expandSegmentGroup(this.injector,this.config,u.root,rt).pipe((0,V.U)(D=>this.createUrlTree(at(D),u.queryParams,u.fragment))).pipe((0,$.K)(D=>{throw D instanceof ot?this.noMatchError(D):D}))}noMatchError(u){return new n.vHH(4002,He)}createUrlTree(u,_,T){const D=vt(u);return new ne(D,_,T)}expandSegmentGroup(u,_,T,D){return 0===T.segments.length&&T.hasChildren()?this.expandChildren(u,_,T).pipe((0,V.U)(F=>new Ne([],F))):this.expandSegment(u,T,_,T.segments,D,!0)}expandChildren(u,_,T){const D=[];for(const F of Object.keys(T.children))"primary"===F?D.unshift(F):D.push(F);return(0,e.D)(D).pipe((0,E.b)(F=>{const re=T.children[F],ce=Vi(_,F);return this.expandSegmentGroup(u,ce,re,F).pipe((0,V.U)(Ee=>({segment:Ee,outlet:F})))}),me((F,re)=>(F[re.outlet]=re.segment,F),{}),Ge())}expandSegment(u,_,T,D,F,re){return(0,e.D)(T).pipe((0,E.b)(ce=>this.expandSegmentAgainstRoute(u,_,T,ce,D,F,re).pipe((0,$.K)(dt=>{if(dt instanceof ot)return(0,h.of)(null);throw dt}))),(0,G.P)(ce=>!!ce),(0,$.K)((ce,Ee)=>{if(xi(ce))return ge(_,D,F)?(0,h.of)(new Ne([],{})):zt(_);throw ce}))}expandSegmentAgainstRoute(u,_,T,D,F,re,ce){return Oe(D,_,F,re)?void 0===D.redirectTo?this.matchSegmentAgainstRoute(u,_,D,F,re):ce&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(u,_,T,D,F,re):zt(_):zt(_)}expandSegmentAgainstRouteUsingRedirect(u,_,T,D,F,re){return"**"===D.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(u,T,D,re):this.expandRegularSegmentAgainstRouteUsingRedirect(u,_,T,D,F,re)}expandWildCardWithParamsAgainstRouteUsingRedirect(u,_,T,D){const F=this.applyRedirectCommands([],T.redirectTo,{});return T.redirectTo.startsWith("/")?Pt(F):this.lineralizeSegments(T,F).pipe((0,ee.z)(re=>{const ce=new Ne(re,{});return this.expandSegment(u,ce,_,re,D,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(u,_,T,D,F,re){const{matched:ce,consumedSegments:Ee,remainingSegments:dt,positionalParamSegments:wt}=Pr(_,D,F);if(!ce)return zt(_);const kt=this.applyRedirectCommands(Ee,D.redirectTo,wt);return D.redirectTo.startsWith("/")?Pt(kt):this.lineralizeSegments(D,kt).pipe((0,ee.z)(sn=>this.expandSegment(u,_,T,sn.concat(dt),re,!1)))}matchSegmentAgainstRoute(u,_,T,D,F){return"**"===T.path?(u=To(T,u),T.loadChildren?(T._loadedRoutes?(0,h.of)({routes:T._loadedRoutes,injector:T._loadedInjector}):this.configLoader.loadChildren(u,T)).pipe((0,V.U)(ce=>(T._loadedRoutes=ce.routes,T._loadedInjector=ce.injector,new Ne(D,{})))):(0,h.of)(new Ne(D,{}))):lr(_,T,D,u).pipe((0,Q.w)(({matched:re,consumedSegments:ce,remainingSegments:Ee})=>{var dt;return re?(u=null!==(dt=T._injector)&&void 0!==dt?dt:u,this.getChildConfig(u,T,D).pipe((0,ee.z)(kt=>{var sn;const Sn=null!==(sn=kt.injector)&&void 0!==sn?sn:u,Dn=kt.routes,{segmentGroup:qi,slicedSegments:Ur}=cr(_,ce,Ee,Dn),Ns=new Ne(qi.segments,qi.children);if(0===Ur.length&&Ns.hasChildren())return this.expandChildren(Sn,Dn,Ns).pipe((0,V.U)(Os=>new Ne(ce,Os)));if(0===Dn.length&&0===Ur.length)return(0,h.of)(new Ne(ce,{}));const vs=Ii(T)===F;return this.expandSegment(Sn,Ns,Dn,Ur,vs?rt:F,!0).pipe((0,V.U)(Nr=>new Ne(ce.concat(Nr.segments),Nr.children)))}))):zt(_)}))}getChildConfig(u,_,T){return _.children?(0,h.of)({routes:_.children,injector:u}):_.loadChildren?void 0!==_._loadedRoutes?(0,h.of)({routes:_._loadedRoutes,injector:_._loadedInjector}):function tn(o,u,_,T){const D=u.canLoad;if(void 0===D||0===D.length)return(0,h.of)(!0);const F=D.map(re=>{const ce=yr(re,o);return Re(function Hi(o){return o&&fs(o.canLoad)}(ce)?ce.canLoad(u,_):o.runInContext(()=>ce(u,_)))});return(0,h.of)(F).pipe(Ir(),fn())}(u,_,T).pipe((0,ee.z)(D=>D?this.configLoader.loadChildren(u,_).pipe((0,te.b)(F=>{_._loadedRoutes=F.routes,_._loadedInjector=F.injector})):function pi(o){return(0,g._)(cs(He,3))}())):(0,h.of)({routes:[],injector:u})}lineralizeSegments(u,_){let T=[],D=_.root;for(;;){if(T=T.concat(D.segments),0===D.numberOfChildren)return(0,h.of)(T);if(D.numberOfChildren>1||!D.children[rt])return(0,g._)(new n.vHH(4e3,He));D=D.children[rt]}}applyRedirectCommands(u,_,T){return this.applyRedirectCreateUrlTree(_,this.urlSerializer.parse(_),u,T)}applyRedirectCreateUrlTree(u,_,T,D){const F=this.createSegmentGroup(u,_.root,T,D);return new ne(F,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(u,_){const T={};return ke(u,(D,F)=>{if("string"==typeof D&&D.startsWith(":")){const ce=D.substring(1);T[F]=_[ce]}else T[F]=D}),T}createSegmentGroup(u,_,T,D){const F=this.createSegments(u,_.segments,T,D);let re={};return ke(_.children,(ce,Ee)=>{re[Ee]=this.createSegmentGroup(u,ce,T,D)}),new Ne(F,re)}createSegments(u,_,T,D){return _.map(F=>F.path.startsWith(":")?this.findPosParam(u,F,D):this.findOrReturn(F,T))}findPosParam(u,_,T){const D=T[_.path.substring(1)];if(!D)throw new n.vHH(4001,He);return D}findOrReturn(u,_){let T=0;for(const D of _){if(D.path===u.path)return _.splice(T),D;T++}return u}}class hr{}class qs{constructor(u,_,T,D,F,re,ce,Ee){this.injector=u,this.rootComponentType=_,this.config=T,this.urlTree=D,this.url=F,this.paramsInheritanceStrategy=re,this.relativeLinkResolution=ce,this.urlSerializer=Ee}recognize(){const u=cr(this.urlTree.root,[],[],this.config.filter(_=>void 0===_.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,u,rt).pipe((0,V.U)(_=>{if(null===_)return null;const T=new Hn([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},rt,this.rootComponentType,null,this.urlTree.root,-1,{}),D=new is(T,_),F=new As(this.url,D);return this.inheritParamsAndData(F._root),F}))}inheritParamsAndData(u){const _=u.value,T=Si(_,this.paramsInheritanceStrategy);_.params=Object.freeze(T.params),_.data=Object.freeze(T.data),u.children.forEach(D=>this.inheritParamsAndData(D))}processSegmentGroup(u,_,T,D){return 0===T.segments.length&&T.hasChildren()?this.processChildren(u,_,T):this.processSegment(u,_,T,T.segments,D)}processChildren(u,_,T){return(0,e.D)(Object.keys(T.children)).pipe((0,E.b)(D=>{const F=T.children[D],re=Vi(_,D);return this.processSegmentGroup(u,re,F,D)}),me((D,F)=>D&&F?(D.push(...F),D):null),function ve(o,u=!1){return(0,O.e)((_,T)=>{let D=0;_.subscribe((0,P.x)(T,F=>{const re=o(F,D++);(re||u)&&T.next(F),!re&&T.complete()}))})}(D=>null!==D),(0,qe.d)(null),Ge(),(0,V.U)(D=>{if(null===D)return null;const F=fo(D);return function Wi(o){o.sort((u,_)=>u.value.outlet===rt?-1:_.value.outlet===rt?1:u.value.outlet.localeCompare(_.value.outlet))}(F),F}))}processSegment(u,_,T,D,F){return(0,e.D)(_).pipe((0,E.b)(re=>{var ce;return this.processSegmentAgainstRoute(null!==(ce=re._injector)&&void 0!==ce?ce:u,re,T,D,F)}),(0,G.P)(re=>!!re),(0,$.K)(re=>{if(xi(re))return ge(T,D,F)?(0,h.of)([]):(0,h.of)(null);throw re}))}processSegmentAgainstRoute(u,_,T,D,F){if(_.redirectTo||!Oe(_,T,D,F))return(0,h.of)(null);let re;if("**"===_.path){var ce,Ee;const dt=D.length>0?Be(D).parameters:{},wt=ms(T)+D.length,kt=new Hn(D,dt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ba(_),Ii(_),null!==(ce=null!==(Ee=_.component)&&void 0!==Ee?Ee:_._loadedComponent)&&void 0!==ce?ce:null,_,Yr(T),wt,Bs(_),wt);re=(0,h.of)({snapshot:kt,consumedSegments:[],remainingSegments:[]})}else re=lr(T,_,D,u).pipe((0,V.U)(({matched:dt,consumedSegments:wt,remainingSegments:kt,parameters:sn})=>{var Sn,Dn;if(!dt)return null;const qi=ms(T)+wt.length;return{snapshot:new Hn(wt,sn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ba(_),Ii(_),null!==(Sn=null!==(Dn=_.component)&&void 0!==Dn?Dn:_._loadedComponent)&&void 0!==Sn?Sn:null,_,Yr(T),qi,Bs(_),qi),consumedSegments:wt,remainingSegments:kt}}));return re.pipe((0,Q.w)(dt=>{var wt,kt;if(null===dt)return(0,h.of)(null);const{snapshot:sn,consumedSegments:Sn,remainingSegments:Dn}=dt;u=null!==(wt=_._injector)&&void 0!==wt?wt:u;const qi=null!==(kt=_._loadedInjector)&&void 0!==kt?kt:u,Ur=function Ri(o){return o.children?o.children:o.loadChildren?o._loadedRoutes:[]}(_),{segmentGroup:Ns,slicedSegments:vs}=cr(T,Sn,Dn,Ur.filter(Nr=>void 0===Nr.redirectTo),this.relativeLinkResolution);if(0===vs.length&&Ns.hasChildren())return this.processChildren(qi,Ur,Ns).pipe((0,V.U)(Nr=>null===Nr?null:[new is(sn,Nr)]));if(0===Ur.length&&0===vs.length)return(0,h.of)([new is(sn,[])]);const Fs=Ii(_)===F;return this.processSegment(qi,Ur,Ns,vs,Fs?rt:F).pipe((0,V.U)(Nr=>null===Nr?null:[new is(sn,Nr)]))}))}}function Ds(o){const u=o.value.routeConfig;return u&&""===u.path&&void 0===u.redirectTo}function fo(o){const u=[],_=new Set;for(const T of o){if(!Ds(T)){u.push(T);continue}const D=u.find(F=>T.value.routeConfig===F.value.routeConfig);void 0!==D?(D.children.push(...T.children),_.add(D)):u.push(T)}for(const T of _){const D=fo(T.children);u.push(new is(T.value,D))}return u.filter(T=>!_.has(T))}function Yr(o){let u=o;for(;u._sourceSegment;)u=u._sourceSegment;return u}function ms(o){var u;let _=o,T=null!==(u=_._segmentIndexShift)&&void 0!==u?u:0;for(;_._sourceSegment;){var D;_=_._sourceSegment,T+=null!==(D=_._segmentIndexShift)&&void 0!==D?D:0}return T-1}function ba(o){return o.data||{}}function Bs(o){return o.resolve||{}}function eo(o){return"string"==typeof o.title||null===o.title}function Mr(o){return(0,Q.w)(u=>{const _=o(u);return _?(0,e.D)(_).pipe((0,V.U)(()=>u)):(0,h.of)(u)})}let Va=(()=>{class o{buildTitle(_){let T,D=_.root;for(;void 0!==D;){var F;T=null!==(F=this.getResolvedTitleForRoute(D))&&void 0!==F?F:T,D=D.children.find(re=>re.outlet===rt)}return T}getResolvedTitleForRoute(_){return _.data[ft]}}return o.\u0275fac=function(_){return new(_||o)},o.\u0275prov=n.Yz7({token:o,factory:function(){return(0,n.f3M)(mo)},providedIn:"root"}),o})(),mo=(()=>{class o extends Va{constructor(_){super(),this.title=_}updateTitle(_){const T=this.buildTitle(_);void 0!==T&&this.title.setTitle(T)}}return o.\u0275fac=function(_){return new(_||o)(n.LFG(ct.Dx))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();class to{}class ko extends class nl{shouldDetach(u){return!1}store(u,_){}shouldAttach(u){return!1}retrieve(u){return null}shouldReuseRoute(u,_){return u.routeConfig===_.routeConfig}}{}const Wo=new n.OlP("",{providedIn:"root",factory:()=>({})}),xo=new n.OlP("ROUTES");let jo=(()=>{class o{constructor(_,T){this.injector=_,this.compiler=T,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(_){if(this.componentLoaders.get(_))return this.componentLoaders.get(_);if(_._loadedComponent)return(0,h.of)(_._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(_);const T=Re(_.loadComponent()).pipe((0,te.b)(F=>{this.onLoadEndListener&&this.onLoadEndListener(_),_._loadedComponent=F}),tt(()=>{this.componentLoaders.delete(_)})),D=new W(T,()=>new M.x).pipe(U());return this.componentLoaders.set(_,D),D}loadChildren(_,T){if(this.childrenLoaders.get(T))return this.childrenLoaders.get(T);if(T._loadedRoutes)return(0,h.of)({routes:T._loadedRoutes,injector:T._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(T);const F=this.loadModuleFactoryOrRoutes(T.loadChildren).pipe((0,V.U)(ce=>{this.onLoadEndListener&&this.onLoadEndListener(T);let Ee,dt,wt=!1;Array.isArray(ce)?dt=ce:(Ee=ce.create(_).injector,dt=ae(Ee.get(xo,[],n.XFs.Self|n.XFs.Optional)));return{routes:dt.map(_o),injector:Ee}}),tt(()=>{this.childrenLoaders.delete(T)})),re=new W(F,()=>new M.x).pipe(U());return this.childrenLoaders.set(T,re),re}loadModuleFactoryOrRoutes(_){return Re(_()).pipe((0,ee.z)(T=>T instanceof n.YKP||Array.isArray(T)?(0,h.of)(T):(0,e.D)(this.compiler.compileModuleAsync(T))))}}return o.\u0275fac=function(_){return new(_||o)(n.LFG(n.zs3),n.LFG(n.Sil))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();class xe{}class H{shouldProcessUrl(u){return!0}extract(u){return u}merge(u,_){return u}}function Pe(o){throw o}function pt(o,u,_){return u.parse("/")}const It={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},St={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function un(){var o,u;const _=(0,n.f3M)(gn),T=(0,n.f3M)(Wr),D=(0,n.f3M)(B.Ye),F=(0,n.f3M)(n.zs3),re=(0,n.f3M)(n.Sil),ce=null!==(o=(0,n.f3M)(xo,{optional:!0}))&&void 0!==o?o:[],Ee=null!==(u=(0,n.f3M)(Wo,{optional:!0}))&&void 0!==u?u:{},dt=(0,n.f3M)(mo),wt=(0,n.f3M)(Va,{optional:!0}),kt=(0,n.f3M)(xe,{optional:!0}),sn=(0,n.f3M)(to,{optional:!0}),Sn=new pn(null,_,T,D,F,re,ae(ce));return kt&&(Sn.urlHandlingStrategy=kt),sn&&(Sn.routeReuseStrategy=sn),Sn.titleStrategy=wt??dt,function Jt(o,u){o.errorHandler&&(u.errorHandler=o.errorHandler),o.malformedUriErrorHandler&&(u.malformedUriErrorHandler=o.malformedUriErrorHandler),o.onSameUrlNavigation&&(u.onSameUrlNavigation=o.onSameUrlNavigation),o.paramsInheritanceStrategy&&(u.paramsInheritanceStrategy=o.paramsInheritanceStrategy),o.relativeLinkResolution&&(u.relativeLinkResolution=o.relativeLinkResolution),o.urlUpdateStrategy&&(u.urlUpdateStrategy=o.urlUpdateStrategy),o.canceledNavigationResolution&&(u.canceledNavigationResolution=o.canceledNavigationResolution)}(Ee,Sn),Sn}let pn=(()=>{class o{constructor(_,T,D,F,re,ce,Ee){this.rootComponentType=_,this.urlSerializer=T,this.rootContexts=D,this.location=F,this.config=Ee,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new M.x,this.errorHandler=Pe,this.malformedUriErrorHandler=pt,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,h.of)(void 0),this.urlHandlingStrategy=new H,this.routeReuseStrategy=new ko,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=re.get(jo),this.configLoader.onLoadEndListener=sn=>this.triggerEvent(new Ar(sn)),this.configLoader.onLoadStartListener=sn=>this.triggerEvent(new pr(sn)),this.ngModule=re.get(n.h0i),this.console=re.get(n.c2e);const kt=re.get(n.R0b);this.isNgZoneEnabled=kt instanceof n.R0b&&n.R0b.isInAngularZone(),this.resetConfig(Ee),this.currentUrlTree=function Qe(){return new ne(new Ne([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ys(this.currentUrlTree,this.rootComponentType),this.transitions=new S.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var _;return null===(_=this.location.getState())||void 0===_?void 0:_.\u0275routerPageId}setupNavigations(_){const T=this.events;return _.pipe((0,J.h)(D=>0!==D.id),(0,V.U)(D=>({...D,extractedUrl:this.urlHandlingStrategy.extract(D.rawUrl)})),(0,Q.w)(D=>{let F=!1,re=!1;return(0,h.of)(D).pipe((0,te.b)(ce=>{this.currentNavigation={id:ce.id,initialUrl:ce.rawUrl,extractedUrl:ce.extractedUrl,trigger:ce.source,extras:ce.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Q.w)(ce=>{const Ee=this.browserUrlTree.toString(),dt=!this.navigated||ce.extractedUrl.toString()!==Ee||Ee!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||dt)&&this.urlHandlingStrategy.shouldProcessUrl(ce.rawUrl))return Pi(ce.source)&&(this.browserUrlTree=ce.extractedUrl),(0,h.of)(ce).pipe((0,Q.w)(kt=>{const sn=this.transitions.getValue();return T.next(new Mt(kt.id,this.serializeUrl(kt.extractedUrl),kt.source,kt.restoredState)),sn!==this.transitions.getValue()?R.E:Promise.resolve(kt)}),function Un(o,u,_,T){return(0,Q.w)(D=>function ti(o,u,_,T,D){return new Ut(o,u,_,T,D).apply()}(o,u,_,D.extractedUrl,T).pipe((0,V.U)(F=>({...D,urlAfterRedirects:F}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,te.b)(kt=>{this.currentNavigation={...this.currentNavigation,finalUrl:kt.urlAfterRedirects},D.urlAfterRedirects=kt.urlAfterRedirects}),function gs(o,u,_,T,D,F){return(0,ee.z)(re=>function sr(o,u,_,T,D,F,re="emptyOnly",ce="legacy"){return new qs(o,u,_,T,D,re,ce,F).recognize().pipe((0,Q.w)(Ee=>null===Ee?function Cr(o){return new N.y(u=>u.error(o))}(new hr):(0,h.of)(Ee)))}(o,u,_,re.urlAfterRedirects,T.serialize(re.urlAfterRedirects),T,D,F).pipe((0,V.U)(ce=>({...re,targetSnapshot:ce}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,te.b)(kt=>{if(D.targetSnapshot=kt.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!kt.extras.skipLocationChange){const Sn=this.urlHandlingStrategy.merge(kt.urlAfterRedirects,kt.rawUrl);this.setBrowserUrl(Sn,kt)}this.browserUrlTree=kt.urlAfterRedirects}const sn=new An(kt.id,this.serializeUrl(kt.extractedUrl),this.serializeUrl(kt.urlAfterRedirects),kt.targetSnapshot);T.next(sn)}));if(dt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:sn,extractedUrl:Sn,source:Dn,restoredState:qi,extras:Ur}=ce,Ns=new Mt(sn,this.serializeUrl(Sn),Dn,qi);T.next(Ns);const vs=Ys(Sn,this.rootComponentType).snapshot;return D={...ce,targetSnapshot:vs,urlAfterRedirects:Sn,extras:{...Ur,skipLocationChange:!1,replaceUrl:!1}},(0,h.of)(D)}return this.rawUrlTree=ce.rawUrl,ce.resolve(null),R.E}),(0,te.b)(ce=>{const Ee=new wi(ce.id,this.serializeUrl(ce.extractedUrl),this.serializeUrl(ce.urlAfterRedirects),ce.targetSnapshot);this.triggerEvent(Ee)}),(0,V.U)(ce=>D={...ce,guards:Ao(ce.targetSnapshot,ce.currentSnapshot,this.rootContexts)}),function Ji(o,u){return(0,ee.z)(_=>{const{targetSnapshot:T,currentSnapshot:D,guards:{canActivateChecks:F,canDeactivateChecks:re}}=_;return 0===re.length&&0===F.length?(0,h.of)({..._,guardsResult:!0}):function ai(o,u,_,T){return(0,e.D)(o).pipe((0,ee.z)(D=>function Lt(o,u,_,T,D){const F=u&&u.routeConfig?u.routeConfig.canDeactivate:null;if(!F||0===F.length)return(0,h.of)(!0);const re=F.map(ce=>{var Ee;const dt=null!==(Ee=xr(u))&&void 0!==Ee?Ee:D,wt=yr(ce,dt);return Re(function z(o){return o&&fs(o.canDeactivate)}(wt)?wt.canDeactivate(o,u,_,T):dt.runInContext(()=>wt(o,u,_,T))).pipe((0,G.P)())});return(0,h.of)(re).pipe(Ir())}(D.component,D.route,_,u,T)),(0,G.P)(D=>!0!==D,!0))}(re,T,D,o).pipe((0,ee.z)(ce=>ce&&function ei(o){return"boolean"==typeof o}(ce)?function Ie(o,u,_,T){return(0,e.D)(u).pipe((0,E.b)(D=>(0,f.z)(function yt(o,u){return null!==o&&u&&u(new Fi(o)),(0,h.of)(!0)}(D.route.parent,T),function Fe(o,u){return null!==o&&u&&u(new Zi(o)),(0,h.of)(!0)}(D.route,T),function Bt(o,u,_){const T=u[u.length-1],F=u.slice(0,u.length-1).reverse().map(re=>function Ti(o){const u=o.routeConfig?o.routeConfig.canActivateChild:null;return u&&0!==u.length?{node:o,guards:u}:null}(re)).filter(re=>null!==re).map(re=>(0,x.P)(()=>{const ce=re.guards.map(Ee=>{var dt;const wt=null!==(dt=xr(re.node))&&void 0!==dt?dt:_,kt=yr(Ee,wt);return Re(function he(o){return o&&fs(o.canActivateChild)}(kt)?kt.canActivateChild(T,o):wt.runInContext(()=>kt(T,o))).pipe((0,G.P)())});return(0,h.of)(ce).pipe(Ir())}));return(0,h.of)(F).pipe(Ir())}(o,D.path,_),function At(o,u,_){const T=u.routeConfig?u.routeConfig.canActivate:null;if(!T||0===T.length)return(0,h.of)(!0);const D=T.map(F=>(0,x.P)(()=>{var re;const ce=null!==(re=xr(u))&&void 0!==re?re:_,Ee=yr(F,ce);return Re(function Te(o){return o&&fs(o.canActivate)}(Ee)?Ee.canActivate(u,o):ce.runInContext(()=>Ee(u,o))).pipe((0,G.P)())}));return(0,h.of)(D).pipe(Ir())}(o,D.route,_))),(0,G.P)(D=>!0!==D,!0))}(T,F,o,u):(0,h.of)(ce)),(0,V.U)(ce=>({..._,guardsResult:ce})))})}(this.ngModule.injector,ce=>this.triggerEvent(ce)),(0,te.b)(ce=>{if(D.guardsResult=ce.guardsResult,Ht(ce.guardsResult))throw _r(0,ce.guardsResult);const Ee=new di(ce.id,this.serializeUrl(ce.extractedUrl),this.serializeUrl(ce.urlAfterRedirects),ce.targetSnapshot,!!ce.guardsResult);this.triggerEvent(Ee)}),(0,J.h)(ce=>!!ce.guardsResult||(this.restoreHistory(ce),this.cancelNavigationTransition(ce,"",3),!1)),Mr(ce=>{if(ce.guards.canActivateChecks.length)return(0,h.of)(ce).pipe((0,te.b)(Ee=>{const dt=new oi(Ee.id,this.serializeUrl(Ee.extractedUrl),this.serializeUrl(Ee.urlAfterRedirects),Ee.targetSnapshot);this.triggerEvent(dt)}),(0,Q.w)(Ee=>{let dt=!1;return(0,h.of)(Ee).pipe(function qo(o,u){return(0,ee.z)(_=>{const{targetSnapshot:T,guards:{canActivateChecks:D}}=_;if(!D.length)return(0,h.of)(_);let F=0;return(0,e.D)(D).pipe((0,E.b)(re=>function or(o,u,_,T){const D=o.routeConfig,F=o._resolve;return void 0!==D?.title&&!eo(D)&&(F[ft]=D.title),function Is(o,u,_,T){const D=function Qo(o){return[...Object.keys(o),...Object.getOwnPropertySymbols(o)]}(o);if(0===D.length)return(0,h.of)({});const F={};return(0,e.D)(D).pipe((0,ee.z)(re=>function wa(o,u,_,T){var D;const F=null!==(D=xr(u))&&void 0!==D?D:T,re=yr(o,F);return Re(re.resolve?re.resolve(u,_):F.runInContext(()=>re(u,_)))}(o[re],u,_,T).pipe((0,G.P)(),(0,te.b)(ce=>{F[re]=ce}))),we(1),(0,c.h)(F),(0,$.K)(re=>xi(re)?R.E:(0,g._)(re)))}(F,o,u,T).pipe((0,V.U)(re=>(o._resolvedData=re,o.data=Si(o,_).resolve,D&&eo(D)&&(o.data[ft]=D.title),null)))}(re.route,T,o,u)),(0,te.b)(()=>F++),we(1),(0,ee.z)(re=>F===D.length?(0,h.of)(_):R.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,te.b)({next:()=>dt=!0,complete:()=>{dt||(this.restoreHistory(Ee),this.cancelNavigationTransition(Ee,"",2))}}))}),(0,te.b)(Ee=>{const dt=new dr(Ee.id,this.serializeUrl(Ee.extractedUrl),this.serializeUrl(Ee.urlAfterRedirects),Ee.targetSnapshot);this.triggerEvent(dt)}))}),Mr(ce=>{const Ee=dt=>{var wt;const kt=[];null!==(wt=dt.routeConfig)&&void 0!==wt&&wt.loadComponent&&!dt.routeConfig._loadedComponent&&kt.push(this.configLoader.loadComponent(dt.routeConfig).pipe((0,te.b)(sn=>{dt.component=sn}),(0,V.U)(()=>{})));for(const sn of dt.children)kt.push(...Ee(sn));return kt};return(0,w.a)(Ee(ce.targetSnapshot.root)).pipe((0,qe.d)(),(0,Y.q)(1))}),Mr(()=>this.afterPreactivation()),(0,V.U)(ce=>{const Ee=function Qr(o,u,_){const T=Zr(o,u._root,_?_._root:void 0);return new ho(T,u)}(this.routeReuseStrategy,ce.targetSnapshot,ce.currentRouterState);return D={...ce,targetRouterState:Ee}}),(0,te.b)(ce=>{this.currentUrlTree=ce.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ce.urlAfterRedirects,ce.rawUrl),this.routerState=ce.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ce.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ce),this.browserUrlTree=ce.urlAfterRedirects)}),((o,u,_)=>(0,V.U)(T=>(new Js(u,T.targetRouterState,T.currentRouterState,_).activate(o),T)))(this.rootContexts,this.routeReuseStrategy,ce=>this.triggerEvent(ce)),(0,te.b)({next(){F=!0},complete(){F=!0}}),tt(()=>{var ce;F||re||this.cancelNavigationTransition(D,"",1),(null===(ce=this.currentNavigation)||void 0===ce?void 0:ce.id)===D.id&&(this.currentNavigation=null)}),(0,$.K)(ce=>{if(re=!0,Ni(ce)){vr(ce)||(this.navigated=!0,this.restoreHistory(D,!0));const dt=new rn(D.id,this.serializeUrl(D.extractedUrl),ce.message,ce.cancellationCode);if(T.next(dt),vr(ce)){const wt=this.urlHandlingStrategy.merge(ce.url,this.rawUrlTree),kt={skipLocationChange:D.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Pi(D.source)};this.scheduleNavigation(wt,"imperative",null,kt,{resolve:D.resolve,reject:D.reject,promise:D.promise})}else D.resolve(!1)}else{var Ee;this.restoreHistory(D,!0);const dt=new bn(D.id,this.serializeUrl(D.extractedUrl),ce,null!==(Ee=D.targetSnapshot)&&void 0!==Ee?Ee:void 0);T.next(dt);try{D.resolve(this.errorHandler(ce))}catch(wt){D.reject(wt)}}return R.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next({...this.transitions.value,..._})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const T="popstate"===_.type?"popstate":"hashchange";"popstate"===T&&setTimeout(()=>{var D;const F={replaceUrl:!0},re=null!==(D=_.state)&&void 0!==D&&D.navigationId?_.state:null;if(re){const Ee={...re};delete Ee.navigationId,delete Ee.\u0275routerPageId,0!==Object.keys(Ee).length&&(F.state=Ee)}const ce=this.parseUrl(_.url);this.scheduleNavigation(ce,T,re,F)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){this.config=_.map(_o),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,T={}){const{relativeTo:D,queryParams:F,fragment:re,queryParamsHandling:ce,preserveFragment:Ee}=T,dt=D||this.routerState.root,wt=Ee?this.currentUrlTree.fragment:re;let kt=null;switch(ce){case"merge":kt={...this.currentUrlTree.queryParams,...F};break;case"preserve":kt=this.currentUrlTree.queryParams;break;default:kt=F||null}return null!==kt&&(kt=this.removeEmptyProps(kt)),os(dt,this.currentUrlTree,_,kt,wt??null)}navigateByUrl(_,T={skipLocationChange:!1}){const D=Ht(_)?_:this.parseUrl(_),F=this.urlHandlingStrategy.merge(D,this.rawUrlTree);return this.scheduleNavigation(F,"imperative",null,T)}navigate(_,T={skipLocationChange:!1}){return function _i(o){for(let u=0;u<o.length;u++){if(null==o[u])throw new n.vHH(4008,false)}}(_),this.navigateByUrl(this.createUrlTree(_,T),T)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let T;try{T=this.urlSerializer.parse(_)}catch(D){T=this.malformedUriErrorHandler(D,this.urlSerializer,_)}return T}isActive(_,T){let D;if(D=!0===T?{...It}:!1===T?{...St}:T,Ht(_))return Je(this.currentUrlTree,_,D);const F=this.parseUrl(_);return Je(this.currentUrlTree,F,D)}removeEmptyProps(_){return Object.keys(_).reduce((T,D)=>{const F=_[D];return null!=F&&(T[D]=F),T},{})}processNavigations(){this.navigations.subscribe(_=>{var T;this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new nn(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(T=this.titleStrategy)||void 0===T||T.updateTitle(this.routerState.snapshot),_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,T,D,F,re){if(this.disposed)return Promise.resolve(!1);let ce,Ee,dt;re?(ce=re.resolve,Ee=re.reject,dt=re.promise):dt=new Promise((Dn,qi)=>{ce=Dn,Ee=qi});const wt=++this.navigationId;let kt;if("computed"===this.canceledNavigationResolution)if(0===this.currentPageId&&(D=this.location.getState()),D&&D.\u0275routerPageId)kt=D.\u0275routerPageId;else if(F.replaceUrl||F.skipLocationChange){var sn;kt=null!==(sn=this.browserPageId)&&void 0!==sn?sn:0}else{var Sn;kt=(null!==(Sn=this.browserPageId)&&void 0!==Sn?Sn:0)+1}else kt=0;return this.setTransition({id:wt,targetPageId:kt,source:T,restoredState:D,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:F,resolve:ce,reject:Ee,promise:dt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),dt.catch(Dn=>Promise.reject(Dn))}setBrowserUrl(_,T){const D=this.urlSerializer.serialize(_),F={...T.extras.state,...this.generateNgRouterState(T.id,T.targetPageId)};this.location.isCurrentPathEqualTo(D)||T.extras.replaceUrl?this.location.replaceState(D,"",F):this.location.go(D,"",F)}restoreHistory(_,T=!1){if("computed"===this.canceledNavigationResolution){var D,F;const re=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(D=this.currentNavigation)||void 0===D?void 0:D.finalUrl)||0===re?this.currentUrlTree===(null===(F=this.currentNavigation)||void 0===F?void 0:F.finalUrl)&&0===re&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(re)}else"replace"===this.canceledNavigationResolution&&(T&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,T,D){const F=new rn(_.id,this.serializeUrl(_.extractedUrl),T,D);this.triggerEvent(F),_.resolve(!1)}generateNgRouterState(_,T){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:T}:{navigationId:_}}}return o.\u0275fac=function(_){n.$Z()},o.\u0275prov=n.Yz7({token:o,factory:function(){return un()},providedIn:"root"}),o})();function Pi(o){return"imperative"!==o}let br=(()=>{class o{constructor(_,T,D,F,re){this.router=_,this.route=T,this.tabIndexAttribute=D,this.renderer=F,this.el=re,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new M.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(_){this._preserveFragment=(0,n.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,n.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,n.D6c)(_)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(_){if(null!=this.tabIndexAttribute)return;const T=this.renderer,D=this.el.nativeElement;null!==_?T.setAttribute(D,"tabindex",_):T.removeAttribute(D,"tabindex")}ngOnChanges(_){this.onChanges.next(this)}set routerLink(_){null!=_?(this.commands=Array.isArray(_)?_:[_],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return o.\u0275fac=function(_){return new(_||o)(n.Y36(pn),n.Y36(Xi),n.$8M("tabindex"),n.Y36(n.Qsj),n.Y36(n.SBq))},o.\u0275dir=n.lG2({type:o,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(_,T){1&_&&n.NdJ("click",function(){return T.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[n.TTD]}),o})(),ni=(()=>{class o{constructor(_,T,D){this.router=_,this.route=T,this.locationStrategy=D,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new M.x,this.subscription=_.events.subscribe(F=>{F instanceof nn&&this.updateTargetUrlAndHref()})}set preserveFragment(_){this._preserveFragment=(0,n.D6c)(_)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(_){this._skipLocationChange=(0,n.D6c)(_)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(_){this._replaceUrl=(0,n.D6c)(_)}get replaceUrl(){return this._replaceUrl}set routerLink(_){this.commands=null!=_?Array.isArray(_)?_:[_]:null}ngOnChanges(_){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(_,T,D,F,re){return!!(0!==_||T||D||F||re||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return o.\u0275fac=function(_){return new(_||o)(n.Y36(pn),n.Y36(Xi),n.Y36(B.S$))},o.\u0275dir=n.lG2({type:o,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(_,T){1&_&&n.NdJ("click",function(F){return T.onClick(F.button,F.ctrlKey,F.shiftKey,F.altKey,F.metaKey)}),2&_&&n.uIk("target",T.target)("href",T.href,n.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[n.TTD]}),o})(),Hr=(()=>{class o{constructor(_,T,D,F,re,ce){this.router=_,this.element=T,this.renderer=D,this.cdr=F,this.link=re,this.linkWithHref=ce,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new n.vpe,this.routerEventsSubscription=_.events.subscribe(Ee=>{Ee instanceof nn&&this.update()})}ngAfterContentInit(){(0,h.of)(this.links.changes,this.linksWithHrefs.changes,(0,h.of)(null)).pipe((0,_t.J)()).subscribe(_=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var _;null===(_=this.linkInputChangesSubscription)||void 0===_||_.unsubscribe();const T=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(D=>!!D).map(D=>D.onChanges);this.linkInputChangesSubscription=(0,e.D)(T).pipe((0,_t.J)()).subscribe(D=>{this.isActive!==this.isLinkActive(this.router)(D)&&this.update()})}set routerLinkActive(_){const T=Array.isArray(_)?_:_.split(" ");this.classes=T.filter(D=>!!D)}ngOnChanges(_){this.update()}ngOnDestroy(){var _;this.routerEventsSubscription.unsubscribe(),null===(_=this.linkInputChangesSubscription)||void 0===_||_.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const _=this.hasActiveLinks();this.isActive!==_&&(this.isActive=_,this.cdr.markForCheck(),this.classes.forEach(T=>{_?this.renderer.addClass(this.element.nativeElement,T):this.renderer.removeClass(this.element.nativeElement,T)}),_&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(_))})}isLinkActive(_){const T=function Qs(o){return!!o.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return D=>!!D.urlTree&&_.isActive(D.urlTree,T)}hasActiveLinks(){const _=this.isLinkActive(this.router);return this.link&&_(this.link)||this.linkWithHref&&_(this.linkWithHref)||this.links.some(_)||this.linksWithHrefs.some(_)}}return o.\u0275fac=function(_){return new(_||o)(n.Y36(pn),n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(n.sBO),n.Y36(br,8),n.Y36(ni,8))},o.\u0275dir=n.lG2({type:o,selectors:[["","routerLinkActive",""]],contentQueries:function(_,T,D){if(1&_&&(n.Suo(D,br,5),n.Suo(D,ni,5)),2&_){let F;n.iGM(F=n.CRH())&&(T.links=F),n.iGM(F=n.CRH())&&(T.linksWithHrefs=F)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[n.TTD]}),o})();class Ws{}let Ja=(()=>{class o{constructor(_,T,D,F,re){this.router=_,this.injector=D,this.preloadingStrategy=F,this.loader=re}setUpPreloading(){this.subscription=this.router.events.pipe((0,J.h)(_=>_ instanceof nn),(0,E.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,T){const D=[];for(const Ee of T){var F,re;Ee.providers&&!Ee._injector&&(Ee._injector=(0,n.MMx)(Ee.providers,_,`Route: ${Ee.path}`));const dt=null!==(F=Ee._injector)&&void 0!==F?F:_,wt=null!==(re=Ee._loadedInjector)&&void 0!==re?re:dt;if(Ee.loadChildren&&!Ee._loadedRoutes&&void 0===Ee.canLoad||Ee.loadComponent&&!Ee._loadedComponent)D.push(this.preloadConfig(dt,Ee));else if(Ee.children||Ee._loadedRoutes){var ce;D.push(this.processRoutes(wt,null!==(ce=Ee.children)&&void 0!==ce?ce:Ee._loadedRoutes))}}return(0,e.D)(D).pipe((0,_t.J)())}preloadConfig(_,T){return this.preloadingStrategy.preload(T,()=>{let D;D=T.loadChildren&&void 0===T.canLoad?this.loader.loadChildren(_,T):(0,h.of)(null);const F=D.pipe((0,ee.z)(re=>{var ce;return null===re?(0,h.of)(void 0):(T._loadedRoutes=re.routes,T._loadedInjector=re.injector,this.processRoutes(null!==(ce=re.injector)&&void 0!==ce?ce:_,re.routes))}));if(T.loadComponent&&!T._loadedComponent){const re=this.loader.loadComponent(T);return(0,e.D)([F,re]).pipe((0,_t.J)())}return F})}}return o.\u0275fac=function(_){return new(_||o)(n.LFG(pn),n.LFG(n.Sil),n.LFG(n.lqb),n.LFG(Ws),n.LFG(jo))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const js=new n.OlP("");let Lr=(()=>{class o{constructor(_,T,D={}){this.router=_,this.viewportScroller=T,this.options=D,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},D.scrollPositionRestoration=D.scrollPositionRestoration||"disabled",D.anchorScrolling=D.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Mt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof nn&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof ns&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,T){this.router.triggerEvent(new ns(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,T))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return o.\u0275fac=function(_){n.$Z()},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac}),o})();function Ks(o,u){return{\u0275kind:o,\u0275providers:u}}function yo(o){return[{provide:xo,multi:!0,useValue:o}]}function le(){const o=(0,n.f3M)(n.zs3);return u=>{var _,T;const D=o.get(n.z2F);if(u!==D.components[0])return;const F=o.get(pn),re=o.get(gt);1===o.get(Z)&&F.initialNavigation(),null===(_=o.get(En,null,n.XFs.Optional))||void 0===_||_.setUpPreloading(),null===(T=o.get(js,null,n.XFs.Optional))||void 0===T||T.init(),F.resetRootComponentType(D.componentTypes[0]),re.next(),re.complete()}}const gt=new n.OlP("",{factory:()=>new M.x}),Z=new n.OlP("",{providedIn:"root",factory:()=>1});const En=new n.OlP("");function er(o){return Ks(0,[{provide:En,useExisting:Ja},{provide:Ws,useExisting:o}])}const il=new n.OlP("ROUTER_FORROOT_GUARD"),jd=[B.Ye,{provide:gn,useClass:Yt},{provide:pn,useFactory:un},Wr,{provide:Xi,useFactory:function io(o){return o.routerState.root},deps:[pn]},jo];function _s(){return new n.PXZ("Router",pn)}let Aa=(()=>{class o{constructor(_){}static forRoot(_,T){return{ngModule:o,providers:[jd,[],yo(_),{provide:il,useFactory:ro,deps:[[pn,new n.FiY,new n.tp0]]},{provide:Wo,useValue:T||{}},null!=T&&T.useHash?{provide:B.S$,useClass:B.Do}:{provide:B.S$,useClass:B.b0},{provide:js,useFactory:()=>{const o=(0,n.f3M)(pn),u=(0,n.f3M)(B.EM),_=(0,n.f3M)(Wo);return _.scrollOffset&&u.setOffset(_.scrollOffset),new Lr(o,u,_)}},null!=T&&T.preloadingStrategy?er(T.preloadingStrategy).\u0275providers:[],{provide:n.PXZ,multi:!0,useFactory:_s},null!=T&&T.initialNavigation?Xo(T):[],[{provide:Pl,useFactory:le},{provide:n.tb,multi:!0,useExisting:Pl}]]}}static forChild(_){return{ngModule:o,providers:[yo(_)]}}}return o.\u0275fac=function(_){return new(_||o)(n.LFG(il,8))},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[xs]}),o})();function ro(o){return"guarded"}function Xo(o){return["disabled"===o.initialNavigation?Ks(3,[{provide:n.ip1,multi:!0,useFactory:()=>{const u=(0,n.f3M)(pn);return()=>{u.setUpLocationChangeListener()}}},{provide:Z,useValue:2}]).\u0275providers:[],"enabledBlocking"===o.initialNavigation?Ks(2,[{provide:Z,useValue:0},{provide:n.ip1,multi:!0,deps:[n.zs3],useFactory:u=>{const _=u.get(B.V_,Promise.resolve());let T=!1;return()=>_.then(()=>new Promise(F=>{const re=u.get(pn),ce=u.get(gt);(function D(F){u.get(pn).events.pipe((0,J.h)(ce=>ce instanceof nn||ce instanceof rn||ce instanceof bn),(0,V.U)(ce=>ce instanceof nn||ce instanceof rn&&(0===ce.code||1===ce.code)&&null),(0,J.h)(ce=>null!==ce),(0,Y.q)(1)).subscribe(()=>{F()})})(()=>{F(!0),T=!0}),re.afterPreactivation=()=>(F(!0),T||ce.closed?(0,h.of)(void 0):ce),re.initialNavigation()}))}}]).\u0275providers:[]]}const Pl=new n.OlP("")},2979:(nt,_e,m)=>{"use strict";m.d(_e,{DJ:()=>ye,fQ:()=>j,lO:()=>rt,An:()=>_t,uh:()=>me});var n=m(4650),e=m(8185),h=m(9751),S=m(7579),y=m(4707),w=m(9646),f=m(2076),x=m(5191),b=m(9300),g=m(4482),N=m(5403),k=m(5577),O=m(4004),P=m(9383),U=m(6895),W=m(529);const M=new n.OlP("LOCALIZE_ROUTER_FORROOT_GUARD"),B=new n.OlP("RAW_ROUTES");var V=(()=>{return(ke=V||(V={})).LocalStorage="LocalStorage",ke.SessionStorage="SessionStorage",ke.Cookie="Cookie",V;var ke})();const Q=new n.OlP("USE_CACHED_LANG"),Y=new n.OlP("CACHE_MECHANISM"),fe=new n.OlP("CACHE_NAME"),J=new n.OlP("COOKIE_FORMAT"),ee=new n.OlP("INITIAL_NAVIGATION"),G=new n.OlP("DEFAULT_LANG_FUNCTION"),E=new n.OlP("ALWAYS_SET_PREFIX");let me=(()=>{class ke{constructor(Se=!0,Qe=!0,Xe=V.LocalStorage,Ke="LOCALIZE_DEFAULT_LANGUAGE",Je,Ct="{{value}};{{expires}}",ht=!1){this.useCachedLang=Se,this.alwaysSetPrefix=Qe,this.cacheName=Ke,this.cookieFormat=Ct,this.initialNavigation=ht,this.cacheMechanism=Xe,this.defaultLangFunction=Je}}return ke.\u0275fac=function(Se){return new(Se||ke)(n.LFG(Q),n.LFG(E),n.LFG(Y),n.LFG(fe),n.LFG(G),n.LFG(J),n.LFG(ee))},ke.\u0275prov=n.Yz7({token:ke,factory:ke.\u0275fac}),ke})(),ye=(()=>{class ke{constructor(Se,Qe,Xe){this.translate=Se,this.location=Qe,this.settings=Xe}init(Se){let Qe;if(this.routes=Se,!this.locales||!this.locales.length)return Promise.resolve();const Xe=this.getLocationLang(),Ke=this._getBrowserLang();this.defaultLang=this.settings.defaultLangFunction?this.settings.defaultLangFunction(this.locales,this._cachedLang,Ke):this._cachedLang||Ke||this.locales[0],Qe=Xe||this.defaultLang,this.translate.setDefaultLang(this.defaultLang);let Je=[];if(this.settings.alwaysSetPrefix){const ht={path:"",redirectTo:this.defaultLang,pathMatch:"full"},Ze=Se.findIndex(oe=>"**"===oe.path);-1!==Ze&&(this._wildcardRoute=Se.splice(Ze,1)[0]),Je=this.routes.splice(0,this.routes.length,ht)}else Je=[...this.routes];for(let ht=Je.length-1;ht>=0;ht--)Je[ht].data&&Je[ht].data.skipRouteLocalization&&(this.settings.alwaysSetPrefix&&this.routes.push(Je[ht]),(void 0===Je[ht].redirectTo||!Je[ht].data.skipRouteLocalization.localizeRedirectTo)&&Je.splice(ht,1));return Je&&Je.length&&(this.locales.length>1||this.settings.alwaysSetPrefix)&&(this._languageRoute={children:Je},this.routes.unshift(this._languageRoute)),this._wildcardRoute&&this.settings.alwaysSetPrefix&&this.routes.push(this._wildcardRoute),this.translateRoutes(Qe).toPromise()}initChildRoutes(Se){return this._translateRouteTree(Se),Se}translateRoutes(Se){return new h.y(Qe=>{this._cachedLang=Se,this._languageRoute&&(this._languageRoute.path=Se),this.translate.use(Se).subscribe(Xe=>{this._translationObject=Xe,this.currentLang=Se,this._languageRoute?(this._languageRoute&&this._translateRouteTree(this._languageRoute.children),this._wildcardRoute&&this._wildcardRoute.redirectTo&&this._translateProperty(this._wildcardRoute,"redirectTo",!0)):this._translateRouteTree(this.routes),Qe.next(void 0),Qe.complete()})})}_translateRouteTree(Se){Se.forEach(Qe=>{const Xe=Qe.data&&Qe.data.skipRouteLocalization;Qe.redirectTo&&(!Xe||Xe.localizeRedirectTo)&&this._translateProperty(Qe,"redirectTo",!Qe.redirectTo.indexOf("/")),Xe||(null!=Qe.path&&this._translateProperty(Qe,"path"),Qe.children&&this._translateRouteTree(Qe.children),Qe.loadChildren&&Qe._loadedConfig&&this._translateRouteTree(Qe._loadedConfig.routes))})}_translateProperty(Se,Qe,Xe){const Ke=Se.data=Se.data||{};Ke.localizeRouter||(Ke.localizeRouter={}),Ke.localizeRouter[Qe]||(Ke.localizeRouter={...Ke.localizeRouter,[Qe]:Se[Qe]});const Je=this.translateRoute(Ke.localizeRouter[Qe]);Se[Qe]=Xe?this.addPrefixToUrl(Je):Je}get urlPrefix(){return this.settings.alwaysSetPrefix||this.currentLang!==this.defaultLang?this.currentLang?this.currentLang:this.defaultLang:""}addPrefixToUrl(Se){const Qe=Se.split("?");return Qe[0]=Qe[0].replace(/\/$/,""),`/${this.urlPrefix}${Qe.join("?")}`}translateRoute(Se){const Qe=Se.split("?");if(Qe.length>2)throw Error("There should be only one query parameter block in the URL");return Qe[0].split("/").map(Ke=>Ke.length?this.translateText(Ke):Ke).join("/")+(Qe.length>1?`?${Qe[1]}`:"")}getLocationLang(Se){const Qe=(Se||this.location.path()).split(/[\?;]/);let Xe=[];return Qe.length>0&&(Xe=Qe[0].split("/")),Xe.length>1&&-1!==this.locales.indexOf(Xe[1])?Xe[1]:Xe.length&&-1!==this.locales.indexOf(Xe[0])?Xe[0]:null}_getBrowserLang(){return this._returnIfInLocales(this.translate.getBrowserLang())}get _cachedLang(){if(this.settings.useCachedLang){if(this.settings.cacheMechanism===V.LocalStorage)return this._cacheWithLocalStorage();if(this.settings.cacheMechanism===V.SessionStorage)return this._cacheWithSessionStorage();if(this.settings.cacheMechanism===V.Cookie)return this._cacheWithCookies()}}set _cachedLang(Se){!this.settings.useCachedLang||(this.settings.cacheMechanism===V.LocalStorage&&this._cacheWithLocalStorage(Se),this.settings.cacheMechanism===V.SessionStorage&&this._cacheWithSessionStorage(Se),this.settings.cacheMechanism===V.Cookie&&this._cacheWithCookies(Se))}_cacheWithLocalStorage(Se){try{if(typeof window>"u"||typeof window.localStorage>"u")return;return Se?void window.localStorage.setItem(this.settings.cacheName,Se):this._returnIfInLocales(window.localStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithSessionStorage(Se){try{if(typeof window>"u"||typeof window.sessionStorage>"u")return;return Se?void window.sessionStorage.setItem(this.settings.cacheName,Se):this._returnIfInLocales(window.sessionStorage.getItem(this.settings.cacheName))}catch{return}}_cacheWithCookies(Se){try{if(typeof document>"u"||typeof document.cookie>"u")return;const Qe=encodeURIComponent(this.settings.cacheName);if(Se){let Je=`${this.settings.cookieFormat}`;return Je=Je.replace("{{value}}",`${Qe}=${encodeURIComponent(Se)}`).replace(/{{expires:?(\d+)?}}/g,(Ct,ht)=>{const Ze=void 0===ht?30:parseInt(ht,10),oe=new Date;return oe.setTime(oe.getTime()+864e5*Ze),`expires=${oe.toUTCString()}`}),void(document.cookie=Je)}const Ke=new RegExp("(?:^"+Qe+"|;\\s*"+Qe+")=(.*?)(?:;|$)","g").exec(document.cookie);return decodeURIComponent(Ke[1])}catch{return}}_returnIfInLocales(Se){return Se&&-1!==this.locales.indexOf(Se)?Se:null}translateText(Se){if(this.escapePrefix&&Se.startsWith(this.escapePrefix))return Se.replace(this.escapePrefix,"");{if(!this._translationObject)return Se;const Qe=this.prefix+Se,Xe=this.translate.getParsedResult(this._translationObject,Qe);return Xe!==Qe?Xe:Se}}chooseQueryParams(Se,Qe){let Xe;return Se&&Se.queryParams?Xe=Se.queryParams:Qe&&(Xe=Qe),Xe}formatQueryParams(Se){return new W.LE({fromObject:Se}).toString()}getPrefix(){return this.prefix}getEscapePrefix(){return this.escapePrefix}}return ke.\u0275fac=function(Se){return new(Se||ke)(n.LFG(P.sK),n.LFG(U.Ye),n.LFG(me))},ke.\u0275prov=n.Yz7({token:ke,factory:ke.\u0275fac}),ke})(),De=(()=>{class ke extends ye{load(Se){return new Promise(Qe=>{this.init(Se).then(Qe)})}}return ke.\u0275fac=function(){let Re;return function(Qe){return(Re||(Re=n.n5z(ke)))(Qe||ke)}}(),ke.\u0275prov=n.Yz7({token:ke,factory:ke.\u0275fac}),ke})();function Ge(ke,Re){if(ke===Re)return!0;if(null===ke||null===Re)return!1;if(ke!=ke&&Re!=Re)return!0;const Se=typeof ke;let Xe,Ke,Je;if(Se===typeof Re&&"object"===Se){if(!Array.isArray(ke)){if(Array.isArray(Re))return!1;for(Ke in Je=Object.create(null),ke)if(ke.hasOwnProperty(Ke)){if(!Ge(ke[Ke],Re[Ke]))return!1;Je[Ke]=!0}for(Ke in Re)if(Re.hasOwnProperty(Ke)&&!(Ke in Je)&&typeof Re[Ke]<"u")return!1;return!0}if(!Array.isArray(Re))return!1;if((Xe=ke.length)===Re.length){for(Ke=0;Ke<Xe;Ke++)if(!Ge(ke[Ke],Re[Ke]))return!1;return!0}}return!1}function c(ke){const Re=Array.isArray(ke)?[]:{};for(const Se in ke)if(Se){const Qe=ke[Se];Re[Se]="object"==typeof Qe?c(Qe):Qe}return Re}function tt(ke){return ke.reduce((Re,Se)=>{const Qe=Array.isArray(Se)?tt(Se):Se;return Re.concat(Qe)},[])}let _t=(()=>{class ke{constructor(Se,Qe,Xe,Ke){this.parser=Se,this.settings=Qe,this.router=Xe,this.route=Ke,this.routerEvents=new S.x;const Je=new y.t(1);this.hooks={_initializedSubject:Je,initialized:Je.asObservable()}}init(){this.applyConfigToRouter(this.parser.routes),this.router.events.pipe((0,b.h)(Se=>Se instanceof e.OD),function R(){return(0,g.e)((ke,Re)=>{let Se,Qe=!1;ke.subscribe((0,N.x)(Re,Xe=>{const Ke=Se;Se=Xe,Qe&&Re.next([Ke,Xe]),Qe=!0}))})}()).subscribe(this._routeChanged()),this.settings.initialNavigation&&this.router.initialNavigation()}changeLanguage(Se,Qe,Xe){if(Se!==this.parser.currentLang){const Ke=this.router.routerState.snapshot.root;this.parser.translateRoutes(Se).subscribe(()=>{let Je=this.traverseRouteSnapshot(Ke);if(Je=this.translateRoute(Je),!this.settings.alwaysSetPrefix){let Ze=Je.split("/");const oe=Ze.indexOf(this.parser.currentLang);if(this.parser.currentLang===this.parser.defaultLang)(0===oe||1===oe&&""===Ze[0])&&(Ze=Ze.slice(0,oe).concat(Ze.slice(oe+1)));else if(-1===oe){const ie=""===Ze[0]?1:0;Ze=Ze.slice(0,ie).concat(this.parser.currentLang,Ze.slice(ie))}Je=Ze.join("/")}Je=Je.replace(/\/+/g,"/");const Ct=Je.lastIndexOf("/");Ct>0&&Ct===Je.length-1&&(Je=Je.slice(0,-1));const ht=this.parser.chooseQueryParams(Qe,this.route.snapshot.queryParams);if(this.applyConfigToRouter(this.parser.routes),this.lastExtras=Qe,Xe){const Ze=Qe?{...Qe}:{};ht&&(Ze.queryParams=ht),this.router.navigate([Je],Ze)}else{let Ze=this.parser.formatQueryParams(ht);Ze=Ze?`?${Ze}`:"",this.router.navigateByUrl(`${Je}${Ze}`,Qe)}})}}traverseRouteSnapshot(Se){return Se.firstChild&&Se.routeConfig?`${this.parseSegmentValue(Se)}/${this.traverseRouteSnapshot(Se.firstChild)}`:Se.firstChild?this.traverseRouteSnapshot(Se.firstChild):this.parseSegmentValue(Se)}buildUrlFromSegments(Se,Qe){return Qe.map((Xe,Ke)=>0===Xe.indexOf(":")?Se.url[Ke].path:Xe).join("/")}parseSegmentValue(Se){if(Se.routeConfig&&Se.routeConfig.matcher){const Qe=this.parseSegmentValueMatcher(Se);return this.buildUrlFromSegments(Se,Qe)}if(Se.data.localizeRouter){const Xe=Se.data.localizeRouter.path.split("/");return this.buildUrlFromSegments(Se,Xe)}if(Se.parent&&Se.parent.parent){const Xe=Se.routeConfig.path.split("/");return this.buildUrlFromSegments(Se,Xe)}return""}parseSegmentValueMatcher(Se){const Qe=Se.data&&Se.data.localizeMatcher&&Se.data.localizeMatcher.params||{};return Se.url.map(Ke=>{const Je=Ke.path,Ct=Ke.localizedParamName;return(Ct&&Qe[Ct]?Qe[Ct](Je):null)||`${this.parser.getEscapePrefix()}${Je}`})}translateRoute(Se){if("string"==typeof Se){const Xe=this.parser.translateRoute(Se);return Se.indexOf("/")?Xe:this.parser.addPrefixToUrl(Xe)}const Qe=[];return Se.forEach((Xe,Ke)=>{if("string"==typeof Xe){const Je=this.parser.translateRoute(Xe);Ke||Xe.indexOf("/")?Qe.push(Je):Qe.push(this.parser.addPrefixToUrl(Je))}else Qe.push(Xe)}),Qe}_routeChanged(){return([Se,Qe])=>{const Xe=this.parser.getLocationLang(Se.url)||this.parser.defaultLang,Ke=this.parser.getLocationLang(Qe.url)||this.parser.defaultLang,Je=this.lastExtras;Ke!==Xe&&this.latestUrl!==Qe.url&&(this.latestUrl=Qe.url,this.cancelCurrentNavigation(),this.parser.translateRoutes(Ke).subscribe(()=>{this.applyConfigToRouter(this.parser.routes),this.lastExtras=void 0,this.router.navigateByUrl(Qe.url,Je),this.routerEvents.next(Ke)})),this.latestUrl=Qe.url}}cancelCurrentNavigation(){const Se=this.router.getCurrentNavigation(),Qe=this.router.serializeUrl(Se.extractedUrl);this.router.events.next(new e.gk(Se.id,Qe,"")),this.router.transitions.next({...this.router.transitions.getValue(),id:0})}applyConfigToRouter(Se){this.router.resetConfig(c(Se))}}return ke.\u0275fac=function(Se){return new(Se||ke)(n.LFG(ye),n.LFG(me),n.LFG(e.F0),n.LFG(e.gz))},ke.\u0275prov=n.Yz7({token:ke,factory:ke.\u0275fac}),ke})(),rt=(()=>{class ke{constructor(Se,Qe){this.localize=Se,this._ref=Qe,this.value="",this.subscription=this.localize.routerEvents.subscribe(()=>{this.transform(this.lastKey)})}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}transform(Se){if(!Se||0===Se.length||!this.localize.parser.currentLang)return Se;if(Ge(Se,this.lastKey)&&Ge(this.lastLanguage,this.localize.parser.currentLang))return this.value;this.lastKey=Se,this.lastLanguage=this.localize.parser.currentLang,this.value=this.localize.translateRoute(Se),this.lastKey=Se;const Qe=this._ref._view;return Qe&&128&Qe.state||setTimeout(()=>{this._ref.detectChanges()},0),this.value}}return ke.\u0275fac=function(Se){return new(Se||ke)(n.Y36(_t,16),n.Y36(n.sBO,16))},ke.\u0275pipe=n.Yjl({name:"localize",type:ke,pure:!1}),ke})();class ft{constructor(){}shouldDetach(Re){return!1}store(Re,Se){}shouldAttach(Re){return!1}retrieve(Re){return null}shouldReuseRoute(Re,Se){return!(!Re||!Se)&&this.getKey(Re)===this.getKey(Se)}getKey(Re){if(Re.firstChild&&Re.firstChild.routeConfig&&Re.firstChild.routeConfig.path&&-1!==Re.firstChild.routeConfig.path.indexOf("**"))return"WILDCARD";if(!(Re.data.localizeRouter||Re.parent&&Re.parent.parent||Re.data.skipRouteLocalization))return"LANG";if(Re.routeConfig.matcher){let Se=`${this.getKey(Re.parent)}/${Re.routeConfig.matcher.name}`;return Re.data.discriminantPathKey&&(Se=`${Se}-${Re.data.discriminantPathKey}`),Se}if(Re.data.localizeRouter){let Se=`${this.getKey(Re.parent)}/${Re.data.localizeRouter.path}`;return Re.data.discriminantPathKey&&(Se=`${Se}-${Re.data.discriminantPathKey}`),Se}{let Se=Re.routeConfig.path;return Re.parent&&(Se=`${this.getKey(Re.parent)}/${Re.routeConfig.path}`),Re.data.discriminantPathKey&&(Se=`${Se}-${Re.data.discriminantPathKey}`),Se}}}class qt extends e.F0{constructor(Re,Se,Qe,Xe,Ke,Je,Ct,ht){super(Re,Se,Qe,Xe,Ke,Je,Ct),this.config=Ct;const Ze=Ke.get(n.Lbi);((0,U.NF)(Ze)?this.configLoader.__proto__:this.configLoader).loadModuleFactory=L=>function xt(ke){return(0,x.b)(ke)?ke:function ve(ke){return!!ke&&"function"==typeof ke.then}(ke)?(0,f.D)(Promise.resolve(ke)):(0,w.of)(ke)}(L()).pipe((0,k.z)(ne=>{let Ne;return Ne=ne instanceof n.YKP?(0,w.of)(ne):(0,f.D)(Je.compileModuleAsync(ne)),Ne.pipe((0,O.U)(ze=>({moduleType:ze.moduleType,create:et=>{const Tt=ze.create(et),Zt=Tt.injector.get.bind(Tt.injector);return Tt.injector.get=(gn,Yt)=>{const on=Zt(gn,Yt);return gn===e.Z6?ht.initChildRoutes([].concat(...on)):on},Tt}})))}))}}function en(ke,Re,Se,Qe,Xe,Ke,Je,Ct,ht={},Ze,oe){const ie=new qt(null,Re,Se,Qe,Xe,Ke,tt(Je),Ct);return Ze&&(ie.urlHandlingStrategy=Ze),oe&&(ie.routeReuseStrategy=oe),ht.errorHandler&&(ie.errorHandler=ht.errorHandler),ht.malformedUriErrorHandler&&(ie.malformedUriErrorHandler=ht.malformedUriErrorHandler),ht.enableTracing&&ie.events.subscribe(L=>{console.group(`Router Event: ${L.constructor.name}`),console.log(L.toString()),console.log(L),console.groupEnd()}),ht.onSameUrlNavigation&&(ie.onSameUrlNavigation=ht.onSameUrlNavigation),ht.paramsInheritanceStrategy&&(ie.paramsInheritanceStrategy=ht.paramsInheritanceStrategy),ht.urlUpdateStrategy&&(ie.urlUpdateStrategy=ht.urlUpdateStrategy),ht.relativeLinkResolution&&(ie.relativeLinkResolution=ht.relativeLinkResolution),ie}let Dt=(()=>{class ke{constructor(Se){this.injector=Se}appInitializer(){return this.parser.load(this.routes).then(()=>{const Qe=this.injector.get(_t),Xe=this.injector.get(e.F0),Ke=this.injector.get(me);if(Qe.init(),Ke.initialNavigation)return new Promise(Je=>{const Ct=Xe.hooks.afterPreactivation;let ht=!0;Xe.hooks.afterPreactivation=()=>(ht&&(Je(),ht=!1,Qe.hooks._initializedSubject.next(!0),Qe.hooks._initializedSubject.complete()),Ct())});Qe.hooks._initializedSubject.next(!0),Qe.hooks._initializedSubject.complete()})}generateInitializer(Se,Qe){return this.parser=Se,this.routes=Qe.reduce((Xe,Ke)=>Xe.concat(Ke)),this.appInitializer}}return ke.\u0275fac=function(Se){return new(Se||ke)(n.LFG(n.zs3))},ke.\u0275prov=n.Yz7({token:ke,factory:ke.\u0275fac}),ke})();function X(ke,Re,Se){const Qe=c(Se);return ke.generateInitializer(Re,Qe).bind(ke)}let j=(()=>{class ke{static forRoot(Se,Qe={}){return{ngModule:ke,providers:[{provide:e.F0,useFactory:en,deps:[n.z2F,e.Hx,e.y6,U.Ye,n.zs3,n.Sil,e.Z6,ye,e.cx,[e.oI,new n.FiY],[e.wN,new n.FiY]]},{provide:M,useFactory:ae,deps:[[ke,new n.FiY,new n.tp0]]},{provide:Q,useValue:Qe.useCachedLang},{provide:E,useValue:Qe.alwaysSetPrefix},{provide:fe,useValue:Qe.cacheName},{provide:Y,useValue:Qe.cacheMechanism},{provide:G,useValue:Qe.defaultLangFunction},{provide:J,useValue:Qe.cookieFormat},{provide:ee,useValue:Qe.initialNavigation},me,Qe.parser||{provide:ye,useClass:De},{provide:B,multi:!0,useValue:Se},_t,Dt,{provide:n.ip1,multi:!0,useFactory:X,deps:[Dt,ye,B]},{provide:e.wN,useClass:ft}]}}static forChild(Se){return{ngModule:ke,providers:[{provide:B,multi:!0,useValue:Se}]}}}return ke.\u0275fac=function(Se){return new(Se||ke)},ke.\u0275mod=n.oAB({type:ke}),ke.\u0275inj=n.cJS({imports:[[U.ez,e.Bz,P.aw]]}),ke})();function ae(ke){if(ke)throw new Error("LocalizeRouterModule.forRoot() called twice. Lazy loaded modules should use LocalizeRouterModule.forChild() instead.");return"guarded"}},9383:(nt,_e,m)=>{"use strict";m.d(_e,{X$:()=>me,Zw:()=>R,aw:()=>we,sK:()=>$});var n=m(4650),e=m(9646),h=m(5191),S=m(4128),y=m(7272),w=m(9770),f=m(5698),x=m(4782),b=m(4004),g=m(4351),N=m(3900);class R{}let k=(()=>{class ye extends R{getTranslation(De){return(0,e.of)({})}}return ye.\u0275fac=function(){let qe;return function(Ge){return(qe||(qe=n.n5z(ye)))(Ge||ye)}}(),ye.\u0275prov=n.Yz7({token:ye,factory:ye.\u0275fac}),ye})();class O{}let P=(()=>{class ye{handle(De){return De.key}}return ye.\u0275fac=function(De){return new(De||ye)},ye.\u0275prov=n.Yz7({token:ye,factory:ye.\u0275fac}),ye})();function U(ye,qe){if(ye===qe)return!0;if(null===ye||null===qe)return!1;if(ye!=ye&&qe!=qe)return!0;let ve,c,tt,De=typeof ye;if(De==typeof qe&&"object"==De){if(!Array.isArray(ye)){if(Array.isArray(qe))return!1;for(c in tt=Object.create(null),ye){if(!U(ye[c],qe[c]))return!1;tt[c]=!0}for(c in qe)if(!(c in tt)&&typeof qe[c]<"u")return!1;return!0}if(!Array.isArray(qe))return!1;if((ve=ye.length)==qe.length){for(c=0;c<ve;c++)if(!U(ye[c],qe[c]))return!1;return!0}}return!1}function W(ye){return typeof ye<"u"&&null!==ye}function M(ye){return ye&&"object"==typeof ye&&!Array.isArray(ye)}function B(ye,qe){let De=Object.assign({},ye);return M(ye)&&M(qe)&&Object.keys(qe).forEach(Ge=>{M(qe[Ge])?Ge in ye?De[Ge]=B(ye[Ge],qe[Ge]):Object.assign(De,{[Ge]:qe[Ge]}):Object.assign(De,{[Ge]:qe[Ge]})}),De}class V{}let Q=(()=>{class ye extends V{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(De,Ge){let ve;return ve="string"==typeof De?this.interpolateString(De,Ge):"function"==typeof De?this.interpolateFunction(De,Ge):De,ve}getValue(De,Ge){let ve="string"==typeof Ge?Ge.split("."):[Ge];Ge="";do{Ge+=ve.shift(),!W(De)||!W(De[Ge])||"object"!=typeof De[Ge]&&ve.length?ve.length?Ge+=".":De=void 0:(De=De[Ge],Ge="")}while(ve.length);return De}interpolateFunction(De,Ge){return De(Ge)}interpolateString(De,Ge){return Ge?De.replace(this.templateMatcher,(ve,c)=>{let tt=this.getValue(Ge,c);return W(tt)?tt:ve}):De}}return ye.\u0275fac=function(){let qe;return function(Ge){return(qe||(qe=n.n5z(ye)))(Ge||ye)}}(),ye.\u0275prov=n.Yz7({token:ye,factory:ye.\u0275fac}),ye})();class Y{}let fe=(()=>{class ye extends Y{compile(De,Ge){return De}compileTranslations(De,Ge){return De}}return ye.\u0275fac=function(){let qe;return function(Ge){return(qe||(qe=n.n5z(ye)))(Ge||ye)}}(),ye.\u0275prov=n.Yz7({token:ye,factory:ye.\u0275fac}),ye})();class J{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new n.vpe,this.onLangChange=new n.vpe,this.onDefaultLangChange=new n.vpe}}const ee=new n.OlP("USE_STORE"),G=new n.OlP("USE_DEFAULT_LANG"),E=new n.OlP("DEFAULT_LANGUAGE"),te=new n.OlP("USE_EXTEND");let $=(()=>{class ye{constructor(De,Ge,ve,c,tt,_t=!0,ct=!1,rt=!1,ft){this.store=De,this.currentLoader=Ge,this.compiler=ve,this.parser=c,this.missingTranslationHandler=tt,this.useDefaultLang=_t,this.isolate=ct,this.extend=rt,this.pending=!1,this._onTranslationChange=new n.vpe,this._onLangChange=new n.vpe,this._onDefaultLangChange=new n.vpe,this._langs=[],this._translations={},this._translationRequests={},ft&&this.setDefaultLang(ft)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(De){this.isolate?this._defaultLang=De:this.store.defaultLang=De}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(De){this.isolate?this._currentLang=De:this.store.currentLang=De}get langs(){return this.isolate?this._langs:this.store.langs}set langs(De){this.isolate?this._langs=De:this.store.langs=De}get translations(){return this.isolate?this._translations:this.store.translations}set translations(De){this.isolate?this._translations=De:this.store.translations=De}setDefaultLang(De){if(De===this.defaultLang)return;let Ge=this.retrieveTranslations(De);typeof Ge<"u"?(null==this.defaultLang&&(this.defaultLang=De),Ge.pipe((0,f.q)(1)).subscribe(ve=>{this.changeDefaultLang(De)})):this.changeDefaultLang(De)}getDefaultLang(){return this.defaultLang}use(De){if(De===this.currentLang)return(0,e.of)(this.translations[De]);let Ge=this.retrieveTranslations(De);return typeof Ge<"u"?(this.currentLang||(this.currentLang=De),Ge.pipe((0,f.q)(1)).subscribe(ve=>{this.changeLang(De)}),Ge):(this.changeLang(De),(0,e.of)(this.translations[De]))}retrieveTranslations(De){let Ge;return(typeof this.translations[De]>"u"||this.extend)&&(this._translationRequests[De]=this._translationRequests[De]||this.getTranslation(De),Ge=this._translationRequests[De]),Ge}getTranslation(De){this.pending=!0;const Ge=this.currentLoader.getTranslation(De).pipe((0,x.d)(1),(0,f.q)(1));return this.loadingTranslations=Ge.pipe((0,b.U)(ve=>this.compiler.compileTranslations(ve,De)),(0,x.d)(1),(0,f.q)(1)),this.loadingTranslations.subscribe({next:ve=>{this.translations[De]=this.extend&&this.translations[De]?{...ve,...this.translations[De]}:ve,this.updateLangs(),this.pending=!1},error:ve=>{this.pending=!1}}),Ge}setTranslation(De,Ge,ve=!1){Ge=this.compiler.compileTranslations(Ge,De),this.translations[De]=(ve||this.extend)&&this.translations[De]?B(this.translations[De],Ge):Ge,this.updateLangs(),this.onTranslationChange.emit({lang:De,translations:this.translations[De]})}getLangs(){return this.langs}addLangs(De){De.forEach(Ge=>{-1===this.langs.indexOf(Ge)&&this.langs.push(Ge)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(De,Ge,ve){let c;if(Ge instanceof Array){let tt={},_t=!1;for(let ct of Ge)tt[ct]=this.getParsedResult(De,ct,ve),(0,h.b)(tt[ct])&&(_t=!0);if(_t){const ct=Ge.map(rt=>(0,h.b)(tt[rt])?tt[rt]:(0,e.of)(tt[rt]));return(0,S.D)(ct).pipe((0,b.U)(rt=>{let ft={};return rt.forEach((qt,en)=>{ft[Ge[en]]=qt}),ft}))}return tt}if(De&&(c=this.parser.interpolate(this.parser.getValue(De,Ge),ve)),typeof c>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(c=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],Ge),ve)),typeof c>"u"){let tt={key:Ge,translateService:this};typeof ve<"u"&&(tt.interpolateParams=ve),c=this.missingTranslationHandler.handle(tt)}return typeof c<"u"?c:Ge}get(De,Ge){if(!W(De)||!De.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,g.b)(ve=>(ve=this.getParsedResult(ve,De,Ge),(0,h.b)(ve)?ve:(0,e.of)(ve))));{let ve=this.getParsedResult(this.translations[this.currentLang],De,Ge);return(0,h.b)(ve)?ve:(0,e.of)(ve)}}getStreamOnTranslationChange(De,Ge){if(!W(De)||!De.length)throw new Error('Parameter "key" required');return(0,y.z)((0,w.P)(()=>this.get(De,Ge)),this.onTranslationChange.pipe((0,N.w)(ve=>{const c=this.getParsedResult(ve.translations,De,Ge);return"function"==typeof c.subscribe?c:(0,e.of)(c)})))}stream(De,Ge){if(!W(De)||!De.length)throw new Error('Parameter "key" required');return(0,y.z)((0,w.P)(()=>this.get(De,Ge)),this.onLangChange.pipe((0,N.w)(ve=>{const c=this.getParsedResult(ve.translations,De,Ge);return(0,h.b)(c)?c:(0,e.of)(c)})))}instant(De,Ge){if(!W(De)||!De.length)throw new Error('Parameter "key" required');let ve=this.getParsedResult(this.translations[this.currentLang],De,Ge);if((0,h.b)(ve)){if(De instanceof Array){let c={};return De.forEach((tt,_t)=>{c[De[_t]]=De[_t]}),c}return De}return ve}set(De,Ge,ve=this.currentLang){this.translations[ve][De]=this.compiler.compile(Ge,ve),this.updateLangs(),this.onTranslationChange.emit({lang:ve,translations:this.translations[ve]})}changeLang(De){this.currentLang=De,this.onLangChange.emit({lang:De,translations:this.translations[De]}),null==this.defaultLang&&this.changeDefaultLang(De)}changeDefaultLang(De){this.defaultLang=De,this.onDefaultLangChange.emit({lang:De,translations:this.translations[De]})}reloadLang(De){return this.resetLang(De),this.getTranslation(De)}resetLang(De){this._translationRequests[De]=void 0,this.translations[De]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let De=window.navigator.languages?window.navigator.languages[0]:null;return De=De||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof De>"u"?void 0:(-1!==De.indexOf("-")&&(De=De.split("-")[0]),-1!==De.indexOf("_")&&(De=De.split("_")[0]),De)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let De=window.navigator.languages?window.navigator.languages[0]:null;return De=De||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,De}}return ye.\u0275fac=function(De){return new(De||ye)(n.LFG(J),n.LFG(R),n.LFG(Y),n.LFG(V),n.LFG(O),n.LFG(G),n.LFG(ee),n.LFG(te),n.LFG(E))},ye.\u0275prov=n.Yz7({token:ye,factory:ye.\u0275fac}),ye})(),me=(()=>{class ye{constructor(De,Ge){this.translate=De,this._ref=Ge,this.value="",this.lastKey=null,this.lastParams=[]}updateValue(De,Ge,ve){let c=tt=>{this.value=void 0!==tt?tt:De,this.lastKey=De,this._ref.markForCheck()};if(ve){let tt=this.translate.getParsedResult(ve,De,Ge);(0,h.b)(tt.subscribe)?tt.subscribe(c):c(tt)}this.translate.get(De,Ge).subscribe(c)}transform(De,...Ge){if(!De||!De.length)return De;if(U(De,this.lastKey)&&U(Ge,this.lastParams))return this.value;let ve;if(W(Ge[0])&&Ge.length)if("string"==typeof Ge[0]&&Ge[0].length){let c=Ge[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{ve=JSON.parse(c)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${Ge[0]}`)}}else"object"==typeof Ge[0]&&!Array.isArray(Ge[0])&&(ve=Ge[0]);return this.lastKey=De,this.lastParams=Ge,this.updateValue(De,ve),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(c=>{this.lastKey&&c.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(De,ve,c.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(c=>{this.lastKey&&(this.lastKey=null,this.updateValue(De,ve,c.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(De,ve))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return ye.\u0275fac=function(De){return new(De||ye)(n.Y36($,16),n.Y36(n.sBO,16))},ye.\u0275pipe=n.Yjl({name:"translate",type:ye,pure:!1}),ye.\u0275prov=n.Yz7({token:ye,factory:ye.\u0275fac}),ye})(),we=(()=>{class ye{static forRoot(De={}){return{ngModule:ye,providers:[De.loader||{provide:R,useClass:k},De.compiler||{provide:Y,useClass:fe},De.parser||{provide:V,useClass:Q},De.missingTranslationHandler||{provide:O,useClass:P},J,{provide:ee,useValue:De.isolate},{provide:G,useValue:De.useDefaultLang},{provide:te,useValue:De.extend},{provide:E,useValue:De.defaultLanguage},$]}}static forChild(De={}){return{ngModule:ye,providers:[De.loader||{provide:R,useClass:k},De.compiler||{provide:Y,useClass:fe},De.parser||{provide:V,useClass:Q},De.missingTranslationHandler||{provide:O,useClass:P},{provide:ee,useValue:De.isolate},{provide:G,useValue:De.useDefaultLang},{provide:te,useValue:De.extend},{provide:E,useValue:De.defaultLanguage},$]}}}return ye.\u0275fac=function(De){return new(De||ye)},ye.\u0275mod=n.oAB({type:ye}),ye.\u0275inj=n.cJS({}),ye})()},1837:(nt,_e,m)=>{"use strict";m.d(_e,{ou:()=>ii,Zr:()=>Xt});class n extends Error{}class e extends n{constructor(H){super(`Invalid DateTime: ${H.toMessage()}`)}}class h extends n{constructor(H){super(`Invalid Interval: ${H.toMessage()}`)}}class S extends n{constructor(H){super(`Invalid Duration: ${H.toMessage()}`)}}class y extends n{}class w extends n{constructor(H){super(`Invalid unit ${H}`)}}class f extends n{}class x extends n{constructor(){super("Zone is an abstract class")}}const b="numeric",g="short",N="long",R={year:b,month:b,day:b},k={year:b,month:g,day:b},O={year:b,month:g,day:b,weekday:g},P={year:b,month:N,day:b},U={year:b,month:N,day:b,weekday:N},W={hour:b,minute:b},M={hour:b,minute:b,second:b},B={hour:b,minute:b,second:b,timeZoneName:g},V={hour:b,minute:b,second:b,timeZoneName:N},Q={hour:b,minute:b,hourCycle:"h23"},Y={hour:b,minute:b,second:b,hourCycle:"h23"},fe={hour:b,minute:b,second:b,hourCycle:"h23",timeZoneName:g},J={hour:b,minute:b,second:b,hourCycle:"h23",timeZoneName:N},ee={year:b,month:b,day:b,hour:b,minute:b},G={year:b,month:b,day:b,hour:b,minute:b,second:b},E={year:b,month:g,day:b,hour:b,minute:b},te={year:b,month:g,day:b,hour:b,minute:b,second:b},$={year:b,month:g,day:b,weekday:g,hour:b,minute:b},ue={year:b,month:N,day:b,hour:b,minute:b,timeZoneName:g},me={year:b,month:N,day:b,hour:b,minute:b,second:b,timeZoneName:g},we={year:b,month:N,day:b,weekday:N,hour:b,minute:b,timeZoneName:N},ye={year:b,month:N,day:b,weekday:N,hour:b,minute:b,second:b,timeZoneName:N};class qe{get type(){throw new x}get name(){throw new x}get ianaName(){return this.name}get isUniversal(){throw new x}offsetName(H,be){throw new x}formatOffset(H,be){throw new x}offset(H){throw new x}equals(H){throw new x}get isValid(){throw new x}}let De=null;class Ge extends qe{static get instance(){return null===De&&(De=new Ge),De}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(H,{format:be,locale:Pe}){return Xn(H,be,Pe)}formatOffset(H,be){return mi(this.offset(H),be)}offset(H){return-new Date(H).getTimezoneOffset()}equals(H){return"system"===H.type}get isValid(){return!0}}let ve={};const tt={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let rt={};class ft extends qe{static create(H){return rt[H]||(rt[H]=new ft(H)),rt[H]}static resetCache(){rt={},ve={}}static isValidSpecifier(H){return this.isValidZone(H)}static isValidZone(H){if(!H)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:H}).format(),!0}catch{return!1}}constructor(H){super(),this.zoneName=H,this.valid=ft.isValidZone(H)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(H,{format:be,locale:Pe}){return Xn(H,be,Pe,this.name)}formatOffset(H,be){return mi(this.offset(H),be)}offset(H){const be=new Date(H);if(isNaN(be))return NaN;const Pe=function c(xe){return ve[xe]||(ve[xe]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:xe,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),ve[xe]}(this.name);let[pt,It,St,Jt,un,pn,_i]=Pe.formatToParts?function ct(xe,H){const be=xe.formatToParts(H),Pe=[];for(let pt=0;pt<be.length;pt++){const{type:It,value:St}=be[pt],Jt=tt[It];"era"===It?Pe[Jt]=St:it(Jt)||(Pe[Jt]=parseInt(St,10))}return Pe}(Pe,be):function _t(xe,H){const be=xe.format(H).replace(/\u200E/g,""),Pe=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(be),[,pt,It,St,Jt,un,pn,_i]=Pe;return[St,pt,It,Jt,un,pn,_i]}(Pe,be);"BC"===Jt&&(pt=1-Math.abs(pt));let ni=+be;const Hr=ni%1e3;return ni-=Hr>=0?Hr:1e3+Hr,(Ht({year:pt,month:It,day:St,hour:24===un?0:un,minute:pn,second:_i,millisecond:0})-ni)/6e4}equals(H){return"iana"===H.type&&H.name===this.name}get isValid(){return this.valid}}let qt={},xt={};function Dt(xe,H={}){const be=JSON.stringify([xe,H]);let Pe=xt[be];return Pe||(Pe=new Intl.DateTimeFormat(xe,H),xt[be]=Pe),Pe}let X={},ae={},je=null;function Ke(xe,H,be,Pe,pt){const It=xe.listingMode(be);return"error"===It?null:"en"===It?Pe(H):pt(H)}class Ct{constructor(H,be,Pe){this.padTo=Pe.padTo||0,this.floor=Pe.floor||!1;const{padTo:pt,floor:It,...St}=Pe;if(!be||Object.keys(St).length>0){const Jt={useGrouping:!1,...Pe};Pe.padTo>0&&(Jt.minimumIntegerDigits=Pe.padTo),this.inf=function j(xe,H={}){const be=JSON.stringify([xe,H]);let Pe=X[be];return Pe||(Pe=new Intl.NumberFormat(xe,H),X[be]=Pe),Pe}(H,Jt)}}format(H){if(this.inf){const be=this.floor?Math.floor(H):H;return this.inf.format(be)}return In(this.floor?Math.floor(H):ut(H,3),this.padTo)}}class ht{constructor(H,be,Pe){let pt;if(this.opts=Pe,this.originalZone=void 0,this.opts.timeZone)this.dt=H;else if("fixed"===H.zone.type){const St=H.offset/60*-1,Jt=St>=0?`Etc/GMT+${St}`:`Etc/GMT${St}`;0!==H.offset&&ft.create(Jt).valid?(pt=Jt,this.dt=H):(pt="UTC",this.dt=0===H.offset?H:H.setZone("UTC").plus({minutes:H.offset}),this.originalZone=H.zone)}else"system"===H.zone.type?this.dt=H:"iana"===H.zone.type?(this.dt=H,pt=H.zone.name):(pt="UTC",this.dt=H.setZone("UTC").plus({minutes:H.offset}),this.originalZone=H.zone);const It={...this.opts};It.timeZone=It.timeZone||pt,this.dtf=Dt(be,It)}format(){return this.originalZone?this.formatToParts().map(({value:H})=>H).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const H=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?H.map(be=>{if("timeZoneName"===be.type){const Pe=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...be,value:Pe}}return be}):H}resolvedOptions(){return this.dtf.resolvedOptions()}}class Ze{constructor(H,be,Pe){this.opts={style:"long",...Pe},!be&&kn()&&(this.rtf=function Be(xe,H={}){const{base:be,...Pe}=H,pt=JSON.stringify([xe,Pe]);let It=ae[pt];return It||(It=new Intl.RelativeTimeFormat(xe,H),ae[pt]=It),It}(H,Pe))}format(H,be){return this.rtf?this.rtf.format(H,be):function rn(xe,H,be="always",Pe=!1){const pt={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},It=-1===["hours","minutes","seconds"].indexOf(xe);if("auto"===be&&It){const Pi="days"===xe;switch(H){case 1:return Pi?"tomorrow":`next ${pt[xe][0]}`;case-1:return Pi?"yesterday":`last ${pt[xe][0]}`;case 0:return Pi?"today":`this ${pt[xe][0]}`}}const St=Object.is(H,-0)||H<0,Jt=Math.abs(H),un=1===Jt,pn=pt[xe],_i=Pe?un?pn[1]:pn[2]||pn[1]:un?pt[xe][0]:xe;return St?`${Jt} ${_i} ago`:`in ${Jt} ${_i}`}(be,H,this.opts.numeric,"long"!==this.opts.style)}formatToParts(H,be){return this.rtf?this.rtf.formatToParts(H,be):[]}}class oe{static fromOpts(H){return oe.create(H.locale,H.numberingSystem,H.outputCalendar,H.defaultToEN)}static create(H,be,Pe,pt=!1){const It=H||Xt.defaultLocale,St=It||(pt?"en-US":function ke(){return je||(je=(new Intl.DateTimeFormat).resolvedOptions().locale,je)}());return new oe(St,be||Xt.defaultNumberingSystem,Pe||Xt.defaultOutputCalendar,It)}static resetCache(){je=null,xt={},X={},ae={}}static fromObject({locale:H,numberingSystem:be,outputCalendar:Pe}={}){return oe.create(H,be,Pe)}constructor(H,be,Pe,pt){const[It,St,Jt]=function Re(xe){const H=xe.indexOf("-x-");-1!==H&&(xe=xe.substring(0,H));const be=xe.indexOf("-u-");if(-1===be)return[xe];{let Pe,pt;try{Pe=Dt(xe).resolvedOptions(),pt=xe}catch{const un=xe.substring(0,be);Pe=Dt(un).resolvedOptions(),pt=un}const{numberingSystem:It,calendar:St}=Pe;return[pt,It,St]}}(H);this.locale=It,this.numberingSystem=be||St||null,this.outputCalendar=Pe||Jt||null,this.intl=function Se(xe,H,be){return(be||H)&&(xe.includes("-u-")||(xe+="-u"),be&&(xe+=`-ca-${be}`),H&&(xe+=`-nu-${H}`)),xe}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=pt,this.fastNumbersCached=null}get fastNumbers(){return null==this.fastNumbersCached&&(this.fastNumbersCached=function Je(xe){return(!xe.numberingSystem||"latn"===xe.numberingSystem)&&("latn"===xe.numberingSystem||!xe.locale||xe.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(xe.intl).resolvedOptions().numberingSystem)}(this)),this.fastNumbersCached}listingMode(){return this.isEnglish()&&!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar)?"en":"intl"}clone(H){return H&&0!==Object.getOwnPropertyNames(H).length?oe.create(H.locale||this.specifiedLocale,H.numberingSystem||this.numberingSystem,H.outputCalendar||this.outputCalendar,H.defaultToEN||!1):this}redefaultToEN(H={}){return this.clone({...H,defaultToEN:!0})}redefaultToSystem(H={}){return this.clone({...H,defaultToEN:!1})}months(H,be=!1,Pe=!0){return Ke(this,H,Pe,Yi,()=>{const pt=be?{month:H,day:"numeric"}:{month:H},It=be?"format":"standalone";return this.monthsCache[It][H]||(this.monthsCache[It][H]=function Qe(xe){const H=[];for(let be=1;be<=12;be++){const Pe=ii.utc(2016,be,1);H.push(xe(Pe))}return H}(St=>this.extract(St,pt,"month"))),this.monthsCache[It][H]})}weekdays(H,be=!1,Pe=!0){return Ke(this,H,Pe,Vn,()=>{const pt=be?{weekday:H,year:"numeric",month:"long",day:"numeric"}:{weekday:H},It=be?"format":"standalone";return this.weekdaysCache[It][H]||(this.weekdaysCache[It][H]=function Xe(xe){const H=[];for(let be=1;be<=7;be++){const Pe=ii.utc(2016,11,13+be);H.push(xe(Pe))}return H}(St=>this.extract(St,pt,"weekday"))),this.weekdaysCache[It][H]})}meridiems(H=!0){return Ke(this,void 0,H,()=>kr,()=>{if(!this.meridiemCache){const be={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[ii.utc(2016,11,13,9),ii.utc(2016,11,13,19)].map(Pe=>this.extract(Pe,be,"dayperiod"))}return this.meridiemCache})}eras(H,be=!0){return Ke(this,H,be,Ve,()=>{const Pe={era:H};return this.eraCache[H]||(this.eraCache[H]=[ii.utc(-40,1,1),ii.utc(2017,1,1)].map(pt=>this.extract(pt,Pe,"era"))),this.eraCache[H]})}extract(H,be,Pe){const St=this.dtFormatter(H,be).formatToParts().find(Jt=>Jt.type.toLowerCase()===Pe);return St?St.value:null}numberFormatter(H={}){return new Ct(this.intl,H.forceSimple||this.fastNumbers,H)}dtFormatter(H,be={}){return new ht(H,this.intl,be)}relFormatter(H={}){return new Ze(this.intl,this.isEnglish(),H)}listFormatter(H={}){return function en(xe,H={}){const be=JSON.stringify([xe,H]);let Pe=qt[be];return Pe||(Pe=new Intl.ListFormat(xe,H),qt[be]=Pe),Pe}(this.intl,H)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(H){return this.locale===H.locale&&this.numberingSystem===H.numberingSystem&&this.outputCalendar===H.outputCalendar}}let ie=null;class L extends qe{static get utcInstance(){return null===ie&&(ie=new L(0)),ie}static instance(H){return 0===H?L.utcInstance:new L(H)}static parseSpecifier(H){if(H){const be=H.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(be)return new L(Ei(be[1],be[2]))}return null}constructor(H){super(),this.fixed=H}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${mi(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${mi(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(H,be){return mi(this.fixed,be)}get isUniversal(){return!0}offset(){return this.fixed}equals(H){return"fixed"===H.type&&H.fixed===this.fixed}get isValid(){return!0}}class ne extends qe{constructor(H){super(),this.zoneName=H}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Ne(xe,H){if(it(xe)||null===xe)return H;if(xe instanceof qe)return xe;if(function jt(xe){return"string"==typeof xe}(xe)){const Pe=xe.toLowerCase();return"default"===Pe?H:"local"===Pe||"system"===Pe?Ge.instance:"utc"===Pe||"gmt"===Pe?L.utcInstance:L.parseSpecifier(Pe)||ft.create(xe)}return Gt(xe)?L.instance(xe):"object"==typeof xe&&xe.offset&&"number"==typeof xe.offset?xe:new ne(xe)}let on,ze=()=>Date.now(),et="system",Tt=null,Zt=null,gn=null,Yt=60;class Xt{static get now(){return ze}static set now(H){ze=H}static set defaultZone(H){et=H}static get defaultZone(){return Ne(et,Ge.instance)}static get defaultLocale(){return Tt}static set defaultLocale(H){Tt=H}static get defaultNumberingSystem(){return Zt}static set defaultNumberingSystem(H){Zt=H}static get defaultOutputCalendar(){return gn}static set defaultOutputCalendar(H){gn=H}static get twoDigitCutoffYear(){return Yt}static set twoDigitCutoffYear(H){Yt=H%100}static get throwOnInvalid(){return on}static set throwOnInvalid(H){on=H}static resetCaches(){oe.resetCache(),ft.resetCache()}}function it(xe){return typeof xe>"u"}function Gt(xe){return"number"==typeof xe}function bt(xe){return"number"==typeof xe&&xe%1==0}function kn(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function qn(xe,H,be){if(0!==xe.length)return xe.reduce((Pe,pt)=>{const It=[H(pt),pt];return Pe&&be(Pe[0],It[0])===Pe[0]?Pe:It},null)[1]}function Yn(xe,H){return Object.prototype.hasOwnProperty.call(xe,H)}function Ft(xe,H,be){return bt(xe)&&xe>=H&&xe<=be}function In(xe,H=2){let Pe;return Pe=xe<0?"-"+(""+-xe).padStart(H,"0"):(""+xe).padStart(H,"0"),Pe}function Fn(xe){if(!it(xe)&&null!==xe&&""!==xe)return parseInt(xe,10)}function Zn(xe){if(!it(xe)&&null!==xe&&""!==xe)return parseFloat(xe)}function zn(xe){if(!it(xe)&&null!==xe&&""!==xe){const H=1e3*parseFloat("0."+xe);return Math.floor(H)}}function ut(xe,H,be=!1){const Pe=10**H;return(be?Math.trunc:Math.round)(xe*Pe)/Pe}function vt(xe){return xe%4==0&&(xe%100!=0||xe%400==0)}function at(xe){return vt(xe)?366:365}function Ot(xe,H){const be=function jn(xe,H){return xe-H*Math.floor(xe/H)}(H-1,12)+1;return 2===be?vt(xe+(H-be)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][be-1]}function Ht(xe){let H=Date.UTC(xe.year,xe.month-1,xe.day,xe.hour,xe.minute,xe.second,xe.millisecond);return xe.year<100&&xe.year>=0&&(H=new Date(H),H.setUTCFullYear(xe.year,xe.month-1,xe.day)),+H}function hn(xe){const H=(xe+Math.floor(xe/4)-Math.floor(xe/100)+Math.floor(xe/400))%7,be=xe-1,Pe=(be+Math.floor(be/4)-Math.floor(be/100)+Math.floor(be/400))%7;return 4===H||3===Pe?53:52}function Kt(xe){return xe>99?xe:xe>Xt.twoDigitCutoffYear?1900+xe:2e3+xe}function Xn(xe,H,be,Pe=null){const pt=new Date(xe),It={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};Pe&&(It.timeZone=Pe);const St={timeZoneName:H,...It},Jt=new Intl.DateTimeFormat(be,St).formatToParts(pt).find(un=>"timezonename"===un.type.toLowerCase());return Jt?Jt.value:null}function Ei(xe,H){let be=parseInt(xe,10);Number.isNaN(be)&&(be=0);const Pe=parseInt(H,10)||0;return 60*be+(be<0||Object.is(be,-0)?-Pe:Pe)}function os(xe){const H=Number(xe);if("boolean"==typeof xe||""===xe||Number.isNaN(H))throw new f(`Invalid unit value ${xe}`);return H}function Nn(xe,H){const be={};for(const Pe in xe)if(Yn(xe,Pe)){const pt=xe[Pe];if(null==pt)continue;be[H(Pe)]=os(pt)}return be}function mi(xe,H){const be=Math.trunc(Math.abs(xe/60)),Pe=Math.trunc(Math.abs(xe%60)),pt=xe>=0?"+":"-";switch(H){case"short":return`${pt}${In(be,2)}:${In(Pe,2)}`;case"narrow":return`${pt}${be}${Pe>0?`:${Pe}`:""}`;case"techie":return`${pt}${In(be,2)}${In(Pe,2)}`;default:throw new RangeError(`Value format ${H} is out of range for property format`)}}function ur(xe){return function ri(xe,H){return H.reduce((be,Pe)=>(be[Pe]=xe[Pe],be),{})}(xe,["hour","minute","second","millisecond"])}const nr=["January","February","March","April","May","June","July","August","September","October","November","December"],Gi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ai=["J","F","M","A","M","J","J","A","S","O","N","D"];function Yi(xe){switch(xe){case"narrow":return[...Ai];case"short":return[...Gi];case"long":return[...nr];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Jr=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],qr=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Tr=["M","T","W","T","F","S","S"];function Vn(xe){switch(xe){case"narrow":return[...Tr];case"short":return[...qr];case"long":return[...Jr];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const kr=["AM","PM"],ts=["Before Christ","Anno Domini"],Ui=["BC","AD"],ws=["B","A"];function Ve(xe){switch(xe){case"narrow":return[...ws];case"short":return[...Ui];case"long":return[...ts];default:return null}}function An(xe,H){let be="";for(const Pe of xe)be+=Pe.literal?Pe.val:H(Pe.val);return be}const wi={D:R,DD:k,DDD:P,DDDD:U,t:W,tt:M,ttt:B,tttt:V,T:Q,TT:Y,TTT:fe,TTTT:J,f:ee,ff:E,fff:ue,ffff:we,F:G,FF:te,FFF:me,FFFF:ye};class di{static create(H,be={}){return new di(H,be)}static parseFormat(H){let be=null,Pe="",pt=!1;const It=[];for(let St=0;St<H.length;St++){const Jt=H.charAt(St);"'"===Jt?(Pe.length>0&&It.push({literal:pt||/^\s+$/.test(Pe),val:Pe}),be=null,Pe="",pt=!pt):pt||Jt===be?Pe+=Jt:(Pe.length>0&&It.push({literal:/^\s+$/.test(Pe),val:Pe}),Pe=Jt,be=Jt)}return Pe.length>0&&It.push({literal:pt||/^\s+$/.test(Pe),val:Pe}),It}static macroTokenToFormatOpts(H){return wi[H]}constructor(H,be){this.opts=be,this.loc=H,this.systemLoc=null}formatWithSystemDefault(H,be){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(H,{...this.opts,...be}).format()}formatDateTime(H,be={}){return this.loc.dtFormatter(H,{...this.opts,...be}).format()}formatDateTimeParts(H,be={}){return this.loc.dtFormatter(H,{...this.opts,...be}).formatToParts()}formatInterval(H,be={}){return this.loc.dtFormatter(H.start,{...this.opts,...be}).dtf.formatRange(H.start.toJSDate(),H.end.toJSDate())}resolvedOptions(H,be={}){return this.loc.dtFormatter(H,{...this.opts,...be}).resolvedOptions()}num(H,be=0){if(this.opts.forceSimple)return In(H,be);const Pe={...this.opts};return be>0&&(Pe.padTo=be),this.loc.numberFormatter(Pe).format(H)}formatDateTimeFromString(H,be){const Pe="en"===this.loc.listingMode(),pt=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,It=(ni,Hr)=>this.loc.extract(H,ni,Hr),St=ni=>H.isOffsetFixed&&0===H.offset&&ni.allowZ?"Z":H.isValid?H.zone.formatOffset(H.ts,ni.format):"",un=(ni,Hr)=>Pe?function Mt(xe,H){return Yi(H)[xe.month-1]}(H,ni):It(Hr?{month:ni}:{month:ni,day:"numeric"},"month"),pn=(ni,Hr)=>Pe?function st(xe,H){return Vn(H)[xe.weekday-1]}(H,ni):It(Hr?{weekday:ni}:{weekday:ni,month:"long",day:"numeric"},"weekday"),_i=ni=>{const Hr=di.macroTokenToFormatOpts(ni);return Hr?this.formatWithSystemDefault(H,Hr):ni},Pi=ni=>Pe?function nn(xe,H){return Ve(H)[xe.year<0?0:1]}(H,ni):It({era:ni},"era");return An(di.parseFormat(be),ni=>{switch(ni){case"S":return this.num(H.millisecond);case"u":case"SSS":return this.num(H.millisecond,3);case"s":return this.num(H.second);case"ss":return this.num(H.second,2);case"uu":return this.num(Math.floor(H.millisecond/10),2);case"uuu":return this.num(Math.floor(H.millisecond/100));case"m":return this.num(H.minute);case"mm":return this.num(H.minute,2);case"h":return this.num(H.hour%12==0?12:H.hour%12);case"hh":return this.num(H.hour%12==0?12:H.hour%12,2);case"H":return this.num(H.hour);case"HH":return this.num(H.hour,2);case"Z":return St({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return St({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return St({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return H.zone.offsetName(H.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return H.zone.offsetName(H.ts,{format:"long",locale:this.loc.locale});case"z":return H.zoneName;case"a":return Pe?function We(xe){return kr[xe.hour<12?0:1]}(H):It({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return pt?It({day:"numeric"},"day"):this.num(H.day);case"dd":return pt?It({day:"2-digit"},"day"):this.num(H.day,2);case"c":case"E":return this.num(H.weekday);case"ccc":return pn("short",!0);case"cccc":return pn("long",!0);case"ccccc":return pn("narrow",!0);case"EEE":return pn("short",!1);case"EEEE":return pn("long",!1);case"EEEEE":return pn("narrow",!1);case"L":return pt?It({month:"numeric",day:"numeric"},"month"):this.num(H.month);case"LL":return pt?It({month:"2-digit",day:"numeric"},"month"):this.num(H.month,2);case"LLL":return un("short",!0);case"LLLL":return un("long",!0);case"LLLLL":return un("narrow",!0);case"M":return pt?It({month:"numeric"},"month"):this.num(H.month);case"MM":return pt?It({month:"2-digit"},"month"):this.num(H.month,2);case"MMM":return un("short",!1);case"MMMM":return un("long",!1);case"MMMMM":return un("narrow",!1);case"y":return pt?It({year:"numeric"},"year"):this.num(H.year);case"yy":return pt?It({year:"2-digit"},"year"):this.num(H.year.toString().slice(-2),2);case"yyyy":return pt?It({year:"numeric"},"year"):this.num(H.year,4);case"yyyyyy":return pt?It({year:"numeric"},"year"):this.num(H.year,6);case"G":return Pi("short");case"GG":return Pi("long");case"GGGGG":return Pi("narrow");case"kk":return this.num(H.weekYear.toString().slice(-2),2);case"kkkk":return this.num(H.weekYear,4);case"W":return this.num(H.weekNumber);case"WW":return this.num(H.weekNumber,2);case"o":return this.num(H.ordinal);case"ooo":return this.num(H.ordinal,3);case"q":return this.num(H.quarter);case"qq":return this.num(H.quarter,2);case"X":return this.num(Math.floor(H.ts/1e3));case"x":return this.num(H.ts);default:return _i(ni)}})}formatDurationFromString(H,be){const Pe=un=>{switch(un[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},It=di.parseFormat(be),St=It.reduce((un,{literal:pn,val:_i})=>pn?un:un.concat(_i),[]);return An(It,(un=>pn=>{const _i=Pe(pn);return _i?this.num(un.get(_i),pn.length):pn})(H.shiftTo(...St.map(Pe).filter(un=>un))))}}class oi{constructor(H,be){this.reason=H,this.explanation=be}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const dr=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function pr(...xe){const H=xe.reduce((be,Pe)=>be+Pe.source,"");return RegExp(`^${H}$`)}function Ar(...xe){return H=>xe.reduce(([be,Pe,pt],It)=>{const[St,Jt,un]=It(H,pt);return[{...be,...St},Jt||Pe,un]},[{},null,1]).slice(0,2)}function Fi(xe,...H){if(null==xe)return[null,null];for(const[be,Pe]of H){const pt=be.exec(xe);if(pt)return Pe(pt)}return[null,null]}function Br(...xe){return(H,be)=>{const Pe={};let pt;for(pt=0;pt<xe.length;pt++)Pe[xe[pt]]=Fn(H[be+pt]);return[Pe,null,be+pt]}}const Zi=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,ns=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Gs=RegExp(`${ns.source}(?:${Zi.source}?(?:\\[(${dr.source})\\])?)?`),po=RegExp(`(?:T${Gs.source})?`),Ts=Br("weekYear","weekNumber","weekDay"),ho=Br("year","ordinal"),Fr=RegExp(`${ns.source} ?(?:${Zi.source}|(${dr.source}))?`),Xi=RegExp(`(?: ${Fr.source})?`);function Si(xe,H,be){const Pe=xe[H];return it(Pe)?be:Fn(Pe)}function Hn(xe,H){return[{hours:Si(xe,H,0),minutes:Si(xe,H+1,0),seconds:Si(xe,H+2,0),milliseconds:zn(xe[H+3])},null,H+4]}function As(xe,H){const be=!xe[H]&&!xe[H+1],Pe=Ei(xe[H+1],xe[H+2]);return[{},be?null:L.instance(Pe),H+3]}function Rn(xe,H){return[{},xe[H]?ft.create(xe[H]):null,H+1]}const mr=RegExp(`^T?${ns.source}$`),Sr=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function as(xe){const[H,be,Pe,pt,It,St,Jt,un,pn]=xe,_i="-"===H[0],Pi=un&&"-"===un[0],br=(ni,Hr=!1)=>void 0!==ni&&(Hr||ni&&_i)?-ni:ni;return[{years:br(Zn(be)),months:br(Zn(Pe)),weeks:br(Zn(pt)),days:br(Zn(It)),hours:br(Zn(St)),minutes:br(Zn(Jt)),seconds:br(Zn(un),"-0"===un),milliseconds:br(zn(pn),Pi)}]}const Qr={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Zr(xe,H,be,Pe,pt,It,St){const Jt={year:2===H.length?Kt(Fn(H)):Fn(H),month:Gi.indexOf(be)+1,day:Fn(Pe),hour:Fn(pt),minute:Fn(It)};return St&&(Jt.second=Fn(St)),xe&&(Jt.weekday=xe.length>3?Jr.indexOf(xe)+1:qr.indexOf(xe)+1),Jt}const gr=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function ls(xe){const[,H,be,Pe,pt,It,St,Jt,un,pn,_i,Pi]=xe,br=Zr(H,pt,Pe,be,It,St,Jt);let ni;return ni=un?Qr[un]:pn?0:Ei(_i,Pi),[br,new L(ni)]}const _r=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,cs=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,vr=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Ni(xe){const[,H,be,Pe,pt,It,St,Jt]=xe;return[Zr(H,pt,Pe,be,It,St,Jt),L.utcInstance]}function zr(xe){const[,H,be,Pe,pt,It,St,Jt]=xe;return[Zr(H,Jt,be,Pe,pt,It,St),L.utcInstance]}const Wr=pr(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,po),Ls=pr(/(\d{4})-?W(\d\d)(?:-?(\d))?/,po),Rr=pr(/(\d{4})-?(\d{3})/,po),Ss=pr(Gs),Di=Ar(function Cs(xe,H){return[{year:Si(xe,H),month:Si(xe,H+1,1),day:Si(xe,H+2,1)},null,H+3]},Hn,As,Rn),xs=Ar(Ts,Hn,As,Rn),To=Ar(ho,Hn,As,Rn),jr=Ar(Hn,As,Rn),ki=Ar(Hn),us=pr(/(\d{4})-(\d\d)-(\d\d)/,Xi),_o=pr(Fr),Ii=Ar(Hn,As,Rn),Wn={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},Js={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...Wn},rr=365.2425,Kr=30.436875,Ao={years:{quarters:4,months:12,weeks:rr/7,days:rr,hours:24*rr,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:rr/28,days:rr/4,hours:24*rr/4,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:Kr/7,days:Kr,hours:24*Kr,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...Wn},Ti=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],yr=Ti.slice(0).reverse();function Vr(xe,H,be=!1){const Pe={values:be?H.values:{...xe.values,...H.values||{}},loc:xe.loc.clone(H.loc),conversionAccuracy:H.conversionAccuracy||xe.conversionAccuracy,matrix:H.matrix||xe.matrix};return new ei(Pe)}function cn(xe,H,be,Pe,pt){const It=xe[pt][be],St=H[be]/It,un=Math.sign(St)!==Math.sign(Pe[pt])&&0!==Pe[pt]&&Math.abs(St)<=1?function Er(xe){return xe<0?Math.floor(xe):Math.ceil(xe)}(St):Math.trunc(St);Pe[pt]+=un,H[be]-=un*It}class ei{constructor(H){const be="longterm"===H.conversionAccuracy||!1;let Pe=be?Ao:Js;H.matrix&&(Pe=H.matrix),this.values=H.values,this.loc=H.loc||oe.create(),this.conversionAccuracy=be?"longterm":"casual",this.invalid=H.invalid||null,this.matrix=Pe,this.isLuxonDuration=!0}static fromMillis(H,be){return ei.fromObject({milliseconds:H},be)}static fromObject(H,be={}){if(null==H||"object"!=typeof H)throw new f("Duration.fromObject: argument expected to be an object, got "+(null===H?"null":typeof H));return new ei({values:Nn(H,ei.normalizeUnit),loc:oe.fromObject(be),conversionAccuracy:be.conversionAccuracy,matrix:be.matrix})}static fromDurationLike(H){if(Gt(H))return ei.fromMillis(H);if(ei.isDuration(H))return H;if("object"==typeof H)return ei.fromObject(H);throw new f(`Unknown duration argument ${H} of type ${typeof H}`)}static fromISO(H,be){const[Pe]=function Es(xe){return Fi(xe,[Sr,as])}(H);return Pe?ei.fromObject(Pe,be):ei.invalid("unparsable",`the input "${H}" can't be parsed as ISO 8601`)}static fromISOTime(H,be){const[Pe]=function No(xe){return Fi(xe,[mr,ki])}(H);return Pe?ei.fromObject(Pe,be):ei.invalid("unparsable",`the input "${H}" can't be parsed as ISO 8601`)}static invalid(H,be=null){if(!H)throw new f("need to specify a reason the Duration is invalid");const Pe=H instanceof oi?H:new oi(H,be);if(Xt.throwOnInvalid)throw new S(Pe);return new ei({invalid:Pe})}static normalizeUnit(H){const be={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[H&&H.toLowerCase()];if(!be)throw new w(H);return be}static isDuration(H){return H&&H.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(H,be={}){const Pe={...be,floor:!1!==be.round&&!1!==be.floor};return this.isValid?di.create(this.loc,Pe).formatDurationFromString(this,H):"Invalid Duration"}toHuman(H={}){const be=Ti.map(Pe=>{const pt=this.values[Pe];return it(pt)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...H,unit:Pe.slice(0,-1)}).format(pt)}).filter(Pe=>Pe);return this.loc.listFormatter({type:"conjunction",style:H.listStyle||"narrow",...H}).format(be)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let H="P";return 0!==this.years&&(H+=this.years+"Y"),(0!==this.months||0!==this.quarters)&&(H+=this.months+3*this.quarters+"M"),0!==this.weeks&&(H+=this.weeks+"W"),0!==this.days&&(H+=this.days+"D"),(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)&&(H+="T"),0!==this.hours&&(H+=this.hours+"H"),0!==this.minutes&&(H+=this.minutes+"M"),(0!==this.seconds||0!==this.milliseconds)&&(H+=ut(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===H&&(H+="T0S"),H}toISOTime(H={}){if(!this.isValid)return null;const be=this.toMillis();if(be<0||be>=864e5)return null;H={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...H};const Pe=this.shiftTo("hours","minutes","seconds","milliseconds");let pt="basic"===H.format?"hhmm":"hh:mm";(!H.suppressSeconds||0!==Pe.seconds||0!==Pe.milliseconds)&&(pt+="basic"===H.format?"ss":":ss",(!H.suppressMilliseconds||0!==Pe.milliseconds)&&(pt+=".SSS"));let It=Pe.toFormat(pt);return H.includePrefix&&(It="T"+It),It}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(H){if(!this.isValid)return this;const be=ei.fromDurationLike(H),Pe={};for(const pt of Ti)(Yn(be.values,pt)||Yn(this.values,pt))&&(Pe[pt]=be.get(pt)+this.get(pt));return Vr(this,{values:Pe},!0)}minus(H){if(!this.isValid)return this;const be=ei.fromDurationLike(H);return this.plus(be.negate())}mapUnits(H){if(!this.isValid)return this;const be={};for(const Pe of Object.keys(this.values))be[Pe]=os(H(this.values[Pe],Pe));return Vr(this,{values:be},!0)}get(H){return this[ei.normalizeUnit(H)]}set(H){return this.isValid?Vr(this,{values:{...this.values,...Nn(H,ei.normalizeUnit)}}):this}reconfigure({locale:H,numberingSystem:be,conversionAccuracy:Pe,matrix:pt}={}){return Vr(this,{loc:this.loc.clone({locale:H,numberingSystem:be}),matrix:pt,conversionAccuracy:Pe})}as(H){return this.isValid?this.shiftTo(H).get(H):NaN}normalize(){if(!this.isValid)return this;const H=this.toObject();return function Kn(xe,H){yr.reduce((be,Pe)=>it(H[Pe])?be:(be&&cn(xe,H,be,H,Pe),Pe),null)}(this.matrix,H),Vr(this,{values:H},!0)}rescale(){return this.isValid?Vr(this,{values:function fs(xe){const H={};for(const[be,Pe]of Object.entries(xe))0!==Pe&&(H[be]=Pe);return H}(this.normalize().shiftToAll().toObject())},!0):this}shiftTo(...H){if(!this.isValid)return this;if(0===H.length)return this;H=H.map(St=>ei.normalizeUnit(St));const be={},Pe={},pt=this.toObject();let It;for(const St of Ti)if(H.indexOf(St)>=0){It=St;let Jt=0;for(const pn in Pe)Jt+=this.matrix[pn][St]*Pe[pn],Pe[pn]=0;Gt(pt[St])&&(Jt+=pt[St]);const un=Math.trunc(Jt);be[St]=un,Pe[St]=(1e3*Jt-1e3*un)/1e3;for(const pn in pt)Ti.indexOf(pn)>Ti.indexOf(St)&&cn(this.matrix,pt,pn,be,St)}else Gt(pt[St])&&(Pe[St]=pt[St]);for(const St in Pe)0!==Pe[St]&&(be[It]+=St===It?Pe[St]:Pe[St]/this.matrix[It][St]);return Vr(this,{values:be},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const H={};for(const be of Object.keys(this.values))H[be]=0===this.values[be]?0:-this.values[be];return Vr(this,{values:H},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(H){if(!this.isValid||!H.isValid||!this.loc.equals(H.loc))return!1;function be(Pe,pt){return void 0===Pe||0===Pe?void 0===pt||0===pt:Pe===pt}for(const Pe of Ti)if(!be(this.values[Pe],H.values[Pe]))return!1;return!0}}const Hi="Invalid Interval";class he{constructor(H){this.s=H.start,this.e=H.end,this.invalid=H.invalid||null,this.isLuxonInterval=!0}static invalid(H,be=null){if(!H)throw new f("need to specify a reason the Interval is invalid");const Pe=H instanceof oi?H:new oi(H,be);if(Xt.throwOnInvalid)throw new h(Pe);return new he({invalid:Pe})}static fromDateTimes(H,be){const Pe=xo(H),pt=xo(be),It=function Te(xe,H){return xe&&xe.isValid?H&&H.isValid?H<xe?he.invalid("end before start",`The end of an interval must be after its start, but you had start=${xe.toISO()} and end=${H.toISO()}`):null:he.invalid("missing or invalid end"):he.invalid("missing or invalid start")}(Pe,pt);return It??new he({start:Pe,end:pt})}static after(H,be){const Pe=ei.fromDurationLike(be),pt=xo(H);return he.fromDateTimes(pt,pt.plus(Pe))}static before(H,be){const Pe=ei.fromDurationLike(be),pt=xo(H);return he.fromDateTimes(pt.minus(Pe),pt)}static fromISO(H,be){const[Pe,pt]=(H||"").split("/",2);if(Pe&&pt){let It,St,Jt,un;try{It=ii.fromISO(Pe,be),St=It.isValid}catch{St=!1}try{Jt=ii.fromISO(pt,be),un=Jt.isValid}catch{un=!1}if(St&&un)return he.fromDateTimes(It,Jt);if(St){const pn=ei.fromISO(pt,be);if(pn.isValid)return he.after(It,pn)}else if(un){const pn=ei.fromISO(Pe,be);if(pn.isValid)return he.before(Jt,pn)}}return he.invalid("unparsable",`the input "${H}" can't be parsed as ISO 8601`)}static isInterval(H){return H&&H.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(H="milliseconds"){return this.isValid?this.toDuration(H).get(H):NaN}count(H="milliseconds"){if(!this.isValid)return NaN;const be=this.start.startOf(H),Pe=this.end.startOf(H);return Math.floor(Pe.diff(be,H).get(H))+(Pe.valueOf()!==this.end.valueOf())}hasSame(H){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,H))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(H){return!!this.isValid&&this.s>H}isBefore(H){return!!this.isValid&&this.e<=H}contains(H){return!!this.isValid&&this.s<=H&&this.e>H}set({start:H,end:be}={}){return this.isValid?he.fromDateTimes(H||this.s,be||this.e):this}splitAt(...H){if(!this.isValid)return[];const be=H.map(xo).filter(St=>this.contains(St)).sort(),Pe=[];let{s:pt}=this,It=0;for(;pt<this.e;){const St=be[It]||this.e,Jt=+St>+this.e?this.e:St;Pe.push(he.fromDateTimes(pt,Jt)),pt=Jt,It+=1}return Pe}splitBy(H){const be=ei.fromDurationLike(H);if(!this.isValid||!be.isValid||0===be.as("milliseconds"))return[];let It,{s:Pe}=this,pt=1;const St=[];for(;Pe<this.e;){const Jt=this.start.plus(be.mapUnits(un=>un*pt));It=+Jt>+this.e?this.e:Jt,St.push(he.fromDateTimes(Pe,It)),Pe=It,pt+=1}return St}divideEqually(H){return this.isValid?this.splitBy(this.length()/H).slice(0,H):[]}overlaps(H){return this.e>H.s&&this.s<H.e}abutsStart(H){return!!this.isValid&&+this.e==+H.s}abutsEnd(H){return!!this.isValid&&+H.e==+this.s}engulfs(H){return!!this.isValid&&this.s<=H.s&&this.e>=H.e}equals(H){return!(!this.isValid||!H.isValid)&&this.s.equals(H.s)&&this.e.equals(H.e)}intersection(H){if(!this.isValid)return this;const be=this.s>H.s?this.s:H.s,Pe=this.e<H.e?this.e:H.e;return be>=Pe?null:he.fromDateTimes(be,Pe)}union(H){return this.isValid?he.fromDateTimes(this.s<H.s?this.s:H.s,this.e>H.e?this.e:H.e):this}static merge(H){const[be,Pe]=H.sort((pt,It)=>pt.s-It.s).reduce(([pt,It],St)=>It?It.overlaps(St)||It.abutsStart(St)?[pt,It.union(St)]:[pt.concat([It]),St]:[pt,St],[[],null]);return Pe&&be.push(Pe),be}static xor(H){let be=null,Pe=0;const pt=[],It=H.map(un=>[{time:un.s,type:"s"},{time:un.e,type:"e"}]),Jt=Array.prototype.concat(...It).sort((un,pn)=>un.time-pn.time);for(const un of Jt)Pe+="s"===un.type?1:-1,1===Pe?be=un.time:(be&&+be!=+un.time&&pt.push(he.fromDateTimes(be,un.time)),be=null);return he.merge(pt)}difference(...H){return he.xor([this].concat(H)).map(be=>this.intersection(be)).filter(be=>be&&!be.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Hi}toLocaleString(H=R,be={}){return this.isValid?di.create(this.s.loc.clone(be),H).formatInterval(this):Hi}toISO(H){return this.isValid?`${this.s.toISO(H)}/${this.e.toISO(H)}`:Hi}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Hi}toISOTime(H){return this.isValid?`${this.s.toISOTime(H)}/${this.e.toISOTime(H)}`:Hi}toFormat(H,{separator:be=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(H)}${be}${this.e.toFormat(H)}`:Hi}toDuration(H,be){return this.isValid?this.e.diff(this.s,H,be):ei.invalid(this.invalidReason)}mapEndpoints(H){return he.fromDateTimes(H(this.s),H(this.e))}}class z{static hasDST(H=Xt.defaultZone){const be=ii.now().setZone(H).set({month:12});return!H.isUniversal&&be.offset!==be.set({month:6}).offset}static isValidIANAZone(H){return ft.isValidZone(H)}static normalizeZone(H){return Ne(H,Xt.defaultZone)}static months(H="long",{locale:be=null,numberingSystem:Pe=null,locObj:pt=null,outputCalendar:It="gregory"}={}){return(pt||oe.create(be,Pe,It)).months(H)}static monthsFormat(H="long",{locale:be=null,numberingSystem:Pe=null,locObj:pt=null,outputCalendar:It="gregory"}={}){return(pt||oe.create(be,Pe,It)).months(H,!0)}static weekdays(H="long",{locale:be=null,numberingSystem:Pe=null,locObj:pt=null}={}){return(pt||oe.create(be,Pe,null)).weekdays(H)}static weekdaysFormat(H="long",{locale:be=null,numberingSystem:Pe=null,locObj:pt=null}={}){return(pt||oe.create(be,Pe,null)).weekdays(H,!0)}static meridiems({locale:H=null}={}){return oe.create(H).meridiems()}static eras(H="short",{locale:be=null}={}){return oe.create(be,null,"gregory").eras(H)}static features(){return{relative:kn()}}}function $e(xe,H){const be=pt=>pt.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),Pe=be(H)-be(xe);return Math.floor(ei.fromMillis(Pe).as("days"))}const xi={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},Dr={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Ir=xi.hanidec.replace(/[\[|\]]/g,"").split("");function ai({numberingSystem:xe},H=""){return new RegExp(`${xi[xe||"latn"]}${H}`)}function Fe(xe,H=(be=>be)){return{regex:xe,deser:([be])=>H(function Ji(xe){let H=parseInt(xe,10);if(isNaN(H)){H="";for(let be=0;be<xe.length;be++){const Pe=xe.charCodeAt(be);if(-1!==xe[be].search(xi.hanidec))H+=Ir.indexOf(xe[be]);else for(const pt in Dr){const[It,St]=Dr[pt];Pe>=It&&Pe<=St&&(H+=Pe-It)}}return parseInt(H,10)}return H}(be))}}const At=`[ ${String.fromCharCode(160)}]`,Bt=new RegExp(At,"g");function Lt(xe){return xe.replace(/\./g,"\\.?").replace(Bt,At)}function tn(xe){return xe.replace(/\./g,"").replace(Bt," ").toLowerCase()}function fn(xe,H){return null===xe?null:{regex:RegExp(xe.map(Lt).join("|")),deser:([be])=>xe.findIndex(Pe=>tn(be)===tn(Pe))+H}}function $n(xe,H){return{regex:xe,deser:([,be,Pe])=>Ei(be,Pe),groups:H}}function Ln(xe){return{regex:xe,deser:([H])=>H}}function lr(xe){return xe.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}const cr={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let de=null;function He(xe,H){return Array.prototype.concat(...xe.map(be=>function ge(xe,H){if(xe.literal)return xe;const Pe=zt(di.macroTokenToFormatOpts(xe.val),H);return null==Pe||Pe.includes(void 0)?xe:Pe}(be,H)))}function ot(xe,H,be){const Pe=He(di.parseFormat(be),xe),pt=Pe.map(St=>function Pr(xe,H){const be=ai(H),Pe=ai(H,"{2}"),pt=ai(H,"{3}"),It=ai(H,"{4}"),St=ai(H,"{6}"),Jt=ai(H,"{1,2}"),un=ai(H,"{1,3}"),pn=ai(H,"{1,6}"),_i=ai(H,"{1,9}"),Pi=ai(H,"{2,4}"),br=ai(H,"{4,6}"),ni=Ws=>({regex:RegExp(lr(Ws.val)),deser:([ua])=>ua,literal:!0}),Qs=(Ws=>{if(xe.literal)return ni(Ws);switch(Ws.val){case"G":return fn(H.eras("short",!1),0);case"GG":return fn(H.eras("long",!1),0);case"y":return Fe(pn);case"yy":case"kk":return Fe(Pi,Kt);case"yyyy":case"kkkk":return Fe(It);case"yyyyy":return Fe(br);case"yyyyyy":return Fe(St);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return Fe(Jt);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return Fe(Pe);case"MMM":return fn(H.months("short",!0,!1),1);case"MMMM":return fn(H.months("long",!0,!1),1);case"LLL":return fn(H.months("short",!1,!1),1);case"LLLL":return fn(H.months("long",!1,!1),1);case"o":case"S":return Fe(un);case"ooo":case"SSS":return Fe(pt);case"u":return Ln(_i);case"uu":return Ln(Jt);case"uuu":case"E":case"c":return Fe(be);case"a":return fn(H.meridiems(),0);case"EEE":return fn(H.weekdays("short",!1,!1),1);case"EEEE":return fn(H.weekdays("long",!1,!1),1);case"ccc":return fn(H.weekdays("short",!0,!1),1);case"cccc":return fn(H.weekdays("long",!0,!1),1);case"Z":case"ZZ":return $n(new RegExp(`([+-]${Jt.source})(?::(${Pe.source}))?`),2);case"ZZZ":return $n(new RegExp(`([+-]${Jt.source})(${Pe.source})?`),2);case"z":return Ln(/[a-z_+-/]{1,256}?/i);case" ":return Ln(/[^\S\n\r]/);default:return ni(Ws)}})(xe)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return Qs.token=xe,Qs}(St,xe)),It=pt.find(St=>St.invalidReason);if(It)return{input:H,tokens:Pe,invalidReason:It.invalidReason};{const[St,Jt]=function yn(xe){return[`^${xe.map(be=>be.regex).reduce((be,Pe)=>`${be}(${Pe.source})`,"")}$`,xe]}(pt),un=RegExp(St,"i"),[pn,_i]=function Oo(xe,H,be){const Pe=xe.match(H);if(Pe){const pt={};let It=1;for(const St in be)if(Yn(be,St)){const Jt=be[St],un=Jt.groups?Jt.groups+1:1;!Jt.literal&&Jt.token&&(pt[Jt.token.val[0]]=Jt.deser(Pe.slice(It,It+un))),It+=un}return[Pe,pt]}return[Pe,{}]}(H,un,Jt),[Pi,br,ni]=_i?function Xs(xe){let Pe,be=null;return it(xe.z)||(be=ft.create(xe.z)),it(xe.Z)||(be||(be=new L(xe.Z)),Pe=xe.Z),it(xe.q)||(xe.M=3*(xe.q-1)+1),it(xe.h)||(xe.h<12&&1===xe.a?xe.h+=12:12===xe.h&&0===xe.a&&(xe.h=0)),0===xe.G&&xe.y&&(xe.y=-xe.y),it(xe.u)||(xe.S=zn(xe.u)),[Object.keys(xe).reduce((It,St)=>{const Jt=(It=>{switch(It){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(St);return Jt&&(It[Jt]=xe[St]),It},{}),be,Pe]}(_i):[null,null,void 0];if(Yn(_i,"a")&&Yn(_i,"H"))throw new y("Can't include meridiem when specifying 24-hour format");return{input:H,tokens:Pe,regex:un,rawMatches:pn,matches:_i,result:Pi,zone:br,specificOffset:ni}}}function zt(xe,H){return xe?di.create(H,xe).formatDateTimeParts(function Oe(){return de||(de=ii.fromMillis(1555555555555)),de}()).map(pt=>function si(xe,H){const{type:be,value:Pe}=xe;if("literal"===be){const St=/^\s+$/.test(Pe);return{literal:!St,val:St?" ":Pe}}let It=cr[be];if("object"==typeof It&&(It=It[H[be]]),It)return{literal:!1,val:It}}(pt,xe)):null}const Pt=[0,31,59,90,120,151,181,212,243,273,304,334],gi=[0,31,60,91,121,152,182,213,244,274,305,335];function pi(xe,H){return new oi("unit out of range",`you specified ${H} (of type ${typeof H}) as a ${xe}, which is invalid`)}function ti(xe,H,be){const Pe=new Date(Date.UTC(xe,H-1,be));xe<100&&xe>=0&&Pe.setUTCFullYear(Pe.getUTCFullYear()-1900);const pt=Pe.getUTCDay();return 0===pt?7:pt}function Ut(xe,H,be){return be+(vt(xe)?gi:Pt)[H-1]}function Un(xe,H){const be=vt(xe)?gi:Pt,Pe=be.findIndex(It=>It<H);return{month:Pe+1,day:H-be[Pe]}}function Ci(xe){const{year:H,month:be,day:Pe}=xe,pt=Ut(H,be,Pe),It=ti(H,be,Pe);let Jt,St=Math.floor((pt-It+10)/7);return St<1?(Jt=H-1,St=hn(Jt)):St>hn(H)?(Jt=H+1,St=1):Jt=H,{weekYear:Jt,weekNumber:St,weekday:It,...ur(xe)}}function hr(xe){const{weekYear:H,weekNumber:be,weekday:Pe}=xe,pt=ti(H,1,4),It=at(H);let Jt,St=7*be+Pe-pt-3;St<1?(Jt=H-1,St+=at(Jt)):St>It?(Jt=H+1,St-=at(H)):Jt=H;const{month:un,day:pn}=Un(Jt,St);return{year:Jt,month:un,day:pn,...ur(xe)}}function Cr(xe){const{year:H,month:be,day:Pe}=xe;return{year:H,ordinal:Ut(H,be,Pe),...ur(xe)}}function sr(xe){const{year:H,ordinal:be}=xe,{month:Pe,day:pt}=Un(H,be);return{year:H,month:Pe,day:pt,...ur(xe)}}function Ri(xe){const H=bt(xe.year),be=Ft(xe.month,1,12),Pe=Ft(xe.day,1,Ot(xe.year,xe.month));return H?be?!Pe&&pi("day",xe.day):pi("month",xe.month):pi("year",xe.year)}function Ds(xe){const{hour:H,minute:be,second:Pe,millisecond:pt}=xe,It=Ft(H,0,23)||24===H&&0===be&&0===Pe&&0===pt,St=Ft(be,0,59),Jt=Ft(Pe,0,59),un=Ft(pt,0,999);return It?St?Jt?!un&&pi("millisecond",pt):pi("second",Pe):pi("minute",be):pi("hour",H)}const fo="Invalid DateTime",ca=864e13;function Yr(xe){return new oi("unsupported zone",`the zone "${xe.name}" is not supported`)}function ms(xe){return null===xe.weekData&&(xe.weekData=Ci(xe.c)),xe.weekData}function Jo(xe,H){const be={ts:xe.ts,zone:xe.zone,c:xe.c,o:xe.o,loc:xe.loc,invalid:xe.invalid};return new ii({...be,...H,old:be})}function ba(xe,H,be){let Pe=xe-60*H*1e3;const pt=be.offset(Pe);if(H===pt)return[Pe,H];Pe-=60*(pt-H)*1e3;const It=be.offset(Pe);return pt===It?[Pe,pt]:[xe-60*Math.min(pt,It)*1e3,Math.max(pt,It)]}function Bs(xe,H){const be=new Date(xe+=60*H*1e3);return{year:be.getUTCFullYear(),month:be.getUTCMonth()+1,day:be.getUTCDate(),hour:be.getUTCHours(),minute:be.getUTCMinutes(),second:be.getUTCSeconds(),millisecond:be.getUTCMilliseconds()}}function gs(xe,H,be){return ba(Ht(xe),H,be)}function qo(xe,H){const be=xe.o,Pe=xe.c.year+Math.trunc(H.years),pt=xe.c.month+Math.trunc(H.months)+3*Math.trunc(H.quarters),It={...xe.c,year:Pe,month:pt,day:Math.min(xe.c.day,Ot(Pe,pt))+Math.trunc(H.days)+7*Math.trunc(H.weeks)},St=ei.fromObject({years:H.years-Math.trunc(H.years),quarters:H.quarters-Math.trunc(H.quarters),months:H.months-Math.trunc(H.months),weeks:H.weeks-Math.trunc(H.weeks),days:H.days-Math.trunc(H.days),hours:H.hours,minutes:H.minutes,seconds:H.seconds,milliseconds:H.milliseconds}).as("milliseconds"),Jt=Ht(It);let[un,pn]=ba(Jt,be,xe.zone);return 0!==St&&(un+=St,pn=xe.zone.offset(un)),{ts:un,o:pn}}function or(xe,H,be,Pe,pt,It){const{setZone:St,zone:Jt}=be;if(xe&&0!==Object.keys(xe).length||H){const un=H||Jt,pn=ii.fromObject(xe,{...be,zone:un,specificOffset:It});return St?pn:pn.setZone(Jt)}return ii.invalid(new oi("unparsable",`the input "${pt}" can't be parsed as ${Pe}`))}function Is(xe,H,be=!0){return xe.isValid?di.create(oe.create("en-US"),{allowZ:be,forceSimple:!0}).formatDateTimeFromString(xe,H):null}function Qo(xe,H){const be=xe.c.year>9999||xe.c.year<0;let Pe="";return be&&xe.c.year>=0&&(Pe+="+"),Pe+=In(xe.c.year,be?6:4),H?(Pe+="-",Pe+=In(xe.c.month),Pe+="-",Pe+=In(xe.c.day)):(Pe+=In(xe.c.month),Pe+=In(xe.c.day)),Pe}function wa(xe,H,be,Pe,pt,It){let St=In(xe.c.hour);return H?(St+=":",St+=In(xe.c.minute),(0!==xe.c.second||!be)&&(St+=":")):St+=In(xe.c.minute),(0!==xe.c.second||!be)&&(St+=In(xe.c.second),(0!==xe.c.millisecond||!Pe)&&(St+=".",St+=In(xe.c.millisecond,3))),pt&&(xe.isOffsetFixed&&0===xe.offset&&!It?St+="Z":xe.o<0?(St+="-",St+=In(Math.trunc(-xe.o/60)),St+=":",St+=In(Math.trunc(-xe.o%60))):(St+="+",St+=In(Math.trunc(xe.o/60)),St+=":",St+=In(Math.trunc(xe.o%60)))),It&&(St+="["+xe.zone.ianaName+"]"),St}const eo={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Mr={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Va={ordinal:1,hour:0,minute:0,second:0,millisecond:0},mo=["year","month","day","hour","minute","second","millisecond"],So=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],to=["year","ordinal","hour","minute","second","millisecond"];function nl(xe){const H={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[xe.toLowerCase()];if(!H)throw new w(xe);return H}function ko(xe,H){const be=Ne(H.zone,Xt.defaultZone),Pe=oe.fromObject(H),pt=Xt.now();let It,St;if(it(xe.year))It=pt;else{for(const pn of mo)it(xe[pn])&&(xe[pn]=eo[pn]);const Jt=Ri(xe)||Ds(xe);if(Jt)return ii.invalid(Jt);const un=be.offset(pt);[It,St]=gs(xe,un,be)}return new ii({ts:It,zone:be,loc:Pe,o:St})}function Ta(xe,H,be){const Pe=!!it(be.round)||be.round,pt=(St,Jt)=>(St=ut(St,Pe||be.calendary?0:2,!0),H.loc.clone(be).relFormatter(be).format(St,Jt)),It=St=>be.calendary?H.hasSame(xe,St)?0:H.startOf(St).diff(xe.startOf(St),St).get(St):H.diff(xe,St).get(St);if(be.unit)return pt(It(be.unit),be.unit);for(const St of be.units){const Jt=It(St);if(Math.abs(Jt)>=1)return pt(Jt,St)}return pt(xe>H?-0:0,be.units[be.units.length-1])}function Wo(xe){let be,H={};return xe.length>0&&"object"==typeof xe[xe.length-1]?(H=xe[xe.length-1],be=Array.from(xe).slice(0,xe.length-1)):be=Array.from(xe),[H,be]}class ii{constructor(H){const be=H.zone||Xt.defaultZone;let Pe=H.invalid||(Number.isNaN(H.ts)?new oi("invalid input"):null)||(be.isValid?null:Yr(be));this.ts=it(H.ts)?Xt.now():H.ts;let pt=null,It=null;if(!Pe)if(H.old&&H.old.ts===this.ts&&H.old.zone.equals(be))[pt,It]=[H.old.c,H.old.o];else{const Jt=be.offset(this.ts);pt=Bs(this.ts,Jt),Pe=Number.isNaN(pt.year)?new oi("invalid input"):null,pt=Pe?null:pt,It=Pe?null:Jt}this._zone=be,this.loc=H.loc||oe.create(),this.invalid=Pe,this.weekData=null,this.c=pt,this.o=It,this.isLuxonDateTime=!0}static now(){return new ii({})}static local(){const[H,be]=Wo(arguments),[Pe,pt,It,St,Jt,un,pn]=be;return ko({year:Pe,month:pt,day:It,hour:St,minute:Jt,second:un,millisecond:pn},H)}static utc(){const[H,be]=Wo(arguments),[Pe,pt,It,St,Jt,un,pn]=be;return H.zone=L.utcInstance,ko({year:Pe,month:pt,day:It,hour:St,minute:Jt,second:un,millisecond:pn},H)}static fromJSDate(H,be={}){const Pe=function ln(xe){return"[object Date]"===Object.prototype.toString.call(xe)}(H)?H.valueOf():NaN;if(Number.isNaN(Pe))return ii.invalid("invalid input");const pt=Ne(be.zone,Xt.defaultZone);return pt.isValid?new ii({ts:Pe,zone:pt,loc:oe.fromObject(be)}):ii.invalid(Yr(pt))}static fromMillis(H,be={}){if(Gt(H))return H<-ca||H>ca?ii.invalid("Timestamp out of range"):new ii({ts:H,zone:Ne(be.zone,Xt.defaultZone),loc:oe.fromObject(be)});throw new f(`fromMillis requires a numerical input, but received a ${typeof H} with value ${H}`)}static fromSeconds(H,be={}){if(Gt(H))return new ii({ts:1e3*H,zone:Ne(be.zone,Xt.defaultZone),loc:oe.fromObject(be)});throw new f("fromSeconds requires a numerical input")}static fromObject(H,be={}){H=H||{};const Pe=Ne(be.zone,Xt.defaultZone);if(!Pe.isValid)return ii.invalid(Yr(Pe));const pt=Xt.now(),It=it(be.specificOffset)?Pe.offset(pt):be.specificOffset,St=Nn(H,nl),Jt=!it(St.ordinal),un=!it(St.year),pn=!it(St.month)||!it(St.day),_i=un||pn,Pi=St.weekYear||St.weekNumber,br=oe.fromObject(be);if((_i||Jt)&&Pi)throw new y("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(pn&&Jt)throw new y("Can't mix ordinal dates with month/day");const ni=Pi||St.weekday&&!_i;let Hr,Qs,Ws=Bs(pt,It);ni?(Hr=So,Qs=Mr,Ws=Ci(Ws)):Jt?(Hr=to,Qs=Va,Ws=Cr(Ws)):(Hr=mo,Qs=eo);let ua=!1;for(const io of Hr)it(St[io])?St[io]=ua?Qs[io]:Ws[io]:ua=!0;const Ha=ni?function qs(xe){const H=bt(xe.weekYear),be=Ft(xe.weekNumber,1,hn(xe.weekYear)),Pe=Ft(xe.weekday,1,7);return H?be?!Pe&&pi("weekday",xe.weekday):pi("week",xe.week):pi("weekYear",xe.weekYear)}(St):Jt?function Wi(xe){const H=bt(xe.year),be=Ft(xe.ordinal,1,at(xe.year));return H?!be&&pi("ordinal",xe.ordinal):pi("year",xe.year)}(St):Ri(St),Ja=Ha||Ds(St);if(Ja)return ii.invalid(Ja);const js=ni?hr(St):Jt?sr(St):St,[Lr,no]=gs(js,It,Pe),vo=new ii({ts:Lr,zone:Pe,o:no,loc:br});return St.weekday&&_i&&H.weekday!==vo.weekday?ii.invalid("mismatched weekday",`you can't specify both a weekday of ${St.weekday} and a date of ${vo.toISO()}`):vo}static fromISO(H,be={}){const[Pe,pt]=function ss(xe){return Fi(xe,[Wr,Di],[Ls,xs],[Rr,To],[Ss,jr])}(H);return or(Pe,pt,be,"ISO 8601",H)}static fromRFC2822(H,be={}){const[Pe,pt]=function Hs(xe){return Fi(function zi(xe){return xe.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(xe),[gr,ls])}(H);return or(Pe,pt,be,"RFC 2822",H)}static fromHTTP(H,be={}){const[Pe,pt]=function Us(xe){return Fi(xe,[_r,Ni],[cs,Ni],[vr,zr])}(H);return or(Pe,pt,be,"HTTP",be)}static fromFormat(H,be,Pe={}){if(it(H)||it(be))throw new f("fromFormat requires an input string and a format");const{locale:pt=null,numberingSystem:It=null}=Pe,St=oe.fromOpts({locale:pt,numberingSystem:It,defaultToEN:!0}),[Jt,un,pn,_i]=function Vt(xe,H,be){const{result:Pe,zone:pt,specificOffset:It,invalidReason:St}=ot(xe,H,be);return[Pe,pt,It,St]}(St,H,be);return _i?ii.invalid(_i):or(Jt,un,Pe,`format ${be}`,H,pn)}static fromString(H,be,Pe={}){return ii.fromFormat(H,be,Pe)}static fromSQL(H,be={}){const[Pe,pt]=function Vi(xe){return Fi(xe,[us,Di],[_o,Ii])}(H);return or(Pe,pt,be,"SQL",H)}static invalid(H,be=null){if(!H)throw new f("need to specify a reason the DateTime is invalid");const Pe=H instanceof oi?H:new oi(H,be);if(Xt.throwOnInvalid)throw new e(Pe);return new ii({invalid:Pe})}static isDateTime(H){return H&&H.isLuxonDateTime||!1}static parseFormatForOpts(H,be={}){const Pe=zt(H,oe.fromObject(be));return Pe?Pe.map(pt=>pt?pt.val:null).join(""):null}static expandFormat(H,be={}){return He(di.parseFormat(H),oe.fromObject(be)).map(pt=>pt.val).join("")}get(H){return this[H]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?ms(this).weekYear:NaN}get weekNumber(){return this.isValid?ms(this).weekNumber:NaN}get weekday(){return this.isValid?ms(this).weekday:NaN}get ordinal(){return this.isValid?Cr(this.c).ordinal:NaN}get monthShort(){return this.isValid?z.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?z.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?z.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?z.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}get isInLeapYear(){return vt(this.year)}get daysInMonth(){return Ot(this.year,this.month)}get daysInYear(){return this.isValid?at(this.year):NaN}get weeksInWeekYear(){return this.isValid?hn(this.weekYear):NaN}resolvedLocaleOptions(H={}){const{locale:be,numberingSystem:Pe,calendar:pt}=di.create(this.loc.clone(H),H).resolvedOptions(this);return{locale:be,numberingSystem:Pe,outputCalendar:pt}}toUTC(H=0,be={}){return this.setZone(L.instance(H),be)}toLocal(){return this.setZone(Xt.defaultZone)}setZone(H,{keepLocalTime:be=!1,keepCalendarTime:Pe=!1}={}){if((H=Ne(H,Xt.defaultZone)).equals(this.zone))return this;if(H.isValid){let pt=this.ts;if(be||Pe){const It=H.offset(this.ts),St=this.toObject();[pt]=gs(St,It,H)}return Jo(this,{ts:pt,zone:H})}return ii.invalid(Yr(H))}reconfigure({locale:H,numberingSystem:be,outputCalendar:Pe}={}){return Jo(this,{loc:this.loc.clone({locale:H,numberingSystem:be,outputCalendar:Pe})})}setLocale(H){return this.reconfigure({locale:H})}set(H){if(!this.isValid)return this;const be=Nn(H,nl),Pe=!it(be.weekYear)||!it(be.weekNumber)||!it(be.weekday),pt=!it(be.ordinal),It=!it(be.year),St=!it(be.month)||!it(be.day);if((It||St||pt)&&(be.weekYear||be.weekNumber))throw new y("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(St&&pt)throw new y("Can't mix ordinal dates with month/day");let pn;Pe?pn=hr({...Ci(this.c),...be}):it(be.ordinal)?(pn={...this.toObject(),...be},it(be.day)&&(pn.day=Math.min(Ot(pn.year,pn.month),pn.day))):pn=sr({...Cr(this.c),...be});const[_i,Pi]=gs(pn,this.o,this.zone);return Jo(this,{ts:_i,o:Pi})}plus(H){return this.isValid?Jo(this,qo(this,ei.fromDurationLike(H))):this}minus(H){return this.isValid?Jo(this,qo(this,ei.fromDurationLike(H).negate())):this}startOf(H){if(!this.isValid)return this;const be={},Pe=ei.normalizeUnit(H);switch(Pe){case"years":be.month=1;case"quarters":case"months":be.day=1;case"weeks":case"days":be.hour=0;case"hours":be.minute=0;case"minutes":be.second=0;case"seconds":be.millisecond=0}if("weeks"===Pe&&(be.weekday=1),"quarters"===Pe){const pt=Math.ceil(this.month/3);be.month=3*(pt-1)+1}return this.set(be)}endOf(H){return this.isValid?this.plus({[H]:1}).startOf(H).minus(1):this}toFormat(H,be={}){return this.isValid?di.create(this.loc.redefaultToEN(be)).formatDateTimeFromString(this,H):fo}toLocaleString(H=R,be={}){return this.isValid?di.create(this.loc.clone(be),H).formatDateTime(this):fo}toLocaleParts(H={}){return this.isValid?di.create(this.loc.clone(H),H).formatDateTimeParts(this):[]}toISO({format:H="extended",suppressSeconds:be=!1,suppressMilliseconds:Pe=!1,includeOffset:pt=!0,extendedZone:It=!1}={}){if(!this.isValid)return null;const St="extended"===H;let Jt=Qo(this,St);return Jt+="T",Jt+=wa(this,St,be,Pe,pt,It),Jt}toISODate({format:H="extended"}={}){return this.isValid?Qo(this,"extended"===H):null}toISOWeekDate(){return Is(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:H=!1,suppressSeconds:be=!1,includeOffset:Pe=!0,includePrefix:pt=!1,extendedZone:It=!1,format:St="extended"}={}){return this.isValid?(pt?"T":"")+wa(this,"extended"===St,be,H,Pe,It):null}toRFC2822(){return Is(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Is(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Qo(this,!0):null}toSQLTime({includeOffset:H=!0,includeZone:be=!1,includeOffsetSpace:Pe=!0}={}){let pt="HH:mm:ss.SSS";return(be||H)&&(Pe&&(pt+=" "),be?pt+="z":H&&(pt+="ZZ")),Is(this,pt,!0)}toSQL(H={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(H)}`:null}toString(){return this.isValid?this.toISO():fo}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(H={}){if(!this.isValid)return{};const be={...this.c};return H.includeConfig&&(be.outputCalendar=this.outputCalendar,be.numberingSystem=this.loc.numberingSystem,be.locale=this.loc.locale),be}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(H,be="milliseconds",Pe={}){if(!this.isValid||!H.isValid)return ei.invalid("created by diffing an invalid DateTime");const pt={locale:this.locale,numberingSystem:this.numberingSystem,...Pe},It=function Tn(xe){return Array.isArray(xe)?xe:[xe]}(be).map(ei.normalizeUnit),St=H.valueOf()>this.valueOf(),pn=function xn(xe,H,be,Pe){let[pt,It,St,Jt]=function $t(xe,H,be){const Pe=[["years",(un,pn)=>pn.year-un.year],["quarters",(un,pn)=>pn.quarter-un.quarter+4*(pn.year-un.year)],["months",(un,pn)=>pn.month-un.month+12*(pn.year-un.year)],["weeks",(un,pn)=>{const _i=$e(un,pn);return(_i-_i%7)/7}],["days",$e]],pt={},It=xe;let St,Jt;for(const[un,pn]of Pe)be.indexOf(un)>=0&&(St=un,pt[un]=pn(xe,H),Jt=It.plus(pt),Jt>H?(pt[un]--,xe=It.plus(pt)):xe=Jt);return[xe,pt,Jt,St]}(xe,H,be);const un=H-pt,pn=be.filter(Pi=>["hours","minutes","seconds","milliseconds"].indexOf(Pi)>=0);0===pn.length&&(St<H&&(St=pt.plus({[Jt]:1})),St!==pt&&(It[Jt]=(It[Jt]||0)+un/(St-pt)));const _i=ei.fromObject(It,Pe);return pn.length>0?ei.fromMillis(un,Pe).shiftTo(...pn).plus(_i):_i}(St?this:H,St?H:this,It,pt);return St?pn.negate():pn}diffNow(H="milliseconds",be={}){return this.diff(ii.now(),H,be)}until(H){return this.isValid?he.fromDateTimes(this,H):this}hasSame(H,be){if(!this.isValid)return!1;const Pe=H.valueOf(),pt=this.setZone(H.zone,{keepLocalTime:!0});return pt.startOf(be)<=Pe&&Pe<=pt.endOf(be)}equals(H){return this.isValid&&H.isValid&&this.valueOf()===H.valueOf()&&this.zone.equals(H.zone)&&this.loc.equals(H.loc)}toRelative(H={}){if(!this.isValid)return null;const be=H.base||ii.fromObject({},{zone:this.zone}),Pe=H.padding?this<be?-H.padding:H.padding:0;let pt=["years","months","days","hours","minutes","seconds"],It=H.unit;return Array.isArray(H.unit)&&(pt=H.unit,It=void 0),Ta(be,this.plus(Pe),{...H,numeric:"always",units:pt,unit:It})}toRelativeCalendar(H={}){return this.isValid?Ta(H.base||ii.fromObject({},{zone:this.zone}),this,{...H,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...H){if(!H.every(ii.isDateTime))throw new f("min requires all arguments be DateTimes");return qn(H,be=>be.valueOf(),Math.min)}static max(...H){if(!H.every(ii.isDateTime))throw new f("max requires all arguments be DateTimes");return qn(H,be=>be.valueOf(),Math.max)}static fromFormatExplain(H,be,Pe={}){const{locale:pt=null,numberingSystem:It=null}=Pe;return ot(oe.fromOpts({locale:pt,numberingSystem:It,defaultToEN:!0}),H,be)}static fromStringExplain(H,be,Pe={}){return ii.fromFormatExplain(H,be,Pe)}static get DATE_SHORT(){return R}static get DATE_MED(){return k}static get DATE_MED_WITH_WEEKDAY(){return O}static get DATE_FULL(){return P}static get DATE_HUGE(){return U}static get TIME_SIMPLE(){return W}static get TIME_WITH_SECONDS(){return M}static get TIME_WITH_SHORT_OFFSET(){return B}static get TIME_WITH_LONG_OFFSET(){return V}static get TIME_24_SIMPLE(){return Q}static get TIME_24_WITH_SECONDS(){return Y}static get TIME_24_WITH_SHORT_OFFSET(){return fe}static get TIME_24_WITH_LONG_OFFSET(){return J}static get DATETIME_SHORT(){return ee}static get DATETIME_SHORT_WITH_SECONDS(){return G}static get DATETIME_MED(){return E}static get DATETIME_MED_WITH_SECONDS(){return te}static get DATETIME_MED_WITH_WEEKDAY(){return $}static get DATETIME_FULL(){return ue}static get DATETIME_FULL_WITH_SECONDS(){return me}static get DATETIME_HUGE(){return we}static get DATETIME_HUGE_WITH_SECONDS(){return ye}}function xo(xe){if(ii.isDateTime(xe))return xe;if(xe&&xe.valueOf&&Gt(xe.valueOf()))return ii.fromJSDate(xe);if(xe&&"object"==typeof xe)return ii.fromObject(xe);throw new f(`Unknown datetime argument: ${xe}, of type ${typeof xe}`)}},5241:(nt,_e,m)=>{"use strict";m.d(_e,{Zf:()=>U,gd:()=>P,fx:()=>M,U_:()=>W});var n=m(4650),e=m(1607),h=m(6895),S=m(7340);const y="400ms cubic-bezier(0.4,0.0,0.2,1)",w=[(0,S.oB)({height:0,visibility:"hidden"}),(0,S.jt)(y,(0,S.oB)({height:"*",visibility:"visible"}))],f=[(0,S.oB)({height:"*",visibility:"visible"}),(0,S.jt)(y,(0,S.oB)({height:0,visibility:"hidden"}))];let x=(()=>{class B{constructor(Q,Y,fe){this._el=Q,this._renderer=Y,this.collapsed=new n.vpe,this.collapses=new n.vpe,this.expanded=new n.vpe,this.expands=new n.vpe,this.isExpanded=!0,this.collapseNewValue=!0,this.isCollapsed=!1,this.isCollapse=!0,this.isCollapsing=!1,this.isAnimated=!1,this._display="block",this._stylesLoaded=!1,this._COLLAPSE_ACTION_NAME="collapse",this._EXPAND_ACTION_NAME="expand",this._factoryCollapseAnimation=fe.build(f),this._factoryExpandAnimation=fe.build(w)}set display(Q){this._display=Q,"none"!==Q?this.isAnimated?this.toggle():this.show():this.hide()}set collapse(Q){this.collapseNewValue=Q,(!this._player||this._isAnimationDone)&&(this.isExpanded=Q,this.toggle())}get collapse(){return this.isExpanded}ngAfterViewChecked(){this._stylesLoaded=!0,this._player&&this._isAnimationDone&&(this._player.reset(),this._renderer.setStyle(this._el.nativeElement,"height","*"))}toggle(){this.isExpanded?this.hide():this.show()}hide(){this.isCollapsing=!0,this.isExpanded=!1,this.isCollapsed=!0,this.isCollapsing=!1,this.collapses.emit(this),this._isAnimationDone=!1,this.animationRun(this.isAnimated,this._COLLAPSE_ACTION_NAME)(()=>{this._isAnimationDone=!0,this.collapseNewValue!==this.isCollapsed&&this.isAnimated?this.show():(this.collapsed.emit(this),this._renderer.setStyle(this._el.nativeElement,"display","none"))})}show(){this._renderer.setStyle(this._el.nativeElement,"display",this._display),this.isCollapsing=!0,this.isExpanded=!0,this.isCollapsed=!1,this.isCollapsing=!1,this.expands.emit(this),this._isAnimationDone=!1,this.animationRun(this.isAnimated,this._EXPAND_ACTION_NAME)(()=>{this._isAnimationDone=!0,this.collapseNewValue!==this.isCollapsed&&this.isAnimated?this.hide():(this.expanded.emit(this),this._renderer.removeStyle(this._el.nativeElement,"overflow"))})}animationRun(Q,Y){if(!Q||!this._stylesLoaded)return J=>J();this._renderer.setStyle(this._el.nativeElement,"overflow","hidden"),this._renderer.addClass(this._el.nativeElement,"collapse");const fe=Y===this._EXPAND_ACTION_NAME?this._factoryExpandAnimation:this._factoryCollapseAnimation;return this._player&&this._player.reset(),this._player=fe.create(this._el.nativeElement),this._player.play(),J=>{var ee;return null===(ee=this._player)||void 0===ee?void 0:ee.onDone(J)}}}return B.\u0275fac=function(Q){return new(Q||B)(n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(S._j))},B.\u0275dir=n.lG2({type:B,selectors:[["","collapse",""]],hostVars:9,hostBindings:function(Q,Y){2&Q&&(n.uIk("aria-hidden",Y.isCollapsed),n.ekj("collapse",Y.isCollapse)("in",Y.isExpanded)("show",Y.isExpanded)("collapsing",Y.isCollapsing))},inputs:{display:"display",isAnimated:"isAnimated",collapse:"collapse"},outputs:{collapsed:"collapsed",collapses:"collapses",expanded:"expanded",expands:"expands"},exportAs:["bs-collapse"]}),B})(),b=(()=>{class B{static forRoot(){return{ngModule:B,providers:[]}}}return B.\u0275fac=function(Q){return new(Q||B)},B.\u0275mod=n.oAB({type:B}),B.\u0275inj=n.cJS({}),B})();const g=["*"],N=function(B){return{"text-muted":B}};function R(B,V){if(1&B&&(n.TgZ(0,"button",7),n._uU(1),n.qZA()),2&B){const Q=n.oxw();n.Q6J("ngClass",n.VKq(2,N,Q.isDisabled)),n.xp6(1),n.hij(" ",Q.heading," ")}}const k=[[["","accordion-heading",""]],"*"],O=["[accordion-heading]","*"];let P=(()=>{class B{constructor(){this.closeOthers=!1,this.isAnimated=!1}}return B.\u0275fac=function(Q){return new(Q||B)},B.\u0275prov=n.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})(),U=(()=>{class B{constructor(Q){this.isAnimated=!1,this.closeOthers=!1,this.groups=[],Object.assign(this,Q)}closeOtherPanels(Q){!this.closeOthers||this.groups.forEach(Y=>{Y!==Q&&(Y.isOpen=!1)})}addGroup(Q){Q.isAnimated=this.isAnimated,this.groups.push(Q)}removeGroup(Q){const Y=this.groups.indexOf(Q);-1!==Y&&this.groups.splice(Y,1)}}return B.\u0275fac=function(Q){return new(Q||B)(n.Y36(P))},B.\u0275cmp=n.Xpm({type:B,selectors:[["accordion"]],hostAttrs:["role","tablist",1,"panel-group",2,"display","block"],hostVars:1,hostBindings:function(Q,Y){2&Q&&n.uIk("aria-multiselectable",Y.closeOthers)},inputs:{isAnimated:"isAnimated",closeOthers:"closeOthers"},ngContentSelectors:g,decls:1,vars:0,template:function(Q,Y){1&Q&&(n.F$t(),n.Hsn(0))},encapsulation:2}),B})(),W=(()=>{class B{constructor(Q){this.isAnimated=!1,this.panelClass="panel-default",this.isDisabled=!1,this.isOpenChange=new n.vpe,this._isOpen=!1,this.accordion=Q}get isOpen(){return this._isOpen}set isOpen(Q){Q!==this.isOpen&&(Q&&this.accordion.closeOtherPanels(this),this._isOpen=Q,Promise.resolve(null).then(()=>{this.isOpenChange.emit(Q)}))}get isBs3(){return(0,e.XA)()}ngOnInit(){this.accordion.addGroup(this)}ngOnDestroy(){this.accordion.removeGroup(this)}toggleOpen(){this.isDisabled||(this.isOpen=!this.isOpen)}}return B.\u0275fac=function(Q){return new(Q||B)(n.Y36(U))},B.\u0275cmp=n.Xpm({type:B,selectors:[["accordion-group"],["accordion-panel"]],hostAttrs:[1,"panel",2,"display","block"],hostVars:2,hostBindings:function(Q,Y){2&Q&&n.ekj("panel-open",Y.isOpen)},inputs:{heading:"heading",panelClass:"panelClass",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange"},ngContentSelectors:O,decls:9,vars:6,consts:[[1,"panel","card",3,"ngClass"],["role","tab",1,"panel-heading","card-header",3,"ngClass","click"],[1,"panel-title"],["role","button",1,"accordion-toggle"],["class","btn btn-link","type","button",3,"ngClass",4,"ngIf"],["role","tabpanel",1,"panel-collapse","collapse",3,"collapse","isAnimated"],[1,"panel-body","card-block","card-body"],["type","button",1,"btn","btn-link",3,"ngClass"]],template:function(Q,Y){1&Q&&(n.F$t(k),n.TgZ(0,"div",0)(1,"div",1),n.NdJ("click",function(){return Y.toggleOpen()}),n.TgZ(2,"div",2)(3,"div",3),n.YNc(4,R,2,4,"button",4),n.Hsn(5),n.qZA()()(),n.TgZ(6,"div",5)(7,"div",6),n.Hsn(8,1),n.qZA()()()),2&Q&&(n.Q6J("ngClass",Y.panelClass),n.xp6(1),n.Q6J("ngClass",Y.isDisabled?"panel-disabled":"panel-enabled"),n.xp6(2),n.uIk("aria-expanded",Y.isOpen),n.xp6(1),n.Q6J("ngIf",Y.heading),n.xp6(2),n.Q6J("collapse",!Y.isOpen)("isAnimated",Y.isAnimated))},dependencies:[h.mk,h.O5,x],styles:["[_nghost-%COMP%]   .card-header.panel-enabled[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .card-header.panel-disabled[_ngcontent-%COMP%]   .btn.btn-link[_ngcontent-%COMP%]{cursor:default;text-decoration:none}"]}),B})(),M=(()=>{class B{static forRoot(){return{ngModule:B,providers:[]}}}return B.\u0275fac=function(Q){return new(Q||B)},B.\u0275mod=n.oAB({type:B}),B.\u0275inj=n.cJS({imports:[h.ez,b]}),B})()},2381:(nt,_e,m)=>{"use strict";m.d(_e,{oj:()=>x});var n=m(4650),e=m(1607),h=m(8664),S=m(6895);class w{constructor(g,N,R){this.nodes=g,this.viewRef=N,this.componentRef=R}}class f{constructor(g,N,R,k,O,P,U,W,M){this._viewContainerRef=g,this._renderer=N,this._elementRef=R,this._injector=k,this._componentFactoryResolver=O,this._ngZone=P,this._applicationRef=U,this._posService=W,this._document=M,this.onBeforeShow=new n.vpe,this.onShown=new n.vpe,this.onBeforeHide=new n.vpe,this.onHidden=new n.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(g){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(g),this}to(g){return this.container=g||this.container,this}position(g){return g?(this.attachment=g.attachment||this.attachment,this._elementRef=g.target||this._elementRef,this):this}provide(g){return this._providers.push(g),this}show(g={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(g.content,g.context,g.initialState);const N=n.zs3.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(N,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,g),this.container instanceof n.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&typeof this._document<"u"){const R=this._document.querySelector(this.container)||this._document.querySelector(this.containerDefaultSelector);if(!R)return;R.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(g.id?{id:g.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(g){var N,R,k,O,P,U;if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const W=this._componentRef.location.nativeElement;return null===(N=W.parentNode)||void 0===N||N.removeChild(W),null===(R=this._contentRef)||void 0===R||null===(k=R.componentRef)||void 0===k||k.destroy(),this._viewContainerRef&&null!==(O=this._contentRef)&&void 0!==O&&O.viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),null===(P=this._contentRef)||void 0===P||null===(U=P.viewRef)||void 0===U||U.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(g?{id:g}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(g){var N;this.triggers=g.triggers||this.triggers,this._listenOpts.outsideClick=g.outsideClick,this._listenOpts.outsideEsc=g.outsideEsc,g.target=g.target||(null===(N=this._elementRef)||void 0===N?void 0:N.nativeElement);const R=this._listenOpts.hide=()=>g.hide?g.hide():void this.hide(),k=this._listenOpts.show=P=>{g.show?g.show(P):this.show(P),P()};return this._renderer&&(this._unregisterListenersFn=(0,e.wo)(this._renderer,{target:g.target,triggers:g.triggers,show:k,hide:R,toggle:P=>{this.isShown?R():k(P)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(g,N){return g&&N&&(this._inlineViewRef=g.createEmbeddedView(N)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const g=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=(0,e.Rg)(this._renderer,{targets:[g,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=(0,e.C)(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{var g;this._posService.position({element:null===(g=this._componentRef)||void 0===g?void 0:g.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(g,N,R){if(!g)return new w([]);if(g instanceof n.Rgc){if(this._viewContainerRef){const P=this._viewContainerRef.createEmbeddedView(g,N);return P.markForCheck(),new w([P.rootNodes],P)}const O=g.createEmbeddedView({});return this._applicationRef.attachView(O),new w([O.rootNodes],O)}if("function"==typeof g){const O=this._componentFactoryResolver.resolveComponentFactory(g),P=n.zs3.create({providers:this._providers,parent:this._injector}),U=O.create(P);return Object.assign(U.instance,R),this._applicationRef.attachView(U.hostView),new w([[U.location.nativeElement]],U.hostView,U)}const k=this._renderer?[this._renderer.createText(`${g}`)]:[];return new w([k])}}let x=(()=>{class b{constructor(N,R,k,O,P,U){this._componentFactoryResolver=N,this._ngZone=R,this._injector=k,this._posService=O,this._applicationRef=P,this._document=U}createLoader(N,R,k){return new f(R,k,N,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService,this._document)}}return b.\u0275fac=function(N){return new(N||b)(n.LFG(n._Vd),n.LFG(n.R0b),n.LFG(n.zs3),n.LFG(h.sA),n.LFG(n.z2F),n.LFG(S.K0))},b.\u0275prov=n.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},388:(nt,_e,m)=>{"use strict";m.d(_e,{tT:()=>en,oB:()=>ft,zk:()=>Dt});var n=m(4650),e=m(1607),h=m(6895),S=m(5698);let w,y=(()=>{class X{constructor(){this._focusTrapStack=[]}register(ae){this._focusTrapStack=this._focusTrapStack.filter(je=>je!==ae);let Be=this._focusTrapStack;Be.length&&Be[Be.length-1]._disable(),Be.push(ae),ae._enable()}deregister(ae){ae._disable();const Be=this._focusTrapStack,je=Be.indexOf(ae);-1!==je&&(Be.splice(je,1),Be.length&&Be[Be.length-1]._enable())}}return X.\u0275fac=function(ae){return new(ae||X)},X.\u0275prov=n.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})();try{w=typeof Intl<"u"&&Intl.v8BreakIterator}catch{w=!1}let f=(()=>{class X{constructor(ae){this._platformId=ae,this.isBrowser=this._platformId?(0,h.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!w)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return X.\u0275fac=function(ae){return new(ae||X)(n.LFG(n.Lbi))},X.\u0275prov=n.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})(),b=(()=>{class X{constructor(ae){this._platform=ae}isDisabled(ae){return ae.hasAttribute("disabled")}isVisible(ae){return function N(X){return!!(X.offsetWidth||X.offsetHeight||"function"==typeof X.getClientRects&&X.getClientRects().length)}(ae)&&"visible"===getComputedStyle(ae).visibility}isTabbable(ae){if(!this._platform.isBrowser)return!1;const Be=function g(X){try{return X.frameElement}catch{return null}}(function Q(X){return X.ownerDocument&&X.ownerDocument.defaultView||window}(ae));if(Be&&(-1===M(Be)||!this.isVisible(Be)))return!1;let je=ae.nodeName.toLowerCase(),ke=M(ae);return ae.hasAttribute("contenteditable")?-1!==ke:!("iframe"===je||"object"===je||this._platform.WEBKIT&&this._platform.IOS&&!function B(X){let j=X.nodeName.toLowerCase(),ae="input"===j&&X.type;return"text"===ae||"password"===ae||"select"===j||"textarea"===j}(ae))&&("audio"===je?!!ae.hasAttribute("controls")&&-1!==ke:"video"===je?-1!==ke&&(null!==ke||this._platform.FIREFOX||ae.hasAttribute("controls")):ae.tabIndex>=0)}isFocusable(ae,Be){return function V(X){return!function k(X){return function P(X){return"input"==X.nodeName.toLowerCase()}(X)&&"hidden"==X.type}(X)&&(function R(X){let j=X.nodeName.toLowerCase();return"input"===j||"select"===j||"button"===j||"textarea"===j}(X)||function O(X){return function U(X){return"a"==X.nodeName.toLowerCase()}(X)&&X.hasAttribute("href")}(X)||X.hasAttribute("contenteditable")||W(X))}(ae)&&!this.isDisabled(ae)&&(Be?.ignoreVisibility||this.isVisible(ae))}}return X.\u0275fac=function(ae){return new(ae||X)(n.LFG(f))},X.\u0275prov=n.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})();function W(X){if(!X.hasAttribute("tabindex")||void 0===X.tabIndex)return!1;let j=X.getAttribute("tabindex");return"-32768"!=j&&!(!j||isNaN(parseInt(j,10)))}function M(X){if(!W(X))return null;const j=parseInt(X.getAttribute("tabindex")||"",10);return isNaN(j)?-1:j}function Y(X){return null!=X&&"false"!=`${X}`}class fe{constructor(j,ae,Be,je,ke=!1){this._element=j,this._checker=ae,this._ngZone=Be,this._document=je,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,ke||this.attachAnchors()}get enabled(){return this._enabled}set enabled(j){this._enabled=j,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(j,this._startAnchor),this._toggleAnchorTabIndex(j,this._endAnchor))}destroy(){const j=this._startAnchor,ae=this._endAnchor;j&&(j.removeEventListener("focus",this.startAnchorListener),j.parentNode&&j.parentNode.removeChild(j)),ae&&(ae.removeEventListener("focus",this.endAnchorListener),ae.parentNode&&ae.parentNode.removeChild(ae)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(){return new Promise(j=>{this._executeOnStable(()=>j(this.focusInitialElement()))})}focusFirstTabbableElementWhenReady(){return new Promise(j=>{this._executeOnStable(()=>j(this.focusFirstTabbableElement()))})}focusLastTabbableElementWhenReady(){return new Promise(j=>{this._executeOnStable(()=>j(this.focusLastTabbableElement()))})}_getRegionBoundary(j){let ae=this._element.querySelectorAll(`[cdk-focus-region-${j}], [cdkFocusRegion${j}], [cdk-focus-${j}]`);for(let Be=0;Be<ae.length;Be++)ae[Be].hasAttribute(`cdk-focus-${j}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${j}', use 'cdkFocusRegion${j}' instead. The deprecated attribute will be removed in 8.0.0.`,ae[Be]):ae[Be].hasAttribute(`cdk-focus-region-${j}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${j}', use 'cdkFocusRegion${j}' instead. The deprecated attribute will be removed in 8.0.0.`,ae[Be]);return"start"==j?ae.length?ae[0]:this._getFirstTabbableElement(this._element):ae.length?ae[ae.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(){const j=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(j){if(j.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",j),!this._checker.isFocusable(j)){const ae=this._getFirstTabbableElement(j);return ae?.focus(),!!ae}return j.focus(),!0}return this.focusFirstTabbableElement()}focusFirstTabbableElement(){const j=this._getRegionBoundary("start");return j&&j.focus(),!!j}focusLastTabbableElement(){const j=this._getRegionBoundary("end");return j&&j.focus(),!!j}hasAttached(){return this._hasAttached}_getFirstTabbableElement(j){if(this._checker.isFocusable(j)&&this._checker.isTabbable(j))return j;let ae=j.children||j.childNodes;for(let Be=0;Be<ae.length;Be++){let je=ae[Be].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(ae[Be]):null;if(je)return je}return null}_getLastTabbableElement(j){if(this._checker.isFocusable(j)&&this._checker.isTabbable(j))return j;let ae=j.children||j.childNodes;for(let Be=ae.length-1;Be>=0;Be--){let je=ae[Be].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(ae[Be]):null;if(je)return je}return null}_createAnchor(){const j=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,j),j.classList.add("cdk-visually-hidden"),j.classList.add("cdk-focus-trap-anchor"),j.setAttribute("aria-hidden","true"),j}_toggleAnchorTabIndex(j,ae){j?ae.setAttribute("tabindex","0"):ae.removeAttribute("tabindex")}toggleAnchors(j){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(j,this._startAnchor),this._toggleAnchorTabIndex(j,this._endAnchor))}_executeOnStable(j){this._ngZone.isStable?j():this._ngZone.onStable.pipe((0,S.q)(1)).subscribe(j)}}let J=(()=>{class X{constructor(ae,Be,je){this._checker=ae,this._ngZone=Be,this._document=je}create(ae,Be=!1){return new fe(ae,this._checker,this._ngZone,this._document,Be)}}return X.\u0275fac=function(ae){return new(ae||X)(n.LFG(b),n.LFG(n.R0b),n.LFG(h.K0))},X.\u0275prov=n.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})(),ee=(()=>{class X{constructor(ae,Be,je){this._elementRef=ae,this._focusTrapFactory=Be,this._previouslyFocusedElement=null,this._autoCapture=!1,this._document=je,this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0)}get enabled(){return this.focusTrap.enabled}set enabled(ae){this.focusTrap.enabled=Y(ae)}get autoCapture(){return this._autoCapture}set autoCapture(ae){this._autoCapture=Y(ae)}ngOnDestroy(){this.focusTrap.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap.hasAttached()||this.focusTrap.attachAnchors()}ngOnChanges(ae){const Be=ae.autoCapture;Be&&!Be.firstChange&&this.autoCapture&&this.focusTrap.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=this._document.activeElement,this.focusTrap.focusInitialElementWhenReady()}}return X.\u0275fac=function(ae){return new(ae||X)(n.Y36(n.SBq),n.Y36(J),n.Y36(h.K0))},X.\u0275dir=n.lG2({type:X,selectors:[["","focusTrap",""]],inputs:{enabled:["cdkTrapFocus","enabled"],autoCapture:["cdkTrapFocusAutoCapture","autoCapture"]},exportAs:["focusTrap"],features:[n.TTD]}),X})(),G=(()=>{class X{static forRoot(){return{ngModule:X,providers:[y,f,b]}}}return X.\u0275fac=function(ae){return new(ae||X)},X.\u0275mod=n.oAB({type:X}),X.\u0275inj=n.cJS({imports:[h.ez]}),X})();var E=m(2381),te=m(8664);const $=["*"];let ue=(()=>{class X{constructor(){this.hide=()=>{},this.setClass=()=>{}}}return X.\u0275fac=function(ae){return new(ae||X)},X.\u0275prov=n.Yz7({token:X,factory:X.\u0275fac,providedIn:"platform"}),X})(),we=(()=>{class X{}return X.\u0275fac=function(ae){return new(ae||X)},X.\u0275prov=n.Yz7({token:X,factory:X.\u0275fac,providedIn:"platform"}),X})();const ye={backdrop:!0,keyboard:!0,focus:!0,show:!1,ignoreBackdropClick:!1,class:"",animated:!0,initialState:{},closeInterceptor:void 0},qe=new n.OlP("override-default-config"),De_OPEN="modal-open";let tt=(()=>{class X{constructor(ae,Be,je){this._element=Be,this._renderer=je,this.isShown=!1,this.isAnimated=!1,this.isModalHiding=!1,this.clickStartedInContent=!1,this.config=Object.assign({},ae)}ngOnInit(){this.isAnimated&&this._renderer.addClass(this._element.nativeElement,"fade"),this._renderer.setStyle(this._element.nativeElement,"display","block"),setTimeout(()=>{this.isShown=!0,this._renderer.addClass(this._element.nativeElement,(0,e.XA)()?"in":"show")},this.isAnimated?150:0),document&&document.body&&(this.bsModalService&&1===this.bsModalService.getModalsCount()&&(this.bsModalService.checkScrollbar(),this.bsModalService.setScrollbar()),this._renderer.addClass(document.body,De_OPEN),this._renderer.setStyle(document.body,"overflow-y","hidden")),this._element.nativeElement&&this._element.nativeElement.focus()}onClickStarted(ae){this.clickStartedInContent=ae.target!==this._element.nativeElement}onClickStop(ae){var Be;this.config.ignoreBackdropClick||"static"===this.config.backdrop||ae.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(null===(Be=this.bsModalService)||void 0===Be||Be.setDismissReason("backdrop-click"),this.hide())}onPopState(){var ae;null===(ae=this.bsModalService)||void 0===ae||ae.setDismissReason("browser-back-navigation-clicked"),this.hide()}onEsc(ae){var Be,je;this.isShown&&((27===ae.keyCode||"Escape"===ae.key)&&ae.preventDefault(),this.config.keyboard&&this.level===(null===(Be=this.bsModalService)||void 0===Be?void 0:Be.getModalsCount()))&&(null===(je=this.bsModalService)||void 0===je||je.setDismissReason("esc"),this.hide())}ngOnDestroy(){this.isShown&&this._hide()}hide(){if(!this.isModalHiding&&this.isShown){if(this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.isModalHiding=!0,this._renderer.removeClass(this._element.nativeElement,(0,e.XA)()?"in":"show"),setTimeout(()=>{var ae,Be;this.isShown=!1,document&&document.body&&1===(null===(ae=this.bsModalService)||void 0===ae?void 0:ae.getModalsCount())&&(this._renderer.removeClass(document.body,De_OPEN),this._renderer.setStyle(document.body,"overflow-y","")),null===(Be=this.bsModalService)||void 0===Be||Be.hide(this.config.id),this.isModalHiding=!1},this.isAnimated?300:0)}}return X.\u0275fac=function(ae){return new(ae||X)(n.Y36(we),n.Y36(n.SBq),n.Y36(n.Qsj))},X.\u0275cmp=n.Xpm({type:X,selectors:[["modal-container"]],hostAttrs:["role","dialog","tabindex","-1",1,"modal"],hostVars:3,hostBindings:function(ae,Be){1&ae&&n.NdJ("mousedown",function(ke){return Be.onClickStarted(ke)})("click",function(ke){return Be.onClickStop(ke)})("popstate",function(){return Be.onPopState()},!1,n.Jf7)("keydown.esc",function(ke){return Be.onEsc(ke)},!1,n.Jf7),2&ae&&n.uIk("aria-modal",!0)("aria-labelledby",Be.config.ariaLabelledBy)("aria-describedby",Be.config.ariaDescribedby)},ngContentSelectors:$,decls:3,vars:2,consts:[["role","document","focusTrap",""],[1,"modal-content"]],template:function(ae,Be){1&ae&&(n.F$t(),n.TgZ(0,"div",0)(1,"div",1),n.Hsn(2),n.qZA()()),2&ae&&n.Tol("modal-dialog"+(Be.config.class?" "+Be.config.class:""))},dependencies:[ee],encapsulation:2}),X})(),_t=(()=>{class X{constructor(ae,Be){this._isAnimated=!1,this._isShown=!1,this.element=ae,this.renderer=Be}get isAnimated(){return this._isAnimated}set isAnimated(ae){this._isAnimated=ae}get isShown(){return this._isShown}set isShown(ae){this._isShown=ae,ae?this.renderer.addClass(this.element.nativeElement,"in"):this.renderer.removeClass(this.element.nativeElement,"in"),(0,e.XA)()||(ae?this.renderer.addClass(this.element.nativeElement,"show"):this.renderer.removeClass(this.element.nativeElement,"show"))}ngOnInit(){this.isAnimated&&(this.renderer.addClass(this.element.nativeElement,"fade"),e.cQ.reflow(this.element.nativeElement)),this.isShown=!0}}return X.\u0275fac=function(ae){return new(ae||X)(n.Y36(n.SBq),n.Y36(n.Qsj))},X.\u0275cmp=n.Xpm({type:X,selectors:[["bs-modal-backdrop"]],hostAttrs:[1,"modal-backdrop"],decls:0,vars:0,template:function(ae,Be){},encapsulation:2}),X})(),ft=(()=>{class X{constructor(ae,Be,je,ke,Re){this._element=ae,this._renderer=je,this.onShow=new n.vpe,this.onShown=new n.vpe,this.onHide=new n.vpe,this.onHidden=new n.vpe,this._isShown=!1,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.timerHideModal=0,this.timerRmBackDrop=0,this.isNested=!1,this.clickStartedInContent=!1,this._backdrop=ke.createLoader(ae,Be,je),this._config=Re||ye}set config(ae){this._config=this.getConfig(ae)}get config(){return this._config}get isShown(){return this._isShown}onClickStarted(ae){this.clickStartedInContent=ae.target!==this._element.nativeElement}onClickStop(ae){this.config.ignoreBackdropClick||"static"===this.config.backdrop||ae.target!==this._element.nativeElement||this.clickStartedInContent?this.clickStartedInContent=!1:(this.dismissReason="backdrop-click",this.hide(ae))}onEsc(ae){!this._isShown||((27===ae.keyCode||"Escape"===ae.key)&&ae.preventDefault(),this.config.keyboard&&(this.dismissReason="esc",this.hide()))}ngOnDestroy(){this._isShown&&(this._isShown=!1,this.hideModal(),this._backdrop.dispose())}ngOnInit(){this._config=this._config||this.getConfig(),setTimeout(()=>{this._config.show&&this.show()},0)}toggle(){return this._isShown?this.hide():this.show()}show(){this.dismissReason=void 0,this.onShow.emit(this),!this._isShown&&(clearTimeout(this.timerHideModal),clearTimeout(this.timerRmBackDrop),this._isShown=!0,this.checkScrollbar(),this.setScrollbar(),e.tj&&e.tj.body&&(e.tj.body.classList.contains(De_OPEN)?this.isNested=!0:(this._renderer.addClass(e.tj.body,De_OPEN),this._renderer.setStyle(e.tj.body,"overflow-y","hidden"))),this.showBackdrop(()=>{this.showElement()}))}hide(ae){if(this._isShown){if(ae&&ae.preventDefault(),this.config.closeInterceptor)return void this.config.closeInterceptor().then(()=>this._hide(),()=>{});this._hide()}}_hide(){this.onHide.emit(this),e.u9.clearTimeout(this.timerHideModal),e.u9.clearTimeout(this.timerRmBackDrop),this._isShown=!1,this._renderer.removeClass(this._element.nativeElement,"in"),(0,e.XA)()||this._renderer.removeClass(this._element.nativeElement,"show"),this._config.animated?this.timerHideModal=e.u9.setTimeout(()=>this.hideModal(),300):this.hideModal()}getConfig(ae){return Object.assign({},this._config,ae)}showElement(){(!this._element.nativeElement.parentNode||this._element.nativeElement.parentNode.nodeType!==Node.ELEMENT_NODE)&&e.tj&&e.tj.body&&e.tj.body.appendChild(this._element.nativeElement),this._renderer.setAttribute(this._element.nativeElement,"aria-hidden","false"),this._renderer.setAttribute(this._element.nativeElement,"aria-modal","true"),this._renderer.setStyle(this._element.nativeElement,"display","block"),this._renderer.setProperty(this._element.nativeElement,"scrollTop",0),this._config.animated&&e.cQ.reflow(this._element.nativeElement),this._renderer.addClass(this._element.nativeElement,"in"),(0,e.XA)()||this._renderer.addClass(this._element.nativeElement,"show");const ae=()=>{this._config.focus&&this._element.nativeElement.focus(),this.onShown.emit(this)};this._config.animated?setTimeout(ae,300):ae()}hideModal(){this._renderer.setAttribute(this._element.nativeElement,"aria-hidden","true"),this._renderer.setStyle(this._element.nativeElement,"display","none"),this.showBackdrop(()=>{this.isNested||(e.tj&&e.tj.body&&(this._renderer.removeClass(e.tj.body,De_OPEN),this._renderer.setStyle(e.tj.body,"overflow-y","")),this.resetScrollbar()),this.resetAdjustments(),this.focusOtherModal(),this.onHidden.emit(this)})}showBackdrop(ae){if(!this._isShown||!this.config.backdrop||this.backdrop&&this.backdrop.instance.isShown)if(!this._isShown&&this.backdrop){this.backdrop.instance.isShown=!1;const Be=()=>{this.removeBackdrop(),ae&&ae()};this.backdrop.instance.isAnimated?this.timerRmBackDrop=e.u9.setTimeout(Be,150):Be()}else ae&&ae();else{if(this.removeBackdrop(),this._backdrop.attach(_t).to("body").show({isAnimated:this._config.animated}),this.backdrop=this._backdrop._componentRef,!ae)return;if(!this._config.animated)return void ae();setTimeout(ae,150)}}removeBackdrop(){this._backdrop.hide()}focusOtherModal(){if(null==this._element.nativeElement.parentElement)return;const ae=this._element.nativeElement.parentElement.querySelectorAll(".in[bsModal]");!ae.length||ae[ae.length-1].focus()}resetAdjustments(){this._renderer.setStyle(this._element.nativeElement,"paddingLeft",""),this._renderer.setStyle(this._element.nativeElement,"paddingRight","")}checkScrollbar(){this.isBodyOverflowing=e.tj.body.clientWidth<e.u9.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!e.tj||(this.originalBodyPadding=parseInt(e.u9.getComputedStyle(e.tj.body).getPropertyValue("padding-right")||0,10),this.isBodyOverflowing&&(e.tj.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){e.tj.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const ae=this._renderer.createElement("div");this._renderer.addClass(ae,"modal-scrollbar-measure"),this._renderer.appendChild(e.tj.body,ae);const Be=ae.offsetWidth-ae.clientWidth;return this._renderer.removeChild(e.tj.body,ae),Be}}return X.\u0275fac=function(ae){return new(ae||X)(n.Y36(n.SBq),n.Y36(n.s_b),n.Y36(n.Qsj),n.Y36(E.oj),n.Y36(qe,8))},X.\u0275dir=n.lG2({type:X,selectors:[["","bsModal",""]],hostBindings:function(ae,Be){1&ae&&n.NdJ("mousedown",function(ke){return Be.onClickStarted(ke)})("mouseup",function(ke){return Be.onClickStop(ke)})("keydown.esc",function(ke){return Be.onEsc(ke)})},inputs:{config:"config",closeInterceptor:"closeInterceptor"},outputs:{onShow:"onShow",onShown:"onShown",onHide:"onHide",onHidden:"onHidden"},exportAs:["bs-modal"]}),X})(),qt=1,en=(()=>{class X{constructor(ae,Be,je){this.clf=Be,this.modalDefaultOption=je,this.onShow=new n.vpe,this.onShown=new n.vpe,this.onHide=new n.vpe,this.onHidden=new n.vpe,this.isBodyOverflowing=!1,this.originalBodyPadding=0,this.scrollbarWidth=0,this.modalsCount=0,this.loaders=[],this._backdropLoader=this.clf.createLoader(),this._renderer=ae.createRenderer(null,null),this.config=je?Object.assign({},ye,je):ye}show(ae,Be){this.modalsCount++,this._createLoaders();const je=Be?.id||qt++;return this.config=this.modalDefaultOption?Object.assign({},ye,this.modalDefaultOption,Be):Object.assign({},ye,Be),this.config.id=je,this._showBackdrop(),this.lastDismissReason=void 0,this._showModal(ae)}hide(ae){(1===this.modalsCount||null==ae)&&(this._hideBackdrop(),this.resetScrollbar()),this.modalsCount=this.modalsCount>=1&&null!=ae?this.modalsCount-1:0,setTimeout(()=>{this._hideModal(ae),this.removeLoaders(ae)},this.config.animated?150:0)}_showBackdrop(){const ae=!0===this.config.backdrop||"static"===this.config.backdrop,Be=!this.backdropRef||!this.backdropRef.instance.isShown;1===this.modalsCount&&(this.removeBackdrop(),ae&&Be&&(this._backdropLoader.attach(_t).to("body").show({isAnimated:this.config.animated}),this.backdropRef=this._backdropLoader._componentRef))}_hideBackdrop(){this.backdropRef&&(this.backdropRef.instance.isShown=!1,setTimeout(()=>this.removeBackdrop(),this.config.animated?150:0))}_showModal(ae){const Be=this.loaders[this.loaders.length-1];if(this.config&&this.config.providers)for(const Se of this.config.providers)Be.provide(Se);const je=new ue,ke=Be.provide({provide:we,useValue:this.config}).provide({provide:ue,useValue:je}).attach(tt).to("body");var Re;return je.hide=()=>{var Se;return null===(Se=ke.instance)||void 0===Se?void 0:Se.hide()},je.setClass=Se=>{ke.instance&&(ke.instance.config.class=Se)},je.onHidden=new n.vpe,je.onHide=new n.vpe,this.copyEvent(Be.onBeforeHide,je.onHide),this.copyEvent(Be.onHidden,je.onHidden),ke.show({content:ae,isAnimated:this.config.animated,initialState:this.config.initialState,bsModalService:this,id:this.config.id}),ke.instance&&(ke.instance.level=this.getModalsCount(),je.content=Be.getInnerComponent(),je.id=null===(Re=ke.instance.config)||void 0===Re?void 0:Re.id),je}_hideModal(ae){if(null!=ae){const Be=this.loaders.findIndex(ke=>{var Re;return(null===(Re=ke.instance)||void 0===Re?void 0:Re.config.id)===ae}),je=this.loaders[Be];je&&je.hide(ae)}else this.loaders.forEach(Be=>{Be.instance&&Be.hide(Be.instance.config.id)})}getModalsCount(){return this.modalsCount}setDismissReason(ae){this.lastDismissReason=ae}removeBackdrop(){this._renderer.removeClass(document.body,De_OPEN),this._renderer.setStyle(document.body,"overflow-y",""),this._backdropLoader.hide(),this.backdropRef=void 0}checkScrollbar(){this.isBodyOverflowing=document.body.clientWidth<window.innerWidth,this.scrollbarWidth=this.getScrollbarWidth()}setScrollbar(){!document||(this.originalBodyPadding=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")||"0",10),this.isBodyOverflowing&&(document.body.style.paddingRight=`${this.originalBodyPadding+this.scrollbarWidth}px`))}resetScrollbar(){document.body.style.paddingRight=`${this.originalBodyPadding}px`}getScrollbarWidth(){const ae=this._renderer.createElement("div");this._renderer.addClass(ae,"modal-scrollbar-measure"),this._renderer.appendChild(document.body,ae);const Be=ae.offsetWidth-ae.clientWidth;return this._renderer.removeChild(document.body,ae),Be}_createLoaders(){const ae=this.clf.createLoader();this.copyEvent(ae.onBeforeShow,this.onShow),this.copyEvent(ae.onShown,this.onShown),this.copyEvent(ae.onBeforeHide,this.onHide),this.copyEvent(ae.onHidden,this.onHidden),this.loaders.push(ae)}removeLoaders(ae){if(null!=ae){const Be=this.loaders.findIndex(je=>{var ke;return(null===(ke=je.instance)||void 0===ke?void 0:ke.config.id)===ae});Be>=0&&(this.loaders.splice(Be,1),this.loaders.forEach((je,ke)=>{je.instance&&(je.instance.level=ke+1)}))}else this.loaders.splice(0,this.loaders.length)}copyEvent(ae,Be){ae.subscribe(je=>{Be.emit(this.lastDismissReason||je)})}}return X.\u0275fac=function(ae){return new(ae||X)(n.LFG(n.FYo),n.LFG(E.oj),n.LFG(qe,8))},X.\u0275prov=n.Yz7({token:X,factory:X.\u0275fac,providedIn:"platform"}),X})();G.forRoot();let Dt=(()=>{class X{static forRoot(){return{ngModule:X,providers:[en,E.oj,te.sA]}}static forChild(){return{ngModule:X,providers:[en,E.oj,te.sA]}}}return X.\u0275fac=function(ae){return new(ae||X)},X.\u0275mod=n.oAB({type:X}),X.\u0275inj=n.cJS({imports:[G]}),X})()},8664:(nt,_e,m)=>{"use strict";m.d(_e,{Bz:()=>W,sA:()=>ht});var n=m(1607),e=m(4650),h=m(6895),S=m(7579),y=m(6451),w=m(4968),f=m(9646),x=m(4408),b=m(727);const g={schedule(oe){let ie=requestAnimationFrame,L=cancelAnimationFrame;const{delegate:ne}=g;ne&&(ie=ne.requestAnimationFrame,L=ne.cancelAnimationFrame);const Ne=ie(ze=>{L=void 0,oe(ze)});return new b.w0(()=>L?.(Ne))},requestAnimationFrame(...oe){const{delegate:ie}=g;return(ie?.requestAnimationFrame||requestAnimationFrame)(...oe)},cancelAnimationFrame(...oe){const{delegate:ie}=g;return(ie?.cancelAnimationFrame||cancelAnimationFrame)(...oe)},delegate:void 0};var R=m(7565);const O=new class k extends R.v{flush(ie){this._active=!0;const L=this._scheduled;this._scheduled=void 0;const{actions:ne}=this;let Ne;ie=ie||ne.shift();do{if(Ne=ie.execute(ie.state,ie.delay))break}while((ie=ne[0])&&ie.id===L&&ne.shift());if(this._active=!1,Ne){for(;(ie=ne[0])&&ie.id===L&&ne.shift();)ie.unsubscribe();throw Ne}}}(class N extends x.o{constructor(ie,L){super(ie,L),this.scheduler=ie,this.work=L}requestAsyncId(ie,L,ne=0){return null!==ne&&ne>0?super.requestAsyncId(ie,L,ne):(ie.actions.push(this),ie._scheduled||(ie._scheduled=g.requestAnimationFrame(()=>ie.flush(void 0))))}recycleAsyncId(ie,L,ne=0){if(null!=ne&&ne>0||null==ne&&this.delay>0)return super.recycleAsyncId(ie,L,ne);ie.actions.some(Ne=>Ne.id===L)||(g.cancelAnimationFrame(L),ie._scheduled=void 0)}});var U=(()=>{return(oe=U||(U={})).top="top",oe.bottom="bottom",oe.left="left",oe.right="right",oe.auto="auto",oe.end="right",oe.start="left",oe["top left"]="top left",oe["top right"]="top right",oe["right top"]="right top",oe["right bottom"]="right bottom",oe["bottom right"]="bottom right",oe["bottom left"]="bottom left",oe["left bottom"]="left bottom",oe["left top"]="left top",oe["top start"]="top left",oe["top end"]="top right",oe["end top"]="right top",oe["end bottom"]="right bottom",oe["bottom end"]="bottom right",oe["bottom start"]="bottom left",oe["start bottom"]="start bottom",oe["start top"]="left top",U;var oe})(),W=(()=>{return(oe=W||(W={})).top="top",oe.bottom="bottom",oe.left="start",oe.right="end",oe.auto="auto",oe.end="end",oe.start="start",oe["top left"]="top start",oe["top right"]="top end",oe["right top"]="end top",oe["right bottom"]="end bottom",oe["bottom right"]="bottom end",oe["bottom left"]="bottom start",oe["left bottom"]="start bottom",oe["left top"]="start top",oe["top start"]="top start",oe["top end"]="top end",oe["end top"]="end top",oe["end bottom"]="end bottom",oe["bottom end"]="bottom end",oe["bottom start"]="bottom start",oe["start bottom"]="start bottom",oe["start top"]="start top",W;var oe})();function M(oe,ie){if(1!==oe.nodeType)return[];const ne=oe.ownerDocument.defaultView?.getComputedStyle(oe,null);return ie?ne&&ne[ie]:ne}function B(oe){if(!oe)return document.documentElement;let ne,L=oe?.offsetParent;for(;null===L&&oe.nextElementSibling&&ne!==oe.nextElementSibling;)ne=oe.nextElementSibling,L=ne.offsetParent;const Ne=L&&L.nodeName;return Ne&&"BODY"!==Ne&&"HTML"!==Ne?L&&-1!==["TH","TD","TABLE"].indexOf(L.nodeName)&&"static"===M(L,"position")?B(L):L:ne?ne.ownerDocument.documentElement:document.documentElement}function Q(oe){return null!==oe.parentNode?Q(oe.parentNode):oe}function Y(oe,ie){if(!(oe&&oe.nodeType&&ie&&ie.nodeType))return document.documentElement;const L=oe.compareDocumentPosition(ie)&Node.DOCUMENT_POSITION_FOLLOWING,ne=L?oe:ie,Ne=L?ie:oe,ze=document.createRange();ze.setStart(ne,0),ze.setEnd(Ne,0);const et=ze.commonAncestorContainer;if(oe!==et&&ie!==et||ne.contains(Ne))return function V(oe){const{nodeName:ie}=oe;return"BODY"!==ie&&("HTML"===ie||B(oe.firstElementChild)===oe)}(et)?et:B(et);const Tt=Q(oe);return Tt.host?Y(Tt.host,ie):Y(oe,Q(ie).host)}function fe(oe){if(!oe||!oe.parentElement)return document.documentElement;let ie=oe.parentElement;for(;null!==(L=ie)&&void 0!==L&&L.parentElement&&"none"===M(ie,"transform");){var L;ie=ie.parentElement}return ie||document.documentElement}function J(oe,ie){const L="x"===ie?"Left":"Top",ne="Left"===L?"Right":"Bottom";return parseFloat(oe[`border${L}Width`])+parseFloat(oe[`border${ne}Width`])}function ee(oe,ie,L,ne){return Math.max(ie[`offset${oe}`],ie[`scroll${oe}`],L[`client${oe}`],L[`offset${oe}`],L[`scroll${oe}`],0)}function G(oe){const ie=oe.body,L=oe.documentElement;return{height:ee("Height",ie,L),width:ee("Width",ie,L)}}function E(oe){return{...oe,right:(oe.left||0)+oe.width,bottom:(oe.top||0)+oe.height}}function $(oe){return"number"==typeof oe||"[object Number]"===Object.prototype.toString.call(oe)}function ue(oe){const ie=oe.getBoundingClientRect();if(!(ie&&$(ie.top)&&$(ie.left)&&$(ie.bottom)&&$(ie.right)))return ie;const L={left:ie.left,top:ie.top,width:ie.right-ie.left,height:ie.bottom-ie.top},ne="HTML"===oe.nodeName?G(oe.ownerDocument):void 0,Ne=ne?.width||oe.clientWidth||$(ie.right)&&$(L.left)&&ie.right-L.left||0,ze=ne?.height||oe.clientHeight||$(ie.bottom)&&$(L.top)&&ie.bottom-L.top||0;let et=oe.offsetWidth-Ne,Tt=oe.offsetHeight-ze;if(et||Tt){const Zt=M(oe);et-=J(Zt,"x"),Tt-=J(Zt,"y"),L.width-=et,L.height-=Tt}return E(L)}function me(oe){return"HTML"===oe.nodeName?oe:oe.parentNode||oe.host}function we(oe){if(!oe)return document.body;switch(oe.nodeName){case"HTML":case"BODY":return oe.ownerDocument.body;case"#document":return oe.body}const{overflow:ie,overflowX:L,overflowY:ne}=M(oe);return/(auto|scroll|overlay)/.test(String(ie)+String(ne)+String(L))?oe:we(me(oe))}function ye(oe,ie,L=!1){var ne,Ne,ze,et;const Tt="HTML"===ie.nodeName,Zt=ue(oe),gn=ue(ie),on=(we(oe),M(ie)),Xt=parseFloat(on.borderTopWidth),it=parseFloat(on.borderLeftWidth);var Gt,bt;L&&Tt&&(gn.top=Math.max(null!==(Gt=gn.top)&&void 0!==Gt?Gt:0,0),gn.left=Math.max(null!==(bt=gn.left)&&void 0!==bt?bt:0,0));const jt=E({top:(null!==(ne=Zt.top)&&void 0!==ne?ne:0)-(null!==(Ne=gn.top)&&void 0!==Ne?Ne:0)-Xt,left:(null!==(ze=Zt.left)&&void 0!==ze?ze:0)-(null!==(et=gn.left)&&void 0!==et?et:0)-it,width:Zt.width,height:Zt.height});if(jt.marginTop=0,jt.marginLeft=0,Tt){const ln=parseFloat(on.marginTop),kn=parseFloat(on.marginLeft);$(jt.top)&&(jt.top-=Xt-ln),$(jt.bottom)&&(jt.bottom-=Xt-ln),$(jt.left)&&(jt.left-=it-kn),$(jt.right)&&(jt.right-=it-kn),jt.marginTop=ln,jt.marginLeft=kn}return jt}function qe(oe,ie="top"){const L="top"===ie?"scrollTop":"scrollLeft",ne=oe.nodeName;if("BODY"===ne||"HTML"===ne){const Ne=oe.ownerDocument.documentElement;return(oe.ownerDocument.scrollingElement||Ne)[L]}return oe[L]}function Ge(oe){const ie=oe.nodeName;return"BODY"!==ie&&"HTML"!==ie&&("fixed"===M(oe,"position")||Ge(me(oe)))}function ve(oe,ie,L=0,ne,Ne=!1){let ze={top:0,left:0};const et=Ne?fe(oe):Y(oe,ie);if("viewport"===ne)ze=function De(oe,ie=!1){const L=oe.ownerDocument.documentElement,ne=ye(oe,L),Ne=Math.max(L.clientWidth,window.innerWidth||0),ze=Math.max(L.clientHeight,window.innerHeight||0),et=ie?0:qe(L),Tt=ie?0:qe(L,"left");return E({top:et-Number(ne?.top)+Number(ne?.marginTop),left:Tt-Number(ne?.left)+Number(ne?.marginLeft),width:Ne,height:ze})}(et,Ne);else{let Tt;"scrollParent"===ne?(Tt=we(me(ie)),"BODY"===Tt.nodeName&&(Tt=oe.ownerDocument.documentElement)):Tt="window"===ne?oe.ownerDocument.documentElement:ne;const Zt=ye(Tt,et,Ne);if(Zt&&"HTML"===Tt.nodeName&&!Ge(et)){const{height:gn,width:Yt}=G(oe.ownerDocument);$(ze.top)&&$(Zt.top)&&$(Zt.marginTop)&&(ze.top+=Zt.top-Zt.marginTop),$(ze.top)&&(ze.bottom=Number(gn)+Number(Zt.top)),$(ze.left)&&$(Zt.left)&&$(Zt.marginLeft)&&(ze.left+=Zt.left-Zt.marginLeft),$(ze.top)&&(ze.right=Number(Yt)+Number(Zt.left))}else Zt&&(ze=Zt)}return $(ze.left)&&(ze.left+=L),$(ze.top)&&(ze.top+=L),$(ze.right)&&(ze.right-=L),$(ze.bottom)&&(ze.bottom-=L),ze}function c({width:oe,height:ie}){return oe*ie}function tt(oe,ie,L,ne,Ne=["top","bottom","right","left"],ze="viewport",et=0){var Tt,Zt,gn,Yt,on,Xt,it,Gt,bt,jt,ln,kn;if(-1===oe.indexOf("auto"))return oe;const Tn=ve(L,ne,et,ze),qn={top:{width:null!==(Tt=Tn?.width)&&void 0!==Tt?Tt:0,height:(null!==(Zt=ie?.top)&&void 0!==Zt?Zt:0)-(null!==(gn=Tn?.top)&&void 0!==gn?gn:0)},right:{width:(null!==(Yt=Tn?.right)&&void 0!==Yt?Yt:0)-(null!==(on=ie?.right)&&void 0!==on?on:0),height:null!==(Xt=Tn?.height)&&void 0!==Xt?Xt:0},bottom:{width:null!==(it=Tn?.width)&&void 0!==it?it:0,height:(null!==(Gt=Tn?.bottom)&&void 0!==Gt?Gt:0)-(null!==(bt=ie?.bottom)&&void 0!==bt?bt:0)},left:{width:(null!==(jt=ie.left)&&void 0!==jt?jt:0)-(null!==(ln=Tn?.left)&&void 0!==ln?ln:0),height:null!==(kn=Tn?.height)&&void 0!==kn?kn:0}},ri=Object.keys(qn).map(In=>({position:In,...qn[In],area:c(qn[In])})).sort((In,Fn)=>Fn.area-In.area);let Yn=ri.filter(({width:In,height:Fn})=>In>=L.clientWidth&&Fn>=L.clientHeight);Yn=Yn.filter(({position:In})=>Ne.some(Fn=>Fn===In));const Ft=Yn.length>0?Yn[0].position:ri[0].position,jn=oe.split(" ")[1];return L.className=L.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${(0,n.Wl)().isBs5?W[Ft]:Ft}`),Ft+(jn?`-${jn}`:"")}const ft=(oe,ie=0)=>oe?parseFloat(oe):ie;function qt(oe){const L=oe.ownerDocument.defaultView?.getComputedStyle(oe),ne=ft(L?.marginTop)+ft(L?.marginBottom),Ne=ft(L?.marginLeft)+ft(L?.marginRight);return{width:Number(oe.offsetWidth)+Ne,height:Number(oe.offsetHeight)+ne}}function en(oe,ie,L){return ye(ie,L?fe(oe):Y(oe,ie),L)}function xt(oe,ie,L){var ne,Ne,ze;const et=L.split(" ")[0],Tt=qt(oe),Zt={width:Tt.width,height:Tt.height},gn=-1!==["right","left"].indexOf(et),Yt=gn?"top":"left",on=gn?"left":"top",Xt=gn?"height":"width",it=gn?"width":"height";return Zt[Yt]=(null!==(ne=ie[Yt])&&void 0!==ne?ne:0)+ie[Xt]/2-Tt[Xt]/2,Zt[on]=et===on?(null!==(Ne=ie[on])&&void 0!==Ne?Ne:0)-Tt[it]:null!==(ze=ie[function ct(oe){const ie={left:"right",right:"left",bottom:"top",top:"bottom"};return oe.replace(/left|right|bottom|top/g,L=>ie[L])}(on)])&&void 0!==ze?ze:0,Zt}function Dt(oe,ie){var L;return!(null===(L=oe.modifiers[ie])||void 0===L||!L.enabled)}const X={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function j(oe,ie){return!!(0,n.Wl)().isBs5&&X[ie].includes(oe)}function je(oe,ie,L){!oe||!ie||Object.keys(ie).forEach(ne=>{let Ne="";-1!==["width","height","top","right","bottom","left"].indexOf(ne)&&function te(oe){return""!==oe&&!isNaN(parseFloat(oe))&&isFinite(Number(oe))}(ie[ne])&&(Ne="px"),L?L.setStyle(oe,ne,`${String(ie[ne])}${Ne}`):oe.style[ne]=String(ie[ne])+Ne})}function ke(oe){var ie,L,ne,Ne;let ze=oe.offsets.target;const et=oe.instance.target.querySelector(".arrow");if(!et)return oe;const Tt=-1!==["left","right"].indexOf(oe.placement.split(" ")[0]),Zt=Tt?"height":"width",gn=Tt?"Top":"Left",Yt=gn.toLowerCase(),on=Tt?"left":"top",Xt=Tt?"bottom":"right",it=qt(et)[Zt],Gt=oe.placement.split(" ")[1];var bt,jt;(null!==(ie=oe.offsets.host[Xt])&&void 0!==ie?ie:0)-it<(null!==(L=ze[Yt])&&void 0!==L?L:0)&&(ze[Yt]-=(null!==(bt=ze[Yt])&&void 0!==bt?bt:0)-((null!==(jt=oe.offsets.host[Xt])&&void 0!==jt?jt:0)-it)),Number(oe.offsets.host[Yt])+Number(it)>(null!==(ne=ze[Xt])&&void 0!==ne?ne:0)&&(ze[Yt]+=Number(oe.offsets.host[Yt])+Number(it)-Number(ze[Xt])),ze=E(ze);const ln=M(oe.instance.target),kn=parseFloat(ln[`margin${gn}`])||0,Tn=parseFloat(ln[`border${gn}Width`])||0;let qn;if(Gt){const Yn=parseFloat(ln.borderRadius)||0,Ft=Number(kn+Tn+Yn);qn=Yt===Gt?Number(oe.offsets.host[Yt])+Ft:Number(oe.offsets.host[Yt])+Number(oe.offsets.host[Zt]-Ft)}else qn=Number(oe.offsets.host[Yt])+Number(oe.offsets.host[Zt]/2-it/2);let ri=qn-(null!==(Ne=ze[Yt])&&void 0!==Ne?Ne:0)-kn-Tn;return ri=Math.max(Math.min(ze[Zt]-(it+5),ri),0),oe.offsets.arrow={[Yt]:Math.round(ri),[on]:""},oe.instance.arrow=et,oe}function Re(oe){if(oe.offsets.target=E(oe.offsets.target),!Dt(oe.options,"flip"))return oe.offsets.target={...oe.offsets.target,...xt(oe.instance.target,oe.offsets.host,oe.placement)},oe;const ie=ve(oe.instance.target,oe.instance.host,0,"viewport",!1);let L=oe.placement.split(" ")[0],ne=oe.placement.split(" ")[1]||"";const Tt=tt("auto",oe.offsets.host,oe.instance.target,oe.instance.host,oe.options.allowedPositions),Zt=[L,Tt];return Zt.forEach((gn,Yt)=>{var on,Xt,it,Gt,bt,jt,ln,kn,Tn,qn,ri,Yn,Ft,jn,In,Fn;if(L!==gn||Zt.length===Yt+1)return;L=oe.placement.split(" ")[0];const Zn="left"===L&&Math.floor(null!==(on=oe.offsets.target.right)&&void 0!==on?on:0)>Math.floor(null!==(Xt=oe.offsets.host.left)&&void 0!==Xt?Xt:0)||"right"===L&&Math.floor(null!==(it=oe.offsets.target.left)&&void 0!==it?it:0)<Math.floor(null!==(Gt=oe.offsets.host.right)&&void 0!==Gt?Gt:0)||"top"===L&&Math.floor(null!==(bt=oe.offsets.target.bottom)&&void 0!==bt?bt:0)>Math.floor(null!==(jt=oe.offsets.host.top)&&void 0!==jt?jt:0)||"bottom"===L&&Math.floor(null!==(ln=oe.offsets.target.top)&&void 0!==ln?ln:0)<Math.floor(null!==(kn=oe.offsets.host.bottom)&&void 0!==kn?kn:0),zn=Math.floor(null!==(Tn=oe.offsets.target.left)&&void 0!==Tn?Tn:0)<Math.floor(null!==(qn=ie.left)&&void 0!==qn?qn:0),ut=Math.floor(null!==(ri=oe.offsets.target.right)&&void 0!==ri?ri:0)>Math.floor(null!==(Yn=ie.right)&&void 0!==Yn?Yn:0),vt=Math.floor(null!==(Ft=oe.offsets.target.top)&&void 0!==Ft?Ft:0)<Math.floor(null!==(jn=ie.top)&&void 0!==jn?jn:0),at=Math.floor(null!==(In=oe.offsets.target.bottom)&&void 0!==In?In:0)>Math.floor(null!==(Fn=ie.bottom)&&void 0!==Fn?Fn:0),Ot="left"===L&&zn||"right"===L&&ut||"top"===L&&vt||"bottom"===L&&at,Ht=-1!==["top","bottom"].indexOf(L),hn=Ht&&"left"===ne&&zn||Ht&&"right"===ne&&ut||!Ht&&"left"===ne&&vt||!Ht&&"right"===ne&&at;(Zn||Ot||hn)&&((Zn||Ot)&&(L=Zt[Yt+1]),hn&&(ne=function rt(oe){return"right"===oe?"left":"left"===oe?"right":oe}(ne)),oe.placement=L+(ne?` ${ne}`:""),oe.offsets.target={...oe.offsets.target,...xt(oe.instance.target,oe.offsets.host,oe.placement)})}),oe}function Qe(oe){var ie;if(!Dt(oe.options,"preventOverflow"))return oe;const L="transform",ne=oe.instance.target.style,{top:Ne,left:ze,[L]:et}=ne;ne.top="",ne.left="",ne[L]="";const Tt=ve(oe.instance.target,oe.instance.host,0,(null===(ie=oe.options.modifiers.preventOverflow)||void 0===ie?void 0:ie.boundariesElement)||"scrollParent",!1);ne.top=Ne,ne.left=ze,ne[L]=et;const gn={primary(Yt){var on,Xt;let it=oe.offsets.target[Yt];var Gt,bt;return(null!==(on=oe.offsets.target[Yt])&&void 0!==on?on:0)<(null!==(Xt=Tt[Yt])&&void 0!==Xt?Xt:0)&&(it=Math.max(null!==(Gt=oe.offsets.target[Yt])&&void 0!==Gt?Gt:0,null!==(bt=Tt[Yt])&&void 0!==bt?bt:0)),{[Yt]:it}},secondary(Yt){var on,Xt;const it="right"===Yt,Gt=it?"left":"top";let jt=oe.offsets.target[Gt];var ln,kn;return(null!==(on=oe.offsets.target[Yt])&&void 0!==on?on:0)>(null!==(Xt=Tt[Yt])&&void 0!==Xt?Xt:0)&&(jt=Math.min(null!==(ln=oe.offsets.target[Gt])&&void 0!==ln?ln:0,(null!==(kn=Tt[Yt])&&void 0!==kn?kn:0)-oe.offsets.target[it?"width":"height"])),{[Gt]:jt}}};return["left","right","top","bottom"].forEach(Yt=>{const on=-1!==["left","top","start"].indexOf(Yt)?gn.primary:gn.secondary;oe.offsets.target={...oe.offsets.target,...on(Yt)}}),oe}function Xe(oe){const ie=oe.placement,L=ie.split(" ")[0],ne=ie.split(" ")[1];if(ne){var Ne;const{host:ze,target:et}=oe.offsets,Tt=-1!==["bottom","top"].indexOf(L),Zt=Tt?"left":"top",gn=Tt?"width":"height",Yt={start:{[Zt]:ze[Zt]},end:{[Zt]:(null!==(Ne=ze[Zt])&&void 0!==Ne?Ne:0)+ze[gn]-et[gn]}};oe.offsets.target={...et,[Zt]:Zt===ne?Yt.start[Zt]:Yt.end[Zt]}}return oe}const Je=new class Ke{position(ie,L){return this.offset(ie,L)}offset(ie,L){return en(L,ie)}positionElements(ie,L,ne,Ne,ze){const et=[Re,Xe,Qe,ke],Zt=function Se(oe,ie,L,ne){if(!oe||!ie)return;const Ne=en(oe,ie);!L.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!L.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(L="auto");const ze=!!L.match(/auto/g);let et=L.match(/auto\s(left|right|top|bottom|start|end)/)?L.split(" ")[1]||"auto":L;const Tt=et.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return Tt&&(et=Tt[1]+(Tt[2]?` ${Tt[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(et)&&(et="auto"),et=tt(et,Ne,oe,ie,ne?ne.allowedPositions:void 0),{options:ne||{modifiers:{}},instance:{target:oe,host:ie,arrow:void 0},offsets:{target:xt(oe,Ne,et),host:Ne,arrow:void 0},positionFixed:!1,placement:et,placementAuto:ze}}(L,ie,U[ne],ze);if(Zt)return et.reduce((gn,Yt)=>Yt(gn),Zt)}};function Ct(oe,ie,L,ne,Ne,ze){const et=Je.positionElements(oe,ie,L,ne,Ne);if(!et)return;const Tt=function _t(oe){var ie,L,ne,Ne;return{width:oe.offsets.target.width,height:oe.offsets.target.height,left:Math.floor(null!==(ie=oe.offsets.target.left)&&void 0!==ie?ie:0),top:Math.round(null!==(L=oe.offsets.target.top)&&void 0!==L?L:0),bottom:Math.round(null!==(ne=oe.offsets.target.bottom)&&void 0!==ne?ne:0),right:Math.floor(null!==(Ne=oe.offsets.target.right)&&void 0!==Ne?Ne:0)}}(et);je(ie,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${Tt.left}px, ${Tt.top}px, 0px)`},ze),et.instance.arrow&&je(et.instance.arrow,et.offsets.arrow,ze),function Be(oe,ie){const L=oe.instance.target;let ne=L.className;const Ne=(0,n.Wl)().isBs5?W[oe.placement]:oe.placement;oe.placementAuto&&(ne=ne.replace(/bs-popover-auto/g,`bs-popover-${Ne}`),ne=ne.replace(/ms-2|me-2|mb-2|mt-2/g,""),ne=ne.replace(/bs-tooltip-auto/g,`bs-tooltip-${Ne}`),ne=ne.replace(/\sauto/g,` ${Ne}`),-1!==ne.indexOf("popover")&&(ne=ne+" "+function ae(oe){return(0,n.Wl)().isBs5?j(oe,"end")?"ms-2":j(oe,"start")?"me-2":j(oe,"top")?"mb-2":j(oe,"bottom")?"mt-2":"":""}(Ne)),-1!==ne.indexOf("popover")&&-1===ne.indexOf("popover-auto")&&(ne+=" popover-auto"),-1!==ne.indexOf("tooltip")&&-1===ne.indexOf("tooltip-auto")&&(ne+=" tooltip-auto")),ne=ne.replace(/left|right|top|bottom|end|start/g,`${Ne.split(" ")[0]}`),ie?ie.setAttribute(L,"class",ne):L.className=ne}(et,ze)}let ht=(()=>{class oe{constructor(L,ne,Ne){this.update$$=new S.x,this.positionElements=new Map,this.isDisabled=!1,(0,h.NF)(Ne)&&L.runOutsideAngular(()=>{this.triggerEvent$=(0,y.T)((0,w.R)(window,"scroll",{passive:!0}),(0,w.R)(window,"resize",{passive:!0}),(0,f.of)(0,O),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(ze=>{Ct(Ze(ze.target),Ze(ze.element),ze.attachment,ze.appendToBody,this.options,ne.createRenderer(null,null))})})})}position(L){this.addPositionElement(L)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(L){this.positionElements.set(Ze(L.element),L)}calcPosition(){this.update$$.next(null)}deletePositionElement(L){this.positionElements.delete(Ze(L))}setOptions(L){this.options=L}}return oe.\u0275fac=function(L){return new(L||oe)(e.LFG(e.R0b),e.LFG(e.FYo),e.LFG(e.Lbi))},oe.\u0275prov=e.Yz7({token:oe,factory:oe.\u0275fac,providedIn:"root"}),oe})();function Ze(oe){return"string"==typeof oe?document.querySelector(oe):oe instanceof e.SBq?oe.nativeElement:oe??null}},9241:(nt,_e,m)=>{"use strict";m.d(_e,{AH:()=>b,P4:()=>R,wW:()=>g});var n=m(4650),e=m(6895);function h(k,O){if(1&k){const P=n.EpF();n.TgZ(0,"span",7),n.NdJ("click",function(W){n.CHM(P);const M=n.oxw().$implicit,B=n.oxw();return W.preventDefault(),n.KtG(B.removeTab(M))}),n._uU(1," \u274c"),n.qZA()}}const S=function(k){return["nav-item",k]};function y(k,O){if(1&k){const P=n.EpF();n.TgZ(0,"li",3),n.NdJ("keydown",function(W){const B=n.CHM(P).index,V=n.oxw();return n.KtG(V.keyNavActions(W,B))}),n.TgZ(1,"a",4),n.NdJ("click",function(){const M=n.CHM(P).$implicit;return n.KtG(M.active=!0)}),n.TgZ(2,"span",5),n._uU(3),n.qZA(),n.YNc(4,h,2,0,"span",6),n.qZA()()}if(2&k){const P=O.$implicit;n.ekj("active",P.active)("disabled",P.disabled),n.Q6J("ngClass",n.VKq(15,S,P.customClass||"")),n.xp6(1),n.ekj("active",P.active)("disabled",P.disabled),n.uIk("aria-controls",P.id?P.id:"")("aria-selected",!!P.active)("id",P.id?P.id+"-link":""),n.xp6(1),n.Q6J("ngTransclude",P.headingRef),n.xp6(1),n.Oqu(P.heading),n.xp6(1),n.Q6J("ngIf",P.removable)}}const w=["*"];let f=(()=>{class k{constructor(P){this.viewRef=P}set ngTransclude(P){this._ngTransclude=P,P&&this.viewRef.createEmbeddedView(P)}get ngTransclude(){return this._ngTransclude}}return k.\u0275fac=function(P){return new(P||k)(n.Y36(n.s_b))},k.\u0275dir=n.lG2({type:k,selectors:[["","ngTransclude",""]],inputs:{ngTransclude:"ngTransclude"}}),k})(),x=(()=>{class k{constructor(){this.type="tabs",this.isKeysAllowed=!0,this.ariaLabel="Tabs"}}return k.\u0275fac=function(P){return new(P||k)},k.\u0275prov=n.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),b=(()=>{class k{constructor(P,U,W){this.renderer=U,this.elementRef=W,this.clazz=!0,this.tabs=[],this.classMap={},this.ariaLabel="Tabs",this.isDestroyed=!1,this._vertical=!1,this._justified=!1,this._type="tabs",this._isKeysAllowed=!0,Object.assign(this,P)}get vertical(){return this._vertical}set vertical(P){this._vertical=P,this.setClassMap()}get justified(){return this._justified}set justified(P){this._justified=P,this.setClassMap()}get type(){return this._type}set type(P){this._type=P,this.setClassMap()}get isKeysAllowed(){return this._isKeysAllowed}set isKeysAllowed(P){this._isKeysAllowed=P}ngOnDestroy(){this.isDestroyed=!0}addTab(P){this.tabs.push(P),P.active=1===this.tabs.length&&!P.active}removeTab(P,U={reselect:!0,emit:!0}){const W=this.tabs.indexOf(P);if(-1!==W&&!this.isDestroyed){if(U.reselect&&P.active&&this.hasAvailableTabs(W)){const M=this.getClosestTabIndex(W);this.tabs[M].active=!0}U.emit&&P.removed.emit(P),this.tabs.splice(W,1),P.elementRef.nativeElement.parentNode&&this.renderer.removeChild(P.elementRef.nativeElement.parentNode,P.elementRef.nativeElement)}}keyNavActions(P,U){if(!this.isKeysAllowed)return;const W=Array.from(this.elementRef.nativeElement.querySelectorAll(".nav-link"));if(13===P.keyCode||"Enter"===P.key||32===P.keyCode||"Space"===P.key)return P.preventDefault(),void W[U%W.length].click();if(39!==P.keyCode&&"RightArrow"!==P.key)if(37!==P.keyCode&&"LeftArrow"!==P.key)if(36!==P.keyCode&&"Home"!==P.key)if(35!==P.keyCode&&"End"!==P.key){if((46===P.keyCode||"Delete"===P.key)&&this.tabs[U].removable){if(this.removeTab(this.tabs[U]),W[U+1])return void W[(U+1)%W.length].focus();W[W.length-1]&&W[0].focus()}}else{P.preventDefault();let M,B=1,V=U;do{V-B<0?(V=W.length-1,M=W[V],B=0):M=W[V-B],B++}while(M.classList.contains("disabled"));M.focus()}else{P.preventDefault();let M,B=0;do{M=W[B%W.length],B++}while(M.classList.contains("disabled"));M.focus()}else{let M,B=1,V=U;do{V-B<0?(V=W.length-1,M=W[V],B=0):M=W[V-B],B++}while(M.classList.contains("disabled"));M.focus()}else{let M,B=1;do{M=W[(U+B)%W.length],B++}while(M.classList.contains("disabled"));M.focus()}}getClosestTabIndex(P){const U=this.tabs.length;if(!U)return-1;for(let W=1;W<=U;W+=1){const M=P-W,B=P+W;if(this.tabs[M]&&!this.tabs[M].disabled)return M;if(this.tabs[B]&&!this.tabs[B].disabled)return B}return-1}hasAvailableTabs(P){const U=this.tabs.length;if(!U)return!1;for(let W=0;W<U;W+=1)if(!this.tabs[W].disabled&&W!==P)return!0;return!1}setClassMap(){this.classMap={"nav-stacked":this.vertical,"flex-column":this.vertical,"nav-justified":this.justified,[`nav-${this.type}`]:!0}}}return k.\u0275fac=function(P){return new(P||k)(n.Y36(x),n.Y36(n.Qsj),n.Y36(n.SBq))},k.\u0275cmp=n.Xpm({type:k,selectors:[["tabset"]],hostVars:2,hostBindings:function(P,U){2&P&&n.ekj("tab-container",U.clazz)},inputs:{vertical:"vertical",justified:"justified",type:"type"},ngContentSelectors:w,decls:4,vars:3,consts:[["role","tablist",1,"nav",3,"ngClass","click"],[3,"ngClass","active","disabled","keydown",4,"ngFor","ngForOf"],[1,"tab-content"],[3,"ngClass","keydown"],["href","javascript:void(0);","role","tab",1,"nav-link",3,"click"],[3,"ngTransclude"],["class","bs-remove-tab",3,"click",4,"ngIf"],[1,"bs-remove-tab",3,"click"]],template:function(P,U){1&P&&(n.F$t(),n.TgZ(0,"ul",0),n.NdJ("click",function(M){return M.preventDefault()}),n.YNc(1,y,5,17,"li",1),n.qZA(),n.TgZ(2,"div",2),n.Hsn(3),n.qZA()),2&P&&(n.Q6J("ngClass",U.classMap),n.uIk("aria-label",U.ariaLabel),n.xp6(1),n.Q6J("ngForOf",U.tabs))},dependencies:[e.mk,e.sg,e.O5,f],styles:["[_nghost-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item.disabled[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{cursor:default}"]}),k})(),g=(()=>{class k{constructor(P,U,W){this.elementRef=U,this.renderer=W,this.disabled=!1,this.removable=!1,this.selectTab=new n.vpe,this.deselect=new n.vpe,this.removed=new n.vpe,this.addClass=!0,this.role="tabpanel",this._active=!1,this._customClass="",this.tabset=P,this.tabset.addTab(this)}get customClass(){return this._customClass}set customClass(P){this.customClass&&this.customClass.split(" ").forEach(U=>{this.renderer.removeClass(this.elementRef.nativeElement,U)}),this._customClass=P?P.trim():"",this.customClass&&this.customClass.split(" ").forEach(U=>{this.renderer.addClass(this.elementRef.nativeElement,U)})}get active(){return this._active}set active(P){if(this._active!==P){if(this.disabled&&P||!P)return void(this._active&&!P&&(this.deselect.emit(this),this._active=P));this._active=P,this.selectTab.emit(this),this.tabset.tabs.forEach(U=>{U!==this&&(U.active=!1)})}}get ariaLabelledby(){return this.id?`${this.id}-link`:""}ngOnInit(){this.removable=!!this.removable}ngOnDestroy(){this.tabset.removeTab(this,{reselect:!1,emit:!1})}}return k.\u0275fac=function(P){return new(P||k)(n.Y36(b),n.Y36(n.SBq),n.Y36(n.Qsj))},k.\u0275dir=n.lG2({type:k,selectors:[["tab"],["","tab",""]],hostVars:7,hostBindings:function(P,U){2&P&&(n.uIk("id",U.id)("role",U.role)("aria-labelledby",U.ariaLabelledby),n.ekj("active",U.active)("tab-pane",U.addClass))},inputs:{heading:"heading",id:"id",disabled:"disabled",removable:"removable",customClass:"customClass",active:"active"},outputs:{selectTab:"selectTab",deselect:"deselect",removed:"removed"},exportAs:["tab"]}),k})(),R=(()=>{class k{static forRoot(){return{ngModule:k,providers:[]}}}return k.\u0275fac=function(P){return new(P||k)},k.\u0275mod=n.oAB({type:k}),k.\u0275inj=n.cJS({imports:[e.ez]}),k})()},2320:(nt,_e,m)=>{"use strict";m.d(_e,{i9:()=>R,z8:()=>k});var n=m(4650),e=m(1607),h=m(8664),S=m(655),y=m(2381),w=m(5963),f=m(6895);const x=["*"];let b=(()=>{class O{constructor(){this.adaptivePosition=!0,this.placement="top",this.triggers="hover focus",this.delay=0}}return O.\u0275fac=function(U){return new(U||O)},O.\u0275prov=n.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})(),g=(()=>{class O{constructor(U){Object.assign(this,U)}get _bsVersions(){return(0,e.Wl)()}ngAfterViewInit(){this.classMap={in:!1,fade:!1},this.placement&&(this._bsVersions.isBs5&&(this.placement=h.Bz[this.placement]),this.classMap[this.placement]=!0),this.classMap[`tooltip-${this.placement}`]=!0,this.classMap.in=!0,this.animation&&(this.classMap.fade=!0),this.containerClass&&(this.classMap[this.containerClass]=!0)}}return O.\u0275fac=function(U){return new(U||O)(n.Y36(b))},O.\u0275cmp=n.Xpm({type:O,selectors:[["bs-tooltip-container"]],hostAttrs:["role","tooltip"],hostVars:7,hostBindings:function(U,W){2&U&&(n.uIk("id",W.id),n.Tol("tooltip in tooltip-"+W.placement+" bs-tooltip-"+W.placement+" "+W.placement+" "+W.containerClass),n.ekj("show",!W._bsVersions.isBs3)("bs3",W._bsVersions.isBs3))},ngContentSelectors:x,decls:3,vars:0,consts:[[1,"tooltip-arrow","arrow"],[1,"tooltip-inner"]],template:function(U,W){1&U&&(n.F$t(),n._UZ(0,"div",0),n.TgZ(1,"div",1),n.Hsn(2),n.qZA())},styles:[".tooltip[_nghost-%COMP%]{display:block;pointer-events:none}.bs3.tooltip.top[_nghost-%COMP%] > .arrow[_ngcontent-%COMP%]{margin-left:-2px}.bs3.tooltip.bottom[_nghost-%COMP%]{margin-top:0}.bs3.bs-tooltip-left[_nghost-%COMP%], .bs3.bs-tooltip-right[_nghost-%COMP%]{margin:0}.bs3.bs-tooltip-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs3.bs-tooltip-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{margin:.3rem 0}"],changeDetection:0}),O})(),N=0,R=(()=>{class O{constructor(U,W,M,B,V,Q){this._elementRef=B,this._renderer=V,this._positionService=Q,this.tooltipId=N++,this.adaptivePosition=!0,this.tooltipChange=new n.vpe,this.placement="top",this.triggers="hover focus",this.containerClass="",this.isDisabled=!1,this.delay=0,this.tooltipAnimation=!0,this.tooltipFadeDuration=150,this.tooltipStateChanged=new n.vpe,this._tooltip=W.createLoader(this._elementRef,U,this._renderer).provide({provide:b,useValue:M}),Object.assign(this,M),this.onShown=this._tooltip.onShown,this.onHidden=this._tooltip.onHidden}get isOpen(){return this._tooltip.isShown}set isOpen(U){U?this.show():this.hide()}set htmlContent(U){(0,e.O4)("tooltipHtml was deprecated, please use `tooltip` instead"),this.tooltip=U}set _placement(U){(0,e.O4)("tooltipPlacement was deprecated, please use `placement` instead"),this.placement=U}set _isOpen(U){(0,e.O4)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen=U}get _isOpen(){return(0,e.O4)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen}set _enable(U){(0,e.O4)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled=!U}get _enable(){return(0,e.O4)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled}set _appendToBody(U){(0,e.O4)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),this.container=U?"body":this.container}get _appendToBody(){return(0,e.O4)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),"body"===this.container}set _popupClass(U){(0,e.O4)("tooltipClass deprecated")}set _tooltipContext(U){(0,e.O4)("tooltipContext deprecated")}set _tooltipPopupDelay(U){(0,e.O4)("tooltipPopupDelay is deprecated, use `delay` instead"),this.delay=U}get _tooltipTrigger(){return(0,e.O4)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers}set _tooltipTrigger(U){(0,e.O4)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers=(U||"").toString()}ngOnInit(){this._tooltip.listen({triggers:this.triggers,show:()=>this.show()}),this.tooltipChange.subscribe(U=>{U||this._tooltip.hide()}),this.onShown.subscribe(()=>{this.setAriaDescribedBy()}),this.onHidden.subscribe(()=>{this.setAriaDescribedBy()})}setAriaDescribedBy(){this._ariaDescribedby=this.isOpen?`tooltip-${this.tooltipId}`:void 0,this._ariaDescribedby?this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ariaDescribedby):this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby")}toggle(){if(this.isOpen)return this.hide();this.show()}show(){if(this._positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition},preventOverflow:{enabled:this.adaptivePosition,boundariesElement:this.boundariesElement||"scrollParent"}}}),this.isOpen||this.isDisabled||this._delayTimeoutId||!this.tooltip)return;const U=()=>{this._delayTimeoutId&&(this._delayTimeoutId=void 0),this._tooltip.attach(g).to(this.container).position({attachment:this.placement}).show({content:this.tooltip,placement:this.placement,containerClass:this.containerClass,id:`tooltip-${this.tooltipId}`})},W=()=>{this._tooltipCancelShowFn&&this._tooltipCancelShowFn()};this.delay?(this._delaySubscription&&this._delaySubscription.unsubscribe(),this._delaySubscription=(0,w.H)(this.delay).subscribe(()=>{U(),W()}),this.triggers&&(0,e.AL)(this.triggers).forEach(M=>{!M.close||(this._tooltipCancelShowFn=this._renderer.listen(this._elementRef.nativeElement,M.close,()=>{var B;null===(B=this._delaySubscription)||void 0===B||B.unsubscribe(),W()}))})):U()}hide(){var U;this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=void 0),this._tooltip.isShown&&(null!==(U=this._tooltip.instance)&&void 0!==U&&U.classMap&&(this._tooltip.instance.classMap.in=!1),setTimeout(()=>{this._tooltip.hide()},this.tooltipFadeDuration))}ngOnDestroy(){this._tooltip.dispose(),this.tooltipChange.unsubscribe(),this._delaySubscription&&this._delaySubscription.unsubscribe(),this.onShown.unsubscribe(),this.onHidden.unsubscribe()}}return O.\u0275fac=function(U){return new(U||O)(n.Y36(n.s_b),n.Y36(y.oj),n.Y36(b),n.Y36(n.SBq),n.Y36(n.Qsj),n.Y36(h.sA))},O.\u0275dir=n.lG2({type:O,selectors:[["","tooltip",""],["","tooltipHtml",""]],inputs:{adaptivePosition:"adaptivePosition",tooltip:"tooltip",placement:"placement",triggers:"triggers",container:"container",containerClass:"containerClass",boundariesElement:"boundariesElement",isOpen:"isOpen",isDisabled:"isDisabled",delay:"delay",htmlContent:["tooltipHtml","htmlContent"],_placement:["tooltipPlacement","_placement"],_isOpen:["tooltipIsOpen","_isOpen"],_enable:["tooltipEnable","_enable"],_appendToBody:["tooltipAppendToBody","_appendToBody"],tooltipAnimation:"tooltipAnimation",_popupClass:["tooltipClass","_popupClass"],_tooltipContext:["tooltipContext","_tooltipContext"],_tooltipPopupDelay:["tooltipPopupDelay","_tooltipPopupDelay"],tooltipFadeDuration:"tooltipFadeDuration",_tooltipTrigger:["tooltipTrigger","_tooltipTrigger"]},outputs:{tooltipChange:"tooltipChange",onShown:"onShown",onHidden:"onHidden",tooltipStateChanged:"tooltipStateChanged"},exportAs:["bs-tooltip"]}),(0,S.gn)([(0,e.GU)(),(0,S.w6)("design:type",Object)],O.prototype,"tooltip",void 0),O})(),k=(()=>{class O{static forRoot(){return{ngModule:O,providers:[y.oj,h.sA]}}}return O.\u0275fac=function(U){return new(U||O)},O.\u0275mod=n.oAB({type:O}),O.\u0275inj=n.cJS({imports:[f.ez]}),O})()},1191:(nt,_e,m)=>{"use strict";m.d(_e,{Bp:()=>Be,H3:()=>je});var n=m(4650),e=m(1607),h=m(8664),S=m(727),y=m(5191),w=m(515),f=m(2076),x=m(7340),b=m(6895),g=m(4006),N=m(2381),R=m(8372),k=m(8505),O=m(3900),P=m(5577),U=m(9300),W=m(7359),M=m(4482);const V=(ke,Re)=>(ke.push(Re),ke);const Y=["ulElement"],fe=["liElements"];function J(ke,Re){}function ee(ke,Re){if(1&ke&&n._UZ(0,"span",4),2&ke){const Se=Re.match,Qe=Re.query,Xe=n.oxw();n.Q6J("innerHtml",Xe.highlight(Se,Qe),n.oJD)}}function G(ke,Re){if(1&ke&&(n.TgZ(0,"li",10,11),n._uU(2),n.qZA()),2&ke){const Se=n.oxw().$implicit;n.xp6(2),n.Oqu(Se)}}function E(ke,Re){}const te=function(ke,Re,Se,Qe){return{item:ke,index:Re,match:Se,query:Qe}};function $(ke,Re){if(1&ke){const Se=n.EpF();n.TgZ(0,"li",12,11),n.NdJ("mouseenter",function(){n.CHM(Se);const Xe=n.oxw().$implicit,Ke=n.oxw(2);return n.KtG(Ke.selectActive(Xe))}),n.TgZ(2,"a",13),n.NdJ("click",function(Xe){n.CHM(Se);const Ke=n.oxw().$implicit,Je=n.oxw(2);return n.KtG(Je.selectMatch(Ke,Xe))}),n.YNc(3,E,0,0,"ng-template",0),n.qZA()()}if(2&ke){const Se=n.oxw(),Qe=Se.$implicit,Xe=Se.index,Ke=n.oxw(2),Je=n.MAs(2);n.ekj("active",Ke.isActive(Qe)),n.Q6J("id",Ke.popupId+"-"+Xe)("@typeaheadAnimation",Ke.animationState),n.xp6(3),n.Q6J("ngTemplateOutlet",Ke.itemTemplate||Je)("ngTemplateOutletContext",n.l5B(6,te,Qe.item,Xe,Qe,Ke.query))}}function ue(ke,Re){if(1&ke&&(n.YNc(0,G,3,1,"li",8),n.YNc(1,$,4,11,"li",9)),2&ke){const Se=Re.$implicit;n.Q6J("ngIf",Se.isHeader()),n.xp6(1),n.Q6J("ngIf",!Se.isHeader())}}function me(ke,Re){if(1&ke&&(n.TgZ(0,"ul",5,6),n.YNc(2,ue,2,2,"ng-template",7),n.qZA()),2&ke){const Se=n.oxw();n.Udp("overflow-y",Se.needScrollbar?"scroll":"auto")("height",Se.needScrollbar?Se.guiHeight:"auto"),n.xp6(2),n.Q6J("ngForOf",Se.matches)}}function we(ke,Re){if(1&ke&&(n.TgZ(0,"h6",10),n._uU(1),n.qZA()),2&ke){const Se=n.oxw().$implicit;n.xp6(1),n.Oqu(Se)}}function ye(ke,Re){}function qe(ke,Re){if(1&ke){const Se=n.EpF();n.TgZ(0,"button",15,11),n.NdJ("click",function(Xe){n.CHM(Se);const Ke=n.oxw().$implicit,Je=n.oxw(2);return n.KtG(Je.selectMatch(Ke,Xe))})("mouseenter",function(){n.CHM(Se);const Xe=n.oxw().$implicit,Ke=n.oxw(2);return n.KtG(Ke.selectActive(Xe))}),n.YNc(2,ye,0,0,"ng-template",0),n.qZA()}if(2&ke){const Se=n.oxw(),Qe=Se.$implicit,Xe=Se.index,Ke=n.oxw(2),Je=n.MAs(2);n.ekj("active",Ke.isActive(Qe)),n.Q6J("id",Ke.popupId+"-"+Xe)("@typeaheadAnimation",Ke.animationState),n.xp6(2),n.Q6J("ngTemplateOutlet",Ke.itemTemplate||Je)("ngTemplateOutletContext",n.l5B(6,te,Qe.item,Xe,Qe,Ke.query))}}function De(ke,Re){if(1&ke&&(n.YNc(0,we,2,1,"h6",8),n.YNc(1,qe,3,11,"ng-template",14)),2&ke){const Se=Re.$implicit;n.Q6J("ngIf",Se.isHeader()),n.xp6(1),n.Q6J("ngIf",!Se.isHeader())}}function Ge(ke,Re){if(1&ke&&n.YNc(0,De,2,2,"ng-template",7),2&ke){const Se=n.oxw();n.Q6J("ngForOf",Se.matches)}}const ve=function(ke,Re,Se,Qe){return{matches:ke,itemTemplate:Re,query:Se,$implicit:Qe}},c={\u00c1:"A",\u0102:"A",\u1eae:"A",\u1eb6:"A",\u1eb0:"A",\u1eb2:"A",\u1eb4:"A",\u01cd:"A",\u00c2:"A",\u1ea4:"A",\u1eac:"A",\u1ea6:"A",\u1ea8:"A",\u1eaa:"A",\u00c4:"A",\u01de:"A",\u0226:"A",\u01e0:"A",\u1ea0:"A",\u0200:"A",\u00c0:"A",\u1ea2:"A",\u0202:"A",\u0100:"A",\u0104:"A",\u00c5:"A",\u01fa:"A",\u1e00:"A",\u023a:"A",\u00c3:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY",\u1e02:"B",\u1e04:"B",\u0181:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0106:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0108:"C",\u010a:"C",\u0187:"C",\u023b:"C",\u010e:"D",\u1e10:"D",\u1e12:"D",\u1e0a:"D",\u1e0c:"D",\u018a:"D",\u1e0e:"D",\u01f2:"D",\u01c5:"D",\u0110:"D",\u018b:"D",\u01f1:"DZ",\u01c4:"DZ",\u00c9:"E",\u0114:"E",\u011a:"E",\u0228:"E",\u1e1c:"E",\u00ca:"E",\u1ebe:"E",\u1ec6:"E",\u1ec0:"E",\u1ec2:"E",\u1ec4:"E",\u1e18:"E",\u00cb:"E",\u0116:"E",\u1eb8:"E",\u0204:"E",\u00c8:"E",\u1eba:"E",\u0206:"E",\u0112:"E",\u1e16:"E",\u1e14:"E",\u0118:"E",\u0246:"E",\u1ebc:"E",\u1e1a:"E",\ua76a:"ET",\u1e1e:"F",\u0191:"F",\u01f4:"G",\u011e:"G",\u01e6:"G",\u0122:"G",\u011c:"G",\u0120:"G",\u0193:"G",\u1e20:"G",\u01e4:"G",\u1e2a:"H",\u021e:"H",\u1e28:"H",\u0124:"H",\u2c67:"H",\u1e26:"H",\u1e22:"H",\u1e24:"H",\u0126:"H",\u00cd:"I",\u012c:"I",\u01cf:"I",\u00ce:"I",\u00cf:"I",\u1e2e:"I",\u0130:"I",\u1eca:"I",\u0208:"I",\u00cc:"I",\u1ec8:"I",\u020a:"I",\u012a:"I",\u012e:"I",\u0197:"I",\u0128:"I",\u1e2c:"I",\ua779:"D",\ua77b:"F",\ua77d:"G",\ua782:"R",\ua784:"S",\ua786:"T",\ua76c:"IS",\u0134:"J",\u0248:"J",\u1e30:"K",\u01e8:"K",\u0136:"K",\u2c69:"K",\ua742:"K",\u1e32:"K",\u0198:"K",\u1e34:"K",\ua740:"K",\ua744:"K",\u0139:"L",\u023d:"L",\u013d:"L",\u013b:"L",\u1e3c:"L",\u1e36:"L",\u1e38:"L",\u2c60:"L",\ua748:"L",\u1e3a:"L",\u013f:"L",\u2c62:"L",\u01c8:"L",\u0141:"L",\u01c7:"LJ",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u0143:"N",\u0147:"N",\u0145:"N",\u1e4a:"N",\u1e44:"N",\u1e46:"N",\u01f8:"N",\u019d:"N",\u1e48:"N",\u0220:"N",\u01cb:"N",\u00d1:"N",\u01ca:"NJ",\u00d3:"O",\u014e:"O",\u01d1:"O",\u00d4:"O",\u1ed0:"O",\u1ed8:"O",\u1ed2:"O",\u1ed4:"O",\u1ed6:"O",\u00d6:"O",\u022a:"O",\u022e:"O",\u0230:"O",\u1ecc:"O",\u0150:"O",\u020c:"O",\u00d2:"O",\u1ece:"O",\u01a0:"O",\u1eda:"O",\u1ee2:"O",\u1edc:"O",\u1ede:"O",\u1ee0:"O",\u020e:"O",\ua74a:"O",\ua74c:"O",\u014c:"O",\u1e52:"O",\u1e50:"O",\u019f:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u00d5:"O",\u1e4c:"O",\u1e4e:"O",\u022c:"O",\u01a2:"OI",\ua74e:"OO",\u0190:"E",\u0186:"O",\u0222:"OU",\u1e54:"P",\u1e56:"P",\ua752:"P",\u01a4:"P",\ua754:"P",\u2c63:"P",\ua750:"P",\ua758:"Q",\ua756:"Q",\u0154:"R",\u0158:"R",\u0156:"R",\u1e58:"R",\u1e5a:"R",\u1e5c:"R",\u0210:"R",\u0212:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua73e:"C",\u018e:"E",\u015a:"S",\u1e64:"S",\u0160:"S",\u1e66:"S",\u015e:"S",\u015c:"S",\u0218:"S",\u1e60:"S",\u1e62:"S",\u1e68:"S",\u0164:"T",\u0162:"T",\u1e70:"T",\u021a:"T",\u023e:"T",\u1e6a:"T",\u1e6c:"T",\u01ac:"T",\u1e6e:"T",\u01ae:"T",\u0166:"T",\u2c6f:"A",\ua780:"L",\u019c:"M",\u0245:"V",\ua728:"TZ",\u00da:"U",\u016c:"U",\u01d3:"U",\u00db:"U",\u1e76:"U",\u00dc:"U",\u01d7:"U",\u01d9:"U",\u01db:"U",\u01d5:"U",\u1e72:"U",\u1ee4:"U",\u0170:"U",\u0214:"U",\u00d9:"U",\u1ee6:"U",\u01af:"U",\u1ee8:"U",\u1ef0:"U",\u1eea:"U",\u1eec:"U",\u1eee:"U",\u0216:"U",\u016a:"U",\u1e7a:"U",\u0172:"U",\u016e:"U",\u0168:"U",\u1e78:"U",\u1e74:"U",\ua75e:"V",\u1e7e:"V",\u01b2:"V",\u1e7c:"V",\ua760:"VY",\u1e82:"W",\u0174:"W",\u1e84:"W",\u1e86:"W",\u1e88:"W",\u1e80:"W",\u2c72:"W",\u1e8c:"X",\u1e8a:"X",\u00dd:"Y",\u0176:"Y",\u0178:"Y",\u1e8e:"Y",\u1ef4:"Y",\u1ef2:"Y",\u01b3:"Y",\u1ef6:"Y",\u1efe:"Y",\u0232:"Y",\u024e:"Y",\u1ef8:"Y",\u0179:"Z",\u017d:"Z",\u1e90:"Z",\u2c6b:"Z",\u017b:"Z",\u1e92:"Z",\u0224:"Z",\u1e94:"Z",\u01b5:"Z",\u0132:"IJ",\u0152:"OE",\u1d00:"A",\u1d01:"AE",\u0299:"B",\u1d03:"B",\u1d04:"C",\u1d05:"D",\u1d07:"E",\ua730:"F",\u0262:"G",\u029b:"G",\u029c:"H",\u026a:"I",\u0281:"R",\u1d0a:"J",\u1d0b:"K",\u029f:"L",\u1d0c:"L",\u1d0d:"M",\u0274:"N",\u1d0f:"O",\u0276:"OE",\u1d10:"O",\u1d15:"OU",\u1d18:"P",\u0280:"R",\u1d0e:"N",\u1d19:"R",\ua731:"S",\u1d1b:"T",\u2c7b:"E",\u1d1a:"R",\u1d1c:"U",\u1d20:"V",\u1d21:"W",\u028f:"Y",\u1d22:"Z",\u00e1:"a",\u0103:"a",\u1eaf:"a",\u1eb7:"a",\u1eb1:"a",\u1eb3:"a",\u1eb5:"a",\u01ce:"a",\u00e2:"a",\u1ea5:"a",\u1ead:"a",\u1ea7:"a",\u1ea9:"a",\u1eab:"a",\u00e4:"a",\u01df:"a",\u0227:"a",\u01e1:"a",\u1ea1:"a",\u0201:"a",\u00e0:"a",\u1ea3:"a",\u0203:"a",\u0101:"a",\u0105:"a",\u1d8f:"a",\u1e9a:"a",\u00e5:"a",\u01fb:"a",\u1e01:"a",\u2c65:"a",\u00e3:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay",\u1e03:"b",\u1e05:"b",\u0253:"b",\u1e07:"b",\u1d6c:"b",\u1d80:"b",\u0180:"b",\u0183:"b",\u0275:"o",\u0107:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0109:"c",\u0255:"c",\u010b:"c",\u0188:"c",\u023c:"c",\u010f:"d",\u1e11:"d",\u1e13:"d",\u0221:"d",\u1e0b:"d",\u1e0d:"d",\u0257:"d",\u1d91:"d",\u1e0f:"d",\u1d6d:"d",\u1d81:"d",\u0111:"d",\u0256:"d",\u018c:"d",\u0131:"i",\u0237:"j",\u025f:"j",\u0284:"j",\u01f3:"dz",\u01c6:"dz",\u00e9:"e",\u0115:"e",\u011b:"e",\u0229:"e",\u1e1d:"e",\u00ea:"e",\u1ebf:"e",\u1ec7:"e",\u1ec1:"e",\u1ec3:"e",\u1ec5:"e",\u1e19:"e",\u00eb:"e",\u0117:"e",\u1eb9:"e",\u0205:"e",\u00e8:"e",\u1ebb:"e",\u0207:"e",\u0113:"e",\u1e17:"e",\u1e15:"e",\u2c78:"e",\u0119:"e",\u1d92:"e",\u0247:"e",\u1ebd:"e",\u1e1b:"e",\ua76b:"et",\u1e1f:"f",\u0192:"f",\u1d6e:"f",\u1d82:"f",\u01f5:"g",\u011f:"g",\u01e7:"g",\u0123:"g",\u011d:"g",\u0121:"g",\u0260:"g",\u1e21:"g",\u1d83:"g",\u01e5:"g",\u1e2b:"h",\u021f:"h",\u1e29:"h",\u0125:"h",\u2c68:"h",\u1e27:"h",\u1e23:"h",\u1e25:"h",\u0266:"h",\u1e96:"h",\u0127:"h",\u0195:"hv",\u00ed:"i",\u012d:"i",\u01d0:"i",\u00ee:"i",\u00ef:"i",\u1e2f:"i",\u1ecb:"i",\u0209:"i",\u00ec:"i",\u1ec9:"i",\u020b:"i",\u012b:"i",\u012f:"i",\u1d96:"i",\u0268:"i",\u0129:"i",\u1e2d:"i",\ua77a:"d",\ua77c:"f",\u1d79:"g",\ua783:"r",\ua785:"s",\ua787:"t",\ua76d:"is",\u01f0:"j",\u0135:"j",\u029d:"j",\u0249:"j",\u1e31:"k",\u01e9:"k",\u0137:"k",\u2c6a:"k",\ua743:"k",\u1e33:"k",\u0199:"k",\u1e35:"k",\u1d84:"k",\ua741:"k",\ua745:"k",\u013a:"l",\u019a:"l",\u026c:"l",\u013e:"l",\u013c:"l",\u1e3d:"l",\u0234:"l",\u1e37:"l",\u1e39:"l",\u2c61:"l",\ua749:"l",\u1e3b:"l",\u0140:"l",\u026b:"l",\u1d85:"l",\u026d:"l",\u0142:"l",\u01c9:"lj",\u017f:"s",\u1e9c:"s",\u1e9b:"s",\u1e9d:"s",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u1d6f:"m",\u1d86:"m",\u0144:"n",\u0148:"n",\u0146:"n",\u1e4b:"n",\u0235:"n",\u1e45:"n",\u1e47:"n",\u01f9:"n",\u0272:"n",\u1e49:"n",\u019e:"n",\u1d70:"n",\u1d87:"n",\u0273:"n",\u00f1:"n",\u01cc:"nj",\u00f3:"o",\u014f:"o",\u01d2:"o",\u00f4:"o",\u1ed1:"o",\u1ed9:"o",\u1ed3:"o",\u1ed5:"o",\u1ed7:"o",\u00f6:"o",\u022b:"o",\u022f:"o",\u0231:"o",\u1ecd:"o",\u0151:"o",\u020d:"o",\u00f2:"o",\u1ecf:"o",\u01a1:"o",\u1edb:"o",\u1ee3:"o",\u1edd:"o",\u1edf:"o",\u1ee1:"o",\u020f:"o",\ua74b:"o",\ua74d:"o",\u2c7a:"o",\u014d:"o",\u1e53:"o",\u1e51:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u00f5:"o",\u1e4d:"o",\u1e4f:"o",\u022d:"o",\u01a3:"oi",\ua74f:"oo",\u025b:"e",\u1d93:"e",\u0254:"o",\u1d97:"o",\u0223:"ou",\u1e55:"p",\u1e57:"p",\ua753:"p",\u01a5:"p",\u1d71:"p",\u1d88:"p",\ua755:"p",\u1d7d:"p",\ua751:"p",\ua759:"q",\u02a0:"q",\u024b:"q",\ua757:"q",\u0155:"r",\u0159:"r",\u0157:"r",\u1e59:"r",\u1e5b:"r",\u1e5d:"r",\u0211:"r",\u027e:"r",\u1d73:"r",\u0213:"r",\u1e5f:"r",\u027c:"r",\u1d72:"r",\u1d89:"r",\u024d:"r",\u027d:"r",\u2184:"c",\ua73f:"c",\u0258:"e",\u027f:"r",\u015b:"s",\u1e65:"s",\u0161:"s",\u1e67:"s",\u015f:"s",\u015d:"s",\u0219:"s",\u1e61:"s",\u1e63:"s",\u1e69:"s",\u0282:"s",\u1d74:"s",\u1d8a:"s",\u023f:"s",\u0261:"g",\u1d11:"o",\u1d13:"o",\u1d1d:"u",\u0165:"t",\u0163:"t",\u1e71:"t",\u021b:"t",\u0236:"t",\u1e97:"t",\u2c66:"t",\u1e6b:"t",\u1e6d:"t",\u01ad:"t",\u1e6f:"t",\u1d75:"t",\u01ab:"t",\u0288:"t",\u0167:"t",\u1d7a:"th",\u0250:"a",\u1d02:"ae",\u01dd:"e",\u1d77:"g",\u0265:"h",\u02ae:"h",\u02af:"h",\u1d09:"i",\u029e:"k",\ua781:"l",\u026f:"m",\u0270:"m",\u1d14:"oe",\u0279:"r",\u027b:"r",\u027a:"r",\u2c79:"r",\u0287:"t",\u028c:"v",\u028d:"w",\u028e:"y",\ua729:"tz",\u00fa:"u",\u016d:"u",\u01d4:"u",\u00fb:"u",\u1e77:"u",\u00fc:"u",\u01d8:"u",\u01da:"u",\u01dc:"u",\u01d6:"u",\u1e73:"u",\u1ee5:"u",\u0171:"u",\u0215:"u",\u00f9:"u",\u1ee7:"u",\u01b0:"u",\u1ee9:"u",\u1ef1:"u",\u1eeb:"u",\u1eed:"u",\u1eef:"u",\u0217:"u",\u016b:"u",\u1e7b:"u",\u0173:"u",\u1d99:"u",\u016f:"u",\u0169:"u",\u1e79:"u",\u1e75:"u",\u1d6b:"ue",\ua778:"um",\u2c74:"v",\ua75f:"v",\u1e7f:"v",\u028b:"v",\u1d8c:"v",\u2c71:"v",\u1e7d:"v",\ua761:"vy",\u1e83:"w",\u0175:"w",\u1e85:"w",\u1e87:"w",\u1e89:"w",\u1e81:"w",\u2c73:"w",\u1e98:"w",\u1e8d:"x",\u1e8b:"x",\u1d8d:"x",\u00fd:"y",\u0177:"y",\u00ff:"y",\u1e8f:"y",\u1ef5:"y",\u1ef3:"y",\u01b4:"y",\u1ef7:"y",\u1eff:"y",\u0233:"y",\u1e99:"y",\u024f:"y",\u1ef9:"y",\u017a:"z",\u017e:"z",\u1e91:"z",\u0291:"z",\u2c6c:"z",\u017c:"z",\u1e93:"z",\u0225:"z",\u1e95:"z",\u1d76:"z",\u1d8e:"z",\u0290:"z",\u01b6:"z",\u0240:"z",\ufb00:"ff",\ufb03:"ffi",\ufb04:"ffl",\ufb01:"fi",\ufb02:"fl",\u0133:"ij",\u0153:"oe",\ufb06:"st",\u2090:"a",\u2091:"e",\u1d62:"i",\u2c7c:"j",\u2092:"o",\u1d63:"r",\u1d64:"u",\u1d65:"v",\u2093:"x"};class _t{constructor(Re,Se=Re,Qe=!1){this.item=Re,this.value=Se,this.header=Qe}isHeader(){return this.header}toString(){return this.value}}function ct(ke){return ke?ke.replace(/[^A-Za-z0-9[\] ]/g,function(Re){return c[Re]||Re}):""}function ft(ke,Re=" ",Se="",Qe){let Xe=[];if(Qe){const Je=ke.split(new RegExp(`([${Qe}]+)`,"g")),Ct=Je[Je.length-1];Ct>""&&(Re&&Se?Xe=qt(Ct,Re,Se):Xe.push(Ct))}else Xe=qt(ke,Re,Se);return Xe}function qt(ke,Re,Se){const Qe=[],Ke=ke.split(new RegExp(`(?:[${Se}])([^${Se}]+)(?:[${Se}])|([^${Re}]+)`,"g")),Je=Ke.length;let Ct;const ht=new RegExp(`[${Se}]+`,"g");for(let Ze=0;Ze<Je;Ze+=1)Ct=Ke[Ze],Ct&&Ct.length&&Ct!==Re&&Qe.push(Ct.replace(ht,""));return Qe}function en(ke,Re){if(!Re||"object"!=typeof ke)return ke.toString();if(Re.endsWith("()"))return ke[Re.slice(0,Re.length-2)]().toString();const Qe=Re.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".");for(const Xe of Qe)Xe in ke&&(ke=ke[Xe]);return ke?ke.toString():""}const xt="220ms cubic-bezier(0, 0, 0.2, 1)",Dt=(0,x.X$)("typeaheadAnimation",[(0,x.SB)("animated-down",(0,x.oB)({height:"*",overflow:"hidden"})),(0,x.eR)("* => animated-down",[(0,x.oB)({height:0,overflow:"hidden"}),(0,x.jt)(xt)]),(0,x.SB)("animated-up",(0,x.oB)({height:"*",overflow:"hidden"})),(0,x.eR)("* => animated-up",[(0,x.oB)({height:"*",overflow:"hidden"}),(0,x.jt)(xt)]),(0,x.eR)("* => unanimated",(0,x.jt)("0s"))]);let X=0,j=(()=>{class ke{constructor(Se,Qe,Xe,Ke){var Je;this.positionService=Se,this.renderer=Qe,this.element=Xe,this.changeDetectorRef=Ke,this.activeChangeEvent=new n.vpe,this.isFocused=!1,this.positionServiceSubscription=new S.w0,this.height=0,this.popupId="ngb-typeahead-"+X++,this._matches=[],this.renderer.setAttribute(this.element.nativeElement,"id",this.popupId),this.positionServiceSubscription.add(null===(Je=this.positionService.event$)||void 0===Je?void 0:Je.subscribe(()=>{if(this.isAnimated)return this.animationState=this.isTopPosition?"animated-up":"animated-down",void this.changeDetectorRef.detectChanges();this.animationState="unanimated",this.changeDetectorRef.detectChanges()}))}get isBs4(){return!(0,e.XA)()}get typeaheadTemplateMethods(){return{selectMatch:this.selectMatch.bind(this),selectActive:this.selectActive.bind(this),isActive:this.isActive.bind(this)}}get active(){return this._active}set active(Se){this._active=Se,this.activeChanged()}get matches(){return this._matches}set matches(Se){var Qe;if(this.positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition}},allowedPositions:["top","bottom"]}),this._matches=Se,this.needScrollbar=this.typeaheadScrollable&&this.typeaheadOptionsInScrollableView<this.matches.length,this.typeaheadScrollable&&setTimeout(()=>{this.setScrollableMode()}),this.typeaheadIsFirstItemActive&&this._matches.length>0&&(this.setActive(this._matches[0]),null!==(Qe=this._active)&&void 0!==Qe&&Qe.isHeader()&&this.nextActiveMatch()),this._active&&!this.typeaheadIsFirstItemActive){const Xe=this._matches.find(Ke=>{var Je;return Ke.value===(null===(Je=this._active)||void 0===Je?void 0:Je.value)});if(Xe)return void this.selectActive(Xe);this.active=void 0}}get isTopPosition(){return this.element.nativeElement.classList.contains("top")}get optionsListTemplate(){return this.parent?this.parent.optionsListTemplate:void 0}get isAnimated(){return!!this.parent&&this.parent.isAnimated}get adaptivePosition(){return!!this.parent&&this.parent.adaptivePosition}get typeaheadScrollable(){return!!this.parent&&this.parent.typeaheadScrollable}get typeaheadOptionsInScrollableView(){return this.parent?this.parent.typeaheadOptionsInScrollableView:5}get typeaheadIsFirstItemActive(){return!this.parent||this.parent.typeaheadIsFirstItemActive}get itemTemplate(){return this.parent?this.parent.typeaheadItemTemplate:void 0}get canSelectItemsOnBlur(){var Se;return!(null===(Se=this.parent)||void 0===Se||!Se.selectItemOnBlur)}selectActiveMatch(Se){var Qe,Xe;this._active&&null!==(Qe=this.parent)&&void 0!==Qe&&Qe.typeaheadSelectFirstItem&&this.selectMatch(this._active),(null===(Xe=this.parent)||void 0===Xe||!Xe.typeaheadSelectFirstItem)&&Se&&this.selectMatch(this._active)}activeChanged(){if(!this._active)return;const Se=this.matches.indexOf(this._active);this.activeChangeEvent.emit(`${this.popupId}-${Se}`)}prevActiveMatch(){if(!this._active)return;const Se=this.matches.indexOf(this._active);this.setActive(this.matches[Se-1<0?this.matches.length-1:Se-1]),this._active.isHeader()&&this.prevActiveMatch(),this.typeaheadScrollable&&this.scrollPrevious(Se)}nextActiveMatch(){var Se;const Qe=this._active?this.matches.indexOf(this._active):-1;this.setActive(this.matches[Qe+1>this.matches.length-1?0:Qe+1]),null!==(Se=this._active)&&void 0!==Se&&Se.isHeader()&&this.nextActiveMatch(),this.typeaheadScrollable&&this.scrollNext(Qe)}selectActive(Se){this.isFocused=!0,this.setActive(Se)}highlight(Se,Qe){let Je,Ct,Xe=Se.value,Ke=(this.parent&&this.parent.typeaheadLatinize?ct(Xe):Xe).toLowerCase();if("object"==typeof Qe){const ht=Qe.length;for(let Ze=0;Ze<ht;Ze+=1)Je=Ke.indexOf(Qe[Ze]),Ct=Qe[Ze].length,Je>=0&&Ct>0&&(Xe=`${Xe.substring(0,Je)}<strong>${Xe.substring(Je,Je+Ct)}</strong>${Xe.substring(Je+Ct)}`,Ke=`${Ke.substring(0,Je)}        ${" ".repeat(Ct)}         ${Ke.substring(Je+Ct)}`)}else Qe&&(Je=Ke.indexOf(Qe),Ct=Qe.length,Je>=0&&Ct>0&&(Xe=`${Xe.substring(0,Je)}<strong>${Xe.substring(Je,Je+Ct)}</strong>${Xe.substring(Je+Ct)}`));return Xe}focusLost(){this.isFocused=!1,this.canSelectItemsOnBlur||this.setActive(void 0)}isActive(Se){return this.active===Se}selectMatch(Se,Qe){var Xe;return Qe&&(Qe.stopPropagation(),Qe.preventDefault()),null===(Xe=this.parent)||void 0===Xe||Xe.changeModel(Se),setTimeout(()=>{var Ke;return null===(Ke=this.parent)||void 0===Ke?void 0:Ke.typeaheadOnSelect.emit(Se)},0),!1}setScrollableMode(){var Se;if(this.ulElement||(this.ulElement=this.element),null!==(Se=this.liElements)&&void 0!==Se&&Se.first){const Qe=e.cQ.getStyles(this.ulElement.nativeElement),Xe=e.cQ.getStyles(this.liElements.first.nativeElement),Ke=parseFloat((Qe["padding-bottom"]?Qe["padding-bottom"]:"").replace("px","")),Je=parseFloat((Qe["padding-top"]?Qe["padding-top"]:"0").replace("px","")),Ct=parseFloat((Xe.height?Xe.height:"0").replace("px",""));this.guiHeight=`${this.typeaheadOptionsInScrollableView*Ct+Je+Ke}px`}this.renderer.setStyle(this.element.nativeElement,"visibility","visible")}scrollPrevious(Se){if(0!==Se){if(this.liElements&&this.ulElement){const Qe=this.liElements.toArray()[Se-1];Qe&&!this.isScrolledIntoView(Qe.nativeElement)&&(this.ulElement.nativeElement.scrollTop=Qe.nativeElement.offsetTop)}}else this.scrollToBottom()}scrollNext(Se){if(Se+1>this.matches.length-1)this.scrollToTop();else if(this.liElements&&this.ulElement){const Qe=this.liElements.toArray()[Se+1];Qe&&!this.isScrolledIntoView(Qe.nativeElement)&&(this.ulElement.nativeElement.scrollTop=Qe.nativeElement.offsetTop-Number(this.ulElement.nativeElement.offsetHeight)+Number(Qe.nativeElement.offsetHeight))}}ngOnDestroy(){this.positionServiceSubscription.unsubscribe()}setActive(Se){var Qe;let Xe;this._active=Se,null==this._active||this._active.isHeader()||(Xe=Se),null===(Qe=this.parent)||void 0===Qe||Qe.typeaheadOnPreview.emit(Xe)}isScrolledIntoView(Se){if(!this.ulElement)return!1;const Qe=this.ulElement.nativeElement.scrollTop,Xe=Qe+Number(this.ulElement.nativeElement.offsetHeight),Ke=Se.offsetTop;return Ke+Se.offsetHeight<=Xe&&Ke>=Qe}scrollToBottom(){var Se;null===(Se=this.ulElement)||void 0===Se||!Se.nativeElement||(this.ulElement.nativeElement.scrollTop=this.ulElement.nativeElement.scrollHeight)}scrollToTop(){var Se;null===(Se=this.ulElement)||void 0===Se||!Se.nativeElement||(this.ulElement.nativeElement.scrollTop=0)}}return ke.\u0275fac=function(Se){return new(Se||ke)(n.Y36(h.sA),n.Y36(n.Qsj),n.Y36(n.SBq),n.Y36(n.sBO))},ke.\u0275cmp=n.Xpm({type:ke,selectors:[["typeahead-container"]],viewQuery:function(Se,Qe){if(1&Se&&(n.Gf(Y,5),n.Gf(fe,5)),2&Se){let Xe;n.iGM(Xe=n.CRH())&&(Qe.ulElement=Xe.first),n.iGM(Xe=n.CRH())&&(Qe.liElements=Xe)}},hostAttrs:[1,"dropdown","open","bottom",2,"position","absolute","display","block"],hostVars:9,hostBindings:function(Se,Qe){1&Se&&n.NdJ("mouseleave",function(){return Qe.focusLost()})("blur",function(){return Qe.focusLost()}),2&Se&&(n.uIk("role",Qe.isBs4?"listbox":null),n.Udp("height",Qe.isBs4&&Qe.needScrollbar?Qe.guiHeight:"auto")("visibility","inherit"),n.ekj("dropdown-menu",Qe.isBs4)("dropup",Qe.dropup))},outputs:{activeChangeEvent:"activeChange"},decls:7,vars:7,consts:[[3,"ngTemplateOutlet","ngTemplateOutletContext"],["bsItemTemplate",""],["bs3Template",""],["bs4Template",""],[3,"innerHtml"],["role","listbox",1,"dropdown-menu"],["ulElement",""],["ngFor","",3,"ngForOf"],["class","dropdown-header",4,"ngIf"],["role","option",3,"id","active","mouseenter",4,"ngIf"],[1,"dropdown-header"],["liElements",""],["role","option",3,"id","mouseenter"],["href","#","tabindex","-1",3,"click"],[3,"ngIf"],["role","option",1,"dropdown-item",3,"id","click","mouseenter"]],template:function(Se,Qe){if(1&Se&&(n.YNc(0,J,0,0,"ng-template",0),n.YNc(1,ee,1,1,"ng-template",null,1,n.W1O),n.YNc(3,me,3,5,"ng-template",null,2,n.W1O),n.YNc(5,Ge,1,1,"ng-template",null,3,n.W1O)),2&Se){const Xe=n.MAs(2),Ke=n.MAs(4),Je=n.MAs(6);n.Q6J("ngTemplateOutlet",Qe.optionsListTemplate||(Qe.isBs4?Je:Ke))("ngTemplateOutletContext",n.l5B(2,ve,Qe.matches,Qe.itemTemplate||Xe,Qe.query,Qe.typeaheadTemplateMethods))}},dependencies:[b.sg,b.O5,b.tP],styles:[".dropdown[_nghost-%COMP%]{z-index:1000}.dropdown-menu[_nghost-%COMP%], .dropdown-menu[_ngcontent-%COMP%]{overflow-y:auto;height:100px}"],data:{animation:[Dt]}}),ke})(),ae=(()=>{class ke{constructor(){this.adaptivePosition=!1,this.isAnimated=!1,this.hideResultsOnBlur=!0,this.cancelRequestOnFocusLost=!1,this.selectFirstItem=!0,this.isFirstItemActive=!0,this.minLength=1,this.selectItemOnBlur=!1}}return ke.\u0275fac=function(Se){return new(Se||ke)},ke.\u0275prov=n.Yz7({token:ke,factory:ke.\u0275fac,providedIn:"root"}),ke})(),Be=(()=>{class ke{constructor(Se,Qe,Xe,Ke,Je,Ct,ht){this.changeDetection=Xe,this.element=Ke,this.ngControl=Je,this.renderer=Ct,this.typeaheadMinLength=1,this.adaptivePosition=!1,this.isAnimated=!1,this.typeaheadWaitMs=0,this.typeaheadLatinize=!0,this.typeaheadSingleWords=!0,this.typeaheadWordDelimiters=" ",this.typeaheadMultipleSearchDelimiters=",",this.typeaheadPhraseDelimiters="'\"",this.typeaheadScrollable=!1,this.typeaheadOptionsInScrollableView=5,this.typeaheadSelectFirstItem=!0,this.typeaheadIsFirstItemActive=!0,this.typeaheadLoading=new n.vpe,this.typeaheadNoResults=new n.vpe,this.typeaheadOnSelect=new n.vpe,this.typeaheadOnPreview=new n.vpe,this.typeaheadOnBlur=new n.vpe,this.dropup=!1,this.isOpen=!1,this.list="list",this.isActiveItemChanged=!1,this.isFocused=!1,this.cancelRequestOnFocusLost=!1,this.selectItemOnBlur=!1,this.keyUpEventEmitter=new n.vpe,this.placement="bottom left",this._matches=[],this._subscriptions=[],this._outsideClickListener=()=>{},this._typeahead=Se.createLoader(Ke,ht,Ct).provide({provide:ae,useValue:Qe}),Object.assign(this,{typeaheadHideResultsOnBlur:Qe.hideResultsOnBlur,cancelRequestOnFocusLost:Qe.cancelRequestOnFocusLost,typeaheadSelectFirstItem:Qe.selectFirstItem,typeaheadIsFirstItemActive:Qe.isFirstItemActive,typeaheadMinLength:Qe.minLength,adaptivePosition:Qe.adaptivePosition,isAnimated:Qe.isAnimated,selectItemOnBlur:Qe.selectItemOnBlur})}get matches(){return this._matches}ngOnInit(){this.typeaheadOptionsLimit=this.typeaheadOptionsLimit||20,this.typeaheadMinLength=void 0===this.typeaheadMinLength?1:this.typeaheadMinLength,void 0===this.typeaheadAsync&&!(0,y.b)(this.typeahead)&&(this.typeaheadAsync=!1),(0,y.b)(this.typeahead)&&(this.typeaheadAsync=!0),this.typeaheadAsync?this.asyncActions():this.syncActions(),this.checkDelimitersConflict()}onInput(Se){const Qe=void 0!==Se.target.value?Se.target.value:void 0!==Se.target.textContent?Se.target.textContent:Se.target.innerText;null!=Qe&&Qe.trim().length>=this.typeaheadMinLength?(this.typeaheadLoading.emit(!0),this.keyUpEventEmitter.emit(Se.target.value)):(this.typeaheadLoading.emit(!1),this.typeaheadNoResults.emit(!1),this.hide())}onChange(Se){if(this._container){if(27===Se.keyCode||"Escape"===Se.key)return void this.hide();if(38===Se.keyCode||"ArrowUp"===Se.key)return this.isActiveItemChanged=!0,void this._container.prevActiveMatch();if(40===Se.keyCode||"ArrowDown"===Se.key)return this.isActiveItemChanged=!0,void this._container.nextActiveMatch();if(13===Se.keyCode||"Enter"===Se.key)return void this._container.selectActiveMatch()}}onFocus(){this.isFocused=!0,setTimeout(()=>{0===this.typeaheadMinLength&&(this.typeaheadLoading.emit(!0),this.keyUpEventEmitter.emit(this.element.nativeElement.value||""))},0)}onBlur(){var Se;this.isFocused=!1,this._container&&!this._container.isFocused&&this.typeaheadOnBlur.emit(this._container.active),!this.container&&0===(null===(Se=this._matches)||void 0===Se?void 0:Se.length)&&this.typeaheadOnBlur.emit(new _t(this.element.nativeElement.value,this.element.nativeElement.value,!1))}onKeydown(Se){if(this._container&&((9===Se.keyCode||"Tab"===Se.key)&&this.onBlur(),9===Se.keyCode||"Tab"===Se.key||13===Se.keyCode||"Enter"===Se.key)){if(Se.preventDefault(),this.typeaheadSelectFirstItem)return void this._container.selectActiveMatch();this.typeaheadSelectFirstItem||(this._container.selectActiveMatch(this.isActiveItemChanged),this.isActiveItemChanged=!1,this.hide())}}changeModel(Se){var Qe;if(!Se)return;let Xe;if(this.typeaheadMultipleSearch&&this._allEnteredValue){const Ke=this._allEnteredValue.split(new RegExp(`([${this.typeaheadMultipleSearchDelimiters}]+)`));this._allEnteredValue=Ke.slice(0,Ke.length-1).concat(Se.value).join(""),Xe=this._allEnteredValue}else Xe=Se.value;this.ngControl.viewToModelUpdate(Xe),null===(Qe=this.ngControl.control)||void 0===Qe||Qe.setValue(Xe),this.changeDetection.markForCheck(),this.hide()}show(){if(this._typeahead.attach(j).to(this.container).position({attachment:(this.dropup?"top":"bottom")+" left"}).show({typeaheadRef:this,placement:this.placement,animation:!1,dropup:this.dropup}),this._outsideClickListener=this.renderer.listen("document","click",Qe=>{0===this.typeaheadMinLength&&this.element.nativeElement.contains(Qe.target)||!this.typeaheadHideResultsOnBlur||this.element.nativeElement.contains(Qe.target)||this.onOutsideClick()}),!this._typeahead.instance||!this.ngControl.control)return;this._container=this._typeahead.instance,this._container.parent=this;const Se=(this.typeaheadLatinize?ct(this.ngControl.control.value):this.ngControl.control.value).toString().toLowerCase();this._container.query=this.tokenizeQuery(Se),this._container.matches=this._matches,this.element.nativeElement.focus(),this._container.activeChangeEvent.subscribe(Qe=>{this.activeDescendant=Qe,this.changeDetection.markForCheck()}),this.isOpen=!0}hide(){this._typeahead.isShown&&(this._typeahead.hide(),this._outsideClickListener(),this._container=void 0,this.isOpen=!1,this.changeDetection.markForCheck()),this.typeaheadOnPreview.emit()}onOutsideClick(){this._container&&!this._container.isFocused&&this.hide()}ngOnDestroy(){for(const Se of this._subscriptions)Se.unsubscribe();this._typeahead.dispose()}asyncActions(){this._subscriptions.push(this.keyUpEventEmitter.pipe((0,R.b)(this.typeaheadWaitMs),(0,k.b)(Se=>this._allEnteredValue=Se),(0,O.w)(()=>this.typeahead?this.typeahead:w.E)).subscribe(Se=>{this.finalizeAsyncCall(Se)}))}syncActions(){this._subscriptions.push(this.keyUpEventEmitter.pipe((0,R.b)(this.typeaheadWaitMs),(0,P.z)(Se=>{this._allEnteredValue=Se;const Qe=this.normalizeQuery(Se);return this.typeahead?((0,y.b)(this.typeahead)?this.typeahead:(0,f.D)(this.typeahead)).pipe((0,U.h)(Ke=>!!Ke&&this.testMatch(this.normalizeOption(Ke),Qe)),function Q(){return(0,M.e)((ke,Re)=>{(function B(ke,Re){return(0,M.e)((0,W.U)(ke,Re,arguments.length>=2,!1,!0))})(V,[])(ke).subscribe(Re)})}()):w.E})).subscribe(Se=>{this.finalizeAsyncCall(Se)}))}normalizeOption(Se){const Qe=en(Se,this.typeaheadOptionField);return(this.typeaheadLatinize?ct(Qe):Qe).toLowerCase()}tokenizeQuery(Se){let Qe=Se;return this.typeaheadMultipleSearch&&this.typeaheadSingleWords?this.haveCommonCharacters(`${this.typeaheadPhraseDelimiters}${this.typeaheadWordDelimiters}`,this.typeaheadMultipleSearchDelimiters)||(Qe=ft(Qe,this.typeaheadWordDelimiters,this.typeaheadPhraseDelimiters,this.typeaheadMultipleSearchDelimiters)):Qe=this.typeaheadSingleWords?ft(Qe,this.typeaheadWordDelimiters,this.typeaheadPhraseDelimiters):ft(Qe,void 0,void 0,this.typeaheadMultipleSearchDelimiters),Qe}normalizeQuery(Se){let Qe=(this.typeaheadLatinize?ct(Se):Se).toString().toLowerCase();return Qe=this.tokenizeQuery(Qe),Qe}testMatch(Se,Qe){let Xe;if("object"==typeof Qe){Xe=Qe.length;for(let Ke=0;Ke<Xe;Ke+=1)if(Qe[Ke].length>0&&Se.indexOf(Qe[Ke])<0)return!1;return!0}return Se.indexOf(Qe)>=0}finalizeAsyncCall(Se){if(this.prepareMatches(Se||[]),this.typeaheadLoading.emit(!1),this.typeaheadNoResults.emit(!this.hasMatches()),this.hasMatches()){if(this.isFocused||!this.cancelRequestOnFocusLost)if(this._container&&this.ngControl.control){const Xe=((this.typeaheadLatinize?ct(this.ngControl.control.value):this.ngControl.control.value)||"").toString().toLowerCase();this._container.query=this.tokenizeQuery(Xe),this._container.matches=this._matches}else this.show()}else this.hide()}prepareMatches(Se){const Qe=Se.slice(0,this.typeaheadOptionsLimit),Xe=this.typeaheadOrderBy?this.orderMatches(Qe):Qe;if(this.typeaheadGroupField){let Ke=[];Xe.map(Ct=>en(Ct,this.typeaheadGroupField)).filter((Ct,ht,Ze)=>Ze.indexOf(Ct)===ht).forEach(Ct=>{Ke.push(new _t(Ct,Ct,!0)),Ke=Ke.concat(Xe.filter(ht=>en(ht,this.typeaheadGroupField)===Ct).map(ht=>new _t(ht,en(ht,this.typeaheadOptionField))))}),this._matches=Ke}else this._matches=Xe.map(Ke=>new _t(Ke,en(Ke,this.typeaheadOptionField)))}orderMatches(Se){if(!Se.length)return Se;if(null!=this.typeaheadOrderBy&&"object"==typeof this.typeaheadOrderBy&&0===Object.keys(this.typeaheadOrderBy).length)return console.error("Field and direction properties for typeaheadOrderBy have to be set according to documentation!"),Se;const{field:Qe,direction:Xe}=this.typeaheadOrderBy||{};return!Xe||"asc"!==Xe&&"desc"!==Xe?(console.error('typeaheadOrderBy direction has to equal "asc" or "desc". Please follow the documentation.'),Se):"string"==typeof Se[0]?"asc"===Xe?Se.sort():Se.sort().reverse():Qe&&"string"==typeof Qe?Se.sort((Ke,Je)=>{const Ct=en(Ke,Qe),ht=en(Je,Qe);return Ct<ht?"asc"===Xe?-1:1:Ct>ht?"asc"===Xe?1:-1:0}):(console.error("typeaheadOrderBy field has to set according to the documentation."),Se)}hasMatches(){return this._matches.length>0}checkDelimitersConflict(){if(this.typeaheadMultipleSearch&&this.typeaheadSingleWords&&this.haveCommonCharacters(`${this.typeaheadPhraseDelimiters}${this.typeaheadWordDelimiters}`,this.typeaheadMultipleSearchDelimiters))throw new Error(`Delimiters used in typeaheadMultipleSearchDelimiters must be different\n          from delimiters used in typeaheadWordDelimiters (current value: ${this.typeaheadWordDelimiters}) and\n          typeaheadPhraseDelimiters (current value: ${this.typeaheadPhraseDelimiters}).\n          Please refer to the documentation`)}haveCommonCharacters(Se,Qe){for(let Xe=0;Xe<Se.length;Xe++)if(Se.charAt(Xe).indexOf(Qe)>-1)return!0;return!1}}return ke.\u0275fac=function(Se){return new(Se||ke)(n.Y36(N.oj),n.Y36(ae),n.Y36(n.sBO),n.Y36(n.SBq),n.Y36(g.a5),n.Y36(n.Qsj),n.Y36(n.s_b))},ke.\u0275dir=n.lG2({type:ke,selectors:[["","typeahead",""]],hostVars:4,hostBindings:function(Se,Qe){1&Se&&n.NdJ("input",function(Ke){return Qe.onInput(Ke)})("keyup",function(Ke){return Qe.onChange(Ke)})("click",function(){return Qe.onFocus()})("focus",function(){return Qe.onFocus()})("blur",function(){return Qe.onBlur()})("keydown",function(Ke){return Qe.onKeydown(Ke)}),2&Se&&n.uIk("aria-activedescendant",Qe.activeDescendant)("aria-owns",Qe.isOpen?Qe._container.popupId:null)("aria-expanded",Qe.isOpen)("aria-autocomplete",Qe.list)},inputs:{typeahead:"typeahead",typeaheadMinLength:"typeaheadMinLength",adaptivePosition:"adaptivePosition",isAnimated:"isAnimated",typeaheadWaitMs:"typeaheadWaitMs",typeaheadOptionsLimit:"typeaheadOptionsLimit",typeaheadOptionField:"typeaheadOptionField",typeaheadGroupField:"typeaheadGroupField",typeaheadOrderBy:"typeaheadOrderBy",typeaheadAsync:"typeaheadAsync",typeaheadLatinize:"typeaheadLatinize",typeaheadSingleWords:"typeaheadSingleWords",typeaheadWordDelimiters:"typeaheadWordDelimiters",typeaheadMultipleSearch:"typeaheadMultipleSearch",typeaheadMultipleSearchDelimiters:"typeaheadMultipleSearchDelimiters",typeaheadPhraseDelimiters:"typeaheadPhraseDelimiters",typeaheadItemTemplate:"typeaheadItemTemplate",optionsListTemplate:"optionsListTemplate",typeaheadScrollable:"typeaheadScrollable",typeaheadOptionsInScrollableView:"typeaheadOptionsInScrollableView",typeaheadHideResultsOnBlur:"typeaheadHideResultsOnBlur",typeaheadSelectFirstItem:"typeaheadSelectFirstItem",typeaheadIsFirstItemActive:"typeaheadIsFirstItemActive",container:"container",dropup:"dropup"},outputs:{typeaheadLoading:"typeaheadLoading",typeaheadNoResults:"typeaheadNoResults",typeaheadOnSelect:"typeaheadOnSelect",typeaheadOnPreview:"typeaheadOnPreview",typeaheadOnBlur:"typeaheadOnBlur"},exportAs:["bs-typeahead"]}),ke})(),je=(()=>{class ke{static forRoot(){return{ngModule:ke,providers:[N.oj,h.sA]}}}return ke.\u0275fac=function(Se){return new(Se||ke)},ke.\u0275mod=n.oAB({type:ke}),ke.\u0275inj=n.cJS({imports:[b.ez]}),ke})()},1607:(nt,_e,m)=>{"use strict";m.d(_e,{AL:()=>S,C:()=>x,GU:()=>me,O4:()=>De,Rg:()=>f,Wl:()=>te,XA:()=>ee,cQ:()=>we,tj:()=>g,u9:()=>b,wo:()=>w});var n=m(4650);class e{constructor(ve,c){this.open=ve,this.close=c||ve}isManual(){return"manual"===this.open||"manual"===this.close}}const h={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};function S(Ge,ve=h){const c=(Ge||"").trim();if(0===c.length)return[];const tt=c.split(/\s+/).map(ct=>ct.split(":")).map(ct=>{const rt=ve[ct[0]]||ct;return new e(rt[0],rt[1])}),_t=tt.filter(ct=>ct.isManual());if(_t.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===_t.length&&tt.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return tt}function w(Ge,ve){const c=S(ve.triggers),tt=ve.target;if(1===c.length&&c[0].isManual())return Function.prototype;const _t=[],ct=[],rt=()=>{ct.forEach(ft=>_t.push(ft())),ct.length=0};return c.forEach(ft=>{const qt=ft.open===ft.close,en=qt?ve.toggle:ve.show;if(!qt&&ft.close&&ve.hide){const xt=Ge.listen(tt,ft.close,ve.hide);ct.push(()=>xt)}en&&_t.push(Ge.listen(tt,ft.open,()=>en(rt)))}),()=>{_t.forEach(ft=>ft())}}function f(Ge,ve){return ve.outsideClick?Ge.listen("document","click",c=>{ve.target&&ve.target.contains(c.target)||ve.targets&&ve.targets.some(tt=>tt.contains(c.target))||ve.hide&&ve.hide()}):Function.prototype}function x(Ge,ve){return ve.outsideEsc?Ge.listen("document","keyup.esc",c=>{ve.target&&ve.target.contains(c.target)||ve.targets&&ve.targets.some(tt=>tt.contains(c.target))||ve.hide&&ve.hide()}):Function.prototype}const b=typeof window<"u"&&window||{},g=b.document;var Q=(()=>{return(Ge=Q||(Q={})).isBs3="bs3",Ge.isBs4="bs4",Ge.isBs5="bs5",Q;var Ge})();let Y;function fe(){if(typeof b.document>"u")return"bs4";const Ge=b.document.createElement("span");Ge.innerText="testing bs version",Ge.classList.add("d-none"),Ge.classList.add("pl-1"),b.document.head.appendChild(Ge);const ve=Ge.getBoundingClientRect(),c=b.getComputedStyle(Ge).paddingLeft;return!ve||ve&&0!==ve.top?(b.document.head.removeChild(Ge),"bs3"):c&&parseFloat(c)?(b.document.head.removeChild(Ge),"bs4"):(b.document.head.removeChild(Ge),"bs5")}function ee(){return typeof b>"u"||(typeof b.__theme>"u"?(Y||(Y=fe()),"bs3"===Y):"bs3"===b.__theme)}function G(){return!ee()&&(Y||(Y=fe()),"bs4"===Y)}function te(){return{isBs3:ee(),isBs4:G(),isBs5:!ee()&&!G()&&(Y||(Y=fe()),"bs5"===Y)}}function me(){return function(c,tt){const _t=` __${tt}Value`;Object.defineProperty(c,tt,{get(){return this[_t]},set(ct){const rt=this[_t];this[_t]=ct,rt!==ct&&this[tt+"Change"]&&this[tt+"Change"].emit(ct)}})}}class we{static reflow(ve){}static getStyles(ve){let c=ve.ownerDocument.defaultView;return(!c||!c.opener)&&(c=b),c.getComputedStyle(ve)}static stackOverflowConfig(){const ve=function $(){const Ge=te(),ve=Object.keys(Ge).find(c=>Ge[c]);return Q[ve]}();return{crossorigin:"bs3"!==ve?"anonymous":void 0,integrity:"bs5"===ve?"sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We":"bs4"===ve?"sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2":void 0,cdnLink:"bs5"===ve?"https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css":"bs4"===ve?"https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css":"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}}}const ye={},qe=typeof console>"u"||!("warn"in console);function De(Ge){!(0,n.X6Q)()||qe||Ge in ye||(ye[Ge]=!0,console.warn(Ge))}},7185:(nt,_e,m)=>{"use strict";m.d(_e,{Rh:()=>De,_W:()=>we});var n=m(4650),e=m(7340),h=m(7579),S=m(6895),y=m(1481);const w=["toast-component",""];function f(_t,ct){if(1&_t){const rt=n.EpF();n.TgZ(0,"button",5),n.NdJ("click",function(){n.CHM(rt);const qt=n.oxw();return n.KtG(qt.remove())}),n.TgZ(1,"span",6),n._uU(2,"\xd7"),n.qZA()()}}function x(_t,ct){if(1&_t&&(n.ynx(0),n._uU(1),n.BQk()),2&_t){const rt=n.oxw(2);n.xp6(1),n.hij("[",rt.duplicatesCount+1,"]")}}function b(_t,ct){if(1&_t&&(n.TgZ(0,"div"),n._uU(1),n.YNc(2,x,2,1,"ng-container",4),n.qZA()),2&_t){const rt=n.oxw();n.Tol(rt.options.titleClass),n.uIk("aria-label",rt.title),n.xp6(1),n.hij(" ",rt.title," "),n.xp6(1),n.Q6J("ngIf",rt.duplicatesCount)}}function g(_t,ct){if(1&_t&&n._UZ(0,"div",7),2&_t){const rt=n.oxw();n.Tol(rt.options.messageClass),n.Q6J("innerHTML",rt.message,n.oJD)}}function N(_t,ct){if(1&_t&&(n.TgZ(0,"div",8),n._uU(1),n.qZA()),2&_t){const rt=n.oxw();n.Tol(rt.options.messageClass),n.uIk("aria-label",rt.message),n.xp6(1),n.hij(" ",rt.message," ")}}function R(_t,ct){if(1&_t&&(n.TgZ(0,"div"),n._UZ(1,"div",9),n.qZA()),2&_t){const rt=n.oxw();n.xp6(1),n.Udp("width",rt.width+"%")}}class Q{constructor(ct,rt){this.component=ct,this.injector=rt}attach(ct,rt){return this._attachedHost=ct,ct.attach(this,rt)}detach(){const ct=this._attachedHost;if(ct)return this._attachedHost=void 0,ct.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(ct){this._attachedHost=ct}}class fe{constructor(ct,rt,ft,qt,en,xt){this.toastId=ct,this.config=rt,this.message=ft,this.title=qt,this.toastType=en,this.toastRef=xt,this._onTap=new h.x,this._onAction=new h.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(ct){this._onAction.next(ct)}onAction(){return this._onAction.asObservable()}}const ee=new n.OlP("ToastConfig");class G{constructor(ct){this._overlayRef=ct,this.duplicatesCount=0,this._afterClosed=new h.x,this._activate=new h.x,this._manualClose=new h.x,this._resetTimeout=new h.x,this._countDuplicate=new h.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(ct,rt){ct&&this._resetTimeout.next(),rt&&this._countDuplicate.next(++this.duplicatesCount)}}class E{constructor(ct,rt){this._toastPackage=ct,this._parentInjector=rt}get(ct,rt,ft){return ct===fe?this._toastPackage:this._parentInjector.get(ct,rt,ft)}}class te extends class Y{attach(ct,rt){return this._attachedPortal=ct,this.attachComponentPortal(ct,rt)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(ct){this._disposeFn=ct}}{constructor(ct,rt,ft){super(),this._hostDomElement=ct,this._componentFactoryResolver=rt,this._appRef=ft}attachComponentPortal(ct,rt){const ft=this._componentFactoryResolver.resolveComponentFactory(ct.component);let qt;return qt=ft.create(ct.injector),this._appRef.attachView(qt.hostView),this.setDisposeFn(()=>{this._appRef.detachView(qt.hostView),qt.destroy()}),rt?this._hostDomElement.insertBefore(this._getComponentRootNode(qt),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(qt)),qt}_getComponentRootNode(ct){return ct.hostView.rootNodes[0]}}class ${constructor(ct){this._portalHost=ct}attach(ct,rt=!0){return this._portalHost.attach(ct,rt)}detach(){return this._portalHost.detach()}}let ue=(()=>{class _t{constructor(rt){this._document=rt}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const rt=this._document.createElement("div");rt.classList.add("overlay-container"),rt.setAttribute("aria-live","polite"),this._document.body.appendChild(rt),this._containerElement=rt}}return _t.\u0275fac=function(rt){return new(rt||_t)(n.LFG(S.K0))},_t.\u0275prov=n.Yz7({token:_t,factory:_t.\u0275fac,providedIn:"root"}),_t})(),me=(()=>{class _t{constructor(rt,ft,qt,en){this._overlayContainer=rt,this._componentFactoryResolver=ft,this._appRef=qt,this._document=en,this._paneElements=new Map}create(rt,ft){return this._createOverlayRef(this.getPaneElement(rt,ft))}getPaneElement(rt="",ft){return this._paneElements.get(ft)||this._paneElements.set(ft,{}),this._paneElements.get(ft)[rt]||(this._paneElements.get(ft)[rt]=this._createPaneElement(rt,ft)),this._paneElements.get(ft)[rt]}_createPaneElement(rt,ft){const qt=this._document.createElement("div");return qt.id="toast-container",qt.classList.add(rt),qt.classList.add("toast-container"),ft?ft.getContainerElement().appendChild(qt):this._overlayContainer.getContainerElement().appendChild(qt),qt}_createPortalHost(rt){return new te(rt,this._componentFactoryResolver,this._appRef)}_createOverlayRef(rt){return new $(this._createPortalHost(rt))}}return _t.\u0275fac=function(rt){return new(rt||_t)(n.LFG(ue),n.LFG(n._Vd),n.LFG(n.z2F),n.LFG(S.K0))},_t.\u0275prov=n.Yz7({token:_t,factory:_t.\u0275fac,providedIn:"root"}),_t})(),we=(()=>{class _t{constructor(rt,ft,qt,en,xt){this.overlay=ft,this._injector=qt,this.sanitizer=en,this.ngZone=xt,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...rt.default,...rt.config},rt.config.iconClasses&&(this.toastrConfig.iconClasses={...rt.default.iconClasses,...rt.config.iconClasses})}show(rt,ft,qt={},en=""){return this._preBuildNotification(en,rt,ft,this.applyConfig(qt))}success(rt,ft,qt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",rt,ft,this.applyConfig(qt))}error(rt,ft,qt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",rt,ft,this.applyConfig(qt))}info(rt,ft,qt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",rt,ft,this.applyConfig(qt))}warning(rt,ft,qt={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",rt,ft,this.applyConfig(qt))}clear(rt){for(const ft of this.toasts)if(void 0!==rt){if(ft.toastId===rt)return void ft.toastRef.manualClose()}else ft.toastRef.manualClose()}remove(rt){const ft=this._findToast(rt);if(!ft||(ft.activeToast.toastRef.close(),this.toasts.splice(ft.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const qt=this.toasts[this.currentlyActive].toastRef;qt.isInactive()||(this.currentlyActive=this.currentlyActive+1,qt.activate())}return!0}findDuplicate(rt="",ft="",qt,en){const{includeTitleDuplicates:xt}=this.toastrConfig;for(const Dt of this.toasts){const X=xt&&Dt.title===rt;if((!xt||X)&&Dt.message===ft)return Dt.toastRef.onDuplicate(qt,en),Dt}return null}applyConfig(rt={}){return{...this.toastrConfig,...rt}}_findToast(rt){for(let ft=0;ft<this.toasts.length;ft++)if(this.toasts[ft].toastId===rt)return{index:ft,activeToast:this.toasts[ft]};return null}_preBuildNotification(rt,ft,qt,en){return en.onActivateTick?this.ngZone.run(()=>this._buildNotification(rt,ft,qt,en)):this._buildNotification(rt,ft,qt,en)}_buildNotification(rt,ft,qt,en){if(!en.toastComponent)throw new Error("toastComponent required");const xt=this.findDuplicate(qt,ft,this.toastrConfig.resetTimeoutOnDuplicate&&en.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&qt||ft)&&this.toastrConfig.preventDuplicates&&null!==xt)return xt;this.previousToastMessage=ft;let Dt=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(Dt=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const X=this.overlay.create(en.positionClass,this.overlayContainer);this.index=this.index+1;let j=ft;ft&&en.enableHtml&&(j=this.sanitizer.sanitize(n.q3G.HTML,ft));const ae=new G(X),Be=new fe(this.index,en,j,qt,rt,ae),je=new E(Be,this._injector),ke=new Q(en.toastComponent,je),Re=X.attach(ke,this.toastrConfig.newestOnTop);ae.componentInstance=Re.instance;const Se={toastId:this.index,title:qt||"",message:ft||"",toastRef:ae,onShown:ae.afterActivate(),onHidden:ae.afterClosed(),onTap:Be.onTap(),onAction:Be.onAction(),portal:Re};return Dt||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{Se.toastRef.activate()})),this.toasts.push(Se),Se}}return _t.\u0275fac=function(rt){return new(rt||_t)(n.LFG(ee),n.LFG(me),n.LFG(n.zs3),n.LFG(y.H7),n.LFG(n.R0b))},_t.\u0275prov=n.Yz7({token:_t,factory:_t.\u0275fac,providedIn:"root"}),_t})();const qe={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class _t{constructor(rt,ft,qt){this.toastrService=rt,this.toastPackage=ft,this.ngZone=qt,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=ft.message,this.title=ft.title,this.options=ft.config,this.originalTimeout=ft.config.timeOut,this.toastClasses=`${ft.toastType} ${ft.config.toastClass}`,this.sub=ft.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=ft.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=ft.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=ft.toastRef.countDuplicate().subscribe(en=>{this.duplicatesCount=en})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const rt=(new Date).getTime();this.width=(this.hideTime-rt)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(rt,ft){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(rt),ft)):this.timeout=setTimeout(()=>rt(),ft)}outsideInterval(rt,ft){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(rt),ft)):this.intervalId=setInterval(()=>rt(),ft)}runInsideAngular(rt){this.ngZone?this.ngZone.run(()=>rt()):rt()}}return _t.\u0275fac=function(rt){return new(rt||_t)(n.Y36(we),n.Y36(fe),n.Y36(n.R0b))},_t.\u0275cmp=n.Xpm({type:_t,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(rt,ft){1&rt&&n.NdJ("click",function(){return ft.tapToast()})("mouseenter",function(){return ft.stickAround()})("mouseleave",function(){return ft.delayedHideToast()}),2&rt&&(n.d8E("@flyInOut",ft.state),n.Tol(ft.toastClasses),n.Udp("display",ft.displayStyle))},attrs:w,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(rt,ft){1&rt&&(n.YNc(0,f,3,0,"button",0),n.YNc(1,b,3,5,"div",1),n.YNc(2,g,1,3,"div",2),n.YNc(3,N,2,4,"div",3),n.YNc(4,R,2,2,"div",4)),2&rt&&(n.Q6J("ngIf",ft.options.closeButton),n.xp6(1),n.Q6J("ngIf",ft.title),n.xp6(1),n.Q6J("ngIf",ft.message&&ft.options.enableHtml),n.xp6(1),n.Q6J("ngIf",ft.message&&!ft.options.enableHtml),n.xp6(1),n.Q6J("ngIf",ft.options.progressBar))},dependencies:[S.O5],encapsulation:2,data:{animation:[(0,e.X$)("flyInOut",[(0,e.SB)("inactive",(0,e.oB)({opacity:0})),(0,e.SB)("active",(0,e.oB)({opacity:1})),(0,e.SB)("removed",(0,e.oB)({opacity:0})),(0,e.eR)("inactive => active",(0,e.jt)("{{ easeTime }}ms {{ easing }}")),(0,e.eR)("active => removed",(0,e.jt)("{{ easeTime }}ms {{ easing }}"))])]}}),_t})()};let De=(()=>{class _t{static forRoot(rt={}){return{ngModule:_t,providers:[{provide:ee,useValue:{default:qe,config:rt}}]}}}return _t.\u0275fac=function(rt){return new(rt||_t)},_t.\u0275mod=n.oAB({type:_t}),_t.\u0275inj=n.cJS({imports:[[S.ez]]}),_t})()},6349:(nt,_e,m)=>{"use strict";m.d(_e,{r3:()=>Ss,e5:()=>Kn,sE:()=>gr,cx:()=>Rn,UI:()=>_r,G:()=>Rr,jj:()=>ei,Tw:()=>ei,zu:()=>fs});var n={};m.r(n),m.d(n,{VERSION:()=>e,after:()=>Xi,all:()=>Ls,allKeys:()=>Zt,any:()=>Rr,assign:()=>Zn,before:()=>Si,bind:()=>Zi,bindAll:()=>Gs,chain:()=>pr,chunk:()=>xn,clone:()=>Ot,collect:()=>_r,compact:()=>Er,compose:()=>Fr,constant:()=>Be,contains:()=>Ss,countBy:()=>Vi,create:()=>at,debounce:()=>Ts,default:()=>Ir,defaults:()=>zn,defer:()=>zs,delay:()=>ys,detect:()=>gr,difference:()=>Kn,drop:()=>yr,each:()=>zi,escape:()=>ws,every:()=>Ls,extend:()=>Fn,extendOwn:()=>Zn,filter:()=>zr,find:()=>gr,findIndex:()=>Rn,findKey:()=>Hn,findLastIndex:()=>mr,findWhere:()=>ls,first:()=>Ti,flatten:()=>cn,foldl:()=>vr,foldr:()=>Ni,forEach:()=>zi,functions:()=>jn,get:()=>Ei,groupBy:()=>_o,has:()=>os,head:()=>Ti,identity:()=>Nn,include:()=>Ss,includes:()=>Ss,indexBy:()=>Ii,indexOf:()=>Qr,initial:()=>Ao,inject:()=>vr,intersection:()=>Te,invert:()=>Ft,invoke:()=>Di,isArguments:()=>X,isArray:()=>en,isArrayBuffer:()=>De,isBoolean:()=>G,isDataView:()=>qt,isDate:()=>me,isElement:()=>E,isEmpty:()=>oe,isEqual:()=>Tt,isError:()=>ye,isFinite:()=>j,isFunction:()=>c,isMap:()=>ln,isMatch:()=>ie,isNaN:()=>ae,isNull:()=>J,isNumber:()=>ue,isObject:()=>fe,isRegExp:()=>we,isSet:()=>Tn,isString:()=>$,isSymbol:()=>qe,isTypedArray:()=>Ke,isUndefined:()=>ee,isWeakMap:()=>kn,isWeakSet:()=>qn,iteratee:()=>Gi,keys:()=>Ze,last:()=>Vr,lastIndexOf:()=>Zr,map:()=>_r,mapObject:()=>Yi,matcher:()=>mi,matches:()=>mi,max:()=>jr,memoize:()=>po,methods:()=>jn,min:()=>ss,mixin:()=>Dr,negate:()=>Ys,noop:()=>Jr,now:()=>kr,object:()=>$e,omit:()=>Kr,once:()=>Cs,pairs:()=>Yn,partial:()=>Br,partition:()=>xr,pick:()=>rr,pluck:()=>xs,property:()=>ur,propertyOf:()=>qr,random:()=>Vn,range:()=>$t,reduce:()=>vr,reduceRight:()=>Ni,reject:()=>Wr,rest:()=>yr,restArguments:()=>Y,result:()=>di,sample:()=>Es,select:()=>zr,shuffle:()=>ki,size:()=>Wn,some:()=>Rr,sortBy:()=>No,sortedIndex:()=>Sr,tail:()=>yr,take:()=>Ti,tap:()=>Ht,template:()=>wi,templateSettings:()=>st,throttle:()=>is,times:()=>Tr,toArray:()=>Us,toPath:()=>hn,transpose:()=>he,unescape:()=>We,union:()=>Hi,uniq:()=>ei,unique:()=>ei,uniqueId:()=>dr,unzip:()=>he,values:()=>ri,where:()=>To,without:()=>fs,wrap:()=>ho,zip:()=>z});var e="1.13.4",h="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},S=Array.prototype,y=Object.prototype,w=typeof Symbol<"u"?Symbol.prototype:null,f=S.push,x=S.slice,b=y.toString,g=y.hasOwnProperty,N=typeof ArrayBuffer<"u",R=typeof DataView<"u",k=Array.isArray,O=Object.keys,P=Object.create,U=N&&ArrayBuffer.isView,W=isNaN,M=isFinite,B=!{toString:null}.propertyIsEnumerable("toString"),V=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Q=Math.pow(2,53)-1;function Y(Ie,Fe){return Fe=null==Fe?Ie.length-1:+Fe,function(){for(var yt=Math.max(arguments.length-Fe,0),At=Array(yt),Bt=0;Bt<yt;Bt++)At[Bt]=arguments[Bt+Fe];switch(Fe){case 0:return Ie.call(this,At);case 1:return Ie.call(this,arguments[0],At);case 2:return Ie.call(this,arguments[0],arguments[1],At)}var Lt=Array(Fe+1);for(Bt=0;Bt<Fe;Bt++)Lt[Bt]=arguments[Bt];return Lt[Fe]=At,Ie.apply(this,Lt)}}function fe(Ie){var Fe=typeof Ie;return"function"===Fe||"object"===Fe&&!!Ie}function J(Ie){return null===Ie}function ee(Ie){return void 0===Ie}function G(Ie){return!0===Ie||!1===Ie||"[object Boolean]"===b.call(Ie)}function E(Ie){return!(!Ie||1!==Ie.nodeType)}function te(Ie){var Fe="[object "+Ie+"]";return function(yt){return b.call(yt)===Fe}}const $=te("String"),ue=te("Number"),me=te("Date"),we=te("RegExp"),ye=te("Error"),qe=te("Symbol"),De=te("ArrayBuffer");var Ge=te("Function");"object"!=typeof Int8Array&&"function"!=typeof(h.document&&h.document.childNodes)&&(Ge=function(Ie){return"function"==typeof Ie||!1});const c=Ge,tt=te("Object");var _t=R&&tt(new DataView(new ArrayBuffer(8))),ct=typeof Map<"u"&&tt(new Map),rt=te("DataView");const qt=_t?function ft(Ie){return null!=Ie&&c(Ie.getInt8)&&De(Ie.buffer)}:rt,en=k||te("Array");function xt(Ie,Fe){return null!=Ie&&g.call(Ie,Fe)}var Dt=te("Arguments");!function(){Dt(arguments)||(Dt=function(Ie){return xt(Ie,"callee")})}();const X=Dt;function j(Ie){return!qe(Ie)&&M(Ie)&&!isNaN(parseFloat(Ie))}function ae(Ie){return ue(Ie)&&W(Ie)}function Be(Ie){return function(){return Ie}}function je(Ie){return function(Fe){var yt=Ie(Fe);return"number"==typeof yt&&yt>=0&&yt<=Q}}function ke(Ie){return function(Fe){return Fe?.[Ie]}}const Re=ke("byteLength"),Se=je(Re);var Qe=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const Ke=N?function Xe(Ie){return U?U(Ie)&&!qt(Ie):Se(Ie)&&Qe.test(b.call(Ie))}:Be(!1),Je=ke("length");function ht(Ie,Fe){Fe=function Ct(Ie){for(var Fe={},yt=Ie.length,At=0;At<yt;++At)Fe[Ie[At]]=!0;return{contains:function(Bt){return!0===Fe[Bt]},push:function(Bt){return Fe[Bt]=!0,Ie.push(Bt)}}}(Fe);var yt=V.length,At=Ie.constructor,Bt=c(At)&&At.prototype||y,Lt="constructor";for(xt(Ie,Lt)&&!Fe.contains(Lt)&&Fe.push(Lt);yt--;)(Lt=V[yt])in Ie&&Ie[Lt]!==Bt[Lt]&&!Fe.contains(Lt)&&Fe.push(Lt)}function Ze(Ie){if(!fe(Ie))return[];if(O)return O(Ie);var Fe=[];for(var yt in Ie)xt(Ie,yt)&&Fe.push(yt);return B&&ht(Ie,Fe),Fe}function oe(Ie){if(null==Ie)return!0;var Fe=Je(Ie);return"number"==typeof Fe&&(en(Ie)||$(Ie)||X(Ie))?0===Fe:0===Je(Ze(Ie))}function ie(Ie,Fe){var yt=Ze(Fe),At=yt.length;if(null==Ie)return!At;for(var Bt=Object(Ie),Lt=0;Lt<At;Lt++){var tn=yt[Lt];if(Fe[tn]!==Bt[tn]||!(tn in Bt))return!1}return!0}function L(Ie){return Ie instanceof L?Ie:this instanceof L?void(this._wrapped=Ie):new L(Ie)}function ne(Ie){return new Uint8Array(Ie.buffer||Ie,Ie.byteOffset||0,Re(Ie))}L.VERSION=e,L.prototype.valueOf=L.prototype.toJSON=L.prototype.value=function(){return this._wrapped},L.prototype.toString=function(){return String(this._wrapped)};var Ne="[object DataView]";function ze(Ie,Fe,yt,At){if(Ie===Fe)return 0!==Ie||1/Ie==1/Fe;if(null==Ie||null==Fe)return!1;if(Ie!=Ie)return Fe!=Fe;var Bt=typeof Ie;return("function"===Bt||"object"===Bt||"object"==typeof Fe)&&et(Ie,Fe,yt,At)}function et(Ie,Fe,yt,At){Ie instanceof L&&(Ie=Ie._wrapped),Fe instanceof L&&(Fe=Fe._wrapped);var Bt=b.call(Ie);if(Bt!==b.call(Fe))return!1;if(_t&&"[object Object]"==Bt&&qt(Ie)){if(!qt(Fe))return!1;Bt=Ne}switch(Bt){case"[object RegExp]":case"[object String]":return""+Ie==""+Fe;case"[object Number]":return+Ie!=+Ie?+Fe!=+Fe:0==+Ie?1/+Ie==1/Fe:+Ie==+Fe;case"[object Date]":case"[object Boolean]":return+Ie==+Fe;case"[object Symbol]":return w.valueOf.call(Ie)===w.valueOf.call(Fe);case"[object ArrayBuffer]":case Ne:return et(ne(Ie),ne(Fe),yt,At)}var Lt="[object Array]"===Bt;if(!Lt&&Ke(Ie)){if(Re(Ie)!==Re(Fe))return!1;if(Ie.buffer===Fe.buffer&&Ie.byteOffset===Fe.byteOffset)return!0;Lt=!0}if(!Lt){if("object"!=typeof Ie||"object"!=typeof Fe)return!1;var fn=Ie.constructor,$n=Fe.constructor;if(fn!==$n&&!(c(fn)&&fn instanceof fn&&c($n)&&$n instanceof $n)&&"constructor"in Ie&&"constructor"in Fe)return!1}At=At||[];for(var Ln=(yt=yt||[]).length;Ln--;)if(yt[Ln]===Ie)return At[Ln]===Fe;if(yt.push(Ie),At.push(Fe),Lt){if((Ln=Ie.length)!==Fe.length)return!1;for(;Ln--;)if(!ze(Ie[Ln],Fe[Ln],yt,At))return!1}else{var Pr,lr=Ze(Ie);if(Ln=lr.length,Ze(Fe).length!==Ln)return!1;for(;Ln--;)if(!xt(Fe,Pr=lr[Ln])||!ze(Ie[Pr],Fe[Pr],yt,At))return!1}return yt.pop(),At.pop(),!0}function Tt(Ie,Fe){return ze(Ie,Fe)}function Zt(Ie){if(!fe(Ie))return[];var Fe=[];for(var yt in Ie)Fe.push(yt);return B&&ht(Ie,Fe),Fe}function gn(Ie){var Fe=Je(Ie);return function(yt){if(null==yt)return!1;var At=Zt(yt);if(Je(At))return!1;for(var Bt=0;Bt<Fe;Bt++)if(!c(yt[Ie[Bt]]))return!1;return Ie!==bt||!c(yt[Yt])}}var Yt="forEach",Xt=["clear","delete"],it=["get","has","set"],Gt=Xt.concat(Yt,it),bt=Xt.concat(it),jt=["add"].concat(Xt,Yt,"has");const ln=ct?gn(Gt):te("Map"),kn=ct?gn(bt):te("WeakMap"),Tn=ct?gn(jt):te("Set"),qn=te("WeakSet");function ri(Ie){for(var Fe=Ze(Ie),yt=Fe.length,At=Array(yt),Bt=0;Bt<yt;Bt++)At[Bt]=Ie[Fe[Bt]];return At}function Yn(Ie){for(var Fe=Ze(Ie),yt=Fe.length,At=Array(yt),Bt=0;Bt<yt;Bt++)At[Bt]=[Fe[Bt],Ie[Fe[Bt]]];return At}function Ft(Ie){for(var Fe={},yt=Ze(Ie),At=0,Bt=yt.length;At<Bt;At++)Fe[Ie[yt[At]]]=yt[At];return Fe}function jn(Ie){var Fe=[];for(var yt in Ie)c(Ie[yt])&&Fe.push(yt);return Fe.sort()}function In(Ie,Fe){return function(yt){var At=arguments.length;if(Fe&&(yt=Object(yt)),At<2||null==yt)return yt;for(var Bt=1;Bt<At;Bt++)for(var Lt=arguments[Bt],tn=Ie(Lt),fn=tn.length,$n=0;$n<fn;$n++){var Ln=tn[$n];(!Fe||void 0===yt[Ln])&&(yt[Ln]=Lt[Ln])}return yt}}const Fn=In(Zt),Zn=In(Ze),zn=In(Zt,!0);function vt(Ie){if(!fe(Ie))return{};if(P)return P(Ie);var Fe=function(){};Fe.prototype=Ie;var yt=new Fe;return Fe.prototype=null,yt}function at(Ie,Fe){var yt=vt(Ie);return Fe&&Zn(yt,Fe),yt}function Ot(Ie){return fe(Ie)?en(Ie)?Ie.slice():Fn({},Ie):Ie}function Ht(Ie,Fe){return Fe(Ie),Ie}function hn(Ie){return en(Ie)?Ie:[Ie]}function Kt(Ie){return L.toPath(Ie)}function Xn(Ie,Fe){for(var yt=Fe.length,At=0;At<yt;At++){if(null==Ie)return;Ie=Ie[Fe[At]]}return yt?Ie:void 0}function Ei(Ie,Fe,yt){var At=Xn(Ie,Kt(Fe));return ee(At)?yt:At}function os(Ie,Fe){for(var yt=(Fe=Kt(Fe)).length,At=0;At<yt;At++){var Bt=Fe[At];if(!xt(Ie,Bt))return!1;Ie=Ie[Bt]}return!!yt}function Nn(Ie){return Ie}function mi(Ie){return Ie=Zn({},Ie),function(Fe){return ie(Fe,Ie)}}function ur(Ie){return Ie=Kt(Ie),function(Fe){return Xn(Fe,Ie)}}function yi(Ie,Fe,yt){if(void 0===Fe)return Ie;switch(yt??3){case 1:return function(At){return Ie.call(Fe,At)};case 3:return function(At,Bt,Lt){return Ie.call(Fe,At,Bt,Lt)};case 4:return function(At,Bt,Lt,tn){return Ie.call(Fe,At,Bt,Lt,tn)}}return function(){return Ie.apply(Fe,arguments)}}function nr(Ie,Fe,yt){return null==Ie?Nn:c(Ie)?yi(Ie,Fe,yt):fe(Ie)&&!en(Ie)?mi(Ie):ur(Ie)}function Gi(Ie,Fe){return nr(Ie,Fe,1/0)}function Ai(Ie,Fe,yt){return L.iteratee!==Gi?L.iteratee(Ie,Fe):nr(Ie,Fe,yt)}function Yi(Ie,Fe,yt){Fe=Ai(Fe,yt);for(var At=Ze(Ie),Bt=At.length,Lt={},tn=0;tn<Bt;tn++){var fn=At[tn];Lt[fn]=Fe(Ie[fn],fn,Ie)}return Lt}function Jr(){}function qr(Ie){return null==Ie?Jr:function(Fe){return Ei(Ie,Fe)}}function Tr(Ie,Fe,yt){var At=Array(Math.max(0,Ie));Fe=yi(Fe,yt,1);for(var Bt=0;Bt<Ie;Bt++)At[Bt]=Fe(Bt);return At}function Vn(Ie,Fe){return null==Fe&&(Fe=Ie,Ie=0),Ie+Math.floor(Math.random()*(Fe-Ie+1))}L.toPath=hn,L.iteratee=Gi;const kr=Date.now||function(){return(new Date).getTime()};function ts(Ie){var Fe=function(Lt){return Ie[Lt]},yt="(?:"+Ze(Ie).join("|")+")",At=RegExp(yt),Bt=RegExp(yt,"g");return function(Lt){return At.test(Lt=null==Lt?"":""+Lt)?Lt.replace(Bt,Fe):Lt}}const Ui={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},ws=ts(Ui),We=ts(Ft(Ui)),st=L.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Mt=/(.)^/,nn={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},rn=/\\|'|\r|\n|\u2028|\u2029/g;function bn(Ie){return"\\"+nn[Ie]}var An=/^\s*(\w|\$)+\s*$/;function wi(Ie,Fe,yt){!Fe&&yt&&(Fe=yt),Fe=zn({},Fe,L.templateSettings);var At=RegExp([(Fe.escape||Mt).source,(Fe.interpolate||Mt).source,(Fe.evaluate||Mt).source].join("|")+"|$","g"),Bt=0,Lt="__p+='";Ie.replace(At,function(Ln,lr,Pr,cr,si){return Lt+=Ie.slice(Bt,si).replace(rn,bn),Bt=si+Ln.length,lr?Lt+="'+\n((__t=("+lr+"))==null?'':_.escape(__t))+\n'":Pr?Lt+="'+\n((__t=("+Pr+"))==null?'':__t)+\n'":cr&&(Lt+="';\n"+cr+"\n__p+='"),Ln}),Lt+="';\n";var fn,tn=Fe.variable;if(tn){if(!An.test(tn))throw new Error("variable is not a bare identifier: "+tn)}else Lt="with(obj||{}){\n"+Lt+"}\n",tn="obj";Lt="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+Lt+"return __p;\n";try{fn=new Function(tn,"_",Lt)}catch(Ln){throw Ln.source=Lt,Ln}var $n=function(Ln){return fn.call(this,Ln,L)};return $n.source="function("+tn+"){\n"+Lt+"}",$n}function di(Ie,Fe,yt){var At=(Fe=Kt(Fe)).length;if(!At)return c(yt)?yt.call(Ie):yt;for(var Bt=0;Bt<At;Bt++){var Lt=Ie?.[Fe[Bt]];void 0===Lt&&(Lt=yt,Bt=At),Ie=c(Lt)?Lt.call(Ie):Lt}return Ie}var oi=0;function dr(Ie){var Fe=++oi+"";return Ie?Ie+Fe:Fe}function pr(Ie){var Fe=L(Ie);return Fe._chain=!0,Fe}function Ar(Ie,Fe,yt,At,Bt){if(!(At instanceof Fe))return Ie.apply(yt,Bt);var Lt=vt(Ie.prototype),tn=Ie.apply(Lt,Bt);return fe(tn)?tn:Lt}var Fi=Y(function(Ie,Fe){var yt=Fi.placeholder,At=function(){for(var Bt=0,Lt=Fe.length,tn=Array(Lt),fn=0;fn<Lt;fn++)tn[fn]=Fe[fn]===yt?arguments[Bt++]:Fe[fn];for(;Bt<arguments.length;)tn.push(arguments[Bt++]);return Ar(Ie,At,this,this,tn)};return At});Fi.placeholder=L;const Br=Fi,Zi=Y(function(Ie,Fe,yt){if(!c(Ie))throw new TypeError("Bind must be called on a function");var At=Y(function(Bt){return Ar(Ie,At,Fe,this,yt.concat(Bt))});return At}),ir=je(Je);function ns(Ie,Fe,yt,At){if(At=At||[],Fe||0===Fe){if(Fe<=0)return At.concat(Ie)}else Fe=1/0;for(var Bt=At.length,Lt=0,tn=Je(Ie);Lt<tn;Lt++){var fn=Ie[Lt];if(ir(fn)&&(en(fn)||X(fn)))if(Fe>1)ns(fn,Fe-1,yt,At),Bt=At.length;else for(var $n=0,Ln=fn.length;$n<Ln;)At[Bt++]=fn[$n++];else yt||(At[Bt++]=fn)}return At}const Gs=Y(function(Ie,Fe){var yt=(Fe=ns(Fe,!1,!1)).length;if(yt<1)throw new Error("bindAll must be passed function names");for(;yt--;){var At=Fe[yt];Ie[At]=Zi(Ie[At],Ie)}return Ie});function po(Ie,Fe){var yt=function(At){var Bt=yt.cache,Lt=""+(Fe?Fe.apply(this,arguments):At);return xt(Bt,Lt)||(Bt[Lt]=Ie.apply(this,arguments)),Bt[Lt]};return yt.cache={},yt}const ys=Y(function(Ie,Fe,yt){return setTimeout(function(){return Ie.apply(null,yt)},Fe)}),zs=Br(ys,L,1);function is(Ie,Fe,yt){var At,Bt,Lt,tn,fn=0;yt||(yt={});var $n=function(){fn=!1===yt.leading?0:kr(),At=null,tn=Ie.apply(Bt,Lt),At||(Bt=Lt=null)},Ln=function(){var lr=kr();!fn&&!1===yt.leading&&(fn=lr);var Pr=Fe-(lr-fn);return Bt=this,Lt=arguments,Pr<=0||Pr>Fe?(At&&(clearTimeout(At),At=null),fn=lr,tn=Ie.apply(Bt,Lt),At||(Bt=Lt=null)):!At&&!1!==yt.trailing&&(At=setTimeout($n,Pr)),tn};return Ln.cancel=function(){clearTimeout(At),fn=0,At=Bt=Lt=null},Ln}function Ts(Ie,Fe,yt){var At,Bt,Lt,tn,fn,$n=function(){var lr=kr()-Bt;Fe>lr?At=setTimeout($n,Fe-lr):(At=null,yt||(tn=Ie.apply(fn,Lt)),At||(Lt=fn=null))},Ln=Y(function(lr){return fn=this,Lt=lr,Bt=kr(),At||(At=setTimeout($n,Fe),yt&&(tn=Ie.apply(fn,Lt))),tn});return Ln.cancel=function(){clearTimeout(At),At=Lt=fn=null},Ln}function ho(Ie,Fe){return Br(Fe,Ie)}function Ys(Ie){return function(){return!Ie.apply(this,arguments)}}function Fr(){var Ie=arguments,Fe=Ie.length-1;return function(){for(var yt=Fe,At=Ie[Fe].apply(this,arguments);yt--;)At=Ie[yt].call(this,At);return At}}function Xi(Ie,Fe){return function(){if(--Ie<1)return Fe.apply(this,arguments)}}function Si(Ie,Fe){var yt;return function(){return--Ie>0&&(yt=Fe.apply(this,arguments)),Ie<=1&&(Fe=null),yt}}const Cs=Br(Si,2);function Hn(Ie,Fe,yt){Fe=Ai(Fe,yt);for(var Bt,At=Ze(Ie),Lt=0,tn=At.length;Lt<tn;Lt++)if(Fe(Ie[Bt=At[Lt]],Bt,Ie))return Bt}function As(Ie){return function(Fe,yt,At){yt=Ai(yt,At);for(var Bt=Je(Fe),Lt=Ie>0?0:Bt-1;Lt>=0&&Lt<Bt;Lt+=Ie)if(yt(Fe[Lt],Lt,Fe))return Lt;return-1}}const Rn=As(1),mr=As(-1);function Sr(Ie,Fe,yt,At){for(var Bt=(yt=Ai(yt,At,1))(Fe),Lt=0,tn=Je(Ie);Lt<tn;){var fn=Math.floor((Lt+tn)/2);yt(Ie[fn])<Bt?Lt=fn+1:tn=fn}return Lt}function as(Ie,Fe,yt){return function(At,Bt,Lt){var tn=0,fn=Je(At);if("number"==typeof Lt)Ie>0?tn=Lt>=0?Lt:Math.max(Lt+fn,tn):fn=Lt>=0?Math.min(Lt+1,fn):Lt+fn+1;else if(yt&&Lt&&fn)return At[Lt=yt(At,Bt)]===Bt?Lt:-1;if(Bt!=Bt)return(Lt=Fe(x.call(At,tn,fn),ae))>=0?Lt+tn:-1;for(Lt=Ie>0?tn:fn-1;Lt>=0&&Lt<fn;Lt+=Ie)if(At[Lt]===Bt)return Lt;return-1}}const Qr=as(1,Rn,Sr),Zr=as(-1,mr);function gr(Ie,Fe,yt){var Bt=(ir(Ie)?Rn:Hn)(Ie,Fe,yt);if(void 0!==Bt&&-1!==Bt)return Ie[Bt]}function ls(Ie,Fe){return gr(Ie,mi(Fe))}function zi(Ie,Fe,yt){var At,Bt;if(Fe=yi(Fe,yt),ir(Ie))for(At=0,Bt=Ie.length;At<Bt;At++)Fe(Ie[At],At,Ie);else{var Lt=Ze(Ie);for(At=0,Bt=Lt.length;At<Bt;At++)Fe(Ie[Lt[At]],Lt[At],Ie)}return Ie}function _r(Ie,Fe,yt){Fe=Ai(Fe,yt);for(var At=!ir(Ie)&&Ze(Ie),Bt=(At||Ie).length,Lt=Array(Bt),tn=0;tn<Bt;tn++){var fn=At?At[tn]:tn;Lt[tn]=Fe(Ie[fn],fn,Ie)}return Lt}function cs(Ie){var Fe=function(yt,At,Bt,Lt){var tn=!ir(yt)&&Ze(yt),fn=(tn||yt).length,$n=Ie>0?0:fn-1;for(Lt||(Bt=yt[tn?tn[$n]:$n],$n+=Ie);$n>=0&&$n<fn;$n+=Ie){var Ln=tn?tn[$n]:$n;Bt=At(Bt,yt[Ln],Ln,yt)}return Bt};return function(yt,At,Bt,Lt){var tn=arguments.length>=3;return Fe(yt,yi(At,Lt,4),Bt,tn)}}const vr=cs(1),Ni=cs(-1);function zr(Ie,Fe,yt){var At=[];return Fe=Ai(Fe,yt),zi(Ie,function(Bt,Lt,tn){Fe(Bt,Lt,tn)&&At.push(Bt)}),At}function Wr(Ie,Fe,yt){return zr(Ie,Ys(Ai(Fe)),yt)}function Ls(Ie,Fe,yt){Fe=Ai(Fe,yt);for(var At=!ir(Ie)&&Ze(Ie),Bt=(At||Ie).length,Lt=0;Lt<Bt;Lt++){var tn=At?At[Lt]:Lt;if(!Fe(Ie[tn],tn,Ie))return!1}return!0}function Rr(Ie,Fe,yt){Fe=Ai(Fe,yt);for(var At=!ir(Ie)&&Ze(Ie),Bt=(At||Ie).length,Lt=0;Lt<Bt;Lt++){var tn=At?At[Lt]:Lt;if(Fe(Ie[tn],tn,Ie))return!0}return!1}function Ss(Ie,Fe,yt,At){return ir(Ie)||(Ie=ri(Ie)),("number"!=typeof yt||At)&&(yt=0),Qr(Ie,Fe,yt)>=0}const Di=Y(function(Ie,Fe,yt){var At,Bt;return c(Fe)?Bt=Fe:(Fe=Kt(Fe),At=Fe.slice(0,-1),Fe=Fe[Fe.length-1]),_r(Ie,function(Lt){var tn=Bt;if(!tn){if(At&&At.length&&(Lt=Xn(Lt,At)),null==Lt)return;tn=Lt[Fe]}return null==tn?tn:tn.apply(Lt,yt)})});function xs(Ie,Fe){return _r(Ie,ur(Fe))}function To(Ie,Fe){return zr(Ie,mi(Fe))}function jr(Ie,Fe,yt){var Lt,tn,At=-1/0,Bt=-1/0;if(null==Fe||"number"==typeof Fe&&"object"!=typeof Ie[0]&&null!=Ie)for(var fn=0,$n=(Ie=ir(Ie)?Ie:ri(Ie)).length;fn<$n;fn++)null!=(Lt=Ie[fn])&&Lt>At&&(At=Lt);else Fe=Ai(Fe,yt),zi(Ie,function(Ln,lr,Pr){((tn=Fe(Ln,lr,Pr))>Bt||tn===-1/0&&At===-1/0)&&(At=Ln,Bt=tn)});return At}function ss(Ie,Fe,yt){var Lt,tn,At=1/0,Bt=1/0;if(null==Fe||"number"==typeof Fe&&"object"!=typeof Ie[0]&&null!=Ie)for(var fn=0,$n=(Ie=ir(Ie)?Ie:ri(Ie)).length;fn<$n;fn++)null!=(Lt=Ie[fn])&&Lt<At&&(At=Lt);else Fe=Ai(Fe,yt),zi(Ie,function(Ln,lr,Pr){((tn=Fe(Ln,lr,Pr))<Bt||tn===1/0&&At===1/0)&&(At=Ln,Bt=tn)});return At}var Hs=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Us(Ie){return Ie?en(Ie)?x.call(Ie):$(Ie)?Ie.match(Hs):ir(Ie)?_r(Ie,Nn):ri(Ie):[]}function Es(Ie,Fe,yt){if(null==Fe||yt)return ir(Ie)||(Ie=ri(Ie)),Ie[Vn(Ie.length-1)];var At=Us(Ie),Bt=Je(At);Fe=Math.max(Math.min(Fe,Bt),0);for(var Lt=Bt-1,tn=0;tn<Fe;tn++){var fn=Vn(tn,Lt),$n=At[tn];At[tn]=At[fn],At[fn]=$n}return At.slice(0,Fe)}function ki(Ie){return Es(Ie,1/0)}function No(Ie,Fe,yt){var At=0;return Fe=Ai(Fe,yt),xs(_r(Ie,function(Bt,Lt,tn){return{value:Bt,index:At++,criteria:Fe(Bt,Lt,tn)}}).sort(function(Bt,Lt){var tn=Bt.criteria,fn=Lt.criteria;if(tn!==fn){if(tn>fn||void 0===tn)return 1;if(tn<fn||void 0===fn)return-1}return Bt.index-Lt.index}),"value")}function us(Ie,Fe){return function(yt,At,Bt){var Lt=Fe?[[],[]]:{};return At=Ai(At,Bt),zi(yt,function(tn,fn){var $n=At(tn,fn,yt);Ie(Lt,tn,$n)}),Lt}}const _o=us(function(Ie,Fe,yt){xt(Ie,yt)?Ie[yt].push(Fe):Ie[yt]=[Fe]}),Ii=us(function(Ie,Fe,yt){Ie[yt]=Fe}),Vi=us(function(Ie,Fe,yt){xt(Ie,yt)?Ie[yt]++:Ie[yt]=1}),xr=us(function(Ie,Fe,yt){Ie[yt?0:1].push(Fe)},!0);function Wn(Ie){return null==Ie?0:ir(Ie)?Ie.length:Ze(Ie).length}function Js(Ie,Fe,yt){return Fe in yt}const rr=Y(function(Ie,Fe){var yt={},At=Fe[0];if(null==Ie)return yt;c(At)?(Fe.length>1&&(At=yi(At,Fe[1])),Fe=Zt(Ie)):(At=Js,Fe=ns(Fe,!1,!1),Ie=Object(Ie));for(var Bt=0,Lt=Fe.length;Bt<Lt;Bt++){var tn=Fe[Bt],fn=Ie[tn];At(fn,tn,Ie)&&(yt[tn]=fn)}return yt}),Kr=Y(function(Ie,Fe){var At,yt=Fe[0];return c(yt)?(yt=Ys(yt),Fe.length>1&&(At=Fe[1])):(Fe=_r(ns(Fe,!1,!1),String),yt=function(Bt,Lt){return!Ss(Fe,Lt)}),rr(Ie,yt,At)});function Ao(Ie,Fe,yt){return x.call(Ie,0,Math.max(0,Ie.length-(null==Fe||yt?1:Fe)))}function Ti(Ie,Fe,yt){return null==Ie||Ie.length<1?null==Fe||yt?void 0:[]:null==Fe||yt?Ie[0]:Ao(Ie,Ie.length-Fe)}function yr(Ie,Fe,yt){return x.call(Ie,null==Fe||yt?1:Fe)}function Vr(Ie,Fe,yt){return null==Ie||Ie.length<1?null==Fe||yt?void 0:[]:null==Fe||yt?Ie[Ie.length-1]:yr(Ie,Math.max(0,Ie.length-Fe))}function Er(Ie){return zr(Ie,Boolean)}function cn(Ie,Fe){return ns(Ie,Fe,!1)}const Kn=Y(function(Ie,Fe){return Fe=ns(Fe,!0,!0),zr(Ie,function(yt){return!Ss(Fe,yt)})}),fs=Y(function(Ie,Fe){return Kn(Ie,Fe)});function ei(Ie,Fe,yt,At){G(Fe)||(At=yt,yt=Fe,Fe=!1),null!=yt&&(yt=Ai(yt,At));for(var Bt=[],Lt=[],tn=0,fn=Je(Ie);tn<fn;tn++){var $n=Ie[tn],Ln=yt?yt($n,tn,Ie):$n;Fe&&!yt?((!tn||Lt!==Ln)&&Bt.push($n),Lt=Ln):yt?Ss(Lt,Ln)||(Lt.push(Ln),Bt.push($n)):Ss(Bt,$n)||Bt.push($n)}return Bt}const Hi=Y(function(Ie){return ei(ns(Ie,!0,!0))});function Te(Ie){for(var Fe=[],yt=arguments.length,At=0,Bt=Je(Ie);At<Bt;At++){var Lt=Ie[At];if(!Ss(Fe,Lt)){var tn;for(tn=1;tn<yt&&Ss(arguments[tn],Lt);tn++);tn===yt&&Fe.push(Lt)}}return Fe}function he(Ie){for(var Fe=Ie&&jr(Ie,Je).length||0,yt=Array(Fe),At=0;At<Fe;At++)yt[At]=xs(Ie,At);return yt}const z=Y(he);function $e(Ie,Fe){for(var yt={},At=0,Bt=Je(Ie);At<Bt;At++)Fe?yt[Ie[At]]=Fe[At]:yt[Ie[At][0]]=Ie[At][1];return yt}function $t(Ie,Fe,yt){null==Fe&&(Fe=Ie||0,Ie=0),yt||(yt=Fe<Ie?-1:1);for(var At=Math.max(Math.ceil((Fe-Ie)/yt),0),Bt=Array(At),Lt=0;Lt<At;Lt++,Ie+=yt)Bt[Lt]=Ie;return Bt}function xn(Ie,Fe){if(null==Fe||Fe<1)return[];for(var yt=[],At=0,Bt=Ie.length;At<Bt;)yt.push(x.call(Ie,At,At+=Fe));return yt}function xi(Ie,Fe){return Ie._chain?L(Fe).chain():Fe}function Dr(Ie){return zi(jn(Ie),function(Fe){var yt=L[Fe]=Ie[Fe];L.prototype[Fe]=function(){var At=[this._wrapped];return f.apply(At,arguments),xi(this,yt.apply(L,At))}}),L}zi(["pop","push","reverse","shift","sort","splice","unshift"],function(Ie){var Fe=S[Ie];L.prototype[Ie]=function(){var yt=this._wrapped;return null!=yt&&(Fe.apply(yt,arguments),("shift"===Ie||"splice"===Ie)&&0===yt.length&&delete yt[0]),xi(this,yt)}}),zi(["concat","join","slice"],function(Ie){var Fe=S[Ie];L.prototype[Ie]=function(){var yt=this._wrapped;return null!=yt&&(yt=Fe.apply(yt,arguments)),xi(this,yt)}});const Ir=L;var Ji=Dr(n);Ji._=Ji},5861:(nt,_e,m)=>{"use strict";function n(h,S,y,w,f,x,b){try{var g=h[x](b),N=g.value}catch(R){return void y(R)}g.done?S(N):Promise.resolve(N).then(w,f)}function e(h){return function(){var S=this,y=arguments;return new Promise(function(w,f){var x=h.apply(S,y);function b(N){n(x,w,f,b,g,"next",N)}function g(N){n(x,w,f,b,g,"throw",N)}b(void 0)})}}m.d(_e,{Z:()=>e})}},nt=>{nt(nt.s=2329)}]);